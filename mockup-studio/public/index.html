<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mockup Studio - Professional Frame Setup</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
  <!-- Floating Particles -->
  <div class="particle particle-1"></div>
  <div class="particle particle-2"></div>
  <div class="particle particle-3"></div>
  <div class="particle particle-4"></div>
  <div class="particle particle-5"></div>
  <div class="particle particle-6"></div>
  <div class="particle particle-7"></div>

  <!-- Cursor Glow Effect -->
  <div class="cursor-glow" id="cursorGlow"></div>

  <!-- Login Modal -->
  <div class="modal active" id="loginModal">
    <div class="modal-content" style="max-width: 400px;">
      <div class="modal-header" style="flex-direction: column; align-items: center; text-align: center; border-bottom: none; padding: 3rem 2rem 1rem;">
        <svg width="64" height="64" viewBox="0 0 48 48" fill="none" style="margin-bottom: 1.5rem; filter: drop-shadow(0 0 30px rgba(51, 129, 255, 0.5));">
          <defs>
            <linearGradient id="loginGrad" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#3381ff"/>
              <stop offset="50%" stop-color="#06b6d4"/>
              <stop offset="100%" stop-color="#a855f7"/>
            </linearGradient>
          </defs>
          <rect width="48" height="48" rx="14" fill="url(#loginGrad)"/>
          <path d="M14 17L24 12L34 17L24 22L14 17Z" fill="white" fill-opacity="0.95"/>
          <path d="M14 22L24 27L34 22" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-opacity="0.8"/>
          <path d="M14 27L24 32L34 27" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-opacity="0.6"/>
        </svg>
        <h2 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem;">Welcome back</h2>
        <p style="color: var(--neural-500); font-size: 0.9rem;">Enter your password to continue</p>
      </div>
      <div class="modal-body" style="padding: 1.5rem 2rem 2rem;">
        <form id="loginForm">
          <div class="form-group" style="margin-top: 0;">
            <label for="passwordInput">Password</label>
            <input type="password" id="passwordInput" class="form-control" placeholder="••••••••" autocomplete="current-password" required>
          </div>
          <button type="submit" class="btn btn-primary btn-lg" style="width: 100%; margin-top: 1.5rem;">
            Continue
          </button>
        </form>
        <p style="margin-top: 1.5rem; font-size: 0.8rem; color: var(--neural-700); text-align: center;">
          Default: <code style="background: var(--void-hover); padding: 0.2rem 0.5rem; border-radius: 6px; color: var(--quantum-400); font-family: 'JetBrains Mono', monospace; font-size: 0.75rem;">admin123</code>
        </p>
      </div>
    </div>
  </div>

  <!-- Main App Container -->
  <div id="app" class="app-container" style="display: none;">
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <div class="logo">
          <svg width="48" height="48" viewBox="0 0 48 48" fill="none" class="logo-icon">
            <defs>
              <linearGradient id="logoGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" stop-color="#3381ff"/>
                <stop offset="50%" stop-color="#06b6d4"/>
                <stop offset="100%" stop-color="#a855f7"/>
              </linearGradient>
              <linearGradient id="logoGradInner" x1="0%" y1="100%" x2="100%" y2="0%">
                <stop offset="0%" stop-color="#3381ff" stop-opacity="0.5"/>
                <stop offset="100%" stop-color="#a855f7" stop-opacity="0.5"/>
              </linearGradient>
              <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
                <feGaussianBlur stdDeviation="3" result="blur"/>
                <feComposite in="SourceGraphic" in2="blur" operator="over"/>
              </filter>
            </defs>
            <!-- Outer ring -->
            <circle cx="24" cy="24" r="22" stroke="url(#logoGrad)" stroke-width="2" fill="none" opacity="0.6"/>
            <!-- Inner gradient fill -->
            <circle cx="24" cy="24" r="18" fill="url(#logoGradInner)"/>
            <!-- 3D Layers -->
            <path d="M12 18L24 12L36 18L24 24L12 18Z" fill="white" fill-opacity="0.95" filter="url(#glow)"/>
            <path d="M12 22L24 28L36 22" stroke="white" stroke-width="2.5" stroke-linecap="round" fill="none" opacity="0.7"/>
            <path d="M12 26L24 32L36 26" stroke="white" stroke-width="2.5" stroke-linecap="round" fill="none" opacity="0.4"/>
            <!-- Center node -->
            <circle cx="24" cy="18" r="3" fill="white" opacity="0.9"/>
            <!-- Orbital dots -->
            <circle cx="12" cy="18" r="1.5" fill="#3381ff" class="orbital-dot"/>
            <circle cx="36" cy="18" r="1.5" fill="#a855f7" class="orbital-dot"/>
          </svg>
          <div class="logo-text">
            <h1>Mockup Studio</h1>
            <span class="logo-tagline">Next Generation</span>
          </div>
        </div>
        <div class="header-actions">
          <button class="btn btn-secondary" id="viewTemplatesBtn">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="3" width="7" height="7" rx="1"/>
              <rect x="14" y="3" width="7" height="7" rx="1"/>
              <rect x="3" y="14" width="7" height="7" rx="1"/>
              <rect x="14" y="14" width="7" height="7" rx="1"/>
            </svg>
            Templates
          </button>
          <button class="btn btn-ghost" id="logoutBtn" title="Logout">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
              <polyline points="16 17 21 12 16 7"/>
              <line x1="21" y1="12" x2="9" y2="12"/>
            </svg>
          </button>
        </div>
      </div>
    </header>

    <!-- Mode Selector -->
    <div class="mode-selector">
      <button class="mode-btn active" data-mode="setup">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 4L12 20M4 12L20 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        Setup Mode
      </button>
      <button class="mode-btn" data-mode="generate">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
          <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14l-5-5 1.41-1.41L12 14.17l5.59-5.59L19 10l-7 7z"/>
        </svg>
        Generate Mode
      </button>
    </div>

    <!-- Setup Mode -->
    <div id="setupMode" class="mode-content active">
      <div class="container">
        <div class="setup-section">
          <div class="card">
            <div class="card-header">
              <h2>Upload Billboard Image</h2>
              <p>Start by uploading a photo of your billboard</p>
            </div>
            <div class="card-body">
              <!-- Upload Zone (replaced by canvas when image is loaded) -->
              <div class="upload-zone" id="uploadZone">
                <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
                  <circle cx="32" cy="32" r="28" stroke="currentColor" stroke-width="2" stroke-dasharray="4 4"/>
                  <path d="M32 20V44M20 32H44" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
                </svg>
                <h3>Drop image here or click to upload</h3>
                <p>Supports JPG, PNG, GIF, WEBP up to 50MB</p>
                <input type="file" id="imageUpload" accept="image/*" hidden>
              </div>

              <!-- Canvas Editor (replaces upload zone) -->
              <div id="editorSection" class="editor-section-inline" style="display: none;">
                <div class="editor-container">
            <!-- Zoom Controls -->
            <div class="zoom-controls">
              <button class="zoom-btn" id="zoomOut" title="Zoom Out">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                  <path d="M4 9H16V11H4V9Z"/>
                </svg>
              </button>
              <span class="zoom-level" id="zoomLevel">100%</span>
              <button class="zoom-btn" id="zoomIn" title="Zoom In">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                  <path d="M9 4V16M4 10H16" stroke="currentColor" stroke-width="2"/>
                </svg>
              </button>
              <button class="zoom-btn" id="zoomFit" title="Fit to Screen">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                  <rect x="3" y="3" width="14" height="14" rx="2" stroke="currentColor" stroke-width="2" fill="none"/>
                </svg>
              </button>
              <label class="toggle-label-inline">
                <input type="checkbox" id="pixelUpscale">
                <span>Pixel Upscale</span>
              </label>
            </div>

            <!-- Canvas Wrapper -->
            <div class="canvas-wrapper" id="canvasWrapper">
              <canvas id="canvas"></canvas>
            </div>

            <!-- Hint -->
            <div class="hint-box" id="setupHint">
              Click and drag to draw a box around the billboard screen
            </div>

            <!-- Frame Progress -->
            <div class="frame-progress" id="frameProgress">
              <div class="progress-header">
                <span>Frame <span id="currentFrame">0</span> of <span id="totalFrames">?</span></span>
                <span class="frame-name" id="frameName">Draw frames on the image...</span>
              </div>
              <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
              </div>
            </div>

            <!-- Frame Settings Panel -->
            <div class="frame-settings-panel" id="frameSettingsPanel" style="display: none;">
              <h3>Current Frame Settings</h3>
              <div class="settings-grid">
                <div class="slider-group">
                  <label>Brightness: <span id="brightnessValue">100</span>%</label>
                  <input type="range" id="frameBrightness" min="50" max="200" value="100" class="slider">
                </div>
                <div class="slider-group">
                  <label>Contrast: <span id="contrastValue">100</span>%</label>
                  <input type="range" id="frameContrast" min="50" max="200" value="100" class="slider">
                </div>
                <div class="slider-group">
                  <label>Saturation: <span id="saturationValue">100</span>%</label>
                  <input type="range" id="frameSaturation" min="0" max="200" value="100" class="slider">
                </div>
                <div class="slider-group">
                  <label>Image Blur: <span id="imageBlurValue">0</span></label>
                  <input type="range" id="frameImageBlur" min="0" max="20" value="0" class="slider">
                  <small>Blur entire creative (0 = off)</small>
                </div>
                <div class="slider-group">
                  <label>Edge Blur: <span id="edgeBlurValue">1</span>px</label>
                  <input type="range" id="frameEdgeBlur" min="1" max="20" value="1" class="slider">
                  <small>Edge blur amount (1 = off)</small>
                </div>
                <div class="slider-group">
                  <label>Overlay Opacity: <span id="overlayValue">0</span>%</label>
                  <input type="range" id="frameOverlayOpacity" min="0" max="50" value="0" class="slider">
                  <small>Billboard overlay</small>
                </div>
                <div class="slider-group">
                  <label>Shadow Intensity: <span id="shadowValue">0</span>%</label>
                  <input type="range" id="frameShadowIntensity" min="0" max="100" value="0" class="slider">
                  <small>Edge darkening</small>
                </div>
                <div class="slider-group">
                  <label>Lighting Match: <span id="lightingValue">0</span>%</label>
                  <input type="range" id="frameLightingAdjustment" min="-50" max="50" value="0" class="slider">
                  <small>Brightness matching</small>
                </div>
                <div class="slider-group">
                  <label>Color Temperature: <span id="temperatureValue">0</span></label>
                  <input type="range" id="frameColorTemperature" min="-50" max="50" value="0" class="slider">
                  <small>Warm/cool shift</small>
                </div>
                <div class="slider-group">
                  <label>Vignette: <span id="vignetteValue">0</span>%</label>
                  <input type="range" id="frameVignette" min="0" max="100" value="0" class="slider">
                  <small>Corner darkening</small>
                </div>
                <div class="slider-group">
                  <label>Edge Smoother: <span id="edgeSmootherValue">3</span>x</label>
                  <input type="range" id="frameEdgeSmoother" min="1" max="20" value="3" class="slider">
                  <small>Anti-aliasing smoothness</small>
                </div>
                <div class="slider-group">
                  <label>Sharpening: <span id="sharpeningValue">0</span>%</label>
                  <input type="range" id="frameSharpening" min="0" max="100" value="0" class="slider">
                  <small>Unsharp mask strength (0 = off)</small>
                </div>
                <div class="slider-group">
                  <label>Depth Perception: <span id="depthValue">15</span>x</label>
                  <input type="range" id="frameDepthMultiplier" min="5" max="30" value="15" class="slider">
                  <small>Perspective compensation</small>
                </div>
                <div class="slider-group full-width">
                  <label>Light Direction: <span id="lightDirectionLabel">Top</span></label>
                  <div class="light-direction-picker">
                    <button class="light-dir-btn" data-direction="top-left" title="Top Left">&#8598;</button>
                    <button class="light-dir-btn active" data-direction="top" title="Top">&#8593;</button>
                    <button class="light-dir-btn" data-direction="top-right" title="Top Right">&#8599;</button>
                    <button class="light-dir-btn" data-direction="left" title="Left">&#8592;</button>
                    <button class="light-dir-btn" data-direction="center" title="Center">&#9679;</button>
                    <button class="light-dir-btn" data-direction="right" title="Right">&#8594;</button>
                    <button class="light-dir-btn" data-direction="bottom-left" title="Bottom Left">&#8601;</button>
                    <button class="light-dir-btn" data-direction="bottom" title="Bottom">&#8595;</button>
                    <button class="light-dir-btn" data-direction="bottom-right" title="Bottom Right">&#8600;</button>
                  </div>
                  <input type="hidden" id="frameLightDirection" value="top">
                  <small>Light source direction for day mode depth effects</small>
                </div>
              </div>
              <small class="settings-note">These settings apply to this frame only. Each frame can have different values.</small>
            </div>

            <!-- Test Preview Section -->
            <div class="test-preview-section" id="testPreviewSection" style="display: none;">
              <div class="toggle-row">
                <label class="toggle-switch">
                  <input type="checkbox" id="testPreviewToggle">
                  <span class="toggle-slider"></span>
                </label>
                <div class="toggle-label">
                  <strong>Test Preview Mode</strong>
                  <small>Preview creative on current frame before adding it</small>
                </div>
              </div>
              <div id="testPreviewUpload" style="display: none;">
                <label>Upload Test Creative:</label>
                <input type="file" id="testCreativeUpload" accept="image/*" class="form-control">
                <button class="btn btn-primary" id="generatePreviewBtn" disabled style="width: 100%; margin-top: 0.5rem;">
                  <span id="previewBtnText">Generate Test Preview</span>
                  <span id="previewLoading" style="display: none;">Generating...</span>
                </button>
                <small>Adjust sliders above - preview updates automatically when you release</small>
                <!-- Live Preview Indicator -->
                <div id="livePreviewIndicator" class="live-preview-indicator" style="display: none;">
                  <div class="spinner-small"></div>
                  <span>Updating preview...</span>
                </div>
              </div>
            </div>

            <!-- Control Panel -->
            <div class="control-panel">
              <div class="button-group">
                <button class="btn btn-primary" id="addFrameBtn" disabled>
                  Add Frame
                </button>
                <button class="btn btn-secondary" id="resetFrameBtn">
                  Reset Current Frame
                </button>
                <button class="btn btn-success" id="saveAllBtn" disabled>
                  <svg width="18" height="18" viewBox="0 0 18 18" fill="currentColor">
                    <path d="M15 5L7 13L3 9"/>
                  </svg>
                  Save All Frames
                </button>
                <button class="btn btn-danger" id="clearAllBtn">
                  Clear All
                </button>
              </div>
            </div>

                  <!-- Frames Info -->
                  <div class="frames-info" id="framesInfo" style="display: none;">
                    <strong>Frames configured: <span id="frameCount">0</span></strong>
                  </div>
                </div>
              </div>
              <!-- End of editorSection -->

              <!-- Location & Settings Row (shown after image upload) -->
              <div class="settings-row" id="settingsRow" style="display: none;">
                <div class="form-group">
                  <label for="locationSelect">Select Location <span class="required">*</span></label>
                  <select id="locationSelect" class="form-control" required>
                    <option value="">Choose a location...</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="timeOfDaySelect">Time of Day <span class="required">*</span></label>
                  <select id="timeOfDaySelect" class="form-control" required>
                    <option value="">Select...</option>
                    <option value="day">Day</option>
                    <option value="night">Night</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="finishSelect">Billboard Finish <span class="required">*</span></label>
                  <select id="finishSelect" class="form-control" required>
                    <option value="">Select...</option>
                    <option value="gold">Gold</option>
                    <option value="silver">Silver</option>
                  </select>
                </div>
              </div>

              <!-- Green Screen Detection -->
              <div class="greenscreen-section" id="greenscreenSection" style="display: none;">
                <div class="toggle-row">
                  <label class="toggle-switch">
                    <input type="checkbox" id="greenscreenToggle">
                    <span class="toggle-slider"></span>
                  </label>
                  <div class="toggle-label">
                    <strong>Auto-detect Green Screen</strong>
                    <small>Automatically detect billboard frame using green screen chroma key</small>
                  </div>
                </div>
                <div id="colorPickerSection" class="color-picker-section" style="display: none;">
                  <div class="color-row">
                    <label>Green Screen Color:</label>
                    <input type="color" id="greenscreenColor" value="#1CFF1C">
                    <input type="text" id="greenscreenColorHex" value="#1CFF1C" class="form-control" style="width: 100px;">
                  </div>
                  <small class="hint-text">Hold Shift and click on the green screen in the preview to auto-detect the exact color</small>
                  <div class="slider-row">
                    <label>Color Tolerance: <span id="toleranceValue">40</span></label>
                    <input type="range" id="colorTolerance" min="10" max="100" value="40" class="slider">
                  </div>
                  <button class="btn btn-primary" id="detectGreenscreenBtn" disabled style="width: 100%;">
                    Detect Green Screen Now
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Existing Photos Section -->
        <div class="existing-photos-section" id="existingPhotosSection" style="display: none;">
          <h3>Existing Photos for this Location</h3>
          <div class="photo-grid" id="photoGrid">
            <p class="no-photos">Select a location to view existing photos.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Generate Mode -->
    <div id="generateMode" class="mode-content">
      <div class="container">
        <div class="card">
          <div class="card-header">
            <h2>Generate Mockup</h2>
            <p>Select a location and upload your creative to generate a mockup</p>
          </div>
          <div class="card-body">
            <!-- Generate Settings Row -->
            <div class="settings-row">
              <div class="form-group">
                <label for="generateLocationSelect">Select Location</label>
                <select id="generateLocationSelect" class="form-control">
                  <option value="">Choose a location...</option>
                </select>
              </div>
              <div class="form-group">
                <label for="generateTimeOfDay">Time of Day</label>
                <select id="generateTimeOfDay" class="form-control">
                  <option value="all">All (Default)</option>
                  <option value="day">Day</option>
                  <option value="night">Night</option>
                </select>
              </div>
              <div class="form-group">
                <label for="generateFinish">Billboard Finish</label>
                <select id="generateFinish" class="form-control">
                  <option value="all">All (Default)</option>
                  <option value="gold">Gold</option>
                  <option value="silver">Silver</option>
                </select>
              </div>
            </div>

            <!-- Template Selection -->
            <div class="form-group" id="templateSelectionGroup" style="display: none;">
              <label for="generateTemplate">Select Template</label>
              <select id="generateTemplate" class="form-control">
                <option value="">-- Select a template --</option>
              </select>
              <small>Choose a specific billboard photo template</small>
            </div>

            <!-- Creative Upload -->
            <div class="creative-section">
              <div class="form-group">
                <label for="creativeUpload">Upload Creative/Ad Image</label>
                <input type="file" id="creativeUpload" accept="image/*" class="form-control">
                <small>Upload your own creative image</small>
              </div>

              <div class="divider">
                <span>OR</span>
              </div>

              <div class="form-group">
                <label for="aiCreativePrompt">AI-Generated Creative</label>
                <textarea
                  id="aiCreativePrompt"
                  class="form-control"
                  rows="3"
                  placeholder="e.g., luxury watch ad with gold typography on dark background, professional and elegant"
                ></textarea>
                <small>The AI will generate a billboard creative based on your description (no upload needed)</small>
              </div>
            </div>

            <!-- Config Customization Toggle -->
            <div class="form-group" id="generateConfigToggleSection" style="display: none;">
              <label class="checkbox-label">
                <input type="checkbox" id="generateConfigToggle">
                <span><strong>Customize Frame Configuration</strong> (optional)</span>
              </label>
              <small>Enable to adjust settings like brightness, contrast, edge smoothing, etc.</small>
            </div>

            <!-- Generate Mode Config Sliders -->
            <div class="generate-config-section" id="generateConfigSection" style="display: none;">
              <h3>Frame Configuration</h3>
              <div class="settings-grid">
                <!-- Same sliders as setup mode but with gen- prefix -->
                <div class="slider-group">
                  <label>Brightness: <span id="genBrightnessValue">100</span>%</label>
                  <input type="range" id="genFrameBrightness" min="50" max="200" value="100" class="slider">
                </div>
                <div class="slider-group">
                  <label>Contrast: <span id="genContrastValue">100</span>%</label>
                  <input type="range" id="genFrameContrast" min="50" max="200" value="100" class="slider">
                </div>
                <div class="slider-group">
                  <label>Saturation: <span id="genSaturationValue">100</span>%</label>
                  <input type="range" id="genFrameSaturation" min="0" max="200" value="100" class="slider">
                </div>
                <div class="slider-group">
                  <label>Image Blur: <span id="genImageBlurValue">0</span></label>
                  <input type="range" id="genFrameImageBlur" min="0" max="20" value="0" class="slider">
                </div>
                <div class="slider-group">
                  <label>Edge Blur: <span id="genEdgeBlurValue">1</span>px</label>
                  <input type="range" id="genFrameEdgeBlur" min="1" max="20" value="1" class="slider">
                </div>
                <div class="slider-group">
                  <label>Overlay Opacity: <span id="genOverlayValue">0</span>%</label>
                  <input type="range" id="genFrameOverlayOpacity" min="0" max="50" value="0" class="slider">
                </div>
                <div class="slider-group">
                  <label>Shadow Intensity: <span id="genShadowValue">0</span>%</label>
                  <input type="range" id="genFrameShadowIntensity" min="0" max="100" value="0" class="slider">
                </div>
                <div class="slider-group">
                  <label>Lighting Match: <span id="genLightingValue">0</span>%</label>
                  <input type="range" id="genFrameLightingAdjustment" min="-50" max="50" value="0" class="slider">
                </div>
                <div class="slider-group">
                  <label>Color Temperature: <span id="genTemperatureValue">0</span></label>
                  <input type="range" id="genFrameColorTemperature" min="-50" max="50" value="0" class="slider">
                </div>
                <div class="slider-group">
                  <label>Vignette: <span id="genVignetteValue">0</span>%</label>
                  <input type="range" id="genFrameVignette" min="0" max="100" value="0" class="slider">
                </div>
                <div class="slider-group">
                  <label>Edge Smoother: <span id="genEdgeSmootherValue">3</span>x</label>
                  <input type="range" id="genFrameEdgeSmoother" min="1" max="20" value="3" class="slider">
                </div>
                <div class="slider-group">
                  <label>Sharpening: <span id="genSharpeningValue">0</span>%</label>
                  <input type="range" id="genFrameSharpening" min="0" max="100" value="0" class="slider">
                </div>
                <div class="slider-group">
                  <label>Depth Perception: <span id="genDepthValue">15</span>x</label>
                  <input type="range" id="genFrameDepthMultiplier" min="5" max="30" value="15" class="slider">
                </div>
                <div class="slider-group full-width">
                  <label>Light Direction: <span id="genLightDirectionLabel">Top</span></label>
                  <div class="light-direction-picker">
                    <button class="gen-light-dir-btn" data-direction="top-left" title="Top Left">&#8598;</button>
                    <button class="gen-light-dir-btn active" data-direction="top" title="Top">&#8593;</button>
                    <button class="gen-light-dir-btn" data-direction="top-right" title="Top Right">&#8599;</button>
                    <button class="gen-light-dir-btn" data-direction="left" title="Left">&#8592;</button>
                    <button class="gen-light-dir-btn" data-direction="center" title="Center">&#9679;</button>
                    <button class="gen-light-dir-btn" data-direction="right" title="Right">&#8594;</button>
                    <button class="gen-light-dir-btn" data-direction="bottom-left" title="Bottom Left">&#8601;</button>
                    <button class="gen-light-dir-btn" data-direction="bottom" title="Bottom">&#8595;</button>
                    <button class="gen-light-dir-btn" data-direction="bottom-right" title="Bottom Right">&#8600;</button>
                  </div>
                  <input type="hidden" id="genFrameLightDirection" value="top">
                </div>
              </div>
            </div>

            <div class="button-group" style="margin-top: 1.5rem;">
              <button class="btn btn-primary btn-lg" id="generateBtn" disabled>
                Generate Mockup
              </button>
            </div>

            <!-- Loading -->
            <div class="loading-section" id="generateLoading" style="display: none;">
              <div class="spinner"></div>
              <p>Generating mockup...</p>
            </div>

            <!-- Result -->
            <div class="mockup-result" id="mockupResult"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Templates Modal -->
    <div class="modal" id="templatesModal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>All Templates</h2>
          <button class="modal-close" id="closeModal">&times;</button>
        </div>
        <div class="modal-body">
          <div class="templates-grid" id="templatesGrid">
            <div class="loading">Loading templates...</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>
  </div>

  <script src="/js/app.js"></script>
  <script>
    // Cursor glow effect
    const cursorGlow = document.getElementById('cursorGlow');
    let mouseX = 0, mouseY = 0;
    let glowX = 0, glowY = 0;

    document.addEventListener('mousemove', (e) => {
      mouseX = e.clientX;
      mouseY = e.clientY;
      cursorGlow.classList.add('active');
    });

    document.addEventListener('mouseleave', () => {
      cursorGlow.classList.remove('active');
    });

    // Smooth cursor glow following
    function animateGlow() {
      glowX += (mouseX - glowX) * 0.1;
      glowY += (mouseY - glowY) * 0.1;
      cursorGlow.style.left = glowX + 'px';
      cursorGlow.style.top = glowY + 'px';
      requestAnimationFrame(animateGlow);
    }
    animateGlow();

    // Add ripple class to buttons
    document.querySelectorAll('.btn').forEach(btn => {
      btn.classList.add('ripple');
    });

    // Logout button handler
    const logoutBtn = document.getElementById('logoutBtn');
    if (logoutBtn) {
      logoutBtn.addEventListener('click', async () => {
        const sessionId = localStorage.getItem('sessionId');
        if (sessionId) {
          try {
            await fetch('/api/logout', {
              method: 'POST',
              headers: { 'X-Session-ID': sessionId }
            });
          } catch (e) {}
        }
        localStorage.removeItem('sessionId');
        document.getElementById('app').style.display = 'none';
        document.getElementById('loginModal').classList.add('active');
      });
    }
  </script>
</body>
</html>
