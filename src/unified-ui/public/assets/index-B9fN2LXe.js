var bP=Object.defineProperty;var ob=t=>{throw TypeError(t)};var wP=(t,e,n)=>e in t?bP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var $e=(t,e,n)=>wP(t,typeof e!="symbol"?e+"":e,n),xm=(t,e,n)=>e.has(t)||ob("Cannot "+n);var M=(t,e,n)=>(xm(t,e,"read from private field"),n?n.call(t):e.get(t)),ke=(t,e,n)=>e.has(t)?ob("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ue=(t,e,n,s)=>(xm(t,e,"write to private field"),s?s.call(t,n):e.set(t,n),n),Fe=(t,e,n)=>(xm(t,e,"access private method"),n);var Gd=(t,e,n,s)=>({set _(r){ue(t,e,r,n)},get _(){return M(t,e,s)}});function kP(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in t)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function JS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ZS={exports:{}},kp={},e1={exports:{}},Je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fd=Symbol.for("react.element"),_P=Symbol.for("react.portal"),SP=Symbol.for("react.fragment"),jP=Symbol.for("react.strict_mode"),CP=Symbol.for("react.profiler"),EP=Symbol.for("react.provider"),NP=Symbol.for("react.context"),TP=Symbol.for("react.forward_ref"),PP=Symbol.for("react.suspense"),RP=Symbol.for("react.memo"),AP=Symbol.for("react.lazy"),ab=Symbol.iterator;function OP(t){return t===null||typeof t!="object"?null:(t=ab&&t[ab]||t["@@iterator"],typeof t=="function"?t:null)}var t1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},n1=Object.assign,s1={};function Zl(t,e,n){this.props=t,this.context=e,this.refs=s1,this.updater=n||t1}Zl.prototype.isReactComponent={};Zl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Zl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function r1(){}r1.prototype=Zl.prototype;function Hy(t,e,n){this.props=t,this.context=e,this.refs=s1,this.updater=n||t1}var Wy=Hy.prototype=new r1;Wy.constructor=Hy;n1(Wy,Zl.prototype);Wy.isPureReactComponent=!0;var lb=Array.isArray,i1=Object.prototype.hasOwnProperty,Vy={current:null},o1={key:!0,ref:!0,__self:!0,__source:!0};function a1(t,e,n){var s,r={},i=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)i1.call(e,s)&&!o1.hasOwnProperty(s)&&(r[s]=e[s]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(s in a=t.defaultProps,a)r[s]===void 0&&(r[s]=a[s]);return{$$typeof:fd,type:t,key:i,ref:o,props:r,_owner:Vy.current}}function MP(t,e){return{$$typeof:fd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qy(t){return typeof t=="object"&&t!==null&&t.$$typeof===fd}function IP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var cb=/\/+/g;function ym(t,e){return typeof t=="object"&&t!==null&&t.key!=null?IP(""+t.key):e.toString(36)}function Xh(t,e,n,s,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case fd:case _P:o=!0}}if(o)return o=t,r=r(o),t=s===""?"."+ym(o,0):s,lb(r)?(n="",t!=null&&(n=t.replace(cb,"$&/")+"/"),Xh(r,e,n,"",function(u){return u})):r!=null&&(qy(r)&&(r=MP(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(cb,"$&/")+"/")+t)),e.push(r)),1;if(o=0,s=s===""?".":s+":",lb(t))for(var a=0;a<t.length;a++){i=t[a];var l=s+ym(i,a);o+=Xh(i,e,n,l,r)}else if(l=OP(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=s+ym(i,a++),o+=Xh(i,e,n,l,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Yd(t,e,n){if(t==null)return t;var s=[],r=0;return Xh(t,s,"","",function(i){return e.call(n,i,r++)}),s}function DP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var zn={current:null},Jh={transition:null},LP={ReactCurrentDispatcher:zn,ReactCurrentBatchConfig:Jh,ReactCurrentOwner:Vy};function l1(){throw Error("act(...) is not supported in production builds of React.")}Je.Children={map:Yd,forEach:function(t,e,n){Yd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Yd(t,function(){e++}),e},toArray:function(t){return Yd(t,function(e){return e})||[]},only:function(t){if(!qy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Je.Component=Zl;Je.Fragment=SP;Je.Profiler=CP;Je.PureComponent=Hy;Je.StrictMode=jP;Je.Suspense=PP;Je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LP;Je.act=l1;Je.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=n1({},t.props),r=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Vy.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)i1.call(e,l)&&!o1.hasOwnProperty(l)&&(s[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];s.children=a}return{$$typeof:fd,type:t.type,key:r,ref:i,props:s,_owner:o}};Je.createContext=function(t){return t={$$typeof:NP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:EP,_context:t},t.Consumer=t};Je.createElement=a1;Je.createFactory=function(t){var e=a1.bind(null,t);return e.type=t,e};Je.createRef=function(){return{current:null}};Je.forwardRef=function(t){return{$$typeof:TP,render:t}};Je.isValidElement=qy;Je.lazy=function(t){return{$$typeof:AP,_payload:{_status:-1,_result:t},_init:DP}};Je.memo=function(t,e){return{$$typeof:RP,type:t,compare:e===void 0?null:e}};Je.startTransition=function(t){var e=Jh.transition;Jh.transition={};try{t()}finally{Jh.transition=e}};Je.unstable_act=l1;Je.useCallback=function(t,e){return zn.current.useCallback(t,e)};Je.useContext=function(t){return zn.current.useContext(t)};Je.useDebugValue=function(){};Je.useDeferredValue=function(t){return zn.current.useDeferredValue(t)};Je.useEffect=function(t,e){return zn.current.useEffect(t,e)};Je.useId=function(){return zn.current.useId()};Je.useImperativeHandle=function(t,e,n){return zn.current.useImperativeHandle(t,e,n)};Je.useInsertionEffect=function(t,e){return zn.current.useInsertionEffect(t,e)};Je.useLayoutEffect=function(t,e){return zn.current.useLayoutEffect(t,e)};Je.useMemo=function(t,e){return zn.current.useMemo(t,e)};Je.useReducer=function(t,e,n){return zn.current.useReducer(t,e,n)};Je.useRef=function(t){return zn.current.useRef(t)};Je.useState=function(t){return zn.current.useState(t)};Je.useSyncExternalStore=function(t,e,n){return zn.current.useSyncExternalStore(t,e,n)};Je.useTransition=function(){return zn.current.useTransition()};Je.version="18.3.1";e1.exports=Je;var v=e1.exports;const ge=JS(v),_p=kP({__proto__:null,default:ge},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $P=v,FP=Symbol.for("react.element"),zP=Symbol.for("react.fragment"),BP=Object.prototype.hasOwnProperty,UP=$P.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,HP={key:!0,ref:!0,__self:!0,__source:!0};function c1(t,e,n){var s,r={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)BP.call(e,s)&&!HP.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:FP,type:t,key:i,ref:o,props:r,_owner:UP.current}}kp.Fragment=zP;kp.jsx=c1;kp.jsxs=c1;ZS.exports=kp;var c=ZS.exports,zg={},u1={exports:{}},js={},d1={exports:{}},h1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(E,P){var F=E.length;E.push(P);e:for(;0<F;){var V=F-1>>>1,H=E[V];if(0<r(H,P))E[V]=P,E[F]=H,F=V;else break e}}function n(E){return E.length===0?null:E[0]}function s(E){if(E.length===0)return null;var P=E[0],F=E.pop();if(F!==P){E[0]=F;e:for(var V=0,H=E.length,he=H>>>1;V<he;){var ee=2*(V+1)-1,U=E[ee],Q=ee+1,de=E[Q];if(0>r(U,F))Q<H&&0>r(de,U)?(E[V]=de,E[Q]=F,V=Q):(E[V]=U,E[ee]=F,V=ee);else if(Q<H&&0>r(de,F))E[V]=de,E[Q]=F,V=Q;else break e}}return P}function r(E,P){var F=E.sortIndex-P.sortIndex;return F!==0?F:E.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,f=3,p=!1,w=!1,x=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(E){for(var P=n(u);P!==null;){if(P.callback===null)s(u);else if(P.startTime<=E)s(u),P.sortIndex=P.expirationTime,e(l,P);else break;P=n(u)}}function k(E){if(x=!1,b(E),!w)if(n(l)!==null)w=!0,A(_);else{var P=n(u);P!==null&&W(k,P.startTime-E)}}function _(E,P){w=!1,x&&(x=!1,g(j),j=-1),p=!0;var F=f;try{for(b(P),h=n(l);h!==null&&(!(h.expirationTime>P)||E&&!L());){var V=h.callback;if(typeof V=="function"){h.callback=null,f=h.priorityLevel;var H=V(h.expirationTime<=P);P=t.unstable_now(),typeof H=="function"?h.callback=H:h===n(l)&&s(l),b(P)}else s(l);h=n(l)}if(h!==null)var he=!0;else{var ee=n(u);ee!==null&&W(k,ee.startTime-P),he=!1}return he}finally{h=null,f=F,p=!1}}var C=!1,S=null,j=-1,N=5,T=-1;function L(){return!(t.unstable_now()-T<N)}function D(){if(S!==null){var E=t.unstable_now();T=E;var P=!0;try{P=S(!0,E)}finally{P?O():(C=!1,S=null)}}else C=!1}var O;if(typeof m=="function")O=function(){m(D)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,I=$.port2;$.port1.onmessage=D,O=function(){I.postMessage(null)}}else O=function(){y(D,0)};function A(E){S=E,C||(C=!0,O())}function W(E,P){j=y(function(){E(t.unstable_now())},P)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(E){E.callback=null},t.unstable_continueExecution=function(){w||p||(w=!0,A(_))},t.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<E?Math.floor(1e3/E):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(E){switch(f){case 1:case 2:case 3:var P=3;break;default:P=f}var F=f;f=P;try{return E()}finally{f=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(E,P){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var F=f;f=E;try{return P()}finally{f=F}},t.unstable_scheduleCallback=function(E,P,F){var V=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?V+F:V):F=V,E){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=F+H,E={id:d++,callback:P,priorityLevel:E,startTime:F,expirationTime:H,sortIndex:-1},F>V?(E.sortIndex=F,e(u,E),n(l)===null&&E===n(u)&&(x?(g(j),j=-1):x=!0,W(k,F-V))):(E.sortIndex=H,e(l,E),w||p||(w=!0,A(_))),E},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(E){var P=f;return function(){var F=f;f=P;try{return E.apply(this,arguments)}finally{f=F}}}})(h1);d1.exports=h1;var WP=d1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VP=v,Ss=WP;function re(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f1=new Set,fu={};function va(t,e){Wl(t,e),Wl(t+"Capture",e)}function Wl(t,e){for(fu[t]=e,t=0;t<e.length;t++)f1.add(e[t])}var ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bg=Object.prototype.hasOwnProperty,qP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ub={},db={};function KP(t){return Bg.call(db,t)?!0:Bg.call(ub,t)?!1:qP.test(t)?db[t]=!0:(ub[t]=!0,!1)}function GP(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function YP(t,e,n,s){if(e===null||typeof e>"u"||GP(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Bn(t,e,n,s,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var bn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){bn[t]=new Bn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];bn[e]=new Bn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){bn[t]=new Bn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){bn[t]=new Bn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){bn[t]=new Bn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){bn[t]=new Bn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){bn[t]=new Bn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){bn[t]=new Bn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){bn[t]=new Bn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ky=/[\-:]([a-z])/g;function Gy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ky,Gy);bn[e]=new Bn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ky,Gy);bn[e]=new Bn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ky,Gy);bn[e]=new Bn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){bn[t]=new Bn(t,1,!1,t.toLowerCase(),null,!1,!1)});bn.xlinkHref=new Bn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){bn[t]=new Bn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Yy(t,e,n,s){var r=bn.hasOwnProperty(e)?bn[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(YP(e,n,r,s)&&(n=null),s||r===null?KP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,s=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var ui=VP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qd=Symbol.for("react.element"),Ja=Symbol.for("react.portal"),Za=Symbol.for("react.fragment"),Qy=Symbol.for("react.strict_mode"),Ug=Symbol.for("react.profiler"),p1=Symbol.for("react.provider"),m1=Symbol.for("react.context"),Xy=Symbol.for("react.forward_ref"),Hg=Symbol.for("react.suspense"),Wg=Symbol.for("react.suspense_list"),Jy=Symbol.for("react.memo"),bi=Symbol.for("react.lazy"),g1=Symbol.for("react.offscreen"),hb=Symbol.iterator;function wc(t){return t===null||typeof t!="object"?null:(t=hb&&t[hb]||t["@@iterator"],typeof t=="function"?t:null)}var Ut=Object.assign,vm;function Fc(t){if(vm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);vm=e&&e[1]||""}return`
`+vm+t}var bm=!1;function wm(t,e){if(!t||bm)return"";bm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var s=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){s=u}t.call(e.prototype)}else{try{throw Error()}catch(u){s=u}t()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),i=s.stack.split(`
`),o=r.length-1,a=i.length-1;1<=o&&0<=a&&r[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==i[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{bm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Fc(t):""}function QP(t){switch(t.tag){case 5:return Fc(t.type);case 16:return Fc("Lazy");case 13:return Fc("Suspense");case 19:return Fc("SuspenseList");case 0:case 2:case 15:return t=wm(t.type,!1),t;case 11:return t=wm(t.type.render,!1),t;case 1:return t=wm(t.type,!0),t;default:return""}}function Vg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Za:return"Fragment";case Ja:return"Portal";case Ug:return"Profiler";case Qy:return"StrictMode";case Hg:return"Suspense";case Wg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case m1:return(t.displayName||"Context")+".Consumer";case p1:return(t._context.displayName||"Context")+".Provider";case Xy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Jy:return e=t.displayName||null,e!==null?e:Vg(t.type)||"Memo";case bi:e=t._payload,t=t._init;try{return Vg(t(e))}catch{}}return null}function XP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vg(e);case 8:return e===Qy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function so(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function x1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function JP(t){var e=x1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Xd(t){t._valueTracker||(t._valueTracker=JP(t))}function y1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=x1(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function jf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function qg(t,e){var n=e.checked;return Ut({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function fb(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=so(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function v1(t,e){e=e.checked,e!=null&&Yy(t,"checked",e,!1)}function Kg(t,e){v1(t,e);var n=so(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Gg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Gg(t,e.type,so(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function pb(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Gg(t,e,n){(e!=="number"||jf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var zc=Array.isArray;function fl(t,e,n,s){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&s&&(t[n].defaultSelected=!0)}else{for(n=""+so(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Yg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(re(91));return Ut({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function mb(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(re(92));if(zc(n)){if(1<n.length)throw Error(re(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:so(n)}}function b1(t,e){var n=so(e.value),s=so(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function gb(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function w1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?w1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Jd,k1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Jd=Jd||document.createElement("div"),Jd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Jd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function pu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Xc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ZP=["Webkit","ms","Moz","O"];Object.keys(Xc).forEach(function(t){ZP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Xc[e]=Xc[t]})});function _1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Xc.hasOwnProperty(t)&&Xc[t]?(""+e).trim():e+"px"}function S1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=_1(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,r):t[n]=r}}var eR=Ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xg(t,e){if(e){if(eR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(re(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(re(62))}}function Jg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zg=null;function Zy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ex=null,pl=null,ml=null;function xb(t){if(t=gd(t)){if(typeof ex!="function")throw Error(re(280));var e=t.stateNode;e&&(e=Np(e),ex(t.stateNode,t.type,e))}}function j1(t){pl?ml?ml.push(t):ml=[t]:pl=t}function C1(){if(pl){var t=pl,e=ml;if(ml=pl=null,xb(t),e)for(t=0;t<e.length;t++)xb(e[t])}}function E1(t,e){return t(e)}function N1(){}var km=!1;function T1(t,e,n){if(km)return t(e,n);km=!0;try{return E1(t,e,n)}finally{km=!1,(pl!==null||ml!==null)&&(N1(),C1())}}function mu(t,e){var n=t.stateNode;if(n===null)return null;var s=Np(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(re(231,e,typeof n));return n}var tx=!1;if(ni)try{var kc={};Object.defineProperty(kc,"passive",{get:function(){tx=!0}}),window.addEventListener("test",kc,kc),window.removeEventListener("test",kc,kc)}catch{tx=!1}function tR(t,e,n,s,r,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Jc=!1,Cf=null,Ef=!1,nx=null,nR={onError:function(t){Jc=!0,Cf=t}};function sR(t,e,n,s,r,i,o,a,l){Jc=!1,Cf=null,tR.apply(nR,arguments)}function rR(t,e,n,s,r,i,o,a,l){if(sR.apply(this,arguments),Jc){if(Jc){var u=Cf;Jc=!1,Cf=null}else throw Error(re(198));Ef||(Ef=!0,nx=u)}}function ba(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function P1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function yb(t){if(ba(t)!==t)throw Error(re(188))}function iR(t){var e=t.alternate;if(!e){if(e=ba(t),e===null)throw Error(re(188));return e!==t?null:t}for(var n=t,s=e;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return yb(r),t;if(i===s)return yb(r),e;i=i.sibling}throw Error(re(188))}if(n.return!==s.return)n=r,s=i;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,s=i;break}if(a===s){o=!0,s=r,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,s=r;break}if(a===s){o=!0,s=i,n=r;break}a=a.sibling}if(!o)throw Error(re(189))}}if(n.alternate!==s)throw Error(re(190))}if(n.tag!==3)throw Error(re(188));return n.stateNode.current===n?t:e}function R1(t){return t=iR(t),t!==null?A1(t):null}function A1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=A1(t);if(e!==null)return e;t=t.sibling}return null}var O1=Ss.unstable_scheduleCallback,vb=Ss.unstable_cancelCallback,oR=Ss.unstable_shouldYield,aR=Ss.unstable_requestPaint,Yt=Ss.unstable_now,lR=Ss.unstable_getCurrentPriorityLevel,ev=Ss.unstable_ImmediatePriority,M1=Ss.unstable_UserBlockingPriority,Nf=Ss.unstable_NormalPriority,cR=Ss.unstable_LowPriority,I1=Ss.unstable_IdlePriority,Sp=null,Tr=null;function uR(t){if(Tr&&typeof Tr.onCommitFiberRoot=="function")try{Tr.onCommitFiberRoot(Sp,t,void 0,(t.current.flags&128)===128)}catch{}}var tr=Math.clz32?Math.clz32:fR,dR=Math.log,hR=Math.LN2;function fR(t){return t>>>=0,t===0?32:31-(dR(t)/hR|0)|0}var Zd=64,eh=4194304;function Bc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Tf(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,r=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?s=Bc(a):(i&=o,i!==0&&(s=Bc(i)))}else o=n&~r,o!==0?s=Bc(o):i!==0&&(s=Bc(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-tr(e),r=1<<n,s|=t[n],e&=~r;return s}function pR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mR(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-tr(i),a=1<<o,l=r[o];l===-1?(!(a&n)||a&s)&&(r[o]=pR(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function sx(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function D1(){var t=Zd;return Zd<<=1,!(Zd&4194240)&&(Zd=64),t}function _m(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function pd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-tr(e),t[e]=n}function gR(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-tr(n),i=1<<r;e[r]=0,s[r]=-1,t[r]=-1,n&=~i}}function tv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-tr(n),r=1<<s;r&e|t[s]&e&&(t[s]|=e),n&=~r}}var mt=0;function L1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var $1,nv,F1,z1,B1,rx=!1,th=[],Wi=null,Vi=null,qi=null,gu=new Map,xu=new Map,_i=[],xR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bb(t,e){switch(t){case"focusin":case"focusout":Wi=null;break;case"dragenter":case"dragleave":Vi=null;break;case"mouseover":case"mouseout":qi=null;break;case"pointerover":case"pointerout":gu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xu.delete(e.pointerId)}}function _c(t,e,n,s,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=gd(e),e!==null&&nv(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function yR(t,e,n,s,r){switch(e){case"focusin":return Wi=_c(Wi,t,e,n,s,r),!0;case"dragenter":return Vi=_c(Vi,t,e,n,s,r),!0;case"mouseover":return qi=_c(qi,t,e,n,s,r),!0;case"pointerover":var i=r.pointerId;return gu.set(i,_c(gu.get(i)||null,t,e,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,xu.set(i,_c(xu.get(i)||null,t,e,n,s,r)),!0}return!1}function U1(t){var e=Fo(t.target);if(e!==null){var n=ba(e);if(n!==null){if(e=n.tag,e===13){if(e=P1(n),e!==null){t.blockedOn=e,B1(t.priority,function(){F1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Zh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ix(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);Zg=s,n.target.dispatchEvent(s),Zg=null}else return e=gd(n),e!==null&&nv(e),t.blockedOn=n,!1;e.shift()}return!0}function wb(t,e,n){Zh(t)&&n.delete(e)}function vR(){rx=!1,Wi!==null&&Zh(Wi)&&(Wi=null),Vi!==null&&Zh(Vi)&&(Vi=null),qi!==null&&Zh(qi)&&(qi=null),gu.forEach(wb),xu.forEach(wb)}function Sc(t,e){t.blockedOn===e&&(t.blockedOn=null,rx||(rx=!0,Ss.unstable_scheduleCallback(Ss.unstable_NormalPriority,vR)))}function yu(t){function e(r){return Sc(r,t)}if(0<th.length){Sc(th[0],t);for(var n=1;n<th.length;n++){var s=th[n];s.blockedOn===t&&(s.blockedOn=null)}}for(Wi!==null&&Sc(Wi,t),Vi!==null&&Sc(Vi,t),qi!==null&&Sc(qi,t),gu.forEach(e),xu.forEach(e),n=0;n<_i.length;n++)s=_i[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<_i.length&&(n=_i[0],n.blockedOn===null);)U1(n),n.blockedOn===null&&_i.shift()}var gl=ui.ReactCurrentBatchConfig,Pf=!0;function bR(t,e,n,s){var r=mt,i=gl.transition;gl.transition=null;try{mt=1,sv(t,e,n,s)}finally{mt=r,gl.transition=i}}function wR(t,e,n,s){var r=mt,i=gl.transition;gl.transition=null;try{mt=4,sv(t,e,n,s)}finally{mt=r,gl.transition=i}}function sv(t,e,n,s){if(Pf){var r=ix(t,e,n,s);if(r===null)Om(t,e,s,Rf,n),bb(t,s);else if(yR(r,t,e,n,s))s.stopPropagation();else if(bb(t,s),e&4&&-1<xR.indexOf(t)){for(;r!==null;){var i=gd(r);if(i!==null&&$1(i),i=ix(t,e,n,s),i===null&&Om(t,e,s,Rf,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else Om(t,e,s,null,n)}}var Rf=null;function ix(t,e,n,s){if(Rf=null,t=Zy(s),t=Fo(t),t!==null)if(e=ba(t),e===null)t=null;else if(n=e.tag,n===13){if(t=P1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Rf=t,null}function H1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lR()){case ev:return 1;case M1:return 4;case Nf:case cR:return 16;case I1:return 536870912;default:return 16}default:return 16}}var Li=null,rv=null,ef=null;function W1(){if(ef)return ef;var t,e=rv,n=e.length,s,r="value"in Li?Li.value:Li.textContent,i=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===r[i-s];s++);return ef=r.slice(t,1<s?1-s:void 0)}function tf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function nh(){return!0}function kb(){return!1}function Cs(t){function e(n,s,r,i,o){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?nh:kb,this.isPropagationStopped=kb,this}return Ut(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=nh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=nh)},persist:function(){},isPersistent:nh}),e}var ec={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},iv=Cs(ec),md=Ut({},ec,{view:0,detail:0}),kR=Cs(md),Sm,jm,jc,jp=Ut({},md,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ov,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==jc&&(jc&&t.type==="mousemove"?(Sm=t.screenX-jc.screenX,jm=t.screenY-jc.screenY):jm=Sm=0,jc=t),Sm)},movementY:function(t){return"movementY"in t?t.movementY:jm}}),_b=Cs(jp),_R=Ut({},jp,{dataTransfer:0}),SR=Cs(_R),jR=Ut({},md,{relatedTarget:0}),Cm=Cs(jR),CR=Ut({},ec,{animationName:0,elapsedTime:0,pseudoElement:0}),ER=Cs(CR),NR=Ut({},ec,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),TR=Cs(NR),PR=Ut({},ec,{data:0}),Sb=Cs(PR),RR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},AR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},OR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function MR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=OR[t])?!!e[t]:!1}function ov(){return MR}var IR=Ut({},md,{key:function(t){if(t.key){var e=RR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=tf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?AR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ov,charCode:function(t){return t.type==="keypress"?tf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?tf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),DR=Cs(IR),LR=Ut({},jp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jb=Cs(LR),$R=Ut({},md,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ov}),FR=Cs($R),zR=Ut({},ec,{propertyName:0,elapsedTime:0,pseudoElement:0}),BR=Cs(zR),UR=Ut({},jp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),HR=Cs(UR),WR=[9,13,27,32],av=ni&&"CompositionEvent"in window,Zc=null;ni&&"documentMode"in document&&(Zc=document.documentMode);var VR=ni&&"TextEvent"in window&&!Zc,V1=ni&&(!av||Zc&&8<Zc&&11>=Zc),Cb=" ",Eb=!1;function q1(t,e){switch(t){case"keyup":return WR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function K1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var el=!1;function qR(t,e){switch(t){case"compositionend":return K1(e);case"keypress":return e.which!==32?null:(Eb=!0,Cb);case"textInput":return t=e.data,t===Cb&&Eb?null:t;default:return null}}function KR(t,e){if(el)return t==="compositionend"||!av&&q1(t,e)?(t=W1(),ef=rv=Li=null,el=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return V1&&e.locale!=="ko"?null:e.data;default:return null}}var GR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!GR[t.type]:e==="textarea"}function G1(t,e,n,s){j1(s),e=Af(e,"onChange"),0<e.length&&(n=new iv("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var eu=null,vu=null;function YR(t){ij(t,0)}function Cp(t){var e=sl(t);if(y1(e))return t}function QR(t,e){if(t==="change")return e}var Y1=!1;if(ni){var Em;if(ni){var Nm="oninput"in document;if(!Nm){var Tb=document.createElement("div");Tb.setAttribute("oninput","return;"),Nm=typeof Tb.oninput=="function"}Em=Nm}else Em=!1;Y1=Em&&(!document.documentMode||9<document.documentMode)}function Pb(){eu&&(eu.detachEvent("onpropertychange",Q1),vu=eu=null)}function Q1(t){if(t.propertyName==="value"&&Cp(vu)){var e=[];G1(e,vu,t,Zy(t)),T1(YR,e)}}function XR(t,e,n){t==="focusin"?(Pb(),eu=e,vu=n,eu.attachEvent("onpropertychange",Q1)):t==="focusout"&&Pb()}function JR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Cp(vu)}function ZR(t,e){if(t==="click")return Cp(e)}function eA(t,e){if(t==="input"||t==="change")return Cp(e)}function tA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rr=typeof Object.is=="function"?Object.is:tA;function bu(t,e){if(rr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!Bg.call(e,r)||!rr(t[r],e[r]))return!1}return!0}function Rb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ab(t,e){var n=Rb(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Rb(n)}}function X1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?X1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function J1(){for(var t=window,e=jf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=jf(t.document)}return e}function lv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function nA(t){var e=J1(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&X1(n.ownerDocument.documentElement,n)){if(s!==null&&lv(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!t.extend&&i>s&&(r=s,s=i,i=r),r=Ab(n,i);var o=Ab(n,s);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var sA=ni&&"documentMode"in document&&11>=document.documentMode,tl=null,ox=null,tu=null,ax=!1;function Ob(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ax||tl==null||tl!==jf(s)||(s=tl,"selectionStart"in s&&lv(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),tu&&bu(tu,s)||(tu=s,s=Af(ox,"onSelect"),0<s.length&&(e=new iv("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=tl)))}function sh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var nl={animationend:sh("Animation","AnimationEnd"),animationiteration:sh("Animation","AnimationIteration"),animationstart:sh("Animation","AnimationStart"),transitionend:sh("Transition","TransitionEnd")},Tm={},Z1={};ni&&(Z1=document.createElement("div").style,"AnimationEvent"in window||(delete nl.animationend.animation,delete nl.animationiteration.animation,delete nl.animationstart.animation),"TransitionEvent"in window||delete nl.transitionend.transition);function Ep(t){if(Tm[t])return Tm[t];if(!nl[t])return t;var e=nl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Z1)return Tm[t]=e[n];return t}var ej=Ep("animationend"),tj=Ep("animationiteration"),nj=Ep("animationstart"),sj=Ep("transitionend"),rj=new Map,Mb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ho(t,e){rj.set(t,e),va(e,[t])}for(var Pm=0;Pm<Mb.length;Pm++){var Rm=Mb[Pm],rA=Rm.toLowerCase(),iA=Rm[0].toUpperCase()+Rm.slice(1);ho(rA,"on"+iA)}ho(ej,"onAnimationEnd");ho(tj,"onAnimationIteration");ho(nj,"onAnimationStart");ho("dblclick","onDoubleClick");ho("focusin","onFocus");ho("focusout","onBlur");ho(sj,"onTransitionEnd");Wl("onMouseEnter",["mouseout","mouseover"]);Wl("onMouseLeave",["mouseout","mouseover"]);Wl("onPointerEnter",["pointerout","pointerover"]);Wl("onPointerLeave",["pointerout","pointerover"]);va("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));va("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));va("onBeforeInput",["compositionend","keypress","textInput","paste"]);va("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));va("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));va("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Uc));function Ib(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,rR(s,e,void 0,t),t.currentTarget=null}function ij(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&r.isPropagationStopped())break e;Ib(r,a,u),i=l}else for(o=0;o<s.length;o++){if(a=s[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&r.isPropagationStopped())break e;Ib(r,a,u),i=l}}}if(Ef)throw t=nx,Ef=!1,nx=null,t}function Ct(t,e){var n=e[hx];n===void 0&&(n=e[hx]=new Set);var s=t+"__bubble";n.has(s)||(oj(e,t,2,!1),n.add(s))}function Am(t,e,n){var s=0;e&&(s|=4),oj(n,t,s,e)}var rh="_reactListening"+Math.random().toString(36).slice(2);function wu(t){if(!t[rh]){t[rh]=!0,f1.forEach(function(n){n!=="selectionchange"&&(oA.has(n)||Am(n,!1,t),Am(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[rh]||(e[rh]=!0,Am("selectionchange",!1,e))}}function oj(t,e,n,s){switch(H1(e)){case 1:var r=bR;break;case 4:r=wR;break;default:r=sv}n=r.bind(null,e,n,t),r=void 0,!tx||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Om(t,e,n,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var a=s.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Fo(a),o===null)return;if(l=o.tag,l===5||l===6){s=i=o;continue e}a=a.parentNode}}s=s.return}T1(function(){var u=i,d=Zy(n),h=[];e:{var f=rj.get(t);if(f!==void 0){var p=iv,w=t;switch(t){case"keypress":if(tf(n)===0)break e;case"keydown":case"keyup":p=DR;break;case"focusin":w="focus",p=Cm;break;case"focusout":w="blur",p=Cm;break;case"beforeblur":case"afterblur":p=Cm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=_b;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=SR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=FR;break;case ej:case tj:case nj:p=ER;break;case sj:p=BR;break;case"scroll":p=kR;break;case"wheel":p=HR;break;case"copy":case"cut":case"paste":p=TR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=jb}var x=(e&4)!==0,y=!x&&t==="scroll",g=x?f!==null?f+"Capture":null:f;x=[];for(var m=u,b;m!==null;){b=m;var k=b.stateNode;if(b.tag===5&&k!==null&&(b=k,g!==null&&(k=mu(m,g),k!=null&&x.push(ku(m,k,b)))),y)break;m=m.return}0<x.length&&(f=new p(f,w,null,n,d),h.push({event:f,listeners:x}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==Zg&&(w=n.relatedTarget||n.fromElement)&&(Fo(w)||w[si]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(w=n.relatedTarget||n.toElement,p=u,w=w?Fo(w):null,w!==null&&(y=ba(w),w!==y||w.tag!==5&&w.tag!==6)&&(w=null)):(p=null,w=u),p!==w)){if(x=_b,k="onMouseLeave",g="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(x=jb,k="onPointerLeave",g="onPointerEnter",m="pointer"),y=p==null?f:sl(p),b=w==null?f:sl(w),f=new x(k,m+"leave",p,n,d),f.target=y,f.relatedTarget=b,k=null,Fo(d)===u&&(x=new x(g,m+"enter",w,n,d),x.target=b,x.relatedTarget=y,k=x),y=k,p&&w)t:{for(x=p,g=w,m=0,b=x;b;b=Ia(b))m++;for(b=0,k=g;k;k=Ia(k))b++;for(;0<m-b;)x=Ia(x),m--;for(;0<b-m;)g=Ia(g),b--;for(;m--;){if(x===g||g!==null&&x===g.alternate)break t;x=Ia(x),g=Ia(g)}x=null}else x=null;p!==null&&Db(h,f,p,x,!1),w!==null&&y!==null&&Db(h,y,w,x,!0)}}e:{if(f=u?sl(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var _=QR;else if(Nb(f))if(Y1)_=eA;else{_=JR;var C=XR}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=ZR);if(_&&(_=_(t,u))){G1(h,_,n,d);break e}C&&C(t,f,u),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&Gg(f,"number",f.value)}switch(C=u?sl(u):window,t){case"focusin":(Nb(C)||C.contentEditable==="true")&&(tl=C,ox=u,tu=null);break;case"focusout":tu=ox=tl=null;break;case"mousedown":ax=!0;break;case"contextmenu":case"mouseup":case"dragend":ax=!1,Ob(h,n,d);break;case"selectionchange":if(sA)break;case"keydown":case"keyup":Ob(h,n,d)}var S;if(av)e:{switch(t){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else el?q1(t,n)&&(j="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(V1&&n.locale!=="ko"&&(el||j!=="onCompositionStart"?j==="onCompositionEnd"&&el&&(S=W1()):(Li=d,rv="value"in Li?Li.value:Li.textContent,el=!0)),C=Af(u,j),0<C.length&&(j=new Sb(j,t,null,n,d),h.push({event:j,listeners:C}),S?j.data=S:(S=K1(n),S!==null&&(j.data=S)))),(S=VR?qR(t,n):KR(t,n))&&(u=Af(u,"onBeforeInput"),0<u.length&&(d=new Sb("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=S))}ij(h,e)})}function ku(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Af(t,e){for(var n=e+"Capture",s=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=mu(t,n),i!=null&&s.unshift(ku(t,i,r)),i=mu(t,e),i!=null&&s.push(ku(t,i,r))),t=t.return}return s}function Ia(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Db(t,e,n,s,r){for(var i=e._reactName,o=[];n!==null&&n!==s;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===s)break;a.tag===5&&u!==null&&(a=u,r?(l=mu(n,i),l!=null&&o.unshift(ku(n,l,a))):r||(l=mu(n,i),l!=null&&o.push(ku(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var aA=/\r\n?/g,lA=/\u0000|\uFFFD/g;function Lb(t){return(typeof t=="string"?t:""+t).replace(aA,`
`).replace(lA,"")}function ih(t,e,n){if(e=Lb(e),Lb(t)!==e&&n)throw Error(re(425))}function Of(){}var lx=null,cx=null;function ux(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var dx=typeof setTimeout=="function"?setTimeout:void 0,cA=typeof clearTimeout=="function"?clearTimeout:void 0,$b=typeof Promise=="function"?Promise:void 0,uA=typeof queueMicrotask=="function"?queueMicrotask:typeof $b<"u"?function(t){return $b.resolve(null).then(t).catch(dA)}:dx;function dA(t){setTimeout(function(){throw t})}function Mm(t,e){var n=e,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){t.removeChild(r),yu(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);yu(e)}function Ki(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Fb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var tc=Math.random().toString(36).slice(2),jr="__reactFiber$"+tc,_u="__reactProps$"+tc,si="__reactContainer$"+tc,hx="__reactEvents$"+tc,hA="__reactListeners$"+tc,fA="__reactHandles$"+tc;function Fo(t){var e=t[jr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[si]||n[jr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Fb(t);t!==null;){if(n=t[jr])return n;t=Fb(t)}return e}t=n,n=t.parentNode}return null}function gd(t){return t=t[jr]||t[si],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function sl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(re(33))}function Np(t){return t[_u]||null}var fx=[],rl=-1;function fo(t){return{current:t}}function Pt(t){0>rl||(t.current=fx[rl],fx[rl]=null,rl--)}function kt(t,e){rl++,fx[rl]=t.current,t.current=e}var ro={},Pn=fo(ro),ss=fo(!1),aa=ro;function Vl(t,e){var n=t.type.contextTypes;if(!n)return ro;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=e[i];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function rs(t){return t=t.childContextTypes,t!=null}function Mf(){Pt(ss),Pt(Pn)}function zb(t,e,n){if(Pn.current!==ro)throw Error(re(168));kt(Pn,e),kt(ss,n)}function aj(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(re(108,XP(t)||"Unknown",r));return Ut({},n,s)}function If(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ro,aa=Pn.current,kt(Pn,t),kt(ss,ss.current),!0}function Bb(t,e,n){var s=t.stateNode;if(!s)throw Error(re(169));n?(t=aj(t,e,aa),s.__reactInternalMemoizedMergedChildContext=t,Pt(ss),Pt(Pn),kt(Pn,t)):Pt(ss),kt(ss,n)}var Wr=null,Tp=!1,Im=!1;function lj(t){Wr===null?Wr=[t]:Wr.push(t)}function pA(t){Tp=!0,lj(t)}function po(){if(!Im&&Wr!==null){Im=!0;var t=0,e=mt;try{var n=Wr;for(mt=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}Wr=null,Tp=!1}catch(r){throw Wr!==null&&(Wr=Wr.slice(t+1)),O1(ev,po),r}finally{mt=e,Im=!1}}return null}var il=[],ol=0,Df=null,Lf=0,Os=[],Ms=0,la=null,Qr=1,Xr="";function Ao(t,e){il[ol++]=Lf,il[ol++]=Df,Df=t,Lf=e}function cj(t,e,n){Os[Ms++]=Qr,Os[Ms++]=Xr,Os[Ms++]=la,la=t;var s=Qr;t=Xr;var r=32-tr(s)-1;s&=~(1<<r),n+=1;var i=32-tr(e)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,Qr=1<<32-tr(e)+r|n<<r|s,Xr=i+t}else Qr=1<<i|n<<r|s,Xr=t}function cv(t){t.return!==null&&(Ao(t,1),cj(t,1,0))}function uv(t){for(;t===Df;)Df=il[--ol],il[ol]=null,Lf=il[--ol],il[ol]=null;for(;t===la;)la=Os[--Ms],Os[Ms]=null,Xr=Os[--Ms],Os[Ms]=null,Qr=Os[--Ms],Os[Ms]=null}var bs=null,vs=null,It=!1,er=null;function uj(t,e){var n=Is(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ub(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,bs=t,vs=Ki(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,bs=t,vs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=la!==null?{id:Qr,overflow:Xr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Is(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,bs=t,vs=null,!0):!1;default:return!1}}function px(t){return(t.mode&1)!==0&&(t.flags&128)===0}function mx(t){if(It){var e=vs;if(e){var n=e;if(!Ub(t,e)){if(px(t))throw Error(re(418));e=Ki(n.nextSibling);var s=bs;e&&Ub(t,e)?uj(s,n):(t.flags=t.flags&-4097|2,It=!1,bs=t)}}else{if(px(t))throw Error(re(418));t.flags=t.flags&-4097|2,It=!1,bs=t}}}function Hb(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bs=t}function oh(t){if(t!==bs)return!1;if(!It)return Hb(t),It=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ux(t.type,t.memoizedProps)),e&&(e=vs)){if(px(t))throw dj(),Error(re(418));for(;e;)uj(t,e),e=Ki(e.nextSibling)}if(Hb(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(re(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){vs=Ki(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}vs=null}}else vs=bs?Ki(t.stateNode.nextSibling):null;return!0}function dj(){for(var t=vs;t;)t=Ki(t.nextSibling)}function ql(){vs=bs=null,It=!1}function dv(t){er===null?er=[t]:er.push(t)}var mA=ui.ReactCurrentBatchConfig;function Cc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(re(309));var s=n.stateNode}if(!s)throw Error(re(147,t));var r=s,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=r.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(re(284));if(!n._owner)throw Error(re(290,t))}return t}function ah(t,e){throw t=Object.prototype.toString.call(e),Error(re(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Wb(t){var e=t._init;return e(t._payload)}function hj(t){function e(g,m){if(t){var b=g.deletions;b===null?(g.deletions=[m],g.flags|=16):b.push(m)}}function n(g,m){if(!t)return null;for(;m!==null;)e(g,m),m=m.sibling;return null}function s(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function r(g,m){return g=Xi(g,m),g.index=0,g.sibling=null,g}function i(g,m,b){return g.index=b,t?(b=g.alternate,b!==null?(b=b.index,b<m?(g.flags|=2,m):b):(g.flags|=2,m)):(g.flags|=1048576,m)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,m,b,k){return m===null||m.tag!==6?(m=Um(b,g.mode,k),m.return=g,m):(m=r(m,b),m.return=g,m)}function l(g,m,b,k){var _=b.type;return _===Za?d(g,m,b.props.children,k,b.key):m!==null&&(m.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===bi&&Wb(_)===m.type)?(k=r(m,b.props),k.ref=Cc(g,m,b),k.return=g,k):(k=cf(b.type,b.key,b.props,null,g.mode,k),k.ref=Cc(g,m,b),k.return=g,k)}function u(g,m,b,k){return m===null||m.tag!==4||m.stateNode.containerInfo!==b.containerInfo||m.stateNode.implementation!==b.implementation?(m=Hm(b,g.mode,k),m.return=g,m):(m=r(m,b.children||[]),m.return=g,m)}function d(g,m,b,k,_){return m===null||m.tag!==7?(m=na(b,g.mode,k,_),m.return=g,m):(m=r(m,b),m.return=g,m)}function h(g,m,b){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Um(""+m,g.mode,b),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Qd:return b=cf(m.type,m.key,m.props,null,g.mode,b),b.ref=Cc(g,null,m),b.return=g,b;case Ja:return m=Hm(m,g.mode,b),m.return=g,m;case bi:var k=m._init;return h(g,k(m._payload),b)}if(zc(m)||wc(m))return m=na(m,g.mode,b,null),m.return=g,m;ah(g,m)}return null}function f(g,m,b,k){var _=m!==null?m.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return _!==null?null:a(g,m,""+b,k);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Qd:return b.key===_?l(g,m,b,k):null;case Ja:return b.key===_?u(g,m,b,k):null;case bi:return _=b._init,f(g,m,_(b._payload),k)}if(zc(b)||wc(b))return _!==null?null:d(g,m,b,k,null);ah(g,b)}return null}function p(g,m,b,k,_){if(typeof k=="string"&&k!==""||typeof k=="number")return g=g.get(b)||null,a(m,g,""+k,_);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Qd:return g=g.get(k.key===null?b:k.key)||null,l(m,g,k,_);case Ja:return g=g.get(k.key===null?b:k.key)||null,u(m,g,k,_);case bi:var C=k._init;return p(g,m,b,C(k._payload),_)}if(zc(k)||wc(k))return g=g.get(b)||null,d(m,g,k,_,null);ah(m,k)}return null}function w(g,m,b,k){for(var _=null,C=null,S=m,j=m=0,N=null;S!==null&&j<b.length;j++){S.index>j?(N=S,S=null):N=S.sibling;var T=f(g,S,b[j],k);if(T===null){S===null&&(S=N);break}t&&S&&T.alternate===null&&e(g,S),m=i(T,m,j),C===null?_=T:C.sibling=T,C=T,S=N}if(j===b.length)return n(g,S),It&&Ao(g,j),_;if(S===null){for(;j<b.length;j++)S=h(g,b[j],k),S!==null&&(m=i(S,m,j),C===null?_=S:C.sibling=S,C=S);return It&&Ao(g,j),_}for(S=s(g,S);j<b.length;j++)N=p(S,g,j,b[j],k),N!==null&&(t&&N.alternate!==null&&S.delete(N.key===null?j:N.key),m=i(N,m,j),C===null?_=N:C.sibling=N,C=N);return t&&S.forEach(function(L){return e(g,L)}),It&&Ao(g,j),_}function x(g,m,b,k){var _=wc(b);if(typeof _!="function")throw Error(re(150));if(b=_.call(b),b==null)throw Error(re(151));for(var C=_=null,S=m,j=m=0,N=null,T=b.next();S!==null&&!T.done;j++,T=b.next()){S.index>j?(N=S,S=null):N=S.sibling;var L=f(g,S,T.value,k);if(L===null){S===null&&(S=N);break}t&&S&&L.alternate===null&&e(g,S),m=i(L,m,j),C===null?_=L:C.sibling=L,C=L,S=N}if(T.done)return n(g,S),It&&Ao(g,j),_;if(S===null){for(;!T.done;j++,T=b.next())T=h(g,T.value,k),T!==null&&(m=i(T,m,j),C===null?_=T:C.sibling=T,C=T);return It&&Ao(g,j),_}for(S=s(g,S);!T.done;j++,T=b.next())T=p(S,g,j,T.value,k),T!==null&&(t&&T.alternate!==null&&S.delete(T.key===null?j:T.key),m=i(T,m,j),C===null?_=T:C.sibling=T,C=T);return t&&S.forEach(function(D){return e(g,D)}),It&&Ao(g,j),_}function y(g,m,b,k){if(typeof b=="object"&&b!==null&&b.type===Za&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Qd:e:{for(var _=b.key,C=m;C!==null;){if(C.key===_){if(_=b.type,_===Za){if(C.tag===7){n(g,C.sibling),m=r(C,b.props.children),m.return=g,g=m;break e}}else if(C.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===bi&&Wb(_)===C.type){n(g,C.sibling),m=r(C,b.props),m.ref=Cc(g,C,b),m.return=g,g=m;break e}n(g,C);break}else e(g,C);C=C.sibling}b.type===Za?(m=na(b.props.children,g.mode,k,b.key),m.return=g,g=m):(k=cf(b.type,b.key,b.props,null,g.mode,k),k.ref=Cc(g,m,b),k.return=g,g=k)}return o(g);case Ja:e:{for(C=b.key;m!==null;){if(m.key===C)if(m.tag===4&&m.stateNode.containerInfo===b.containerInfo&&m.stateNode.implementation===b.implementation){n(g,m.sibling),m=r(m,b.children||[]),m.return=g,g=m;break e}else{n(g,m);break}else e(g,m);m=m.sibling}m=Hm(b,g.mode,k),m.return=g,g=m}return o(g);case bi:return C=b._init,y(g,m,C(b._payload),k)}if(zc(b))return w(g,m,b,k);if(wc(b))return x(g,m,b,k);ah(g,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,m!==null&&m.tag===6?(n(g,m.sibling),m=r(m,b),m.return=g,g=m):(n(g,m),m=Um(b,g.mode,k),m.return=g,g=m),o(g)):n(g,m)}return y}var Kl=hj(!0),fj=hj(!1),$f=fo(null),Ff=null,al=null,hv=null;function fv(){hv=al=Ff=null}function pv(t){var e=$f.current;Pt($f),t._currentValue=e}function gx(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function xl(t,e){Ff=t,hv=al=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Zn=!0),t.firstContext=null)}function zs(t){var e=t._currentValue;if(hv!==t)if(t={context:t,memoizedValue:e,next:null},al===null){if(Ff===null)throw Error(re(308));al=t,Ff.dependencies={lanes:0,firstContext:t}}else al=al.next=t;return e}var zo=null;function mv(t){zo===null?zo=[t]:zo.push(t)}function pj(t,e,n,s){var r=e.interleaved;return r===null?(n.next=n,mv(e)):(n.next=r.next,r.next=n),e.interleaved=n,ri(t,s)}function ri(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var wi=!1;function gv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mj(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ei(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Gi(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,rt&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,ri(t,n)}return r=s.interleaved,r===null?(e.next=e,mv(s)):(e.next=r.next,r.next=e),s.interleaved=e,ri(t,n)}function nf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,tv(t,n)}}function Vb(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?r=i=e:i=i.next=e}else r=i=e;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zf(t,e,n,s){var r=t.updateQueue;wi=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(i!==null){var h=r.baseState;o=0,d=u=l=null,a=i;do{var f=a.lane,p=a.eventTime;if((s&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,x=a;switch(f=e,p=n,x.tag){case 1:if(w=x.payload,typeof w=="function"){h=w.call(p,h,f);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=x.payload,f=typeof w=="function"?w.call(p,h,f):w,f==null)break e;h=Ut({},h,f);break e;case 2:wi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=p,l=h):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(d===null&&(l=h),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=d,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);ua|=o,t.lanes=o,t.memoizedState=h}}function qb(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(re(191,r));r.call(s)}}}var xd={},Pr=fo(xd),Su=fo(xd),ju=fo(xd);function Bo(t){if(t===xd)throw Error(re(174));return t}function xv(t,e){switch(kt(ju,e),kt(Su,t),kt(Pr,xd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Qg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Qg(e,t)}Pt(Pr),kt(Pr,e)}function Gl(){Pt(Pr),Pt(Su),Pt(ju)}function gj(t){Bo(ju.current);var e=Bo(Pr.current),n=Qg(e,t.type);e!==n&&(kt(Su,t),kt(Pr,n))}function yv(t){Su.current===t&&(Pt(Pr),Pt(Su))}var Ft=fo(0);function Bf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dm=[];function vv(){for(var t=0;t<Dm.length;t++)Dm[t]._workInProgressVersionPrimary=null;Dm.length=0}var sf=ui.ReactCurrentDispatcher,Lm=ui.ReactCurrentBatchConfig,ca=0,Bt=null,rn=null,dn=null,Uf=!1,nu=!1,Cu=0,gA=0;function _n(){throw Error(re(321))}function bv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!rr(t[n],e[n]))return!1;return!0}function wv(t,e,n,s,r,i){if(ca=i,Bt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,sf.current=t===null||t.memoizedState===null?bA:wA,t=n(s,r),nu){i=0;do{if(nu=!1,Cu=0,25<=i)throw Error(re(301));i+=1,dn=rn=null,e.updateQueue=null,sf.current=kA,t=n(s,r)}while(nu)}if(sf.current=Hf,e=rn!==null&&rn.next!==null,ca=0,dn=rn=Bt=null,Uf=!1,e)throw Error(re(300));return t}function kv(){var t=Cu!==0;return Cu=0,t}function xr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?Bt.memoizedState=dn=t:dn=dn.next=t,dn}function Bs(){if(rn===null){var t=Bt.alternate;t=t!==null?t.memoizedState:null}else t=rn.next;var e=dn===null?Bt.memoizedState:dn.next;if(e!==null)dn=e,rn=t;else{if(t===null)throw Error(re(310));rn=t,t={memoizedState:rn.memoizedState,baseState:rn.baseState,baseQueue:rn.baseQueue,queue:rn.queue,next:null},dn===null?Bt.memoizedState=dn=t:dn=dn.next=t}return dn}function Eu(t,e){return typeof e=="function"?e(t):e}function $m(t){var e=Bs(),n=e.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=t;var s=rn,r=s.baseQueue,i=n.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}s.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,s=s.baseState;var a=o=null,l=null,u=i;do{var d=u.lane;if((ca&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:t(s,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=s):l=l.next=h,Bt.lanes|=d,ua|=d}u=u.next}while(u!==null&&u!==i);l===null?o=s:l.next=a,rr(s,e.memoizedState)||(Zn=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=l,n.lastRenderedState=s}if(t=n.interleaved,t!==null){r=t;do i=r.lane,Bt.lanes|=i,ua|=i,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Fm(t){var e=Bs(),n=e.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=t;var s=n.dispatch,r=n.pending,i=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do i=t(i,o.action),o=o.next;while(o!==r);rr(i,e.memoizedState)||(Zn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,s]}function xj(){}function yj(t,e){var n=Bt,s=Bs(),r=e(),i=!rr(s.memoizedState,r);if(i&&(s.memoizedState=r,Zn=!0),s=s.queue,_v(wj.bind(null,n,s,t),[t]),s.getSnapshot!==e||i||dn!==null&&dn.memoizedState.tag&1){if(n.flags|=2048,Nu(9,bj.bind(null,n,s,r,e),void 0,null),fn===null)throw Error(re(349));ca&30||vj(n,e,r)}return r}function vj(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Bt.updateQueue,e===null?(e={lastEffect:null,stores:null},Bt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function bj(t,e,n,s){e.value=n,e.getSnapshot=s,kj(e)&&_j(t)}function wj(t,e,n){return n(function(){kj(e)&&_j(t)})}function kj(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!rr(t,n)}catch{return!0}}function _j(t){var e=ri(t,1);e!==null&&nr(e,t,1,-1)}function Kb(t){var e=xr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Eu,lastRenderedState:t},e.queue=t,t=t.dispatch=vA.bind(null,Bt,t),[e.memoizedState,t]}function Nu(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=Bt.updateQueue,e===null?(e={lastEffect:null,stores:null},Bt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function Sj(){return Bs().memoizedState}function rf(t,e,n,s){var r=xr();Bt.flags|=t,r.memoizedState=Nu(1|e,n,void 0,s===void 0?null:s)}function Pp(t,e,n,s){var r=Bs();s=s===void 0?null:s;var i=void 0;if(rn!==null){var o=rn.memoizedState;if(i=o.destroy,s!==null&&bv(s,o.deps)){r.memoizedState=Nu(e,n,i,s);return}}Bt.flags|=t,r.memoizedState=Nu(1|e,n,i,s)}function Gb(t,e){return rf(8390656,8,t,e)}function _v(t,e){return Pp(2048,8,t,e)}function jj(t,e){return Pp(4,2,t,e)}function Cj(t,e){return Pp(4,4,t,e)}function Ej(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Nj(t,e,n){return n=n!=null?n.concat([t]):null,Pp(4,4,Ej.bind(null,e,t),n)}function Sv(){}function Tj(t,e){var n=Bs();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&bv(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function Pj(t,e){var n=Bs();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&bv(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function Rj(t,e,n){return ca&21?(rr(n,e)||(n=D1(),Bt.lanes|=n,ua|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Zn=!0),t.memoizedState=n)}function xA(t,e){var n=mt;mt=n!==0&&4>n?n:4,t(!0);var s=Lm.transition;Lm.transition={};try{t(!1),e()}finally{mt=n,Lm.transition=s}}function Aj(){return Bs().memoizedState}function yA(t,e,n){var s=Qi(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Oj(t))Mj(e,n);else if(n=pj(t,e,n,s),n!==null){var r=Fn();nr(n,t,s,r),Ij(n,e,s)}}function vA(t,e,n){var s=Qi(t),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Oj(t))Mj(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(r.hasEagerState=!0,r.eagerState=a,rr(a,o)){var l=e.interleaved;l===null?(r.next=r,mv(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=pj(t,e,r,s),n!==null&&(r=Fn(),nr(n,t,s,r),Ij(n,e,s))}}function Oj(t){var e=t.alternate;return t===Bt||e!==null&&e===Bt}function Mj(t,e){nu=Uf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ij(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,tv(t,n)}}var Hf={readContext:zs,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useInsertionEffect:_n,useLayoutEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useMutableSource:_n,useSyncExternalStore:_n,useId:_n,unstable_isNewReconciler:!1},bA={readContext:zs,useCallback:function(t,e){return xr().memoizedState=[t,e===void 0?null:e],t},useContext:zs,useEffect:Gb,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,rf(4194308,4,Ej.bind(null,e,t),n)},useLayoutEffect:function(t,e){return rf(4194308,4,t,e)},useInsertionEffect:function(t,e){return rf(4,2,t,e)},useMemo:function(t,e){var n=xr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=xr();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=yA.bind(null,Bt,t),[s.memoizedState,t]},useRef:function(t){var e=xr();return t={current:t},e.memoizedState=t},useState:Kb,useDebugValue:Sv,useDeferredValue:function(t){return xr().memoizedState=t},useTransition:function(){var t=Kb(!1),e=t[0];return t=xA.bind(null,t[1]),xr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=Bt,r=xr();if(It){if(n===void 0)throw Error(re(407));n=n()}else{if(n=e(),fn===null)throw Error(re(349));ca&30||vj(s,e,n)}r.memoizedState=n;var i={value:n,getSnapshot:e};return r.queue=i,Gb(wj.bind(null,s,i,t),[t]),s.flags|=2048,Nu(9,bj.bind(null,s,i,n,e),void 0,null),n},useId:function(){var t=xr(),e=fn.identifierPrefix;if(It){var n=Xr,s=Qr;n=(s&~(1<<32-tr(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=Cu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=gA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},wA={readContext:zs,useCallback:Tj,useContext:zs,useEffect:_v,useImperativeHandle:Nj,useInsertionEffect:jj,useLayoutEffect:Cj,useMemo:Pj,useReducer:$m,useRef:Sj,useState:function(){return $m(Eu)},useDebugValue:Sv,useDeferredValue:function(t){var e=Bs();return Rj(e,rn.memoizedState,t)},useTransition:function(){var t=$m(Eu)[0],e=Bs().memoizedState;return[t,e]},useMutableSource:xj,useSyncExternalStore:yj,useId:Aj,unstable_isNewReconciler:!1},kA={readContext:zs,useCallback:Tj,useContext:zs,useEffect:_v,useImperativeHandle:Nj,useInsertionEffect:jj,useLayoutEffect:Cj,useMemo:Pj,useReducer:Fm,useRef:Sj,useState:function(){return Fm(Eu)},useDebugValue:Sv,useDeferredValue:function(t){var e=Bs();return rn===null?e.memoizedState=t:Rj(e,rn.memoizedState,t)},useTransition:function(){var t=Fm(Eu)[0],e=Bs().memoizedState;return[t,e]},useMutableSource:xj,useSyncExternalStore:yj,useId:Aj,unstable_isNewReconciler:!1};function Gs(t,e){if(t&&t.defaultProps){e=Ut({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function xx(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:Ut({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Rp={isMounted:function(t){return(t=t._reactInternals)?ba(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=Fn(),r=Qi(t),i=ei(s,r);i.payload=e,n!=null&&(i.callback=n),e=Gi(t,i,r),e!==null&&(nr(e,t,r,s),nf(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=Fn(),r=Qi(t),i=ei(s,r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Gi(t,i,r),e!==null&&(nr(e,t,r,s),nf(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Fn(),s=Qi(t),r=ei(n,s);r.tag=2,e!=null&&(r.callback=e),e=Gi(t,r,s),e!==null&&(nr(e,t,s,n),nf(e,t,s))}};function Yb(t,e,n,s,r,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!bu(n,s)||!bu(r,i):!0}function Dj(t,e,n){var s=!1,r=ro,i=e.contextType;return typeof i=="object"&&i!==null?i=zs(i):(r=rs(e)?aa:Pn.current,s=e.contextTypes,i=(s=s!=null)?Vl(t,r):ro),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Rp,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function Qb(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&Rp.enqueueReplaceState(e,e.state,null)}function yx(t,e,n,s){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},gv(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=zs(i):(i=rs(e)?aa:Pn.current,r.context=Vl(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(xx(t,e,i,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Rp.enqueueReplaceState(r,r.state,null),zf(t,n,r,s),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Yl(t,e){try{var n="",s=e;do n+=QP(s),s=s.return;while(s);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function zm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function vx(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var _A=typeof WeakMap=="function"?WeakMap:Map;function Lj(t,e,n){n=ei(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){Vf||(Vf=!0,Tx=s),vx(t,e)},n}function $j(t,e,n){n=ei(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;n.payload=function(){return s(r)},n.callback=function(){vx(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){vx(t,e),typeof s!="function"&&(Yi===null?Yi=new Set([this]):Yi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Xb(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new _A;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(n)||(r.add(n),t=LA.bind(null,t,e,n),e.then(t,t))}function Jb(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Zb(t,e,n,s,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ei(-1,1),e.tag=2,Gi(n,e,1))),n.lanes|=1),t)}var SA=ui.ReactCurrentOwner,Zn=!1;function $n(t,e,n,s){e.child=t===null?fj(e,null,n,s):Kl(e,t.child,n,s)}function ew(t,e,n,s,r){n=n.render;var i=e.ref;return xl(e,r),s=wv(t,e,n,s,i,r),n=kv(),t!==null&&!Zn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ii(t,e,r)):(It&&n&&cv(e),e.flags|=1,$n(t,e,s,r),e.child)}function tw(t,e,n,s,r){if(t===null){var i=n.type;return typeof i=="function"&&!Av(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Fj(t,e,i,s,r)):(t=cf(n.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:bu,n(o,s)&&t.ref===e.ref)return ii(t,e,r)}return e.flags|=1,t=Xi(i,s),t.ref=e.ref,t.return=e,e.child=t}function Fj(t,e,n,s,r){if(t!==null){var i=t.memoizedProps;if(bu(i,s)&&t.ref===e.ref)if(Zn=!1,e.pendingProps=s=i,(t.lanes&r)!==0)t.flags&131072&&(Zn=!0);else return e.lanes=t.lanes,ii(t,e,r)}return bx(t,e,n,s,r)}function zj(t,e,n){var s=e.pendingProps,r=s.children,i=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},kt(cl,ps),ps|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,kt(cl,ps),ps|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,kt(cl,ps),ps|=s}else i!==null?(s=i.baseLanes|n,e.memoizedState=null):s=n,kt(cl,ps),ps|=s;return $n(t,e,r,n),e.child}function Bj(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function bx(t,e,n,s,r){var i=rs(n)?aa:Pn.current;return i=Vl(e,i),xl(e,r),n=wv(t,e,n,s,i,r),s=kv(),t!==null&&!Zn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ii(t,e,r)):(It&&s&&cv(e),e.flags|=1,$n(t,e,n,r),e.child)}function nw(t,e,n,s,r){if(rs(n)){var i=!0;If(e)}else i=!1;if(xl(e,r),e.stateNode===null)of(t,e),Dj(e,n,s),yx(e,n,s,r),s=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=zs(u):(u=rs(n)?aa:Pn.current,u=Vl(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==s||l!==u)&&Qb(e,o,s,u),wi=!1;var f=e.memoizedState;o.state=f,zf(e,s,o,r),l=e.memoizedState,a!==s||f!==l||ss.current||wi?(typeof d=="function"&&(xx(e,n,d,s),l=e.memoizedState),(a=wi||Yb(e,n,a,s,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=l),o.props=s,o.state=l,o.context=u,s=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,mj(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Gs(e.type,a),o.props=u,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=zs(l):(l=rs(n)?aa:Pn.current,l=Vl(e,l));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&Qb(e,o,s,l),wi=!1,f=e.memoizedState,o.state=f,zf(e,s,o,r);var w=e.memoizedState;a!==h||f!==w||ss.current||wi?(typeof p=="function"&&(xx(e,n,p,s),w=e.memoizedState),(u=wi||Yb(e,n,u,s,f,w,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=w),o.props=s,o.state=w,o.context=l,s=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),s=!1)}return wx(t,e,n,s,i,r)}function wx(t,e,n,s,r,i){Bj(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return r&&Bb(e,n,!1),ii(t,e,i);s=e.stateNode,SA.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=Kl(e,t.child,null,i),e.child=Kl(e,null,a,i)):$n(t,e,a,i),e.memoizedState=s.state,r&&Bb(e,n,!0),e.child}function Uj(t){var e=t.stateNode;e.pendingContext?zb(t,e.pendingContext,e.pendingContext!==e.context):e.context&&zb(t,e.context,!1),xv(t,e.containerInfo)}function sw(t,e,n,s,r){return ql(),dv(r),e.flags|=256,$n(t,e,n,s),e.child}var kx={dehydrated:null,treeContext:null,retryLane:0};function _x(t){return{baseLanes:t,cachePool:null,transitions:null}}function Hj(t,e,n){var s=e.pendingProps,r=Ft.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),kt(Ft,r&1),t===null)return mx(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,i?(s=e.mode,i=e.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Mp(o,s,0,null),t=na(t,s,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=_x(n),e.memoizedState=kx,t):jv(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return jA(t,e,o,s,a,r,n);if(i){i=s.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:s.children};return!(o&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=l,e.deletions=null):(s=Xi(r,l),s.subtreeFlags=r.subtreeFlags&14680064),a!==null?i=Xi(a,i):(i=na(i,o,n,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=t.child.memoizedState,o=o===null?_x(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=kx,s}return i=t.child,t=i.sibling,s=Xi(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function jv(t,e){return e=Mp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function lh(t,e,n,s){return s!==null&&dv(s),Kl(e,t.child,null,n),t=jv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function jA(t,e,n,s,r,i,o){if(n)return e.flags&256?(e.flags&=-257,s=zm(Error(re(422))),lh(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=Mp({mode:"visible",children:s.children},r,0,null),i=na(i,r,o,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&Kl(e,t.child,null,o),e.child.memoizedState=_x(o),e.memoizedState=kx,i);if(!(e.mode&1))return lh(t,e,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var a=s.dgst;return s=a,i=Error(re(419)),s=zm(i,s,void 0),lh(t,e,o,s)}if(a=(o&t.childLanes)!==0,Zn||a){if(s=fn,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,ri(t,r),nr(s,t,r,-1))}return Rv(),s=zm(Error(re(421))),lh(t,e,o,s)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=$A.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,vs=Ki(r.nextSibling),bs=e,It=!0,er=null,t!==null&&(Os[Ms++]=Qr,Os[Ms++]=Xr,Os[Ms++]=la,Qr=t.id,Xr=t.overflow,la=e),e=jv(e,s.children),e.flags|=4096,e)}function rw(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),gx(t.return,e,n)}function Bm(t,e,n,s,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function Wj(t,e,n){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if($n(t,e,s.children,n),s=Ft.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&rw(t,n,e);else if(t.tag===19)rw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(kt(Ft,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Bf(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Bm(e,!1,r,n,i);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Bf(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Bm(e,!0,n,null,i);break;case"together":Bm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function of(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ii(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ua|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(re(153));if(e.child!==null){for(t=e.child,n=Xi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Xi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function CA(t,e,n){switch(e.tag){case 3:Uj(e),ql();break;case 5:gj(e);break;case 1:rs(e.type)&&If(e);break;case 4:xv(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;kt($f,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(kt(Ft,Ft.current&1),e.flags|=128,null):n&e.child.childLanes?Hj(t,e,n):(kt(Ft,Ft.current&1),t=ii(t,e,n),t!==null?t.sibling:null);kt(Ft,Ft.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return Wj(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),kt(Ft,Ft.current),s)break;return null;case 22:case 23:return e.lanes=0,zj(t,e,n)}return ii(t,e,n)}var Vj,Sx,qj,Kj;Vj=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Sx=function(){};qj=function(t,e,n,s){var r=t.memoizedProps;if(r!==s){t=e.stateNode,Bo(Pr.current);var i=null;switch(n){case"input":r=qg(t,r),s=qg(t,s),i=[];break;case"select":r=Ut({},r,{value:void 0}),s=Ut({},s,{value:void 0}),i=[];break;case"textarea":r=Yg(t,r),s=Yg(t,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=Of)}Xg(n,s);var o;n=null;for(u in r)if(!s.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(fu.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in s){var l=s[u];if(a=r!=null?r[u]:void 0,s.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(fu.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ct("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Kj=function(t,e,n,s){n!==s&&(e.flags|=4)};function Ec(t,e){if(!It)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Sn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function EA(t,e,n){var s=e.pendingProps;switch(uv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sn(e),null;case 1:return rs(e.type)&&Mf(),Sn(e),null;case 3:return s=e.stateNode,Gl(),Pt(ss),Pt(Pn),vv(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(oh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,er!==null&&(Ax(er),er=null))),Sx(t,e),Sn(e),null;case 5:yv(e);var r=Bo(ju.current);if(n=e.type,t!==null&&e.stateNode!=null)qj(t,e,n,s,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(re(166));return Sn(e),null}if(t=Bo(Pr.current),oh(e)){s=e.stateNode,n=e.type;var i=e.memoizedProps;switch(s[jr]=e,s[_u]=i,t=(e.mode&1)!==0,n){case"dialog":Ct("cancel",s),Ct("close",s);break;case"iframe":case"object":case"embed":Ct("load",s);break;case"video":case"audio":for(r=0;r<Uc.length;r++)Ct(Uc[r],s);break;case"source":Ct("error",s);break;case"img":case"image":case"link":Ct("error",s),Ct("load",s);break;case"details":Ct("toggle",s);break;case"input":fb(s,i),Ct("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Ct("invalid",s);break;case"textarea":mb(s,i),Ct("invalid",s)}Xg(n,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?s.textContent!==a&&(i.suppressHydrationWarning!==!0&&ih(s.textContent,a,t),r=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&ih(s.textContent,a,t),r=["children",""+a]):fu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ct("scroll",s)}switch(n){case"input":Xd(s),pb(s,i,!0);break;case"textarea":Xd(s),gb(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Of)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=w1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(n,{is:s.is}):(t=o.createElement(n),n==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,n),t[jr]=e,t[_u]=s,Vj(t,e,!1,!1),e.stateNode=t;e:{switch(o=Jg(n,s),n){case"dialog":Ct("cancel",t),Ct("close",t),r=s;break;case"iframe":case"object":case"embed":Ct("load",t),r=s;break;case"video":case"audio":for(r=0;r<Uc.length;r++)Ct(Uc[r],t);r=s;break;case"source":Ct("error",t),r=s;break;case"img":case"image":case"link":Ct("error",t),Ct("load",t),r=s;break;case"details":Ct("toggle",t),r=s;break;case"input":fb(t,s),r=qg(t,s),Ct("invalid",t);break;case"option":r=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},r=Ut({},s,{value:void 0}),Ct("invalid",t);break;case"textarea":mb(t,s),r=Yg(t,s),Ct("invalid",t);break;default:r=s}Xg(n,r),a=r;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?S1(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&k1(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&pu(t,l):typeof l=="number"&&pu(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(fu.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Ct("scroll",t):l!=null&&Yy(t,i,l,o))}switch(n){case"input":Xd(t),pb(t,s,!1);break;case"textarea":Xd(t),gb(t);break;case"option":s.value!=null&&t.setAttribute("value",""+so(s.value));break;case"select":t.multiple=!!s.multiple,i=s.value,i!=null?fl(t,!!s.multiple,i,!1):s.defaultValue!=null&&fl(t,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Of)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Sn(e),null;case 6:if(t&&e.stateNode!=null)Kj(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(re(166));if(n=Bo(ju.current),Bo(Pr.current),oh(e)){if(s=e.stateNode,n=e.memoizedProps,s[jr]=e,(i=s.nodeValue!==n)&&(t=bs,t!==null))switch(t.tag){case 3:ih(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ih(s.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[jr]=e,e.stateNode=s}return Sn(e),null;case 13:if(Pt(Ft),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(It&&vs!==null&&e.mode&1&&!(e.flags&128))dj(),ql(),e.flags|=98560,i=!1;else if(i=oh(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(re(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(re(317));i[jr]=e}else ql(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Sn(e),i=!1}else er!==null&&(Ax(er),er=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||Ft.current&1?ln===0&&(ln=3):Rv())),e.updateQueue!==null&&(e.flags|=4),Sn(e),null);case 4:return Gl(),Sx(t,e),t===null&&wu(e.stateNode.containerInfo),Sn(e),null;case 10:return pv(e.type._context),Sn(e),null;case 17:return rs(e.type)&&Mf(),Sn(e),null;case 19:if(Pt(Ft),i=e.memoizedState,i===null)return Sn(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)Ec(i,!1);else{if(ln!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Bf(t),o!==null){for(e.flags|=128,Ec(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)i=n,t=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return kt(Ft,Ft.current&1|2),e.child}t=t.sibling}i.tail!==null&&Yt()>Ql&&(e.flags|=128,s=!0,Ec(i,!1),e.lanes=4194304)}else{if(!s)if(t=Bf(o),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ec(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!It)return Sn(e),null}else 2*Yt()-i.renderingStartTime>Ql&&n!==1073741824&&(e.flags|=128,s=!0,Ec(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Yt(),e.sibling=null,n=Ft.current,kt(Ft,s?n&1|2:n&1),e):(Sn(e),null);case 22:case 23:return Pv(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?ps&1073741824&&(Sn(e),e.subtreeFlags&6&&(e.flags|=8192)):Sn(e),null;case 24:return null;case 25:return null}throw Error(re(156,e.tag))}function NA(t,e){switch(uv(e),e.tag){case 1:return rs(e.type)&&Mf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Gl(),Pt(ss),Pt(Pn),vv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return yv(e),null;case 13:if(Pt(Ft),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(re(340));ql()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Pt(Ft),null;case 4:return Gl(),null;case 10:return pv(e.type._context),null;case 22:case 23:return Pv(),null;case 24:return null;default:return null}}var ch=!1,Cn=!1,TA=typeof WeakSet=="function"?WeakSet:Set,_e=null;function ll(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Vt(t,e,s)}else n.current=null}function jx(t,e,n){try{n()}catch(s){Vt(t,e,s)}}var iw=!1;function PA(t,e){if(lx=Pf,t=J1(),lv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==n||r!==0&&h.nodeType!==3||(a=o+r),h!==i||s!==0&&h.nodeType!==3||(l=o+s),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++u===r&&(a=o),f===i&&++d===s&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(cx={focusedElem:t,selectionRange:n},Pf=!1,_e=e;_e!==null;)if(e=_e,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,_e=t;else for(;_e!==null;){e=_e;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var x=w.memoizedProps,y=w.memoizedState,g=e.stateNode,m=g.getSnapshotBeforeUpdate(e.elementType===e.type?x:Gs(e.type,x),y);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(re(163))}}catch(k){Vt(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,_e=t;break}_e=e.return}return w=iw,iw=!1,w}function su(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&jx(e,n,i)}r=r.next}while(r!==s)}}function Ap(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function Cx(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Gj(t){var e=t.alternate;e!==null&&(t.alternate=null,Gj(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[jr],delete e[_u],delete e[hx],delete e[hA],delete e[fA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Yj(t){return t.tag===5||t.tag===3||t.tag===4}function ow(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Yj(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ex(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Of));else if(s!==4&&(t=t.child,t!==null))for(Ex(t,e,n),t=t.sibling;t!==null;)Ex(t,e,n),t=t.sibling}function Nx(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(Nx(t,e,n),t=t.sibling;t!==null;)Nx(t,e,n),t=t.sibling}var xn=null,Js=!1;function mi(t,e,n){for(n=n.child;n!==null;)Qj(t,e,n),n=n.sibling}function Qj(t,e,n){if(Tr&&typeof Tr.onCommitFiberUnmount=="function")try{Tr.onCommitFiberUnmount(Sp,n)}catch{}switch(n.tag){case 5:Cn||ll(n,e);case 6:var s=xn,r=Js;xn=null,mi(t,e,n),xn=s,Js=r,xn!==null&&(Js?(t=xn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):xn.removeChild(n.stateNode));break;case 18:xn!==null&&(Js?(t=xn,n=n.stateNode,t.nodeType===8?Mm(t.parentNode,n):t.nodeType===1&&Mm(t,n),yu(t)):Mm(xn,n.stateNode));break;case 4:s=xn,r=Js,xn=n.stateNode.containerInfo,Js=!0,mi(t,e,n),xn=s,Js=r;break;case 0:case 11:case 14:case 15:if(!Cn&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&jx(n,e,o),r=r.next}while(r!==s)}mi(t,e,n);break;case 1:if(!Cn&&(ll(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(a){Vt(n,e,a)}mi(t,e,n);break;case 21:mi(t,e,n);break;case 22:n.mode&1?(Cn=(s=Cn)||n.memoizedState!==null,mi(t,e,n),Cn=s):mi(t,e,n);break;default:mi(t,e,n)}}function aw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new TA),e.forEach(function(s){var r=FA.bind(null,t,s);n.has(s)||(n.add(s),s.then(r,r))})}}function qs(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:xn=a.stateNode,Js=!1;break e;case 3:xn=a.stateNode.containerInfo,Js=!0;break e;case 4:xn=a.stateNode.containerInfo,Js=!0;break e}a=a.return}if(xn===null)throw Error(re(160));Qj(i,o,r),xn=null,Js=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){Vt(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Xj(e,t),e=e.sibling}function Xj(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qs(e,t),hr(t),s&4){try{su(3,t,t.return),Ap(3,t)}catch(x){Vt(t,t.return,x)}try{su(5,t,t.return)}catch(x){Vt(t,t.return,x)}}break;case 1:qs(e,t),hr(t),s&512&&n!==null&&ll(n,n.return);break;case 5:if(qs(e,t),hr(t),s&512&&n!==null&&ll(n,n.return),t.flags&32){var r=t.stateNode;try{pu(r,"")}catch(x){Vt(t,t.return,x)}}if(s&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&v1(r,i),Jg(a,o);var u=Jg(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?S1(r,h):d==="dangerouslySetInnerHTML"?k1(r,h):d==="children"?pu(r,h):Yy(r,d,h,u)}switch(a){case"input":Kg(r,i);break;case"textarea":b1(r,i);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?fl(r,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?fl(r,!!i.multiple,i.defaultValue,!0):fl(r,!!i.multiple,i.multiple?[]:"",!1))}r[_u]=i}catch(x){Vt(t,t.return,x)}}break;case 6:if(qs(e,t),hr(t),s&4){if(t.stateNode===null)throw Error(re(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(x){Vt(t,t.return,x)}}break;case 3:if(qs(e,t),hr(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{yu(e.containerInfo)}catch(x){Vt(t,t.return,x)}break;case 4:qs(e,t),hr(t);break;case 13:qs(e,t),hr(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(Nv=Yt())),s&4&&aw(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Cn=(u=Cn)||d,qs(e,t),Cn=u):qs(e,t),hr(t),s&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(_e=t,d=t.child;d!==null;){for(h=_e=d;_e!==null;){switch(f=_e,p=f.child,f.tag){case 0:case 11:case 14:case 15:su(4,f,f.return);break;case 1:ll(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){s=f,n=f.return;try{e=s,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(x){Vt(s,n,x)}}break;case 5:ll(f,f.return);break;case 22:if(f.memoizedState!==null){cw(h);continue}}p!==null?(p.return=f,_e=p):cw(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{r=h.stateNode,u?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=_1("display",o))}catch(x){Vt(t,t.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(x){Vt(t,t.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:qs(e,t),hr(t),s&4&&aw(t);break;case 21:break;default:qs(e,t),hr(t)}}function hr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Yj(n)){var s=n;break e}n=n.return}throw Error(re(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(pu(r,""),s.flags&=-33);var i=ow(t);Nx(t,i,r);break;case 3:case 4:var o=s.stateNode.containerInfo,a=ow(t);Ex(t,a,o);break;default:throw Error(re(161))}}catch(l){Vt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function RA(t,e,n){_e=t,Jj(t)}function Jj(t,e,n){for(var s=(t.mode&1)!==0;_e!==null;){var r=_e,i=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||ch;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Cn;a=ch;var u=Cn;if(ch=o,(Cn=l)&&!u)for(_e=r;_e!==null;)o=_e,l=o.child,o.tag===22&&o.memoizedState!==null?uw(r):l!==null?(l.return=o,_e=l):uw(r);for(;i!==null;)_e=i,Jj(i),i=i.sibling;_e=r,ch=a,Cn=u}lw(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,_e=i):lw(t)}}function lw(t){for(;_e!==null;){var e=_e;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Cn||Ap(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Cn)if(n===null)s.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Gs(e.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&qb(e,i,s);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}qb(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&yu(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(re(163))}Cn||e.flags&512&&Cx(e)}catch(f){Vt(e,e.return,f)}}if(e===t){_e=null;break}if(n=e.sibling,n!==null){n.return=e.return,_e=n;break}_e=e.return}}function cw(t){for(;_e!==null;){var e=_e;if(e===t){_e=null;break}var n=e.sibling;if(n!==null){n.return=e.return,_e=n;break}_e=e.return}}function uw(t){for(;_e!==null;){var e=_e;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ap(4,e)}catch(l){Vt(e,n,l)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(l){Vt(e,r,l)}}var i=e.return;try{Cx(e)}catch(l){Vt(e,i,l)}break;case 5:var o=e.return;try{Cx(e)}catch(l){Vt(e,o,l)}}}catch(l){Vt(e,e.return,l)}if(e===t){_e=null;break}var a=e.sibling;if(a!==null){a.return=e.return,_e=a;break}_e=e.return}}var AA=Math.ceil,Wf=ui.ReactCurrentDispatcher,Cv=ui.ReactCurrentOwner,$s=ui.ReactCurrentBatchConfig,rt=0,fn=null,Zt=null,vn=0,ps=0,cl=fo(0),ln=0,Tu=null,ua=0,Op=0,Ev=0,ru=null,Xn=null,Nv=0,Ql=1/0,Ur=null,Vf=!1,Tx=null,Yi=null,uh=!1,$i=null,qf=0,iu=0,Px=null,af=-1,lf=0;function Fn(){return rt&6?Yt():af!==-1?af:af=Yt()}function Qi(t){return t.mode&1?rt&2&&vn!==0?vn&-vn:mA.transition!==null?(lf===0&&(lf=D1()),lf):(t=mt,t!==0||(t=window.event,t=t===void 0?16:H1(t.type)),t):1}function nr(t,e,n,s){if(50<iu)throw iu=0,Px=null,Error(re(185));pd(t,n,s),(!(rt&2)||t!==fn)&&(t===fn&&(!(rt&2)&&(Op|=n),ln===4&&Si(t,vn)),is(t,s),n===1&&rt===0&&!(e.mode&1)&&(Ql=Yt()+500,Tp&&po()))}function is(t,e){var n=t.callbackNode;mR(t,e);var s=Tf(t,t===fn?vn:0);if(s===0)n!==null&&vb(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&vb(n),e===1)t.tag===0?pA(dw.bind(null,t)):lj(dw.bind(null,t)),uA(function(){!(rt&6)&&po()}),n=null;else{switch(L1(s)){case 1:n=ev;break;case 4:n=M1;break;case 16:n=Nf;break;case 536870912:n=I1;break;default:n=Nf}n=oC(n,Zj.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Zj(t,e){if(af=-1,lf=0,rt&6)throw Error(re(327));var n=t.callbackNode;if(yl()&&t.callbackNode!==n)return null;var s=Tf(t,t===fn?vn:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=Kf(t,s);else{e=s;var r=rt;rt|=2;var i=tC();(fn!==t||vn!==e)&&(Ur=null,Ql=Yt()+500,ta(t,e));do try{IA();break}catch(a){eC(t,a)}while(!0);fv(),Wf.current=i,rt=r,Zt!==null?e=0:(fn=null,vn=0,e=ln)}if(e!==0){if(e===2&&(r=sx(t),r!==0&&(s=r,e=Rx(t,r))),e===1)throw n=Tu,ta(t,0),Si(t,s),is(t,Yt()),n;if(e===6)Si(t,s);else{if(r=t.current.alternate,!(s&30)&&!OA(r)&&(e=Kf(t,s),e===2&&(i=sx(t),i!==0&&(s=i,e=Rx(t,i))),e===1))throw n=Tu,ta(t,0),Si(t,s),is(t,Yt()),n;switch(t.finishedWork=r,t.finishedLanes=s,e){case 0:case 1:throw Error(re(345));case 2:Oo(t,Xn,Ur);break;case 3:if(Si(t,s),(s&130023424)===s&&(e=Nv+500-Yt(),10<e)){if(Tf(t,0)!==0)break;if(r=t.suspendedLanes,(r&s)!==s){Fn(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=dx(Oo.bind(null,t,Xn,Ur),e);break}Oo(t,Xn,Ur);break;case 4:if(Si(t,s),(s&4194240)===s)break;for(e=t.eventTimes,r=-1;0<s;){var o=31-tr(s);i=1<<o,o=e[o],o>r&&(r=o),s&=~i}if(s=r,s=Yt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*AA(s/1960))-s,10<s){t.timeoutHandle=dx(Oo.bind(null,t,Xn,Ur),s);break}Oo(t,Xn,Ur);break;case 5:Oo(t,Xn,Ur);break;default:throw Error(re(329))}}}return is(t,Yt()),t.callbackNode===n?Zj.bind(null,t):null}function Rx(t,e){var n=ru;return t.current.memoizedState.isDehydrated&&(ta(t,e).flags|=256),t=Kf(t,e),t!==2&&(e=Xn,Xn=n,e!==null&&Ax(e)),t}function Ax(t){Xn===null?Xn=t:Xn.push.apply(Xn,t)}function OA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!rr(i(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Si(t,e){for(e&=~Ev,e&=~Op,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-tr(e),s=1<<n;t[n]=-1,e&=~s}}function dw(t){if(rt&6)throw Error(re(327));yl();var e=Tf(t,0);if(!(e&1))return is(t,Yt()),null;var n=Kf(t,e);if(t.tag!==0&&n===2){var s=sx(t);s!==0&&(e=s,n=Rx(t,s))}if(n===1)throw n=Tu,ta(t,0),Si(t,e),is(t,Yt()),n;if(n===6)throw Error(re(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Oo(t,Xn,Ur),is(t,Yt()),null}function Tv(t,e){var n=rt;rt|=1;try{return t(e)}finally{rt=n,rt===0&&(Ql=Yt()+500,Tp&&po())}}function da(t){$i!==null&&$i.tag===0&&!(rt&6)&&yl();var e=rt;rt|=1;var n=$s.transition,s=mt;try{if($s.transition=null,mt=1,t)return t()}finally{mt=s,$s.transition=n,rt=e,!(rt&6)&&po()}}function Pv(){ps=cl.current,Pt(cl)}function ta(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,cA(n)),Zt!==null)for(n=Zt.return;n!==null;){var s=n;switch(uv(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Mf();break;case 3:Gl(),Pt(ss),Pt(Pn),vv();break;case 5:yv(s);break;case 4:Gl();break;case 13:Pt(Ft);break;case 19:Pt(Ft);break;case 10:pv(s.type._context);break;case 22:case 23:Pv()}n=n.return}if(fn=t,Zt=t=Xi(t.current,null),vn=ps=e,ln=0,Tu=null,Ev=Op=ua=0,Xn=ru=null,zo!==null){for(e=0;e<zo.length;e++)if(n=zo[e],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,i=n.pending;if(i!==null){var o=i.next;i.next=r,s.next=o}n.pending=s}zo=null}return t}function eC(t,e){do{var n=Zt;try{if(fv(),sf.current=Hf,Uf){for(var s=Bt.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Uf=!1}if(ca=0,dn=rn=Bt=null,nu=!1,Cu=0,Cv.current=null,n===null||n.return===null){ln=1,Tu=e,Zt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=vn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Jb(o);if(p!==null){p.flags&=-257,Zb(p,o,a,i,e),p.mode&1&&Xb(i,u,e),e=p,l=u;var w=e.updateQueue;if(w===null){var x=new Set;x.add(l),e.updateQueue=x}else w.add(l);break e}else{if(!(e&1)){Xb(i,u,e),Rv();break e}l=Error(re(426))}}else if(It&&a.mode&1){var y=Jb(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Zb(y,o,a,i,e),dv(Yl(l,a));break e}}i=l=Yl(l,a),ln!==4&&(ln=2),ru===null?ru=[i]:ru.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=Lj(i,l,e);Vb(i,g);break e;case 1:a=l;var m=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Yi===null||!Yi.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=$j(i,a,e);Vb(i,k);break e}}i=i.return}while(i!==null)}sC(n)}catch(_){e=_,Zt===n&&n!==null&&(Zt=n=n.return);continue}break}while(!0)}function tC(){var t=Wf.current;return Wf.current=Hf,t===null?Hf:t}function Rv(){(ln===0||ln===3||ln===2)&&(ln=4),fn===null||!(ua&268435455)&&!(Op&268435455)||Si(fn,vn)}function Kf(t,e){var n=rt;rt|=2;var s=tC();(fn!==t||vn!==e)&&(Ur=null,ta(t,e));do try{MA();break}catch(r){eC(t,r)}while(!0);if(fv(),rt=n,Wf.current=s,Zt!==null)throw Error(re(261));return fn=null,vn=0,ln}function MA(){for(;Zt!==null;)nC(Zt)}function IA(){for(;Zt!==null&&!oR();)nC(Zt)}function nC(t){var e=iC(t.alternate,t,ps);t.memoizedProps=t.pendingProps,e===null?sC(t):Zt=e,Cv.current=null}function sC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=NA(n,e),n!==null){n.flags&=32767,Zt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ln=6,Zt=null;return}}else if(n=EA(n,e,ps),n!==null){Zt=n;return}if(e=e.sibling,e!==null){Zt=e;return}Zt=e=t}while(e!==null);ln===0&&(ln=5)}function Oo(t,e,n){var s=mt,r=$s.transition;try{$s.transition=null,mt=1,DA(t,e,n,s)}finally{$s.transition=r,mt=s}return null}function DA(t,e,n,s){do yl();while($i!==null);if(rt&6)throw Error(re(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(re(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(gR(t,i),t===fn&&(Zt=fn=null,vn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||uh||(uh=!0,oC(Nf,function(){return yl(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=$s.transition,$s.transition=null;var o=mt;mt=1;var a=rt;rt|=4,Cv.current=null,PA(t,n),Xj(n,t),nA(cx),Pf=!!lx,cx=lx=null,t.current=n,RA(n),aR(),rt=a,mt=o,$s.transition=i}else t.current=n;if(uh&&(uh=!1,$i=t,qf=r),i=t.pendingLanes,i===0&&(Yi=null),uR(n.stateNode),is(t,Yt()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(Vf)throw Vf=!1,t=Tx,Tx=null,t;return qf&1&&t.tag!==0&&yl(),i=t.pendingLanes,i&1?t===Px?iu++:(iu=0,Px=t):iu=0,po(),null}function yl(){if($i!==null){var t=L1(qf),e=$s.transition,n=mt;try{if($s.transition=null,mt=16>t?16:t,$i===null)var s=!1;else{if(t=$i,$i=null,qf=0,rt&6)throw Error(re(331));var r=rt;for(rt|=4,_e=t.current;_e!==null;){var i=_e,o=i.child;if(_e.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(_e=u;_e!==null;){var d=_e;switch(d.tag){case 0:case 11:case 15:su(8,d,i)}var h=d.child;if(h!==null)h.return=d,_e=h;else for(;_e!==null;){d=_e;var f=d.sibling,p=d.return;if(Gj(d),d===u){_e=null;break}if(f!==null){f.return=p,_e=f;break}_e=p}}}var w=i.alternate;if(w!==null){var x=w.child;if(x!==null){w.child=null;do{var y=x.sibling;x.sibling=null,x=y}while(x!==null)}}_e=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,_e=o;else e:for(;_e!==null;){if(i=_e,i.flags&2048)switch(i.tag){case 0:case 11:case 15:su(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,_e=g;break e}_e=i.return}}var m=t.current;for(_e=m;_e!==null;){o=_e;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,_e=b;else e:for(o=m;_e!==null;){if(a=_e,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ap(9,a)}}catch(_){Vt(a,a.return,_)}if(a===o){_e=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,_e=k;break e}_e=a.return}}if(rt=r,po(),Tr&&typeof Tr.onPostCommitFiberRoot=="function")try{Tr.onPostCommitFiberRoot(Sp,t)}catch{}s=!0}return s}finally{mt=n,$s.transition=e}}return!1}function hw(t,e,n){e=Yl(n,e),e=Lj(t,e,1),t=Gi(t,e,1),e=Fn(),t!==null&&(pd(t,1,e),is(t,e))}function Vt(t,e,n){if(t.tag===3)hw(t,t,n);else for(;e!==null;){if(e.tag===3){hw(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Yi===null||!Yi.has(s))){t=Yl(n,t),t=$j(e,t,1),e=Gi(e,t,1),t=Fn(),e!==null&&(pd(e,1,t),is(e,t));break}}e=e.return}}function LA(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=Fn(),t.pingedLanes|=t.suspendedLanes&n,fn===t&&(vn&n)===n&&(ln===4||ln===3&&(vn&130023424)===vn&&500>Yt()-Nv?ta(t,0):Ev|=n),is(t,e)}function rC(t,e){e===0&&(t.mode&1?(e=eh,eh<<=1,!(eh&130023424)&&(eh=4194304)):e=1);var n=Fn();t=ri(t,e),t!==null&&(pd(t,e,n),is(t,n))}function $A(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),rC(t,n)}function FA(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(re(314))}s!==null&&s.delete(e),rC(t,n)}var iC;iC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ss.current)Zn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Zn=!1,CA(t,e,n);Zn=!!(t.flags&131072)}else Zn=!1,It&&e.flags&1048576&&cj(e,Lf,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;of(t,e),t=e.pendingProps;var r=Vl(e,Pn.current);xl(e,n),r=wv(null,e,s,t,r,n);var i=kv();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rs(s)?(i=!0,If(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,gv(e),r.updater=Rp,e.stateNode=r,r._reactInternals=e,yx(e,s,t,n),e=wx(null,e,s,!0,i,n)):(e.tag=0,It&&i&&cv(e),$n(null,e,r,n),e=e.child),e;case 16:s=e.elementType;e:{switch(of(t,e),t=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=BA(s),t=Gs(s,t),r){case 0:e=bx(null,e,s,t,n);break e;case 1:e=nw(null,e,s,t,n);break e;case 11:e=ew(null,e,s,t,n);break e;case 14:e=tw(null,e,s,Gs(s.type,t),n);break e}throw Error(re(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Gs(s,r),bx(t,e,s,r,n);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Gs(s,r),nw(t,e,s,r,n);case 3:e:{if(Uj(e),t===null)throw Error(re(387));s=e.pendingProps,i=e.memoizedState,r=i.element,mj(t,e),zf(e,s,null,n);var o=e.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=Yl(Error(re(423)),e),e=sw(t,e,s,n,r);break e}else if(s!==r){r=Yl(Error(re(424)),e),e=sw(t,e,s,n,r);break e}else for(vs=Ki(e.stateNode.containerInfo.firstChild),bs=e,It=!0,er=null,n=fj(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ql(),s===r){e=ii(t,e,n);break e}$n(t,e,s,n)}e=e.child}return e;case 5:return gj(e),t===null&&mx(e),s=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,o=r.children,ux(s,r)?o=null:i!==null&&ux(s,i)&&(e.flags|=32),Bj(t,e),$n(t,e,o,n),e.child;case 6:return t===null&&mx(e),null;case 13:return Hj(t,e,n);case 4:return xv(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Kl(e,null,s,n):$n(t,e,s,n),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Gs(s,r),ew(t,e,s,r,n);case 7:return $n(t,e,e.pendingProps,n),e.child;case 8:return $n(t,e,e.pendingProps.children,n),e.child;case 12:return $n(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,kt($f,s._currentValue),s._currentValue=o,i!==null)if(rr(i.value,o)){if(i.children===r.children&&!ss.current){e=ii(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===s){if(i.tag===1){l=ei(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),gx(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(re(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),gx(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}$n(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,xl(e,n),r=zs(r),s=s(r),e.flags|=1,$n(t,e,s,n),e.child;case 14:return s=e.type,r=Gs(s,e.pendingProps),r=Gs(s.type,r),tw(t,e,s,r,n);case 15:return Fj(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Gs(s,r),of(t,e),e.tag=1,rs(s)?(t=!0,If(e)):t=!1,xl(e,n),Dj(e,s,r),yx(e,s,r,n),wx(null,e,s,!0,t,n);case 19:return Wj(t,e,n);case 22:return zj(t,e,n)}throw Error(re(156,e.tag))};function oC(t,e){return O1(t,e)}function zA(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Is(t,e,n,s){return new zA(t,e,n,s)}function Av(t){return t=t.prototype,!(!t||!t.isReactComponent)}function BA(t){if(typeof t=="function")return Av(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Xy)return 11;if(t===Jy)return 14}return 2}function Xi(t,e){var n=t.alternate;return n===null?(n=Is(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function cf(t,e,n,s,r,i){var o=2;if(s=t,typeof t=="function")Av(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Za:return na(n.children,r,i,e);case Qy:o=8,r|=8;break;case Ug:return t=Is(12,n,e,r|2),t.elementType=Ug,t.lanes=i,t;case Hg:return t=Is(13,n,e,r),t.elementType=Hg,t.lanes=i,t;case Wg:return t=Is(19,n,e,r),t.elementType=Wg,t.lanes=i,t;case g1:return Mp(n,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case p1:o=10;break e;case m1:o=9;break e;case Xy:o=11;break e;case Jy:o=14;break e;case bi:o=16,s=null;break e}throw Error(re(130,t==null?t:typeof t,""))}return e=Is(o,n,e,r),e.elementType=t,e.type=s,e.lanes=i,e}function na(t,e,n,s){return t=Is(7,t,s,e),t.lanes=n,t}function Mp(t,e,n,s){return t=Is(22,t,s,e),t.elementType=g1,t.lanes=n,t.stateNode={isHidden:!1},t}function Um(t,e,n){return t=Is(6,t,null,e),t.lanes=n,t}function Hm(t,e,n){return e=Is(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function UA(t,e,n,s,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_m(0),this.expirationTimes=_m(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_m(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Ov(t,e,n,s,r,i,o,a,l){return t=new UA(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Is(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gv(i),t}function HA(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ja,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function aC(t){if(!t)return ro;t=t._reactInternals;e:{if(ba(t)!==t||t.tag!==1)throw Error(re(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rs(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(re(171))}if(t.tag===1){var n=t.type;if(rs(n))return aj(t,n,e)}return e}function lC(t,e,n,s,r,i,o,a,l){return t=Ov(n,s,!0,t,r,i,o,a,l),t.context=aC(null),n=t.current,s=Fn(),r=Qi(n),i=ei(s,r),i.callback=e??null,Gi(n,i,r),t.current.lanes=r,pd(t,r,s),is(t,s),t}function Ip(t,e,n,s){var r=e.current,i=Fn(),o=Qi(r);return n=aC(n),e.context===null?e.context=n:e.pendingContext=n,e=ei(i,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=Gi(r,e,o),t!==null&&(nr(t,r,o,i),nf(t,r,o)),o}function Gf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function fw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Mv(t,e){fw(t,e),(t=t.alternate)&&fw(t,e)}function WA(){return null}var cC=typeof reportError=="function"?reportError:function(t){console.error(t)};function Iv(t){this._internalRoot=t}Dp.prototype.render=Iv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(re(409));Ip(t,e,null,null)};Dp.prototype.unmount=Iv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;da(function(){Ip(null,t,null,null)}),e[si]=null}};function Dp(t){this._internalRoot=t}Dp.prototype.unstable_scheduleHydration=function(t){if(t){var e=z1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_i.length&&e!==0&&e<_i[n].priority;n++);_i.splice(n,0,t),n===0&&U1(t)}};function Dv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Lp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function pw(){}function VA(t,e,n,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var u=Gf(o);i.call(u)}}var o=lC(e,s,t,0,null,!1,!1,"",pw);return t._reactRootContainer=o,t[si]=o.current,wu(t.nodeType===8?t.parentNode:t),da(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof s=="function"){var a=s;s=function(){var u=Gf(l);a.call(u)}}var l=Ov(t,0,!1,null,null,!1,!1,"",pw);return t._reactRootContainer=l,t[si]=l.current,wu(t.nodeType===8?t.parentNode:t),da(function(){Ip(e,l,n,s)}),l}function $p(t,e,n,s,r){var i=n._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var a=r;r=function(){var l=Gf(o);a.call(l)}}Ip(e,o,t,r)}else o=VA(n,e,t,r,s);return Gf(o)}$1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Bc(e.pendingLanes);n!==0&&(tv(e,n|1),is(e,Yt()),!(rt&6)&&(Ql=Yt()+500,po()))}break;case 13:da(function(){var s=ri(t,1);if(s!==null){var r=Fn();nr(s,t,1,r)}}),Mv(t,1)}};nv=function(t){if(t.tag===13){var e=ri(t,134217728);if(e!==null){var n=Fn();nr(e,t,134217728,n)}Mv(t,134217728)}};F1=function(t){if(t.tag===13){var e=Qi(t),n=ri(t,e);if(n!==null){var s=Fn();nr(n,t,e,s)}Mv(t,e)}};z1=function(){return mt};B1=function(t,e){var n=mt;try{return mt=t,e()}finally{mt=n}};ex=function(t,e,n){switch(e){case"input":if(Kg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var r=Np(s);if(!r)throw Error(re(90));y1(s),Kg(s,r)}}}break;case"textarea":b1(t,n);break;case"select":e=n.value,e!=null&&fl(t,!!n.multiple,e,!1)}};E1=Tv;N1=da;var qA={usingClientEntryPoint:!1,Events:[gd,sl,Np,j1,C1,Tv]},Nc={findFiberByHostInstance:Fo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},KA={bundleType:Nc.bundleType,version:Nc.version,rendererPackageName:Nc.rendererPackageName,rendererConfig:Nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ui.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=R1(t),t===null?null:t.stateNode},findFiberByHostInstance:Nc.findFiberByHostInstance||WA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dh.isDisabled&&dh.supportsFiber)try{Sp=dh.inject(KA),Tr=dh}catch{}}js.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qA;js.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dv(e))throw Error(re(200));return HA(t,e,null,n)};js.createRoot=function(t,e){if(!Dv(t))throw Error(re(299));var n=!1,s="",r=cC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Ov(t,1,!1,null,null,n,!1,s,r),t[si]=e.current,wu(t.nodeType===8?t.parentNode:t),new Iv(e)};js.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(re(188)):(t=Object.keys(t).join(","),Error(re(268,t)));return t=R1(e),t=t===null?null:t.stateNode,t};js.flushSync=function(t){return da(t)};js.hydrate=function(t,e,n){if(!Lp(e))throw Error(re(200));return $p(null,t,e,!0,n)};js.hydrateRoot=function(t,e,n){if(!Dv(t))throw Error(re(405));var s=n!=null&&n.hydratedSources||null,r=!1,i="",o=cC;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=lC(e,null,t,1,n??null,r,!1,i,o),t[si]=e.current,wu(t),s)for(t=0;t<s.length;t++)n=s[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Dp(e)};js.render=function(t,e,n){if(!Lp(e))throw Error(re(200));return $p(null,t,e,!1,n)};js.unmountComponentAtNode=function(t){if(!Lp(t))throw Error(re(40));return t._reactRootContainer?(da(function(){$p(null,null,t,!1,function(){t._reactRootContainer=null,t[si]=null})}),!0):!1};js.unstable_batchedUpdates=Tv;js.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!Lp(n))throw Error(re(200));if(t==null||t._reactInternals===void 0)throw Error(re(38));return $p(t,e,n,!1,s)};js.version="18.3.1-next-f1338f8080-20240426";function uC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uC)}catch(t){console.error(t)}}uC(),u1.exports=js;var yd=u1.exports;const dC=JS(yd);var mw=yd;zg.createRoot=mw.createRoot,zg.hydrateRoot=mw.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pu(){return Pu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Pu.apply(this,arguments)}var Fi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Fi||(Fi={}));const gw="popstate";function GA(t){t===void 0&&(t={});function e(s,r){let{pathname:i,search:o,hash:a}=s.location;return Ox("",{pathname:i,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:hC(r)}return QA(e,n,null,t)}function nn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Lv(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function YA(){return Math.random().toString(36).substr(2,8)}function xw(t,e){return{usr:t.state,key:t.key,idx:e}}function Ox(t,e,n,s){return n===void 0&&(n=null),Pu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?nc(e):e,{state:n,key:e&&e.key||s||YA()})}function hC(t){let{pathname:e="/",search:n="",hash:s=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function nc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function QA(t,e,n,s){s===void 0&&(s={});let{window:r=document.defaultView,v5Compat:i=!1}=s,o=r.history,a=Fi.Pop,l=null,u=d();u==null&&(u=0,o.replaceState(Pu({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Fi.Pop;let y=d(),g=y==null?null:y-u;u=y,l&&l({action:a,location:x.location,delta:g})}function f(y,g){a=Fi.Push;let m=Ox(x.location,y,g);u=d()+1;let b=xw(m,u),k=x.createHref(m);try{o.pushState(b,"",k)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;r.location.assign(k)}i&&l&&l({action:a,location:x.location,delta:1})}function p(y,g){a=Fi.Replace;let m=Ox(x.location,y,g);u=d();let b=xw(m,u),k=x.createHref(m);o.replaceState(b,"",k),i&&l&&l({action:a,location:x.location,delta:0})}function w(y){let g=r.location.origin!=="null"?r.location.origin:r.location.href,m=typeof y=="string"?y:hC(y);return m=m.replace(/ $/,"%20"),nn(g,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,g)}let x={get action(){return a},get location(){return t(r,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(gw,h),l=y,()=>{r.removeEventListener(gw,h),l=null}},createHref(y){return e(r,y)},createURL:w,encodeLocation(y){let g=w(y);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:p,go(y){return o.go(y)}};return x}var yw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(yw||(yw={}));function XA(t,e,n){return n===void 0&&(n="/"),JA(t,e,n)}function JA(t,e,n,s){let r=typeof e=="string"?nc(e):e,i=mC(r.pathname||"/",n);if(i==null)return null;let o=fC(t);ZA(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=dO(i);a=lO(o[l],u)}return a}function fC(t,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let r=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(nn(l.relativePath.startsWith(s),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(s.length));let u=sa([s,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(nn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),fC(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:oO(u,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))r(i,o);else for(let l of pC(i.path))r(i,o,l)}),e}function pC(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let o=pC(s.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function ZA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:aO(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const eO=/^:[\w-]+$/,tO=3,nO=2,sO=1,rO=10,iO=-2,vw=t=>t==="*";function oO(t,e){let n=t.split("/"),s=n.length;return n.some(vw)&&(s+=iO),e&&(s+=nO),n.filter(r=>!vw(r)).reduce((r,i)=>r+(eO.test(i)?tO:i===""?sO:rO),s)}function aO(t,e){return t.length===e.length&&t.slice(0,-1).every((s,r)=>s===e[r])?t[t.length-1]-e[e.length-1]:0}function lO(t,e,n){let{routesMeta:s}=t,r={},i="/",o=[];for(let a=0;a<s.length;++a){let l=s[a],u=a===s.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=cO({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),f=l.route;if(!h)return null;Object.assign(r,h.params),o.push({params:r,pathname:sa([i,h.pathname]),pathnameBase:gO(sa([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=sa([i,h.pathnameBase]))}return o}function cO(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=uO(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:s.reduce((u,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let x=a[h]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const w=a[h];return p&&!w?u[f]=void 0:u[f]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function uO(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Lv(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(s.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function dO(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Lv(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function mC(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}const hO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fO=t=>hO.test(t);function pO(t,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:r=""}=typeof t=="string"?nc(t):t,i;if(n)if(fO(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Lv(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=bw(n.substring(1),"/"):i=bw(n,e)}else i=e;return{pathname:i,search:xO(s),hash:yO(r)}}function bw(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Wm(t,e,n,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function mO(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function gC(t,e){let n=mO(t);return e?n.map((s,r)=>r===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function xC(t,e,n,s){s===void 0&&(s=!1);let r;typeof t=="string"?r=nc(t):(r=Pu({},t),nn(!r.pathname||!r.pathname.includes("?"),Wm("?","pathname","search",r)),nn(!r.pathname||!r.pathname.includes("#"),Wm("#","pathname","hash",r)),nn(!r.search||!r.search.includes("#"),Wm("#","search","hash",r)));let i=t===""||r.pathname==="",o=i?"/":r.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!s&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;r.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=pO(r,a),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const sa=t=>t.join("/").replace(/\/\/+/g,"/"),gO=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),xO=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,yO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function vO(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const yC=["post","put","patch","delete"];new Set(yC);const bO=["get",...yC];new Set(bO);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ru(){return Ru=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Ru.apply(this,arguments)}const $v=v.createContext(null),wO=v.createContext(null),vd=v.createContext(null),Fp=v.createContext(null),mo=v.createContext({outlet:null,matches:[],isDataRoute:!1}),vC=v.createContext(null);function bd(){return v.useContext(Fp)!=null}function sc(){return bd()||nn(!1),v.useContext(Fp).location}function bC(t){v.useContext(vd).static||v.useLayoutEffect(t)}function wd(){let{isDataRoute:t}=v.useContext(mo);return t?DO():kO()}function kO(){bd()||nn(!1);let t=v.useContext($v),{basename:e,future:n,navigator:s}=v.useContext(vd),{matches:r}=v.useContext(mo),{pathname:i}=sc(),o=JSON.stringify(gC(r,n.v7_relativeSplatPath)),a=v.useRef(!1);return bC(()=>{a.current=!0}),v.useCallback(function(u,d){if(d===void 0&&(d={}),!a.current)return;if(typeof u=="number"){s.go(u);return}let h=xC(u,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:sa([e,h.pathname])),(d.replace?s.replace:s.push)(h,d.state,d)},[e,s,o,i,t])}const _O=v.createContext(null);function SO(t){let e=v.useContext(mo).outlet;return e&&v.createElement(_O.Provider,{value:t},e)}function jO(t,e){return CO(t,e)}function CO(t,e,n,s){bd()||nn(!1);let{navigator:r}=v.useContext(vd),{matches:i}=v.useContext(mo),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=sc(),d;if(e){var h;let y=typeof e=="string"?nc(e):e;l==="/"||(h=y.pathname)!=null&&h.startsWith(l)||nn(!1),d=y}else d=u;let f=d.pathname||"/",p=f;if(l!=="/"){let y=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let w=XA(t,{pathname:p}),x=RO(w&&w.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:sa([l,r.encodeLocation?r.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:sa([l,r.encodeLocation?r.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,s);return e&&x?v.createElement(Fp.Provider,{value:{location:Ru({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Fi.Pop}},x):x}function EO(){let t=IO(),e=vO(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),n?v.createElement("pre",{style:r},n):null,null)}const NO=v.createElement(EO,null);class TO extends v.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?v.createElement(mo.Provider,{value:this.props.routeContext},v.createElement(vC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function PO(t){let{routeContext:e,match:n,children:s}=t,r=v.useContext($v);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),v.createElement(mo.Provider,{value:e},s)}function RO(t,e,n,s){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=s)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||nn(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,u=-1;if(n&&s&&s.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:p}=n,w=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||w){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,w=!1,x=null,y=null;n&&(p=a&&h.route.id?a[h.route.id]:void 0,x=h.route.errorElement||NO,l&&(u<0&&f===0?(LO("route-fallback"),w=!0,y=null):u===f&&(w=!0,y=h.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,f+1)),m=()=>{let b;return p?b=x:w?b=y:h.route.Component?b=v.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=d,v.createElement(PO,{match:h,routeContext:{outlet:d,matches:g,isDataRoute:n!=null},children:b})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?v.createElement(TO,{location:n.location,revalidation:n.revalidation,component:x,error:p,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var wC=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(wC||{}),kC=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(kC||{});function AO(t){let e=v.useContext($v);return e||nn(!1),e}function OO(t){let e=v.useContext(wO);return e||nn(!1),e}function MO(t){let e=v.useContext(mo);return e||nn(!1),e}function _C(t){let e=MO(),n=e.matches[e.matches.length-1];return n.route.id||nn(!1),n.route.id}function IO(){var t;let e=v.useContext(vC),n=OO(),s=_C();return e!==void 0?e:(t=n.errors)==null?void 0:t[s]}function DO(){let{router:t}=AO(wC.UseNavigateStable),e=_C(kC.UseNavigateStable),n=v.useRef(!1);return bC(()=>{n.current=!0}),v.useCallback(function(r,i){i===void 0&&(i={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Ru({fromRouteId:e},i)))},[t,e])}const ww={};function LO(t,e,n){ww[t]||(ww[t]=!0)}function $O(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function uf(t){let{to:e,replace:n,state:s,relative:r}=t;bd()||nn(!1);let{future:i,static:o}=v.useContext(vd),{matches:a}=v.useContext(mo),{pathname:l}=sc(),u=wd(),d=xC(e,gC(a,i.v7_relativeSplatPath),l,r==="path"),h=JSON.stringify(d);return v.useEffect(()=>u(JSON.parse(h),{replace:n,state:s,relative:r}),[u,h,r,n,s]),null}function FO(t){return SO(t.context)}function Mn(t){nn(!1)}function zO(t){let{basename:e="/",children:n=null,location:s,navigationType:r=Fi.Pop,navigator:i,static:o=!1,future:a}=t;bd()&&nn(!1);let l=e.replace(/^\/*/,"/"),u=v.useMemo(()=>({basename:l,navigator:i,static:o,future:Ru({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof s=="string"&&(s=nc(s));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:w="default"}=s,x=v.useMemo(()=>{let y=mC(d,l);return y==null?null:{location:{pathname:y,search:h,hash:f,state:p,key:w},navigationType:r}},[l,d,h,f,p,w,r]);return x==null?null:v.createElement(vd.Provider,{value:u},v.createElement(Fp.Provider,{children:n,value:x}))}function BO(t){let{children:e,location:n}=t;return jO(Mx(e),n)}new Promise(()=>{});function Mx(t,e){e===void 0&&(e=[]);let n=[];return v.Children.forEach(t,(s,r)=>{if(!v.isValidElement(s))return;let i=[...e,r];if(s.type===v.Fragment){n.push.apply(n,Mx(s.props.children,i));return}s.type!==Mn&&nn(!1),!s.props.index||!s.props.children||nn(!1);let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=Mx(s.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const UO="6";try{window.__reactRouterVersion=UO}catch{}const HO="startTransition",kw=_p[HO];function WO(t){let{basename:e,children:n,future:s,window:r}=t,i=v.useRef();i.current==null&&(i.current=GA({window:r,v5Compat:!0}));let o=i.current,[a,l]=v.useState({action:o.action,location:o.location}),{v7_startTransition:u}=s||{},d=v.useCallback(h=>{u&&kw?kw(()=>l(h)):l(h)},[l,u]);return v.useLayoutEffect(()=>o.listen(d),[o,d]),v.useEffect(()=>$O(s),[s]),v.createElement(zO,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:s})}var _w;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(_w||(_w={}));var Sw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Sw||(Sw={}));var Yf=["light","dark"],Fv="(prefers-color-scheme: dark)",VO=typeof window>"u",zv=v.createContext(void 0),qO={setTheme:t=>{},themes:[]},KO=()=>{var t;return(t=v.useContext(zv))!=null?t:qO},GO=t=>v.useContext(zv)?t.children:v.createElement(QO,{...t}),YO=["light","dark"],QO=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:s=!0,storageKey:r="theme",themes:i=YO,defaultTheme:o=n?"system":"light",attribute:a="data-theme",value:l,children:u,nonce:d})=>{let[h,f]=v.useState(()=>jw(r,o)),[p,w]=v.useState(()=>jw(r)),x=l?Object.values(l):i,y=v.useCallback(k=>{let _=k;if(!_)return;k==="system"&&n&&(_=Cw());let C=l?l[_]:_,S=e?JO():null,j=document.documentElement;if(a==="class"?(j.classList.remove(...x),C&&j.classList.add(C)):C?j.setAttribute(a,C):j.removeAttribute(a),s){let N=Yf.includes(o)?o:null,T=Yf.includes(_)?_:N;j.style.colorScheme=T}S==null||S()},[]),g=v.useCallback(k=>{let _=typeof k=="function"?k(k):k;f(_);try{localStorage.setItem(r,_)}catch{}},[t]),m=v.useCallback(k=>{let _=Cw(k);w(_),h==="system"&&n&&!t&&y("system")},[h,t]);v.useEffect(()=>{let k=window.matchMedia(Fv);return k.addListener(m),m(k),()=>k.removeListener(m)},[m]),v.useEffect(()=>{let k=_=>{if(_.key!==r)return;let C=_.newValue||o;g(C)};return window.addEventListener("storage",k),()=>window.removeEventListener("storage",k)},[g]),v.useEffect(()=>{y(t??h)},[t,h]);let b=v.useMemo(()=>({theme:h,setTheme:g,forcedTheme:t,resolvedTheme:h==="system"?p:h,themes:n?[...i,"system"]:i,systemTheme:n?p:void 0}),[h,g,t,p,n,i]);return v.createElement(zv.Provider,{value:b},v.createElement(XO,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:s,storageKey:r,themes:i,defaultTheme:o,attribute:a,value:l,children:u,attrs:x,nonce:d}),u)},XO=v.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:s,enableColorScheme:r,defaultTheme:i,value:o,attrs:a,nonce:l})=>{let u=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(w=>`'${w}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=r?Yf.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(w,x=!1,y=!0)=>{let g=o?o[w]:w,m=x?w+"|| ''":`'${g}'`,b="";return r&&y&&!x&&Yf.includes(w)&&(b+=`d.style.colorScheme = '${w}';`),n==="class"?x||g?b+=`c.add(${m})`:b+="null":g&&(b+=`d[s](n,${m})`),b},p=t?`!function(){${d}${f(t)}}()`:s?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${Fv}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${u?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return v.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:p}})}),jw=(t,e)=>{if(VO)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},JO=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},Cw=t=>(t||(t=window.matchMedia(Fv)),t.matches?"dark":"light"),wa=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ZO={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Ei,Uy,zS,eM=(zS=class{constructor(){ke(this,Ei,ZO);ke(this,Uy,!1)}setTimeoutProvider(t){ue(this,Ei,t)}setTimeout(t,e){return M(this,Ei).setTimeout(t,e)}clearTimeout(t){M(this,Ei).clearTimeout(t)}setInterval(t,e){return M(this,Ei).setInterval(t,e)}clearInterval(t){M(this,Ei).clearInterval(t)}},Ei=new WeakMap,Uy=new WeakMap,zS),Uo=new eM;function tM(t){setTimeout(t,0)}var ha=typeof window>"u"||"Deno"in globalThis;function jn(){}function nM(t,e){return typeof t=="function"?t(e):t}function Ix(t){return typeof t=="number"&&t>=0&&t!==1/0}function SC(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Ji(t,e){return typeof t=="function"?t(e):t}function As(t,e){return typeof t=="function"?t(e):t}function Ew(t,e){const{type:n="all",exact:s,fetchStatus:r,predicate:i,queryKey:o,stale:a}=t;if(o){if(s){if(e.queryHash!==Bv(o,e.options))return!1}else if(!Au(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||r&&r!==e.state.fetchStatus||i&&!i(e))}function Nw(t,e){const{exact:n,status:s,predicate:r,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(fa(e.options.mutationKey)!==fa(i))return!1}else if(!Au(e.options.mutationKey,i))return!1}return!(s&&e.state.status!==s||r&&!r(e))}function Bv(t,e){return((e==null?void 0:e.queryKeyHashFn)||fa)(t)}function fa(t){return JSON.stringify(t,(e,n)=>Dx(n)?Object.keys(n).sort().reduce((s,r)=>(s[r]=n[r],s),{}):n)}function Au(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Au(t[n],e[n])):!1}var sM=Object.prototype.hasOwnProperty;function Uv(t,e){if(t===e)return t;const n=Tw(t)&&Tw(e);if(!n&&!(Dx(t)&&Dx(e)))return e;const r=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),o=i.length,a=n?new Array(o):{};let l=0;for(let u=0;u<o;u++){const d=n?u:i[u],h=t[d],f=e[d];if(h===f){a[d]=h,(n?u<r:sM.call(t,d))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){a[d]=f;continue}const p=Uv(h,f);a[d]=p,p===h&&l++}return r===o&&l===r?t:a}function Ou(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function Tw(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Dx(t){if(!Pw(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Pw(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Pw(t){return Object.prototype.toString.call(t)==="[object Object]"}function rM(t){return new Promise(e=>{Uo.setTimeout(e,t)})}function Lx(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?Uv(t,e):e}function iM(t,e,n=0){const s=[...t,e];return n&&s.length>n?s.slice(1):s}function oM(t,e,n=0){const s=[e,...t];return n&&s.length>n?s.slice(0,-1):s}var Hv=Symbol();function jC(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Hv?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function CC(t,e){return typeof t=="function"?t(...e):!!t}var qo,Ni,Tl,BS,aM=(BS=class extends wa{constructor(){super();ke(this,qo);ke(this,Ni);ke(this,Tl);ue(this,Tl,e=>{if(!ha&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){M(this,Ni)||this.setEventListener(M(this,Tl))}onUnsubscribe(){var e;this.hasListeners()||((e=M(this,Ni))==null||e.call(this),ue(this,Ni,void 0))}setEventListener(e){var n;ue(this,Tl,e),(n=M(this,Ni))==null||n.call(this),ue(this,Ni,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){M(this,qo)!==e&&(ue(this,qo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof M(this,qo)=="boolean"?M(this,qo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},qo=new WeakMap,Ni=new WeakMap,Tl=new WeakMap,BS),Wv=new aM;function $x(){let t,e;const n=new Promise((r,i)=>{t=r,e=i});n.status="pending",n.catch(()=>{});function s(r){Object.assign(n,r),delete n.resolve,delete n.reject}return n.resolve=r=>{s({status:"fulfilled",value:r}),t(r)},n.reject=r=>{s({status:"rejected",reason:r}),e(r)},n}var lM=tM;function cM(){let t=[],e=0,n=a=>{a()},s=a=>{a()},r=lM;const i=a=>{e?t.push(a):r(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&r(()=>{s(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{s=a},setScheduler:a=>{r=a}}}var qt=cM(),Pl,Ti,Rl,US,uM=(US=class extends wa{constructor(){super();ke(this,Pl,!0);ke(this,Ti);ke(this,Rl);ue(this,Rl,e=>{if(!ha&&window.addEventListener){const n=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}}})}onSubscribe(){M(this,Ti)||this.setEventListener(M(this,Rl))}onUnsubscribe(){var e;this.hasListeners()||((e=M(this,Ti))==null||e.call(this),ue(this,Ti,void 0))}setEventListener(e){var n;ue(this,Rl,e),(n=M(this,Ti))==null||n.call(this),ue(this,Ti,e(this.setOnline.bind(this)))}setOnline(e){M(this,Pl)!==e&&(ue(this,Pl,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return M(this,Pl)}},Pl=new WeakMap,Ti=new WeakMap,Rl=new WeakMap,US),Qf=new uM;function dM(t){return Math.min(1e3*2**t,3e4)}function EC(t){return(t??"online")==="online"?Qf.isOnline():!0}var Fx=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function NC(t){let e=!1,n=0,s;const r=$x(),i=()=>r.status!=="pending",o=x=>{var y;if(!i()){const g=new Fx(x);f(g),(y=t.onCancel)==null||y.call(t,g)}},a=()=>{e=!0},l=()=>{e=!1},u=()=>Wv.isFocused()&&(t.networkMode==="always"||Qf.isOnline())&&t.canRun(),d=()=>EC(t.networkMode)&&t.canRun(),h=x=>{i()||(s==null||s(),r.resolve(x))},f=x=>{i()||(s==null||s(),r.reject(x))},p=()=>new Promise(x=>{var y;s=g=>{(i()||u())&&x(g)},(y=t.onPause)==null||y.call(t)}).then(()=>{var x;s=void 0,i()||(x=t.onContinue)==null||x.call(t)}),w=()=>{if(i())return;let x;const y=n===0?t.initialPromise:void 0;try{x=y??t.fn()}catch(g){x=Promise.reject(g)}Promise.resolve(x).then(h).catch(g=>{var C;if(i())return;const m=t.retry??(ha?0:3),b=t.retryDelay??dM,k=typeof b=="function"?b(n,g):b,_=m===!0||typeof m=="number"&&n<m||typeof m=="function"&&m(n,g);if(e||!_){f(g);return}n++,(C=t.onFail)==null||C.call(t,n,g),rM(k).then(()=>u()?void 0:p()).then(()=>{e?f(g):w()})})};return{promise:r,status:()=>r.status,cancel:o,continue:()=>(s==null||s(),r),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?w():p().then(w),r)}}var Ko,HS,TC=(HS=class{constructor(){ke(this,Ko)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ix(this.gcTime)&&ue(this,Ko,Uo.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(ha?1/0:5*60*1e3))}clearGcTimeout(){M(this,Ko)&&(Uo.clearTimeout(M(this,Ko)),ue(this,Ko,void 0))}},Ko=new WeakMap,HS),Go,Al,Ps,Yo,un,id,Qo,Qs,Fr,WS,hM=(WS=class extends TC{constructor(e){super();ke(this,Qs);ke(this,Go);ke(this,Al);ke(this,Ps);ke(this,Yo);ke(this,un);ke(this,id);ke(this,Qo);ue(this,Qo,!1),ue(this,id,e.defaultOptions),this.setOptions(e.options),this.observers=[],ue(this,Yo,e.client),ue(this,Ps,M(this,Yo).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,ue(this,Go,Aw(this.options)),this.state=e.state??M(this,Go),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=M(this,un))==null?void 0:e.promise}setOptions(e){if(this.options={...M(this,id),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=Aw(this.options);n.data!==void 0&&(this.setState(Rw(n.data,n.dataUpdatedAt)),ue(this,Go,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&M(this,Ps).remove(this)}setData(e,n){const s=Lx(this.state.data,e,this.options);return Fe(this,Qs,Fr).call(this,{data:s,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(e,n){Fe(this,Qs,Fr).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var s,r;const n=(s=M(this,un))==null?void 0:s.promise;return(r=M(this,un))==null||r.cancel(e),n?n.then(jn).catch(jn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(M(this,Go))}isActive(){return this.observers.some(e=>As(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Hv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Ji(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!SC(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=M(this,un))==null||n.continue()}onOnline(){var n;const e=this.observers.find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=M(this,un))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),M(this,Ps).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(M(this,un)&&(M(this,Qo)?M(this,un).cancel({revert:!0}):M(this,un).cancelRetry()),this.scheduleGc()),M(this,Ps).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Fe(this,Qs,Fr).call(this,{type:"invalidate"})}async fetch(e,n){var l,u,d,h,f,p,w,x,y,g,m,b;if(this.state.fetchStatus!=="idle"&&((l=M(this,un))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(M(this,un))return M(this,un).continueRetry(),M(this,un).promise}if(e&&this.setOptions(e),!this.options.queryFn){const k=this.observers.find(_=>_.options.queryFn);k&&this.setOptions(k.options)}const s=new AbortController,r=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(ue(this,Qo,!0),s.signal)})},i=()=>{const k=jC(this.options,n),C=(()=>{const S={client:M(this,Yo),queryKey:this.queryKey,meta:this.meta};return r(S),S})();return ue(this,Qo,!1),this.options.persister?this.options.persister(k,C,this):k(C)},a=(()=>{const k={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:M(this,Yo),state:this.state,fetchFn:i};return r(k),k})();(u=this.options.behavior)==null||u.onFetch(a,this),ue(this,Al,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=a.fetchOptions)==null?void 0:d.meta))&&Fe(this,Qs,Fr).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta}),ue(this,un,NC({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,onCancel:k=>{k instanceof Fx&&k.revert&&this.setState({...M(this,Al),fetchStatus:"idle"}),s.abort()},onFail:(k,_)=>{Fe(this,Qs,Fr).call(this,{type:"failed",failureCount:k,error:_})},onPause:()=>{Fe(this,Qs,Fr).call(this,{type:"pause"})},onContinue:()=>{Fe(this,Qs,Fr).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const k=await M(this,un).start();if(k===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(k),(p=(f=M(this,Ps).config).onSuccess)==null||p.call(f,k,this),(x=(w=M(this,Ps).config).onSettled)==null||x.call(w,k,this.state.error,this),k}catch(k){if(k instanceof Fx){if(k.silent)return M(this,un).promise;if(k.revert){if(this.state.data===void 0)throw k;return this.state.data}}throw Fe(this,Qs,Fr).call(this,{type:"error",error:k}),(g=(y=M(this,Ps).config).onError)==null||g.call(y,k,this),(b=(m=M(this,Ps).config).onSettled)==null||b.call(m,this.state.data,k,this),k}finally{this.scheduleGc()}}},Go=new WeakMap,Al=new WeakMap,Ps=new WeakMap,Yo=new WeakMap,un=new WeakMap,id=new WeakMap,Qo=new WeakMap,Qs=new WeakSet,Fr=function(e){const n=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...PC(s.data,this.options),fetchMeta:e.meta??null};case"success":const r={...s,...Rw(e.data,e.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ue(this,Al,e.manual?r:void 0),r;case"error":const i=e.error;return{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=n(this.state),qt.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),M(this,Ps).notify({query:this,type:"updated",action:e})})},WS);function PC(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:EC(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Rw(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Aw(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,s=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Yn,Ze,od,In,Xo,Ol,qr,Pi,ad,Ml,Il,Jo,Zo,Ri,Dl,dt,Hc,zx,Bx,Ux,Hx,Wx,Vx,qx,RC,VS,Vv=(VS=class extends wa{constructor(e,n){super();ke(this,dt);ke(this,Yn);ke(this,Ze);ke(this,od);ke(this,In);ke(this,Xo);ke(this,Ol);ke(this,qr);ke(this,Pi);ke(this,ad);ke(this,Ml);ke(this,Il);ke(this,Jo);ke(this,Zo);ke(this,Ri);ke(this,Dl,new Set);this.options=n,ue(this,Yn,e),ue(this,Pi,null),ue(this,qr,$x()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(M(this,Ze).addObserver(this),Ow(M(this,Ze),this.options)?Fe(this,dt,Hc).call(this):this.updateResult(),Fe(this,dt,Hx).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Kx(M(this,Ze),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Kx(M(this,Ze),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Fe(this,dt,Wx).call(this),Fe(this,dt,Vx).call(this),M(this,Ze).removeObserver(this)}setOptions(e){const n=this.options,s=M(this,Ze);if(this.options=M(this,Yn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof As(this.options.enabled,M(this,Ze))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Fe(this,dt,qx).call(this),M(this,Ze).setOptions(this.options),n._defaulted&&!Ou(this.options,n)&&M(this,Yn).getQueryCache().notify({type:"observerOptionsUpdated",query:M(this,Ze),observer:this});const r=this.hasListeners();r&&Mw(M(this,Ze),s,this.options,n)&&Fe(this,dt,Hc).call(this),this.updateResult(),r&&(M(this,Ze)!==s||As(this.options.enabled,M(this,Ze))!==As(n.enabled,M(this,Ze))||Ji(this.options.staleTime,M(this,Ze))!==Ji(n.staleTime,M(this,Ze)))&&Fe(this,dt,zx).call(this);const i=Fe(this,dt,Bx).call(this);r&&(M(this,Ze)!==s||As(this.options.enabled,M(this,Ze))!==As(n.enabled,M(this,Ze))||i!==M(this,Ri))&&Fe(this,dt,Ux).call(this,i)}getOptimisticResult(e){const n=M(this,Yn).getQueryCache().build(M(this,Yn),e),s=this.createResult(n,e);return pM(this,s)&&(ue(this,In,s),ue(this,Ol,this.options),ue(this,Xo,M(this,Ze).state)),s}getCurrentResult(){return M(this,In)}trackResult(e,n){return new Proxy(e,{get:(s,r)=>(this.trackProp(r),n==null||n(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&M(this,qr).status==="pending"&&M(this,qr).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(s,r))})}trackProp(e){M(this,Dl).add(e)}getCurrentQuery(){return M(this,Ze)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=M(this,Yn).defaultQueryOptions(e),s=M(this,Yn).getQueryCache().build(M(this,Yn),n);return s.fetch().then(()=>this.createResult(s,n))}fetch(e){return Fe(this,dt,Hc).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),M(this,In)))}createResult(e,n){var N;const s=M(this,Ze),r=this.options,i=M(this,In),o=M(this,Xo),a=M(this,Ol),u=e!==s?e.state:M(this,od),{state:d}=e;let h={...d},f=!1,p;if(n._optimisticResults){const T=this.hasListeners(),L=!T&&Ow(e,n),D=T&&Mw(e,s,n,r);(L||D)&&(h={...h,...PC(d.data,e.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:w,errorUpdatedAt:x,status:y}=h;p=h.data;let g=!1;if(n.placeholderData!==void 0&&p===void 0&&y==="pending"){let T;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(T=i.data,g=!0):T=typeof n.placeholderData=="function"?n.placeholderData((N=M(this,Il))==null?void 0:N.state.data,M(this,Il)):n.placeholderData,T!==void 0&&(y="success",p=Lx(i==null?void 0:i.data,T,n),f=!0)}if(n.select&&p!==void 0&&!g)if(i&&p===(o==null?void 0:o.data)&&n.select===M(this,ad))p=M(this,Ml);else try{ue(this,ad,n.select),p=n.select(p),p=Lx(i==null?void 0:i.data,p,n),ue(this,Ml,p),ue(this,Pi,null)}catch(T){ue(this,Pi,T)}M(this,Pi)&&(w=M(this,Pi),p=M(this,Ml),x=Date.now(),y="error");const m=h.fetchStatus==="fetching",b=y==="pending",k=y==="error",_=b&&m,C=p!==void 0,j={status:y,fetchStatus:h.fetchStatus,isPending:b,isSuccess:y==="success",isError:k,isInitialLoading:_,isLoading:_,data:p,dataUpdatedAt:h.dataUpdatedAt,error:w,errorUpdatedAt:x,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:m,isRefetching:m&&!b,isLoadingError:k&&!C,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:k&&C,isStale:qv(e,n),refetch:this.refetch,promise:M(this,qr),isEnabled:As(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const T=O=>{j.status==="error"?O.reject(j.error):j.data!==void 0&&O.resolve(j.data)},L=()=>{const O=ue(this,qr,j.promise=$x());T(O)},D=M(this,qr);switch(D.status){case"pending":e.queryHash===s.queryHash&&T(D);break;case"fulfilled":(j.status==="error"||j.data!==D.value)&&L();break;case"rejected":(j.status!=="error"||j.error!==D.reason)&&L();break}}return j}updateResult(){const e=M(this,In),n=this.createResult(M(this,Ze),this.options);if(ue(this,Xo,M(this,Ze).state),ue(this,Ol,this.options),M(this,Xo).data!==void 0&&ue(this,Il,M(this,Ze)),Ou(n,e))return;ue(this,In,n);const s=()=>{if(!e)return!0;const{notifyOnChangeProps:r}=this.options,i=typeof r=="function"?r():r;if(i==="all"||!i&&!M(this,Dl).size)return!0;const o=new Set(i??M(this,Dl));return this.options.throwOnError&&o.add("error"),Object.keys(M(this,In)).some(a=>{const l=a;return M(this,In)[l]!==e[l]&&o.has(l)})};Fe(this,dt,RC).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Fe(this,dt,Hx).call(this)}},Yn=new WeakMap,Ze=new WeakMap,od=new WeakMap,In=new WeakMap,Xo=new WeakMap,Ol=new WeakMap,qr=new WeakMap,Pi=new WeakMap,ad=new WeakMap,Ml=new WeakMap,Il=new WeakMap,Jo=new WeakMap,Zo=new WeakMap,Ri=new WeakMap,Dl=new WeakMap,dt=new WeakSet,Hc=function(e){Fe(this,dt,qx).call(this);let n=M(this,Ze).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(jn)),n},zx=function(){Fe(this,dt,Wx).call(this);const e=Ji(this.options.staleTime,M(this,Ze));if(ha||M(this,In).isStale||!Ix(e))return;const s=SC(M(this,In).dataUpdatedAt,e)+1;ue(this,Jo,Uo.setTimeout(()=>{M(this,In).isStale||this.updateResult()},s))},Bx=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(M(this,Ze)):this.options.refetchInterval)??!1},Ux=function(e){Fe(this,dt,Vx).call(this),ue(this,Ri,e),!(ha||As(this.options.enabled,M(this,Ze))===!1||!Ix(M(this,Ri))||M(this,Ri)===0)&&ue(this,Zo,Uo.setInterval(()=>{(this.options.refetchIntervalInBackground||Wv.isFocused())&&Fe(this,dt,Hc).call(this)},M(this,Ri)))},Hx=function(){Fe(this,dt,zx).call(this),Fe(this,dt,Ux).call(this,Fe(this,dt,Bx).call(this))},Wx=function(){M(this,Jo)&&(Uo.clearTimeout(M(this,Jo)),ue(this,Jo,void 0))},Vx=function(){M(this,Zo)&&(Uo.clearInterval(M(this,Zo)),ue(this,Zo,void 0))},qx=function(){const e=M(this,Yn).getQueryCache().build(M(this,Yn),this.options);if(e===M(this,Ze))return;const n=M(this,Ze);ue(this,Ze,e),ue(this,od,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},RC=function(e){qt.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(M(this,In))}),M(this,Yn).getQueryCache().notify({query:M(this,Ze),type:"observerResultsUpdated"})})},VS);function fM(t,e){return As(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Ow(t,e){return fM(t,e)||t.state.data!==void 0&&Kx(t,e,e.refetchOnMount)}function Kx(t,e,n){if(As(e.enabled,t)!==!1&&Ji(e.staleTime,t)!=="static"){const s=typeof n=="function"?n(t):n;return s==="always"||s!==!1&&qv(t,e)}return!1}function Mw(t,e,n,s){return(t!==e||As(s.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&qv(t,n)}function qv(t,e){return As(e.enabled,t)!==!1&&t.isStaleByTime(Ji(e.staleTime,t))}function pM(t,e){return!Ou(t.getCurrentResult(),e)}function Iw(t){return{onFetch:(e,n)=>{var d,h,f,p,w;const s=e.options,r=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((p=e.state.data)==null?void 0:p.pages)||[],o=((w=e.state.data)==null?void 0:w.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let x=!1;const y=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?x=!0:e.signal.addEventListener("abort",()=>{x=!0}),e.signal)})},g=jC(e.options,e.fetchOptions),m=async(b,k,_)=>{if(x)return Promise.reject();if(k==null&&b.pages.length)return Promise.resolve(b);const S=(()=>{const L={client:e.client,queryKey:e.queryKey,pageParam:k,direction:_?"backward":"forward",meta:e.options.meta};return y(L),L})(),j=await g(S),{maxPages:N}=e.options,T=_?oM:iM;return{pages:T(b.pages,j,N),pageParams:T(b.pageParams,k,N)}};if(r&&i.length){const b=r==="backward",k=b?mM:Dw,_={pages:i,pageParams:o},C=k(s,_);a=await m(_,C,b)}else{const b=t??i.length;do{const k=l===0?o[0]??s.initialPageParam:Dw(s,a);if(l>0&&k==null)break;a=await m(a,k),l++}while(l<b)}return a};e.options.persister?e.fetchFn=()=>{var x,y;return(y=(x=e.options).persister)==null?void 0:y.call(x,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function Dw(t,{pages:e,pageParams:n}){const s=e.length-1;return e.length>0?t.getNextPageParam(e[s],e,n[s],n):void 0}function mM(t,{pages:e,pageParams:n}){var s;return e.length>0?(s=t.getPreviousPageParam)==null?void 0:s.call(t,e[0],e,n[0],n):void 0}var ld,br,Dn,ea,wr,yi,qS,gM=(qS=class extends TC{constructor(e){super();ke(this,wr);ke(this,ld);ke(this,br);ke(this,Dn);ke(this,ea);ue(this,ld,e.client),this.mutationId=e.mutationId,ue(this,Dn,e.mutationCache),ue(this,br,[]),this.state=e.state||AC(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){M(this,br).includes(e)||(M(this,br).push(e),this.clearGcTimeout(),M(this,Dn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){ue(this,br,M(this,br).filter(n=>n!==e)),this.scheduleGc(),M(this,Dn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){M(this,br).length||(this.state.status==="pending"?this.scheduleGc():M(this,Dn).remove(this))}continue(){var e;return((e=M(this,ea))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,l,u,d,h,f,p,w,x,y,g,m,b,k,_,C,S,j,N;const n=()=>{Fe(this,wr,yi).call(this,{type:"continue"})},s={client:M(this,ld),meta:this.options.meta,mutationKey:this.options.mutationKey};ue(this,ea,NC({fn:()=>this.options.mutationFn?this.options.mutationFn(e,s):Promise.reject(new Error("No mutationFn found")),onFail:(T,L)=>{Fe(this,wr,yi).call(this,{type:"failed",failureCount:T,error:L})},onPause:()=>{Fe(this,wr,yi).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>M(this,Dn).canRun(this)}));const r=this.state.status==="pending",i=!M(this,ea).canStart();try{if(r)n();else{Fe(this,wr,yi).call(this,{type:"pending",variables:e,isPaused:i}),await((a=(o=M(this,Dn).config).onMutate)==null?void 0:a.call(o,e,this,s));const L=await((u=(l=this.options).onMutate)==null?void 0:u.call(l,e,s));L!==this.state.context&&Fe(this,wr,yi).call(this,{type:"pending",context:L,variables:e,isPaused:i})}const T=await M(this,ea).start();return await((h=(d=M(this,Dn).config).onSuccess)==null?void 0:h.call(d,T,e,this.state.context,this,s)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,T,e,this.state.context,s)),await((x=(w=M(this,Dn).config).onSettled)==null?void 0:x.call(w,T,null,this.state.variables,this.state.context,this,s)),await((g=(y=this.options).onSettled)==null?void 0:g.call(y,T,null,e,this.state.context,s)),Fe(this,wr,yi).call(this,{type:"success",data:T}),T}catch(T){try{throw await((b=(m=M(this,Dn).config).onError)==null?void 0:b.call(m,T,e,this.state.context,this,s)),await((_=(k=this.options).onError)==null?void 0:_.call(k,T,e,this.state.context,s)),await((S=(C=M(this,Dn).config).onSettled)==null?void 0:S.call(C,void 0,T,this.state.variables,this.state.context,this,s)),await((N=(j=this.options).onSettled)==null?void 0:N.call(j,void 0,T,e,this.state.context,s)),T}finally{Fe(this,wr,yi).call(this,{type:"error",error:T})}}finally{M(this,Dn).runNext(this)}}},ld=new WeakMap,br=new WeakMap,Dn=new WeakMap,ea=new WeakMap,wr=new WeakSet,yi=function(e){const n=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),qt.batch(()=>{M(this,br).forEach(s=>{s.onMutationUpdate(e)}),M(this,Dn).notify({mutation:this,type:"updated",action:e})})},qS);function AC(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Kr,Xs,cd,KS,xM=(KS=class extends wa{constructor(e={}){super();ke(this,Kr);ke(this,Xs);ke(this,cd);this.config=e,ue(this,Kr,new Set),ue(this,Xs,new Map),ue(this,cd,0)}build(e,n,s){const r=new gM({client:e,mutationCache:this,mutationId:++Gd(this,cd)._,options:e.defaultMutationOptions(n),state:s});return this.add(r),r}add(e){M(this,Kr).add(e);const n=hh(e);if(typeof n=="string"){const s=M(this,Xs).get(n);s?s.push(e):M(this,Xs).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(M(this,Kr).delete(e)){const n=hh(e);if(typeof n=="string"){const s=M(this,Xs).get(n);if(s)if(s.length>1){const r=s.indexOf(e);r!==-1&&s.splice(r,1)}else s[0]===e&&M(this,Xs).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=hh(e);if(typeof n=="string"){const s=M(this,Xs).get(n),r=s==null?void 0:s.find(i=>i.state.status==="pending");return!r||r===e}else return!0}runNext(e){var s;const n=hh(e);if(typeof n=="string"){const r=(s=M(this,Xs).get(n))==null?void 0:s.find(i=>i!==e&&i.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}else return Promise.resolve()}clear(){qt.batch(()=>{M(this,Kr).forEach(e=>{this.notify({type:"removed",mutation:e})}),M(this,Kr).clear(),M(this,Xs).clear()})}getAll(){return Array.from(M(this,Kr))}find(e){const n={exact:!0,...e};return this.getAll().find(s=>Nw(n,s))}findAll(e={}){return this.getAll().filter(n=>Nw(e,n))}notify(e){qt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return qt.batch(()=>Promise.all(e.map(n=>n.continue().catch(jn))))}},Kr=new WeakMap,Xs=new WeakMap,cd=new WeakMap,KS);function hh(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Gr,Ai,Qn,Yr,ti,df,Gx,GS,yM=(GS=class extends wa{constructor(n,s){super();ke(this,ti);ke(this,Gr);ke(this,Ai);ke(this,Qn);ke(this,Yr);ue(this,Gr,n),this.setOptions(s),this.bindMethods(),Fe(this,ti,df).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var r;const s=this.options;this.options=M(this,Gr).defaultMutationOptions(n),Ou(this.options,s)||M(this,Gr).getMutationCache().notify({type:"observerOptionsUpdated",mutation:M(this,Qn),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&fa(s.mutationKey)!==fa(this.options.mutationKey)?this.reset():((r=M(this,Qn))==null?void 0:r.state.status)==="pending"&&M(this,Qn).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=M(this,Qn))==null||n.removeObserver(this)}onMutationUpdate(n){Fe(this,ti,df).call(this),Fe(this,ti,Gx).call(this,n)}getCurrentResult(){return M(this,Ai)}reset(){var n;(n=M(this,Qn))==null||n.removeObserver(this),ue(this,Qn,void 0),Fe(this,ti,df).call(this),Fe(this,ti,Gx).call(this)}mutate(n,s){var r;return ue(this,Yr,s),(r=M(this,Qn))==null||r.removeObserver(this),ue(this,Qn,M(this,Gr).getMutationCache().build(M(this,Gr),this.options)),M(this,Qn).addObserver(this),M(this,Qn).execute(n)}},Gr=new WeakMap,Ai=new WeakMap,Qn=new WeakMap,Yr=new WeakMap,ti=new WeakSet,df=function(){var s;const n=((s=M(this,Qn))==null?void 0:s.state)??AC();ue(this,Ai,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Gx=function(n){qt.batch(()=>{var s,r,i,o,a,l,u,d;if(M(this,Yr)&&this.hasListeners()){const h=M(this,Ai).variables,f=M(this,Ai).context,p={client:M(this,Gr),meta:this.options.meta,mutationKey:this.options.mutationKey};(n==null?void 0:n.type)==="success"?((r=(s=M(this,Yr)).onSuccess)==null||r.call(s,n.data,h,f,p),(o=(i=M(this,Yr)).onSettled)==null||o.call(i,n.data,null,h,f,p)):(n==null?void 0:n.type)==="error"&&((l=(a=M(this,Yr)).onError)==null||l.call(a,n.error,h,f,p),(d=(u=M(this,Yr)).onSettled)==null||d.call(u,void 0,n.error,h,f,p))}this.listeners.forEach(h=>{h(M(this,Ai))})})},GS);function Lw(t,e){const n=new Set(e);return t.filter(s=>!n.has(s))}function vM(t,e,n){const s=t.slice(0);return s[e]=n,s}var Ll,fs,$l,Fl,Rs,Oi,ud,dd,hd,wn,Yx,Qx,Xx,Jx,Zx,YS,bM=(YS=class extends wa{constructor(e,n,s){super();ke(this,wn);ke(this,Ll);ke(this,fs);ke(this,$l);ke(this,Fl);ke(this,Rs);ke(this,Oi);ke(this,ud);ke(this,dd);ke(this,hd,[]);ue(this,Ll,e),ue(this,Fl,s),ue(this,$l,[]),ue(this,Rs,[]),ue(this,fs,[]),this.setQueries(n)}onSubscribe(){this.listeners.size===1&&M(this,Rs).forEach(e=>{e.subscribe(n=>{Fe(this,wn,Jx).call(this,e,n)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,M(this,Rs).forEach(e=>{e.destroy()})}setQueries(e,n){ue(this,$l,e),ue(this,Fl,n),qt.batch(()=>{const s=M(this,Rs),r=Fe(this,wn,Xx).call(this,M(this,$l));ue(this,hd,r),r.forEach(h=>h.observer.setOptions(h.defaultedQueryOptions));const i=r.map(h=>h.observer),o=i.map(h=>h.getCurrentResult()),a=s.length!==i.length,l=i.some((h,f)=>h!==s[f]),u=a||l,d=u?!0:o.some((h,f)=>{const p=M(this,fs)[f];return!p||!Ou(h,p)});!u&&!d||(u&&ue(this,Rs,i),ue(this,fs,o),this.hasListeners()&&(u&&(Lw(s,i).forEach(h=>{h.destroy()}),Lw(i,s).forEach(h=>{h.subscribe(f=>{Fe(this,wn,Jx).call(this,h,f)})})),Fe(this,wn,Zx).call(this)))})}getCurrentResult(){return M(this,fs)}getQueries(){return M(this,Rs).map(e=>e.getCurrentQuery())}getObservers(){return M(this,Rs)}getOptimisticResult(e,n){const s=Fe(this,wn,Xx).call(this,e),r=s.map(i=>i.observer.getOptimisticResult(i.defaultedQueryOptions));return[r,i=>Fe(this,wn,Qx).call(this,i??r,n),()=>Fe(this,wn,Yx).call(this,r,s)]}},Ll=new WeakMap,fs=new WeakMap,$l=new WeakMap,Fl=new WeakMap,Rs=new WeakMap,Oi=new WeakMap,ud=new WeakMap,dd=new WeakMap,hd=new WeakMap,wn=new WeakSet,Yx=function(e,n){return n.map((s,r)=>{const i=e[r];return s.defaultedQueryOptions.notifyOnChangeProps?i:s.observer.trackResult(i,o=>{n.forEach(a=>{a.observer.trackProp(o)})})})},Qx=function(e,n){return n?((!M(this,Oi)||M(this,fs)!==M(this,dd)||n!==M(this,ud))&&(ue(this,ud,n),ue(this,dd,M(this,fs)),ue(this,Oi,Uv(M(this,Oi),n(e)))),M(this,Oi)):e},Xx=function(e){const n=new Map;M(this,Rs).forEach(r=>{const i=r.options.queryHash;if(!i)return;const o=n.get(i);o?o.push(r):n.set(i,[r])});const s=[];return e.forEach(r=>{var l;const i=M(this,Ll).defaultQueryOptions(r),a=((l=n.get(i.queryHash))==null?void 0:l.shift())??new Vv(M(this,Ll),i);s.push({defaultedQueryOptions:i,observer:a})}),s},Jx=function(e,n){const s=M(this,Rs).indexOf(e);s!==-1&&(ue(this,fs,vM(M(this,fs),s,n)),Fe(this,wn,Zx).call(this))},Zx=function(){var e;if(this.hasListeners()){const n=M(this,Oi),s=Fe(this,wn,Yx).call(this,M(this,fs),M(this,hd)),r=Fe(this,wn,Qx).call(this,s,(e=M(this,Fl))==null?void 0:e.combine);n!==r&&qt.batch(()=>{this.listeners.forEach(i=>{i(M(this,fs))})})}},YS),kr,QS,wM=(QS=class extends wa{constructor(e={}){super();ke(this,kr);this.config=e,ue(this,kr,new Map)}build(e,n,s){const r=n.queryKey,i=n.queryHash??Bv(r,n);let o=this.get(i);return o||(o=new hM({client:e,queryKey:r,queryHash:i,options:e.defaultQueryOptions(n),state:s,defaultOptions:e.getQueryDefaults(r)}),this.add(o)),o}add(e){M(this,kr).has(e.queryHash)||(M(this,kr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=M(this,kr).get(e.queryHash);n&&(e.destroy(),n===e&&M(this,kr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){qt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return M(this,kr).get(e)}getAll(){return[...M(this,kr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(s=>Ew(n,s))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(s=>Ew(e,s)):n}notify(e){qt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){qt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){qt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},kr=new WeakMap,QS),Ht,Mi,Ii,zl,Bl,Di,Ul,Hl,XS,kM=(XS=class{constructor(t={}){ke(this,Ht);ke(this,Mi);ke(this,Ii);ke(this,zl);ke(this,Bl);ke(this,Di);ke(this,Ul);ke(this,Hl);ue(this,Ht,t.queryCache||new wM),ue(this,Mi,t.mutationCache||new xM),ue(this,Ii,t.defaultOptions||{}),ue(this,zl,new Map),ue(this,Bl,new Map),ue(this,Di,0)}mount(){Gd(this,Di)._++,M(this,Di)===1&&(ue(this,Ul,Wv.subscribe(async t=>{t&&(await this.resumePausedMutations(),M(this,Ht).onFocus())})),ue(this,Hl,Qf.subscribe(async t=>{t&&(await this.resumePausedMutations(),M(this,Ht).onOnline())})))}unmount(){var t,e;Gd(this,Di)._--,M(this,Di)===0&&((t=M(this,Ul))==null||t.call(this),ue(this,Ul,void 0),(e=M(this,Hl))==null||e.call(this),ue(this,Hl,void 0))}isFetching(t){return M(this,Ht).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return M(this,Mi).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=M(this,Ht).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=M(this,Ht).build(this,e),s=n.state.data;return s===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Ji(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(t){return M(this,Ht).findAll(t).map(({queryKey:e,state:n})=>{const s=n.data;return[e,s]})}setQueryData(t,e,n){const s=this.defaultQueryOptions({queryKey:t}),r=M(this,Ht).get(s.queryHash),i=r==null?void 0:r.state.data,o=nM(e,i);if(o!==void 0)return M(this,Ht).build(this,s).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return qt.batch(()=>M(this,Ht).findAll(t).map(({queryKey:s})=>[s,this.setQueryData(s,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=M(this,Ht).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=M(this,Ht);qt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=M(this,Ht);return qt.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},s=qt.batch(()=>M(this,Ht).findAll(t).map(r=>r.cancel(n)));return Promise.all(s).then(jn).catch(jn)}invalidateQueries(t,e={}){return qt.batch(()=>(M(this,Ht).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},s=qt.batch(()=>M(this,Ht).findAll(t).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let i=r.fetch(void 0,n);return n.throwOnError||(i=i.catch(jn)),r.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(jn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=M(this,Ht).build(this,e);return n.isStaleByTime(Ji(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(jn).catch(jn)}fetchInfiniteQuery(t){return t.behavior=Iw(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(jn).catch(jn)}ensureInfiniteQueryData(t){return t.behavior=Iw(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Qf.isOnline()?M(this,Mi).resumePausedMutations():Promise.resolve()}getQueryCache(){return M(this,Ht)}getMutationCache(){return M(this,Mi)}getDefaultOptions(){return M(this,Ii)}setDefaultOptions(t){ue(this,Ii,t)}setQueryDefaults(t,e){M(this,zl).set(fa(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...M(this,zl).values()],n={};return e.forEach(s=>{Au(t,s.queryKey)&&Object.assign(n,s.defaultOptions)}),n}setMutationDefaults(t,e){M(this,Bl).set(fa(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...M(this,Bl).values()],n={};return e.forEach(s=>{Au(t,s.mutationKey)&&Object.assign(n,s.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...M(this,Ii).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Bv(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Hv&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...M(this,Ii).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){M(this,Ht).clear(),M(this,Mi).clear()}},Ht=new WeakMap,Mi=new WeakMap,Ii=new WeakMap,zl=new WeakMap,Bl=new WeakMap,Di=new WeakMap,Ul=new WeakMap,Hl=new WeakMap,XS),OC=v.createContext(void 0),Or=t=>{const e=v.useContext(OC);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},_M=({client:t,children:e})=>(v.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),c.jsx(OC.Provider,{value:t,children:e})),MC=v.createContext(!1),IC=()=>v.useContext(MC);MC.Provider;function SM(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var jM=v.createContext(SM()),DC=()=>v.useContext(jM),LC=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},$C=t=>{v.useEffect(()=>{t.clearReset()},[t])},FC=({result:t,errorResetBoundary:e,throwOnError:n,query:s,suspense:r})=>t.isError&&!e.isReset()&&!t.isFetching&&s&&(r&&t.data===void 0||CC(n,[t.error,s])),zC=t=>{if(t.suspense){const n=r=>r==="static"?r:Math.max(r??1e3,1e3),s=t.staleTime;t.staleTime=typeof s=="function"?(...r)=>n(s(...r)):n(s),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},BC=(t,e)=>t.isLoading&&t.isFetching&&!e,ey=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Xf=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function CM({queries:t,...e},n){const s=Or(),r=IC(),i=DC(),o=v.useMemo(()=>t.map(x=>{const y=s.defaultQueryOptions(x);return y._optimisticResults=r?"isRestoring":"optimistic",y}),[t,s,r]);o.forEach(x=>{zC(x),LC(x,i)}),$C(i);const[a]=v.useState(()=>new bM(s,o,e)),[l,u,d]=a.getOptimisticResult(o,e.combine),h=!r&&e.subscribed!==!1;v.useSyncExternalStore(v.useCallback(x=>h?a.subscribe(qt.batchCalls(x)):jn,[a,h]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),v.useEffect(()=>{a.setQueries(o,e)},[o,e,a]);const p=l.some((x,y)=>ey(o[y],x))?l.flatMap((x,y)=>{const g=o[y];if(g){const m=new Vv(s,g);if(ey(g,x))return Xf(g,m,i);BC(x,r)&&Xf(g,m,i)}return[]}):[];if(p.length>0)throw Promise.all(p);const w=l.find((x,y)=>{const g=o[y];return g&&FC({result:x,errorResetBoundary:i,throwOnError:g.throwOnError,query:s.getQueryCache().get(g.queryHash),suspense:g.suspense})});if(w!=null&&w.error)throw w.error;return u(d())}function EM(t,e,n){var h,f,p,w,x;const s=IC(),r=DC(),i=Or(),o=i.defaultQueryOptions(t);(f=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,o),o._optimisticResults=s?"isRestoring":"optimistic",zC(o),LC(o,r),$C(r);const a=!i.getQueryCache().get(o.queryHash),[l]=v.useState(()=>new e(i,o)),u=l.getOptimisticResult(o),d=!s&&t.subscribed!==!1;if(v.useSyncExternalStore(v.useCallback(y=>{const g=d?l.subscribe(qt.batchCalls(y)):jn;return l.updateResult(),g},[l,d]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),v.useEffect(()=>{l.setOptions(o)},[o,l]),ey(o,u))throw Xf(o,l,r);if(FC({result:u,errorResetBoundary:r,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((w=(p=i.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||w.call(p,o,u),o.experimental_prefetchInRender&&!ha&&BC(u,s)){const y=a?Xf(o,l,r):(x=i.getQueryCache().get(o.queryHash))==null?void 0:x.promise;y==null||y.catch(jn).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?u:l.trackResult(u)}function an(t,e){return EM(t,Vv)}function NM(t,e){const n=Or(),[s]=v.useState(()=>new yM(n,t));v.useEffect(()=>{s.setOptions(t)},[s,t]);const r=v.useSyncExternalStore(v.useCallback(o=>s.subscribe(qt.batchCalls(o)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),i=v.useCallback((o,a)=>{s.mutate(o,a).catch(jn)},[s]);if(r.error&&CC(s.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:i,mutateAsync:r.mutate}}const TM="modulepreload",PM=function(t){return"/"+t},$w={},RM=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=PM(l),l in $w)return;$w[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":TM,u||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),UC=(...t)=>t.filter((e,n,s)=>!!e&&s.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var OM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=v.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:i,iconNode:o,...a},l)=>v.createElement("svg",{ref:l,...OM,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:UC("lucide",r),...a},[...o.map(([u,d])=>v.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=(t,e)=>{const n=v.forwardRef(({className:s,...r},i)=>v.createElement(MM,{ref:i,iconNode:e,className:UC(`lucide-${AM(t)}`,s),...r}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=ot("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=ot("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=ot("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=ot("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fh=ot("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ph=ot("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=ot("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=ot("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=ot("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=ot("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=ot("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=ot("Grid2x2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=ot("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=ot("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=ot("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=ot("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=ot("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=ot("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=ot("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=ot("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VC=ot("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=ot("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=ot("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=ot("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=ot("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=ot("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=ot("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=ot("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mh=ot("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=ot("UserRoundCheck",[["path",{d:"M2 21a8 8 0 0 1 13.292-6",key:"bjp14o"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=ot("UserRoundX",[["path",{d:"M2 21a8 8 0 0 1 11.873-7",key:"74fkxq"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"m17 17 5 5",key:"p7ous7"}],["path",{d:"m22 17-5 5",key:"gqnmv0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hf=ot("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=ot("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function GC(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=GC(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function YC(){for(var t,e,n=0,s="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=GC(t))&&(s&&(s+=" "),s+=e);return s}const Yv="-",QM=t=>{const e=JM(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=t;return{getClassGroupId:o=>{const a=o.split(Yv);return a[0]===""&&a.length!==1&&a.shift(),QC(a,e)||XM(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&s[o]?[...l,...s[o]]:l}}},QC=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],s=e.nextPart.get(n),r=s?QC(t.slice(1),s):void 0;if(r)return r;if(e.validators.length===0)return;const i=t.join(Yv);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},Fw=/^\[(.+)\]$/,XM=t=>{if(Fw.test(t)){const e=Fw.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},JM=t=>{const{theme:e,prefix:n}=t,s={nextPart:new Map,validators:[]};return eI(Object.entries(t.classGroups),n).forEach(([i,o])=>{ty(o,s,i,e)}),s},ty=(t,e,n,s)=>{t.forEach(r=>{if(typeof r=="string"){const i=r===""?e:zw(e,r);i.classGroupId=n;return}if(typeof r=="function"){if(ZM(r)){ty(r(s),e,n,s);return}e.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(([i,o])=>{ty(o,zw(e,i),n,s)})})},zw=(t,e)=>{let n=t;return e.split(Yv).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},ZM=t=>t.isThemeGetter,eI=(t,e)=>e?t.map(([n,s])=>{const r=s.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,r]}):t,tI=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,s=new Map;const r=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,s=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=s.get(i))!==void 0)return r(i,o),o},set(i,o){n.has(i)?n.set(i,o):r(i,o)}}},XC="!",nI=t=>{const{separator:e,experimentalParseClassName:n}=t,s=e.length===1,r=e[0],i=e.length,o=a=>{const l=[];let u=0,d=0,h;for(let y=0;y<a.length;y++){let g=a[y];if(u===0){if(g===r&&(s||a.slice(y,y+i)===e)){l.push(a.slice(d,y)),d=y+i;continue}if(g==="/"){h=y;continue}}g==="["?u++:g==="]"&&u--}const f=l.length===0?a:a.substring(d),p=f.startsWith(XC),w=p?f.substring(1):f,x=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:w,maybePostfixModifierPosition:x}};return n?a=>n({className:a,parseClassName:o}):o},sI=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(s=>{s[0]==="["?(e.push(...n.sort(),s),n=[]):n.push(s)}),e.push(...n.sort()),e},rI=t=>({cache:tI(t.cacheSize),parseClassName:nI(t),...QM(t)}),iI=/\s+/,oI=(t,e)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:r}=e,i=[],o=t.trim().split(iI);let a="";for(let l=o.length-1;l>=0;l-=1){const u=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=n(u);let w=!!p,x=s(w?f.substring(0,p):f);if(!x){if(!w){a=u+(a.length>0?" "+a:a);continue}if(x=s(f),!x){a=u+(a.length>0?" "+a:a);continue}w=!1}const y=sI(d).join(":"),g=h?y+XC:y,m=g+x;if(i.includes(m))continue;i.push(m);const b=r(x,w);for(let k=0;k<b.length;++k){const _=b[k];i.push(g+_)}a=u+(a.length>0?" "+a:a)}return a};function aI(){let t=0,e,n,s="";for(;t<arguments.length;)(e=arguments[t++])&&(n=JC(e))&&(s&&(s+=" "),s+=n);return s}const JC=t=>{if(typeof t=="string")return t;let e,n="";for(let s=0;s<t.length;s++)t[s]&&(e=JC(t[s]))&&(n&&(n+=" "),n+=e);return n};function lI(t,...e){let n,s,r,i=o;function o(l){const u=e.reduce((d,h)=>h(d),t());return n=rI(u),s=n.cache.get,r=n.cache.set,i=a,a(l)}function a(l){const u=s(l);if(u)return u;const d=oI(l,n);return r(l,d),d}return function(){return i(aI.apply(null,arguments))}}const jt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},ZC=/^\[(?:([a-z-]+):)?(.+)\]$/i,cI=/^\d+\/\d+$/,uI=new Set(["px","full","screen"]),dI=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,hI=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,fI=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,pI=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,mI=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Lr=t=>vl(t)||uI.has(t)||cI.test(t),gi=t=>rc(t,"length",_I),vl=t=>!!t&&!Number.isNaN(Number(t)),qm=t=>rc(t,"number",vl),Tc=t=>!!t&&Number.isInteger(Number(t)),gI=t=>t.endsWith("%")&&vl(t.slice(0,-1)),Ke=t=>ZC.test(t),xi=t=>dI.test(t),xI=new Set(["length","size","percentage"]),yI=t=>rc(t,xI,eE),vI=t=>rc(t,"position",eE),bI=new Set(["image","url"]),wI=t=>rc(t,bI,jI),kI=t=>rc(t,"",SI),Pc=()=>!0,rc=(t,e,n)=>{const s=ZC.exec(t);return s?s[1]?typeof e=="string"?s[1]===e:e.has(s[1]):n(s[2]):!1},_I=t=>hI.test(t)&&!fI.test(t),eE=()=>!1,SI=t=>pI.test(t),jI=t=>mI.test(t),CI=()=>{const t=jt("colors"),e=jt("spacing"),n=jt("blur"),s=jt("brightness"),r=jt("borderColor"),i=jt("borderRadius"),o=jt("borderSpacing"),a=jt("borderWidth"),l=jt("contrast"),u=jt("grayscale"),d=jt("hueRotate"),h=jt("invert"),f=jt("gap"),p=jt("gradientColorStops"),w=jt("gradientColorStopPositions"),x=jt("inset"),y=jt("margin"),g=jt("opacity"),m=jt("padding"),b=jt("saturate"),k=jt("scale"),_=jt("sepia"),C=jt("skew"),S=jt("space"),j=jt("translate"),N=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],L=()=>["auto",Ke,e],D=()=>[Ke,e],O=()=>["",Lr,gi],$=()=>["auto",vl,Ke],I=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],A=()=>["solid","dashed","dotted","double","none"],W=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],E=()=>["start","end","center","between","around","evenly","stretch"],P=()=>["","0",Ke],F=()=>["auto","avoid","all","avoid-page","page","left","right","column"],V=()=>[vl,Ke];return{cacheSize:500,separator:":",theme:{colors:[Pc],spacing:[Lr,gi],blur:["none","",xi,Ke],brightness:V(),borderColor:[t],borderRadius:["none","","full",xi,Ke],borderSpacing:D(),borderWidth:O(),contrast:V(),grayscale:P(),hueRotate:V(),invert:P(),gap:D(),gradientColorStops:[t],gradientColorStopPositions:[gI,gi],inset:L(),margin:L(),opacity:V(),padding:D(),saturate:V(),scale:V(),sepia:P(),skew:V(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",Ke]}],container:["container"],columns:[{columns:[xi]}],"break-after":[{"break-after":F()}],"break-before":[{"break-before":F()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...I(),Ke]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Tc,Ke]}],basis:[{basis:L()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ke]}],grow:[{grow:P()}],shrink:[{shrink:P()}],order:[{order:["first","last","none",Tc,Ke]}],"grid-cols":[{"grid-cols":[Pc]}],"col-start-end":[{col:["auto",{span:["full",Tc,Ke]},Ke]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[Pc]}],"row-start-end":[{row:["auto",{span:[Tc,Ke]},Ke]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ke]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ke]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...E()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...E(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...E(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[m]}],px:[{px:[m]}],py:[{py:[m]}],ps:[{ps:[m]}],pe:[{pe:[m]}],pt:[{pt:[m]}],pr:[{pr:[m]}],pb:[{pb:[m]}],pl:[{pl:[m]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ke,e]}],"min-w":[{"min-w":[Ke,e,"min","max","fit"]}],"max-w":[{"max-w":[Ke,e,"none","full","min","max","fit","prose",{screen:[xi]},xi]}],h:[{h:[Ke,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ke,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ke,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ke,e,"auto","min","max","fit"]}],"font-size":[{text:["base",xi,gi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",qm]}],"font-family":[{font:[Pc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ke]}],"line-clamp":[{"line-clamp":["none",vl,qm]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Lr,Ke]}],"list-image":[{"list-image":["none",Ke]}],"list-style-type":[{list:["none","disc","decimal",Ke]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...A(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Lr,gi]}],"underline-offset":[{"underline-offset":["auto",Lr,Ke]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ke]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ke]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...I(),vI]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",yI]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},wI]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...A(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:A()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...A()]}],"outline-offset":[{"outline-offset":[Lr,Ke]}],"outline-w":[{outline:[Lr,gi]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:O()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[Lr,gi]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",xi,kI]}],"shadow-color":[{shadow:[Pc]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...W(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":W()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[s]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",xi,Ke]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[_]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[_]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ke]}],duration:[{duration:V()}],ease:[{ease:["linear","in","out","in-out",Ke]}],delay:[{delay:V()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ke]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[Tc,Ke]}],"translate-x":[{"translate-x":[j]}],"translate-y":[{"translate-y":[j]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ke]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ke]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ke]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Lr,gi,qm]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},EI=lI(CI);function Te(...t){return EI(YC(t))}function yn(t){return t.split(/\n|,/).map(e=>e.trim()).filter(Boolean)}function ny(t){if(!t)return{module:"",service:"",action:""};const[e,n,s]=t.split(":");return{module:(e==null?void 0:e.trim())||"",service:(n==null?void 0:n.trim())||"",action:(s==null?void 0:s.trim())||""}}function Bw({module:t,service:e,action:n}){return!t||!e||!n?"":`${t}:${e}:${n}`}function bl(t,e,n=`${e}s`){return t?`${t} ${t===1?e:n} selected`:`No ${n} selected`}function ff(t,e={}){return{...e,...t||{}}}function _t({className:t,...e}){return c.jsx("div",{className:Te("mmg-card rounded-2xl bg-white/70 dark:bg-white/5 backdrop-blur-xs shadow-soft","ring-1 ring-black/5 dark:ring-white/10",t),...e})}function Kt({className:t,...e}){return c.jsx("div",{className:Te("p-5 pb-3",t),...e})}function Qt({className:t,...e}){return c.jsx("h3",{className:Te("text-base font-semibold",t),...e})}function Gt({className:t,...e}){return c.jsx("div",{className:Te("p-5 pt-0",t),...e})}function Uw(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function ka(...t){return e=>{let n=!1;const s=t.map(r=>{const i=Uw(r,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let r=0;r<s.length;r++){const i=s[r];typeof i=="function"?i():Uw(t[r],null)}}}}function as(...t){return v.useCallback(ka(...t),t)}var NI=Symbol.for("react.lazy"),Jf=_p[" use ".trim().toString()];function TI(t){return typeof t=="object"&&t!==null&&"then"in t}function tE(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===NI&&"_payload"in t&&TI(t._payload)}function PI(t){const e=AI(t),n=v.forwardRef((s,r)=>{let{children:i,...o}=s;tE(i)&&typeof Jf=="function"&&(i=Jf(i._payload));const a=v.Children.toArray(i),l=a.find(MI);if(l){const u=l.props.children,d=a.map(h=>h===l?v.Children.count(u)>1?v.Children.only(null):v.isValidElement(u)?u.props.children:null:h);return c.jsx(e,{...o,ref:r,children:v.isValidElement(u)?v.cloneElement(u,void 0,d):null})}return c.jsx(e,{...o,ref:r,children:i})});return n.displayName=`${t}.Slot`,n}var RI=PI("Slot");function AI(t){const e=v.forwardRef((n,s)=>{let{children:r,...i}=n;if(tE(r)&&typeof Jf=="function"&&(r=Jf(r._payload)),v.isValidElement(r)){const o=DI(r),a=II(i,r.props);return r.type!==v.Fragment&&(a.ref=s?ka(s,o):o),v.cloneElement(r,a)}return v.Children.count(r)>1?v.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var OI=Symbol("radix.slottable");function MI(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===OI}function II(t,e){const n={...e};for(const s in e){const r=t[s],i=e[s];/^on[A-Z]/.test(s)?r&&i?n[s]=(...a)=>{const l=i(...a);return r(...a),l}:r&&(n[s]=r):s==="style"?n[s]={...r,...i}:s==="className"&&(n[s]=[r,i].filter(Boolean).join(" "))}return{...t,...n}}function DI(t){var s,r;let e=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}const Hw=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Ww=YC,LI=(t,e)=>n=>{var s;if((e==null?void 0:e.variants)==null)return Ww(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:r,defaultVariants:i}=e,o=Object.keys(r).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const f=Hw(d)||Hw(h);return r[u][f]}),a=n&&Object.entries(n).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),l=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((u,d)=>{let{class:h,className:f,...p}=d;return Object.entries(p).every(w=>{let[x,y]=w;return Array.isArray(y)?y.includes({...i,...a}[x]):{...i,...a}[x]===y})?[...u,h,f]:u},[]);return Ww(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},$I=LI("inline-flex items-center justify-center whitespace-nowrap rounded-xl text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-black/10 dark:focus-visible:ring-white/15 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"mmg-btn-primary bg-black text-white hover:bg-black/90 dark:bg-white dark:text-black dark:hover:bg-white/90 shadow-soft",secondary:"bg-black/5 text-black hover:bg-black/8 dark:bg-white/10 dark:text-white dark:hover:bg-white/15 shadow-soft",ghost:"bg-transparent hover:bg-black/5 text-black dark:text-white dark:hover:bg-white/10 shadow-soft"},size:{default:"h-10 px-4",sm:"h-9 px-3",lg:"h-11 px-5",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),te=ge.forwardRef(({className:t,variant:e,size:n,asChild:s=!1,...r},i)=>{const o=s?RI:"button";return c.jsx(o,{className:Te($I({variant:e,size:n,className:t})),ref:i,...r})});te.displayName="Button";function Ye({text:t="Loading",className:e=""}){return c.jsxs("span",{className:["inline-flex items-center gap-2",e].filter(Boolean).join(" "),children:[c.jsx("span",{children:t}),c.jsxs("span",{className:"mmg-ellipsis","aria-hidden":"true",children:[c.jsx("span",{className:"mmg-ellipsis-dot",style:{animationDelay:"0ms"}}),c.jsx("span",{className:"mmg-ellipsis-dot",style:{animationDelay:"120ms"}}),c.jsx("span",{className:"mmg-ellipsis-dot",style:{animationDelay:"240ms"}})]})]})}function nE({size:t=128}){return c.jsxs("div",{className:"flex items-end gap-2",children:[c.jsx("img",{src:"/logo.svg",width:t,height:t,alt:"",className:"shrink-0 filter invert dark:invert-0"}),c.jsx("span",{className:"mmg-brand-gold font-semibold text-lg leading-none tracking-tight hidden sm:inline-flex",children:"Nova"})]})}var Cr=function(){return Cr=Object.assign||function(e){for(var n,s=1,r=arguments.length;s<r;s++){n=arguments[s];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Cr.apply(this,arguments)};function ic(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n}function FI(t,e,n,s){function r(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(s.next(d))}catch(h){o(h)}}function l(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,l)}u((s=s.apply(t,e||[])).next())})}function zI(t,e,n){if(n||arguments.length===2)for(var s=0,r=e.length,i;s<r;s++)(i||!(s in e))&&(i||(i=Array.prototype.slice.call(e,0,s)),i[s]=e[s]);return t.concat(i||Array.prototype.slice.call(e))}const BI=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Qv extends Error{constructor(e,n="FunctionsError",s){super(e),this.name=n,this.context=s}}class UI extends Qv{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Vw extends Qv{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class qw extends Qv{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var sy;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(sy||(sy={}));class HI{constructor(e,{headers:n={},customFetch:s,region:r=sy.Any}={}){this.url=e,this.headers=n,this.region=r,this.fetch=BI(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return FI(this,arguments,void 0,function*(n,s={}){var r;let i,o;try{const{headers:a,method:l,body:u,signal:d,timeout:h}=s;let f={},{region:p}=s;p||(p=this.region);const w=new URL(`${this.url}/${n}`);p&&p!=="any"&&(f["x-region"]=p,w.searchParams.set("forceFunctionRegion",p));let x;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",x=u):typeof u=="string"?(f["Content-Type"]="text/plain",x=u):typeof FormData<"u"&&u instanceof FormData?x=u:(f["Content-Type"]="application/json",x=JSON.stringify(u)):x=u;let y=d;h&&(o=new AbortController,i=setTimeout(()=>o.abort(),h),d?(y=o.signal,d.addEventListener("abort",()=>o.abort())):y=o.signal);const g=yield this.fetch(w.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:x,signal:y}).catch(_=>{throw new UI(_)}),m=g.headers.get("x-relay-error");if(m&&m==="true")throw new Vw(g);if(!g.ok)throw new qw(g);let b=((r=g.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),k;return b==="application/json"?k=yield g.json():b==="application/octet-stream"||b==="application/pdf"?k=yield g.blob():b==="text/event-stream"?k=g:b==="multipart/form-data"?k=yield g.formData():k=yield g.text(),{data:k,error:null,response:g}}catch(a){return{data:null,error:a,response:a instanceof qw||a instanceof Vw?a.context:void 0}}finally{i&&clearTimeout(i)}})}}var WI=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},VI=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let r=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,a=null,l=null,u=i.status,d=i.statusText;if(i.ok){var h,f;if(n.method!=="HEAD"){var p;const g=await i.text();g===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((p=n.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?a=g:a=JSON.parse(g))}const x=(h=n.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),y=(f=i.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");x&&y&&y.length>1&&(l=parseInt(y[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,u=406,d="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var w;const x=await i.text();try{o=JSON.parse(x),Array.isArray(o)&&i.status===404&&(a=[],o=null,u=200,d="OK")}catch{i.status===404&&x===""?(u=204,d="No Content"):o={message:x}}if(o&&n.isMaybeSingle&&(!(o==null||(w=o.details)===null||w===void 0)&&w.includes("0 rows"))&&(o=null,u=200,d="OK"),o&&n.shouldThrowOnError)throw new WI(o)}return{error:o,data:a,count:l,status:u,statusText:d}});return this.shouldThrowOnError||(r=r.catch(i=>{var o;let a="";const l=i==null?void 0:i.cause;if(l){var u,d,h,f;const w=(u=l==null?void 0:l.message)!==null&&u!==void 0?u:"",x=(d=l==null?void 0:l.code)!==null&&d!==void 0?d:"";a=`${(h=i==null?void 0:i.name)!==null&&h!==void 0?h:"FetchError"}: ${i==null?void 0:i.message}`,a+=`

Caused by: ${(f=l==null?void 0:l.name)!==null&&f!==void 0?f:"Error"}: ${w}`,x&&(a+=` (${x})`),l!=null&&l.stack&&(a+=`
${l.stack}`)}else{var p;a=(p=i==null?void 0:i.stack)!==null&&p!==void 0?p:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),r.then(t,e)}returns(){return this}overrideTypes(){return this}},qI=class extends VI{select(t){let e=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!e?"":(s==='"'&&(e=!e),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:s,referencedTable:r=s}={}){const i=r?`${r}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:s=n}={}){const r=typeof s>"u"?"offset":`${s}.offset`,i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${t}`),this.url.searchParams.set(i,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:s=!1,wal:r=!1,format:i="text"}={}){var o;const a=[t?"analyze":null,e?"verbose":null,n?"settings":null,s?"buffers":null,r?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${a};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const Kw=new RegExp("[,()]");var Ya=class extends qI{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(s=>typeof s=="string"&&Kw.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(s=>typeof s=="string"&&Kw.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:s}={}){let r="";s==="plain"?r="pl":s==="phrase"?r="ph":s==="websearch"&&(r="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${r}fts${i}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},KI=class{constructor(t,{headers:e={},schema:n,fetch:s}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=s}select(t,e){const{head:n=!1,count:s}=e??{},r=n?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),s&&this.headers.append("Prefer",`count=${s}`),new Ya({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var s;const r="POST";if(e&&this.headers.append("Prefer",`count=${e}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const i=t.reduce((o,a)=>o.concat(Object.keys(a)),[]);if(i.length>0){const o=[...new Set(i)].map(a=>`"${a}"`);this.url.searchParams.set("columns",o.join(","))}}return new Ya({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:s,defaultToNull:r=!0}={}){var i;const o="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),s&&this.headers.append("Prefer",`count=${s}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(a.length>0){const l=[...new Set(a)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new Ya({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(t,{count:e}={}){var n;const s="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new Ya({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Ya({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},GI=class sE{constructor(e,{headers:n={},schema:s,fetch:r}={}){this.url=e,this.headers=new Headers(n),this.schemaName=s,this.fetch=r}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new KI(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new sE(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:s=!1,get:r=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let u;s||r?(a=s?"HEAD":"GET",Object.entries(n).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{l.searchParams.append(h,f)})):(a="POST",u=n);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new Ya({method:a,url:l,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class YI{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const s=n.node,r=parseInt(s.replace(/^v/,"").split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const s=this.getWebSocketConstructor();return new s(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const QI="2.88.0",XI=`realtime-js/${QI}`,rE="1.0.0",JI="2.0.0",Gw=rE,ry=1e4,ZI=1e3,eD=100;var ki;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ki||(ki={}));var sn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(sn||(sn={}));var Zs;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Zs||(Zs={}));var iy;(function(t){t.websocket="websocket"})(iy||(iy={}));var Lo;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Lo||(Lo={}));class tD{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,s;const r=(s=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,r)}_encodeJsonUserBroadcastPush(e){var n,s;const r=(s=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&s!==void 0?s:{},o=new TextEncoder().encode(JSON.stringify(r)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,n,s){var r,i;const o=e.topic,a=(r=e.ref)!==null&&r!==void 0?r:"",l=(i=e.join_ref)!==null&&i!==void 0?i:"",u=e.payload.event,d=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},h=Object.keys(d).length===0?"":JSON.stringify(d);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+u.length+h.length,p=new ArrayBuffer(this.HEADER_LENGTH+f);let w=new DataView(p),x=0;w.setUint8(x++,this.KINDS.userBroadcastPush),w.setUint8(x++,l.length),w.setUint8(x++,a.length),w.setUint8(x++,o.length),w.setUint8(x++,u.length),w.setUint8(x++,h.length),w.setUint8(x++,n),Array.from(l,g=>w.setUint8(x++,g.charCodeAt(0))),Array.from(a,g=>w.setUint8(x++,g.charCodeAt(0))),Array.from(o,g=>w.setUint8(x++,g.charCodeAt(0))),Array.from(u,g=>w.setUint8(x++,g.charCodeAt(0))),Array.from(h,g=>w.setUint8(x++,g.charCodeAt(0)));var y=new Uint8Array(p.byteLength+s.byteLength);return y.set(new Uint8Array(p),0),y.set(new Uint8Array(s),p.byteLength),y.buffer}decode(e,n){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return n(s)}if(typeof e=="string"){const s=JSON.parse(e),[r,i,o,a,l]=s;return n({join_ref:r,ref:i,topic:o,event:a,payload:l})}return n({})}_binaryDecode(e){const n=new DataView(e),s=n.getUint8(0),r=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,r)}}_decodeUserBroadcast(e,n,s){const r=n.getUint8(1),i=n.getUint8(2),o=n.getUint8(3),a=n.getUint8(4);let l=this.HEADER_LENGTH+4;const u=s.decode(e.slice(l,l+r));l=l+r;const d=s.decode(e.slice(l,l+i));l=l+i;const h=s.decode(e.slice(l,l+o));l=l+o;const f=e.slice(l,e.byteLength),p=a===this.JSON_ENCODING?JSON.parse(s.decode(f)):f,w={type:this.BROADCAST_EVENT,event:d,payload:p};return o>0&&(w.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:w}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([s])=>n.includes(s)))}}class iE{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var wt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(wt||(wt={}));const Yw=(t,e,n={})=>{var s;const r=(s=n.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=nD(o,t,e,r),i),{}):{}},nD=(t,e,n,s)=>{const r=e.find(a=>a.name===t),i=r==null?void 0:r.type,o=n[t];return i&&!s.includes(i)?oE(i,o):oy(o)},oE=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return oD(e,n)}switch(t){case wt.bool:return sD(e);case wt.float4:case wt.float8:case wt.int2:case wt.int4:case wt.int8:case wt.numeric:case wt.oid:return rD(e);case wt.json:case wt.jsonb:return iD(e);case wt.timestamp:return aD(e);case wt.abstime:case wt.date:case wt.daterange:case wt.int4range:case wt.int8range:case wt.money:case wt.reltime:case wt.text:case wt.time:case wt.timestamptz:case wt.timetz:case wt.tsrange:case wt.tstzrange:return oy(e);default:return oy(e)}},oy=t=>t,sD=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},rD=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},iD=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},oD=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,s=t[n];if(t[0]==="{"&&s==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>oE(e,a))}return t},aD=t=>typeof t=="string"?t.replace(" ","T"):t,aE=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Km{constructor(e,n,s={},r=ry){this.channel=e,this.event=n,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var s;return this._hasReceived(e)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Qw;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Qw||(Qw={}));class ou{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ou.syncState(this.state,r,i,o),this.pendingDiffs.forEach(l=>{this.state=ou.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(s.diff,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=ou.syncDiff(this.state,r,i,o),a())}),this.onJoin((r,i,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:o})}),this.onLeave((r,i,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,s,r){const i=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(i,(u,d)=>{o[u]||(l[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const f=d.map(y=>y.presence_ref),p=h.map(y=>y.presence_ref),w=d.filter(y=>p.indexOf(y.presence_ref)<0),x=h.filter(y=>f.indexOf(y.presence_ref)<0);w.length>0&&(a[u]=w),x.length>0&&(l[u]=x)}else a[u]=d}),this.syncDiff(i,{joins:a,leaves:l},s,r)}static syncDiff(e,n,s,r){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(i,(a,l)=>{var u;const d=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),d.length>0){const h=e[a].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);e[a].unshift(...f)}s(a,d,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const d=l.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[a]=u,r(a,u,l),u.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(s=>n(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,s)=>{const r=e[s];return"metas"in r?n[s]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[s]=r,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Xw;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Xw||(Xw={}));var au;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(au||(au={}));var Hr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Hr||(Hr={}));class ul{constructor(e,n={config:{}},s){var r,i;if(this.topic=e,this.params=n,this.socket=s,this.bindings={},this.state=sn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Km(this,Zs.join,this.params,this.timeout),this.rejoinTimer=new iE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=sn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=sn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=sn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=sn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=sn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Zs.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new ou(this),this.broadcastEndpointURL=aE(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(r=this.params.config)===null||r===void 0?void 0:r.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var s,r,i;if(this.socket.isConnected()||this.socket.connect(),this.state==sn.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,u=(r=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(p=>p.filter))!==null&&r!==void 0?r:[],d=!!this.bindings[au.PRESENCE]&&this.bindings[au.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(Hr.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(Hr.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var w;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){e==null||e(Hr.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,y=(w=x==null?void 0:x.length)!==null&&w!==void 0?w:0,g=[];for(let m=0;m<y;m++){const b=x[m],{filter:{event:k,schema:_,table:C,filter:S}}=b,j=p&&p[m];if(j&&j.event===k&&ul.isFilterValueEqual(j.schema,_)&&ul.isFilterValueEqual(j.table,C)&&ul.isFilterValueEqual(j.filter,S))g.push(Object.assign(Object.assign({},b),{id:j.id}));else{this.unsubscribe(),this.state=sn.errored,e==null||e(Hr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(Hr.SUBSCRIBED);return}}).receive("error",p=>{this.state=sn.errored,e==null||e(Hr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Hr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,s){return this.state===sn.joined&&e===au.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,s)}async httpSend(e,n,s={}){var r;if(n==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const u=await a.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var s,r;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((r=u.body)===null||r===void 0?void 0:r.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=sn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Zs.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(r=>{s=new Km(this,Zs.leave,{},e),s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=sn.closed,this.bindings={}}async _fetchWithTimeout(e,n,s){const r=new AbortController,i=setTimeout(()=>r.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:r.signal}));return clearTimeout(i),o}_push(e,n,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Km(this,e,n,s);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>eD){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,s){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,s){var r,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:d}=Zs;if(s&&[a,l,u,d].indexOf(o)>=0&&s!==this._joinRef())return;let f=this._onMessage(o,n,s);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(p=>{var w,x,y;return((w=p.filter)===null||w===void 0?void 0:w.event)==="*"||((y=(x=p.filter)===null||x===void 0?void 0:x.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(p=>p.callback(f,s)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var w,x,y,g,m,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const k=p.id,_=(w=p.filter)===null||w===void 0?void 0:w.event;return k&&((x=n.ids)===null||x===void 0?void 0:x.includes(k))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((y=n.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const k=(m=(g=p==null?void 0:p.filter)===null||g===void 0?void 0:g.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return k==="*"||k===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const w=f.data,{schema:x,table:y,commit_timestamp:g,type:m,errors:b}=w;f=Object.assign(Object.assign({},{schema:x,table:y,commit_timestamp:g,eventType:m,new:{},old:{},errors:b}),this._getPayloadRecords(w))}p.callback(f,s)})}_isClosed(){return this.state===sn.closed}_isJoined(){return this.state===sn.joined}_isJoining(){return this.state===sn.joining}_isLeaving(){return this.state===sn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,s){const r=e.toLocaleLowerCase(),i={type:r,filter:n,callback:s};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,n){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&ul.isEqual(r.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const s in e)if(e[s]!==n[s])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Zs.close,{},e)}_onError(e){this._on(Zs.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=sn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Yw(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Yw(e.columns,e.old_record)),n}}const Gm=()=>{},gh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},lD=[1e3,2e3,5e3,1e4],cD=1e4,uD=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class dD{constructor(e,n){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ry,this.transport=null,this.heartbeatIntervalMs=gh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Gm,this.ref=0,this.reconnectTimer=null,this.vsn=Gw,this.logger=Gm,this.conn=null,this.sendBuffer=[],this.serializer=new tD,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=r=>r?(...i)=>r(...i):(...i)=>fetch(...i),!(!((s=n==null?void 0:n.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${iy.websocket}`,this.httpEndpoint=aE(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=YI.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,s){this.logger(e,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case ki.connecting:return Lo.Connecting;case ki.open:return Lo.Open;case ki.closing:return Lo.Closing;default:return Lo.Closed}}isConnected(){return this.connectionState()===Lo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const s=`realtime:${e}`,r=this.getChannels().find(i=>i.topic===s);if(r)return r;{const i=new ul(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:s,payload:r,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${s} (${i})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ZI,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},gh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:r,payload:i,ref:o}=n,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${s} ${r} ${a}`.trim(),i),this.channels.filter(u=>u._isMember(s)).forEach(u=>u._trigger(r,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===ki.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ki.open||this.conn.readyState===ki.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Zs.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const s=e.match(/\?/)?"&":"?",r=new URLSearchParams(n);return`${e}${s}${r}`}_workerObjectUrl(e){let n;if(e)n=e;else{const s=new Blob([uD],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,s=!1;if(e)n=e,s=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(r){this.log("error","Error fetching access token from callback",r),n=this.accessTokenValue}else n=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:XI};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Zs.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(n)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new iE(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},gh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,s,r,i,o,a,l,u,d,h,f,p;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:ry,this.heartbeatIntervalMs=(r=e==null?void 0:e.heartbeatIntervalMs)!==null&&r!==void 0?r:gh.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:Gm,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:Gw,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:w=>lD[w-1]||cD,this.vsn){case rE:this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(w,x)=>x(JSON.stringify(w)),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:(w,x)=>x(JSON.parse(w));break;case JI:this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(p=e==null?void 0:e.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var Mu=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function hD(t,e,n){const s=new URL(e,t);if(n)for(const[r,i]of Object.entries(n))i!==void 0&&s.searchParams.set(r,i);return s.toString()}async function fD(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function pD(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:s,query:r,body:i,headers:o}){const a=hD(t.baseUrl,s,r),l=await fD(t.auth),u=await e(a,{method:n,headers:{...i?{"Content-Type":"application/json"}:{},...l,...o},body:i?JSON.stringify(i):void 0}),d=await u.text(),h=(u.headers.get("content-type")||"").includes("application/json"),f=h&&d?JSON.parse(d):d;if(!u.ok){const p=h?f:void 0,w=p==null?void 0:p.error;throw new Mu((w==null?void 0:w.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:w==null?void 0:w.type,icebergCode:w==null?void 0:w.code,details:p})}return{status:u.status,headers:u.headers,data:f}}}}function xh(t){return t.join("")}var mD=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:xh(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${xh(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${xh(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${xh(t.namespace)}`}),!0}catch(e){if(e instanceof Mu&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof Mu&&n.status===409)return;throw n}}};function Da(t){return t.join("")}var gD=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Da(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Da(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Da(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Da(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Da(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Da(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof Mu&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof Mu&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},xD=class{constructor(t){var s;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=pD({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(s=t.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new mD(this.client,e),this.tableOps=new gD(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},zp=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function $t(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var yD=class extends zp{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},ay=class extends zp{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const Xv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),vD=()=>Response,ly=t=>{if(Array.isArray(t))return t.map(n=>ly(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,s])=>{const r=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[r]=ly(s)}),e},bD=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},wD=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Iu(t){"@babel/helpers - typeof";return Iu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iu(t)}function kD(t,e){if(Iu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(Iu(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _D(t){var e=kD(t,"string");return Iu(e)=="symbol"?e:e+""}function SD(t,e,n){return(e=_D(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Be(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Jw(Object(n),!0).forEach(function(s){SD(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jw(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}const Ym=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},jD=async(t,e,n)=>{t instanceof await vD()&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const r=t.status||500,i=(s==null?void 0:s.statusCode)||r+"";e(new yD(Ym(s),r,i))}).catch(s=>{e(new ay(Ym(s),s))}):e(new ay(Ym(t),t))},CD=(t,e,n,s)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!s?r:(bD(s)?(r.headers=Be({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(s)):r.body=s,e!=null&&e.duplex&&(r.duplex=e.duplex),Be(Be({},r),n))};async function _d(t,e,n,s,r,i){return new Promise((o,a)=>{t(n,CD(e,s,r,i)).then(l=>{if(!l.ok)throw l;return s!=null&&s.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>jD(l,a,s))})}async function Du(t,e,n,s){return _d(t,"GET",e,n,s)}async function Ys(t,e,n,s,r){return _d(t,"POST",e,s,r,n)}async function cy(t,e,n,s,r){return _d(t,"PUT",e,s,r,n)}async function ED(t,e,n,s){return _d(t,"HEAD",e,Be(Be({},n),{},{noResolveJson:!0}),s)}async function Jv(t,e,n,s,r){return _d(t,"DELETE",e,s,r,n)}var ND=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if($t(e))return{data:null,error:e};throw e}}};let lE;lE=Symbol.toStringTag;var TD=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[lE]="BlobDownloadBuilder",this.promise=null}asStream(){return new ND(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if($t(e))return{data:null,error:e};throw e}}};const PD={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Zw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var RD=class{constructor(t,e={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=Xv(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,s){var r=this;try{let i;const o=Be(Be({},Zw),s);let a=Be(Be({},r.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",r.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),l&&!i.has("metadata")&&i.append("metadata",r.encodeMetadata(l))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=r.toBase64(r.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),s!=null&&s.headers&&(a=Be(Be({},a),s.headers));const u=r._removeEmptyFolders(e),d=r._getFinalPath(u),h=await(t=="PUT"?cy:Ys)(r.fetch,`${r.url}/object/${d}`,i,Be({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(r.shouldThrowOnError)throw i;if($t(i))return{data:null,error:i};throw i}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,s){var r=this;const i=r._removeEmptyFolders(t),o=r._getFinalPath(i),a=new URL(r.url+`/object/upload/sign/${o}`);a.searchParams.set("token",e);try{let l;const u=Be({upsert:Zw.upsert},s),d=Be(Be({},r.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{data:{path:i,fullPath:(await cy(r.fetch,a.toString(),l,{headers:d})).Key},error:null}}catch(l){if(r.shouldThrowOnError)throw l;if($t(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(t,e){var n=this;try{let s=n._getFinalPath(t);const r=Be({},n.headers);e!=null&&e.upsert&&(r["x-upsert"]="true");const i=await Ys(n.fetch,`${n.url}/object/upload/sign/${s}`,{},{headers:r}),o=new URL(n.url+i.url),a=o.searchParams.get("token");if(!a)throw new zp("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if($t(s))return{data:null,error:s};throw s}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var s=this;try{return{data:await Ys(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:s.headers}),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if($t(r))return{data:null,error:r};throw r}}async copy(t,e,n){var s=this;try{return{data:{path:(await Ys(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:s.headers})).Key},error:null}}catch(r){if(s.shouldThrowOnError)throw r;if($t(r))return{data:null,error:r};throw r}}async createSignedUrl(t,e,n){var s=this;try{let r=s._getFinalPath(t),i=await Ys(s.fetch,`${s.url}/object/sign/${r}`,Be({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:s.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${s.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(r){if(s.shouldThrowOnError)throw r;if($t(r))return{data:null,error:r};throw r}}async createSignedUrls(t,e,n){var s=this;try{const r=await Ys(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:e,paths:t},{headers:s.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:r.map(o=>Be(Be({},o),{},{signedUrl:o.signedURL?encodeURI(`${s.url}${o.signedURL}${i}`):null})),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if($t(r))return{data:null,error:r};throw r}}download(t,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),r=s?`?${s}`:"",i=this._getFinalPath(t),o=()=>Du(this.fetch,`${this.url}/${n}/${i}${r}`,{headers:this.headers,noResolveJson:!0});return new TD(o,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:ly(await Du(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if($t(s))return{data:null,error:s};throw s}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await ED(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(s){if(e.shouldThrowOnError)throw s;if($t(s)&&s instanceof ay){const r=s.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:s}}throw s}}getPublicUrl(t,e){const n=this._getFinalPath(t),s=[],r=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";r!==""&&s.push(r);const i=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});o!==""&&s.push(o);let a=s.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${a}`)}}}async remove(t){var e=this;try{return{data:await Jv(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if($t(n))return{data:null,error:n};throw n}}async list(t,e,n){var s=this;try{const r=Be(Be(Be({},PD),e),{},{prefix:t||""});return{data:await Ys(s.fetch,`${s.url}/object/list/${s.bucketId}`,r,{headers:s.headers},n),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if($t(r))return{data:null,error:r};throw r}}async listV2(t,e){var n=this;try{const s=Be({},t);return{data:await Ys(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,s,{headers:n.headers},e),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if($t(s))return{data:null,error:s};throw s}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const cE="2.88.0",uE={"X-Client-Info":`storage-js/${cE}`};var AD=class{constructor(t,e={},n,s){this.shouldThrowOnError=!1;const r=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(r.hostname)&&!r.hostname.includes("storage.supabase.")&&(r.hostname=r.hostname.replace("supabase.","storage.supabase.")),this.url=r.href.replace(/\/$/,""),this.headers=Be(Be({},uE),e),this.fetch=Xv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await Du(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if($t(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await Du(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if($t(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await Ys(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if($t(s))return{data:null,error:s};throw s}}async updateBucket(t,e){var n=this;try{return{data:await cy(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if($t(s))return{data:null,error:s};throw s}}async emptyBucket(t){var e=this;try{return{data:await Ys(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if($t(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await Jv(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if($t(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},OD=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Be(Be({},uE),e),this.fetch=Xv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Ys(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if($t(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const s=n.toString(),r=s?`${e.url}/bucket?${s}`:`${e.url}/bucket`;return{data:await Du(e.fetch,r,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if($t(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await Jv(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if($t(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!wD(t))throw new zp("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new xD({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(n,{get(r,i){const o=r[i];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(r,a),error:null}}catch(l){if(s)throw l;return{data:null,error:l}}}}})}};const Zv={"X-Client-Info":`storage-js/${cE}`,"Content-Type":"application/json"};var dE=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function gs(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var Qm=class extends dE{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},MD=class extends dE{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const e0=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),ID=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},ek=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),DD=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const s=t.status||500,r=t;if(typeof r.json=="function")r.json().then(i=>{const o=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||s+"";e(new Qm(ek(i),s,o))}).catch(()=>{const i=s+"";e(new Qm(r.statusText||`HTTP ${s} error`,s,i))});else{const i=s+"";e(new Qm(r.statusText||`HTTP ${s} error`,s,i))}}else e(new MD(ek(t),t))},LD=(t,e,n,s)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return s?(ID(s)?(r.headers=Be({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(s)):r.body=s,Be(Be({},r),n)):r};async function $D(t,e,n,s,r,i){return new Promise((o,a)=>{t(n,LD(e,s,r,i)).then(l=>{if(!l.ok)throw l;if(s!=null&&s.noResolveJson)return l;const u=l.headers.get("content-type");return!u||!u.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>DD(l,a,s))})}async function xs(t,e,n,s,r){return $D(t,"POST",e,s,r,n)}var FD=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Be(Be({},Zv),e),this.fetch=e0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await xs(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(gs(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await xs(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(gs(s))return{data:null,error:s};throw s}}async listIndexes(t){var e=this;try{return{data:await xs(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(gs(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await xs(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(gs(s))return{data:null,error:s};throw s}}},zD=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Be(Be({},Zv),e),this.fetch=e0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await xs(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(gs(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await xs(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(gs(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await xs(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(gs(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await xs(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(gs(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await xs(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(gs(n))return{data:null,error:n};throw n}}},BD=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Be(Be({},Zv),e),this.fetch=e0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await xs(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(gs(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await xs(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(gs(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await xs(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(gs(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await xs(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(gs(n))return{data:null,error:n};throw n}}},UD=class extends BD{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new HD(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},HD=class extends FD{constructor(t,e,n,s){super(t,e,s),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,Be(Be({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,Be(Be({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new WD(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},WD=class extends zD{constructor(t,e,n,s,r){super(t,e,r),this.vectorBucketName=n,this.indexName=s}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,Be(Be({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,Be(Be({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,Be(Be({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,Be(Be({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,Be(Be({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},VD=class extends AD{constructor(t,e={},n,s){super(t,e,n,s)}from(t){return new RD(this.url,this.headers,t,this.fetch)}get vectors(){return new UD(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new OD(this.url+"/iceberg",this.headers,this.fetch)}};const hE="2.88.0",Qa=30*1e3,uy=3,Xm=uy*Qa,qD="http://localhost:9999",KD="supabase.auth.token",GD={"X-Client-Info":`gotrue-js/${hE}`},dy="X-Supabase-Api-Version",fE={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},YD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,QD=10*60*1e3;class Lu extends Error{constructor(e,n,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}}function Re(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class XD extends Lu{constructor(e,n,s){super(e,n,s),this.name="AuthApiError",this.status=n,this.code=s}}function JD(t){return Re(t)&&t.name==="AuthApiError"}class $o extends Lu{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class di extends Lu{constructor(e,n,s,r){super(e,s,r),this.name=n,this.status=s}}class ds extends di{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ZD(t){return Re(t)&&t.name==="AuthSessionMissingError"}class La extends di{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class yh extends di{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class vh extends di{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function eL(t){return Re(t)&&t.name==="AuthImplicitGrantRedirectError"}class tk extends di{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class tL extends di{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class hy extends di{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Jm(t){return Re(t)&&t.name==="AuthRetryableFetchError"}class nk extends di{constructor(e,n,s){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}}class fy extends di{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Zf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),sk=` 	
\r=`.split(""),nL=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<sk.length;e+=1)t[sk[e].charCodeAt(0)]=-2;for(let e=0;e<Zf.length;e+=1)t[Zf[e].charCodeAt(0)]=e;return t})();function rk(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(Zf[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(Zf[s]),e.queuedBits-=6}}function pE(t,e,n){const s=nL[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function ik(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},i=o=>{iL(o,s,n)};for(let o=0;o<t.length;o+=1)pE(t.charCodeAt(o),r,i);return e.join("")}function sL(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function rL(t,e){for(let n=0;n<t.length;n+=1){let s=t.charCodeAt(n);if(s>55295&&s<=56319){const r=(s-55296)*1024&65535;s=(t.charCodeAt(n+1)-56320&65535|r)+65536,n+=1}sL(s,e)}}function iL(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let s=1;s<6;s+=1)if(!(t>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function wl(t){const e=[],n={queue:0,queuedBits:0},s=r=>{e.push(r)};for(let r=0;r<t.length;r+=1)pE(t.charCodeAt(r),n,s);return new Uint8Array(e)}function oL(t){const e=[];return rL(t,n=>e.push(n)),new Uint8Array(e)}function Ho(t){const e=[],n={queue:0,queuedBits:0},s=r=>{e.push(r)};return t.forEach(r=>rk(r,n,s)),rk(null,n,s),e.join("")}function aL(t){return Math.round(Date.now()/1e3)+t}function lL(){return Symbol("auth-callback")}const gn=()=>typeof window<"u"&&typeof document<"u",Eo={tested:!1,writable:!1},mE=()=>{if(!gn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Eo.tested)return Eo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Eo.tested=!0,Eo.writable=!0}catch{Eo.tested=!0,Eo.writable=!1}return Eo.writable};function cL(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((r,i)=>{e[i]=r})}catch{}return n.searchParams.forEach((s,r)=>{e[r]=s}),e}const gE=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),uL=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Xa=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},No=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},mn=async(t,e)=>{await t.removeItem(e)};class Bp{constructor(){this.promise=new Bp.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Bp.promiseConstructor=Promise;function Zm(t){const e=t.split(".");if(e.length!==3)throw new fy("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!YD.test(e[s]))throw new fy("JWT not in base64url format");return{header:JSON.parse(ik(e[0])),payload:JSON.parse(ik(e[1])),signature:wl(e[2]),raw:{header:e[0],payload:e[1]}}}async function dL(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function hL(t,e){return new Promise((s,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){s(o);return}}catch(o){if(!e(i,o)){r(o);return}}})()})}function fL(t){return("0"+t.toString(16)).substr(-2)}function pL(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let r="";for(let i=0;i<56;i++)r+=n.charAt(Math.floor(Math.random()*s));return r}return crypto.getRandomValues(e),Array.from(e,fL).join("")}async function mL(t){const n=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",n),r=new Uint8Array(s);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}async function gL(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await mL(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function $a(t,e,n=!1){const s=pL();let r=s;n&&(r+="/PASSWORD_RECOVERY"),await Xa(t,`${e}-code-verifier`,r);const i=await gL(s);return[i,s===i?"plain":"s256"]}const xL=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function yL(t){const e=t.headers.get(dy);if(!e||!e.match(xL))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function vL(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function bL(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const wL=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Fa(t){if(!wL.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function eg(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function kL(t,e){return new Proxy(t,{get:(n,s,r)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const i=s.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,s,r)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,s,r)}})}function ok(t){return JSON.parse(JSON.stringify(t))}const Mo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),_L=[502,503,504];async function ak(t){var e;if(!uL(t))throw new hy(Mo(t),0);if(_L.includes(t.status))throw new hy(Mo(t),t.status);let n;try{n=await t.json()}catch(i){throw new $o(Mo(i),i)}let s;const r=yL(t);if(r&&r.getTime()>=fE["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new nk(Mo(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new ds}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new nk(Mo(n),t.status,n.weak_password.reasons);throw new XD(Mo(n),t.status||500,s)}const SL=(t,e,n,s)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),n))};async function ze(t,e,n,s){var r;const i=Object.assign({},s==null?void 0:s.headers);i[dy]||(i[dy]=fE["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(r=s==null?void 0:s.query)!==null&&r!==void 0?r:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await jL(t,e,n+a,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(l):{data:Object.assign({},l),error:null}}async function jL(t,e,n,s,r,i){const o=SL(e,s,r,i);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new hy(Mo(l),0)}if(a.ok||await ak(a),s!=null&&s.noResolveJson)return a;try{return await a.json()}catch(l){await ak(l)}}function Ks(t){var e;let n=null;NL(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=aL(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:s},error:null}}function lk(t){const e=Ks(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ji(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function CL(t){return{data:t,error:null}}function EL(t){const{action_link:e,email_otp:n,hashed_token:s,redirect_to:r,verification_type:i}=t,o=ic(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:s,redirect_to:r,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function ck(t){return t}function NL(t){return t.access_token&&t.refresh_token&&t.expires_in}const tg=["global","local","others"];class TL{constructor({url:e="",headers:n={},fetch:s}){this.url=e,this.headers=n,this.fetch=gE(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=tg[0]){if(tg.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${tg.join(", ")}`);try{return await ze(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Re(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,n={}){try{return await ze(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ji})}catch(s){if(Re(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:n}=e,s=ic(e,["options"]),r=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(r.new_email=s==null?void 0:s.newEmail,delete r.newEmail),await ze(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:EL,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Re(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ze(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ji})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,s,r,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},d=await ze(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:ck});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(w=>{const x=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(w.split(";")[1].split("=")[1]);u[`${y}Page`]=x}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Re(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Fa(e);try{return await ze(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ji})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Fa(e);try{return await ze(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:ji})}catch(s){if(Re(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,n=!1){Fa(e);try{return await ze(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:ji})}catch(s){if(Re(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Fa(e.userId);try{const{data:n,error:s}=await ze(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:n,error:s}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Fa(e.userId),Fa(e.id);try{return{data:await ze(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,s,r,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},d=await ze(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:ck});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(w=>{const x=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(w.split(";")[1].split("=")[1]);u[`${y}Page`]=x}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Re(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await ze(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await ze(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await ze(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Re(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await ze(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await ze(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}}function uk(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const za={debug:!!(globalThis&&mE()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class xE extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class PL extends xE{}async function RL(t,e,n){za.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),za.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async r=>{if(r){za.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,r.name);try{return await n()}finally{za.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,r.name)}}else{if(e===0)throw za.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new PL(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(za.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function AL(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function yE(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function OL(t){return parseInt(t,16)}function ML(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function IL(t){var e;const{chainId:n,domain:s,expirationTime:r,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:u,scheme:d,uri:h,version:f}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const p=yE(t.address),w=d?`${d}://${s}`:s,x=t.statement?`${t.statement}
`:"",y=`${w} wants you to sign in with your Ethereum account:
${p}

${x}`;let g=`URI: ${h}
Version: ${f}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(r&&(g+=`
Expiration Time: ${r.toISOString()}`),a&&(g+=`
Not Before: ${a.toISOString()}`),l&&(g+=`
Request ID: ${l}`),u){let m=`
Resources:`;for(const b of u){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);m+=`
- ${b}`}g+=m}return`${y}
${g}`}class Jt extends Error{constructor({message:e,code:n,cause:s,name:r}){var i;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(i=r??(s instanceof Error?s.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class ep extends Jt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function DL({error:t,options:e}){var n,s,r;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Jt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Jt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Jt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Jt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Jt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Jt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Jt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Jt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(vE(o)){if(i.rp.id!==o)return new Jt({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Jt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Jt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Jt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Jt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function LL({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Jt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Jt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(vE(s)){if(n.rpId!==s)return new Jt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Jt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Jt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Jt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class $L{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const FL=new $L;function zL(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:s}=t,r=ic(t,["challenge","user","excludeCredentials"]),i=wl(e).buffer,o=Object.assign(Object.assign({},n),{id:wl(n.id).buffer}),a=Object.assign(Object.assign({},r),{challenge:i,user:o});if(s&&s.length>0){a.excludeCredentials=new Array(s.length);for(let l=0;l<s.length;l++){const u=s[l];a.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:wl(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function BL(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,s=ic(t,["challenge","allowCredentials"]),r=wl(e).buffer,i=Object.assign(Object.assign({},s),{challenge:r});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:wl(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function UL(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Ho(new Uint8Array(t.response.attestationObject)),clientDataJSON:Ho(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function HL(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,s=t.getClientExtensionResults(),r=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Ho(new Uint8Array(r.authenticatorData)),clientDataJSON:Ho(new Uint8Array(r.clientDataJSON)),signature:Ho(new Uint8Array(r.signature)),userHandle:r.userHandle?Ho(new Uint8Array(r.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function vE(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function dk(){var t,e;return!!(gn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function WL(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ep("Browser returned unexpected credential type",e)}:{data:null,error:new ep("Empty credential response",e)}}catch(e){return{data:null,error:DL({error:e,options:t})}}}async function VL(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ep("Browser returned unexpected credential type",e)}:{data:null,error:new ep("Empty credential response",e)}}catch(e){return{data:null,error:LL({error:e,options:t})}}}const qL={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},KL={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function tp(...t){const e=r=>r!==null&&typeof r=="object"&&!Array.isArray(r),n=r=>r instanceof ArrayBuffer||ArrayBuffer.isView(r),s={};for(const r of t)if(r)for(const i in r){const o=r[i];if(o!==void 0)if(Array.isArray(o))s[i]=o;else if(n(o))s[i]=o;else if(e(o)){const a=s[i];e(a)?s[i]=tp(a,o):s[i]=tp(o)}else s[i]=o}return s}function GL(t,e){return tp(qL,t,e||{})}function YL(t,e){return tp(KL,t,e||{})}class QL{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:s,signal:r},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!o)return{data:null,error:a};const l=r??FL.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${s}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=GL(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:h}=await WL({publicKey:u,signal:l});return d?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=YL(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:h}=await VL(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:l}));return d?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(o){return Re(o)?{data:null,error:o}:{data:null,error:new $o("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:n,webauthn:s}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},i){if(!n)return{data:null,error:new Lu("rpId is required for WebAuthn authentication")};try{if(!dk())return{data:null,error:new $o("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:s},signal:r},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:s,credential_response:l.credential_response}})}catch(o){return Re(o)?{data:null,error:o}:{data:null,error:new $o("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},i){if(!n)return{data:null,error:new Lu("rpId is required for WebAuthn registration")};try{if(!dk())return{data:null,error:new $o("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:a};const{data:l,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:s},signal:r},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:s,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(o){return Re(o)?{data:null,error:o}:{data:null,error:new $o("Unexpected error in register",o)}}}}AL();const XL={url:qD,storageKey:KD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:GD,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function hk(t,e,n){return await n()}const Ba={};class $u{get jwks(){var e,n;return(n=(e=Ba[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Ba[this.storageKey]=Object.assign(Object.assign({},Ba[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Ba[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ba[this.storageKey]=Object.assign(Object.assign({},Ba[this.storageKey]),{cachedAt:e})}constructor(e){var n,s,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},XL),e);if(this.storageKey=i.storageKey,this.instanceID=(n=$u.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,$u.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&gn()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new TL({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=gE(i.fetch),this.lock=i.lock||hk,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&gn()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=RL:this.lock=hk,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new QL(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:mE()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=uk(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=uk(this.memoryStorage)),gn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${hE}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},s="none";if(gn()&&(n=cL(window.location.href),this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce")),gn()&&this.detectSessionInUrl&&s!=="none"){const{data:r,error:i}=await this._getSessionFromURL(n,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),eL(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Re(n)?this._returnResult({error:n}):this._returnResult({error:new $o("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,s,r;try{const i=await ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:Ks}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(Re(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var n,s,r;try{let i;if("email"in e){const{email:d,password:h,options:f}=e;let p=null,w=null;this.flowType==="pkce"&&([p,w]=await $a(this.storage,this.storageKey)),i=await ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:w},xform:Ks})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},channel:(r=f==null?void 0:f.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Ks})}else throw new yh("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return await mn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(await mn(this.storage,`${this.storageKey}-code-verifier`),Re(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:lk})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:lk})}else throw new yh("You must provide either an email or phone number and a password");const{data:s,error:r}=n;if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!s||!s.session||!s.user){const i=new La;return this._returnResult({data:{user:null,session:null},error:i})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r})}catch(n){if(Re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,s,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,s,r,i,o,a,l,u,d,h,f;let p,w;if("message"in e)p=e.message,w=e.signature;else{const{chain:x,wallet:y,statement:g,options:m}=e;let b;if(gn())if(typeof y=="object")b=y;else{const N=window;if("ethereum"in N&&typeof N.ethereum=="object"&&"request"in N.ethereum&&typeof N.ethereum.request=="function")b=N.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=y}const k=new URL((n=m==null?void 0:m.url)!==null&&n!==void 0?n:window.location.href),_=await b.request({method:"eth_requestAccounts"}).then(N=>N).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!_||_.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const C=yE(_[0]);let S=(s=m==null?void 0:m.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!S){const N=await b.request({method:"eth_chainId"});S=OL(N)}const j={domain:k.host,address:C,statement:g,uri:k.href,version:"1",chainId:S,nonce:(r=m==null?void 0:m.signInWithEthereum)===null||r===void 0?void 0:r.nonce,issuedAt:(o=(i=m==null?void 0:m.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=m==null?void 0:m.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=m==null?void 0:m.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=m==null?void 0:m.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=m==null?void 0:m.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=IL(j),w=await b.request({method:"personal_sign",params:[ML(p),C]})}try{const{data:x,error:y}=await ze(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:w},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Ks});if(y)throw y;if(!x||!x.session||!x.user){const g=new La;return this._returnResult({data:{user:null,session:null},error:g})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:y})}catch(x){if(Re(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(e){var n,s,r,i,o,a,l,u,d,h,f,p;let w,x;if("message"in e)w=e.message,x=e.signature;else{const{chain:y,wallet:g,statement:m,options:b}=e;let k;if(gn())if(typeof g=="object")k=g;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))k=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=g}const _=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in k&&k.signIn){const C=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),m?{statement:m}:null));let S;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")S=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)S=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)w=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),x=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${_.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(r=(s=b==null?void 0:b.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((h=(d=b==null?void 0:b.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...b.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const C=await k.signMessage(new TextEncoder().encode(w),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=C}}try{const{data:y,error:g}=await ze(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:Ho(x)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Ks});if(g)throw g;if(!y||!y.session||!y.user){const m=new La;return this._returnResult({data:{user:null,session:null},error:m})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:g})}catch(y){if(Re(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async _exchangeCodeForSession(e){const n=await No(this.storage,`${this.storageKey}-code-verifier`),[s,r]=(n??"").split("/");try{if(!s&&this.flowType==="pkce")throw new tL;const{data:i,error:o}=await ze(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Ks});if(await mn(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new La;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:r??null}),error:o})}catch(i){if(await mn(this.storage,`${this.storageKey}-code-verifier`),Re(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:n,provider:s,token:r,access_token:i,nonce:o}=e,a=await ze(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ks}),{data:l,error:u}=a;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const d=new La;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(n){if(Re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,s,r,i,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await $a(this.storage,this.storageKey));const{error:h}=await ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:d}=await ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new yh("You must provide either an email or phone number.")}catch(a){if(await mn(this.storage,`${this.storageKey}-code-verifier`),Re(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var n,s;try{let r,i;"options"in e&&(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:a}=await ze(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:Ks});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(r){if(Re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithSSO(e){var n,s,r,i,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await $a(this.storage,this.storageKey));const u=await ze(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:CL});return!((i=u.data)===null||i===void 0)&&i.url&&gn()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(a){if(await mn(this.storage,`${this.storageKey}-code-verifier`),Re(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;if(s)throw s;if(!n)throw new ds;const{error:r}=await ze(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:r})})}catch(e){if(Re(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:i}=e,{error:o}=await ze(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:s,type:r,options:i}=e,{data:o,error:a}=await ze(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new yh("You must provide either an email or phone number and a type")}catch(n){if(Re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await No(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Xm:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const o=await No(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=eg()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=kL(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:r},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ji}):await this._useSession(async n=>{var s,r,i;const{data:o,error:a}=n;if(a)throw a;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ds}:await ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:ji})})}catch(n){if(Re(n))return ZD(n)&&(await this._removeSession(),await mn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async s=>{const{data:r,error:i}=s;if(i)throw i;if(!r.session)throw new ds;const o=r.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await $a(this.storage,this.storageKey));const{data:u,error:d}=await ze(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:ji});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(s){if(await mn(this.storage,`${this.storageKey}-code-verifier`),Re(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ds;const n=Date.now()/1e3;let s=n,r=!0,i=null;const{payload:o}=Zm(e.access_token);if(o.exp&&(s=o.exp,r=s<=n),r){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(n){if(Re(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var s;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new ds;const{data:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):r?this._returnResult({data:{user:r.user,session:r},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!gn())throw new vh("No browser detected.");if(e.error||e.error_description||e.error_code)throw new vh(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new tk("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new vh("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new tk("No code detected.");const{data:m,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:r,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!i||!a||!o||!u)throw new vh("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(a);let f=d+h;l&&(f=parseInt(l));const p=f-d;p*1e3<=Qa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const w=f-h;d-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,f,d):d-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,f,d);const{data:x,error:y}=await this._getUser(i);if(y)throw y;const g={provider_token:s,provider_refresh_token:r,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:e.type},error:null})}catch(s){if(Re(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await No(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:r,error:i}=n;if(i)return this._returnResult({error:i});const o=(s=r.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(JD(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await mn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=lL(),s={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async n=>{var s,r;try{const{data:{session:i},error:o}=n;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let s=null,r=null;this.flowType==="pkce"&&([s,r]=await $a(this.storage,this.storageKey,!0));try{return await ze(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(await mn(this.storage,`${this.storageKey}-code-verifier`),Re(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:s,error:r}=await this._useSession(async i=>{var o,a,l,u,d;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ze(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(r)throw r;return gn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:e.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(Re(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var s;try{const{error:r,data:{session:i}}=n;if(r)throw r;const{options:o,provider:a,token:l,access_token:u,nonce:d}=e,h=await ze(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=i==null?void 0:i.access_token)!==null&&s!==void 0?s:void 0,body:{provider:a,id_token:l,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Ks}),{data:f,error:p}=h;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new La}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(r){if(await mn(this.storage,`${this.storageKey}-code-verifier`),Re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var s,r;const{data:i,error:o}=n;if(o)throw o;return await ze(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:void 0})})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const s=Date.now();return await hL(async r=>(r>0&&await dL(200*Math.pow(2,r-1)),this._debug(n,"refreshing attempt",r),await ze(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ks})),(r,i)=>{const o=200*Math.pow(2,r);return i&&Jm(i)&&Date.now()+o-s<Qa})}catch(s){if(this._debug(n,"error",s),Re(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",s),gn()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,n;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const r=await No(this.storage,this.storageKey);if(r&&this.userStorage){let o=await No(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:r.user},await Xa(this.userStorage,this.storageKey+"-user",o)),r.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:eg()}else if(r&&!r.user&&!r.user){const o=await No(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(r.user=o.user,await mn(this.storage,this.storageKey+"-user"),await Xa(this.storage,this.storageKey,r)):r.user=eg()}if(this._debug(s,"session from storage",r),!this._isValidSession(r)){this._debug(s,"session is not valid"),r!==null&&await this._removeSession();return}const i=((n=r.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Xm;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${Xm}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),Jm(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(r.access_token);!a&&(o!=null&&o.user)?(r.user=o.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(s,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(s,"error",r),console.error(r);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var n,s;if(!e)throw new ds;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Bp;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new ds;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(r,"error",i),Re(i)){const o={data:null,error:i};return Jm(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,n,s=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",n,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await mn(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),s=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&n.user&&await Xa(this.userStorage,this.storageKey+"-user",{user:n.user});const r=Object.assign({},n);delete r.user;const i=ok(r);await Xa(this.storage,this.storageKey,i)}else{const r=ok(n);await Xa(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await mn(this.storage,this.storageKey),await mn(this.storage,this.storageKey+"-code-verifier"),await mn(this.storage,this.storageKey+"-user"),this.userStorage&&await mn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&gn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Qa);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((s.expires_at*1e3-e)/Qa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Qa}ms, refresh threshold is ${uy} ticks`),r<=uy&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof xE)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!gn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,s){const r=[`provider=${encodeURIComponent(n)}`];if(s!=null&&s.redirectTo&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await $a(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(a.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);r.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&r.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var s;const{data:r,error:i}=n;return i?this._returnResult({data:null,error:i}):await ze(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var s,r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:u}=await ze(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&l.type==="totp"&&(!((r=l==null?void 0:l.totp)===null||r===void 0)&&r.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:r,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?UL(e.webauthn.credential_response):HL(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await ze(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:r,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=await ze(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:zL(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:BL(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:s}=await this.getUser();if(s)return{data:null,error:s};const r={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])r.all.push(i),i.status==="verified"&&r[i.factor_type].push(i);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:s},error:r}=await this.getSession();if(r)return this._returnResult({data:null,error:r});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Zm(s.access_token);let o=null;i.aal&&(o=i.aal);let a=o;((n=(e=s.user.factors)===null||e===void 0?void 0:e.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(a="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:s},error:r}=n;return r?this._returnResult({data:null,error:r}):s?await ze(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new ds})})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async s=>{const{data:{session:r},error:i}=s;if(i)return this._returnResult({data:null,error:i});if(!r)return this._returnResult({data:null,error:new ds});const o=await ze(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&gn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(s){if(Re(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,n){try{return await this._useSession(async s=>{const{data:{session:r},error:i}=s;if(i)return this._returnResult({data:null,error:i});if(!r)return this._returnResult({data:null,error:new ds});const o=await ze(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&gn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(s){if(Re(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;return s?this._returnResult({data:null,error:s}):n?await ze(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:r=>({data:r,error:null})}):this._returnResult({data:null,error:new ds})})}catch(e){if(Re(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:s},error:r}=n;return r?this._returnResult({data:null,error:r}):s?(await ze(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new ds})})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let s=n.keys.find(a=>a.kid===e);if(s)return s;const r=Date.now();if(s=this.jwks.keys.find(a=>a.kid===e),s&&this.jwks_cached_at+QD>r)return s;const{data:i,error:o}=await ze(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=r,s=i.keys.find(a=>a.kid===e),!s)?null:s}async getClaims(e,n={}){try{let s=e;if(!s){const{data:p,error:w}=await this.getSession();if(w||!p.session)return this._returnResult({data:null,error:w});s=p.session.access_token}const{header:r,payload:i,signature:o,raw:{header:a,payload:l}}=Zm(s);n!=null&&n.allowExpired||vL(i.exp);const u=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:p}=await this.getUser(s);if(p)throw p;return{data:{claims:i,header:r,signature:o},error:null}}const d=bL(r.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,oL(`${a}.${l}`)))throw new fy("Invalid JWT signature");return{data:{claims:i,header:r,signature:o},error:null}}catch(s){if(Re(s))return this._returnResult({data:null,error:s});throw s}}}$u.nextInstanceID={};const JL=$u,ZL="2.88.0";let Wc="";typeof Deno<"u"?Wc="deno":typeof document<"u"?Wc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Wc="react-native":Wc="node";const e5={"X-Client-Info":`supabase-js-${Wc}/${ZL}`},t5={headers:e5},n5={schema:"public"},s5={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},r5={};function Fu(t){"@babel/helpers - typeof";return Fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fu(t)}function i5(t,e){if(Fu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(Fu(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function o5(t){var e=i5(t,"string");return Fu(e)=="symbol"?e:e+""}function a5(t,e,n){return(e=o5(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Wt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fk(Object(n),!0).forEach(function(s){a5(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fk(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}const l5=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),c5=()=>Headers,u5=(t,e,n)=>{const s=l5(n),r=c5();return async(i,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let u=new r(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),s(i,Wt(Wt({},o),{},{headers:u}))}};function d5(t){return t.endsWith("/")?t:t+"/"}function h5(t,e){var n,s;const{db:r,auth:i,realtime:o,global:a}=t,{db:l,auth:u,realtime:d,global:h}=e,f={db:Wt(Wt({},l),r),auth:Wt(Wt({},u),i),realtime:Wt(Wt({},d),o),storage:{},global:Wt(Wt(Wt({},h),a),{},{headers:Wt(Wt({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(s=a==null?void 0:a.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function f5(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(d5(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var p5=class extends JL{constructor(t){super(t)}},m5=class{constructor(t,e,n){var s,r;this.supabaseUrl=t,this.supabaseKey=e;const i=f5(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,a={db:n5,realtime:r5,auth:Wt(Wt({},s5),{},{storageKey:o}),global:t5},l=h5(n??{},a);if(this.storageKey=(s=l.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(r=l.global.headers)!==null&&r!==void 0?r:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=l.auth)!==null&&u!==void 0?u:{},this.headers,l.global.fetch)}this.fetch=u5(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Wt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new GI(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new VD(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new HI(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:s}=await t.auth.getSession();return(e=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:s,userStorage:r,storageKey:i,flowType:o,lock:a,debug:l,throwOnError:u},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new p5({url:this.authUrl.href,headers:Wt(Wt({},f),d),storageKey:i,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:s,userStorage:r,flowType:o,lock:a,debug:l,throwOnError:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new dD(this.realtimeUrl.href,Wt(Wt({},t),{},{params:Wt(Wt({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const g5=(t,e,n)=>new m5(t,e,n);function x5(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}x5()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const oc={SUPABASE_URL:window.SUPABASE_URL||void 0||"",SUPABASE_ANON_KEY:window.SUPABASE_ANON_KEY||void 0||"",API_BASE_URL:window.API_BASE_URL||void 0||""};let bh=null;function t0(){if(bh)return bh;const{SUPABASE_URL:t,SUPABASE_ANON_KEY:e}=oc;return!t||!e?null:(bh=g5(t,e),bh)}const n0="authToken";function Up(){return localStorage.getItem(n0)}function dl(t){t&&localStorage.setItem(n0,t)}function Zi(){localStorage.removeItem(n0)}const zu=3e4;let ng=!1,wh=null;function bE(t=zu){const e=new AbortController,n=setTimeout(()=>e.abort(),t);return{controller:e,clear:()=>clearTimeout(n)}}async function wE(){var r;const t=Up();if(t)return t;const e=t0();if(!e)return null;const{data:n}=await e.auth.getSession(),s=((r=n==null?void 0:n.session)==null?void 0:r.access_token)||null;return s&&dl(s),s}async function kE(){return ng||(ng=!0,wh=(async()=>{var t;try{const e=t0();if(!e)return null;const{data:n,error:s}=await e.auth.refreshSession();return s||!((t=n.session)!=null&&t.access_token)?null:(dl(n.session.access_token),n.session.access_token)}catch(e){return console.error("Token refresh failed:",e),null}finally{ng=!1,wh=null}})()),wh}async function Ie(t,e={}){const{baseUrl:n,timeout:s,...r}=e,i=`${n??oc.API_BASE_URL}${t}`,o=new Headers(r.headers||{});!(r.body instanceof FormData)&&!o.has("Content-Type")&&o.set("Content-Type","application/json");const l=await wE();l&&!o.has("Authorization")&&o.set("Authorization",`Bearer ${l}`);const u=s!==0&&s!==!1,{controller:d,clear:h}=u?bE(s||zu):{controller:null,clear:()=>{}};try{let f=await fetch(i,{...r,headers:o,signal:d==null?void 0:d.signal});if(f.status===401){const w=await kE();if(w){if(o.set("Authorization",`Bearer ${w}`),f=await fetch(i,{...r,headers:o,signal:d==null?void 0:d.signal}),!(f.ok||f.status!==401))return Zi(),window.dispatchEvent(new CustomEvent("auth:logout")),null}else return Zi(),window.dispatchEvent(new CustomEvent("auth:logout")),null}if(!f.ok){const w=await f.json().catch(()=>({detail:"Request failed"})),x=new Error(w.detail||w.error||`Request failed: ${f.status}`);throw x.status=f.status,x.data=w,x}return f.status===204?null:(f.headers.get("content-type")||"").includes("application/json")?f.json():f}catch(f){if(f.name==="AbortError"){const p=new Error(`Request timed out after ${s||zu}ms`);throw p.status=408,p.isTimeout=!0,p}throw f}finally{h()}}async function _E(t,e={}){const{baseUrl:n,timeout:s,...r}=e,i=`${n??oc.API_BASE_URL}${t}`,o=new Headers(r.headers||{}),a=await wE();a&&!o.has("Authorization")&&o.set("Authorization",`Bearer ${a}`);const l=s!==0&&s!==!1,{controller:u,clear:d}=l?bE(s||zu):{controller:null,clear:()=>{}};try{let h=await fetch(i,{...r,headers:o,signal:u==null?void 0:u.signal});if(h.status===401){const f=await kE();if(f){if(o.set("Authorization",`Bearer ${f}`),h=await fetch(i,{...r,headers:o,signal:u==null?void 0:u.signal}),!(h.ok||h.status!==401))return Zi(),window.dispatchEvent(new CustomEvent("auth:logout")),null}else return Zi(),window.dispatchEvent(new CustomEvent("auth:logout")),null}if(!h.ok){const f=await h.json().catch(()=>({detail:"Request failed"})),p=new Error(f.detail||f.error||`Request failed: ${h.status}`);throw p.status=h.status,p.data=f,p}return h.blob()}catch(h){if(h.name==="AbortError"){const f=new Error(`Request timed out after ${s||zu}ms`);throw f.status=408,f.isTimeout=!0,f}throw h}finally{d()}}const SE=v.createContext(null),sg={system_admin:["admin","hos","sales_person"],sales_manager:["hos","sales_person"],sales_user:["sales_person"],coordinator:["coordinator"],finance:["finance"],viewer:["viewer"]},y5={"admin@mmg.com":{password:"admin123",id:"dev-admin-1",name:"Sales Admin",email:"admin@mmg.com",roles:["admin","hos","sales_person"]},"hos@mmg.com":{password:"hos123",id:"dev-hos-1",name:"Head of Sales",email:"hos@mmg.com",roles:["hos","sales_person"]},"sales@mmg.com":{password:"sales123",id:"dev-sales-1",name:"Sales Person",email:"sales@mmg.com",roles:["sales_person"]}};function rg(t){return Array.from(new Set((t||[]).filter(Boolean).map(e=>String(e).toLowerCase())))}function pk(t=[]){return t.map(e=>String(e||"").replaceAll(".",":"))}function v5(t){return(t||"sales_user").toLowerCase()}function mk(t,e){var n,s,r,i,o,a,l,u,d;return((n=t==null?void 0:t.user_metadata)==null?void 0:n.full_name)||((s=t==null?void 0:t.user_metadata)==null?void 0:s.name)||((o=(i=(r=t==null?void 0:t.identities)==null?void 0:r[0])==null?void 0:i.identity_data)==null?void 0:o.full_name)||((u=(l=(a=t==null?void 0:t.identities)==null?void 0:a[0])==null?void 0:l.identity_data)==null?void 0:u.name)||((d=t==null?void 0:t.email)==null?void 0:d.split("@")[0])||e||"User"}function pf(t,e){const n=(t==null?void 0:t.permissions)||[];if(!n.length)return!1;const s=u=>String(u||"").trim().replaceAll(".",":"),r=n.map(s),i=s(e);if(r.includes("*:*:*"))return!0;const[o,a,l]=i.split(":");return r.some(u=>{const[d,h,f]=u.split(":");return u===i?!0:(d==="*"||d===o)&&(h==="*"||h===a)&&(f==="*"||f===l||f==="manage")})}function Sd(t){var e,n,s;return((e=t==null?void 0:t.roles)==null?void 0:e.includes("admin"))||((s=(n=t==null?void 0:t.profile)==null?void 0:n.toLowerCase)==null?void 0:s.call(n))==="system_admin"||pf(t,"*:*:*")||pf(t,"core:*:*")||pf(t,"core:system:admin")}function b5({children:t}){const e=t0(),n=!e&&window.location.hostname==="localhost",[s,r]=v.useState(null),[i,o]=v.useState(()=>{const m=localStorage.getItem("mmg_user")||localStorage.getItem("userData");return m?JSON.parse(m):null}),[a,l]=v.useState(!1),[u,d]=v.useState(null);v.useEffect(()=>{const m=window.location.hash;if(!m||!m.includes("error="))return;const b=new URLSearchParams(m.substring(1)),k=b.get("error"),_=b.get("error_code"),C=b.get("error_description");if(k){let S=C?decodeURIComponent(C.replace(/\+/g," ")):"Authentication failed";_==="otp_expired"?S="Email link has expired. Please sign up again to receive a new confirmation email.":_==="access_denied"&&(S="Access denied. The link may have expired or already been used."),setTimeout(()=>alert(S),300),window.history.replaceState(null,"",window.location.pathname+window.location.search)}},[]),v.useEffect(()=>{let m=null;async function b(){console.log("[Auth] init() starting");try{if(!e){console.log("[Auth] No supabase client - dev mode");const C=localStorage.getItem("mmg_user")||localStorage.getItem("userData");C&&o(JSON.parse(C)),l(!0),console.log("[Auth] Dev mode ready");return}console.log("[Auth] Getting supabase session...");const{data:k}=await e.auth.getSession(),_=(k==null?void 0:k.session)||null;console.log("[Auth] Session retrieved",{hasSession:!!_,hasToken:!!(_!=null&&_.access_token)}),r(_||null),l(!0),console.log("[Auth] authReady set to true"),_||(console.log("[Auth] No session - clearing auth"),Zi(),o(null),localStorage.removeItem("mmg_user"),localStorage.removeItem("userData")),_!=null&&_.access_token&&dl(_.access_token),_!=null&&_.access_token&&(console.log("[Auth] Starting background profile refresh"),h(_.access_token,_.user).catch(console.error)),m=e.auth.onAuthStateChange(async(C,S)=>{if(console.log("[Auth] onAuthStateChange",{event:C,hasSession:!!S}),C==="INITIAL_SESSION"){console.log("[Auth] Skipping INITIAL_SESSION (already handled)");return}r(S||null),S!=null&&S.access_token?(dl(S.access_token),u||(console.log("[Auth] Auth state change - refreshing profile"),h(S.access_token,S.user).catch(console.error))):(console.log("[Auth] Auth state change - no session, clearing"),Zi(),o(null),localStorage.removeItem("mmg_user"),localStorage.removeItem("userData"))}).data.subscription}catch(k){console.log("[Auth] init() error",k),l(!0)}}return b(),()=>{var k;return(k=m==null?void 0:m.unsubscribe)==null?void 0:k.call(m)}},[e,u]),v.useEffect(()=>{const m=()=>{d(null),y()};return window.addEventListener("auth:logout",m),()=>window.removeEventListener("auth:logout",m)},[]);async function h(m,b=null){var k,_,C,S;console.log("[Auth] refreshProfile() starting");try{console.log("[Auth] Fetching /api/base/auth/me...");const j=await Ie("/api/base/auth/me",{headers:{Authorization:`Bearer ${m}`}});if(console.log("[Auth] /api/base/auth/me response received",{hasProfile:!!j}),!j)return console.log("[Auth] No profile returned"),null;const N=v5((j==null?void 0:j.profile_name)||(j==null?void 0:j.profile)||(j==null?void 0:j.profileName)),T=sg[N]||["sales_person"],L=(j==null?void 0:j.roles)||(j==null?void 0:j.rbac_roles)||(j==null?void 0:j.user_roles)||[],D={id:(j==null?void 0:j.id)||(b==null?void 0:b.id),email:(j==null?void 0:j.email)||(b==null?void 0:b.email),name:(j==null?void 0:j.name)||mk(b,N),profile:N,profile_name:N,roles:rg([...T,...L]),permissions:pk((j==null?void 0:j.permissions)||[]),raw:j};return console.log("[Auth] Profile loaded, setting user",{email:D.email,roles:D.roles}),o(D),localStorage.setItem("mmg_user",JSON.stringify(D)),localStorage.setItem("userData",JSON.stringify(D)),d(null),D}catch(j){if(console.log("[Auth] refreshProfile error",j),(j==null?void 0:j.status)===403&&((k=j==null?void 0:j.data)!=null&&k.requiresLogout)){const N=(b==null?void 0:b.email)||(i==null?void 0:i.email)||"";return((_=j==null?void 0:j.data)==null?void 0:_.code)==="USER_PENDING_APPROVAL"?(d({pending:!0,email:N,message:((C=j==null?void 0:j.data)==null?void 0:C.error)||"Your account is pending administrator approval."}),null):(await y(),null)}if(b){console.log("[Auth] Using fallback session user data");const N=((S=b.user_metadata)==null?void 0:S.profile)||"sales_user",T=sg[N]||["sales_person"],L={id:b.id,email:b.email,name:mk(b,N),profile:N,profile_name:N,roles:rg(T),permissions:[],raw:b};return console.log("[Auth] Fallback user set",{email:L.email}),o(L),localStorage.setItem("mmg_user",JSON.stringify(L)),localStorage.setItem("userData",JSON.stringify(L)),d(null),L}return console.log("[Auth] No fallback available, returning null"),null}}async function f(){return s!=null&&s.access_token?s.access_token:localStorage.getItem("authToken")}async function p({email:m,password:b}){var C;if(d(null),!e){if(!n)throw new Error("Supabase not configured");const S=y5[m.toLowerCase()];if(!S||S.password!==b)throw new Error("Invalid email or password");const j=S.profile||((C=S.roles)!=null&&C.includes("admin")?"system_admin":"sales_user"),N=rg(S.roles||sg[j]||["sales_person"]),T={id:S.id,email:S.email,name:S.name,profile:j,profile_name:j,roles:N,permissions:pk(S.permissions||[]),raw:S},L=`dev-token-${Date.now()}`;return dl(L),o(T),localStorage.setItem("mmg_user",JSON.stringify(T)),localStorage.setItem("userData",JSON.stringify(T)),T}const{data:k,error:_}=await e.auth.signInWithPassword({email:m,password:b});if(_)throw _;return dl(k.session.access_token),await h(k.session.access_token,k.session.user),k}async function w(){if(!e)throw new Error("Supabase not configured. Please contact your administrator.");const m=w5(),{data:b,error:k}=await e.auth.signInWithOAuth({provider:"azure",options:{scopes:"email profile openid",redirectTo:m}});if(k)throw k;return b}async function x({token:m,email:b,password:k,fullName:_}){var N;if(!e)throw new Error("Supabase not configured");const C=await Ie("/api/base/auth/validate-invite",{method:"POST",body:JSON.stringify({token:m,email:b})}),{data:S,error:j}=await e.auth.signUp({email:b,password:k,options:{data:{full_name:_,profile:(C==null?void 0:C.profile_name)||"sales_user"}}});if(j)throw j;return await Ie("/api/base/auth/consume-invite",{method:"POST",body:JSON.stringify({token:m,email:b,supabase_user_id:(N=S==null?void 0:S.user)==null?void 0:N.id,profile_name:C==null?void 0:C.profile_name,name:_})}),S}async function y(){try{e&&await e.auth.signOut()}finally{Zi(),r(null),o(null),d(null),localStorage.removeItem("mmg_user"),localStorage.removeItem("userData"),sessionStorage.removeItem("msSsoPending")}}const g=v.useMemo(()=>({authReady:a,user:i,session:s,pendingAccess:u,getAccessToken:f,signInWithPassword:p,signInWithMicrosoft:w,signUpWithInvite:x,refreshProfile:h,logout:y}),[a,i,s,u]);return c.jsx(SE.Provider,{value:g,children:t})}function oi(){const t=v.useContext(SE);if(!t)throw new Error("useAuth must be used within AuthProvider");return t}function w5(){const t=`${window.location.protocol}//${window.location.host}`,e=window.SUPABASE_REDIRECT_URL||void 0||"";return window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?`${t}/auth/callback`:`${(e||t).replace(/\/$/,"")}/auth/callback`}function k5(){const{signInWithMicrosoft:t}=oi(),e=wd(),n=sc(),s=v.useMemo(()=>{var h;return((h=n.state)==null?void 0:h.from)||"/app/chat"},[n.state]),[r,i]=v.useState(""),[o,a]=v.useState(!1),{user:l,authReady:u}=oi();v.useEffect(()=>{u&&l&&e(s,{replace:!0})},[u,l,s,e]);async function d(){if(!o){i("");try{a(!0),sessionStorage.setItem("postAuthRedirect",s||"/app/chat"),await new Promise(h=>requestAnimationFrame(h)),await t()}catch(h){i((h==null?void 0:h.message)||"SSO failed"),a(!1)}}}return c.jsxs("div",{className:"min-h-screen px-4 py-8 flex items-center justify-center",children:[c.jsx("div",{className:"mmg-particle one"}),c.jsx("div",{className:"mmg-particle two"}),c.jsx("div",{className:"mmg-particle three"}),c.jsxs("div",{className:"w-full max-w-5xl grid grid-cols-1 lg:grid-cols-[420px_1fr] gap-6 items-stretch",children:[c.jsxs(_t,{className:"self-center",children:[c.jsxs(Kt,{className:"text-center",children:[c.jsx("div",{className:"flex items-center justify-center mb-5",children:c.jsx(nE,{size:96})}),c.jsx("p",{className:"text-sm text-black/60 dark:text-white/65",children:"Sign in to continue to your workspace"})]}),c.jsx(Gt,{children:c.jsxs("div",{className:"space-y-3",children:[r?c.jsx("div",{className:"text-sm text-red-700 rounded-2xl px-4 py-2 bg-black/5 dark:bg-white/10",children:r}):null,c.jsx(te,{variant:"secondary",size:"lg",className:"w-full justify-center gap-2",onClick:d,disabled:o,children:o?c.jsx(Ye,{text:"Signing you in"}):c.jsxs(c.Fragment,{children:[c.jsx(LM,{size:18}),"Sign in with Microsoft"]})})]})})]}),c.jsx("div",{className:"rounded-3xl min-h-[240px] lg:min-h-[520px]","aria-hidden":"true"})]})]})}function jE({email:t,message:e,onSignOut:n}){return c.jsx("div",{className:"min-h-screen grid place-items-center px-4",children:c.jsxs("div",{className:"w-full max-w-[520px] space-y-4 rounded-2xl bg-white/60 dark:bg-white/5 backdrop-blur-md shadow-soft ring-1 ring-black/5 dark:ring-white/10 p-6 text-center",children:[c.jsx("div",{className:"text-2xl font-semibold",children:"Access Pending"}),c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:e||"Your account is pending administrator approval."}),t?c.jsxs("div",{className:"text-xs text-black/55 dark:text-white/60",children:["Signed in as ",c.jsx("strong",{children:t})]}):null,c.jsx("div",{className:"flex justify-center pt-2",children:c.jsx(te,{variant:"secondary",onClick:n,children:"Sign Out"})})]})})}function _5(){const t=wd(),{authReady:e,session:n,user:s,pendingAccess:r,logout:i}=oi();return v.useEffect(()=>{if(e&&!n){t("/login",{replace:!0});return}if(e&&n&&s){const o=sessionStorage.getItem("postAuthRedirect")||"/app/chat";sessionStorage.removeItem("postAuthRedirect"),t(o,{replace:!0})}},[e,n,s,t]),e&&r?c.jsx(jE,{email:r.email,message:r.message,onSignOut:i}):c.jsx("div",{className:"min-h-screen grid place-items-center px-4",children:c.jsx("div",{className:"rounded-2xl bg-white/55 dark:bg-white/5 backdrop-blur-md shadow-soft ring-1 ring-black/5 dark:ring-white/10 px-5 py-4 text-sm",children:c.jsx(Ye,{text:"Loading"})})})}function CE(){const{theme:t,setTheme:e}=KO(),n=t==="dark";return c.jsx(te,{variant:"ghost",size:"icon","aria-label":"Toggle theme",onClick:()=>e(n?"light":"dark"),title:"Toggle theme",className:"rounded-2xl",children:n?c.jsx(KM,{size:18}):c.jsx(UM,{size:18})})}function nt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function jd(t,e=[]){let n=[];function s(i,o){const a=v.createContext(o),l=n.length;n=[...n,o];const u=h=>{var g;const{scope:f,children:p,...w}=h,x=((g=f==null?void 0:f[t])==null?void 0:g[l])||a,y=v.useMemo(()=>w,Object.values(w));return c.jsx(x.Provider,{value:y,children:p})};u.displayName=i+"Provider";function d(h,f){var x;const p=((x=f==null?void 0:f[t])==null?void 0:x[l])||a,w=v.useContext(p);if(w)return w;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const r=()=>{const i=n.map(o=>v.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return v.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return r.scopeName=t,[s,S5(r,...e)]}function S5(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const s=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const o=s.reduce((a,{useScope:l,scopeName:u})=>{const h=l(i)[`__scope${u}`];return{...a,...h}},{});return v.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var oo=globalThis!=null&&globalThis.document?v.useLayoutEffect:()=>{},j5=_p[" useInsertionEffect ".trim().toString()]||oo;function EE({prop:t,defaultProp:e,onChange:n=()=>{},caller:s}){const[r,i,o]=C5({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:r;{const d=v.useRef(t!==void 0);v.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${s} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,s])}const u=v.useCallback(d=>{var h;if(a){const f=E5(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else i(d)},[a,t,i,o]);return[l,u]}function C5({defaultProp:t,onChange:e}){const[n,s]=v.useState(t),r=v.useRef(n),i=v.useRef(e);return j5(()=>{i.current=e},[e]),v.useEffect(()=>{var o;r.current!==n&&((o=i.current)==null||o.call(i,n),r.current=n)},[n,r]),[n,s,i]}function E5(t){return typeof t=="function"}function N5(t){const e=T5(t),n=v.forwardRef((s,r)=>{const{children:i,...o}=s,a=v.Children.toArray(i),l=a.find(R5);if(l){const u=l.props.children,d=a.map(h=>h===l?v.Children.count(u)>1?v.Children.only(null):v.isValidElement(u)?u.props.children:null:h);return c.jsx(e,{...o,ref:r,children:v.isValidElement(u)?v.cloneElement(u,void 0,d):null})}return c.jsx(e,{...o,ref:r,children:i})});return n.displayName=`${t}.Slot`,n}function T5(t){const e=v.forwardRef((n,s)=>{const{children:r,...i}=n;if(v.isValidElement(r)){const o=O5(r),a=A5(i,r.props);return r.type!==v.Fragment&&(a.ref=s?ka(s,o):o),v.cloneElement(r,a)}return v.Children.count(r)>1?v.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var P5=Symbol("radix.slottable");function R5(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===P5}function A5(t,e){const n={...e};for(const s in e){const r=t[s],i=e[s];/^on[A-Z]/.test(s)?r&&i?n[s]=(...a)=>{const l=i(...a);return r(...a),l}:r&&(n[s]=r):s==="style"?n[s]={...r,...i}:s==="className"&&(n[s]=[r,i].filter(Boolean).join(" "))}return{...t,...n}}function O5(t){var s,r;let e=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var M5=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Un=M5.reduce((t,e)=>{const n=N5(`Primitive.${e}`),s=v.forwardRef((r,i)=>{const{asChild:o,...a}=r,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(l,{...a,ref:i})});return s.displayName=`Primitive.${e}`,{...t,[e]:s}},{});function NE(t,e){t&&yd.flushSync(()=>t.dispatchEvent(e))}function gk(t){const e=I5(t),n=v.forwardRef((s,r)=>{const{children:i,...o}=s,a=v.Children.toArray(i),l=a.find(L5);if(l){const u=l.props.children,d=a.map(h=>h===l?v.Children.count(u)>1?v.Children.only(null):v.isValidElement(u)?u.props.children:null:h);return c.jsx(e,{...o,ref:r,children:v.isValidElement(u)?v.cloneElement(u,void 0,d):null})}return c.jsx(e,{...o,ref:r,children:i})});return n.displayName=`${t}.Slot`,n}function I5(t){const e=v.forwardRef((n,s)=>{const{children:r,...i}=n;if(v.isValidElement(r)){const o=F5(r),a=$5(i,r.props);return r.type!==v.Fragment&&(a.ref=s?ka(s,o):o),v.cloneElement(r,a)}return v.Children.count(r)>1?v.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var D5=Symbol("radix.slottable");function L5(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===D5}function $5(t,e){const n={...e};for(const s in e){const r=t[s],i=e[s];/^on[A-Z]/.test(s)?r&&i?n[s]=(...a)=>{const l=i(...a);return r(...a),l}:r&&(n[s]=r):s==="style"?n[s]={...r,...i}:s==="className"&&(n[s]=[r,i].filter(Boolean).join(" "))}return{...t,...n}}function F5(t){var s,r;let e=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function TE(t){const e=t+"CollectionProvider",[n,s]=jd(e),[r,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=x=>{const{scope:y,children:g}=x,m=ge.useRef(null),b=ge.useRef(new Map).current;return c.jsx(r,{scope:y,itemMap:b,collectionRef:m,children:g})};o.displayName=e;const a=t+"CollectionSlot",l=gk(a),u=ge.forwardRef((x,y)=>{const{scope:g,children:m}=x,b=i(a,g),k=as(y,b.collectionRef);return c.jsx(l,{ref:k,children:m})});u.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=gk(d),p=ge.forwardRef((x,y)=>{const{scope:g,children:m,...b}=x,k=ge.useRef(null),_=as(y,k),C=i(d,g);return ge.useEffect(()=>(C.itemMap.set(k,{ref:k,...b}),()=>void C.itemMap.delete(k))),c.jsx(f,{[h]:"",ref:_,children:m})});p.displayName=d;function w(x){const y=i(t+"CollectionConsumer",x);return ge.useCallback(()=>{const m=y.collectionRef.current;if(!m)return[];const b=Array.from(m.querySelectorAll(`[${h}]`));return Array.from(y.itemMap.values()).sort((C,S)=>b.indexOf(C.ref.current)-b.indexOf(S.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:u,ItemSlot:p},w,s]}var z5=v.createContext(void 0);function PE(t){const e=v.useContext(z5);return t||e||"ltr"}function ai(t){const e=v.useRef(t);return v.useEffect(()=>{e.current=t}),v.useMemo(()=>(...n)=>{var s;return(s=e.current)==null?void 0:s.call(e,...n)},[])}function B5(t,e=globalThis==null?void 0:globalThis.document){const n=ai(t);v.useEffect(()=>{const s=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[n,e])}var U5="DismissableLayer",py="dismissableLayer.update",H5="dismissableLayer.pointerDownOutside",W5="dismissableLayer.focusOutside",xk,RE=v.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),AE=v.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,u=v.useContext(RE),[d,h]=v.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=v.useState({}),w=as(e,S=>h(S)),x=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),g=x.indexOf(y),m=d?x.indexOf(d):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,k=m>=g,_=K5(S=>{const j=S.target,N=[...u.branches].some(T=>T.contains(j));!k||N||(r==null||r(S),o==null||o(S),S.defaultPrevented||a==null||a())},f),C=G5(S=>{const j=S.target;[...u.branches].some(T=>T.contains(j))||(i==null||i(S),o==null||o(S),S.defaultPrevented||a==null||a())},f);return B5(S=>{m===u.layers.size-1&&(s==null||s(S),!S.defaultPrevented&&a&&(S.preventDefault(),a()))},f),v.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(xk=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),yk(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=xk)}},[d,f,n,u]),v.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),yk())},[d,u]),v.useEffect(()=>{const S=()=>p({});return document.addEventListener(py,S),()=>document.removeEventListener(py,S)},[]),c.jsx(Un.div,{...l,ref:w,style:{pointerEvents:b?k?"auto":"none":void 0,...t.style},onFocusCapture:nt(t.onFocusCapture,C.onFocusCapture),onBlurCapture:nt(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:nt(t.onPointerDownCapture,_.onPointerDownCapture)})});AE.displayName=U5;var V5="DismissableLayerBranch",q5=v.forwardRef((t,e)=>{const n=v.useContext(RE),s=v.useRef(null),r=as(e,s);return v.useEffect(()=>{const i=s.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),c.jsx(Un.div,{...t,ref:r})});q5.displayName=V5;function K5(t,e=globalThis==null?void 0:globalThis.document){const n=ai(t),s=v.useRef(!1),r=v.useRef(()=>{});return v.useEffect(()=>{const i=a=>{if(a.target&&!s.current){let l=function(){OE(H5,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=l,e.addEventListener("click",r.current,{once:!0})):l()}else e.removeEventListener("click",r.current);s.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>s.current=!0}}function G5(t,e=globalThis==null?void 0:globalThis.document){const n=ai(t),s=v.useRef(!1);return v.useEffect(()=>{const r=i=>{i.target&&!s.current&&OE(W5,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function yk(){const t=new CustomEvent(py);document.dispatchEvent(t)}function OE(t,e,n,{discrete:s}){const r=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),s?NE(r,i):r.dispatchEvent(i)}var ig=0;function Y5(){v.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??vk()),document.body.insertAdjacentElement("beforeend",t[1]??vk()),ig++,()=>{ig===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),ig--}},[])}function vk(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var og="focusScope.autoFocusOnMount",ag="focusScope.autoFocusOnUnmount",bk={bubbles:!1,cancelable:!0},Q5="FocusScope",ME=v.forwardRef((t,e)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:r,onUnmountAutoFocus:i,...o}=t,[a,l]=v.useState(null),u=ai(r),d=ai(i),h=v.useRef(null),f=as(e,x=>l(x)),p=v.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;v.useEffect(()=>{if(s){let x=function(b){if(p.paused||!a)return;const k=b.target;a.contains(k)?h.current=k:vi(h.current,{select:!0})},y=function(b){if(p.paused||!a)return;const k=b.relatedTarget;k!==null&&(a.contains(k)||vi(h.current,{select:!0}))},g=function(b){if(document.activeElement===document.body)for(const _ of b)_.removedNodes.length>0&&vi(a)};document.addEventListener("focusin",x),document.addEventListener("focusout",y);const m=new MutationObserver(g);return a&&m.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",y),m.disconnect()}}},[s,a,p.paused]),v.useEffect(()=>{if(a){kk.add(p);const x=document.activeElement;if(!a.contains(x)){const g=new CustomEvent(og,bk);a.addEventListener(og,u),a.dispatchEvent(g),g.defaultPrevented||(X5(n$(IE(a)),{select:!0}),document.activeElement===x&&vi(a))}return()=>{a.removeEventListener(og,u),setTimeout(()=>{const g=new CustomEvent(ag,bk);a.addEventListener(ag,d),a.dispatchEvent(g),g.defaultPrevented||vi(x??document.body,{select:!0}),a.removeEventListener(ag,d),kk.remove(p)},0)}}},[a,u,d,p]);const w=v.useCallback(x=>{if(!n&&!s||p.paused)return;const y=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,g=document.activeElement;if(y&&g){const m=x.currentTarget,[b,k]=J5(m);b&&k?!x.shiftKey&&g===k?(x.preventDefault(),n&&vi(b,{select:!0})):x.shiftKey&&g===b&&(x.preventDefault(),n&&vi(k,{select:!0})):g===m&&x.preventDefault()}},[n,s,p.paused]);return c.jsx(Un.div,{tabIndex:-1,...o,ref:f,onKeyDown:w})});ME.displayName=Q5;function X5(t,{select:e=!1}={}){const n=document.activeElement;for(const s of t)if(vi(s,{select:e}),document.activeElement!==n)return}function J5(t){const e=IE(t),n=wk(e,t),s=wk(e.reverse(),t);return[n,s]}function IE(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function wk(t,e){for(const n of t)if(!Z5(n,{upTo:e}))return n}function Z5(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function e$(t){return t instanceof HTMLInputElement&&"select"in t}function vi(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&e$(t)&&e&&t.select()}}var kk=t$();function t$(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=_k(t,e),t.unshift(e)},remove(e){var n;t=_k(t,e),(n=t[0])==null||n.resume()}}}function _k(t,e){const n=[...t],s=n.indexOf(e);return s!==-1&&n.splice(s,1),n}function n$(t){return t.filter(e=>e.tagName!=="A")}var s$=_p[" useId ".trim().toString()]||(()=>{}),r$=0;function my(t){const[e,n]=v.useState(s$());return oo(()=>{n(s=>s??String(r$++))},[t]),e?`radix-${e}`:""}const i$=["top","right","bottom","left"],ao=Math.min,ms=Math.max,np=Math.round,kh=Math.floor,Rr=t=>({x:t,y:t}),o$={left:"right",right:"left",bottom:"top",top:"bottom"},a$={start:"end",end:"start"};function gy(t,e,n){return ms(t,ao(e,n))}function li(t,e){return typeof t=="function"?t(e):t}function ci(t){return t.split("-")[0]}function ac(t){return t.split("-")[1]}function s0(t){return t==="x"?"y":"x"}function r0(t){return t==="y"?"height":"width"}const l$=new Set(["top","bottom"]);function Er(t){return l$.has(ci(t))?"y":"x"}function i0(t){return s0(Er(t))}function c$(t,e,n){n===void 0&&(n=!1);const s=ac(t),r=i0(t),i=r0(r);let o=r==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=sp(o)),[o,sp(o)]}function u$(t){const e=sp(t);return[xy(t),e,xy(e)]}function xy(t){return t.replace(/start|end/g,e=>a$[e])}const Sk=["left","right"],jk=["right","left"],d$=["top","bottom"],h$=["bottom","top"];function f$(t,e,n){switch(t){case"top":case"bottom":return n?e?jk:Sk:e?Sk:jk;case"left":case"right":return e?d$:h$;default:return[]}}function p$(t,e,n,s){const r=ac(t);let i=f$(ci(t),n==="start",s);return r&&(i=i.map(o=>o+"-"+r),e&&(i=i.concat(i.map(xy)))),i}function sp(t){return t.replace(/left|right|bottom|top/g,e=>o$[e])}function m$(t){return{top:0,right:0,bottom:0,left:0,...t}}function DE(t){return typeof t!="number"?m$(t):{top:t,right:t,bottom:t,left:t}}function rp(t){const{x:e,y:n,width:s,height:r}=t;return{width:s,height:r,top:n,left:e,right:e+s,bottom:n+r,x:e,y:n}}function Ck(t,e,n){let{reference:s,floating:r}=t;const i=Er(e),o=i0(e),a=r0(o),l=ci(e),u=i==="y",d=s.x+s.width/2-r.width/2,h=s.y+s.height/2-r.height/2,f=s[a]/2-r[a]/2;let p;switch(l){case"top":p={x:d,y:s.y-r.height};break;case"bottom":p={x:d,y:s.y+s.height};break;case"right":p={x:s.x+s.width,y:h};break;case"left":p={x:s.x-r.width,y:h};break;default:p={x:s.x,y:s.y}}switch(ac(e)){case"start":p[o]-=f*(n&&u?-1:1);break;case"end":p[o]+=f*(n&&u?-1:1);break}return p}const g$=async(t,e,n)=>{const{placement:s="bottom",strategy:r="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:d,y:h}=Ck(u,s,l),f=s,p={},w=0;for(let x=0;x<a.length;x++){const{name:y,fn:g}=a[x],{x:m,y:b,data:k,reset:_}=await g({x:d,y:h,initialPlacement:s,placement:f,strategy:r,middlewareData:p,rects:u,platform:o,elements:{reference:t,floating:e}});d=m??d,h=b??h,p={...p,[y]:{...p[y],...k}},_&&w<=50&&(w++,typeof _=="object"&&(_.placement&&(f=_.placement),_.rects&&(u=_.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:r}):_.rects),{x:d,y:h}=Ck(u,f,l)),x=-1)}return{x:d,y:h,placement:f,strategy:r,middlewareData:p}};async function Bu(t,e){var n;e===void 0&&(e={});const{x:s,y:r,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=li(e,t),w=DE(p),y=a[f?h==="floating"?"reference":"floating":h],g=rp(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(y)))==null||n?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:l})),m=h==="floating"?{x:s,y:r,width:o.floating.width,height:o.floating.height}:o.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),k=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},_=rp(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:m,offsetParent:b,strategy:l}):m);return{top:(g.top-_.top+w.top)/k.y,bottom:(_.bottom-g.bottom+w.bottom)/k.y,left:(g.left-_.left+w.left)/k.x,right:(_.right-g.right+w.right)/k.x}}const x$=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:s,placement:r,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:u,padding:d=0}=li(t,e)||{};if(u==null)return{};const h=DE(d),f={x:n,y:s},p=i0(r),w=r0(p),x=await o.getDimensions(u),y=p==="y",g=y?"top":"left",m=y?"bottom":"right",b=y?"clientHeight":"clientWidth",k=i.reference[w]+i.reference[p]-f[p]-i.floating[w],_=f[p]-i.reference[p],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let S=C?C[b]:0;(!S||!await(o.isElement==null?void 0:o.isElement(C)))&&(S=a.floating[b]||i.floating[w]);const j=k/2-_/2,N=S/2-x[w]/2-1,T=ao(h[g],N),L=ao(h[m],N),D=T,O=S-x[w]-L,$=S/2-x[w]/2+j,I=gy(D,$,O),A=!l.arrow&&ac(r)!=null&&$!==I&&i.reference[w]/2-($<D?T:L)-x[w]/2<0,W=A?$<D?$-D:$-O:0;return{[p]:f[p]+W,data:{[p]:I,centerOffset:$-I-W,...A&&{alignmentOffset:W}},reset:A}}}),y$=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,s;const{placement:r,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:x=!0,...y}=li(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const g=ci(r),m=Er(a),b=ci(a)===a,k=await(l.isRTL==null?void 0:l.isRTL(u.floating)),_=f||(b||!x?[sp(a)]:u$(a)),C=w!=="none";!f&&C&&_.push(...p$(a,x,w,k));const S=[a,..._],j=await Bu(e,y),N=[];let T=((s=i.flip)==null?void 0:s.overflows)||[];if(d&&N.push(j[g]),h){const $=c$(r,o,k);N.push(j[$[0]],j[$[1]])}if(T=[...T,{placement:r,overflows:N}],!N.every($=>$<=0)){var L,D;const $=(((L=i.flip)==null?void 0:L.index)||0)+1,I=S[$];if(I&&(!(h==="alignment"?m!==Er(I):!1)||T.every(E=>Er(E.placement)===m?E.overflows[0]>0:!0)))return{data:{index:$,overflows:T},reset:{placement:I}};let A=(D=T.filter(W=>W.overflows[0]<=0).sort((W,E)=>W.overflows[1]-E.overflows[1])[0])==null?void 0:D.placement;if(!A)switch(p){case"bestFit":{var O;const W=(O=T.filter(E=>{if(C){const P=Er(E.placement);return P===m||P==="y"}return!0}).map(E=>[E.placement,E.overflows.filter(P=>P>0).reduce((P,F)=>P+F,0)]).sort((E,P)=>E[1]-P[1])[0])==null?void 0:O[0];W&&(A=W);break}case"initialPlacement":A=a;break}if(r!==A)return{reset:{placement:A}}}return{}}}};function Ek(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Nk(t){return i$.some(e=>t[e]>=0)}const v$=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:s="referenceHidden",...r}=li(t,e);switch(s){case"referenceHidden":{const i=await Bu(e,{...r,elementContext:"reference"}),o=Ek(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Nk(o)}}}case"escaped":{const i=await Bu(e,{...r,altBoundary:!0}),o=Ek(i,n.floating);return{data:{escapedOffsets:o,escaped:Nk(o)}}}default:return{}}}}},LE=new Set(["left","top"]);async function b$(t,e){const{placement:n,platform:s,elements:r}=t,i=await(s.isRTL==null?void 0:s.isRTL(r.floating)),o=ci(n),a=ac(n),l=Er(n)==="y",u=LE.has(o)?-1:1,d=i&&l?-1:1,h=li(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:w}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof w=="number"&&(p=a==="end"?w*-1:w),l?{x:p*d,y:f*u}:{x:f*u,y:p*d}}const w$=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,s;const{x:r,y:i,placement:o,middlewareData:a}=e,l=await b$(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(s=a.arrow)!=null&&s.alignmentOffset?{}:{x:r+l.x,y:i+l.y,data:{...l,placement:o}}}}},k$=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:s,placement:r}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:g,y:m}=y;return{x:g,y:m}}},...l}=li(t,e),u={x:n,y:s},d=await Bu(e,l),h=Er(ci(r)),f=s0(h);let p=u[f],w=u[h];if(i){const y=f==="y"?"top":"left",g=f==="y"?"bottom":"right",m=p+d[y],b=p-d[g];p=gy(m,p,b)}if(o){const y=h==="y"?"top":"left",g=h==="y"?"bottom":"right",m=w+d[y],b=w-d[g];w=gy(m,w,b)}const x=a.fn({...e,[f]:p,[h]:w});return{...x,data:{x:x.x-n,y:x.y-s,enabled:{[f]:i,[h]:o}}}}}},_$=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:s,placement:r,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=li(t,e),d={x:n,y:s},h=Er(r),f=s0(h);let p=d[f],w=d[h];const x=li(a,e),y=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(l){const b=f==="y"?"height":"width",k=i.reference[f]-i.floating[b]+y.mainAxis,_=i.reference[f]+i.reference[b]-y.mainAxis;p<k?p=k:p>_&&(p=_)}if(u){var g,m;const b=f==="y"?"width":"height",k=LE.has(ci(r)),_=i.reference[h]-i.floating[b]+(k&&((g=o.offset)==null?void 0:g[h])||0)+(k?0:y.crossAxis),C=i.reference[h]+i.reference[b]+(k?0:((m=o.offset)==null?void 0:m[h])||0)-(k?y.crossAxis:0);w<_?w=_:w>C&&(w=C)}return{[f]:p,[h]:w}}}},S$=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,s;const{placement:r,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...u}=li(t,e),d=await Bu(e,u),h=ci(r),f=ac(r),p=Er(r)==="y",{width:w,height:x}=i.floating;let y,g;h==="top"||h==="bottom"?(y=h,g=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(g=h,y=f==="end"?"top":"bottom");const m=x-d.top-d.bottom,b=w-d.left-d.right,k=ao(x-d[y],m),_=ao(w-d[g],b),C=!e.middlewareData.shift;let S=k,j=_;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(j=b),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(S=m),C&&!f){const T=ms(d.left,0),L=ms(d.right,0),D=ms(d.top,0),O=ms(d.bottom,0);p?j=w-2*(T!==0||L!==0?T+L:ms(d.left,d.right)):S=x-2*(D!==0||O!==0?D+O:ms(d.top,d.bottom))}await l({...e,availableWidth:j,availableHeight:S});const N=await o.getDimensions(a.floating);return w!==N.width||x!==N.height?{reset:{rects:!0}}:{}}}};function Hp(){return typeof window<"u"}function lc(t){return $E(t)?(t.nodeName||"").toLowerCase():"#document"}function ws(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Mr(t){var e;return(e=($E(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function $E(t){return Hp()?t instanceof Node||t instanceof ws(t).Node:!1}function ir(t){return Hp()?t instanceof Element||t instanceof ws(t).Element:!1}function Ar(t){return Hp()?t instanceof HTMLElement||t instanceof ws(t).HTMLElement:!1}function Tk(t){return!Hp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ws(t).ShadowRoot}const j$=new Set(["inline","contents"]);function Cd(t){const{overflow:e,overflowX:n,overflowY:s,display:r}=or(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+n)&&!j$.has(r)}const C$=new Set(["table","td","th"]);function E$(t){return C$.has(lc(t))}const N$=[":popover-open",":modal"];function Wp(t){return N$.some(e=>{try{return t.matches(e)}catch{return!1}})}const T$=["transform","translate","scale","rotate","perspective"],P$=["transform","translate","scale","rotate","perspective","filter"],R$=["paint","layout","strict","content"];function o0(t){const e=a0(),n=ir(t)?or(t):t;return T$.some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||P$.some(s=>(n.willChange||"").includes(s))||R$.some(s=>(n.contain||"").includes(s))}function A$(t){let e=lo(t);for(;Ar(e)&&!Xl(e);){if(o0(e))return e;if(Wp(e))return null;e=lo(e)}return null}function a0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const O$=new Set(["html","body","#document"]);function Xl(t){return O$.has(lc(t))}function or(t){return ws(t).getComputedStyle(t)}function Vp(t){return ir(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function lo(t){if(lc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Tk(t)&&t.host||Mr(t);return Tk(e)?e.host:e}function FE(t){const e=lo(t);return Xl(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ar(e)&&Cd(e)?e:FE(e)}function Uu(t,e,n){var s;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=FE(t),i=r===((s=t.ownerDocument)==null?void 0:s.body),o=ws(r);if(i){const a=yy(o);return e.concat(o,o.visualViewport||[],Cd(r)?r:[],a&&n?Uu(a):[])}return e.concat(r,Uu(r,[],n))}function yy(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function zE(t){const e=or(t);let n=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const r=Ar(t),i=r?t.offsetWidth:n,o=r?t.offsetHeight:s,a=np(n)!==i||np(s)!==o;return a&&(n=i,s=o),{width:n,height:s,$:a}}function l0(t){return ir(t)?t:t.contextElement}function kl(t){const e=l0(t);if(!Ar(e))return Rr(1);const n=e.getBoundingClientRect(),{width:s,height:r,$:i}=zE(e);let o=(i?np(n.width):n.width)/s,a=(i?np(n.height):n.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const M$=Rr(0);function BE(t){const e=ws(t);return!a0()||!e.visualViewport?M$:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function I$(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ws(t)?!1:e}function ma(t,e,n,s){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=l0(t);let o=Rr(1);e&&(s?ir(s)&&(o=kl(s)):o=kl(t));const a=I$(i,n,s)?BE(i):Rr(0);let l=(r.left+a.x)/o.x,u=(r.top+a.y)/o.y,d=r.width/o.x,h=r.height/o.y;if(i){const f=ws(i),p=s&&ir(s)?ws(s):s;let w=f,x=yy(w);for(;x&&s&&p!==w;){const y=kl(x),g=x.getBoundingClientRect(),m=or(x),b=g.left+(x.clientLeft+parseFloat(m.paddingLeft))*y.x,k=g.top+(x.clientTop+parseFloat(m.paddingTop))*y.y;l*=y.x,u*=y.y,d*=y.x,h*=y.y,l+=b,u+=k,w=ws(x),x=yy(w)}}return rp({width:d,height:h,x:l,y:u})}function qp(t,e){const n=Vp(t).scrollLeft;return e?e.left+n:ma(Mr(t)).left+n}function UE(t,e){const n=t.getBoundingClientRect(),s=n.left+e.scrollLeft-qp(t,n),r=n.top+e.scrollTop;return{x:s,y:r}}function D$(t){let{elements:e,rect:n,offsetParent:s,strategy:r}=t;const i=r==="fixed",o=Mr(s),a=e?Wp(e.floating):!1;if(s===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},u=Rr(1);const d=Rr(0),h=Ar(s);if((h||!h&&!i)&&((lc(s)!=="body"||Cd(o))&&(l=Vp(s)),Ar(s))){const p=ma(s);u=kl(s),d.x=p.x+s.clientLeft,d.y=p.y+s.clientTop}const f=o&&!h&&!i?UE(o,l):Rr(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+d.x+f.x,y:n.y*u.y-l.scrollTop*u.y+d.y+f.y}}function L$(t){return Array.from(t.getClientRects())}function $$(t){const e=Mr(t),n=Vp(t),s=t.ownerDocument.body,r=ms(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),i=ms(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let o=-n.scrollLeft+qp(t);const a=-n.scrollTop;return or(s).direction==="rtl"&&(o+=ms(e.clientWidth,s.clientWidth)-r),{width:r,height:i,x:o,y:a}}const Pk=25;function F$(t,e){const n=ws(t),s=Mr(t),r=n.visualViewport;let i=s.clientWidth,o=s.clientHeight,a=0,l=0;if(r){i=r.width,o=r.height;const d=a0();(!d||d&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}const u=qp(s);if(u<=0){const d=s.ownerDocument,h=d.body,f=getComputedStyle(h),p=d.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,w=Math.abs(s.clientWidth-h.clientWidth-p);w<=Pk&&(i-=w)}else u<=Pk&&(i+=u);return{width:i,height:o,x:a,y:l}}const z$=new Set(["absolute","fixed"]);function B$(t,e){const n=ma(t,!0,e==="fixed"),s=n.top+t.clientTop,r=n.left+t.clientLeft,i=Ar(t)?kl(t):Rr(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=r*i.x,u=s*i.y;return{width:o,height:a,x:l,y:u}}function Rk(t,e,n){let s;if(e==="viewport")s=F$(t,n);else if(e==="document")s=$$(Mr(t));else if(ir(e))s=B$(e,n);else{const r=BE(t);s={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return rp(s)}function HE(t,e){const n=lo(t);return n===e||!ir(n)||Xl(n)?!1:or(n).position==="fixed"||HE(n,e)}function U$(t,e){const n=e.get(t);if(n)return n;let s=Uu(t,[],!1).filter(a=>ir(a)&&lc(a)!=="body"),r=null;const i=or(t).position==="fixed";let o=i?lo(t):t;for(;ir(o)&&!Xl(o);){const a=or(o),l=o0(o);!l&&a.position==="fixed"&&(r=null),(i?!l&&!r:!l&&a.position==="static"&&!!r&&z$.has(r.position)||Cd(o)&&!l&&HE(t,o))?s=s.filter(d=>d!==o):r=a,o=lo(o)}return e.set(t,s),s}function H$(t){let{element:e,boundary:n,rootBoundary:s,strategy:r}=t;const o=[...n==="clippingAncestors"?Wp(e)?[]:U$(e,this._c):[].concat(n),s],a=o[0],l=o.reduce((u,d)=>{const h=Rk(e,d,r);return u.top=ms(h.top,u.top),u.right=ao(h.right,u.right),u.bottom=ao(h.bottom,u.bottom),u.left=ms(h.left,u.left),u},Rk(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function W$(t){const{width:e,height:n}=zE(t);return{width:e,height:n}}function V$(t,e,n){const s=Ar(e),r=Mr(e),i=n==="fixed",o=ma(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Rr(0);function u(){l.x=qp(r)}if(s||!s&&!i)if((lc(e)!=="body"||Cd(r))&&(a=Vp(e)),s){const p=ma(e,!0,i,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else r&&u();i&&!s&&r&&u();const d=r&&!s&&!i?UE(r,a):Rr(0),h=o.left+a.scrollLeft-l.x-d.x,f=o.top+a.scrollTop-l.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function lg(t){return or(t).position==="static"}function Ak(t,e){if(!Ar(t)||or(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Mr(t)===n&&(n=n.ownerDocument.body),n}function WE(t,e){const n=ws(t);if(Wp(t))return n;if(!Ar(t)){let r=lo(t);for(;r&&!Xl(r);){if(ir(r)&&!lg(r))return r;r=lo(r)}return n}let s=Ak(t,e);for(;s&&E$(s)&&lg(s);)s=Ak(s,e);return s&&Xl(s)&&lg(s)&&!o0(s)?n:s||A$(t)||n}const q$=async function(t){const e=this.getOffsetParent||WE,n=this.getDimensions,s=await n(t.floating);return{reference:V$(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function K$(t){return or(t).direction==="rtl"}const G$={convertOffsetParentRelativeRectToViewportRelativeRect:D$,getDocumentElement:Mr,getClippingRect:H$,getOffsetParent:WE,getElementRects:q$,getClientRects:L$,getDimensions:W$,getScale:kl,isElement:ir,isRTL:K$};function VE(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Y$(t,e){let n=null,s;const r=Mr(t);function i(){var a;clearTimeout(s),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const u=t.getBoundingClientRect(),{left:d,top:h,width:f,height:p}=u;if(a||e(),!f||!p)return;const w=kh(h),x=kh(r.clientWidth-(d+f)),y=kh(r.clientHeight-(h+p)),g=kh(d),b={rootMargin:-w+"px "+-x+"px "+-y+"px "+-g+"px",threshold:ms(0,ao(1,l))||1};let k=!0;function _(C){const S=C[0].intersectionRatio;if(S!==l){if(!k)return o();S?o(!1,S):s=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!VE(u,t.getBoundingClientRect())&&o(),k=!1}try{n=new IntersectionObserver(_,{...b,root:r.ownerDocument})}catch{n=new IntersectionObserver(_,b)}n.observe(t)}return o(!0),i}function Q$(t,e,n,s){s===void 0&&(s={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=s,u=l0(t),d=r||i?[...u?Uu(u):[],...Uu(e)]:[];d.forEach(g=>{r&&g.addEventListener("scroll",n,{passive:!0}),i&&g.addEventListener("resize",n)});const h=u&&a?Y$(u,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(g=>{let[m]=g;m&&m.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(e)})),n()}),u&&!l&&p.observe(u),p.observe(e));let w,x=l?ma(t):null;l&&y();function y(){const g=ma(t);x&&!VE(x,g)&&n(),x=g,w=requestAnimationFrame(y)}return n(),()=>{var g;d.forEach(m=>{r&&m.removeEventListener("scroll",n),i&&m.removeEventListener("resize",n)}),h==null||h(),(g=p)==null||g.disconnect(),p=null,l&&cancelAnimationFrame(w)}}const X$=w$,J$=k$,Z$=y$,eF=S$,tF=v$,Ok=x$,nF=_$,sF=(t,e,n)=>{const s=new Map,r={platform:G$,...n},i={...r.platform,_c:s};return g$(t,e,{...r,platform:i})};var rF=typeof document<"u",iF=function(){},mf=rF?v.useLayoutEffect:iF;function ip(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,s,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(!ip(t[s],e[s]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(e,r[s]))return!1;for(s=n;s--!==0;){const i=r[s];if(!(i==="_owner"&&t.$$typeof)&&!ip(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function qE(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Mk(t,e){const n=qE(t);return Math.round(e*n)/n}function cg(t){const e=v.useRef(t);return mf(()=>{e.current=t}),e}function oF(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:s=[],platform:r,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=t,[d,h]=v.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=v.useState(s);ip(f,s)||p(s);const[w,x]=v.useState(null),[y,g]=v.useState(null),m=v.useCallback(E=>{E!==C.current&&(C.current=E,x(E))},[]),b=v.useCallback(E=>{E!==S.current&&(S.current=E,g(E))},[]),k=i||w,_=o||y,C=v.useRef(null),S=v.useRef(null),j=v.useRef(d),N=l!=null,T=cg(l),L=cg(r),D=cg(u),O=v.useCallback(()=>{if(!C.current||!S.current)return;const E={placement:e,strategy:n,middleware:f};L.current&&(E.platform=L.current),sF(C.current,S.current,E).then(P=>{const F={...P,isPositioned:D.current!==!1};$.current&&!ip(j.current,F)&&(j.current=F,yd.flushSync(()=>{h(F)}))})},[f,e,n,L,D]);mf(()=>{u===!1&&j.current.isPositioned&&(j.current.isPositioned=!1,h(E=>({...E,isPositioned:!1})))},[u]);const $=v.useRef(!1);mf(()=>($.current=!0,()=>{$.current=!1}),[]),mf(()=>{if(k&&(C.current=k),_&&(S.current=_),k&&_){if(T.current)return T.current(k,_,O);O()}},[k,_,O,T,N]);const I=v.useMemo(()=>({reference:C,floating:S,setReference:m,setFloating:b}),[m,b]),A=v.useMemo(()=>({reference:k,floating:_}),[k,_]),W=v.useMemo(()=>{const E={position:n,left:0,top:0};if(!A.floating)return E;const P=Mk(A.floating,d.x),F=Mk(A.floating,d.y);return a?{...E,transform:"translate("+P+"px, "+F+"px)",...qE(A.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:P,top:F}},[n,a,A.floating,d.x,d.y]);return v.useMemo(()=>({...d,update:O,refs:I,elements:A,floatingStyles:W}),[d,O,I,A,W])}const aF=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:s,padding:r}=typeof t=="function"?t(n):t;return s&&e(s)?s.current!=null?Ok({element:s.current,padding:r}).fn(n):{}:s?Ok({element:s,padding:r}).fn(n):{}}}},lF=(t,e)=>({...X$(t),options:[t,e]}),cF=(t,e)=>({...J$(t),options:[t,e]}),uF=(t,e)=>({...nF(t),options:[t,e]}),dF=(t,e)=>({...Z$(t),options:[t,e]}),hF=(t,e)=>({...eF(t),options:[t,e]}),fF=(t,e)=>({...tF(t),options:[t,e]}),pF=(t,e)=>({...aF(t),options:[t,e]});var mF="Arrow",KE=v.forwardRef((t,e)=>{const{children:n,width:s=10,height:r=5,...i}=t;return c.jsx(Un.svg,{...i,ref:e,width:s,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:c.jsx("polygon",{points:"0,0 30,0 15,10"})})});KE.displayName=mF;var gF=KE;function xF(t){const[e,n]=v.useState(void 0);return oo(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const s=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const i=r[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return s.observe(t,{box:"border-box"}),()=>s.unobserve(t)}else n(void 0)},[t]),e}var c0="Popper",[GE,YE]=jd(c0),[yF,QE]=GE(c0),XE=t=>{const{__scopePopper:e,children:n}=t,[s,r]=v.useState(null);return c.jsx(yF,{scope:e,anchor:s,onAnchorChange:r,children:n})};XE.displayName=c0;var JE="PopperAnchor",ZE=v.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:s,...r}=t,i=QE(JE,n),o=v.useRef(null),a=as(e,o),l=v.useRef(null);return v.useEffect(()=>{const u=l.current;l.current=(s==null?void 0:s.current)||o.current,u!==l.current&&i.onAnchorChange(l.current)}),s?null:c.jsx(Un.div,{...r,ref:a})});ZE.displayName=JE;var u0="PopperContent",[vF,bF]=GE(u0),eN=v.forwardRef((t,e)=>{var de,Z,be,Ae,me,fe;const{__scopePopper:n,side:s="bottom",sideOffset:r=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:w,...x}=t,y=QE(u0,n),[g,m]=v.useState(null),b=as(e,De=>m(De)),[k,_]=v.useState(null),C=xF(k),S=(C==null?void 0:C.width)??0,j=(C==null?void 0:C.height)??0,N=s+(i!=="center"?"-"+i:""),T=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},L=Array.isArray(u)?u:[u],D=L.length>0,O={padding:T,boundary:L.filter(kF),altBoundary:D},{refs:$,floatingStyles:I,placement:A,isPositioned:W,middlewareData:E}=oF({strategy:"fixed",placement:N,whileElementsMounted:(...De)=>Q$(...De,{animationFrame:p==="always"}),elements:{reference:y.anchor},middleware:[lF({mainAxis:r+j,alignmentAxis:o}),l&&cF({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?uF():void 0,...O}),l&&dF({...O}),hF({...O,apply:({elements:De,rects:J,availableWidth:pe,availableHeight:ie})=>{const{width:K,height:G}=J.reference,le=De.floating.style;le.setProperty("--radix-popper-available-width",`${pe}px`),le.setProperty("--radix-popper-available-height",`${ie}px`),le.setProperty("--radix-popper-anchor-width",`${K}px`),le.setProperty("--radix-popper-anchor-height",`${G}px`)}}),k&&pF({element:k,padding:a}),_F({arrowWidth:S,arrowHeight:j}),f&&fF({strategy:"referenceHidden",...O})]}),[P,F]=sN(A),V=ai(w);oo(()=>{W&&(V==null||V())},[W,V]);const H=(de=E.arrow)==null?void 0:de.x,he=(Z=E.arrow)==null?void 0:Z.y,ee=((be=E.arrow)==null?void 0:be.centerOffset)!==0,[U,Q]=v.useState();return oo(()=>{g&&Q(window.getComputedStyle(g).zIndex)},[g]),c.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...I,transform:W?I.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:U,"--radix-popper-transform-origin":[(Ae=E.transformOrigin)==null?void 0:Ae.x,(me=E.transformOrigin)==null?void 0:me.y].join(" "),...((fe=E.hide)==null?void 0:fe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:c.jsx(vF,{scope:n,placedSide:P,onArrowChange:_,arrowX:H,arrowY:he,shouldHideArrow:ee,children:c.jsx(Un.div,{"data-side":P,"data-align":F,...x,ref:b,style:{...x.style,animation:W?void 0:"none"}})})})});eN.displayName=u0;var tN="PopperArrow",wF={top:"bottom",right:"left",bottom:"top",left:"right"},nN=v.forwardRef(function(e,n){const{__scopePopper:s,...r}=e,i=bF(tN,s),o=wF[i.placedSide];return c.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:c.jsx(gF,{...r,ref:n,style:{...r.style,display:"block"}})})});nN.displayName=tN;function kF(t){return t!==null}var _F=t=>({name:"transformOrigin",options:t,fn(e){var y,g,m;const{placement:n,rects:s,middlewareData:r}=e,o=((y=r.arrow)==null?void 0:y.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[u,d]=sN(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((g=r.arrow)==null?void 0:g.x)??0)+a/2,p=(((m=r.arrow)==null?void 0:m.y)??0)+l/2;let w="",x="";return u==="bottom"?(w=o?h:`${f}px`,x=`${-l}px`):u==="top"?(w=o?h:`${f}px`,x=`${s.floating.height+l}px`):u==="right"?(w=`${-l}px`,x=o?h:`${p}px`):u==="left"&&(w=`${s.floating.width+l}px`,x=o?h:`${p}px`),{data:{x:w,y:x}}}});function sN(t){const[e,n="center"]=t.split("-");return[e,n]}var SF=XE,jF=ZE,CF=eN,EF=nN,NF="Portal",rN=v.forwardRef((t,e)=>{var a;const{container:n,...s}=t,[r,i]=v.useState(!1);oo(()=>i(!0),[]);const o=n||r&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?dC.createPortal(c.jsx(Un.div,{...s,ref:e}),o):null});rN.displayName=NF;function TF(t,e){return v.useReducer((n,s)=>e[n][s]??n,t)}var Ed=t=>{const{present:e,children:n}=t,s=PF(e),r=typeof n=="function"?n({present:s.isPresent}):v.Children.only(n),i=as(s.ref,RF(r));return typeof n=="function"||s.isPresent?v.cloneElement(r,{ref:i}):null};Ed.displayName="Presence";function PF(t){const[e,n]=v.useState(),s=v.useRef(null),r=v.useRef(t),i=v.useRef("none"),o=t?"mounted":"unmounted",[a,l]=TF(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return v.useEffect(()=>{const u=_h(s.current);i.current=a==="mounted"?u:"none"},[a]),oo(()=>{const u=s.current,d=r.current;if(d!==t){const f=i.current,p=_h(u);t?l("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&f!==p?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,l]),oo(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=p=>{const x=_h(s.current).includes(CSS.escape(p.animationName));if(p.target===e&&x&&(l("ANIMATION_END"),!r.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},f=p=>{p.target===e&&(i.current=_h(s.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:v.useCallback(u=>{s.current=u?getComputedStyle(u):null,n(u)},[])}}function _h(t){return(t==null?void 0:t.animationName)||"none"}function RF(t){var s,r;let e=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var ug="rovingFocusGroup.onEntryFocus",AF={bubbles:!1,cancelable:!0},Nd="RovingFocusGroup",[vy,iN,OF]=TE(Nd),[MF,oN]=jd(Nd,[OF]),[IF,DF]=MF(Nd),aN=v.forwardRef((t,e)=>c.jsx(vy.Provider,{scope:t.__scopeRovingFocusGroup,children:c.jsx(vy.Slot,{scope:t.__scopeRovingFocusGroup,children:c.jsx(LF,{...t,ref:e})})}));aN.displayName=Nd;var LF=v.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:r=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=t,f=v.useRef(null),p=as(e,f),w=PE(i),[x,y]=EE({prop:o,defaultProp:a??null,onChange:l,caller:Nd}),[g,m]=v.useState(!1),b=ai(u),k=iN(n),_=v.useRef(!1),[C,S]=v.useState(0);return v.useEffect(()=>{const j=f.current;if(j)return j.addEventListener(ug,b),()=>j.removeEventListener(ug,b)},[b]),c.jsx(IF,{scope:n,orientation:s,dir:w,loop:r,currentTabStopId:x,onItemFocus:v.useCallback(j=>y(j),[y]),onItemShiftTab:v.useCallback(()=>m(!0),[]),onFocusableItemAdd:v.useCallback(()=>S(j=>j+1),[]),onFocusableItemRemove:v.useCallback(()=>S(j=>j-1),[]),children:c.jsx(Un.div,{tabIndex:g||C===0?-1:0,"data-orientation":s,...h,ref:p,style:{outline:"none",...t.style},onMouseDown:nt(t.onMouseDown,()=>{_.current=!0}),onFocus:nt(t.onFocus,j=>{const N=!_.current;if(j.target===j.currentTarget&&N&&!g){const T=new CustomEvent(ug,AF);if(j.currentTarget.dispatchEvent(T),!T.defaultPrevented){const L=k().filter(A=>A.focusable),D=L.find(A=>A.active),O=L.find(A=>A.id===x),I=[D,O,...L].filter(Boolean).map(A=>A.ref.current);uN(I,d)}}_.current=!1}),onBlur:nt(t.onBlur,()=>m(!1))})})}),lN="RovingFocusGroupItem",cN=v.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:r=!1,tabStopId:i,children:o,...a}=t,l=my(),u=i||l,d=DF(lN,n),h=d.currentTabStopId===u,f=iN(n),{onFocusableItemAdd:p,onFocusableItemRemove:w,currentTabStopId:x}=d;return v.useEffect(()=>{if(s)return p(),()=>w()},[s,p,w]),c.jsx(vy.ItemSlot,{scope:n,id:u,focusable:s,active:r,children:c.jsx(Un.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...a,ref:e,onMouseDown:nt(t.onMouseDown,y=>{s?d.onItemFocus(u):y.preventDefault()}),onFocus:nt(t.onFocus,()=>d.onItemFocus(u)),onKeyDown:nt(t.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){d.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const g=zF(y,d.orientation,d.dir);if(g!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let b=f().filter(k=>k.focusable).map(k=>k.ref.current);if(g==="last")b.reverse();else if(g==="prev"||g==="next"){g==="prev"&&b.reverse();const k=b.indexOf(y.currentTarget);b=d.loop?BF(b,k+1):b.slice(k+1)}setTimeout(()=>uN(b))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:x!=null}):o})})});cN.displayName=lN;var $F={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function FF(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function zF(t,e,n){const s=FF(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return $F[s]}function uN(t,e=!1){const n=document.activeElement;for(const s of t)if(s===n||(s.focus({preventScroll:e}),document.activeElement!==n))return}function BF(t,e){return t.map((n,s)=>t[(e+s)%t.length])}var UF=aN,HF=cN;function WF(t){const e=VF(t),n=v.forwardRef((s,r)=>{const{children:i,...o}=s,a=v.Children.toArray(i),l=a.find(KF);if(l){const u=l.props.children,d=a.map(h=>h===l?v.Children.count(u)>1?v.Children.only(null):v.isValidElement(u)?u.props.children:null:h);return c.jsx(e,{...o,ref:r,children:v.isValidElement(u)?v.cloneElement(u,void 0,d):null})}return c.jsx(e,{...o,ref:r,children:i})});return n.displayName=`${t}.Slot`,n}function VF(t){const e=v.forwardRef((n,s)=>{const{children:r,...i}=n;if(v.isValidElement(r)){const o=YF(r),a=GF(i,r.props);return r.type!==v.Fragment&&(a.ref=s?ka(s,o):o),v.cloneElement(r,a)}return v.Children.count(r)>1?v.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var qF=Symbol("radix.slottable");function KF(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===qF}function GF(t,e){const n={...e};for(const s in e){const r=t[s],i=e[s];/^on[A-Z]/.test(s)?r&&i?n[s]=(...a)=>{const l=i(...a);return r(...a),l}:r&&(n[s]=r):s==="style"?n[s]={...r,...i}:s==="className"&&(n[s]=[r,i].filter(Boolean).join(" "))}return{...t,...n}}function YF(t){var s,r;let e=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var QF=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ua=new WeakMap,Sh=new WeakMap,jh={},dg=0,dN=function(t){return t&&(t.host||dN(t.parentNode))},XF=function(t,e){return e.map(function(n){if(t.contains(n))return n;var s=dN(n);return s&&t.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},JF=function(t,e,n,s){var r=XF(e,Array.isArray(t)?t:[t]);jh[n]||(jh[n]=new WeakMap);var i=jh[n],o=[],a=new Set,l=new Set(r),u=function(h){!h||a.has(h)||(a.add(h),u(h.parentNode))};r.forEach(u);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))d(f);else try{var p=f.getAttribute(s),w=p!==null&&p!=="false",x=(Ua.get(f)||0)+1,y=(i.get(f)||0)+1;Ua.set(f,x),i.set(f,y),o.push(f),x===1&&w&&Sh.set(f,!0),y===1&&f.setAttribute(n,"true"),w||f.setAttribute(s,"true")}catch(g){console.error("aria-hidden: cannot operate on ",f,g)}})};return d(e),a.clear(),dg++,function(){o.forEach(function(h){var f=Ua.get(h)-1,p=i.get(h)-1;Ua.set(h,f),i.set(h,p),f||(Sh.has(h)||h.removeAttribute(s),Sh.delete(h)),p||h.removeAttribute(n)}),dg--,dg||(Ua=new WeakMap,Ua=new WeakMap,Sh=new WeakMap,jh={})}},ZF=function(t,e,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(t)?t:[t]),r=QF(t);return r?(s.push.apply(s,Array.from(r.querySelectorAll("[aria-live], script"))),JF(s,r,n,"aria-hidden")):function(){return null}},gf="right-scroll-bar-position",xf="width-before-scroll-bar",ez="with-scroll-bars-hidden",tz="--removed-body-scroll-bar-size";function hg(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function nz(t,e){var n=v.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(s){var r=n.value;r!==s&&(n.value=s,n.callback(s,r))}}}})[0];return n.callback=e,n.facade}var sz=typeof window<"u"?v.useLayoutEffect:v.useEffect,Ik=new WeakMap;function rz(t,e){var n=nz(null,function(s){return t.forEach(function(r){return hg(r,s)})});return sz(function(){var s=Ik.get(n);if(s){var r=new Set(s),i=new Set(t),o=n.current;r.forEach(function(a){i.has(a)||hg(a,null)}),i.forEach(function(a){r.has(a)||hg(a,o)})}Ik.set(n,t)},[t]),n}function iz(t){return t}function oz(t,e){e===void 0&&(e=iz);var n=[],s=!1,r={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,s);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(s=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){s=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return r}function az(t){t===void 0&&(t={});var e=oz(null);return e.options=Cr({async:!0,ssr:!1},t),e}var hN=function(t){var e=t.sideCar,n=ic(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=e.read();if(!s)throw new Error("Sidecar medium not found");return v.createElement(s,Cr({},n))};hN.isSideCarExport=!0;function lz(t,e){return t.useMedium(e),hN}var fN=az(),fg=function(){},Kp=v.forwardRef(function(t,e){var n=v.useRef(null),s=v.useState({onScrollCapture:fg,onWheelCapture:fg,onTouchMoveCapture:fg}),r=s[0],i=s[1],o=t.forwardProps,a=t.children,l=t.className,u=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,p=t.noRelative,w=t.noIsolation,x=t.inert,y=t.allowPinchZoom,g=t.as,m=g===void 0?"div":g,b=t.gapMode,k=ic(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=f,C=rz([n,e]),S=Cr(Cr({},k),r);return v.createElement(v.Fragment,null,d&&v.createElement(_,{sideCar:fN,removeScrollBar:u,shards:h,noRelative:p,noIsolation:w,inert:x,setCallbacks:i,allowPinchZoom:!!y,lockRef:n,gapMode:b}),o?v.cloneElement(v.Children.only(a),Cr(Cr({},S),{ref:C})):v.createElement(m,Cr({},S,{className:l,ref:C}),a))});Kp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Kp.classNames={fullWidth:xf,zeroRight:gf};var cz=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function uz(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=cz();return e&&t.setAttribute("nonce",e),t}function dz(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function hz(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var fz=function(){var t=0,e=null;return{add:function(n){t==0&&(e=uz())&&(dz(e,n),hz(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},pz=function(){var t=fz();return function(e,n){v.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},pN=function(){var t=pz(),e=function(n){var s=n.styles,r=n.dynamic;return t(s,r),null};return e},mz={left:0,top:0,right:0,gap:0},pg=function(t){return parseInt(t||"",10)||0},gz=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],s=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[pg(n),pg(s),pg(r)]},xz=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return mz;var e=gz(t),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,s-n+e[2]-e[0])}},yz=pN(),_l="data-scroll-locked",vz=function(t,e,n,s){var r=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(ez,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(a,"px ").concat(s,`;
  }
  body[`).concat(_l,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(gf,` {
    right: `).concat(a,"px ").concat(s,`;
  }
  
  .`).concat(xf,` {
    margin-right: `).concat(a,"px ").concat(s,`;
  }
  
  .`).concat(gf," .").concat(gf,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(xf," .").concat(xf,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(_l,`] {
    `).concat(tz,": ").concat(a,`px;
  }
`)},Dk=function(){var t=parseInt(document.body.getAttribute(_l)||"0",10);return isFinite(t)?t:0},bz=function(){v.useEffect(function(){return document.body.setAttribute(_l,(Dk()+1).toString()),function(){var t=Dk()-1;t<=0?document.body.removeAttribute(_l):document.body.setAttribute(_l,t.toString())}},[])},wz=function(t){var e=t.noRelative,n=t.noImportant,s=t.gapMode,r=s===void 0?"margin":s;bz();var i=v.useMemo(function(){return xz(r)},[r]);return v.createElement(yz,{styles:vz(i,!e,r,n?"":"!important")})},by=!1;if(typeof window<"u")try{var Ch=Object.defineProperty({},"passive",{get:function(){return by=!0,!0}});window.addEventListener("test",Ch,Ch),window.removeEventListener("test",Ch,Ch)}catch{by=!1}var Ha=by?{passive:!1}:!1,kz=function(t){return t.tagName==="TEXTAREA"},mN=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!kz(t)&&n[e]==="visible")},_z=function(t){return mN(t,"overflowY")},Sz=function(t){return mN(t,"overflowX")},Lk=function(t,e){var n=e.ownerDocument,s=e;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var r=gN(t,s);if(r){var i=xN(t,s),o=i[1],a=i[2];if(o>a)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},jz=function(t){var e=t.scrollTop,n=t.scrollHeight,s=t.clientHeight;return[e,n,s]},Cz=function(t){var e=t.scrollLeft,n=t.scrollWidth,s=t.clientWidth;return[e,n,s]},gN=function(t,e){return t==="v"?_z(e):Sz(e)},xN=function(t,e){return t==="v"?jz(e):Cz(e)},Ez=function(t,e){return t==="h"&&e==="rtl"?-1:1},Nz=function(t,e,n,s,r){var i=Ez(t,window.getComputedStyle(e).direction),o=i*s,a=n.target,l=e.contains(a),u=!1,d=o>0,h=0,f=0;do{if(!a)break;var p=xN(t,a),w=p[0],x=p[1],y=p[2],g=x-y-i*w;(w||g)&&gN(t,a)&&(h+=g,f+=w);var m=a.parentNode;a=m&&m.nodeType===Node.DOCUMENT_FRAGMENT_NODE?m.host:m}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&Math.abs(h)<1||!d&&Math.abs(f)<1)&&(u=!0),u},Eh=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},$k=function(t){return[t.deltaX,t.deltaY]},Fk=function(t){return t&&"current"in t?t.current:t},Tz=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Pz=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Rz=0,Wa=[];function Az(t){var e=v.useRef([]),n=v.useRef([0,0]),s=v.useRef(),r=v.useState(Rz++)[0],i=v.useState(pN)[0],o=v.useRef(t);v.useEffect(function(){o.current=t},[t]),v.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var x=zI([t.lockRef.current],(t.shards||[]).map(Fk),!0).filter(Boolean);return x.forEach(function(y){return y.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),x.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var a=v.useCallback(function(x,y){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!o.current.allowPinchZoom;var g=Eh(x),m=n.current,b="deltaX"in x?x.deltaX:m[0]-g[0],k="deltaY"in x?x.deltaY:m[1]-g[1],_,C=x.target,S=Math.abs(b)>Math.abs(k)?"h":"v";if("touches"in x&&S==="h"&&C.type==="range")return!1;var j=window.getSelection(),N=j&&j.anchorNode,T=N?N===C||N.contains(C):!1;if(T)return!1;var L=Lk(S,C);if(!L)return!0;if(L?_=S:(_=S==="v"?"h":"v",L=Lk(S,C)),!L)return!1;if(!s.current&&"changedTouches"in x&&(b||k)&&(s.current=_),!_)return!0;var D=s.current||_;return Nz(D,y,x,D==="h"?b:k)},[]),l=v.useCallback(function(x){var y=x;if(!(!Wa.length||Wa[Wa.length-1]!==i)){var g="deltaY"in y?$k(y):Eh(y),m=e.current.filter(function(_){return _.name===y.type&&(_.target===y.target||y.target===_.shadowParent)&&Tz(_.delta,g)})[0];if(m&&m.should){y.cancelable&&y.preventDefault();return}if(!m){var b=(o.current.shards||[]).map(Fk).filter(Boolean).filter(function(_){return _.contains(y.target)}),k=b.length>0?a(y,b[0]):!o.current.noIsolation;k&&y.cancelable&&y.preventDefault()}}},[]),u=v.useCallback(function(x,y,g,m){var b={name:x,delta:y,target:g,should:m,shadowParent:Oz(g)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(k){return k!==b})},1)},[]),d=v.useCallback(function(x){n.current=Eh(x),s.current=void 0},[]),h=v.useCallback(function(x){u(x.type,$k(x),x.target,a(x,t.lockRef.current))},[]),f=v.useCallback(function(x){u(x.type,Eh(x),x.target,a(x,t.lockRef.current))},[]);v.useEffect(function(){return Wa.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Ha),document.addEventListener("touchmove",l,Ha),document.addEventListener("touchstart",d,Ha),function(){Wa=Wa.filter(function(x){return x!==i}),document.removeEventListener("wheel",l,Ha),document.removeEventListener("touchmove",l,Ha),document.removeEventListener("touchstart",d,Ha)}},[]);var p=t.removeScrollBar,w=t.inert;return v.createElement(v.Fragment,null,w?v.createElement(i,{styles:Pz(r)}):null,p?v.createElement(wz,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Oz(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Mz=lz(fN,Az);var yN=v.forwardRef(function(t,e){return v.createElement(Kp,Cr({},t,{ref:e,sideCar:Mz}))});yN.classNames=Kp.classNames;var wy=["Enter"," "],Iz=["ArrowDown","PageUp","Home"],vN=["ArrowUp","PageDown","End"],Dz=[...Iz,...vN],Lz={ltr:[...wy,"ArrowRight"],rtl:[...wy,"ArrowLeft"]},$z={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Td="Menu",[Hu,Fz,zz]=TE(Td),[_a,bN]=jd(Td,[zz,YE,oN]),Gp=YE(),wN=oN(),[Bz,Sa]=_a(Td),[Uz,Pd]=_a(Td),kN=t=>{const{__scopeMenu:e,open:n=!1,children:s,dir:r,onOpenChange:i,modal:o=!0}=t,a=Gp(e),[l,u]=v.useState(null),d=v.useRef(!1),h=ai(i),f=PE(r);return v.useEffect(()=>{const p=()=>{d.current=!0,document.addEventListener("pointerdown",w,{capture:!0,once:!0}),document.addEventListener("pointermove",w,{capture:!0,once:!0})},w=()=>d.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",w,{capture:!0}),document.removeEventListener("pointermove",w,{capture:!0})}},[]),c.jsx(SF,{...a,children:c.jsx(Bz,{scope:e,open:n,onOpenChange:h,content:l,onContentChange:u,children:c.jsx(Uz,{scope:e,onClose:v.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:f,modal:o,children:s})})})};kN.displayName=Td;var Hz="MenuAnchor",d0=v.forwardRef((t,e)=>{const{__scopeMenu:n,...s}=t,r=Gp(n);return c.jsx(jF,{...r,...s,ref:e})});d0.displayName=Hz;var h0="MenuPortal",[Wz,_N]=_a(h0,{forceMount:void 0}),SN=t=>{const{__scopeMenu:e,forceMount:n,children:s,container:r}=t,i=Sa(h0,e);return c.jsx(Wz,{scope:e,forceMount:n,children:c.jsx(Ed,{present:n||i.open,children:c.jsx(rN,{asChild:!0,container:r,children:s})})})};SN.displayName=h0;var Fs="MenuContent",[Vz,f0]=_a(Fs),jN=v.forwardRef((t,e)=>{const n=_N(Fs,t.__scopeMenu),{forceMount:s=n.forceMount,...r}=t,i=Sa(Fs,t.__scopeMenu),o=Pd(Fs,t.__scopeMenu);return c.jsx(Hu.Provider,{scope:t.__scopeMenu,children:c.jsx(Ed,{present:s||i.open,children:c.jsx(Hu.Slot,{scope:t.__scopeMenu,children:o.modal?c.jsx(qz,{...r,ref:e}):c.jsx(Kz,{...r,ref:e})})})})}),qz=v.forwardRef((t,e)=>{const n=Sa(Fs,t.__scopeMenu),s=v.useRef(null),r=as(e,s);return v.useEffect(()=>{const i=s.current;if(i)return ZF(i)},[]),c.jsx(p0,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:nt(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Kz=v.forwardRef((t,e)=>{const n=Sa(Fs,t.__scopeMenu);return c.jsx(p0,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Gz=WF("MenuContent.ScrollLock"),p0=v.forwardRef((t,e)=>{const{__scopeMenu:n,loop:s=!1,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:p,disableOutsideScroll:w,...x}=t,y=Sa(Fs,n),g=Pd(Fs,n),m=Gp(n),b=wN(n),k=Fz(n),[_,C]=v.useState(null),S=v.useRef(null),j=as(e,S,y.onContentChange),N=v.useRef(0),T=v.useRef(""),L=v.useRef(0),D=v.useRef(null),O=v.useRef("right"),$=v.useRef(0),I=w?yN:v.Fragment,A=w?{as:Gz,allowPinchZoom:!0}:void 0,W=P=>{var de,Z;const F=T.current+P,V=k().filter(be=>!be.disabled),H=document.activeElement,he=(de=V.find(be=>be.ref.current===H))==null?void 0:de.textValue,ee=V.map(be=>be.textValue),U=oB(ee,F,he),Q=(Z=V.find(be=>be.textValue===U))==null?void 0:Z.ref.current;(function be(Ae){T.current=Ae,window.clearTimeout(N.current),Ae!==""&&(N.current=window.setTimeout(()=>be(""),1e3))})(F),Q&&setTimeout(()=>Q.focus())};v.useEffect(()=>()=>window.clearTimeout(N.current),[]),Y5();const E=v.useCallback(P=>{var V,H;return O.current===((V=D.current)==null?void 0:V.side)&&lB(P,(H=D.current)==null?void 0:H.area)},[]);return c.jsx(Vz,{scope:n,searchRef:T,onItemEnter:v.useCallback(P=>{E(P)&&P.preventDefault()},[E]),onItemLeave:v.useCallback(P=>{var F;E(P)||((F=S.current)==null||F.focus(),C(null))},[E]),onTriggerLeave:v.useCallback(P=>{E(P)&&P.preventDefault()},[E]),pointerGraceTimerRef:L,onPointerGraceIntentChange:v.useCallback(P=>{D.current=P},[]),children:c.jsx(I,{...A,children:c.jsx(ME,{asChild:!0,trapped:r,onMountAutoFocus:nt(i,P=>{var F;P.preventDefault(),(F=S.current)==null||F.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:c.jsx(AE,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:p,children:c.jsx(UF,{asChild:!0,...b,dir:g.dir,orientation:"vertical",loop:s,currentTabStopId:_,onCurrentTabStopIdChange:C,onEntryFocus:nt(l,P=>{g.isUsingKeyboardRef.current||P.preventDefault()}),preventScrollOnEntryFocus:!0,children:c.jsx(CF,{role:"menu","aria-orientation":"vertical","data-state":BN(y.open),"data-radix-menu-content":"",dir:g.dir,...m,...x,ref:j,style:{outline:"none",...x.style},onKeyDown:nt(x.onKeyDown,P=>{const V=P.target.closest("[data-radix-menu-content]")===P.currentTarget,H=P.ctrlKey||P.altKey||P.metaKey,he=P.key.length===1;V&&(P.key==="Tab"&&P.preventDefault(),!H&&he&&W(P.key));const ee=S.current;if(P.target!==ee||!Dz.includes(P.key))return;P.preventDefault();const Q=k().filter(de=>!de.disabled).map(de=>de.ref.current);vN.includes(P.key)&&Q.reverse(),rB(Q)}),onBlur:nt(t.onBlur,P=>{P.currentTarget.contains(P.target)||(window.clearTimeout(N.current),T.current="")}),onPointerMove:nt(t.onPointerMove,Wu(P=>{const F=P.target,V=$.current!==P.clientX;if(P.currentTarget.contains(F)&&V){const H=P.clientX>$.current?"right":"left";O.current=H,$.current=P.clientX}}))})})})})})})});jN.displayName=Fs;var Yz="MenuGroup",m0=v.forwardRef((t,e)=>{const{__scopeMenu:n,...s}=t;return c.jsx(Un.div,{role:"group",...s,ref:e})});m0.displayName=Yz;var Qz="MenuLabel",CN=v.forwardRef((t,e)=>{const{__scopeMenu:n,...s}=t;return c.jsx(Un.div,{...s,ref:e})});CN.displayName=Qz;var op="MenuItem",zk="menu.itemSelect",Yp=v.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:s,...r}=t,i=v.useRef(null),o=Pd(op,t.__scopeMenu),a=f0(op,t.__scopeMenu),l=as(e,i),u=v.useRef(!1),d=()=>{const h=i.current;if(!n&&h){const f=new CustomEvent(zk,{bubbles:!0,cancelable:!0});h.addEventListener(zk,p=>s==null?void 0:s(p),{once:!0}),NE(h,f),f.defaultPrevented?u.current=!1:o.onClose()}};return c.jsx(EN,{...r,ref:l,disabled:n,onClick:nt(t.onClick,d),onPointerDown:h=>{var f;(f=t.onPointerDown)==null||f.call(t,h),u.current=!0},onPointerUp:nt(t.onPointerUp,h=>{var f;u.current||(f=h.currentTarget)==null||f.click()}),onKeyDown:nt(t.onKeyDown,h=>{const f=a.searchRef.current!=="";n||f&&h.key===" "||wy.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});Yp.displayName=op;var EN=v.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:s=!1,textValue:r,...i}=t,o=f0(op,n),a=wN(n),l=v.useRef(null),u=as(e,l),[d,h]=v.useState(!1),[f,p]=v.useState("");return v.useEffect(()=>{const w=l.current;w&&p((w.textContent??"").trim())},[i.children]),c.jsx(Hu.ItemSlot,{scope:n,disabled:s,textValue:r??f,children:c.jsx(HF,{asChild:!0,...a,focusable:!s,children:c.jsx(Un.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...i,ref:u,onPointerMove:nt(t.onPointerMove,Wu(w=>{s?o.onItemLeave(w):(o.onItemEnter(w),w.defaultPrevented||w.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:nt(t.onPointerLeave,Wu(w=>o.onItemLeave(w))),onFocus:nt(t.onFocus,()=>h(!0)),onBlur:nt(t.onBlur,()=>h(!1))})})})}),Xz="MenuCheckboxItem",NN=v.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:s,...r}=t;return c.jsx(ON,{scope:t.__scopeMenu,checked:n,children:c.jsx(Yp,{role:"menuitemcheckbox","aria-checked":ap(n)?"mixed":n,...r,ref:e,"data-state":x0(n),onSelect:nt(r.onSelect,()=>s==null?void 0:s(ap(n)?!0:!n),{checkForDefaultPrevented:!1})})})});NN.displayName=Xz;var TN="MenuRadioGroup",[Jz,Zz]=_a(TN,{value:void 0,onValueChange:()=>{}}),PN=v.forwardRef((t,e)=>{const{value:n,onValueChange:s,...r}=t,i=ai(s);return c.jsx(Jz,{scope:t.__scopeMenu,value:n,onValueChange:i,children:c.jsx(m0,{...r,ref:e})})});PN.displayName=TN;var RN="MenuRadioItem",AN=v.forwardRef((t,e)=>{const{value:n,...s}=t,r=Zz(RN,t.__scopeMenu),i=n===r.value;return c.jsx(ON,{scope:t.__scopeMenu,checked:i,children:c.jsx(Yp,{role:"menuitemradio","aria-checked":i,...s,ref:e,"data-state":x0(i),onSelect:nt(s.onSelect,()=>{var o;return(o=r.onValueChange)==null?void 0:o.call(r,n)},{checkForDefaultPrevented:!1})})})});AN.displayName=RN;var g0="MenuItemIndicator",[ON,eB]=_a(g0,{checked:!1}),MN=v.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:s,...r}=t,i=eB(g0,n);return c.jsx(Ed,{present:s||ap(i.checked)||i.checked===!0,children:c.jsx(Un.span,{...r,ref:e,"data-state":x0(i.checked)})})});MN.displayName=g0;var tB="MenuSeparator",IN=v.forwardRef((t,e)=>{const{__scopeMenu:n,...s}=t;return c.jsx(Un.div,{role:"separator","aria-orientation":"horizontal",...s,ref:e})});IN.displayName=tB;var nB="MenuArrow",DN=v.forwardRef((t,e)=>{const{__scopeMenu:n,...s}=t,r=Gp(n);return c.jsx(EF,{...r,...s,ref:e})});DN.displayName=nB;var sB="MenuSub",[Q7,LN]=_a(sB),Vc="MenuSubTrigger",$N=v.forwardRef((t,e)=>{const n=Sa(Vc,t.__scopeMenu),s=Pd(Vc,t.__scopeMenu),r=LN(Vc,t.__scopeMenu),i=f0(Vc,t.__scopeMenu),o=v.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=i,u={__scopeMenu:t.__scopeMenu},d=v.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return v.useEffect(()=>d,[d]),v.useEffect(()=>{const h=a.current;return()=>{window.clearTimeout(h),l(null)}},[a,l]),c.jsx(d0,{asChild:!0,...u,children:c.jsx(EN,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":BN(n.open),...t,ref:ka(e,r.onTriggerChange),onClick:h=>{var f;(f=t.onClick)==null||f.call(t,h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:nt(t.onPointerMove,Wu(h=>{i.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:nt(t.onPointerLeave,Wu(h=>{var p,w;d();const f=(p=n.content)==null?void 0:p.getBoundingClientRect();if(f){const x=(w=n.content)==null?void 0:w.dataset.side,y=x==="right",g=y?-5:5,m=f[y?"left":"right"],b=f[y?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+g,y:h.clientY},{x:m,y:f.top},{x:b,y:f.top},{x:b,y:f.bottom},{x:m,y:f.bottom}],side:x}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:nt(t.onKeyDown,h=>{var p;const f=i.searchRef.current!=="";t.disabled||f&&h.key===" "||Lz[s.dir].includes(h.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),h.preventDefault())})})})});$N.displayName=Vc;var FN="MenuSubContent",zN=v.forwardRef((t,e)=>{const n=_N(Fs,t.__scopeMenu),{forceMount:s=n.forceMount,...r}=t,i=Sa(Fs,t.__scopeMenu),o=Pd(Fs,t.__scopeMenu),a=LN(FN,t.__scopeMenu),l=v.useRef(null),u=as(e,l);return c.jsx(Hu.Provider,{scope:t.__scopeMenu,children:c.jsx(Ed,{present:s||i.open,children:c.jsx(Hu.Slot,{scope:t.__scopeMenu,children:c.jsx(p0,{id:a.contentId,"aria-labelledby":a.triggerId,...r,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=l.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:nt(t.onFocusOutside,d=>{d.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:nt(t.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:nt(t.onKeyDown,d=>{var p;const h=d.currentTarget.contains(d.target),f=$z[o.dir].includes(d.key);h&&f&&(i.onOpenChange(!1),(p=a.trigger)==null||p.focus(),d.preventDefault())})})})})})});zN.displayName=FN;function BN(t){return t?"open":"closed"}function ap(t){return t==="indeterminate"}function x0(t){return ap(t)?"indeterminate":t?"checked":"unchecked"}function rB(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function iB(t,e){return t.map((n,s)=>t[(e+s)%t.length])}function oB(t,e,n){const r=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=iB(t,Math.max(i,0));r.length===1&&(o=o.filter(u=>u!==n));const l=o.find(u=>u.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function aB(t,e){const{x:n,y:s}=t;let r=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],u=a.x,d=a.y,h=l.x,f=l.y;d>s!=f>s&&n<(h-u)*(s-d)/(f-d)+u&&(r=!r)}return r}function lB(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return aB(n,e)}function Wu(t){return e=>e.pointerType==="mouse"?t(e):void 0}var cB=kN,uB=d0,dB=SN,hB=jN,fB=m0,pB=CN,mB=Yp,gB=NN,xB=PN,yB=AN,vB=MN,bB=IN,wB=DN,kB=$N,_B=zN,Qp="DropdownMenu",[SB]=jd(Qp,[bN]),Hn=bN(),[jB,UN]=SB(Qp),HN=t=>{const{__scopeDropdownMenu:e,children:n,dir:s,open:r,defaultOpen:i,onOpenChange:o,modal:a=!0}=t,l=Hn(e),u=v.useRef(null),[d,h]=EE({prop:r,defaultProp:i??!1,onChange:o,caller:Qp});return c.jsx(jB,{scope:e,triggerId:my(),triggerRef:u,contentId:my(),open:d,onOpenChange:h,onOpenToggle:v.useCallback(()=>h(f=>!f),[h]),modal:a,children:c.jsx(cB,{...l,open:d,onOpenChange:h,dir:s,modal:a,children:n})})};HN.displayName=Qp;var WN="DropdownMenuTrigger",VN=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:s=!1,...r}=t,i=UN(WN,n),o=Hn(n);return c.jsx(uB,{asChild:!0,...o,children:c.jsx(Un.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...r,ref:ka(e,i.triggerRef),onPointerDown:nt(t.onPointerDown,a=>{!s&&a.button===0&&a.ctrlKey===!1&&(i.onOpenToggle(),i.open||a.preventDefault())}),onKeyDown:nt(t.onKeyDown,a=>{s||(["Enter"," "].includes(a.key)&&i.onOpenToggle(),a.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});VN.displayName=WN;var CB="DropdownMenuPortal",qN=t=>{const{__scopeDropdownMenu:e,...n}=t,s=Hn(e);return c.jsx(dB,{...s,...n})};qN.displayName=CB;var KN="DropdownMenuContent",GN=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=UN(KN,n),i=Hn(n),o=v.useRef(!1);return c.jsx(hB,{id:r.contentId,"aria-labelledby":r.triggerId,...i,...s,ref:e,onCloseAutoFocus:nt(t.onCloseAutoFocus,a=>{var l;o.current||(l=r.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:nt(t.onInteractOutside,a=>{const l=a.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,d=l.button===2||u;(!r.modal||d)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});GN.displayName=KN;var EB="DropdownMenuGroup",NB=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=Hn(n);return c.jsx(fB,{...r,...s,ref:e})});NB.displayName=EB;var TB="DropdownMenuLabel",YN=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=Hn(n);return c.jsx(pB,{...r,...s,ref:e})});YN.displayName=TB;var PB="DropdownMenuItem",QN=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=Hn(n);return c.jsx(mB,{...r,...s,ref:e})});QN.displayName=PB;var RB="DropdownMenuCheckboxItem",AB=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=Hn(n);return c.jsx(gB,{...r,...s,ref:e})});AB.displayName=RB;var OB="DropdownMenuRadioGroup",MB=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=Hn(n);return c.jsx(xB,{...r,...s,ref:e})});MB.displayName=OB;var IB="DropdownMenuRadioItem",DB=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=Hn(n);return c.jsx(yB,{...r,...s,ref:e})});DB.displayName=IB;var LB="DropdownMenuItemIndicator",$B=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=Hn(n);return c.jsx(vB,{...r,...s,ref:e})});$B.displayName=LB;var FB="DropdownMenuSeparator",XN=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=Hn(n);return c.jsx(bB,{...r,...s,ref:e})});XN.displayName=FB;var zB="DropdownMenuArrow",BB=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=Hn(n);return c.jsx(wB,{...r,...s,ref:e})});BB.displayName=zB;var UB="DropdownMenuSubTrigger",HB=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=Hn(n);return c.jsx(kB,{...r,...s,ref:e})});HB.displayName=UB;var WB="DropdownMenuSubContent",VB=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=Hn(n);return c.jsx(_B,{...r,...s,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});VB.displayName=WB;var qB=HN,KB=VN,GB=qN,YB=GN,QB=YN,XB=QN,JB=XN;const Xp=qB,Jp=KB,Rd=ge.forwardRef(({className:t,sideOffset:e=8,...n},s)=>c.jsx(GB,{children:c.jsx(YB,{ref:s,sideOffset:e,className:Te("z-[90] min-w-[220px] overflow-hidden rounded-2xl p-1","bg-white/75 dark:bg-black/40 backdrop-blur-md shadow-soft2","ring-1 ring-black/5 dark:ring-white/10",t),...n})}));Rd.displayName="DropdownMenuContent";const JN=ge.forwardRef(({className:t,...e},n)=>c.jsx(QB,{ref:n,className:Te("px-3 py-2 text-xs text-black/60 dark:text-white/60",t),...e}));JN.displayName="DropdownMenuLabel";const lp=ge.forwardRef(({className:t,...e},n)=>c.jsx(JB,{ref:n,className:Te("my-1 h-px bg-black/5 dark:bg-white/10",t),...e}));lp.displayName="DropdownMenuSeparator";const Vu=ge.forwardRef(({className:t,inset:e,...n},s)=>c.jsx(XB,{ref:s,className:Te("relative flex cursor-default select-none items-center gap-2 rounded-xl px-3 py-2 text-sm outline-none","text-black/90 dark:text-white/90","focus:bg-black/5 dark:focus:bg-white/10",e&&"pl-8",t),...n}));Vu.displayName="DropdownMenuItem";function Tn({className:t,variant:e="secondary",...n}){return c.jsx(te,{variant:e,size:"icon",className:Te("rounded-xl h-8 w-8",t),...n})}function ks({open:t,onClose:e,title:n,children:s,maxWidth:r="520px"}){if(!t)return null;const i=c.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/40 backdrop-blur-sm px-4 py-6 overflow-y-auto",children:c.jsx("div",{className:"w-full",style:{maxWidth:r},children:c.jsxs("div",{className:"rounded-2xl bg-white/90 dark:bg-neutral-900/95 shadow-2xl ring-1 ring-black/10 dark:ring-white/10 max-h-[85vh] flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-black/5 dark:border-white/10",children:[c.jsx("div",{className:"text-sm font-semibold",children:n}),c.jsx("button",{className:"text-black/60 dark:text-white/60 hover:opacity-100 opacity-70",onClick:e,children:""})]}),c.jsx("div",{className:"p-4 overflow-y-auto",children:s})]})})});return typeof document>"u"?i:yd.createPortal(i,document.body)}function cc({open:t,onClose:e,onConfirm:n,message:s}){return t?c.jsx(ks,{open:t,onClose:e,title:"Confirm",maxWidth:"420px",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"text-sm text-black/70 dark:text-white/70",children:s||"Are you sure?"}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx(te,{variant:"ghost",className:"rounded-2xl",onClick:e,children:"Cancel"}),c.jsx(te,{className:"rounded-2xl",onClick:n,children:"Confirm"})]})]})}):null}const ZN=v.createContext(null);function y0(){const t=v.useContext(ZN);if(!t)throw new Error("useNotifications must be used inside NotificationsProvider");return t}function ZB({notification:t}){var e;return t?c.jsxs("div",{className:"space-y-3 text-sm text-black/70 dark:text-white/70",children:[t.message?c.jsx("div",{children:t.message}):c.jsx("div",{children:"No additional details."}),(e=t.meta)!=null&&e.details?c.jsx("div",{className:"rounded-xl bg-black/5 dark:bg-white/10 p-3 text-xs whitespace-pre-wrap",children:t.meta.details}):null]}):null}function e3(){const t=wd(),{notifications:e,unreadCount:n,clearAll:s,dismissNotification:r,markRead:i,formatTime:o}=y0(),[a,l]=v.useState(null),u=v.useMemo(()=>e.slice(0,6),[e]);return c.jsxs(c.Fragment,{children:[c.jsxs(Xp,{children:[c.jsx(Jp,{asChild:!0,children:c.jsxs("button",{className:"relative flex h-9 w-9 items-center justify-center rounded-2xl bg-black/5 dark:bg-white/10 text-black/80 dark:text-white/80 shadow-soft","aria-label":"Notifications",children:[c.jsx(IM,{size:18}),n?c.jsx("span",{className:"absolute -right-1 -top-1 min-w-[18px] rounded-full bg-rose-500 px-1 text-[11px] font-semibold leading-4 text-white",children:n>99?"99+":n}):null]})}),c.jsxs(Rd,{align:"end",className:"w-[320px] p-0 bg-white/90 dark:bg-neutral-900/85",children:[c.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold",children:"Notifications"}),c.jsx("div",{className:"text-xs text-black/50 dark:text-white/55",children:e.length?`${e.length} total`:"No alerts"})]}),c.jsx(te,{variant:"secondary",size:"sm",className:"rounded-xl",onClick:s,disabled:!e.length,children:"Clear all"})]}),c.jsx(lp,{}),c.jsx("div",{className:"max-h-[320px] overflow-y-auto p-2 space-y-2",children:u.length?u.map(d=>c.jsx("div",{className:Te("rounded-xl px-3 py-2 ring-1 transition-colors",d.read?"bg-white/50 dark:bg-white/5 ring-black/5 dark:ring-white/10":"bg-black/5 dark:bg-white/10 ring-black/10 dark:ring-white/20"),children:c.jsxs("div",{className:"flex items-start justify-between gap-2",children:[c.jsxs("div",{className:"min-w-0",children:[c.jsx("div",{className:"text-sm font-semibold text-black/85 dark:text-white/85 truncate",children:d.title||"Notification"}),d.message?c.jsx("div",{className:"mt-0.5 text-xs text-black/60 dark:text-white/65 leading-4 mmg-line-clamp-2",children:d.message}):null,d.created_at?c.jsx("div",{className:"mt-1 text-[11px] text-black/45 dark:text-white/45",children:o(d.created_at)}):null]}),c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(Tn,{variant:"ghost",className:"h-7 w-7",onClick:()=>r(d.id),"aria-label":"Dismiss notification",children:c.jsx(Gv,{size:14})}),c.jsx(Tn,{variant:"ghost",className:"h-7 w-7",onClick:()=>{i(d.id),l(d)},"aria-label":"View notification",children:c.jsx(WC,{size:14})})]})]})},d.id)):c.jsx("div",{className:"rounded-xl border border-dashed border-black/10 dark:border-white/15 p-4 text-xs text-black/50 dark:text-white/60 text-center",children:"You're all caught up."})}),c.jsx(lp,{}),c.jsx("div",{className:"px-3 py-2",children:c.jsx(te,{variant:"secondary",className:"w-full rounded-2xl",onClick:()=>t("/app/notifications"),children:"View all notifications"})})]})]}),c.jsx(ks,{open:!!a,onClose:()=>l(null),title:(a==null?void 0:a.title)||"Notification",maxWidth:"520px",children:c.jsx(ZB,{notification:a})})]})}function zt({className:t,...e}){return c.jsx("div",{className:Te("rounded-2xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 shadow-soft",t),...e})}function t3(){const{toasts:t,dismissToast:e,formatTime:n}=y0();return t.length?c.jsx("div",{className:"fixed right-6 top-24 z-50 flex w-[320px] flex-col gap-2",children:t.map(s=>{const r=s.notification;return c.jsx(zt,{className:"p-3 bg-white dark:bg-neutral-900 shadow-soft ring-1 ring-black/10 dark:ring-white/10",children:c.jsxs("div",{className:"flex items-start justify-between gap-2",children:[c.jsxs("div",{className:"min-w-0",children:[c.jsx("div",{className:"text-sm font-semibold text-black/85 dark:text-white/85 truncate",children:r.title||"Notification"}),r.message?c.jsx("div",{className:"mt-1 text-xs text-black/60 dark:text-white/65 leading-4 mmg-line-clamp-2",children:r.message}):null,r.created_at?c.jsx("div",{className:"mt-1 text-[11px] text-black/45 dark:text-white/45",children:n(r.created_at)}):null]}),c.jsx("button",{type:"button",className:"rounded-full p-1 text-black/50 hover:text-black/80 dark:text-white/50 dark:hover:text-white/80",onClick:()=>e(s.id),"aria-label":"Dismiss notification",children:c.jsx(Gv,{size:14})})]})},s.id)})}):null}async function n3(){return Ie("/api/modules/accessible",{method:"GET"})}async function s3({limit:t,offset:e=0,newestFirst:n=!1,signal:s}={}){const r=new URLSearchParams;t!=null&&r.set("limit",t),e>0&&r.set("offset",e),n&&r.set("newest_first","true");const i=r.toString();return Ie(`/api/sales/chat/history${i?`?${i}`:""}`,{signal:s})}async function r3(t,e=[]){return Ie("/api/sales/chat/attachments/refresh",{method:"POST",body:JSON.stringify({file_ids:t,prefetch_ids:e})})}async function i3({conversationId:t,message:e,fileIds:n,onEvent:s,onChunk:r,onDone:i,onError:o,signal:a}){try{const l=Up(),u=oc.API_BASE_URL||"",d=await fetch(`${u}/api/sales/chat/stream`,{method:"POST",headers:{"Content-Type":"application/json",...l?{Authorization:`Bearer ${l}`}:{}},body:JSON.stringify({message:e,conversation_id:t,...n!=null&&n.length?{file_ids:n}:{}}),signal:a});if(d.status===401){Zi(),window.dispatchEvent(new CustomEvent("auth:logout")),o==null||o(new Error("Unauthorized"));return}if(!d.ok){const x=await d.json().catch(()=>({}));throw new Error(x.detail||`API error: ${d.status}`)}const h=d.body.getReader(),f=new TextDecoder;let p="",w=!1;for(;;){const{done:x,value:y}=await h.read();if(x)break;p+=f.decode(y,{stream:!0});const g=p.split(`
`);p=g.pop()||"";for(const m of g){const b=m.trim();if(!b.startsWith("data:"))continue;const k=b.replace(/^data:\s?/,"");if(!k||k==="[DONE]"){w=!0,i==null||i();continue}try{const _=JSON.parse(k);s==null||s(_),!s&&r&&(_.type==="chunk"||_.type==="content")&&r(_)}catch{const _={content:k};s==null||s(_),s||r==null||r(_)}}}w||i==null||i()}catch(l){throw o==null||o(l),l}}async function o3(t){const e=new FormData;return e.append("file",t),Ie("/api/sales/files/upload",{method:"POST",body:e})}async function a3(){return Ie("/api/assets/asset-types")}async function Bk(t,{timeOfDay:e,side:n,venueType:s}={}){const r=new URLSearchParams;e&&r.set("time_of_day",e),n&&r.set("side",n),s&&r.set("venue_type",s);const i=Array.isArray(t)?t[0]:t;return i?Ie(`/api/sales/mockup/templates/${encodeURIComponent(i)}?${r.toString()}`):[]}async function l3(t){return Ie("/api/sales/mockup/save-frame",{method:"POST",body:t})}async function c3(t){return Ie("/api/sales/mockup/update-frame",{method:"PUT",body:t})}async function u3(t,e,{timeOfDay:n,side:s}={}){const r=new URLSearchParams;return r.set("photo_filename",e),n&&r.set("time_of_day",n),s&&r.set("side",s),Ie(`/api/sales/mockup/photo/${t}?${r.toString()}`,{method:"DELETE"})}async function d3({company:t,locationKey:e,environment:n="outdoor",timeOfDay:s="day",side:r="gold",photoFilename:i}={}){if(!t||!e)return null;const o=new URLSearchParams;n&&o.set("environment",n),s&&o.set("time_of_day",s),r&&o.set("side",r),i&&o.set("photo_filename",i);const a=encodeURIComponent(e);return Ie(`/api/assets/mockup-frames/${t}/${a}/frame?${o.toString()}`)}async function h3({company:t,locationKey:e,environment:n="outdoor",timeOfDay:s="day",side:r="gold",photoFilename:i}={}){if(!t||!e||!i)return null;const o=new URLSearchParams;n&&o.set("environment",n),s&&o.set("time_of_day",s),r&&o.set("side",r),o.set("photo_filename",i);const a=encodeURIComponent(e);return Ie(`/api/assets/mockup-frames/${t}/${a}?${o.toString()}`,{method:"DELETE"})}async function f3(t){return _E("/api/sales/mockup/test-preview",{method:"POST",body:t})}async function p3(t){return Ie("/api/sales/mockup/generate",{method:"POST",body:t})}async function eT(t,e,{timeOfDay:n,side:s,company:r,venueType:i}={}){if(!t||!e)return null;const o=new URLSearchParams;o.set("photo_filename",e),n&&o.set("time_of_day",n),s&&o.set("side",s),r&&o.set("company",r),i&&o.set("venue_type",i);const a=`/api/sales/mockup/photo/${t}?${o.toString()}`;return _E(a)}async function m3(t,e,{timeOfDay:n,side:s,company:r,venueType:i}={}){const o=await eT(t,e,{timeOfDay:n,side:s,company:r,venueType:i});return o?URL.createObjectURL(o):""}async function g3(){return Ie("/api/sales/mockup/eligibility/setup")}async function x3(){return Ie("/api/sales/mockup/eligibility/generate")}async function y3({service:t,displayType:e}={}){const n=new URLSearchParams;t&&n.set("service",t),e&&n.set("display_type",e);const s=n.toString();return Ie(`/api/sales/locations${s?`?${s}`:""}`)}async function v3(t){return t?Ie(`/api/sales/locations/${encodeURIComponent(t)}`):null}async function b3(t){return Ie("/api/sales/proposals",{method:"POST",body:JSON.stringify(t)})}async function w3(){return Ie("/api/sales/proposals/history")}async function k3({limit:t=100,offset:e=0}={}){return Ie("/api/rbac/users")}async function _3(t){return Ie(`/api/rbac/user/${t}`)}async function S3(t){return Ie(`/api/rbac/users/${t}/permissions`)}async function j3(t){return Ie("/api/rbac/users",{method:"POST",body:JSON.stringify(t)})}async function C3(t,e){return Ie(`/api/rbac/users/${t}`,{method:"PUT",body:JSON.stringify(e)})}async function E3(t){return Ie(`/api/rbac/users/${encodeURIComponent(t)}/deactivate`,{method:"POST"})}async function N3(t){return Ie(`/api/rbac/users/${encodeURIComponent(t)}/reactivate`,{method:"POST"})}async function T3(){return Ie("/api/rbac/profiles")}async function P3(t){return Ie("/api/rbac/profiles",{method:"POST",body:JSON.stringify(t)})}async function R3(t,e){return Ie(`/api/rbac/profiles/${encodeURIComponent(t)}`,{method:"PUT",body:JSON.stringify(e)})}async function A3(t){return Ie(`/api/rbac/profiles/${encodeURIComponent(t)}`,{method:"DELETE"})}async function Uk(t,e){return Ie(`/api/rbac/users/${t}/permissions`,{method:"PUT",body:JSON.stringify({permissions:e})})}async function O3(){return await Ie("/api/rbac/permissions")}async function mg(t,e){return Ie("/api/rbac/permissions",{method:"POST",body:JSON.stringify({name:t,description:e})})}async function Hk(t){return Ie(`/api/rbac/permissions/${encodeURIComponent(t)}`,{method:"DELETE"})}async function M3(){const t=await Ie("/api/rbac/companies");return t.companies||t}async function I3(t){return Ie("/api/assets/companies",{method:"POST",body:JSON.stringify(t)})}async function D3(t,e){return Ie(`/api/assets/companies/${encodeURIComponent(t)}`,{method:"PUT",body:JSON.stringify(e)})}async function L3(t){return Ie(`/api/assets/companies/${encodeURIComponent(t)}`,{method:"DELETE"})}async function $3(){return Ie("/api/rbac/permission-sets")}async function F3(t){return Ie("/api/rbac/permission-sets",{method:"POST",body:JSON.stringify(t)})}async function z3(t,e){return Ie(`/api/rbac/permission-sets/${encodeURIComponent(t)}`,{method:"PUT",body:JSON.stringify(e)})}async function B3(t){return Ie(`/api/rbac/permission-sets/${encodeURIComponent(t)}`,{method:"DELETE"})}const v0="mmg-notifications",Ad="/api/notifications";function U3(t,e){if(!t)return e;try{return JSON.parse(t)}catch{return e}}function eo(){if(typeof window>"u")return[];const t=window.localStorage.getItem(v0),e=U3(t,[]);return Array.isArray(e)?e:[]}function Zp(t){typeof window>"u"||window.localStorage.setItem(v0,JSON.stringify(t))}function Wk(t){const e=new Date().toISOString();return{id:(t==null?void 0:t.id)||(typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`ntf_${Date.now()}_${Math.random().toString(16).slice(2,8)}`),title:(t==null?void 0:t.title)||"Notification",message:(t==null?void 0:t.message)||"",created_at:(t==null?void 0:t.created_at)||e,read:!!(t!=null&&t.read),level:(t==null?void 0:t.level)||"info",meta:(t==null?void 0:t.meta)||{}}}function H3(t){return Array.isArray(t)?t:Array.isArray(t==null?void 0:t.notifications)?t.notifications:Array.isArray(t==null?void 0:t.data)?t.data:[]}function W3(){return Ie(Ad).then(t=>H3(t)).catch(()=>eo())}function V3(t){return Ie(Ad,{method:"POST",body:JSON.stringify(t||{})}).then(e=>(e==null?void 0:e.notification)||(e==null?void 0:e.data)||e||Wk(t)).catch(()=>{const e=eo(),n=Wk(t),s=[n,...e];return Zp(s),n})}function q3(){return Ie(Ad,{method:"DELETE"}).then(()=>[]).catch(()=>(Zp([]),[]))}function K3(t){return t?Ie(`${Ad}/${encodeURIComponent(t)}`,{method:"DELETE"}).then(()=>eo()).catch(()=>{const e=eo().filter(n=>n.id!==t);return Zp(e),e}):Promise.resolve(eo())}function G3(t){return t?Ie(`${Ad}/${encodeURIComponent(t)}`,{method:"PATCH",body:JSON.stringify({read:!0})}).then(()=>eo()).catch(()=>{const e=eo().map(n=>n.id===t?{...n,read:!0}:n);return Zp(e),e}):Promise.resolve(eo())}const Y3=v0;function Us(t){if(!t||t==="NA")return null;if(t.includes("T")){const i=new Date(t);if(!Number.isNaN(i.getTime()))return i}const e=t.split(" "),n=e[0],s=e[1],r=n.split("-");if(r.length===3){const i=Number(r[0]),o=Number(r[1])-1,a=Number(r[2]);if(Number.isNaN(i)||Number.isNaN(o)||Number.isNaN(a))return null;if(s){const u=s.split(":"),d=Number(u[0]||0),h=Number(u[1]||0),f=Number(u[2]||0),p=new Date(a,o,i,d,h,f);return Number.isNaN(p.getTime())?null:p}const l=new Date(a,o,i);return l.setHours(0,0,0,0),Number.isNaN(l.getTime())?null:l}return null}function tT(t){var n;if(!((n=t==null?void 0:t.lifecycle)!=null&&n.length))return"";const e=t.lifecycle[t.lifecycle.length-1];return((e==null?void 0:e.stage)||"").toLowerCase()}function nT(t){const e={};return t.forEach(n=>{const s=n.videographer||n.Videographer||"Unassigned";e[s]||(e[s]=[]),e[s].push(n)}),e}function Ci(t){const e={pending:0,rejected:0,returned:0,submitted:0,accepted:0};return t.forEach(n=>{(n.versions||[]).forEach(s=>{const r=tT(s);r==="pending"||r==="critique"?e.pending+=1:r==="rejected"||r==="editing"?e.rejected+=1:r==="returned"?e.returned+=1:r==="submitted"||r==="submitted to sales"?e.submitted+=1:(r==="accepted"||r==="done")&&(e.accepted+=1)})}),e}function sT(t){const e=t.length,n=t.filter(a=>{const l=a.videographer||a.Videographer||"Unassigned";return l&&l!=="Unassigned"&&a.status!=="Not assigned yet"}).length;let s=0;t.forEach(a=>{s+=(a.versions||[]).length});const r=Ci(t),i=r.accepted+r.submitted+r.rejected+r.returned,o=i>0?Math.round((r.accepted+r.submitted)/i*100):0;return{total:e,assigned:n,uploads:s,pending:r.pending,rejected:r.rejected,returned:r.returned,submitted_to_sales:r.submitted,accepted_videos:r.accepted,accepted_pct:o}}function rT(t){const e=t.filter(n=>n.status==="Accepted"||n.status==="Done").length;return{completed:e,not_completed:t.length-e}}function Q3(t){let e=0,n=0,s=0,r=0,i=0;t.forEach(d=>{(d.versions||[]).forEach(h=>{const f=h.lifecycle||[];if(f.length<2)return;let p=null;for(const g of f){const m=(g.stage||"").toLowerCase();if(m==="pending"||m==="critique"){p=Us(g.at);break}}let w=null,x=null;for(const g of f){const m=(g.stage||"").toLowerCase();if(m==="rejected"||m==="editing"||m==="accepted"||m==="submitted"||m==="submitted to sales"){w=Us(g.at),x=m;break}}if(!p||!w||!x)return;s+=1;const y=Math.round((w-p)/(1e3*60*60));if(e+=y,n+=1,x==="accepted"||x==="submitted"||x==="submitted to sales"){let g=!1,m=!1;f.forEach(b=>{const k=(b.stage||"").toLowerCase();(k==="accepted"||k==="done")&&(g=!0),k==="returned"&&(m=!0)}),g&&(r+=1),m&&(i+=1)}})});const o=n>0?Math.round(e/n):0,a=o>0?`${o} hrs`:"0 hrs",l=r+i,u=l>0?Math.round(r/l*100):0;return{avg_response_display:a,handled:s,accepted:r,handled_percent:u}}function iT(t){const e=nT(t),n={},s=new Date;return s.setHours(0,0,0,0),Object.entries(e).forEach(([r,i])=>{let o=0,a=0,l=0,u=0;i.forEach(p=>{(p.status==="Accepted"||p.status==="Done")&&(o+=1),a+=(p.versions||[]).length;const w=Us(p.filming_deadline||p.filming_date||"");w&&w<=s&&(u+=1);const x=Us(p.submission_date||"");x&&x<=s&&p.status!=="Accepted"&&p.status!=="Done"&&(l+=1)});const d=Ci(i),h=d.accepted+d.submitted+d.rejected+d.returned,f=h>0?Math.round((d.accepted+d.submitted)/h*100):0;n[r]={total:i.length,started:u,late:l,completed:o,uploads:a,accepted_pct:f}}),n}function qu(t,e){const n=[];return t.forEach(s=>{(s.versions||[]).forEach(r=>{const i=tT(r);(i==="submitted to sales"?"submitted":i)===e&&n.push({task:s,version:r,stage:i})})}),n}function gg(t,e){const n=[];return t.forEach(s=>{const r=[];(s.versions||[]).forEach(i=>{(i.lifecycle||[]).forEach(o=>{const a=(o.stage||"").toLowerCase();(e==="hod"&&(a==="rejected"||a==="editing")||e==="hos"&&a==="returned")&&r.push({version:i.version,event:o,stage:a})})}),r.length&&n.push({...s,rejectionEvents:r,rejectionCount:r.length})}),n}function oT(t){const e=qu(t,"pending"),n=[];return e.forEach(({task:s,version:r})=>{let i=null;(r.lifecycle||[]).forEach(a=>{const l=(a.stage||"").toLowerCase();(l==="pending"||l==="critique")&&(i=Us(a.at))});const o=i?Math.round((Date.now()-i.getTime())/(1e3*60*60)):null;n.push({task:s,version:r,uploadTime:i,waitingHours:o})}),{count:n.length,reviews:n}}function aT(t){const e=[];return t.forEach(n=>{(n.versions||[]).forEach(s=>{let r=null,i=null,o=null,a=null,l=null;if((s.lifecycle||[]).forEach(u=>{const d=(u.stage||"").toLowerCase();!r&&(d==="pending"||d==="critique")&&(r=Us(u.at)),!i&&(d==="rejected"||d==="editing"||d==="accepted"||d==="submitted"||d==="submitted to sales")&&(i=Us(u.at),o=d,a=u.rejection_class||null,l=u.rejection_comments||null)}),r&&i&&o){const u=Math.round((i-r)/36e5);e.push({task:n,version:s,responseHours:u,uploadTime:r,reviewTime:i,decision:o,rejectionClass:a,comments:l})}})}),e}function lT(t){const e=sT(t),n=rT(t),s=new Date;s.setHours(0,0,0,0);let r=0,i=0,o=0,a=0,l=0,u=0;t.forEach(p=>{const w=Us(p.filming_deadline||p.filming_date||"");w&&w<=s&&(r+=1);const x=Us(p.submission_date||"");x&&x<=s&&p.status!=="Accepted"&&p.status!=="Done"&&(i+=1),(p.status==="Accepted"||p.status==="Done")&&(a+=1,o+=(p.versions||[]).length),(p.versions||[]).forEach(y=>{(y.lifecycle||[]).forEach(g=>{const m=(g.stage||"").toLowerCase();(m==="rejected"||m==="editing")&&(l+=1),m==="returned"&&(u+=1)})})});const d=a>0?(o/a).toFixed(2):"0",h=qu(t,"pending"),f=qu(t,"submitted");return{summary:e,pie:n,tasksStarted:r,lateTasks:i,pendingHOD:h.length,pendingHOS:f.length,rejectionsByHOD:l,rejectionsByHOS:u,uploadRatio:d}}function xg(t){const e=Us(t.submission_date||"");if(!e)return!1;const n=new Date;return n.setHours(0,0,0,0),e<n&&t.status!=="Accepted"&&t.status!=="Done"}const fr=[{task_number:2217,brand:"City Brand Launch",filming_deadline:"17-02-2025",submission_date:"20-02-2025",status:"Critique",videographer:"Alyssa Reed",location:"Dubai",versions:[{version:1,lifecycle:[{stage:"pending",at:"18-02-2025 10:00:00"}]}]},{task_number:2216,brand:"Mall LED Loop",filming_deadline:"16-02-2025",submission_date:"19-02-2025",status:"Submitted to Sales",videographer:"Ravi Sharma",location:"Dubai",versions:[{version:1,lifecycle:[{stage:"pending",at:"17-02-2025 09:00:00"},{stage:"submitted to sales",at:"18-02-2025 11:30:00"}]}]},{task_number:2215,brand:"Festival Teaser",filming_deadline:"15-02-2025",submission_date:"18-02-2025",status:"Returned",videographer:"Alyssa Reed",location:"Abu Dhabi",versions:[{version:1,lifecycle:[{stage:"pending",at:"15-02-2025 10:00:00"},{stage:"submitted",at:"16-02-2025 12:00:00"},{stage:"returned",at:"17-02-2025 15:30:00",rejection_class:"Lighting",rejection_comments:"Exposure too dark",rejected_by:"Head of Sales"}]}]},{task_number:2214,brand:"Luxury Auto Montage",filming_deadline:"14-02-2025",submission_date:"17-02-2025",status:"Editing",videographer:"Noah Chen",location:"Sharjah",versions:[{version:1,lifecycle:[{stage:"pending",at:"14-02-2025 09:30:00"},{stage:"rejected",at:"15-02-2025 12:10:00",rejection_class:"Artwork Color",rejection_comments:"Incorrect color profile",rejected_by:"Reviewer"}]}]},{task_number:2213,brand:"Airport Arrival Hero",filming_deadline:"12-02-2025",submission_date:"15-02-2025",status:"Accepted",videographer:"Noah Chen",location:"Dubai",versions:[{version:1,lifecycle:[{stage:"pending",at:"12-02-2025 10:00:00"},{stage:"submitted to sales",at:"13-02-2025 15:00:00"},{stage:"accepted",at:"14-02-2025 12:00:00"}]}]},{task_number:2212,brand:"Retail Weekend Promo",filming_deadline:"10-02-2025",submission_date:"13-02-2025",status:"Done",videographer:"Ravi Sharma",location:"Ajman",versions:[{version:1,lifecycle:[{stage:"pending",at:"10-02-2025 10:00:00"},{stage:"submitted",at:"11-02-2025 14:00:00"},{stage:"done",at:"12-02-2025 10:00:00"}]}]},{task_number:2211,brand:"Harbor Night Loop",filming_deadline:"18-02-2025",submission_date:"21-02-2025",status:"Editing",videographer:"Alyssa Reed",location:"Dubai",versions:[{version:1,lifecycle:[{stage:"pending",at:"16-02-2025 11:00:00"},{stage:"editing",at:"17-02-2025 13:00:00",rejection_class:"Environment Too Dark",rejection_comments:"Please brighten the surrounding scene",rejected_by:"Reviewer"}]}]},{task_number:2210,brand:"City Center Countdown",filming_deadline:"22-02-2025",submission_date:"25-02-2025",status:"Assigned to Alyssa",videographer:"Alyssa Reed",location:"Dubai",versions:[]},{task_number:2209,brand:"Expo Walkthrough",filming_deadline:"24-02-2025",submission_date:"27-02-2025",status:"Not assigned yet",videographer:"Unassigned",location:"Abu Dhabi",versions:[]},{task_number:2208,brand:"Weekend Highlights",filming_deadline:"13-02-2025",submission_date:"16-02-2025",status:"Submitted to Sales",videographer:"Ravi Sharma",location:"Sharjah",versions:[{version:1,lifecycle:[{stage:"pending",at:"13-02-2025 09:00:00"},{stage:"rejected",at:"14-02-2025 10:30:00",rejection_class:"Lighting",rejection_comments:"Flicker in the panel",rejected_by:"Reviewer"}]},{version:2,lifecycle:[{stage:"pending",at:"15-02-2025 12:15:00"},{stage:"submitted",at:"16-02-2025 14:40:00"}]}]}],X3={session_id:"vc-session-01",messages:[{id:"vc-msg-1",role:"assistant",content:"Good morning. Upload a cut or describe the request, and I will log the critique, checklist, and next steps.",timestamp:"2025-02-18T08:40:12+04:00"}],message_count:1,last_updated:"2025-02-18T08:40:12+04:00"},J3=[{workflow_id:"workflow-2217",task_number:2217,folder_name:"City Brand Launch",status:"pending_reviewer",created_at:"2025-02-18T09:10:00+04:00",reviewer_approved:!1,hos_approved:!1}];function ar(t){return new Promise(e=>setTimeout(e,t))}function Z3(t,e){const n=[];let s=0;for(;s<t.length;)n.push(t.slice(s,s+e)),s+=e;return n}function b0(t,e){const n=(t||"").trim();return[`${n?`Thanks for the details on "${n}".`:"Thanks for the upload."} ${e?"I reviewed the file and captured the critique highlights below:":"Here is a quick critique outline to confirm before I log the request:"}`,"","- Narrative clarity: tighten the opening 3 seconds.","- Visual hierarchy: spotlight the primary CTA earlier.","- Audio mix: reduce music by about 3dB under VO.","- Export: keep 1080x1920, 29.97fps.","","Reply with any edits or confirm if I should submit to the reviewer."].join(`
`)}function e4(t){return[{action_id:"approve_reviewer",label:"Approve",workflow_id:t,variant:"secondary"},{action_id:"reject_reviewer",label:"Reject",workflow_id:t,variant:"ghost"}]}function t4(t){let e=!1;return t&&(t.aborted?e=!0:t.addEventListener("abort",()=>{e=!0},{once:!0})),()=>e}function n4(t){if(!t)return!1;if(t.type&&t.type.startsWith("video/"))return!0;const e=t.name||"";return/\.(mp4|mov|avi|mkv|webm)$/i.test(e)}function s4(){const t=sT(fr),e=rT(fr),n=Q3(fr),s=iT(fr),r=nT(fr),i=lT(fr),o=Ci(fr),a=oT(fr),l=aT(fr);return{mode:"month",period:"2025-02",tasks:fr,summary:t,pie:e,reviewer:n,summary_videographers:s,videographers:r,quick_stats:i,status_counts:o,pending_reviews:a,response_times:l}}async function r4({mode:t,period:e}={}){return await ar(240),{...s4(),mode:t||"month",period:e||"2025-02"}}async function i4(){return await ar(200),X3}async function o4({file:t,message:e,sessionId:n}){await ar(200);const s=n||`vc-session-${Date.now()}`,r=`vc-file-${Date.now()}`;return n4(t)?{success:!0,file_id:r,filename:(t==null?void 0:t.name)||"upload",type:"video",message:"Video received. Which task number is this for?",session_id:s}:{success:!0,file_id:r,filename:(t==null?void 0:t.name)||"upload",file_url:URL.createObjectURL(t),type:"image",response:b0(e,!0),session_id:s,timestamp:new Date().toISOString()}}async function a4({file:t}){return await ar(200),{file_id:`vc-asset-${Date.now()}`,filename:(t==null?void 0:t.name)||"attachment",file_url:URL.createObjectURL(t)}}async function l4({file:t,taskNumber:e}){return await ar(260),{success:!0,file_id:`vc-video-${Date.now()}`,workflow_id:`workflow-${Date.now()}`,version:1,message:`Video uploaded successfully (v1) for task #${e}`}}async function c4({command:t,args:e,sessionId:n}){await ar(200);const s=n||`vc-session-${Date.now()}`,r=(t||"").toLowerCase(),i=(e||"").trim();return r?r==="help"?{success:!0,command:r,response:`**Video Critique Commands**

- /log or /design - Start a new design request
- /recent - Export recent task data
- /edit <task_number> - Edit an existing task
- /delete <task_number> - Delete a task

You can also paste briefs or upload images/videos.`,session_id:s}:r==="log"||r==="design"?{success:!0,command:r,response:b0(i||"I want to log a design request",!1),session_id:s}:r==="edit"?{success:!0,command:r,response:i?"Editing task "+i+". Which fields should I update?":"Please provide a task number: /edit <task_number>",session_id:s}:r==="delete"?{success:!0,command:r,response:i?"Delete request queued for task "+i+". Confirm to proceed.":"Please provide a task number: /delete <task_number>",session_id:s}:r==="recent"?{success:!0,command:r,response:"Preparing the latest export. I will send the download link shortly.",session_id:s}:{success:!1,command:r,error:"Unknown command: /"+r+". Use /help for available commands.",session_id:s}:{success:!1,command:"",error:"Unknown command: /. Use /help for available commands.",session_id:s}}async function u4({actionId:t,workflowId:e}){return await ar(200),t==="reject_reviewer"||t==="return_hos"?{success:!0,message:"Please provide rejection details.",requires_form:!0,form_type:t==="return_hos"?"return":"rejection",workflow_id:e}:{success:!0,message:`Action ${t} applied for ${e}.`}}async function d4({formType:t,workflowId:e}){return await ar(200),{success:!0,message:`${t} submitted for ${e}.`}}async function h4(t){return await ar(120),t==="return"?{title:"Return for Revision",submit_text:"Submit",fields:[{id:"category",label:"Category",type:"select",required:!0,options:[{value:"technical",label:"Technical Issue"},{value:"content",label:"Content Issue"},{value:"quality",label:"Quality Issue"},{value:"missing",label:"Missing Elements"},{value:"other",label:"Other"}]},{id:"reason",label:"Details",type:"textarea",required:!0,placeholder:"Please describe what needs to be revised..."}]}:{title:"Reject Video",submit_text:"Submit",fields:[{id:"category",label:"Category",type:"select",required:!0,options:[{value:"technical",label:"Technical Issue"},{value:"content",label:"Content Issue"},{value:"quality",label:"Quality Issue"},{value:"missing",label:"Missing Elements"},{value:"other",label:"Other"}]},{id:"reason",label:"Details",type:"textarea",required:!0,placeholder:"Please describe what needs to be fixed..."}]}}function f4(t){return t!=null&&t.preview_url?t.preview_url:t!=null&&t.file_url?t.file_url:t!=null&&t.url?t.url:null}async function p4({sessionId:t,message:e,fileIds:n,onEvent:s,onDone:r,onError:i,signal:o}){const a=t4(o);try{const l=t||`vc-session-${Date.now()}`;if(a()||(await ar(180),a()))return;const u=b0(e,!1),d=Z3(u,48);for(const h of d){if(a())return;s==null||s({type:"delta",content:h}),await ar(90)}if(a())return;s==null||s({type:"text_done",content:u}),n!=null&&n.length&&(s==null||s({type:"files",files:n.map((h,f)=>({file_id:h,filename:f===0?"Brief.pdf":`Attachment-${f+1}.pdf`,file_url:`https://example.com/mock-${h}.pdf`}))})),(e||"").toLowerCase().includes("approval")&&(s==null||s({type:"actions",actions:e4(J3[0].workflow_id)})),s==null||s({type:"done",session_id:l}),r==null||r()}catch(l){throw s==null||s({type:"error",message:(l==null?void 0:l.message)||"Stream failed"}),i==null||i(l),l}}async function m4(t){return r4(t)}async function g4(){return i4()}async function x4({file:t,message:e,sessionId:n}){return o4({file:t,message:e,sessionId:n})}async function y4({file:t}){return a4({file:t})}async function Vk({file:t,taskNumber:e}){return l4({file:t,taskNumber:e})}async function v4({command:t,args:e,sessionId:n}){return c4({command:t,args:e,sessionId:n})}async function b4({actionId:t,workflowId:e}){return u4({actionId:t,workflowId:e})}async function w4({formType:t,workflowId:e,category:n,reason:s}){return d4({formType:t,workflowId:e})}async function k4(t){return h4(t)}function _4(t){return f4(t)}async function S4({sessionId:t,message:e,fileIds:n,onEvent:s,onDone:r,onError:i,signal:o}){return p4({sessionId:t,message:e,fileIds:n,onEvent:s,onDone:r,onError:i,signal:o})}function Od(t,e,n){Array.isArray(n)&&n.filter(Boolean).forEach(s=>t.append(e,s))}async function j4({companies:t,activeOnly:e=!0}={}){const n=new URLSearchParams;Od(n,"companies",t),e!==void 0&&n.set("active_only",String(e));const s=n.toString();return Ie(`/api/assets/networks${s?`?${s}`:""}`)}async function C4({companies:t,networkId:e,activeOnly:n=!0}={}){const s=new URLSearchParams;Od(s,"companies",t),e!=null&&s.set("network_id",String(e)),n!==void 0&&s.set("active_only",String(n));const r=s.toString();return Ie(`/api/assets/asset-types${r?`?${r}`:""}`)}async function E4({companies:t,networkId:e,typeId:n,activeOnly:s=!0}={}){const r=new URLSearchParams;Od(r,"companies",t),e!=null&&r.set("network_id",String(e)),n!=null&&r.set("type_id",String(n)),s!==void 0&&r.set("active_only",String(s));const i=r.toString();return Ie(`/api/assets/network-assets${i?`?${i}`:""}`)}async function N4({companies:t,networkId:e,typeId:n,activeOnly:s=!0,includeEligibility:r=!1}={}){const i=new URLSearchParams;Od(i,"companies",t),e!=null&&i.set("network_id",String(e)),n!=null&&i.set("type_id",String(n)),s!==void 0&&i.set("active_only",String(s)),r!==void 0&&i.set("include_eligibility",String(r));const o=i.toString();return Ie(`/api/assets/locations${o?`?${o}`:""}`)}async function T4({companies:t,activeOnly:e=!0}={}){const n=new URLSearchParams;Od(n,"companies",t),e!==void 0&&n.set("active_only",String(e));const s=n.toString();return Ie(`/api/assets/packages${s?`?${s}`:""}`)}const P4={chat:{to:"/app/chat",label:"AI Chat Assistant",icon:BM},video_critique:{to:"/app/video-critique",label:"Video Critique",icon:hf},mockup:{to:"/app/mockup",label:"Mockup Assistant",icon:FM},proposals:{to:"/app/proposals",label:"Proposal Assistant",icon:WM},admin:{to:"/app/admin",label:"Admin",icon:qM},asset_management:{to:"/app/asset-management",label:"Asset Management",icon:HM},settings:{to:"/app/settings",label:"Settings",icon:KC}},R4=["chat","mockup","proposals","video_critique","admin","asset_management","settings"];function A4(t){return t.includes("/app/video-critique")?"Video Critique":t.includes("/app/chat")?"AI Chat Assistant":t.includes("/app/mockup")?"Mockup Assistant":t.includes("/app/proposals")?"Proposal Assistant":t.includes("/app/notifications")?"Notifications":t.includes("/app/admin")?"Admin Panel":t.includes("/app/asset-management")?"Asset Management":t.includes("/app/settings")?"Settings":"Workspace"}function O4(t){const e=[{name:"sales",tools:["chat","video_critique","mockup","proposals"],sort_order:1}];return Sd(t)&&e.push({name:"core",tools:["admin"],sort_order:100}),e}function M4(t,e){var a;const s=[...((a=t==null?void 0:t.modules)!=null&&a.length?t.modules:O4(e))||[]].sort((l,u)=>(l.sort_order||0)-(u.sort_order||0)),r=new Set;s.forEach(l=>{(l.tools||[]).forEach(u=>{r.add(u==="ai_costs"?"costs":u)})}),r.has("chat")&&r.add("video_critique"),Sd(e)&&(r.add("admin"),r.add("asset_management")),r.add("settings");const i=[],o=new Set;return R4.forEach(l=>{if(!r.has(l))return;const u=P4[l];u&&!o.has(u.to)&&(o.add(u.to),i.push(u))}),i}function I4(){const{user:t,logout:e}=oi(),n=sc(),s=wd(),[r,i]=v.useState(!1),[o,a]=v.useState(!1),l=an({queryKey:["modules","accessible"],queryFn:n3}),u=v.useMemo(()=>((t==null?void 0:t.name)||"User").split(" ").slice(0,2).map(f=>f[0]).join("").toUpperCase(),[t]),d=v.useMemo(()=>M4(l.data,t),[l.data,t]);return c.jsxs("div",{className:"h-screen flex flex-col overflow-hidden",children:[c.jsx("header",{className:"sticky top-0 z-40",children:c.jsx("div",{className:"w-full px-6 lg:px-10",children:c.jsx("div",{className:"mmg-header-card mt-4 rounded-2xl bg-white/65 dark:bg-white/5 backdrop-blur-md shadow-soft ring-1 ring-black/5 dark:ring-white/10",children:c.jsxs("div",{className:"flex items-center justify-between px-4 py-2 gap-3",children:[c.jsxs("div",{className:"flex items-end gap-3",children:[c.jsx(nE,{size:64}),c.jsx("div",{className:"hidden sm:block text-sm leading-none text-black/50 dark:text-white/60 relative -top-px",children:"|"}),c.jsx("div",{className:"hidden sm:block text-sm font-medium leading-none text-black/70 dark:text-white/70",children:A4(n.pathname)})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(te,{variant:"ghost",size:"icon",className:"rounded-2xl lg:hidden",onClick:()=>a(!0),title:"Open sidebar","aria-label":"Open sidebar",children:c.jsx(Vm,{size:18})}),c.jsx(e3,{}),c.jsx(CE,{}),c.jsxs(Xp,{children:[c.jsx(Jp,{asChild:!0,children:c.jsxs("button",{className:"flex items-center gap-2 rounded-2xl px-2.5 py-1.5 hover:bg-black/5 dark:hover:bg-white/10 transition-colors","aria-label":"User menu",children:[c.jsx("div",{className:"h-9 w-9 rounded-2xl bg-black/5 dark:bg-white/10 flex items-center justify-center shadow-soft",children:c.jsx("span",{className:"text-xs font-semibold",children:u})}),c.jsxs("div",{className:"hidden sm:flex flex-col items-start leading-tight",children:[c.jsx("span",{className:"mmg-brand-gold text-sm font-medium",children:t==null?void 0:t.name}),c.jsx("span",{className:"text-xs text-black/50 dark:text-white/60",children:t==null?void 0:t.email})]})]})}),c.jsxs(Rd,{align:"end",children:[c.jsx(JN,{children:c.jsxs("div",{className:"flex items-center justify-between gap-3",children:[c.jsx("span",{className:"truncate",children:t==null?void 0:t.email}),c.jsx("span",{className:"text-xs rounded-full px-2 py-0.5 bg-black/5 dark:bg-white/10",children:((t==null?void 0:t.roles)||[]).join(" | ")})]})}),c.jsx(lp,{}),c.jsxs(Vu,{onSelect:()=>s("/app/settings"),children:[c.jsx(KC,{size:16}),"Settings"]}),c.jsxs(Vu,{onSelect:()=>{e(),s("/")},children:[c.jsx(zM,{size:16}),"Logout"]})]})]})]})]})})})}),c.jsx(t3,{}),c.jsx("div",{className:"w-full px-6 lg:px-10 pb-4 flex-1 flex overflow-hidden min-w-0",children:c.jsxs("div",{className:Te("mt-4 grid grid-cols-1 gap-4 lg:grid-cols-[280px_1fr] flex-1 min-h-0 min-w-0","transition-[grid-template-columns] duration-500",r&&"lg:grid-cols-[64px_1fr] 2xl:grid-cols-[72px_1fr]"),children:[c.jsxs("aside",{className:Te("hidden lg:block rounded-2xl bg-white/55 dark:bg-white/5 backdrop-blur-md shadow-soft ring-1 ring-black/5 dark:ring-white/10","overflow-hidden"),children:[c.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[c.jsx("div",{className:Te("text-s ms-3 font-semibold tracking-wide text-black/50 dark:text-white/60",r&&"hidden lg:block lg:sr-only"),children:"Tools"}),c.jsx(te,{variant:"ghost",size:"icon",className:"rounded-2xl",onClick:()=>i(h=>!h),title:"Toggle sidebar","aria-label":"Toggle sidebar",children:c.jsx(Vm,{size:18})})]}),c.jsx("nav",{className:"px-2 pb-2",children:d.map(h=>{const f=n.pathname===h.to||n.pathname.startsWith(`${h.to}/`),p=h.icon;return c.jsxs("button",{onClick:()=>s(h.to),className:Te("mmg-nav-btn w-full flex items-center gap-3 rounded-2xl p-2 text-sm transition-colors mb-1.5 shadow-soft",f?"mmg-nav-btn-active":"","text-base",r&&"lg:justify-center lg:gap-0"),children:[c.jsx("span",{className:"mmg-nav-icon h-8 w-8 shrink-0 rounded-2xl bg-black/4 dark:bg-white/8 flex items-center justify-center shadow-soft",children:c.jsx(p,{size:22})}),c.jsx("span",{className:Te("min-w-0 truncate",r&&"hidden"),children:h.label})]},h.to)})}),c.jsx("div",{className:"px-3 pb-3 pt-1",children:c.jsx("div",{className:Te("h-px bg-black/5 dark:bg-white/10",r&&"lg:mx-auto lg:w-10")})})]}),c.jsx("main",{className:"min-h-0 min-w-0 h-full",children:c.jsx(FO,{})})]})}),c.jsxs("div",{className:Te("fixed inset-0 z-50 lg:hidden",o?"pointer-events-auto":"pointer-events-none"),children:[c.jsx("div",{className:Te("absolute inset-0 bg-black/40 transition-opacity",o?"opacity-100":"opacity-0"),onClick:()=>a(!1)}),c.jsxs("aside",{className:Te("absolute inset-y-0 left-0 w-72 max-w-full rounded-r-2xl bg-white/90 dark:bg-neutral-900/95","backdrop-blur-xl shadow-2xl ring-1 ring-black/10 dark:ring-white/10","transition-transform duration-200",o?"translate-x-0":"-translate-x-full"),children:[c.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[c.jsx("div",{className:"text-sm font-semibold tracking-wide text-black/60 dark:text-white/70",children:"Tools"}),c.jsx(te,{variant:"ghost",size:"icon",className:"rounded-2xl",onClick:()=>a(!1),title:"Close sidebar","aria-label":"Close sidebar",children:c.jsx(Vm,{size:18})})]}),c.jsx("nav",{className:"px-2 pb-3",children:d.map(h=>{const f=n.pathname===h.to||n.pathname.startsWith(`${h.to}/`),p=h.icon;return c.jsxs("button",{onClick:()=>{s(h.to),a(!1)},className:Te("mmg-nav-btn w-full flex items-center gap-2.5 rounded-2xl p-2.5 text-sm transition-colors mb-1.5 shadow-soft",f?"mmg-nav-btn-active":"","text-sm"),children:[c.jsx("span",{className:"mmg-nav-icon h-9 w-9 shrink-0 rounded-2xl bg-black/4 dark:bg-white/8 flex items-center justify-center shadow-soft",children:c.jsx(p,{size:20})}),c.jsx("span",{className:"min-w-0 truncate",children:h.label})]},h.to)})})]})]})]})}const em=0,go=1,uc=2,cT=4;function qk(t){return()=>t}function D4(t){t()}function uT(t,e){return n=>t(e(n))}function Kk(t,e){return()=>t(e)}function L4(t,e){return n=>t(e,n)}function w0(t){return t!==void 0}function $4(...t){return()=>{t.map(D4)}}function dc(){}function tm(t,e){return e(t),t}function F4(t,e){return e(t)}function Rt(...t){return t}function ut(t,e){return t(go,e)}function Ge(t,e){t(em,e)}function k0(t){t(uc)}function Mt(t){return t(cT)}function Pe(t,e){return ut(t,L4(e,em))}function sr(t,e){const n=t(go,s=>{n(),e(s)});return n}function Gk(t){let e,n;return s=>r=>{e=r,n&&clearTimeout(n),n=setTimeout(()=>{s(e)},t)}}function dT(t,e){return t===e}function Tt(t=dT){let e;return n=>s=>{t(e,s)||(e=s,n(s))}}function He(t){return e=>n=>{t(n)&&e(n)}}function ve(t){return e=>uT(e,t)}function _r(t){return e=>()=>{e(t)}}function ne(t,...e){const n=z4(...e);return(s,r)=>{switch(s){case uc:k0(t);return;case go:return ut(t,n(r))}}}function Nr(t,e){return n=>s=>{n(e=t(e,s))}}function ga(t){return e=>n=>{t>0?t--:e(n)}}function Jr(t){let e=null,n;return s=>r=>{e=r,!n&&(n=setTimeout(()=>{n=void 0,s(e)},t))}}function Qe(...t){const e=new Array(t.length);let n=0,s=null;const r=Math.pow(2,t.length)-1;return t.forEach((i,o)=>{const a=Math.pow(2,o);ut(i,l=>{const u=n;n=n|a,e[o]=l,u!==r&&n===r&&s&&(s(),s=null)})}),i=>o=>{const a=()=>{i([o].concat(e))};n===r?a():s=a}}function z4(...t){return e=>t.reduceRight(F4,e)}function B4(t){let e,n;const s=()=>e==null?void 0:e();return function(r,i){switch(r){case go:return i?n===i?void 0:(s(),n=i,e=ut(t,i),e):(s(),dc);case uc:s(),n=null;return}}}function ce(t){let e=t;const n=et();return(s,r)=>{switch(s){case em:e=r;break;case go:{r(e);break}case cT:return e}return n(s,r)}}function Nn(t,e){return tm(ce(e),n=>Pe(t,n))}function et(){const t=[];return(e,n)=>{switch(e){case em:t.slice().forEach(s=>{s(n)});return;case uc:t.splice(0,t.length);return;case go:return t.push(n),()=>{const s=t.indexOf(n);s>-1&&t.splice(s,1)}}}}function _s(t){return tm(et(),e=>Pe(t,e))}function lt(t,e=[],{singleton:n}={singleton:!0}){return{constructor:t,dependencies:e,id:U4(),singleton:n}}const U4=()=>Symbol();function H4(t){const e=new Map,n=({constructor:s,dependencies:r,id:i,singleton:o})=>{if(o&&e.has(i))return e.get(i);const a=s(r.map(l=>n(l)));return o&&e.set(i,a),a};return n(t)}function en(...t){const e=et(),n=new Array(t.length);let s=0;const r=Math.pow(2,t.length)-1;return t.forEach((i,o)=>{const a=Math.pow(2,o);ut(i,l=>{n[o]=l,s=s|a,s===r&&Ge(e,n)})}),function(i,o){switch(i){case uc:{k0(e);return}case go:return s===r&&o(n),ut(e,o)}}}function Ue(t,e=dT){return ne(t,Tt(e))}function ky(...t){return function(e,n){switch(e){case uc:return;case go:return $4(...t.map(s=>ut(s,n)))}}}var os=(t=>(t[t.DEBUG=0]="DEBUG",t[t.INFO=1]="INFO",t[t.WARN=2]="WARN",t[t.ERROR=3]="ERROR",t))(os||{});const W4={0:"debug",3:"error",1:"log",2:"warn"},V4=()=>typeof globalThis>"u"?window:globalThis,xo=lt(()=>{const t=ce(3);return{log:ce((e,n,s=1)=>{var r;const i=(r=V4().VIRTUOSO_LOG_LEVEL)!=null?r:Mt(t);s>=i&&console[W4[s]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",e,n)}),logLevel:t}},[],{singleton:!0});function ja(t,e,n){return _0(t,e,n).callbackRef}function _0(t,e,n){const s=ge.useRef(null);let r=o=>{};const i=ge.useMemo(()=>typeof ResizeObserver<"u"?new ResizeObserver(o=>{const a=()=>{const l=o[0].target;l.offsetParent!==null&&t(l)};n?a():requestAnimationFrame(a)}):null,[t,n]);return r=o=>{o&&e?(i==null||i.observe(o),s.current=o):(s.current&&(i==null||i.unobserve(s.current)),s.current=null)},{callbackRef:r,ref:s}}function q4(t,e,n,s,r,i,o,a,l){const u=ge.useCallback(d=>{const h=K4(d.children,e,a?"offsetWidth":"offsetHeight",r);let f=d.parentElement;for(;!f.dataset.virtuosoScroller;)f=f.parentElement;const p=f.lastElementChild.dataset.viewportType==="window";let w;p&&(w=f.ownerDocument.defaultView);const x=o?a?o.scrollLeft:o.scrollTop:p?a?w.scrollX||w.document.documentElement.scrollLeft:w.scrollY||w.document.documentElement.scrollTop:a?f.scrollLeft:f.scrollTop,y=o?a?o.scrollWidth:o.scrollHeight:p?a?w.document.documentElement.scrollWidth:w.document.documentElement.scrollHeight:a?f.scrollWidth:f.scrollHeight,g=o?a?o.offsetWidth:o.offsetHeight:p?a?w.innerWidth:w.innerHeight:a?f.offsetWidth:f.offsetHeight;s({scrollHeight:y,scrollTop:Math.max(x,0),viewportHeight:g}),i==null||i(a?Yk("column-gap",getComputedStyle(d).columnGap,r):Yk("row-gap",getComputedStyle(d).rowGap,r)),h!==null&&t(h)},[t,e,r,i,o,s,a]);return _0(u,n,l)}function K4(t,e,n,s){const r=t.length;if(r===0)return null;const i=[];for(let o=0;o<r;o++){const a=t.item(o);if(a.dataset.index===void 0)continue;const l=parseInt(a.dataset.index),u=parseFloat(a.dataset.knownSize),d=e(a,n);if(d===0&&s("Zero-sized element, this should not happen",{child:a},os.ERROR),d===u)continue;const h=i[i.length-1];i.length===0||h.size!==d||h.endIndex!==l-1?i.push({endIndex:l,size:d,startIndex:l}):i[i.length-1].endIndex++}return i}function Yk(t,e,n){return e!=="normal"&&!(e!=null&&e.endsWith("px"))&&n(`${t} was not resolved to pixel value correctly`,e,os.WARN),e==="normal"?0:parseInt(e??"0",10)}function hT(t,e,n){const s=ge.useRef(null),r=ge.useCallback(l=>{if(!(l!=null&&l.offsetParent))return;const u=l.getBoundingClientRect(),d=u.width;let h,f;if(e){const p=e.getBoundingClientRect(),w=u.top-p.top;f=p.height-Math.max(0,w),h=w+e.scrollTop}else{const p=o.current.ownerDocument.defaultView;f=p.innerHeight-Math.max(0,u.top),h=u.top+p.scrollY}s.current={offsetTop:h,visibleHeight:f,visibleWidth:d},t(s.current)},[t,e]),{callbackRef:i,ref:o}=_0(r,!0,n),a=ge.useCallback(()=>{r(o.current)},[r,o]);return ge.useEffect(()=>{var l;if(e){e.addEventListener("scroll",a);const u=new ResizeObserver(()=>{requestAnimationFrame(a)});return u.observe(e),()=>{e.removeEventListener("scroll",a),u.unobserve(e)}}else{const u=(l=o.current)==null?void 0:l.ownerDocument.defaultView;return u==null||u.addEventListener("scroll",a),u==null||u.addEventListener("resize",a),()=>{u==null||u.removeEventListener("scroll",a),u==null||u.removeEventListener("resize",a)}}},[a,e,o]),i}const Wn=lt(()=>{const t=et(),e=et(),n=ce(0),s=et(),r=ce(0),i=et(),o=et(),a=ce(0),l=ce(0),u=ce(0),d=ce(0),h=et(),f=et(),p=ce(!1),w=ce(!1),x=ce(!1);return Pe(ne(t,ve(({scrollTop:y})=>y)),e),Pe(ne(t,ve(({scrollHeight:y})=>y)),o),Pe(e,r),{deviation:n,fixedFooterHeight:u,fixedHeaderHeight:l,footerHeight:d,headerHeight:a,horizontalDirection:w,scrollBy:f,scrollContainerState:t,scrollHeight:o,scrollingInProgress:p,scrollTo:h,scrollTop:e,skipAnimationFrameInResizeObserver:x,smoothScrollTargetReached:s,statefulScrollTop:r,viewportHeight:i}},[],{singleton:!0}),Ku={lvl:0};function fT(t,e){const n=t.length;if(n===0)return[];let{index:s,value:r}=e(t[0]);const i=[];for(let o=1;o<n;o++){const{index:a,value:l}=e(t[o]);i.push({end:a-1,start:s,value:r}),s=a,r=l}return i.push({end:1/0,start:s,value:r}),i}function vt(t){return t===Ku}function Gu(t,e){if(!vt(t))return e===t.k?t.v:e<t.k?Gu(t.l,e):Gu(t.r,e)}function lr(t,e,n="k"){if(vt(t))return[-1/0,void 0];if(Number(t[n])===e)return[t.k,t.v];if(Number(t[n])<e){const s=lr(t.r,e,n);return s[0]===-1/0?[t.k,t.v]:s}return lr(t.l,e,n)}function ys(t,e,n){return vt(t)?gT(e,n,1):e===t.k?on(t,{k:e,v:n}):e<t.k?Qk(on(t,{l:ys(t.l,e,n)})):Qk(on(t,{r:ys(t.r,e,n)}))}function Sl(){return Ku}function jl(t,e,n){if(vt(t))return[];const s=lr(t,e)[0];return G4(Sy(t,s,n))}function _y(t,e){if(vt(t))return Ku;const{k:n,l:s,r}=t;if(e===n){if(vt(s))return r;if(vt(r))return s;{const[i,o]=mT(s);return yf(on(t,{k:i,l:pT(s),v:o}))}}else return e<n?yf(on(t,{l:_y(s,e)})):yf(on(t,{r:_y(r,e)}))}function Wo(t){return vt(t)?[]:[...Wo(t.l),{k:t.k,v:t.v},...Wo(t.r)]}function Sy(t,e,n){if(vt(t))return[];const{k:s,l:r,r:i,v:o}=t;let a=[];return s>e&&(a=a.concat(Sy(r,e,n))),s>=e&&s<=n&&a.push({k:s,v:o}),s<=n&&(a=a.concat(Sy(i,e,n))),a}function yf(t){const{l:e,lvl:n,r:s}=t;if(s.lvl>=n-1&&e.lvl>=n-1)return t;if(n>s.lvl+1){if(yg(e))return xT(on(t,{lvl:n-1}));if(!vt(e)&&!vt(e.r))return on(e.r,{l:on(e,{r:e.r.l}),lvl:n,r:on(t,{l:e.r.r,lvl:n-1})});throw new Error("Unexpected empty nodes")}else{if(yg(t))return jy(on(t,{lvl:n-1}));if(!vt(s)&&!vt(s.l)){const r=s.l,i=yg(r)?s.lvl-1:s.lvl;return on(r,{l:on(t,{lvl:n-1,r:r.l}),lvl:r.lvl+1,r:jy(on(s,{l:r.r,lvl:i}))})}else throw new Error("Unexpected empty nodes")}}function on(t,e){return gT(e.k!==void 0?e.k:t.k,e.v!==void 0?e.v:t.v,e.lvl!==void 0?e.lvl:t.lvl,e.l!==void 0?e.l:t.l,e.r!==void 0?e.r:t.r)}function pT(t){return vt(t.r)?t.l:yf(on(t,{r:pT(t.r)}))}function yg(t){return vt(t)||t.lvl>t.r.lvl}function mT(t){return vt(t.r)?[t.k,t.v]:mT(t.r)}function gT(t,e,n,s=Ku,r=Ku){return{k:t,l:s,lvl:n,r,v:e}}function Qk(t){return jy(xT(t))}function xT(t){const{l:e}=t;return!vt(e)&&e.lvl===t.lvl?on(e,{r:on(t,{l:e.r})}):t}function jy(t){const{lvl:e,r:n}=t;return!vt(n)&&!vt(n.r)&&n.lvl===e&&n.r.lvl===e?on(n,{l:on(t,{r:n.l}),lvl:e+1}):t}function G4(t){return fT(t,({k:e,v:n})=>({index:e,value:n}))}function yT(t,e){return!!(t&&t.startIndex===e.startIndex&&t.endIndex===e.endIndex)}function Yu(t,e){return!!(t&&t[0]===e[0]&&t[1]===e[1])}const S0=lt(()=>({recalcInProgress:ce(!1)}),[],{singleton:!0});function vT(t,e,n){return t[cp(t,e,n)]}function cp(t,e,n,s=0){let r=t.length-1;for(;s<=r;){const i=Math.floor((s+r)/2),o=t[i],a=n(o,e);if(a===0)return i;if(a===-1){if(r-s<2)return i-1;r=i-1}else{if(r===s)return i;s=i+1}}throw new Error(`Failed binary finding record in array - ${t.join(",")}, searched for ${e}`)}function Y4(t,e,n,s){const r=cp(t,e,s),i=cp(t,n,s,r);return t.slice(r,i+1)}function co(t,e){return Math.round(t.getBoundingClientRect()[e])}function nm(t){return!vt(t.groupOffsetTree)}function j0({index:t},e){return e===t?0:e<t?-1:1}function Q4(){return{groupIndices:[],groupOffsetTree:Sl(),lastIndex:0,lastOffset:0,lastSize:0,offsetTree:[],sizeTree:Sl()}}function X4(t,e){let n=vt(t)?0:1/0;for(const s of e){const{endIndex:r,size:i,startIndex:o}=s;if(n=Math.min(n,o),vt(t)){t=ys(t,0,i);continue}const a=jl(t,o-1,r+1);if(a.some(rU(s)))continue;let l=!1,u=!1;for(const{end:d,start:h,value:f}of a)l?(r>=h||i===f)&&(t=_y(t,h)):(u=f!==i,l=!0),d>r&&r>=h&&f!==i&&(t=ys(t,r+1,f));u&&(t=ys(t,o,i))}return[t,n]}function J4(t){return typeof t.groupIndex<"u"}function Z4({offset:t},e){return e===t?0:e<t?-1:1}function Qu(t,e,n){if(e.length===0)return 0;const{index:s,offset:r,size:i}=vT(e,t,j0),o=t-s,a=i*o+(o-1)*n+r;return a>0?a+n:a}function bT(t,e){if(!nm(e))return t;let n=0;for(;e.groupIndices[n]<=t+n;)n++;return t+n}function wT(t,e,n){if(J4(t))return e.groupIndices[t.groupIndex]+1;{const s=t.index==="LAST"?n:t.index;let r=bT(s,e);return r=Math.max(0,r,Math.min(n,r)),r}}function eU(t,e,n,s=0){return s>0&&(e=Math.max(e,vT(t,s,j0).offset)),fT(Y4(t,e,n,Z4),sU)}function tU(t,[e,n,s,r]){e.length>0&&s("received item sizes",e,os.DEBUG);const i=t.sizeTree;let o=i,a=0;if(n.length>0&&vt(i)&&e.length===2){const f=e[0].size,p=e[1].size;o=n.reduce((w,x)=>ys(ys(w,x,f),x+1,p),o)}else[o,a]=X4(o,e);if(o===i)return t;const{lastIndex:l,lastOffset:u,lastSize:d,offsetTree:h}=Cy(t.offsetTree,a,o,r);return{groupIndices:n,groupOffsetTree:n.reduce((f,p)=>ys(f,p,Qu(p,h,r)),Sl()),lastIndex:l,lastOffset:u,lastSize:d,offsetTree:h,sizeTree:o}}function nU(t){return Wo(t).map(({k:e,v:n},s,r)=>{const i=r[s+1];return{endIndex:i?i.k-1:1/0,size:n,startIndex:e}})}function Xk(t,e){let n=0,s=0;for(;n<t;)n+=e[s+1]-e[s]-1,s++;return s-(n===t?0:1)}function Cy(t,e,n,s){let r=t,i=0,o=0,a=0,l=0;if(e!==0){l=cp(r,e-1,j0),a=r[l].offset;const u=lr(n,e-1);i=u[0],o=u[1],r.length&&r[l].size===lr(n,e)[1]&&(l-=1),r=r.slice(0,l+1)}else r=[];for(const{start:u,value:d}of jl(n,e,1/0)){const h=u-i,f=h*o+a+h*s;r.push({index:u,offset:f,size:d}),i=u,a=f,o=d}return{lastIndex:i,lastOffset:a,lastSize:o,offsetTree:r}}function sU(t){return{index:t.index,value:t}}function rU(t){const{endIndex:e,size:n,startIndex:s}=t;return r=>r.start===s&&(r.end===e||r.end===1/0)&&r.value===n}const iU={offsetHeight:"height",offsetWidth:"width"},Ir=lt(([{log:t},{recalcInProgress:e}])=>{const n=et(),s=et(),r=Nn(s,0),i=et(),o=et(),a=ce(0),l=ce([]),u=ce(void 0),d=ce(void 0),h=ce(void 0),f=ce(void 0),p=ce((S,j)=>co(S,iU[j])),w=ce(void 0),x=ce(0),y=Q4(),g=Nn(ne(n,Qe(l,t,x),Nr(tU,y),Tt()),y),m=Nn(ne(l,Tt(),Nr((S,j)=>({current:j,prev:S.current}),{current:[],prev:[]}),ve(({prev:S})=>S)),[]);Pe(ne(l,He(S=>S.length>0),Qe(g,x),ve(([S,j,N])=>{const T=S.reduce((L,D,O)=>ys(L,D,Qu(D,j.offsetTree,N)||O),Sl());return{...j,groupIndices:S,groupOffsetTree:T}})),g),Pe(ne(s,Qe(g),He(([S,{lastIndex:j}])=>S<j),ve(([S,{lastIndex:j,lastSize:N}])=>[{endIndex:j,size:N,startIndex:S}])),n),Pe(u,d);const b=Nn(ne(u,ve(S=>S===void 0)),!0);Pe(ne(d,He(S=>S!==void 0&&vt(Mt(g).sizeTree)),ve(S=>{const j=Mt(h),N=Mt(l).length>0;return j?N?[{endIndex:0,size:j,startIndex:0},{endIndex:1,size:S,startIndex:1}]:[]:[{endIndex:0,size:S,startIndex:0}]})),n),Pe(ne(f,He(S=>S!==void 0&&S.length>0&&vt(Mt(g).sizeTree)),ve(S=>{const j=[];let N=S[0],T=0;for(let L=1;L<S.length;L++){const D=S[L];D!==N&&(j.push({endIndex:L-1,size:N,startIndex:T}),N=D,T=L)}return j.push({endIndex:S.length-1,size:N,startIndex:T}),j})),n),Pe(ne(l,Qe(h,d),He(([,S,j])=>S!==void 0&&j!==void 0),ve(([S,j,N])=>{const T=[];for(let L=0;L<S.length;L++){const D=S[L],O=S[L+1];T.push({startIndex:D,endIndex:D,size:j}),O!==void 0&&T.push({startIndex:D+1,endIndex:O-1,size:N})}return T})),n);const k=_s(ne(n,Qe(g),Nr(({sizes:S},[j,N])=>({changed:N!==S,sizes:N}),{changed:!1,sizes:y}),ve(S=>S.changed)));ut(ne(a,Nr((S,j)=>({diff:S.prev-j,prev:j}),{diff:0,prev:0}),ve(S=>S.diff)),S=>{const{groupIndices:j}=Mt(g);if(S>0)Ge(e,!0),Ge(i,S+Xk(S,j));else if(S<0){const N=Mt(m);N.length>0&&(S-=Xk(-S,N)),Ge(o,S)}}),ut(ne(a,Qe(t)),([S,j])=>{S<0&&j("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:a},os.ERROR)});const _=_s(i);Pe(ne(i,Qe(g),ve(([S,j])=>{const N=j.groupIndices.length>0,T=[],L=j.lastSize;if(N){const D=Gu(j.sizeTree,0);let O=0,$=0;for(;O<S;){const A=j.groupIndices[$],W=j.groupIndices.length===$+1?1/0:j.groupIndices[$+1]-A-1;T.push({endIndex:A,size:D,startIndex:A}),T.push({endIndex:A+1+W-1,size:L,startIndex:A+1}),$++,O+=W+1}const I=Wo(j.sizeTree);return O!==S&&I.shift(),I.reduce((A,{k:W,v:E})=>{let P=A.ranges;return A.prevSize!==0&&(P=[...A.ranges,{endIndex:W+S-1,size:A.prevSize,startIndex:A.prevIndex}]),{prevIndex:W+S,prevSize:E,ranges:P}},{prevIndex:S,prevSize:0,ranges:T}).ranges}return Wo(j.sizeTree).reduce((D,{k:O,v:$})=>({prevIndex:O+S,prevSize:$,ranges:[...D.ranges,{endIndex:O+S-1,size:D.prevSize,startIndex:D.prevIndex}]}),{prevIndex:0,prevSize:L,ranges:[]}).ranges})),n);const C=_s(ne(o,Qe(g,x),ve(([S,{offsetTree:j},N])=>{const T=-S;return Qu(T,j,N)})));return Pe(ne(o,Qe(g,x),ve(([S,j,N])=>{if(j.groupIndices.length>0){if(vt(j.sizeTree))return j;let T=Sl();const L=Mt(m);let D=0,O=0,$=0;for(;D<-S;){$=L[O];const I=L[O+1]-$-1;O++,D+=I+1}if(T=Wo(j.sizeTree).reduce((I,{k:A,v:W})=>ys(I,Math.max(0,A+S),W),T),D!==-S){const I=Gu(j.sizeTree,$);T=ys(T,0,I);const A=lr(j.sizeTree,-S+1)[1];T=ys(T,1,A)}return{...j,sizeTree:T,...Cy(j.offsetTree,0,T,N)}}else{const T=Wo(j.sizeTree).reduce((L,{k:D,v:O})=>ys(L,Math.max(0,D+S),O),Sl());return{...j,sizeTree:T,...Cy(j.offsetTree,0,T,N)}}})),g),{beforeUnshiftWith:_,data:w,defaultItemSize:d,firstItemIndex:a,fixedItemSize:u,fixedGroupSize:h,gap:x,groupIndices:l,heightEstimates:f,itemSize:p,listRefresh:k,shiftWith:o,shiftWithOffset:C,sizeRanges:n,sizes:g,statefulTotalCount:r,totalCount:s,trackItemSizes:b,unshiftWith:i}},Rt(xo,S0),{singleton:!0});function oU(t){return t.reduce((e,n)=>(e.groupIndices.push(e.totalCount),e.totalCount+=n+1,e),{groupIndices:[],totalCount:0})}const kT=lt(([{groupIndices:t,sizes:e,totalCount:n},{headerHeight:s,scrollTop:r}])=>{const i=et(),o=et(),a=_s(ne(i,ve(oU)));return Pe(ne(a,ve(l=>l.totalCount)),n),Pe(ne(a,ve(l=>l.groupIndices)),t),Pe(ne(en(r,e,s),He(([l,u])=>nm(u)),ve(([l,u,d])=>lr(u.groupOffsetTree,Math.max(l-d,0),"v")[0]),Tt(),ve(l=>[l])),o),{groupCounts:i,topItemsIndexes:o}},Rt(Ir,Wn)),yo=lt(([{log:t}])=>{const e=ce(!1),n=_s(ne(e,He(s=>s),Tt()));return ut(e,s=>{s&&Mt(t)("props updated",{},os.DEBUG)}),{didMount:n,propsReady:e}},Rt(xo),{singleton:!0}),aU=typeof document<"u"&&"scrollBehavior"in document.documentElement.style;function _T(t){const e=typeof t=="number"?{index:t}:t;return e.align||(e.align="start"),(!e.behavior||!aU)&&(e.behavior="auto"),e.offset||(e.offset=0),e}const Md=lt(([{gap:t,listRefresh:e,sizes:n,totalCount:s},{fixedFooterHeight:r,fixedHeaderHeight:i,footerHeight:o,headerHeight:a,scrollingInProgress:l,scrollTo:u,smoothScrollTargetReached:d,viewportHeight:h},{log:f}])=>{const p=et(),w=et(),x=ce(0);let y=null,g=null,m=null;function b(){y&&(y(),y=null),m&&(m(),m=null),g&&(clearTimeout(g),g=null),Ge(l,!1)}return Pe(ne(p,Qe(n,h,s,x,a,o,f),Qe(t,i,r),ve(([[k,_,C,S,j,N,T,L],D,O,$])=>{const I=_T(k),{align:A,behavior:W,offset:E}=I,P=S-1,F=wT(I,_,P);let V=Qu(F,_.offsetTree,D)+N;A==="end"?(V+=O+lr(_.sizeTree,F)[1]-C+$,F===P&&(V+=T)):A==="center"?V+=(O+lr(_.sizeTree,F)[1]-C+$)/2:V-=j,E&&(V+=E);const H=he=>{b(),he?(L("retrying to scroll to",{location:k},os.DEBUG),Ge(p,k)):(Ge(w,!0),L("list did not change, scroll successful",{},os.DEBUG))};if(b(),W==="smooth"){let he=!1;m=ut(e,ee=>{he=he||ee}),y=sr(d,()=>{H(he)})}else y=sr(ne(e,lU(150)),H);return g=setTimeout(()=>{b()},1200),Ge(l,!0),L("scrolling from index to",{behavior:W,index:F,top:V},os.DEBUG),{behavior:W,top:V}})),u),{scrollTargetReached:w,scrollToIndex:p,topListHeight:x}},Rt(Ir,Wn,xo),{singleton:!0});function lU(t){return e=>{const n=setTimeout(()=>{e(!1)},t);return s=>{s&&(e(!0),clearTimeout(n))}}}function C0(t,e){t==0?e():requestAnimationFrame(()=>{C0(t-1,e)})}function E0(t,e){const n=e-1;return typeof t=="number"?t:t.index==="LAST"?n:t.index}const Id=lt(([{defaultItemSize:t,listRefresh:e,sizes:n},{scrollTop:s},{scrollTargetReached:r,scrollToIndex:i},{didMount:o}])=>{const a=ce(!0),l=ce(0),u=ce(!0);return Pe(ne(o,Qe(l),He(([d,h])=>!!h),_r(!1)),a),Pe(ne(o,Qe(l),He(([d,h])=>!!h),_r(!1)),u),ut(ne(en(e,o),Qe(a,n,t,u),He(([[,d],h,{sizeTree:f},p,w])=>d&&(!vt(f)||w0(p))&&!h&&!w),Qe(l)),([,d])=>{sr(r,()=>{Ge(u,!0)}),C0(4,()=>{sr(s,()=>{Ge(a,!0)}),Ge(i,d)})}),{initialItemFinalLocationReached:u,initialTopMostItemIndex:l,scrolledToInitialItem:a}},Rt(Ir,Wn,Md,yo),{singleton:!0});function ST(t,e){return Math.abs(t-e)<1.01}const Xu="up",lu="down",cU="none",uU={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollHeight:0,scrollTop:0,viewportHeight:0}},dU=0,Dd=lt(([{footerHeight:t,headerHeight:e,scrollBy:n,scrollContainerState:s,scrollTop:r,viewportHeight:i}])=>{const o=ce(!1),a=ce(!0),l=et(),u=et(),d=ce(4),h=ce(dU),f=Nn(ne(ky(ne(Ue(r),ga(1),_r(!0)),ne(Ue(r),ga(1),_r(!1),Gk(100))),Tt()),!1),p=Nn(ne(ky(ne(n,_r(!0)),ne(n,_r(!1),Gk(200))),Tt()),!1);Pe(ne(en(Ue(r),Ue(h)),ve(([m,b])=>m<=b),Tt()),a),Pe(ne(a,Jr(50)),u);const w=_s(ne(en(s,Ue(i),Ue(e),Ue(t),Ue(d)),Nr((m,[{scrollHeight:b,scrollTop:k},_,C,S,j])=>{const N=k+_-b>-j,T={scrollHeight:b,scrollTop:k,viewportHeight:_};if(N){let D,O;return k>m.state.scrollTop?(D="SCROLLED_DOWN",O=m.state.scrollTop-k):(D="SIZE_DECREASED",O=m.state.scrollTop-k||m.scrollTopDelta),{atBottom:!0,atBottomBecause:D,scrollTopDelta:O,state:T}}let L;return T.scrollHeight>m.state.scrollHeight?L="SIZE_INCREASED":_<m.state.viewportHeight?L="VIEWPORT_HEIGHT_DECREASING":k<m.state.scrollTop?L="SCROLLING_UPWARDS":L="NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:L,state:T}},uU),Tt((m,b)=>m&&m.atBottom===b.atBottom))),x=Nn(ne(s,Nr((m,{scrollHeight:b,scrollTop:k,viewportHeight:_})=>{if(ST(m.scrollHeight,b))return{changed:!1,jump:0,scrollHeight:b,scrollTop:k};{const C=b-(k+_)<1;return m.scrollTop!==k&&C?{changed:!0,jump:m.scrollTop-k,scrollHeight:b,scrollTop:k}:{changed:!0,jump:0,scrollHeight:b,scrollTop:k}}},{changed:!1,jump:0,scrollHeight:0,scrollTop:0}),He(m=>m.changed),ve(m=>m.jump)),0);Pe(ne(w,ve(m=>m.atBottom)),o),Pe(ne(o,Jr(50)),l);const y=ce(lu);Pe(ne(s,ve(({scrollTop:m})=>m),Tt(),Nr((m,b)=>Mt(p)?{direction:m.direction,prevScrollTop:b}:{direction:b<m.prevScrollTop?Xu:lu,prevScrollTop:b},{direction:lu,prevScrollTop:0}),ve(m=>m.direction)),y),Pe(ne(s,Jr(50),_r(cU)),y);const g=ce(0);return Pe(ne(f,He(m=>!m),_r(0)),g),Pe(ne(r,Jr(100),Qe(f),He(([m,b])=>b),Nr(([m,b],[k])=>[b,k],[0,0]),ve(([m,b])=>b-m)),g),{atBottomState:w,atBottomStateChange:l,atBottomThreshold:d,atTopStateChange:u,atTopThreshold:h,isAtBottom:o,isAtTop:a,isScrolling:f,lastJumpDueToItemResize:x,scrollDirection:y,scrollVelocity:g}},Rt(Wn)),Ju="top",Zu="bottom",Jk="none";function Zk(t,e,n){return typeof t=="number"?n===Xu&&e===Ju||n===lu&&e===Zu?t:0:n===Xu?e===Ju?t.main:t.reverse:e===Zu?t.main:t.reverse}function e_(t,e){var n;return typeof t=="number"?t:(n=t[e])!=null?n:0}const N0=lt(([{deviation:t,fixedHeaderHeight:e,headerHeight:n,scrollTop:s,viewportHeight:r}])=>{const i=et(),o=ce(0),a=ce(0),l=ce(0),u=Nn(ne(en(Ue(s),Ue(r),Ue(n),Ue(i,Yu),Ue(l),Ue(o),Ue(e),Ue(t),Ue(a)),ve(([d,h,f,[p,w],x,y,g,m,b])=>{const k=d-m,_=y+g,C=Math.max(f-k,0);let S=Jk;const j=e_(b,Ju),N=e_(b,Zu);return p-=m,p+=f+g,w+=f+g,w-=m,p>d+_-j&&(S=Xu),w<d-C+h+N&&(S=lu),S!==Jk?[Math.max(k-f-Zk(x,Ju,S)-j,0),k-C-g+h+Zk(x,Zu,S)+N]:null}),He(d=>d!=null),Tt(Yu)),[0,0]);return{increaseViewportBy:a,listBoundary:i,overscan:l,topListHeight:o,visibleRange:u}},Rt(Wn),{singleton:!0});function hU(t,e,n){if(nm(e)){const s=bT(t,e);return[{index:lr(e.groupOffsetTree,s)[0],offset:0,size:0},{data:n==null?void 0:n[0],index:s,offset:0,size:0}]}return[{data:n==null?void 0:n[0],index:t,offset:0,size:0}]}const vg={bottom:0,firstItemIndex:0,items:[],offsetBottom:0,offsetTop:0,top:0,topItems:[],topListHeight:0,totalCount:0};function vf(t,e,n,s,r,i){const{lastIndex:o,lastOffset:a,lastSize:l}=r;let u=0,d=0;if(t.length>0){u=t[0].offset;const x=t[t.length-1];d=x.offset+x.size}const h=n-o,f=a+h*l+(h-1)*s,p=u,w=f-d;return{bottom:d,firstItemIndex:i,items:t_(t,r,i),offsetBottom:w,offsetTop:u,top:p,topItems:t_(e,r,i),topListHeight:e.reduce((x,y)=>y.size+x,0),totalCount:n}}function jT(t,e,n,s,r,i){let o=0;if(n.groupIndices.length>0)for(const d of n.groupIndices){if(d-o>=t)break;o++}const a=t+o,l=E0(e,a),u=Array.from({length:a}).map((d,h)=>({data:i[h+l],index:h+l,offset:0,size:0}));return vf(u,[],a,r,n,s)}function t_(t,e,n){if(t.length===0)return[];if(!nm(e))return t.map(u=>({...u,index:u.index+n,originalIndex:u.index}));const s=t[0].index,r=t[t.length-1].index,i=[],o=jl(e.groupOffsetTree,s,r);let a,l=0;for(const u of t){(!a||a.end<u.index)&&(a=o.shift(),l=e.groupIndices.indexOf(a.start));let d;u.index===a.start?d={index:l,type:"group"}:d={groupIndex:l,index:u.index-(l+1)+n},i.push({...d,data:u.data,offset:u.offset,originalIndex:u.index,size:u.size})}return i}function n_(t,e){var n;return t===void 0?0:typeof t=="number"?t:(n=t[e])!=null?n:0}const Ca=lt(([{data:t,firstItemIndex:e,gap:n,sizes:s,totalCount:r},i,{listBoundary:o,topListHeight:a,visibleRange:l},{initialTopMostItemIndex:u,scrolledToInitialItem:d},{topListHeight:h},f,{didMount:p},{recalcInProgress:w}])=>{const x=ce([]),y=ce(0),g=et(),m=ce(0);Pe(i.topItemsIndexes,x);const b=Nn(ne(en(p,w,Ue(l,Yu),Ue(r),Ue(s),Ue(u),d,Ue(x),Ue(e),Ue(n),Ue(m),t),He(([S,j,,N,,,,,,,,T])=>{const L=T&&T.length!==N;return S&&!j&&!L}),ve(([,,[S,j],N,T,L,D,O,$,I,A,W])=>{var E,P,F,V;const H=T,{offsetTree:he,sizeTree:ee}=H,U=Mt(y);if(N===0)return{...vg,totalCount:N};if(S===0&&j===0)return U===0?{...vg,totalCount:N}:jT(U,L,T,$,I,W||[]);if(vt(ee))return U>0?null:vf(hU(E0(L,N),H,W),[],N,I,H,$);const Q=[];if(O.length>0){const De=O[0],J=O[O.length-1];let pe=0;for(const ie of jl(ee,De,J)){const K=ie.value,G=Math.max(ie.start,De),le=Math.min(ie.end,J);for(let Y=G;Y<=le;Y++)Q.push({data:W==null?void 0:W[Y],index:Y,offset:pe,size:K}),pe+=K}}if(!D)return vf([],Q,N,I,H,$);const de=O.length>0?O[O.length-1]+1:0,Z=eU(he,S,j,de);if(Z.length===0)return null;const be=N-1,Ae=tm([],De=>{for(const J of Z){const pe=J.value;let ie=pe.offset,K=J.start;const G=pe.size;if(pe.offset<S){K+=Math.floor((S-pe.offset+I)/(G+I));const Y=K-J.start;ie+=Y*G+Y*I}K<de&&(ie+=(de-K)*G,K=de);const le=Math.min(J.end,be);for(let Y=K;Y<=le&&!(ie>=j);Y++)De.push({data:W==null?void 0:W[Y],index:Y,offset:ie,size:G}),ie+=G+I}}),me=n_(A,Ju),fe=n_(A,Zu);if(Ae.length>0&&(me>0||fe>0)){const De=Ae[0],J=Ae[Ae.length-1];if(me>0&&De.index>de){const pe=Math.min(me,De.index-de),ie=[];let K=De.offset;for(let G=De.index-1;G>=De.index-pe;G--){const le=(P=(E=jl(ee,G,G)[0])==null?void 0:E.value)!=null?P:De.size;K-=le+I,ie.unshift({data:W==null?void 0:W[G],index:G,offset:K,size:le})}Ae.unshift(...ie)}if(fe>0&&J.index<be){const pe=Math.min(fe,be-J.index);let ie=J.offset+J.size+I;for(let K=J.index+1;K<=J.index+pe;K++){const G=(V=(F=jl(ee,K,K)[0])==null?void 0:F.value)!=null?V:J.size;Ae.push({data:W==null?void 0:W[K],index:K,offset:ie,size:G}),ie+=G+I}}}return vf(Ae,Q,N,I,H,$)}),He(S=>S!==null),Tt()),vg);Pe(ne(t,He(w0),ve(S=>S==null?void 0:S.length)),r),Pe(ne(b,ve(S=>S.topListHeight)),h),Pe(h,a),Pe(ne(b,ve(S=>[S.top,S.bottom])),o),Pe(ne(b,ve(S=>S.items)),g);const k=_s(ne(b,He(({items:S})=>S.length>0),Qe(r,t),He(([{items:S},j])=>S[S.length-1].originalIndex===j-1),ve(([,S,j])=>[S-1,j]),Tt(Yu),ve(([S])=>S))),_=_s(ne(b,Jr(200),He(({items:S,topItems:j})=>S.length>0&&S[0].originalIndex===j.length),ve(({items:S})=>S[0].index),Tt())),C=_s(ne(b,He(({items:S})=>S.length>0),ve(({items:S})=>{let j=0,N=S.length-1;for(;S[j].type==="group"&&j<N;)j++;for(;S[N].type==="group"&&N>j;)N--;return{endIndex:S[N].index,startIndex:S[j].index}}),Tt(yT)));return{endReached:k,initialItemCount:y,itemsRendered:g,listState:b,minOverscanItemCount:m,rangeChanged:C,startReached:_,topItemsIndexes:x,...f}},Rt(Ir,kT,N0,Id,Md,Dd,yo,S0),{singleton:!0}),CT=lt(([{fixedFooterHeight:t,fixedHeaderHeight:e,footerHeight:n,headerHeight:s},{listState:r}])=>{const i=et(),o=Nn(ne(en(n,t,s,e,r),ve(([a,l,u,d,h])=>a+l+u+d+h.offsetBottom+h.bottom)),0);return Pe(Ue(o),i),{totalListHeight:o,totalListHeightChanged:i}},Rt(Wn,Ca),{singleton:!0}),fU=lt(([{viewportHeight:t},{totalListHeight:e}])=>{const n=ce(!1),s=Nn(ne(en(n,t,e),He(([r])=>r),ve(([,r,i])=>Math.max(0,r-i)),Jr(0),Tt()),0);return{alignToBottom:n,paddingTopAddition:s}},Rt(Wn,CT),{singleton:!0}),ET=lt(()=>({context:ce(null)})),pU=({itemBottom:t,itemTop:e,locationParams:{align:n,behavior:s,...r},viewportBottom:i,viewportTop:o})=>e<o?{...r,align:n??"start",behavior:s}:t>i?{...r,align:n??"end",behavior:s}:null,NT=lt(([{gap:t,sizes:e,totalCount:n},{fixedFooterHeight:s,fixedHeaderHeight:r,headerHeight:i,scrollingInProgress:o,scrollTop:a,viewportHeight:l},{scrollToIndex:u}])=>{const d=et();return Pe(ne(d,Qe(e,l,n,i,r,s,a),Qe(t),ve(([[h,f,p,w,x,y,g,m],b])=>{const{align:k,behavior:_,calculateViewLocation:C=pU,done:S,...j}=h,N=wT(h,f,w-1),T=Qu(N,f.offsetTree,b)+x+y,L=T+lr(f.sizeTree,N)[1],D=m+y,O=m+p-g,$=C({itemBottom:L,itemTop:T,locationParams:{align:k,behavior:_,...j},viewportBottom:O,viewportTop:D});return $?S&&sr(ne(o,He(I=>!I),ga(Mt(o)?1:2)),S):S==null||S(),$}),He(h=>h!==null)),u),{scrollIntoView:d}},Rt(Ir,Wn,Md,Ca,xo),{singleton:!0});function s_(t){return t?t==="smooth"?"smooth":"auto":!1}const mU=(t,e)=>typeof t=="function"?s_(t(e)):e&&s_(t),gU=lt(([{listRefresh:t,totalCount:e,fixedItemSize:n,data:s},{atBottomState:r,isAtBottom:i},{scrollToIndex:o},{scrolledToInitialItem:a},{didMount:l,propsReady:u},{log:d},{scrollingInProgress:h},{context:f},{scrollIntoView:p}])=>{const w=ce(!1),x=et();let y=null;function g(_){Ge(o,{align:"end",behavior:_,index:"LAST"})}ut(ne(en(ne(Ue(e),ga(1)),l),Qe(Ue(w),i,a,h),ve(([[_,C],S,j,N,T])=>{let L=C&&N,D="auto";return L&&(D=mU(S,j||T),L=L&&!!D),{followOutputBehavior:D,shouldFollow:L,totalCount:_}}),He(({shouldFollow:_})=>_)),({followOutputBehavior:_,totalCount:C})=>{y&&(y(),y=null),Mt(n)?requestAnimationFrame(()=>{Mt(d)("following output to ",{totalCount:C},os.DEBUG),g(_)}):y=sr(t,()=>{Mt(d)("following output to ",{totalCount:C},os.DEBUG),g(_),y=null})});function m(_){const C=sr(r,S=>{_&&!S.atBottom&&S.notAtBottomBecause==="SIZE_INCREASED"&&!y&&(Mt(d)("scrolling to bottom due to increased size",{},os.DEBUG),g("auto"))});setTimeout(C,100)}ut(ne(en(Ue(w),e,u),He(([_,,C])=>_&&C),Nr(({value:_},[,C])=>({refreshed:_===C,value:C}),{refreshed:!1,value:0}),He(({refreshed:_})=>_),Qe(w,e)),([,_])=>{Mt(a)&&m(_!==!1)}),ut(x,()=>{m(Mt(w)!==!1)}),ut(en(Ue(w),r),([_,C])=>{_&&!C.atBottom&&C.notAtBottomBecause==="VIEWPORT_HEIGHT_DECREASING"&&g("auto")});const b=ce(null),k=et();return Pe(ky(ne(Ue(s),ve(_=>{var C;return(C=_==null?void 0:_.length)!=null?C:0})),ne(Ue(e))),k),ut(ne(en(ne(k,ga(1)),l),Qe(Ue(b),a,h,f),ve(([[_,C],S,j,N,T])=>C&&j&&(S==null?void 0:S({context:T,totalCount:_,scrollingInProgress:N}))),He(_=>!!_),Jr(0)),_=>{y&&(y(),y=null),Mt(n)?requestAnimationFrame(()=>{Mt(d)("scrolling into view",{}),Ge(p,_)}):y=sr(t,()=>{Mt(d)("scrolling into view",{}),Ge(p,_),y=null})}),{autoscrollToBottom:x,followOutput:w,scrollIntoViewOnChange:b}},Rt(Ir,Dd,Md,Id,yo,xo,Wn,ET,NT)),xU=lt(([{data:t,firstItemIndex:e,gap:n,sizes:s},{initialTopMostItemIndex:r},{initialItemCount:i,listState:o},{didMount:a}])=>(Pe(ne(a,Qe(i),He(([,l])=>l!==0),Qe(r,s,e,n,t),ve(([[,l],u,d,h,f,p=[]])=>jT(l,u,d,h,f,p))),o),{}),Rt(Ir,Id,Ca,yo),{singleton:!0}),yU=lt(([{didMount:t},{scrollTo:e},{listState:n}])=>{const s=ce(0);return ut(ne(t,Qe(s),He(([,r])=>r!==0),ve(([,r])=>({top:r}))),r=>{sr(ne(n,ga(1),He(i=>i.items.length>1)),()=>{requestAnimationFrame(()=>{Ge(e,r)})})}),{initialScrollTop:s}},Rt(yo,Wn,Ca),{singleton:!0}),TT=lt(([{scrollVelocity:t}])=>{const e=ce(!1),n=et(),s=ce(!1);return Pe(ne(t,Qe(s,e,n),He(([r,i])=>!!i),ve(([r,i,o,a])=>{const{enter:l,exit:u}=i;if(o){if(u(r,a))return!1}else if(l(r,a))return!0;return o}),Tt()),e),ut(ne(en(e,t,n),Qe(s)),([[r,i,o],a])=>{r&&a&&a.change&&a.change(i,o)}),{isSeeking:e,scrollSeekConfiguration:s,scrollSeekRangeChanged:n,scrollVelocity:t}},Rt(Dd),{singleton:!0}),T0=lt(([{scrollContainerState:t,scrollTo:e}])=>{const n=et(),s=et(),r=et(),i=ce(!1),o=ce(void 0);return Pe(ne(en(n,s),ve(([{scrollHeight:a,scrollTop:l,viewportHeight:u},{offsetTop:d}])=>({scrollHeight:a,scrollTop:Math.max(0,l-d),viewportHeight:u}))),t),Pe(ne(e,Qe(s),ve(([a,{offsetTop:l}])=>({...a,top:a.top+l}))),r),{customScrollParent:o,useWindowScroll:i,windowScrollContainerState:n,windowScrollTo:r,windowViewportRect:s}},Rt(Wn)),vU=lt(([{sizeRanges:t,sizes:e},{headerHeight:n,scrollTop:s},{initialTopMostItemIndex:r},{didMount:i},{useWindowScroll:o,windowScrollContainerState:a,windowViewportRect:l}])=>{const u=et(),d=ce(void 0),h=ce(null),f=ce(null);return Pe(a,h),Pe(l,f),ut(ne(u,Qe(e,s,o,h,f,n)),([p,w,x,y,g,m,b])=>{const k=nU(w.sizeTree);y&&g!==null&&m!==null&&(x=g.scrollTop-m.offsetTop),x-=b,p({ranges:k,scrollTop:x})}),Pe(ne(d,He(w0),ve(bU)),r),Pe(ne(i,Qe(d),He(([,p])=>p!==void 0),Tt(),ve(([,p])=>p.ranges)),t),{getState:u,restoreStateFrom:d}},Rt(Ir,Wn,Id,yo,T0));function bU(t){return{align:"start",index:0,offset:t.scrollTop}}const wU=lt(([{topItemsIndexes:t}])=>{const e=ce(0);return Pe(ne(e,He(n=>n>=0),ve(n=>Array.from({length:n}).map((s,r)=>r))),t),{topItemCount:e}},Rt(Ca));function PT(t){let e=!1,n;return()=>(e||(e=!0,n=t()),n)}const kU=PT(()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent)),_U=lt(([{deviation:t,scrollBy:e,scrollingInProgress:n,scrollTop:s},{isAtBottom:r,isScrolling:i,lastJumpDueToItemResize:o,scrollDirection:a},{listState:l},{beforeUnshiftWith:u,gap:d,shiftWithOffset:h,sizes:f},{log:p},{recalcInProgress:w}])=>{const x=_s(ne(l,Qe(o),Nr(([,g,m,b],[{bottom:k,items:_,offsetBottom:C,totalCount:S},j])=>{const N=k+C;let T=0;return m===S&&g.length>0&&_.length>0&&(_[0].originalIndex===0&&g[0].originalIndex===0||(T=N-b,T!==0&&(T+=j))),[T,_,S,N]},[0,[],0,0]),He(([g])=>g!==0),Qe(s,a,n,r,p,w),He(([,g,m,b,,,k])=>!k&&!b&&g!==0&&m===Xu),ve(([[g],,,,,m])=>(m("Upward scrolling compensation",{amount:g},os.DEBUG),g))));function y(g){g>0?(Ge(e,{behavior:"auto",top:-g}),Ge(t,0)):(Ge(t,0),Ge(e,{behavior:"auto",top:-g}))}return ut(ne(x,Qe(t,i)),([g,m,b])=>{b&&kU()?Ge(t,m-g):y(-g)}),ut(ne(en(Nn(i,!1),t,w),He(([g,m,b])=>!g&&!b&&m!==0),ve(([g,m])=>m),Jr(1)),y),Pe(ne(h,ve(g=>({top:-g}))),e),ut(ne(u,Qe(f,d),ve(([g,{groupIndices:m,lastSize:b,sizeTree:k},_])=>{function C(S){return S*(b+_)}if(m.length===0)return C(g);{let S=0;const j=Gu(k,0);let N=0,T=0;for(;N<g;){N++,S+=j;let L=m.length===T+1?1/0:m[T+1]-m[T]-1;N+L>g&&(S-=j,L=g-N+1),N+=L,S+=C(L),T++}return S}})),g=>{Ge(t,g),requestAnimationFrame(()=>{Ge(e,{top:g}),requestAnimationFrame(()=>{Ge(t,0),Ge(w,!1)})})}),{deviation:t}},Rt(Wn,Dd,Ca,Ir,xo,S0)),SU=lt(([t,e,n,s,r,i,o,a,l,u,d])=>({...t,...e,...n,...s,...r,...i,...o,...a,...l,...u,...d}),Rt(N0,xU,yo,TT,CT,yU,fU,T0,NT,xo,ET)),RT=lt(([{data:t,defaultItemSize:e,firstItemIndex:n,fixedItemSize:s,fixedGroupSize:r,gap:i,groupIndices:o,heightEstimates:a,itemSize:l,sizeRanges:u,sizes:d,statefulTotalCount:h,totalCount:f,trackItemSizes:p},{initialItemFinalLocationReached:w,initialTopMostItemIndex:x,scrolledToInitialItem:y},g,m,b,k,{scrollToIndex:_},C,{topItemCount:S},{groupCounts:j},N])=>{const{listState:T,minOverscanItemCount:L,topItemsIndexes:D,rangeChanged:O,...$}=k;return Pe(O,N.scrollSeekRangeChanged),Pe(ne(N.windowViewportRect,ve(I=>I.visibleHeight)),g.viewportHeight),{data:t,defaultItemHeight:e,firstItemIndex:n,fixedItemHeight:s,fixedGroupHeight:r,gap:i,groupCounts:j,heightEstimates:a,initialItemFinalLocationReached:w,initialTopMostItemIndex:x,scrolledToInitialItem:y,sizeRanges:u,topItemCount:S,topItemsIndexes:D,totalCount:f,...b,groupIndices:o,itemSize:l,listState:T,minOverscanItemCount:L,scrollToIndex:_,statefulTotalCount:h,trackItemSizes:p,rangeChanged:O,...$,...N,...g,sizes:d,...m}},Rt(Ir,Id,Wn,vU,gU,Ca,Md,_U,wU,kT,SU));function jU(t,e){const n={},s={};let r=0;const i=t.length;for(;r<i;)s[t[r]]=1,r+=1;for(const o in e)Object.hasOwn(s,o)||(n[o]=e[o]);return n}const Nh=typeof document<"u"?ge.useLayoutEffect:ge.useEffect;function AT(t,e,n){const s=Object.keys(e.required||{}),r=Object.keys(e.optional||{}),i=Object.keys(e.methods||{}),o=Object.keys(e.events||{}),a=ge.createContext({});function l(y,g){y.propsReady&&Ge(y.propsReady,!1);for(const m of s){const b=y[e.required[m]];Ge(b,g[m])}for(const m of r)if(m in g){const b=y[e.optional[m]];Ge(b,g[m])}y.propsReady&&Ge(y.propsReady,!0)}function u(y){return i.reduce((g,m)=>(g[m]=b=>{const k=y[e.methods[m]];Ge(k,b)},g),{})}function d(y){return o.reduce((g,m)=>(g[m]=B4(y[e.events[m]]),g),{})}const h=ge.forwardRef((y,g)=>{const{children:m,...b}=y,[k]=ge.useState(()=>tm(H4(t),S=>{l(S,b)})),[_]=ge.useState(Kk(d,k));Nh(()=>{for(const S of o)S in b&&ut(_[S],b[S]);return()=>{Object.values(_).map(k0)}},[b,_,k]),Nh(()=>{l(k,b)}),ge.useImperativeHandle(g,qk(u(k)));const C=n;return c.jsx(a.Provider,{value:k,children:n?c.jsx(C,{...jU([...s,...r,...o],b),children:m}):m})}),f=y=>{const g=ge.useContext(a);return ge.useCallback(m=>{Ge(g[y],m)},[g,y])},p=y=>{const g=ge.useContext(a)[y],m=ge.useCallback(b=>ut(g,b),[g]);return ge.useSyncExternalStore(m,()=>Mt(g),()=>Mt(g))},w=y=>{const g=ge.useContext(a)[y],[m,b]=ge.useState(Kk(Mt,g));return Nh(()=>ut(g,k=>{k!==m&&b(qk(k))}),[g,m]),m},x=ge.version.startsWith("18")?p:w;return{Component:h,useEmitter:(y,g)=>{const m=ge.useContext(a)[y];Nh(()=>ut(m,g),[g,m])},useEmitterValue:x,usePublisher:f}}const OT=ge.createContext(void 0),MT=ge.createContext(void 0),IT=typeof document<"u"?ge.useLayoutEffect:ge.useEffect;function bg(t){return"self"in t}function CU(t){return"body"in t}function DT(t,e,n,s=dc,r,i){const o=ge.useRef(null),a=ge.useRef(null),l=ge.useRef(null),u=ge.useCallback(f=>{let p,w,x;const y=f.target;if(CU(y)||bg(y)){const m=bg(y)?y:y.defaultView;x=i?m.scrollX:m.scrollY,p=i?m.document.documentElement.scrollWidth:m.document.documentElement.scrollHeight,w=i?m.innerWidth:m.innerHeight}else x=i?y.scrollLeft:y.scrollTop,p=i?y.scrollWidth:y.scrollHeight,w=i?y.offsetWidth:y.offsetHeight;const g=()=>{t({scrollHeight:p,scrollTop:Math.max(x,0),viewportHeight:w})};f.suppressFlushSync?g():dC.flushSync(g),a.current!==null&&(x===a.current||x<=0||x===p-w)&&(a.current=null,e(!0),l.current&&(clearTimeout(l.current),l.current=null))},[t,e,i]);ge.useEffect(()=>{const f=r||o.current;return s(r||o.current),u({suppressFlushSync:!0,target:f}),f.addEventListener("scroll",u,{passive:!0}),()=>{s(null),f.removeEventListener("scroll",u)}},[o,u,n,s,r]);function d(f){const p=o.current;if(!p||(i?"offsetWidth"in p&&p.offsetWidth===0:"offsetHeight"in p&&p.offsetHeight===0))return;const w=f.behavior==="smooth";let x,y,g;bg(p)?(y=Math.max(co(p.document.documentElement,i?"width":"height"),i?p.document.documentElement.scrollWidth:p.document.documentElement.scrollHeight),x=i?p.innerWidth:p.innerHeight,g=i?window.scrollX:window.scrollY):(y=p[i?"scrollWidth":"scrollHeight"],x=co(p,i?"width":"height"),g=p[i?"scrollLeft":"scrollTop"]);const m=y-x;if(f.top=Math.ceil(Math.max(Math.min(m,f.top),0)),ST(x,y)||f.top===g){t({scrollHeight:y,scrollTop:g,viewportHeight:x}),w&&e(!0);return}w?(a.current=f.top,l.current&&clearTimeout(l.current),l.current=setTimeout(()=>{l.current=null,a.current=null,e(!0)},1e3)):a.current=null,i&&(f={behavior:f.behavior,left:f.top}),p.scrollTo(f)}function h(f){i&&(f={behavior:f.behavior,left:f.top}),o.current.scrollBy(f)}return{scrollByCallback:h,scrollerRef:o,scrollToCallback:d}}const wg="-webkit-sticky",r_="sticky",P0=PT(()=>{if(typeof document>"u")return r_;const t=document.createElement("div");return t.style.position=wg,t.style.position===wg?wg:r_});function R0(t){return t}const EU=lt(()=>{const t=ce(a=>`Item ${a}`),e=ce(a=>`Group ${a}`),n=ce({}),s=ce(R0),r=ce("div"),i=ce(dc),o=(a,l=null)=>Nn(ne(n,ve(u=>u[a]),Tt()),l);return{components:n,computeItemKey:s,EmptyPlaceholder:o("EmptyPlaceholder"),FooterComponent:o("Footer"),GroupComponent:o("Group","div"),groupContent:e,HeaderComponent:o("Header"),HeaderFooterTag:r,ItemComponent:o("Item","div"),itemContent:t,ListComponent:o("List","div"),ScrollerComponent:o("Scroller","div"),scrollerRef:i,ScrollSeekPlaceholder:o("ScrollSeekPlaceholder"),TopItemListComponent:o("TopItemList")}}),NU=lt(([t,e])=>({...t,...e}),Rt(RT,EU)),TU=({height:t})=>c.jsx("div",{style:{height:t}}),PU={overflowAnchor:"none",position:P0(),zIndex:1},LT={overflowAnchor:"none"},RU={...LT,display:"inline-block",height:"100%"},i_=ge.memo(function({showTopList:t=!1}){const e=We("listState"),n=Ds("sizeRanges"),s=We("useWindowScroll"),r=We("customScrollParent"),i=Ds("windowScrollContainerState"),o=Ds("scrollContainerState"),a=r||s?i:o,l=We("itemContent"),u=We("context"),d=We("groupContent"),h=We("trackItemSizes"),f=We("itemSize"),p=We("log"),w=Ds("gap"),x=We("horizontalDirection"),{callbackRef:y}=q4(n,f,h,t?dc:a,p,w,r,x,We("skipAnimationFrameInResizeObserver")),[g,m]=ge.useState(0);A0("deviation",$=>{g!==$&&m($)});const b=We("EmptyPlaceholder"),k=We("ScrollSeekPlaceholder")||TU,_=We("ListComponent"),C=We("ItemComponent"),S=We("GroupComponent"),j=We("computeItemKey"),N=We("isSeeking"),T=We("groupIndices").length>0,L=We("alignToBottom"),D=We("initialItemFinalLocationReached"),O=t?{}:{boxSizing:"border-box",...x?{display:"inline-block",height:"100%",marginLeft:g!==0?g:L?"auto":0,paddingLeft:e.offsetTop,paddingRight:e.offsetBottom,whiteSpace:"nowrap"}:{marginTop:g!==0?g:L?"auto":0,paddingBottom:e.offsetBottom,paddingTop:e.offsetTop},...D?{}:{visibility:"hidden"}};return!t&&e.totalCount===0&&b?c.jsx(b,{...En(b,u)}):c.jsx(_,{...En(_,u),"data-testid":t?"virtuoso-top-item-list":"virtuoso-item-list",ref:y,style:O,children:(t?e.topItems:e.items).map($=>{const I=$.originalIndex,A=j(I+e.firstItemIndex,$.data,u);return N?v.createElement(k,{...En(k,u),height:$.size,index:$.index,key:A,type:$.type||"item",...$.type==="group"?{}:{groupIndex:$.groupIndex}}):$.type==="group"?v.createElement(S,{...En(S,u),"data-index":I,"data-item-index":$.index,"data-known-size":$.size,key:A,style:PU},d($.index,u)):v.createElement(C,{...En(C,u),...IU(C,$.data),"data-index":I,"data-item-group-index":$.groupIndex,"data-item-index":$.index,"data-known-size":$.size,key:A,style:x?RU:LT},T?l($.index,$.groupIndex,$.data,u):l($.index,$.data,u))})})}),AU={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},OU={outline:"none",overflowX:"auto",position:"relative"},sm=t=>({height:"100%",position:"absolute",top:0,width:"100%",...t?{display:"flex",flexDirection:"column"}:{}}),MU={position:P0(),top:0,width:"100%",zIndex:1};function En(t,e){if(typeof t!="string")return{context:e}}function IU(t,e){return{item:typeof t=="string"?void 0:e}}const DU=ge.memo(function(){const t=We("HeaderComponent"),e=Ds("headerHeight"),n=We("HeaderFooterTag"),s=ja(ge.useMemo(()=>i=>{e(co(i,"height"))},[e]),!0,We("skipAnimationFrameInResizeObserver")),r=We("context");return t?c.jsx(n,{ref:s,children:c.jsx(t,{...En(t,r)})}):null}),LU=ge.memo(function(){const t=We("FooterComponent"),e=Ds("footerHeight"),n=We("HeaderFooterTag"),s=ja(ge.useMemo(()=>i=>{e(co(i,"height"))},[e]),!0,We("skipAnimationFrameInResizeObserver")),r=We("context");return t?c.jsx(n,{ref:s,children:c.jsx(t,{...En(t,r)})}):null});function $T({useEmitter:t,useEmitterValue:e,usePublisher:n}){return ge.memo(function({children:s,style:r,context:i,...o}){const a=n("scrollContainerState"),l=e("ScrollerComponent"),u=n("smoothScrollTargetReached"),d=e("scrollerRef"),h=e("horizontalDirection")||!1,{scrollByCallback:f,scrollerRef:p,scrollToCallback:w}=DT(a,u,l,d,void 0,h);return t("scrollTo",w),t("scrollBy",f),c.jsx(l,{"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,ref:p,style:{...h?OU:AU,...r},tabIndex:0,...o,...En(l,i),children:s})})}function FT({useEmitter:t,useEmitterValue:e,usePublisher:n}){return ge.memo(function({children:s,style:r,context:i,...o}){const a=n("windowScrollContainerState"),l=e("ScrollerComponent"),u=n("smoothScrollTargetReached"),d=e("totalListHeight"),h=e("deviation"),f=e("customScrollParent"),p=ge.useRef(null),w=e("scrollerRef"),{scrollByCallback:x,scrollerRef:y,scrollToCallback:g}=DT(a,u,l,w,f);return IT(()=>{var m;return y.current=f||((m=p.current)==null?void 0:m.ownerDocument.defaultView),()=>{y.current=null}},[y,f]),t("windowScrollTo",g),t("scrollBy",x),c.jsx(l,{ref:p,"data-virtuoso-scroller":!0,style:{position:"relative",...r,...d!==0?{height:d+h}:{}},...o,...En(l,i),children:s})})}const $U=({children:t})=>{const e=ge.useContext(OT),n=Ds("viewportHeight"),s=Ds("fixedItemHeight"),r=We("alignToBottom"),i=We("horizontalDirection"),o=ge.useMemo(()=>uT(n,l=>co(l,i?"width":"height")),[n,i]),a=ja(o,!0,We("skipAnimationFrameInResizeObserver"));return ge.useEffect(()=>{e&&(n(e.viewportHeight),s(e.itemHeight))},[e,n,s]),c.jsx("div",{"data-viewport-type":"element",ref:a,style:sm(r),children:t})},FU=({children:t})=>{const e=ge.useContext(OT),n=Ds("windowViewportRect"),s=Ds("fixedItemHeight"),r=We("customScrollParent"),i=hT(n,r,We("skipAnimationFrameInResizeObserver")),o=We("alignToBottom");return ge.useEffect(()=>{e&&(s(e.itemHeight),n({offsetTop:0,visibleHeight:e.viewportHeight,visibleWidth:100}))},[e,n,s]),c.jsx("div",{"data-viewport-type":"window",ref:i,style:sm(o),children:t})},zU=({children:t})=>{const e=We("TopItemListComponent")||"div",n=We("headerHeight"),s={...MU,marginTop:`${n}px`},r=We("context");return c.jsx(e,{style:s,...En(e,r),children:t})},BU=ge.memo(function(t){const e=We("useWindowScroll"),n=We("topItemsIndexes").length>0,s=We("customScrollParent"),r=We("context");return c.jsxs(s||e?WU:HU,{...t,context:r,children:[n&&c.jsx(zU,{children:c.jsx(i_,{showTopList:!0})}),c.jsxs(s||e?FU:$U,{children:[c.jsx(DU,{}),c.jsx(i_,{}),c.jsx(LU,{})]})]})}),{Component:UU,useEmitter:A0,useEmitterValue:We,usePublisher:Ds}=AT(NU,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",scrollIntoViewOnChange:"scrollIntoViewOnChange",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",minOverscanItemCount:"minOverscanItemCount",totalCount:"totalCount",groupCounts:"groupCounts",topItemCount:"topItemCount",firstItemIndex:"firstItemIndex",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedGroupHeight:"fixedGroupHeight",fixedItemHeight:"fixedItemHeight",heightEstimates:"heightEstimates",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"HeaderFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",horizontalDirection:"horizontalDirection",skipAnimationFrameInResizeObserver:"skipAnimationFrameInResizeObserver"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",autoscrollToBottom:"autoscrollToBottom",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},BU),HU=$T({useEmitter:A0,useEmitterValue:We,usePublisher:Ds}),WU=FT({useEmitter:A0,useEmitterValue:We,usePublisher:Ds}),VU=UU,qU=lt(()=>{const t=ce(u=>c.jsxs("td",{children:["Item $",u]})),e=ce(null),n=ce(u=>c.jsxs("td",{colSpan:1e3,children:["Group ",u]})),s=ce(null),r=ce(null),i=ce({}),o=ce(R0),a=ce(dc),l=(u,d=null)=>Nn(ne(i,ve(h=>h[u]),Tt()),d);return{components:i,computeItemKey:o,context:e,EmptyPlaceholder:l("EmptyPlaceholder"),FillerRow:l("FillerRow"),fixedFooterContent:r,fixedHeaderContent:s,itemContent:t,groupContent:n,ScrollerComponent:l("Scroller","div"),scrollerRef:a,ScrollSeekPlaceholder:l("ScrollSeekPlaceholder"),TableBodyComponent:l("TableBody","tbody"),TableComponent:l("Table","table"),TableFooterComponent:l("TableFoot","tfoot"),TableHeadComponent:l("TableHead","thead"),TableRowComponent:l("TableRow","tr"),GroupComponent:l("Group","tr")}});Rt(RT,qU);P0();const o_={bottom:0,itemHeight:0,items:[],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},KU={bottom:0,itemHeight:0,items:[{index:0}],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},{ceil:a_,floor:up,max:cu,min:kg,round:l_}=Math;function c_(t,e,n){return Array.from({length:e-t+1}).map((s,r)=>({data:n===null?null:n[r+t],index:r+t}))}function GU(t){return{...KU,items:t}}function Th(t,e){return t&&t.width===e.width&&t.height===e.height}function YU(t,e){return t&&t.column===e.column&&t.row===e.row}const QU=lt(([{increaseViewportBy:t,listBoundary:e,overscan:n,visibleRange:s},{footerHeight:r,headerHeight:i,scrollBy:o,scrollContainerState:a,scrollTo:l,scrollTop:u,smoothScrollTargetReached:d,viewportHeight:h},f,p,{didMount:w,propsReady:x},{customScrollParent:y,useWindowScroll:g,windowScrollContainerState:m,windowScrollTo:b,windowViewportRect:k},_])=>{const C=ce(0),S=ce(0),j=ce(o_),N=ce({height:0,width:0}),T=ce({height:0,width:0}),L=et(),D=et(),O=ce(0),$=ce(null),I=ce({column:0,row:0}),A=et(),W=et(),E=ce(!1),P=ce(0),F=ce(!0),V=ce(!1),H=ce(!1);ut(ne(w,Qe(P),He(([Z,be])=>!!be)),()=>{Ge(F,!1)}),ut(ne(en(w,F,T,N,P,V),He(([Z,be,Ae,me,,fe])=>Z&&!be&&Ae.height!==0&&me.height!==0&&!fe)),([,,,,Z])=>{Ge(V,!0),C0(1,()=>{Ge(L,Z)}),sr(ne(u),()=>{Ge(e,[0,0]),Ge(F,!0)})}),Pe(ne(W,He(Z=>Z!=null&&Z.scrollTop>0),_r(0)),S),ut(ne(w,Qe(W),He(([,Z])=>Z!=null)),([,Z])=>{Z&&(Ge(N,Z.viewport),Ge(T,Z.item),Ge(I,Z.gap),Z.scrollTop>0&&(Ge(E,!0),sr(ne(u,ga(1)),be=>{Ge(E,!1)}),Ge(l,{top:Z.scrollTop})))}),Pe(ne(N,ve(({height:Z})=>Z)),h),Pe(ne(en(Ue(N,Th),Ue(T,Th),Ue(I,(Z,be)=>Z&&Z.column===be.column&&Z.row===be.row),Ue(u)),ve(([Z,be,Ae,me])=>({gap:Ae,item:be,scrollTop:me,viewport:Z}))),A),Pe(ne(en(Ue(C),s,Ue(I,YU),Ue(T,Th),Ue(N,Th),Ue($),Ue(S),Ue(E),Ue(F),Ue(P)),He(([,,,,,,,Z])=>!Z),ve(([Z,[be,Ae],me,fe,De,J,pe,,ie,K])=>{const{column:G,row:le}=me,{height:Y,width:B}=fe,{width:xe}=De;if(pe===0&&(Z===0||xe===0))return o_;if(B===0){const Dt=E0(K,Z),ur=Dt+Math.max(pe-1,0);return GU(c_(Dt,ur,J))}const je=zT(xe,B,G);let Ce,Le;ie?be===0&&Ae===0&&pe>0?(Ce=0,Le=pe-1):(Ce=je*up((be+le)/(Y+le)),Le=je*a_((Ae+le)/(Y+le))-1,Le=kg(Z-1,cu(Le,je-1)),Ce=kg(Le,cu(0,Ce))):(Ce=0,Le=-1);const we=c_(Ce,Le,J),{bottom:oe,top:Ne}=u_(De,me,fe,we),tt=a_(Z/je),ht=tt*Y+(tt-1)*le-oe;return{bottom:oe,itemHeight:Y,items:we,itemWidth:B,offsetBottom:ht,offsetTop:Ne,top:Ne}})),j),Pe(ne($,He(Z=>Z!==null),ve(Z=>Z.length)),C),Pe(ne(en(N,T,j,I),He(([Z,be,{items:Ae}])=>Ae.length>0&&be.height!==0&&Z.height!==0),ve(([Z,be,{items:Ae},me])=>{const{bottom:fe,top:De}=u_(Z,me,be,Ae);return[De,fe]}),Tt(Yu)),e);const he=ce(!1);Pe(ne(u,Qe(he),ve(([Z,be])=>be||Z!==0)),he);const ee=_s(ne(en(j,C),He(([{items:Z}])=>Z.length>0),Qe(he),He(([[Z,be],Ae])=>{const me=Z.items[Z.items.length-1].index===be-1;return(Ae||Z.bottom>0&&Z.itemHeight>0&&Z.offsetBottom===0&&Z.items.length===be)&&me}),ve(([[,Z]])=>Z-1),Tt())),U=_s(ne(Ue(j),He(({items:Z})=>Z.length>0&&Z[0].index===0),_r(0),Tt())),Q=_s(ne(Ue(j),Qe(E),He(([{items:Z},be])=>Z.length>0&&!be),ve(([{items:Z}])=>({endIndex:Z[Z.length-1].index,startIndex:Z[0].index})),Tt(yT),Jr(0)));Pe(Q,p.scrollSeekRangeChanged),Pe(ne(L,Qe(N,T,C,I),ve(([Z,be,Ae,me,fe])=>{const De=_T(Z),{align:J,behavior:pe,offset:ie}=De;let K=De.index;K==="LAST"&&(K=me-1),K=cu(0,K,kg(me-1,K));let G=Ey(be,fe,Ae,K);return J==="end"?G=l_(G-be.height+Ae.height):J==="center"&&(G=l_(G-be.height/2+Ae.height/2)),ie&&(G+=ie),{behavior:pe,top:G}})),l);const de=Nn(ne(j,ve(Z=>Z.offsetBottom+Z.bottom)),0);return Pe(ne(k,ve(Z=>({height:Z.visibleHeight,width:Z.visibleWidth}))),N),{customScrollParent:y,data:$,deviation:O,footerHeight:r,gap:I,headerHeight:i,increaseViewportBy:t,initialItemCount:S,itemDimensions:T,overscan:n,restoreStateFrom:W,scrollBy:o,scrollContainerState:a,scrollHeight:D,scrollTo:l,scrollToIndex:L,scrollTop:u,smoothScrollTargetReached:d,totalCount:C,useWindowScroll:g,viewportDimensions:N,windowScrollContainerState:m,windowScrollTo:b,windowViewportRect:k,...p,gridState:j,horizontalDirection:H,initialTopMostItemIndex:P,totalListHeight:de,...f,endReached:ee,propsReady:x,rangeChanged:Q,startReached:U,stateChanged:A,stateRestoreInProgress:E,..._}},Rt(N0,Wn,Dd,TT,yo,T0,xo));function zT(t,e,n){return cu(1,up((t+n)/(up(e)+n)))}function u_(t,e,n,s){const{height:r}=n;if(r===void 0||s.length===0)return{bottom:0,top:0};const i=Ey(t,e,n,s[0].index);return{bottom:Ey(t,e,n,s[s.length-1].index)+r,top:i}}function Ey(t,e,n,s){const r=zT(t.width,n.width,e.column),i=up(s/r),o=i*n.height+cu(0,i-1)*e.row;return o>0?o+e.row:o}const XU=lt(()=>{const t=ce(h=>`Item ${h}`),e=ce({}),n=ce(null),s=ce("virtuoso-grid-item"),r=ce("virtuoso-grid-list"),i=ce(R0),o=ce("div"),a=ce(dc),l=(h,f=null)=>Nn(ne(e,ve(p=>p[h]),Tt()),f),u=ce(!1),d=ce(!1);return Pe(Ue(d),u),{components:e,computeItemKey:i,context:n,FooterComponent:l("Footer"),HeaderComponent:l("Header"),headerFooterTag:o,itemClassName:s,ItemComponent:l("Item","div"),itemContent:t,listClassName:r,ListComponent:l("List","div"),readyStateChanged:u,reportReadyState:d,ScrollerComponent:l("Scroller","div"),scrollerRef:a,ScrollSeekPlaceholder:l("ScrollSeekPlaceholder","div")}}),JU=lt(([t,e])=>({...t,...e}),Rt(QU,XU)),ZU=ge.memo(function(){const t=Ot("gridState"),e=Ot("listClassName"),n=Ot("itemClassName"),s=Ot("itemContent"),r=Ot("computeItemKey"),i=Ot("isSeeking"),o=Ls("scrollHeight"),a=Ot("ItemComponent"),l=Ot("ListComponent"),u=Ot("ScrollSeekPlaceholder"),d=Ot("context"),h=Ls("itemDimensions"),f=Ls("gap"),p=Ot("log"),w=Ot("stateRestoreInProgress"),x=Ls("reportReadyState"),y=ja(ge.useMemo(()=>g=>{const m=g.parentElement.parentElement.scrollHeight;o(m);const b=g.firstChild;if(b){const{height:k,width:_}=b.getBoundingClientRect();h({height:k,width:_})}f({column:d_("column-gap",getComputedStyle(g).columnGap,p),row:d_("row-gap",getComputedStyle(g).rowGap,p)})},[o,h,f,p]),!0,!1);return IT(()=>{t.itemHeight>0&&t.itemWidth>0&&x(!0)},[t]),w?null:c.jsx(l,{className:e,ref:y,...En(l,d),"data-testid":"virtuoso-item-list",style:{paddingBottom:t.offsetBottom,paddingTop:t.offsetTop},children:t.items.map(g=>{const m=r(g.index,g.data,d);return i?c.jsx(u,{...En(u,d),height:t.itemHeight,index:g.index,width:t.itemWidth},m):v.createElement(a,{...En(a,d),className:n,"data-index":g.index,key:m},s(g.index,g.data,d))})})}),e6=ge.memo(function(){const t=Ot("HeaderComponent"),e=Ls("headerHeight"),n=Ot("headerFooterTag"),s=ja(ge.useMemo(()=>i=>{e(co(i,"height"))},[e]),!0,!1),r=Ot("context");return t?c.jsx(n,{ref:s,children:c.jsx(t,{...En(t,r)})}):null}),t6=ge.memo(function(){const t=Ot("FooterComponent"),e=Ls("footerHeight"),n=Ot("headerFooterTag"),s=ja(ge.useMemo(()=>i=>{e(co(i,"height"))},[e]),!0,!1),r=Ot("context");return t?c.jsx(n,{ref:s,children:c.jsx(t,{...En(t,r)})}):null}),n6=({children:t})=>{const e=ge.useContext(MT),n=Ls("itemDimensions"),s=Ls("viewportDimensions"),r=ja(ge.useMemo(()=>i=>{s(i.getBoundingClientRect())},[s]),!0,!1);return ge.useEffect(()=>{e&&(s({height:e.viewportHeight,width:e.viewportWidth}),n({height:e.itemHeight,width:e.itemWidth}))},[e,s,n]),c.jsx("div",{ref:r,style:sm(!1),children:t})},s6=({children:t})=>{const e=ge.useContext(MT),n=Ls("windowViewportRect"),s=Ls("itemDimensions"),r=Ot("customScrollParent"),i=hT(n,r,!1);return ge.useEffect(()=>{e&&(s({height:e.itemHeight,width:e.itemWidth}),n({offsetTop:0,visibleHeight:e.viewportHeight,visibleWidth:e.viewportWidth}))},[e,n,s]),c.jsx("div",{ref:i,style:sm(!1),children:t})},r6=ge.memo(function({...t}){const e=Ot("useWindowScroll"),n=Ot("customScrollParent"),s=n||e?o6:i6,r=n||e?s6:n6,i=Ot("context");return c.jsx(s,{...t,...En(s,i),children:c.jsxs(r,{children:[c.jsx(e6,{}),c.jsx(ZU,{}),c.jsx(t6,{})]})})}),{useEmitter:BT,useEmitterValue:Ot,usePublisher:Ls}=AT(JU,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex",increaseViewportBy:"increaseViewportBy"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged",readyStateChanged:"readyStateChanged"}},r6),i6=$T({useEmitter:BT,useEmitterValue:Ot,usePublisher:Ls}),o6=FT({useEmitter:BT,useEmitterValue:Ot,usePublisher:Ls});function d_(t,e,n){return e!=="normal"&&!(e!=null&&e.endsWith("px"))&&n(`${t} was not resolved to pixel value correctly`,e,os.WARN),e==="normal"?0:parseInt(e??"0",10)}const _g=new Set;function a6(){const[t,e]=v.useState([]),[n,s]=v.useState(""),[r,i]=v.useState(null),[o,a]=v.useState(!0),[l,u]=v.useState(!1),[d,h]=v.useState(null),f=v.useRef(null),p=v.useRef(null),w=v.useRef(null);v.useEffect(()=>{console.log("[ChatPage] Mount - starting loadHistory, showing loading spinner");async function k(){var _,C;try{console.log("[ChatPage] Fetching history from API...");const S=await s3({limit:500,newestFirst:!0});if(console.log("[ChatPage] History received:",{messageCount:((_=S==null?void 0:S.messages)==null?void 0:_.length)||0}),(C=S==null?void 0:S.messages)!=null&&C.length){const j=S.messages.map(m6);e(j),h(S.session_id||null),a(!1),console.log("[ChatPage] Loading complete - hiding spinner, showing messages"),setTimeout(()=>{var T;(T=w.current)==null||T.scrollToIndex({index:"LAST",behavior:"auto"})},50);const N=j.flatMap(T=>T.files||[]).filter(T=>T==null?void 0:T.file_id).map(T=>T.file_id);N.length>0&&(console.log("[ChatPage] Loading URLs for",N.length,"attachments in background..."),r3(N).then(T=>{console.log("[ChatPage] Attachment URLs loaded:",Object.keys((T==null?void 0:T.urls)||{}).length),T!=null&&T.urls&&e(L=>L.map(D=>({...D,files:(D.files||[]).map(O=>{const $=T.urls[O.file_id];if($){const I=typeof $=="string"?$:$.full||$.url;return{...O,url:I,width:$.width||O.width,height:$.height||O.height}}return O})})))}).catch(T=>{console.warn("[ChatPage] Failed to load attachment URLs:",T)}))}else console.log("[ChatPage] No history - showing greeting"),e([h_()]),a(!1),setTimeout(()=>{var j;(j=w.current)==null||j.scrollToIndex({index:"LAST",behavior:"auto"})},50)}catch(S){console.error("[ChatPage] Failed to load history:",S),e([h_()]),a(!1),setTimeout(()=>{var j;(j=w.current)==null||j.scrollToIndex({index:"LAST",behavior:"auto"})},50)}}k()},[]);const x=v.useMemo(()=>(n.trim().length>0||!!r)&&!l,[n,r,l]),y=v.useMemo(()=>t.filter(k=>!k.is_tool_response),[t]),g=v.useCallback((k=!1)=>{var _,C;k?(_=w.current)==null||_.scrollToIndex({index:"LAST",behavior:"auto"}):(C=w.current)==null||C.scrollToIndex({index:"LAST",behavior:"smooth",align:"end"})},[]),m=v.useCallback((k,_)=>c.jsx("div",{className:"px-2 py-1.5",style:{contain:"layout"},children:c.jsx(u6,{msg:_})}),[]);async function b(){var L,D;if(!x)return;const k=n.trim(),_=k||(r?`Please process this file: ${r.name}`:""),C=crypto.randomUUID(),S={id:C,role:"user",content:k,files:r?[{filename:r.name,preview_url:URL.createObjectURL(r)}]:[],status:null},j=crypto.randomUUID(),N={id:j,role:"assistant",content:"",files:[],status:"Thinking"};e(O=>[...O,S,N]),s("");const T=r;i(null),requestAnimationFrame(()=>g(!0));try{u(!0),(D=(L=p.current)==null?void 0:L.abort)==null||D.call(L);const O=new AbortController;p.current=O;let $=[],I="";if(T){const A=await o3(T);if(!(A!=null&&A.file_id))throw new Error("Upload failed");$=[A.file_id],e(W=>W.map(E=>{var P,F;return E.id===C?{...E,files:[{file_id:A.file_id,filename:T.name,url:A.url,width:A.image_width,height:A.image_height,preview_url:(F=(P=E.files)==null?void 0:P[0])==null?void 0:F.preview_url}]}:E}))}await i3({conversationId:d,message:_,fileIds:$,signal:O.signal,onEvent:A=>{var W;if(!O.signal.aborted){if(A!=null&&A.conversation_id&&h(E=>E||A.conversation_id),A!=null&&A.error){e(E=>E.map(P=>P.id===j?{...P,status:null,content:`Error: ${A.error}`}:P));return}if((A==null?void 0:A.type)==="status"){const E=HT(A.content||"Processing");e(P=>P.map(F=>F.id===j?{...F,status:E}:F));return}if((A==null?void 0:A.type)==="delete"){e(E=>E.map(P=>P.id===j?{...P,status:null}:P));return}if((A==null?void 0:A.type)==="tool_call"){const E=((W=A.tool)==null?void 0:W.name)||"processing";e(P=>P.map(F=>F.id===j?{...F,status:`Processing ${E}`}:F));return}if(((A==null?void 0:A.type)==="chunk"||(A==null?void 0:A.type)==="content")&&A.content){I=A.type==="content"?A.content:I+A.content,e(E=>E.map(P=>P.id===j?{...P,status:null,content:ed(I)}:P));return}if(A!=null&&A.content&&!A.type){I+=A.content,e(E=>E.map(P=>P.id===j?{...P,status:null,content:ed(I)}:P));return}if(((A==null?void 0:A.type)==="files"||(A==null?void 0:A.type)==="file")&&(A.files||A.file||A.file_id)){const E=A.file||{},P=A.files||(A.file?[{file_id:E.file_id,url:E.url,filename:E.filename,title:E.title}]:[{file_id:A.file_id,url:A.url,filename:A.filename,title:A.title}]),F=E.comment||A.comment||"";F&&(I=F),e(V=>V.map(H=>H.id===j?{...H,content:F||H.content,files:[...H.files||[],...P]}:H));return}}},onDone:()=>{e(A=>A.map(W=>{var E;return W.id===j&&!W.content&&!((E=W.files)!=null&&E.length)?{...W,status:null,content:"I'm ready to help. What would you like to do?"}:W.id===j?{...W,status:null}:W}))}})}catch(O){e($=>$.map(I=>I.id===j?{...I,status:null,content:(O==null?void 0:O.message)||"Failed to get response"}:I))}finally{u(!1)}}return c.jsxs("div",{className:"h-full flex flex-col gap-4 min-h-0",children:[c.jsx(_t,{className:"p-4 overflow-hidden flex-1 min-h-0",children:o?c.jsx("div",{className:"h-full flex items-center justify-center",children:c.jsx("div",{className:"rounded-2xl bg-white/55 dark:bg-white/5 backdrop-blur-md shadow-soft ring-1 ring-black/5 dark:ring-white/10 px-5 py-4 text-sm",children:c.jsx(Ye,{text:"Loading conversation"})})}):c.jsx(VU,{ref:w,className:"h-full scrollbar-thin",data:y,initialTopMostItemIndex:y.length-1,followOutput:"smooth",overscan:200,increaseViewportBy:{top:200,bottom:200},computeItemKey:(k,_)=>_.id,itemContent:m,skipAnimationFrameInResizeObserver:!0})}),c.jsxs(_t,{className:"p-3",children:[r&&c.jsxs("div",{className:"mb-2 flex items-center justify-between rounded-2xl bg-black/5 dark:bg-white/10 px-3 py-2 text-sm",children:[c.jsx("div",{className:"truncate",children:r.name}),c.jsx("button",{className:"opacity-70 hover:opacity-100",onClick:()=>i(null),children:""})]}),c.jsxs("div",{className:"flex items-end gap-2",children:[c.jsx("input",{ref:f,type:"file",className:"hidden",onChange:k=>{var _;return i(((_=k.target.files)==null?void 0:_[0])||null)},accept:"image/*,.pdf,.xlsx,.xls,.csv,.docx,.doc"}),c.jsx(te,{variant:"ghost",size:"icon",className:"rounded-2xl",title:"Attach file",onClick:()=>{var k;return(k=f.current)==null?void 0:k.click()},children:c.jsx(VC,{size:18})}),c.jsx(f6,{value:n,onChange:s,placeholder:"Type your message...",onEnter:b}),c.jsx(te,{size:"icon",className:"w-12 rounded-2xl",title:"Send",disabled:!x,onClick:b,children:c.jsx(qC,{size:18})})]}),c.jsx("div",{className:"mt-2 text-xs text-black/45 dark:text-white/55",children:"AI can make mistakes. Verify important information."})]})]})}const O0=320,l6=200,UT=320,c6=120,u6=ge.memo(function({msg:e}){var d;const n=e.role==="user",s=v.useMemo(()=>g6(e.content||""),[e.content]),r=!!e.status,i=e.files||[],o=i.some(h=>{const f=Ny((h==null?void 0:h.filename)||(h==null?void 0:h.url)||"");return["jpg","jpeg","png","gif","webp","bmp"].includes(f)}),a=i.some(h=>{const f=Ny((h==null?void 0:h.filename)||(h==null?void 0:h.url)||"");return f&&!["jpg","jpeg","png","gif","webp","bmp"].includes(f)}),l=o?O0:a?UT:null,u=v.useMemo(()=>{const h={overflowWrap:"anywhere",wordBreak:"break-word"};return l?{...h,maxWidth:l}:h},[l]);return c.jsx("div",{className:n?"flex justify-end":"flex justify-start",children:c.jsxs("div",{className:["max-w-[85%] rounded-2xl px-3 py-2 text-sm shadow-soft break-words","ring-1 ring-black/5 dark:ring-white/10 backdrop-blur-xs",n?"bg-black text-white dark:bg-white dark:text-black":"bg-white/70 dark:bg-white/10"].join(" "),children:[r?c.jsx(p6,{text:e.status}):c.jsx("div",{dangerouslySetInnerHTML:{__html:s},style:u}),((d=e.files)==null?void 0:d.length)>0&&c.jsx("div",{className:"mt-2 space-y-1",children:e.files.map((h,f)=>c.jsx(d6,{file:h,isUser:n},h.file_id||`file-${f}`))})]})})}),d6=ge.memo(function({file:e,isUser:n}){const s=Ny(e.filename||e.url||""),r=["jpg","jpeg","png","gif","webp","bmp"].includes(s),i=e.filename||"Attachment",o=f=>f&&!f.startsWith("/api/"),a=e.preview_url||(o(e.url)?e.url:null),l=a;if(r){const f={width:O0,maxWidth:"100%"};return c.jsxs("div",{className:"rounded-xl border border-black/5 dark:border-white/10 bg-white/70 dark:bg-white/5 p-2",style:f,children:[c.jsx(h6,{src:a,fullUrl:l,alt:i,isUser:n}),!n&&l&&o(l)&&c.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[c.jsx(te,{asChild:!0,size:"sm",variant:"ghost",className:"rounded-xl",children:c.jsxs("a",{href:l,target:"_blank",rel:"noopener noreferrer",children:[c.jsx(io,{size:14,className:"mr-1"})," Open"]})}),c.jsxs(te,{size:"sm",variant:"secondary",className:"rounded-xl",onClick:()=>f_(l,i),children:[c.jsx(pa,{size:14,className:"mr-1"})," Download"]})]})]})}const u=s==="pdf",d=s!=="pptx",h={width:UT,height:c6,maxWidth:"100%"};return c.jsxs("div",{className:"rounded-xl border border-black/5 dark:border-white/10 bg-white/70 dark:bg-white/5 p-3 flex flex-col",style:h,children:[c.jsx("div",{className:"flex flex-wrap items-start justify-between gap-3",children:c.jsxs("div",{className:"min-w-0",children:[c.jsx("div",{className:"flex items-center gap-2 text-xs uppercase tracking-wide text-black/50 dark:text-white/60",children:u?c.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-red-500/10 text-red-700 dark:text-red-300 px-2 py-0.5",children:[c.jsx(Kv,{size:12})," PDF"]}):c.jsx("span",{className:"inline-flex items-center gap-1 rounded-full bg-black/5 dark:bg-white/10 px-2 py-0.5",children:s?s.toUpperCase():"FILE"})}),!n&&c.jsx("div",{className:"mt-1 text-xs font-semibold text-black/80 dark:text-white/85 truncate",children:i})]})}),!n&&l&&c.jsxs("div",{className:"mt-auto pt-3 flex items-center gap-2",children:[d?c.jsx(te,{asChild:!0,size:"sm",variant:"ghost",className:"rounded-xl",children:c.jsxs("a",{href:l,target:"_blank",rel:"noopener noreferrer",children:[c.jsx(io,{size:14,className:"mr-1"})," Open"]})}):null,c.jsxs(te,{size:"sm",variant:"secondary",className:"rounded-xl",onClick:()=>f_(l,i),children:[c.jsx(pa,{size:14,className:"mr-1"})," Download"]})]})]})}),h6=ge.memo(function({src:e,fullUrl:n,alt:s,isUser:r}){const i=e&&_g.has(e),[o,a]=v.useState(i),[l,u]=v.useState(!1);v.useEffect(()=>{e&&_g.has(e)?a(!0):e&&(a(!1),u(!1))},[e]);const d=v.useCallback(()=>{e&&_g.add(e),a(!0)},[e]),h=v.useCallback(()=>{u(!0)},[]),f=v.useMemo(()=>({width:O0,height:l6,maxWidth:"100%"}),[]);if(l)return c.jsx("div",{className:"flex items-center justify-center bg-black/5 dark:bg-white/5 rounded-lg",style:f,children:c.jsx($M,{className:"text-red-400",size:24})});const p=c.jsxs("div",{className:"relative overflow-hidden rounded-lg bg-black/5 dark:bg-white/5",style:{...f,contain:"layout"},children:[e?c.jsx("img",{src:e,alt:s,className:`w-full h-full object-contain transition-opacity duration-150 ${o?"opacity-100":"opacity-0"}`,onLoad:d,onError:h}):null,o?null:c.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-xs text-black/50 dark:text-white/60",children:c.jsx(Ye,{text:"Loading",className:"text-xs text-black/50 dark:text-white/60"})})]});return!r&&n?c.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"block",children:p}):p});function f6({value:t,onChange:e,placeholder:n,onEnter:s}){const r=v.useRef(null);return v.useEffect(()=>{const i=r.current;i&&(i.style.height="0px",i.style.height=Math.min(i.scrollHeight,132)+"px")},[t]),c.jsx("textarea",{ref:r,rows:1,value:t,onChange:i=>e(i.target.value),onKeyDown:i=>{i.key==="Enter"&&!i.shiftKey&&(i.preventDefault(),s==null||s())},placeholder:n,className:"w-full resize-none rounded-2xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-4 py-2 text-sm outline-none focus:ring-2 focus:ring-black/10 dark:focus:ring-white/15 overflow-auto",style:{maxHeight:"132px"}})}function p6({text:t}){const e=HT(t||"Thinking");return c.jsxs("span",{className:"inline-flex items-center gap-2 opacity-80",children:[c.jsx("span",{children:e}),c.jsxs("span",{className:"mmg-ellipsis","aria-hidden":"true",children:[c.jsx("span",{className:"mmg-ellipsis-dot",style:{animationDelay:"0ms"}}),c.jsx("span",{className:"mmg-ellipsis-dot",style:{animationDelay:"120ms"}}),c.jsx("span",{className:"mmg-ellipsis-dot",style:{animationDelay:"240ms"}})]})]})}function ed(t){return t?String(t).replace(/_+Building Proposal\.{3,}_+/gi,"Building Proposal").replace(/_?Building Proposal\.{3,}_?/gi,"Building Proposal"):""}function HT(t){return t?ed(t).replace(/\s*\.{3,}$/,"").trim():"Thinking"}function m6(t){return{id:t.id||t.message_id||crypto.randomUUID(),role:t.role||"assistant",content:ed(t.content||""),files:t.files||t.attachments||[],status:null,is_tool_response:!!t.is_tool_response}}function h_(){const t=new Date().getHours(),e=t>=5&&t<12?"morning":t<17?"afternoon":t<21?"evening":"night";return{id:crypto.randomUUID(),role:"assistant",content:`Good ${e}, how can I help?`,files:[],status:null}}function Ny(t){if(!t)return"";const n=String(t).split("?")[0].split("#")[0].split(".");return n.length>1?n.pop().toLowerCase():""}async function f_(t,e){try{const n=Up(),s=await fetch(t,{headers:n?{Authorization:`Bearer ${n}`}:void 0});if(!s.ok)throw new Error("Download failed");const r=await s.blob(),i=URL.createObjectURL(r),o=document.createElement("a");o.href=i,o.download=e,document.body.appendChild(o),o.click(),o.remove(),setTimeout(()=>URL.revokeObjectURL(i),1e3)}catch{window.open(t,"_blank")}}function Ty(t){return String(t||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function g6(t){if(!t)return"";t=ed(t);const e=[];let n=t.replace(/```(\w*)\n?([\s\S]*?)```/g,(u,d,h)=>(e.push({lang:d,code:h.trim()}),`__CODE_BLOCK_${e.length-1}__`));const s=[];n=n.replace(/`([^`]+)`/g,(u,d)=>(s.push(d),`__INLINE_CODE_${s.length-1}__`));const r=n.split(`
`),i=[];let o=!1,a=null;for(const u of r){const d=u.trim();if(/^_?Building Proposal\.{3,}_?$/i.test(d)){i.push("Building Proposal<br>");continue}const h=u.match(/^__CODE_BLOCK_(\d+)__$/);if(h){o&&(i.push(a==="ul"?"</ul>":"</ol>"),o=!1);const x=e[parseInt(h[1])];i.push(`<pre class="chat-code-block"><code>${Ty(x.code)}</code></pre>`);continue}const f=u.match(/^(#{1,6})\s+(.*)$/);if(f){o&&(i.push(a==="ul"?"</ul>":"</ol>"),o=!1);const x=f[1].length;i.push(`<h${x} class="chat-header">${Ph(f[2])}</h${x}>`);continue}const p=u.match(/^[-*]\s+(.*)$/);if(p){(!o||a!=="ul")&&(o&&i.push("</ol>"),i.push('<ul class="chat-list">'),o=!0,a="ul"),i.push(`<li>${Ph(p[1])}</li>`);continue}const w=u.match(/^\d+\.\s+(.*)$/);if(w){(!o||a!=="ol")&&(o&&i.push("</ul>"),i.push('<ol class="chat-numbered-list">'),o=!0,a="ol"),i.push(`<li>${Ph(w[1])}</li>`);continue}o&&(i.push(a==="ul"?"</ul>":"</ol>"),o=!1),u.trim()===""?i.push("<br>"):i.push(Ph(u)+"<br>")}o&&i.push(a==="ul"?"</ul>":"</ol>");let l=i.join("");return s.forEach((u,d)=>{l=l.replace(`__INLINE_CODE_${d}__`,`<code class="chat-inline-code">${Ty(u)}</code>`)}),l}function Ph(t){return t?Ty(t).replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer" class="chat-link">$1</a>').replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/\*(.+?)\*/g,"<em>$1</em>"):""}function Se({label:t,children:e,className:n,labelClassName:s,withGap:r=!0}){return c.jsxs("label",{className:Te("block",r&&"space-y-1",n),children:[c.jsx("div",{className:Te("text-xs font-semibold text-black/60 dark:text-white/65",s),children:t}),e]})}function at({value:t="",options:e=[],onChange:n,placeholder:s="Select...",disabled:r=!1,className:i,contentClassName:o,useNativeSelect:a=!1}){const l=v.useMemo(()=>e.find(u=>u.value===t),[e,t]);return a?c.jsxs("select",{className:Te("w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none","disabled:opacity-60 disabled:cursor-not-allowed",i),value:t,onChange:u=>n==null?void 0:n(u.target.value),disabled:r,children:[s?c.jsx("option",{value:"",disabled:!0,children:s}):null,e.map(u=>c.jsx("option",{value:u.value,disabled:u.disabled,children:u.label},u.value))]}):r?c.jsxs("button",{type:"button",disabled:!0,className:Te("w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none","flex items-center justify-between gap-2 text-left","disabled:opacity-60 disabled:cursor-not-allowed",i),children:[c.jsx("span",{className:Te("truncate",!l&&"text-black/50 dark:text-white/55"),children:l?l.label:s}),c.jsx(es,{size:16,className:"text-black/50 dark:text-white/60"})]}):c.jsxs(Xp,{children:[c.jsx(Jp,{asChild:!0,children:c.jsxs("button",{type:"button",disabled:r,className:Te("w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none","flex items-center justify-between gap-2 text-left","disabled:opacity-60 disabled:cursor-not-allowed",i),children:[c.jsx("span",{className:Te("truncate",!l&&"text-black/50 dark:text-white/55"),children:l?l.label:s}),c.jsx(es,{size:16,className:"text-black/50 dark:text-white/60"})]})}),c.jsx(Rd,{align:"start",className:Te("min-w-[220px]",o),children:c.jsx("div",{className:"max-h-[240px] overflow-y-auto space-y-1",children:e.length?e.map(u=>{const d=u.value===t;return c.jsx(Vu,{disabled:u.disabled,onSelect:()=>{u.disabled||n==null||n(u.value)},className:Te("cursor-pointer gap-0 py-1",d&&"bg-black/5 dark:bg-white/10 font-semibold"),children:c.jsx("span",{className:"min-w-0 truncate",children:u.label})},u.value)}):c.jsx("div",{className:"px-3 py-2 text-sm text-black/60 dark:text-white/65",children:"No options available."})})})]})}function x6({locations:t,timeOfDay:e,side:n,templateOptions:s,getTemplateKey:r,defaultFrameConfig:i,templateKey:o,setTemplateKey:a,venueType:l,timeOfDayDisabled:u,locationOptions:d}){const[h,f]=v.useState(""),p=o??h,w=a??f,[x,y]=v.useState(null),[g,m]=v.useState(i),[b,k]=v.useState(""),[_,C]=v.useState(null),[S,j]=v.useState([]),[N,T]=v.useState(!1),[L,D]=v.useState(""),O=ge.useRef([]),$=v.useMemo(()=>{const P=new Map;return s.forEach(F=>{P.set(r(F),F)}),P},[r,s]),I=v.useMemo(()=>{const P=new Map;return(d||[]).forEach(F=>{const V=(F==null?void 0:F.location_key)??(F==null?void 0:F.key)??(F==null?void 0:F.id)??(F==null?void 0:F.value)??F;if(!V)return;const H=(F==null?void 0:F.display_name)??(F==null?void 0:F.name)??(F==null?void 0:F.label)??V;P.set(String(V),H)}),P},[d]),A=v.useMemo(()=>t.length?t.map(P=>I.get(String(P))||P).filter(Boolean).join(", "):"",[I,t]),W=t.length&&(_||b.trim())&&!N;v.useEffect(()=>{if(!p){y(null),m(i);return}const P=$.get(p);if(!P){y(null),m(i);return}y(P),m(ff(P.config,i))},[i,p,$]),v.useEffect(()=>{p&&w("")},[n,e,t,l,u]),v.useEffect(()=>{O.current=S},[S]),v.useEffect(()=>()=>{g_(O.current)},[]);async function E(){if(W){D("");try{T(!0);const P=new FormData,F=u?"all":e;P.append("location_key",t[0]||""),P.append("location_keys",JSON.stringify(t)),P.append("venue_type",l),x?(P.append("time_of_day",x.time_of_day||F||"all"),P.append("side",x.side||n||"all"),P.append("specific_photo",x.photo),P.append("frame_config",JSON.stringify(g))):(P.append("time_of_day",F||"all"),P.append("side",n||"all")),b.trim()?P.append("ai_prompt",b.trim()):_&&P.append("creative",_);const V=await p3(P),H=await b6(V,A),he={id:crypto.randomUUID(),location:A,images:H};j(ee=>{const U=[he,...ee];if(U.length>3){const Q=U.pop();g_([Q])}return U})}catch(P){D((P==null?void 0:P.message)||"Unable to generate mockup.")}finally{T(!1)}}}return{templateKey:p,setTemplateKey:w,aiPrompt:b,setAiPrompt:k,creativeFile:_,setCreativeFile:C,lastResults:S,generating:N,generateError:L,setGenerateError:D,onGenerate:E,canGenerate:W}}function y6(t){const e=x6(t);return c.jsx(v6,{...t,...e})}function v6({locations:t,setLocations:e,venueType:n,setVenueType:s,setTemplateKey:r,locationOptions:i,locationsQuery:o,timeOfDay:a,setTimeOfDay:l,timeOfDayDisabled:u,sideDisabled:d,side:h,setSide:f,timeOfDayOptions:p,sideOptions:w,venueTypeOptions:x,templateKey:y,templateOptions:g,templatesQuery:m,templateThumbs:b,getTemplateKey:k,creativeFile:_,setCreativeFile:C,creativeDragActive:S,handleCreativeDragOver:j,handleCreativeDragLeave:N,handleCreativeDrop:T,aiPrompt:L,setAiPrompt:D,generateError:O,setGenerateError:$,generating:I,onGenerate:A,canGenerate:W,lastResults:E,useNativeSelects:P}){const F=v.useMemo(()=>i.map(H=>{const he=(H==null?void 0:H.key)??(H==null?void 0:H.id)??(H==null?void 0:H.value)??H,ee=(H==null?void 0:H.name)??(H==null?void 0:H.label)??he;return{value:he,label:ee}}),[i]);function V(){e([]),s("all"),l("all"),f("all"),r(""),C(null),D(""),$("")}return c.jsxs(_t,{className:"h-full flex flex-col",children:[c.jsx(Kt,{children:c.jsx(Qt,{children:"Mockup Generator"})}),c.jsxs(Gt,{className:"flex-1 min-h-0 overflow-y-auto space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[c.jsxs(Se,{label:"Location",children:[c.jsx(at,{value:t[0]||"",options:F,placeholder:"Select a location",onChange:H=>{e(H?[H]:[]),r("")},useNativeSelect:P}),o.isLoading?c.jsx("div",{className:"mt-1 text-xs text-black/50 dark:text-white/60",children:c.jsx(Ye,{text:"Loading locations"})}):null]}),c.jsx(Se,{label:"Venue Type",children:c.jsx(at,{value:n,options:x,onChange:H=>s(H),useNativeSelect:P})}),!u&&c.jsx(Se,{label:"Time of Day",children:c.jsx(at,{value:a,options:p,onChange:H=>l(H),useNativeSelect:P})}),!d&&c.jsx(Se,{label:"Billboard Side",children:c.jsx(at,{value:h,options:w,onChange:H=>f(H),useNativeSelect:P})})]}),t.length?c.jsxs("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white/40 dark:bg-white/5 p-4 shadow-soft space-y-3",children:[c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Templates (optional)"}),c.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:"Select a template or keep random."})]}),y?c.jsx(te,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:()=>r(""),children:"Use random"}):null]}),m.isLoading?c.jsx(Ye,{text:"Loading templates",className:"text-sm text-black/60 dark:text-white/65"}):null,!m.isLoading&&!g.length?c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No templates for this selection."}):null,c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-2",children:g.map(H=>{const he=k(H),ee=he===y,U=b[he],Q=H.environment||n||"all",de=H.time_of_day||(u?"all":a)||"all",Z=H.side||(d?"all":h)||"all";return c.jsxs("div",{className:Te("rounded-xl border border-black/5 dark:border-white/10 bg-white/60 dark:bg-white/5 p-3 text-left text-sm transition flex flex-col",ee?"border-2":"hover:bg-black/5 dark:hover:bg-white/10"),style:ee?{borderColor:"rgb(var(--brand-accent) / 0.6)",boxShadow:"0 0 0 1px rgb(var(--brand-accent) / 0.25)"}:void 0,children:[c.jsxs("button",{type:"button",onClick:()=>r(he),className:"text-left flex flex-col flex-1",children:[c.jsx("div",{className:"overflow-hidden rounded-lg border border-black/5 dark:border-white/10 bg-black/5",children:U?c.jsx("img",{src:U,alt:H.photo,className:"w-full h-40 object-cover",loading:"lazy"}):c.jsx("div",{className:"h-40 grid place-items-center text-xs text-black/50 dark:text-white/60",children:c.jsx(Ye,{text:"Loading",className:"text-xs text-black/50 dark:text-white/60"})})}),c.jsxs("div",{className:"mt-auto pt-2 space-y-1",children:[c.jsx("div",{className:"font-semibold truncate",children:H.photo}),c.jsxs("div",{className:"text-xs text-black/55 dark:text-white/60",children:[Q,"/",de,"/",Z," - ",H.frame_count," frame",H.frame_count>1?"s":""]})]})]}),c.jsx("div",{className:"pt-2",children:U?c.jsx(te,{variant:"secondary",size:"sm",className:"w-full rounded-xl",asChild:!0,children:c.jsxs("a",{href:U,target:"_blank",rel:"noreferrer",children:[c.jsx(io,{size:16,className:"mr-2"}),"Open"]})}):c.jsx(te,{variant:"secondary",size:"sm",className:"w-full rounded-xl",disabled:!0,children:"Open"})})]},he)})})]}):null,c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsx(Se,{label:"Upload Creative/Ad Image",children:_?c.jsxs("div",{className:`flex items-center justify-between rounded-xl bg-black/5 dark:bg-white/10 px-3 py-2 text-sm min-h-[120px] ${S?"ring-2 ring-black/20 dark:ring-white/30":""}`,onDragOver:j,onDragLeave:N,onDrop:T,children:[c.jsx("div",{className:"truncate",children:_.name}),c.jsx("button",{className:"opacity-70 hover:opacity-100",onClick:()=>C(null),children:"x"})]}):c.jsxs("label",{className:`block cursor-pointer rounded-xl border border-dashed border-black/10 dark:border-white/15 px-4 py-5 text-center text-sm bg-white/50 dark:bg-white/5 min-h-[120px] ${S?"ring-2 ring-black/20 dark:ring-white/30":""}`,onDragOver:j,onDragLeave:N,onDrop:T,children:[c.jsx("input",{type:"file",className:"hidden",accept:"image/jpeg,image/png,image/webp,image/gif",onChange:H=>{var he;return C(((he=H.target.files)==null?void 0:he[0])||null)}}),c.jsx("div",{className:"font-semibold mb-1",children:"Click to upload/ Drag and Drop an Image"}),c.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:"JPG, PNG, WEBP, GIF up to 10MB"})]})}),c.jsx(Se,{label:"Or use AI prompt",children:c.jsx("textarea",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-black/10 dark:focus:ring-white/15 min-h-[120px]",value:L,onChange:H=>D(H.target.value),placeholder:"Describe what you want to generate..."})})]}),O?c.jsx("div",{className:"rounded-xl bg-red-50/70 text-red-700 px-4 py-2 text-sm dark:bg-red-500/10 dark:text-red-300",children:O}):null,c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(te,{className:"rounded-2xl",onClick:A,disabled:!W,children:I?c.jsx(Ye,{text:"Generating Mockup"}):"Generate Mockup"}),c.jsx(te,{variant:"secondary",className:"rounded-2xl",onClick:V,disabled:I,children:"Reset"})]}),c.jsxs("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white/40 dark:bg-white/5 p-4",children:[!E.length&&!I?c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"Result will appear here"}):null,I?c.jsx(Ye,{text:"Processing mockup",className:"text-sm text-black/60 dark:text-white/65"}):null,E.length?c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Last 3 Generated Mockups"}),E.map(H=>{var he;return c.jsxs("div",{className:"space-y-3",children:[H.location?c.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:H.location}):null,(he=H.images)!=null&&he.length?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-2",children:H.images.map((ee,U)=>c.jsxs("div",{className:"rounded-xl border border-black/5 dark:border-white/10 bg-white/60 dark:bg-white/5 p-3 text-sm transition flex flex-col",children:[c.jsx("a",{href:ee.url,target:"_blank",rel:"noopener noreferrer",className:"overflow-hidden rounded-lg border border-black/5 dark:border-white/10 bg-black/5",children:c.jsx("img",{src:ee.url,alt:ee.label||"Generated mockup",className:"w-full h-40 object-cover",loading:"lazy"})}),c.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[c.jsx(te,{asChild:!0,size:"sm",variant:"ghost",className:"rounded-xl",children:c.jsxs("a",{href:ee.url,target:"_blank",rel:"noopener noreferrer",children:[c.jsx(io,{size:14,className:"mr-1"}),"Open"]})}),c.jsx(te,{size:"sm",variant:"secondary",className:"rounded-xl",children:c.jsxs("span",{role:"link",tabIndex:0,onClick:Q=>{Q.preventDefault(),x_(ee.url,ee.filename)},onKeyDown:Q=>{(Q.key==="Enter"||Q.key===" ")&&(Q.preventDefault(),x_(ee.url,ee.filename))},className:"inline-flex items-center",children:[c.jsx(pa,{size:14,className:"mr-1"}),"Download"]})})]})]},`${H.id}-img-${U}`))}):c.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:"No images returned yet."})]},H.id)})]}):null]})]})]})}function p_(t){return typeof Blob<"u"&&t instanceof Blob}async function b6(t,e){if(!t)return[];if(t instanceof Response){const i=await t.blob();return i?[Sg(i,e,1)]:[]}if(p_(t))return[Sg(t,e,1)];const n=t,s=(n==null?void 0:n.images)||(n==null?void 0:n.image_urls)||(n==null?void 0:n.urls)||(n==null?void 0:n.results)||(n==null?void 0:n.files)||(n==null?void 0:n.data)||null,r=Array.isArray(s)?s:n!=null&&n.url?[n.url]:[];return r.length?r.map((i,o)=>{if(typeof i=="string")return m_(i,e,o+1);if(p_(i))return Sg(i,e,o+1);const a=(i==null?void 0:i.url)||(i==null?void 0:i.image_url)||(i==null?void 0:i.file_url)||"";return m_(a,e,o+1)}):[]}function Sg(t,e,n){const s=URL.createObjectURL(t),r=Py(s,e,n);return{url:s,filename:r}}function m_(t,e,n){return t?{url:t,filename:Py(t,e,n)}:{url:"",filename:Py("",e,n)}}function Py(t,e,n){const s=w6(t);if(s)return s;const r=(e||"result").toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,""),i=n?`_${n}`:"";return`mockup_${r||"result"}${i}.jpg`}function w6(t){if(!t)return"";try{const n=new URL(t,window.location.href).pathname.split("/").filter(Boolean);return n.length?decodeURIComponent(n[n.length-1]):""}catch{const n=t.split("?")[0].split("#")[0].split("/").filter(Boolean);return n.length?decodeURIComponent(n[n.length-1]):""}}function g_(t){(Array.isArray(t)?t:[]).forEach(n=>{((n==null?void 0:n.images)||[]).forEach(s=>{var r;(r=s==null?void 0:s.url)!=null&&r.startsWith("blob:")&&URL.revokeObjectURL(s.url)})})}async function x_(t,e){const s=await(await fetch(t)).blob(),r=document.createElement("a");r.href=URL.createObjectURL(s),r.download=e||"download",document.body.appendChild(r),r.click(),r.remove(),setTimeout(()=>URL.revokeObjectURL(r.href),1e3)}function k6(t,e,n){return t.length?t.length<=n?t.join(", "):`${t.slice(0,n).join(", ")} +${t.length-n}`:e}function _6({value:t=[],options:e=[],onChange:n,placeholder:s="Select...",disabled:r=!1,maxLabelCount:i=2,className:o,contentClassName:a}){const l=v.useMemo(()=>new Set(t),[t]),u=v.useMemo(()=>e.filter(f=>l.has(f.value)).map(f=>f.label),[e,l]);function d(f){r||n&&(l.has(f)?n(t.filter(p=>p!==f)):n([...t,f]))}const h=k6(u,s,i);return c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Xp,{children:[c.jsx(Jp,{asChild:!0,children:c.jsxs("button",{type:"button",disabled:r,className:Te("w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none","flex items-center justify-between gap-2 text-left","disabled:opacity-60 disabled:cursor-not-allowed",o),children:[c.jsx("span",{className:Te("truncate",!u.length&&"text-black/50 dark:text-white/55"),children:h}),c.jsx(es,{size:16,className:"text-black/50 dark:text-white/60"})]})}),c.jsx(Rd,{align:"start",className:Te("min-w-[220px]",a),children:c.jsx("div",{className:"max-h-[240px] overflow-y-auto space-y-1",children:e.length?e.map(f=>{const p=l.has(f.value);return c.jsxs(Vu,{onSelect:w=>{w.preventDefault(),d(f.value)},className:"cursor-pointer py-1",children:[c.jsx("span",{className:Te("h-4 w-4 rounded-full flex items-center justify-center transition-colors",p?"bg-black text-white dark:bg-white dark:text-black shadow-soft":"bg-black/5 dark:bg-white/10 text-black/40 dark:text-white/40"),children:c.jsx(ra,{size:10,className:p?"opacity-100":"opacity-0"})}),c.jsx("span",{className:"min-w-0 truncate",children:f.label})]},f.value)}):c.jsx("div",{className:"px-3 py-2 text-sm text-black/60 dark:text-white/65",children:"No options available."})})})]}),u.length?c.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(f=>c.jsx("span",{className:"text-[11px] rounded-md bg-black/5 dark:bg-white/10 text-black/70 dark:text-white/70 px-2",children:f},f))}):null]})}function S6({locations:t,setLocations:e,venueType:n,setVenueType:s,assetType:r,setAssetType:i,setTemplateKey:o,locationOptions:a,locationsQuery:l,assetTypeOptions:u,assetTypesQuery:d,timeOfDay:h,setTimeOfDay:f,timeOfDayDisabled:p,sideDisabled:w,side:x,setSide:y,timeOfDayOptions:g,sideOptions:m,venueTypeOptions:b,editingTemplate:k,editingTemplateLoading:_,stopEditTemplate:C,templatesOpen:S,setTemplatesOpen:j,templateOptions:N,templatesQuery:T,templateThumbs:L,getTemplateKey:D,startEditTemplate:O,deleteTemplate:$,setupPhoto:I,setSetupPhoto:A,handleSetupPhoto:W,handleSetupDragOver:E,handleSetupDragLeave:P,handleSetupDrop:F,setupDragActive:V,handleSetupPhotoClear:H,framesJson:he,setFramesJson:ee,setFramesJsonDirty:U,applyFramesJsonToCanvas:Q,buildFramesPayload:de,setupImageReady:Z,greenscreenOpen:be,setGreenscreenOpen:Ae,greenscreenColor:me,setGreenscreenColor:fe,greenscreenDetecting:De,colorTolerance:J,setColorTolerance:pe,RangeField:ie,handleGreenscreenDetect:K,canDetectGreenscreen:G,hasActiveFrame:le,frameSettingsOpen:Y,setFrameSettingsOpen:B,setupFrameConfig:xe,handleSetupFrameConfigChange:je,FrameConfigControls:Ce,previewOpen:Le,setPreviewOpen:we,testPreviewMode:oe,setTestPreviewMode:Ne,testPreviewImgRef:tt,testPreviewUrlRef:ht,previewImgRef:Dt,drawPreview:ur,activeTestCreativeFile:Ea,updateTestCreativeForActive:lm,generateTestPreview:cm,testPreviewing:Dr,activeFrameIndex:$d,canvasRef:um,canvasWidth:bo,canvasHeight:Na,handleCanvasPointerDown:Ta,handleCanvasPointerMove:Pa,handleCanvasPointerUp:mc,handleCanvasWheel:Fd,setupHint:At,handleZoomOut:ft,handleZoomIn:Ws,handleFitToScreen:Vs,zoomPercent:ls,pixelUpscale:zd,setPixelUpscale:Ra,setupError:Aa,setupMessage:Vn,addFrame:ct,resetCurrentFrame:gt,saveSetup:Oa,setupSaving:pn,clearAllFrames:Rn,currentPoints:gc,frameCount:wo,useNativeSelects:hi}){var yc,_o,vc;const[Es,ko]=v.useState({open:!1,template:null}),[fi,pi]=v.useState(!1),xc=((yc=Es.template)==null?void 0:yc.time_of_day)||"all",dm=((_o=Es.template)==null?void 0:_o.side)||"all",Bd=((vc=Es.template)==null?void 0:vc.storage_key)||"",Ud=Bd?` for ${Bd}`:"",Hd=Es.template?`Delete "${Es.template.photo}" (${xc}/${dm})${Ud}? This removes the photo and its frames.`:"Delete this template? This removes the photo and its frames.";async function hm(){if(!(!Es.template||fi)){pi(!0);try{await $(Es.template)}finally{pi(!1),ko({open:!1,template:null})}}}function Wd(){fi||ko({open:!1,template:null})}return c.jsxs(c.Fragment,{children:[c.jsxs(_t,{className:"h-full flex flex-col",children:[c.jsx(Kt,{children:c.jsx(Qt,{children:"Mockup Setup"})}),c.jsxs(Gt,{className:"flex-1 min-h-0 overflow-y-auto space-y-4",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3",children:[c.jsxs(Se,{label:"Location",children:[c.jsx(_6,{value:t,onChange:ae=>{e(ae),o("")},options:a.map(ae=>{const An=(ae==null?void 0:ae.key)??(ae==null?void 0:ae.id)??(ae==null?void 0:ae.value)??ae,kn=(ae==null?void 0:ae.name)??(ae==null?void 0:ae.label)??An;return{value:An,label:kn}}),placeholder:"Select locations"}),l.isLoading?c.jsx("div",{className:"mt-1 text-xs text-black/50 dark:text-white/60",children:c.jsx(Ye,{text:"Loading locations"})}):null]}),c.jsxs(Se,{label:"Asset Type",children:[c.jsx(at,{value:r,options:[{value:"",label:"All asset types"},...u.map(ae=>typeof ae=="string"?{value:ae,label:ae}:{value:(ae==null?void 0:ae.type_key)??(ae==null?void 0:ae.key)??(ae==null?void 0:ae.id)??(ae==null?void 0:ae.value)??"",label:(ae==null?void 0:ae.name)??(ae==null?void 0:ae.label)??(ae==null?void 0:ae.type_key)??"Unknown"})],placeholder:"Select asset type",onChange:ae=>i(ae),useNativeSelect:hi}),d!=null&&d.isLoading?c.jsx("div",{className:"mt-1 text-xs text-black/50 dark:text-white/60",children:c.jsx(Ye,{text:"Loading asset types"})}):null]}),c.jsx(Se,{label:"Venue Type",children:c.jsx(at,{value:n,options:b,placeholder:"Select venue type",onChange:ae=>s(ae),useNativeSelect:hi})}),!p&&c.jsx(Se,{label:"Time of Day",children:c.jsx(at,{value:h,options:g,placeholder:"Select time of day",onChange:ae=>f(ae),useNativeSelect:hi})}),!w&&c.jsx(Se,{label:"Billboard Side",children:c.jsx(at,{value:x,options:m,placeholder:"Select side",onChange:ae=>y(ae),useNativeSelect:hi})})]}),k?c.jsxs("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white/50 dark:bg-white/5 px-4 py-3 flex flex-wrap items-center justify-between gap-2",children:[c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-semibold",children:"Editing template:"})," ",k.photo," (",k.time_of_day,"/",k.side,")"]}),c.jsxs("div",{className:"flex items-center gap-2",children:[_?c.jsx(Ye,{text:"Loading",className:"text-xs text-black/50 dark:text-white/60"}):null,c.jsx(te,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:C,children:"Stop editing"})]})]}):null,k?null:c.jsxs("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white/40 dark:bg-white/5 p-4 shadow-soft",children:[c.jsxs("button",{type:"button",className:"flex w-full items-center justify-between gap-3 text-left",onClick:()=>j(ae=>!ae),"aria-expanded":S,children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Existing templates"}),c.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:t.length?`${N.length} template${N.length===1?"":"s"}`:"Select at least one location to load templates."})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-black/50 dark:text-white/55",children:[c.jsx("span",{children:S?"Hide":"Show"}),c.jsx(es,{size:16,className:Te("transition-transform",S&&"rotate-180")})]})]}),S?c.jsxs("div",{className:"mt-3 space-y-2",children:[T.isLoading?c.jsx(Ye,{text:"Loading templates",className:"text-sm text-black/60 dark:text-white/65"}):null,!T.isLoading&&(!N.length||!t.length)?c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No templates for this selection."}):null,c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-2",children:N.map(ae=>{const An=D(ae);return c.jsxs("div",{className:"rounded-xl border border-black/5 dark:border-white/10 bg-white/60 dark:bg-white/5 p-3 text-sm transition flex flex-col",children:[c.jsx("div",{className:"overflow-hidden rounded-lg border border-black/5 dark:border-white/10 bg-black/5",children:L[An]?c.jsx("img",{src:L[An],alt:ae.photo,className:"w-full h-40 object-cover",loading:"lazy"}):c.jsx("div",{className:"h-40 grid place-items-center text-xs text-black/50 dark:text-white/60",children:c.jsx(Ye,{text:"Loading",className:"text-xs text-black/50 dark:text-white/60"})})}),c.jsxs("div",{className:"mt-auto pt-2 space-y-2",children:[c.jsx("div",{className:"font-semibold truncate",children:ae.photo}),c.jsxs("div",{className:"text-xs text-black/55 dark:text-white/60",children:[ae.time_of_day,"/",ae.side," - ",ae.frame_count," frame",ae.frame_count>1?"s":""]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(te,{variant:"secondary",size:"sm",className:"rounded-xl",onClick:()=>O(ae),disabled:_||fi,children:"Edit"}),c.jsx(te,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:()=>ko({open:!0,template:ae}),disabled:fi,children:"Delete"})]})]})]},An)})})]}):null]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsx(Se,{label:"Upload Billboard Photo",children:I?c.jsxs("div",{className:`flex items-center justify-between rounded-xl bg-black/5 dark:bg-white/10 px-3 py-2 text-sm min-h-[120px] ${V?"ring-2 ring-black/20 dark:ring-white/30":""}`,onDragOver:E,onDragLeave:P,onDrop:F,children:[c.jsx("div",{className:"truncate",children:I.name}),c.jsx("button",{className:"opacity-70 hover:opacity-100",onClick:H,children:"x"})]}):c.jsxs("label",{className:`block cursor-pointer rounded-xl border border-dashed border-black/10 dark:border-white/15 px-4 py-5 text-center text-sm bg-white/50 dark:bg-white/5 min-h-[120px] ${V?"ring-2 ring-black/20 dark:ring-white/30":""}`,onDragOver:E,onDragLeave:P,onDrop:F,children:[c.jsx("input",{type:"file",className:"hidden",accept:"image/jpeg,image/png,image/webp",onChange:ae=>{var kn;const An=(kn=ae.target.files)==null?void 0:kn[0];An&&(A(An),W(An))}}),c.jsx("div",{className:"font-semibold mb-1",children:"Click to upload/ Drag and Drop an Image"}),c.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:"JPG, PNG, WEBP up to 20MB"})]})}),c.jsxs(Se,{label:"Frames Data",children:[c.jsx("textarea",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-black/10 dark:focus:ring-white/15 min-h-[120px] font-mono",value:he,onChange:ae=>{ee(ae.target.value),U(!0)},placeholder:'[{"points":[0,0,0,0],"config":{"brightness":100}}]'}),c.jsxs("div",{className:"flex items-center justify-between text-xs text-black/50 dark:text-white/60",children:[c.jsx("span",{children:"Auto-filled from canvas. Edit to override."}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{type:"button",className:"text-xs underline",onClick:Q,children:"Apply to canvas"}),c.jsx("button",{type:"button",className:"text-xs underline",onClick:()=>{U(!1);const ae=de();ee(ae.length?JSON.stringify(ae,null,2):"[]")},children:"Sync from canvas"})]})]})]})]}),Z?c.jsxs(c.Fragment,{children:[c.jsxs(zt,{className:"bg-white/50 dark:bg-white/5 p-4",children:[c.jsxs("button",{type:"button",className:"flex w-full items-center justify-between gap-3 text-left",onClick:()=>Ae(ae=>!ae),"aria-expanded":be,children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Green Screen Detection"}),c.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:"Detect billboard frame using chroma key."})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-black/50 dark:text-white/55",children:[c.jsx("span",{children:be?"Hide":"Edit"}),c.jsx(es,{size:16,className:Te("transition-transform",be&&"rotate-180")})]})]}),be?c.jsxs("div",{className:"mt-3 space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("input",{type:"color",value:me,onChange:ae=>fe(ae.target.value.toUpperCase()),className:"h-10 w-16 rounded-lg border border-black/10 dark:border-white/20"}),c.jsx("input",{type:"text",value:me,onChange:ae=>fe(ae.target.value.toUpperCase()),className:"flex-1 rounded-xl bg-white/70 dark:bg-white/10 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none font-mono"})]}),c.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:"Tip: Shift+click to pick a color. Shift+drag or middle mouse pans."}),c.jsx(ie,{label:"Color Tolerance",value:J,min:10,max:100,onChange:ae=>pe(ae),helper:"Lower is stricter, higher is more forgiving."}),c.jsx(te,{className:"rounded-2xl w-full",onClick:K,disabled:!G||De,children:De?c.jsx(Ye,{text:"Detecting"}):"Detect Green Screen Now"})]}):null]}),le?c.jsxs("div",{className:"rounded-2xl bg-blue-50/70 dark:bg-blue-500/10 ring-1 ring-blue-500/20 p-4 shadow-soft",children:[c.jsxs("button",{type:"button",className:"flex w-full items-center justify-between gap-3 text-left",onClick:()=>B(ae=>!ae),"aria-expanded":Y,children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100",children:"Current Frame Settings"}),c.jsx("div",{className:"text-xs text-blue-800 dark:text-blue-200",children:"Adjust the current frame appearance."})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-800 dark:text-blue-200",children:[c.jsx("span",{children:Y?"Hide":"Edit"}),c.jsx(es,{size:16,className:Te("transition-transform",Y&&"rotate-180")})]})]}),Y?c.jsxs("div",{className:"mt-3 space-y-3",children:[c.jsx(Ce,{config:xe,onChange:je}),c.jsx("div",{className:"text-xs text-blue-800 dark:text-blue-200",children:"Settings apply to the current frame only."})]}):null]}):null,le?c.jsxs("div",{className:"rounded-2xl bg-blue-50/70 dark:bg-blue-500/10 ring-1 ring-blue-500/20 p-4 shadow-soft",children:[c.jsxs("button",{type:"button",className:"flex w-full items-center justify-between gap-3 text-left",onClick:()=>we(ae=>!ae),"aria-expanded":Le,children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100",children:"Test Preview Mode"}),c.jsx("div",{className:"text-xs text-blue-800 dark:text-blue-200",children:"Preview creative on the current frame before saving."})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-800 dark:text-blue-200",children:[c.jsx("span",{children:Le?"Hide":"Edit"}),c.jsx(es,{size:16,className:Te("transition-transform",Le&&"rotate-180")})]})]}),Le?c.jsxs("div",{className:"mt-3 space-y-2",children:[c.jsxs("label",{className:"flex items-center gap-3 text-sm",children:[c.jsx("input",{type:"checkbox",checked:oe,onChange:ae=>{Ne(ae.target.checked),ae.target.checked||(tt.current=null,ht.current="",ur())}}),c.jsx("span",{className:"font-semibold text-blue-900 dark:text-blue-100",children:"Enable preview"})]}),oe?c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-xs font-semibold text-blue-900 dark:text-blue-100",children:"Upload Test Creative"}),c.jsx("input",{type:"file",accept:"image/*",onChange:ae=>{var An;return lm(((An=ae.target.files)==null?void 0:An[0])||null)},className:"w-full text-sm"}),Ea?c.jsxs("div",{className:"text-xs text-blue-800 dark:text-blue-200",children:["Selected: ",Ea.name]}):null,c.jsx(te,{className:"rounded-2xl w-full",onClick:cm,disabled:!Ea||!I||!le||Dr,children:Dr?c.jsx(Ye,{text:"Generating"}):"Generate Test Preview"}),$d>=0?c.jsxs("div",{className:"text-xs text-blue-800 dark:text-blue-200",children:["Preview applies to frame ",$d+1,"."]}):null]}):null]}):null]}):null]}):null]}),Z?c.jsxs("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white/40 dark:bg-white/5 p-3 space-y-2",children:[c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(te,{variant:"secondary",size:"sm",className:"h-8 px-3",onClick:ft,disabled:!Dt.current,children:"-"}),c.jsx(te,{variant:"secondary",size:"sm",className:"h-8 px-3",onClick:Ws,disabled:!Dt.current,children:"+"}),c.jsx(te,{variant:"ghost",size:"sm",onClick:Vs,disabled:!Dt.current,children:"Fit"}),c.jsxs("span",{className:"text-xs text-black/60 dark:text-white/60",children:[ls,"%"]})]}),c.jsxs("label",{className:"flex items-center gap-2 text-xs text-black/70 dark:text-white/70",children:[c.jsx("input",{type:"checkbox",checked:zd,onChange:ae=>Ra(ae.target.checked)}),"Pixel Upscale"]})]}),c.jsx("canvas",{ref:um,width:bo,height:Na,className:"w-full h-auto rounded-xl border border-black/10 dark:border-white/10 bg-white",onPointerDown:Ta,onPointerMove:Pa,onPointerUp:mc,onPointerLeave:mc,onWheel:Fd,style:{touchAction:"none"}}),c.jsx("div",{className:"text-xs text-black/60 dark:text-white/60",children:At})]}):c.jsx("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-black/5 dark:bg-white/10 px-4 py-3 text-sm text-black/60 dark:text-white/65",children:"Upload a billboard photo or pick an existing template to enable the canvas tools."})]}),Aa?c.jsx("div",{className:"rounded-xl bg-red-50/70 text-red-700 px-4 py-2 text-sm dark:bg-red-500/10 dark:text-red-300",children:Aa}):null,Vn?c.jsx("div",{className:"rounded-xl bg-green-50/70 text-green-700 px-4 py-2 text-sm dark:bg-green-500/10 dark:text-green-200",children:Vn}):null,c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx(te,{className:"rounded-2xl",onClick:ct,disabled:gc.length!==4,children:"Add Frame"}),c.jsx(te,{variant:"secondary",className:"rounded-2xl",onClick:gt,children:"Reset Current Frame"}),c.jsx(te,{className:"rounded-2xl",onClick:Oa,disabled:pn||!t.length||!I,children:pn?c.jsx(Ye,{text:"Saving"}):k?"Save Changes":"Save All Frames"}),c.jsx(te,{variant:"ghost",className:"rounded-2xl",onClick:()=>Rn(!1),children:"Clear All Frames"})]}),wo?c.jsxs("div",{className:"rounded-xl bg-blue-50/70 text-blue-900 px-3 py-2 text-sm dark:bg-blue-500/10 dark:text-blue-100",children:["Frames configured: ",wo]}):null]})]}),c.jsx(cc,{open:Es.open,message:Hd,onClose:Wd,onConfirm:hm})]})}const WT=[{value:"all",label:"All (Default)"},{value:"day",label:"Day"},{value:"night",label:"Night"}],j6=WT.filter(t=>t.value!=="all"),VT=[{value:"all",label:"All (Default)"},{value:"gold",label:"Gold"},{value:"silver",label:"Silver"},{value:"single_side",label:"Single Side"}],C6=VT.filter(t=>t.value!=="all"),qT=[{value:"all",label:"All (Default)"},{value:"outdoor",label:"Outdoor"},{value:"indoor",label:"Indoor"}],E6=qT.filter(t=>t.value!=="all"),y_=!1,Rh=1200,Ah=800,N6=.5,T6=4,v_=.1,P6=4,Io={brightness:100,contrast:100,saturation:100,depthMultiplier:15,lightDirection:"top",imageBlur:0,edgeBlur:1,overlayOpacity:0,shadowIntensity:0,lightingAdjustment:0,colorTemperature:0,vignette:0,edgeSmoother:3,sharpening:0},KT=[{value:"top-left",label:"Top Left",glyph:""},{value:"top",label:"Top",glyph:""},{value:"top-right",label:"Top Right",glyph:""},{value:"left",label:"Left",glyph:""},{value:"center",label:"Center",glyph:""},{value:"right",label:"Right",glyph:""},{value:"bottom-left",label:"Bottom Left",glyph:""},{value:"bottom",label:"Bottom",glyph:""},{value:"bottom-right",label:"Bottom Right",glyph:""}],R6=KT.reduce((t,e)=>(t[e.value]=e.label,t),{});function A6(t,e,n){const s=(t-e)/(n-e)*100;return`linear-gradient(to right, rgb(var(--brand-accent, 102 126 234)) ${s}%, rgba(0, 0, 0, 0.1) ${s}%)`}function O6(){const t=Or(),{user:e}=oi(),n=pf(e,"sales:mockups:setup"),[s,r]=v.useState("generate"),[i,o]=v.useState([]),[a,l]=v.useState("all"),[u,d]=v.useState(""),[h,f]=v.useState("all"),[p,w]=v.useState("all"),[x,y]=v.useState(""),g=i[0]||"",m=a==="indoor",b=m,k=m,_=b?"all":h;v.useEffect(()=>{a==="indoor"&&(h&&f(""),p&&w(""))},[a]);const C=v.useRef(s),[S,j]=v.useState(null),[N,T]=v.useState(!1),[L,D]=v.useState(""),[O,$]=v.useState(""),[I,A]=v.useState("[]"),[W,E]=v.useState(!1),[P,F]=v.useState({}),[V,H]=v.useState(null),[he,ee]=v.useState(!1),[U,Q]=v.useState(!1),[de,Z]=v.useState(!1),[be,Ae]=v.useState("Select one or more locations, upload a billboard photo, then click four corners to define the frame."),[me,fe]=v.useState(Io),[De,J]=v.useState("#1CFF1C"),[pe,ie]=v.useState(40),[K,G]=v.useState(!1),[le,Y]=v.useState([]),[B,xe]=v.useState(0),[je,Ce]=v.useState(1),[Le,we]=v.useState(!1),[oe,Ne]=v.useState(-1),[tt,ht]=v.useState(!1),[Dt,ur]=v.useState(!0),[Ea,lm]=v.useState(!0),[cm,Dr]=v.useState(!0),[$d,um]=v.useState(!0),[bo,Na]=v.useState(!1),[Ta,Pa]=v.useState({}),[mc,Fd]=v.useState(!1),At=v.useRef(null),ft=v.useRef(null),Ws=v.useRef(null),Vs=v.useRef(""),ls=v.useRef(new Map),zd=v.useRef({}),Ra=v.useRef({}),Aa=v.useRef([]),Vn=v.useRef(!1),ct=v.useRef([]),gt=v.useRef([]),Oa=v.useRef(-1),pn=v.useRef({zoom:1,panX:0,panY:0}),Rn=v.useRef({isDrawing:!1,isDraggingCorner:!1,isDraggingFrame:!1,dragFrameIndex:-1,dragPointIndex:-1,startX:0,startY:0,isPanning:!1,shiftPanPending:!1,hasPanned:!1,panStartX:0,panStartY:0,panOriginX:0,panOriginY:0}),gc=v.useRef({pointers:new Map,isPinching:!1,startDistance:0,startZoom:1,startPanX:0,startPanY:0,startCenterX:0,startCenterY:0}),wo=v.useRef({drawX:0,drawY:0,drawW:0,drawH:0,scale:1,imgNaturalW:0,imgNaturalH:0}),hi=an({queryKey:["mockup","eligibility","setup"],queryFn:g3,enabled:s==="setup"}),Es=an({queryKey:["mockup","eligibility","generate"],queryFn:x3,enabled:s==="generate"}),ko=an({queryKey:["mockup","asset-types"],queryFn:a3,enabled:s==="setup"}),fi=an({queryKey:["mockup","templates",g,_,p,a],queryFn:()=>Bk(g,{timeOfDay:_,side:p,venueType:a}),enabled:s==="generate"&&!!g}),pi=CM({queries:s==="setup"?i.map(R=>({queryKey:["mockup","templates",R,_,p,a],queryFn:()=>Bk(R,{timeOfDay:_,side:p,venueType:a}),enabled:!!R,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,retry:!1,staleTime:1/0})):[]}),xc=v.useMemo(()=>{var q;return{data:pi.flatMap((z,se)=>{const X=z.data,ye=Array.isArray(X)?X:(X==null?void 0:X.templates)||[],Ee=i[se];return ye.map(Me=>({...Me,storage_key:Me.storage_key||Ee}))}),isLoading:pi.some(z=>z.isLoading),isFetching:pi.some(z=>z.isFetching),error:((q=pi.find(z=>z.error))==null?void 0:q.error)||null}},[i,pi]);v.useEffect(()=>()=>{ls.current.forEach(R=>{R!=null&&R.url&&URL.revokeObjectURL(R.url)}),ls.current.clear(),Vs.current&&URL.revokeObjectURL(Vs.current)},[]),v.useEffect(()=>{zd.current=Ta},[Ta]),v.useEffect(()=>{Ra.current=P},[P]);const dm=v.useMemo(()=>{const R=hi.data;return Array.isArray(R)?R:(R==null?void 0:R.locations)||[]},[hi.data]),Bd=v.useMemo(()=>{const R=Es.data;return Array.isArray(R)?R:(R==null?void 0:R.locations)||[]},[Es.data]),Ud=s==="setup"?dm:Bd,Hd=s==="setup"?hi:Es,hm=v.useMemo(()=>{const R=ko.data;return Array.isArray(R)?R:(R==null?void 0:R.asset_types)||(R==null?void 0:R.types)||[]},[ko.data]),Wd=v.useMemo(()=>{const R=fi.data;return Array.isArray(R)?R:(R==null?void 0:R.templates)||[]},[fi.data]),yc=v.useMemo(()=>{const R=xc.data;return Array.isArray(R)?R:(R==null?void 0:R.templates)||[]},[xc.data]),_o=s==="setup"?yc:Wd,vc=v.useMemo(()=>_o.map(R=>pr(R)).join("|"),[_o,pr]);v.useEffect(()=>{Aa.current=_o},[_o]),v.useEffect(()=>{C.current!==s&&(C.current==="setup"&&V&&X0(),o([]),s==="setup"?(l(""),d(""),f(""),w("")):(l("all"),d(""),f("all"),w("all")),y("")),C.current=s},[V,s]),v.useEffect(()=>{a==="indoor"&&h&&f("")},[h,a]),v.useEffect(()=>{F(R=>{const q=new Set(Aa.current.map(X=>pr(X))),z={};let se=!1;return Object.entries(R).forEach(([X,ye])=>{q.has(X)?z[X]=ye:ye&&(se=!0,URL.revokeObjectURL(ye))}),se?z:R})},[vc,pr]),v.useEffect(()=>{let R=!0;const q=Aa.current;if(!g||!q.length)return()=>{};const z=q.filter(se=>!Ra.current[pr(se)]);return z.length?((async()=>{const se=await Promise.all(z.map(async ye=>{const Ee=pr(ye);let Me="";try{Me=await m3(ye.storage_key||g,ye.photo,{timeOfDay:ye.time_of_day||_,side:ye.side||p,company:ye.company,venueType:ye.venue_type||ye.environment||a})}catch{Me=""}return{key:Ee,url:Me}}));if(!R){se.forEach(({url:ye})=>{ye&&URL.revokeObjectURL(ye)});return}const X={};se.forEach(({key:ye,url:Ee})=>{Ee&&!Ra.current[ye]?X[ye]=Ee:Ee&&URL.revokeObjectURL(Ee)}),Object.keys(X).length>0&&F(ye=>({...ye,...X}))})(),()=>{R=!1}):()=>{}},[g,vc,_,p,a,pr]),v.useEffect(()=>()=>{Object.values(Ra.current).forEach(R=>{R&&URL.revokeObjectURL(R)})},[]);const ae=!!ft.current,An=le.length===4||oe>=0,kn=oe>=0?`frame-${oe}`:le.length===4?"current":null,Y0=kn?Ta[kn]:null,I2=Math.round(je*100);v.useEffect(()=>{if(!kn){Ws.current=null,Vs.current="";return}const R=ls.current.get(kn);Ws.current=(R==null?void 0:R.img)||null,Vs.current=(R==null?void 0:R.url)||"",bo&&xt()},[kn,Ta,bo]),v.useEffect(()=>{ft.current&&bc(),xt()},[bo]),v.useEffect(()=>{xt()},[Le]),v.useEffect(()=>{tt&&ft.current&&xt()},[tt]),v.useEffect(()=>{if(W)return;const R=Ma();A(R.length?JSON.stringify(R,null,2):"[]")},[le,B,me,W]);async function D2(){D(""),$("");const R=V?pr(V):null;if(!i.length){$("Select at least one location first");return}if(!S){$("Upload a billboard photo first");return}let q=Ma();if(I.trim())try{q=JSON.parse(I)}catch(z){$((z==null?void 0:z.message)||"Frames JSON is invalid");return}if(!Array.isArray(q)||!q.length){$("Add at least one frame before saving");return}try{T(!0);const z=new FormData;V?(z.append("location_key",V.storage_key||g),z.append("photo_filename",V.photo),z.append("venue_type",a),u&&z.append("asset_type_key",u),z.append("time_of_day",_||"all"),z.append("side",p||"all"),z.append("frames_data",JSON.stringify(q)),S&&S.name!==V.photo&&z.append("photo",S),await c3(z),D("Updated frames successfully")):(z.append("location_keys",JSON.stringify(i)),z.append("venue_type",a),u&&z.append("asset_type_key",u),z.append("time_of_day",_||"all"),z.append("side",p||"all"),z.append("frames_data",JSON.stringify(q)),z.append("photo",S),await l3(z),D("Saved frames successfully")),ib(!0),H(null),ee(!1),j(null),ft.current=null,ht(!1),R&&F(se=>{if(!se[R])return se;const X={...se},ye=X[R];return ye&&URL.revokeObjectURL(ye),delete X[R],X}),t.invalidateQueries({queryKey:["mockup","templates"]}),t.refetchQueries({queryKey:["mockup","templates"],type:"active"}),xt()}catch(z){$((z==null?void 0:z.message)||"Failed to save template")}finally{T(!1)}}async function L2(R){const q=(R==null?void 0:R.storage_key)||g;if(!q||!(R!=null&&R.photo))return;const z=(R==null?void 0:R.environment)||(R==null?void 0:R.venue_type)||"outdoor",se=R!=null&&R.time_of_day&&R.time_of_day!=="all"?R.time_of_day:"day",X=R!=null&&R.side&&R.side!=="all"?R.side:"gold";try{R!=null&&R.company?await h3({company:R.company,locationKey:q,environment:z,timeOfDay:se,side:X,photoFilename:R.photo}):await u3(q,R.photo,{timeOfDay:R.time_of_day,side:R.side}),t.invalidateQueries({queryKey:["mockup","templates"]}),t.refetchQueries({queryKey:["mockup","templates"],type:"active"})}catch(ye){$((ye==null?void 0:ye.message)||"Failed to delete template")}}function Q0(R,{resetFrames:q=!0}={}){ft.current=R,ht(!0);const z=K2(R.naturalWidth,R.naturalHeight);wo.current={drawX:z.x,drawY:z.y,drawW:z.w,drawH:z.h,scale:z.scale,imgNaturalW:R.naturalWidth,imgNaturalH:R.naturalHeight},mm(!1),q&&(ct.current=[],gt.current=[],Ns(),Vn.current=!1,nP(),Vd(),cs(),jo(),A("[]"),E(!1)),bc(),xt()}function $2(R,q){return new Promise((z,se)=>{const X=new Image;X.onload=()=>{Q0(X,q),z()},X.onerror=()=>se(new Error("Failed to load image")),X.src=R})}function F2(R,q){return new Promise((z,se)=>{const X=new FileReader;X.onload=ye=>{const Ee=new Image;Ee.onload=()=>{Q0(Ee,q),z()},Ee.onerror=()=>se(new Error("Failed to load image")),Ee.src=ye.target.result},X.onerror=()=>se(new Error("Failed to read image")),X.readAsDataURL(R)})}function fm(R){return R?Array.isArray(R)&&R.length===4&&Array.isArray(R[0])?R:Array.isArray(R)&&R.length>=8&&typeof R[0]=="number"?[[R[0],R[1]],[R[2],R[3]],[R[4],R[5]],[R[6],R[7]]]:null:null}function z2(R){if(!R)return[];let q=R.frames||R.frames_data||R.framesData||R.frame_data||R.frame_points;if(typeof q=="string")try{q=JSON.parse(q)}catch{q=[]}return Array.isArray(q)?q.map(z=>{const se=fm((z==null?void 0:z.points)||(z==null?void 0:z.frame_points)||z)||fm(z==null?void 0:z.points);if(!se)return null;let X=(z==null?void 0:z.config)||(R==null?void 0:R.config);if(typeof X=="string")try{X=JSON.parse(X)}catch{X=null}const ye=ff(X,Io);return{points:se,config:ye,source:"existing"}}).filter(Boolean):[]}async function B2(R){if(!(!g||!(R!=null&&R.photo))){H(R),ee(!0),$(""),D(""),j(null);try{const q=R.venue_type||R.environment||"outdoor",z=R.time_of_day&&R.time_of_day!=="all"?R.time_of_day:"day",se=R.side&&R.side!=="all"?R.side:"gold";l(q),q==="indoor"?(f(""),w("")):(R.time_of_day&&R.time_of_day!=="all"?f(R.time_of_day):f(""),R.side&&R.side!=="all"?w(R.side):w(""));const X=await eT(R.storage_key||g,R.photo,{timeOfDay:R.time_of_day||_,side:R.side||p,company:R.company,venueType:R.venue_type||R.environment||a});if(!X)throw new Error("Failed to load template image");const ye=URL.createObjectURL(X);try{await $2(ye,{resetFrames:!1})}finally{URL.revokeObjectURL(ye)}let Ee=R;if(R.company){const Xe=await d3({company:R.company,locationKey:R.storage_key||g,environment:q,timeOfDay:z,side:se,photoFilename:R.photo});Xe!=null&&Xe.frames_data&&(Ee={...R,frames_data:Xe.frames_data,config:Xe.config??R.config,time_of_day:Xe.time_of_day||R.time_of_day,side:Xe.side||R.side,environment:Xe.environment||R.environment})}const Me=z2(Ee);gt.current=Me,ct.current=[],Ns(),Vn.current=!1,cs(),jo(),A(Me.length?JSON.stringify(Ma(),null,2):"[]"),E(!1),xt();const yt=new File([X],R.photo,{type:X.type||"image/jpeg"});j(yt)}catch(q){$((q==null?void 0:q.message)||"Failed to load template for editing")}finally{ee(!1)}}}function X0(){H(null),ee(!1),D(""),$(""),f(""),w(""),j(null),ft.current=null,ht(!1),ct.current=[],gt.current=[],Ns(),Vn.current=!1,cs(),jo(),A("[]"),E(!1),bc(),xt()}function pm(R){const q=At.current;if(!q)return null;const z=q.getBoundingClientRect(),se=q.width/z.width,X=q.height/z.height;return{x:(R.clientX-z.left)*se,y:(R.clientY-z.top)*X}}function J0(R){return Math.min(T6,Math.max(N6,R))}function So(){const{drawX:R,drawY:q,drawW:z,drawH:se,scale:X}=wo.current,{zoom:ye,panX:Ee,panY:Me}=pn.current;return{drawX:R+Ee,drawY:q+Me,drawW:z*ye,drawH:se*ye,scale:X*ye}}function mm(R=!0){pn.current={zoom:1,panX:0,panY:0},Ce(1),R&&xt()}function Z0(){const R=At.current;return R?{x:R.width/2,y:R.height/2}:{x:Rh/2,y:Ah/2}}function eb(R,q,z){const{drawX:se,drawY:X,scale:ye}=wo.current,{zoom:Ee,panX:Me,panY:yt}=pn.current,Xe=J0(R),Oe=ye*Ee,Ve=ye*Xe;if(!Oe||!Ve)return;const qe=(q-(se+Me))/Oe,Lt=(z-(X+yt))/Oe,St=q-se-qe*Ve,qn=z-X-Lt*Ve;pn.current={zoom:Xe,panX:St,panY:qn},Ce(Xe),xt()}function U2(R,q){if(!ft.current)return;const{drawX:z,drawY:se,drawW:X,drawH:ye,scale:Ee}=So();if(R<z||q<se||R>z+X||q>se+ye)return;const Me=Math.floor((R-z)/Ee),yt=Math.floor((q-se)/Ee),Xe=document.createElement("canvas");Xe.width=ft.current.naturalWidth,Xe.height=ft.current.naturalHeight;const Oe=Xe.getContext("2d");Oe.drawImage(ft.current,0,0);const Ve=Oe.getImageData(Me,yt,1,1),[qe,Lt,St]=Ve.data,qn=`#${[qe,Lt,St].map(dr=>dr.toString(16).padStart(2,"0")).join("").toUpperCase()}`;J(qn)}function H2(R){}function W2(){if(!ft.current)return;const R=Z0();eb(pn.current.zoom+v_,R.x,R.y)}function V2(){if(!ft.current)return;const R=Z0();eb(pn.current.zoom-v_,R.x,R.y)}function q2(){ft.current&&mm()}function K2(R,q){const z=Math.min(Rh/R,Ah/q),se=Math.round(R*z),X=Math.round(q*z),ye=Math.round((Rh-se)/2),Ee=Math.round((Ah-X)/2);return{x:ye,y:Ee,w:se,h:X,scale:z}}function G2(){const R=At.current;if(!R)return;const q=R.getContext("2d");q.clearRect(0,0,R.width,R.height),q.fillStyle="#f8f9fa",q.fillRect(0,0,R.width,R.height)}function xt(){const R=At.current;if(!R)return;const q=R.getContext("2d");G2();const z=ft.current;if(!z)return;const{drawX:se,drawY:X,drawW:ye,drawH:Ee,scale:Me}=So();if(q.imageSmoothingEnabled=!Le,Le||(q.imageSmoothingQuality="high"),bo&&Ws.current){q.drawImage(Ws.current,se,X,ye,Ee);return}q.drawImage(z,se,X,ye,Ee),gt.current.forEach((Oe,Ve)=>{const qe=Oe.points,Lt=Oa.current===Ve,St=1;q.fillStyle="rgba(128, 128, 128, 0.3)",q.strokeStyle=Lt?"#667eea":"#333",q.lineWidth=St,q.setLineDash([8,4]),q.lineCap="butt",q.lineJoin="miter",q.beginPath(),qe.forEach((qn,dr)=>{const Co=se+qn[0]*Me,us=X+qn[1]*Me;dr===0?q.moveTo(Co,us):q.lineTo(Co,us)}),q.closePath(),q.fill(),q.stroke(),q.setLineDash([]),qe.forEach(qn=>{const dr=se+qn[0]*Me,Co=X+qn[1]*Me,us=4;q.fillStyle=Lt?"#667eea":"#333",q.fillRect(dr-us/2,Co-us/2,us,us)})});const Xe=ct.current;Xe.length>0&&(q.fillStyle="rgba(128, 128, 128, 0.3)",q.strokeStyle="#667eea",q.lineWidth=1,q.setLineDash([8,4]),q.lineCap="butt",q.lineJoin="miter",q.beginPath(),Xe.forEach((Ve,qe)=>{const Lt=se+Ve[0]*Me,St=X+Ve[1]*Me;qe===0?q.moveTo(Lt,St):q.lineTo(Lt,St)}),Xe.length===4&&(q.closePath(),q.fill()),q.stroke(),q.setLineDash([]),Xe.forEach(Ve=>{const qe=se+Ve[0]*Me,Lt=X+Ve[1]*Me;q.fillStyle="#667eea",q.fillRect(qe-4/2,Lt-4/2,4,4)}))}function cs(){Y([...ct.current])}function jo(){xe(gt.current.length)}function Ns(){Oa.current=-1,Ne(-1)}function Y2(){if(oe>=0){const R=gt.current[oe];return R?{key:`frame-${oe}`,points:R.points,config:R.config}:null}return ct.current.length===4?{key:"current",points:ct.current,config:me}:null}function Q2(){ls.current.forEach(R=>{R!=null&&R.url&&URL.revokeObjectURL(R.url)}),ls.current.clear(),Vs.current&&URL.revokeObjectURL(Vs.current),Vs.current="",Ws.current=null}function Vd(){Q2(),Na(!1),Pa({})}function X2(R){kn&&Pa(q=>{const z={...q};return R?z[kn]=R:delete z[kn],z})}function qd(R){ct.current=[],cs(),Oa.current=R,Ne(R);const q=gt.current[R];q!=null&&q.config&&fe(ff(q.config,Io)),Dr(!0),E(!1);const z=Ma();A(z.length?JSON.stringify(z,null,2):"[]")}function J2(R,q){fe(z=>{const se={...z,[R]:q},X=Oa.current;return X>=0&&gt.current[X]&&(gt.current[X].config=se),se})}function tb(R,q,z){const{drawX:se,drawY:X,scale:ye}=So(),Ee=(R-se)/ye,Me=(q-X)/ye;let yt=!1;for(let Xe=0,Oe=z.length-1;Xe<z.length;Oe=Xe++){const Ve=z[Xe][0],qe=z[Xe][1],Lt=z[Oe][0],St=z[Oe][1];qe>Me!=St>Me&&Ee<(Lt-Ve)*(Me-qe)/(St-qe)+Ve&&(yt=!yt)}return yt}function nb(R,q){if(ct.current.length===4&&tb(R,q,ct.current))return-1;for(let z=gt.current.length-1;z>=0;z-=1)if(tb(R,q,gt.current[z].points))return z;return null}function sb(R,q){const{drawX:se,drawY:X,scale:ye}=So();if(ct.current.length>0)for(let Ee=0;Ee<ct.current.length;Ee+=1){const Me=se+ct.current[Ee][0]*ye,yt=X+ct.current[Ee][1]*ye;if(Math.hypot(R-Me,q-yt)<15)return{frame:-1,point:Ee}}for(let Ee=0;Ee<gt.current.length;Ee+=1){const Me=gt.current[Ee].points;for(let yt=0;yt<Me.length;yt+=1){const Xe=se+Me[yt][0]*ye,Oe=X+Me[yt][1]*ye;if(Math.hypot(R-Xe,q-Oe)<15)return{frame:Ee,point:yt}}}return null}function bc(){if(!ft.current){Ae("Select one or more locations, upload a billboard photo, then click four corners to define the frame.");return}Ae("Click and drag to draw a box. Use +/Fit to zoom; Shift+drag or middle mouse pans; pinch to zoom.")}function rb(R){R&&F2(R,{resetFrames:!0}).catch(q=>{$((q==null?void 0:q.message)||"Failed to load image")})}function Z2(R){if(s!=="setup"||!ft.current)return;const q=pm(R);if(!q)return;const{x:z,y:se}=q,X=Rn.current;if(R.pointerType==="touch"){const qe=gc.current;if(qe.pointers.set(R.pointerId,{x:z,y:se}),qe.pointers.size===2){const[Lt,St]=Array.from(qe.pointers.values()),qn=(Lt.x+St.x)/2,dr=(Lt.y+St.y)/2;qe.isPinching=!0,qe.startDistance=Math.hypot(Lt.x-St.x,Lt.y-St.y),qe.startZoom=pn.current.zoom,qe.startPanX=pn.current.panX,qe.startPanY=pn.current.panY,qe.startCenterX=qn,qe.startCenterY=dr,X.isDrawing=!1,X.isDraggingCorner=!1,X.isDraggingFrame=!1,X.isPanning=!1,At.current&&(At.current.style.cursor="grabbing");return}}if(R.button===1||R.shiftKey){R.preventDefault(),X.isPanning=!0,X.shiftPanPending=R.shiftKey&&R.button===0,X.hasPanned=!1,X.panStartX=z,X.panStartY=se,X.panOriginX=pn.current.panX,X.panOriginY=pn.current.panY,At.current&&(At.current.style.cursor="grabbing");return}X.shiftPanPending=!1,X.hasPanned=!1;const{drawX:Ee,drawY:Me,drawW:yt,drawH:Xe}=So(),Oe=sb(z,se);if(Oe){Rn.current.isDraggingCorner=!0,Rn.current.dragFrameIndex=Oe.frame,Rn.current.dragPointIndex=Oe.point,Oe.frame>=0?qd(Oe.frame):(Ns(),Dr(!0)),xt();return}const Ve=nb(z,se);if(Ve!==null){Rn.current.isDraggingFrame=!0,Rn.current.dragFrameIndex=Ve,Rn.current.startX=z,Rn.current.startY=se,Ve>=0?qd(Ve):(Ns(),Dr(!0)),At.current&&(At.current.style.cursor="move"),xt();return}z<Ee||se<Me||z>Ee+yt||se>Me+Xe||(Vn.current=!1,Rn.current.isDrawing=!0,Rn.current.startX=z,Rn.current.startY=se,Ns())}function eP(R){if(s!=="setup"||!ft.current)return;const q=pm(R);if(!q)return;const{x:z,y:se}=q,X=Rn.current;if(R.pointerType==="touch"){const Oe=gc.current;if(Oe.pointers.has(R.pointerId)&&Oe.pointers.set(R.pointerId,{x:z,y:se}),Oe.isPinching&&Oe.pointers.size>=2){const[Ve,qe]=Array.from(Oe.pointers.values()),Lt=(Ve.x+qe.x)/2,St=(Ve.y+qe.y)/2,qn=Math.hypot(Ve.x-qe.x,Ve.y-qe.y),{drawX:dr,drawY:Co,scale:us}=wo.current,gm=Oe.startZoom;if(Oe.startDistance>0&&us){const Kd=J0(gm*(qn/Oe.startDistance)),gP=(Oe.startCenterX-(dr+Oe.startPanX))/(us*gm),xP=(Oe.startCenterY-(Co+Oe.startPanY))/(us*gm),yP=Lt-dr-gP*us*Kd,vP=St-Co-xP*us*Kd;pn.current={zoom:Kd,panX:yP,panY:vP},Ce(Kd),xt()}return}}if(X.isPanning){R.preventDefault();const Oe=z-X.panStartX,Ve=se-X.panStartY;if(X.shiftPanPending&&!X.hasPanned){if(Math.hypot(Oe,Ve)<P6)return;X.hasPanned=!0}pn.current.panX=X.panOriginX+Oe,pn.current.panY=X.panOriginY+Ve,xt();return}const{drawX:ye,drawY:Ee,scale:Me}=So();if(X.isDraggingCorner){const Oe=(z-ye)/Me,Ve=(se-Ee)/Me;X.dragFrameIndex===-1?ct.current[X.dragPointIndex]=[Math.round(Oe),Math.round(Ve)]:gt.current[X.dragFrameIndex].points[X.dragPointIndex]=[Math.round(Oe),Math.round(Ve)],xt();return}if(X.isDraggingFrame){const Oe=(z-X.startX)/Me,Ve=(se-X.startY)/Me;X.dragFrameIndex===-1?ct.current=ct.current.map(qe=>[Math.round(qe[0]+Oe),Math.round(qe[1]+Ve)]):gt.current[X.dragFrameIndex].points=gt.current[X.dragFrameIndex].points.map(qe=>[Math.round(qe[0]+Oe),Math.round(qe[1]+Ve)]),X.startX=z,X.startY=se,xt();return}if(X.isDrawing){xt();const Oe=At.current.getContext("2d");Oe.fillStyle="rgba(128, 128, 128, 0.3)";const Ve=z-X.startX,qe=se-X.startY;Oe.fillRect(X.startX,X.startY,Ve,qe),Oe.strokeStyle="#667eea",Oe.lineWidth=1,Oe.setLineDash([8,4]),Oe.lineCap="butt",Oe.lineJoin="miter",Oe.strokeRect(X.startX,X.startY,Ve,qe),Oe.setLineDash([]);return}const yt=sb(z,se),Xe=nb(z,se);At.current&&(yt?At.current.style.cursor="pointer":Xe!==null?At.current.style.cursor="move":At.current.style.cursor="crosshair")}function tP(R){if(s!=="setup"||!ft.current)return;const q=pm(R),z=Rn.current;if(R.pointerType==="touch"){const St=gc.current;if(St.pointers.has(R.pointerId)&&St.pointers.delete(R.pointerId),St.isPinching&&St.pointers.size<2&&(St.isPinching=!1),St.isPinching)return}if(z.isPanning){z.isPanning=!1,At.current&&(At.current.style.cursor="crosshair"),z.shiftPanPending&&!z.hasPanned&&Ea&&q&&U2(q.x,q.y),z.shiftPanPending=!1,z.hasPanned=!1;return}if(z.isDraggingCorner){z.isDraggingCorner=!1,z.dragFrameIndex=-1,z.dragPointIndex=-1,At.current&&(At.current.style.cursor="crosshair"),cs(),xt();return}if(z.isDraggingFrame){z.isDraggingFrame=!1,z.dragFrameIndex=-1,At.current&&(At.current.style.cursor="crosshair"),cs(),xt();return}if(!z.isDrawing||!q)return;const{x:se,y:X}=q,{drawX:ye,drawY:Ee,scale:Me}=So(),yt=z.startX,Xe=z.startY,Oe=(Math.min(yt,se)-ye)/Me,Ve=(Math.min(Xe,X)-Ee)/Me,qe=(Math.max(yt,se)-ye)/Me,Lt=(Math.max(Xe,X)-Ee)/Me;ct.current=[[Math.round(Oe),Math.round(Ve)],[Math.round(qe),Math.round(Ve)],[Math.round(qe),Math.round(Lt)],[Math.round(Oe),Math.round(Lt)]],z.isDrawing=!1,cs(),Ns(),Dr(!0),Ae("Frame drawn. Drag corners to adjust, or drag inside to move. Click Add Frame to save."),xt()}function nP(){fe(Io)}function sP(){if(ct.current.length!==4){$("Select 4 corner points first");return}const R={...me},q=Vn.current?"greenscreen":"manual";gt.current.push({points:[...ct.current],config:R,source:q});const z="current";ct.current=[];const se=gt.current.length-1;qd(se),Vn.current=!1,cs(),jo(),Ae(`Frame ${gt.current.length} added. Draw another box or save when done.`);const X=ls.current.get(z);X&&(ls.current.set(`frame-${se}`,X),ls.current.delete(z));const ye=zd.current[z];ye&&Pa(Ee=>{const Me={...Ee};return Me[`frame-${se}`]=ye,delete Me[z],Me}),Na(!1),Ws.current=null,xt()}function rP(){ct.current=[],Ns(),Vn.current=!1,cs(),ls.current.delete("current"),Pa(R=>{if(!R.current)return R;const q={...R};return delete q.current,q}),Na(!1),Ws.current=null,gt.current.length?Ae(`Frames saved: ${gt.current.length}. Draw another box or save all frames.`):bc(),xt()}function ib(R=!1){!R&&!window.confirm("Clear all frames? This will reset your work.")||(gt.current=[],ct.current=[],Ns(),Vn.current=!1,Vd(),cs(),jo(),A("[]"),E(!1),bc(),xt())}function Ma(){const R=[...gt.current];return ct.current.length===4&&R.push({points:[...ct.current],config:{...me}}),R.map(q=>({points:q.points.map(z=>[z[0],z[1]]),config:q.config}))}function iP(R){if(!R.trim())return[];let q=[];try{q=JSON.parse(R)}catch(z){throw new Error((z==null?void 0:z.message)||"Frames JSON is invalid")}if(!Array.isArray(q))throw new Error("Frames JSON must be an array of frames.");return q.map((z,se)=>{const X=fm((z==null?void 0:z.points)||(z==null?void 0:z.frame_points)||z);if(!X||X.length!==4)throw new Error(`Frame ${se+1} must include 4 points.`);const ye=X.map(Me=>{const yt=Number(Me[0]),Xe=Number(Me[1]);if(!Number.isFinite(yt)||!Number.isFinite(Xe))throw new Error(`Frame ${se+1} has invalid point values.`);return[yt,Xe]});let Ee=z==null?void 0:z.config;if(typeof Ee=="string")try{Ee=JSON.parse(Ee)}catch{Ee=null}return{points:ye,config:ff(Ee,Io),source:"json"}})}function oP(){$("");try{const R=iP(I);gt.current=R,ct.current=[],Vn.current=!1,Vd(),R.length?qd(0):Ns(),cs(),jo(),E(!1),A(R.length?JSON.stringify(Ma(),null,2):"[]"),xt()}catch(R){$((R==null?void 0:R.message)||"Frames JSON is invalid")}}function aP(){!ft.current||K||(G(!0),setTimeout(()=>{if(!ft.current){G(!1);return}try{const R=document.createElement("canvas");R.width=ft.current.width,R.height=ft.current.height;const q=R.getContext("2d");q.drawImage(ft.current,0,0);const z=q.getImageData(0,0,ft.current.width,ft.current.height),se=D6(z,{color:De,tolerance:pe,depthMultiplier:me.depthMultiplier,existingFrames:gt.current});se?(ct.current=se,Ns(),Vn.current=!0,cs(),Dr(!0),Ae("Green screen detected. Adjust points or click Add Frame to save."),xt()):Ae("No green screen detected. Adjust tolerance or draw frame manually.")}finally{G(!1)}},0))}async function lP(){const R=Y2();if(!S||!R||!kn){$("Upload a photo and select or draw a frame first.");return}const q=Y0;if(!q){$("Upload a test creative for the active frame first.");return}if(!mc){$(""),Fd(!0);try{const z=new FormData;z.append("billboard_photo",S),z.append("creative",q),z.append("frame_points",JSON.stringify(R.points)),z.append("config",JSON.stringify(R.config)),z.append("time_of_day",h||"day");const se=await f3(z),X=ls.current.get(kn);X!=null&&X.url&&URL.revokeObjectURL(X.url);const ye=URL.createObjectURL(se),Ee=new Image;Ee.onload=()=>{ls.current.set(kn,{url:ye,img:Ee}),Vs.current=ye,Ws.current=Ee,xt()},Ee.src=ye}catch(z){$((z==null?void 0:z.message)||"Failed to generate preview")}finally{Fd(!1)}}}function cP(){j(null),ft.current=null,ct.current=[],gt.current=[],Ns(),Vn.current=!1,ht(!1),Vd(),mm(!1),cs(),jo(),A("[]"),E(!1),Ae("Select one or more locations, upload a billboard photo, then click four corners to define the frame."),xt()}function uP(R){R.preventDefault(),Q(!0)}function dP(R){R.preventDefault(),Q(!1)}function hP(R){var z,se;R.preventDefault(),Q(!1);const q=(se=(z=R.dataTransfer)==null?void 0:z.files)==null?void 0:se[0];q&&(j(q),rb(q))}function fP(R){R.preventDefault(),Z(!0)}function pP(R){R.preventDefault(),Z(!1)}function mP(R){var z,se;R.preventDefault(),Z(!1);const q=(se=(z=R.dataTransfer)==null?void 0:z.files)==null?void 0:se[0];q&&setCreativeFile(q)}return c.jsx("div",{className:"h-full min-h-0 flex flex-col",children:c.jsxs("div",{className:"flex-1 min-h-0 flex flex-col gap-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(te,{variant:s==="generate"?"default":"ghost",onClick:()=>r("generate"),className:"rounded-2xl",children:"Generate"}),n?c.jsx(te,{variant:s==="setup"?"default":"ghost",onClick:()=>r("setup"),className:"rounded-2xl",children:"Setup"}):null]}),c.jsxs("div",{className:"flex-1 min-h-0",children:[c.jsx("div",{className:s==="generate"?"h-full":"hidden","aria-hidden":s!=="generate",children:c.jsx(y6,{locations:i,setLocations:o,venueType:a,setVenueType:l,templateKey:x,setTemplateKey:y,locationOptions:Ud,locationsQuery:Hd,timeOfDay:h,setTimeOfDay:f,timeOfDayDisabled:b,sideDisabled:k,side:p,setSide:w,timeOfDayOptions:WT,sideOptions:VT,venueTypeOptions:qT,templateOptions:Wd,templatesQuery:fi,templateThumbs:P,getTemplateKey:pr,defaultFrameConfig:Io,creativeDragActive:de,handleCreativeDragOver:fP,handleCreativeDragLeave:pP,handleCreativeDrop:mP,useNativeSelects:y_})}),s==="setup"?c.jsx("div",{className:"h-full",children:c.jsx(S6,{locations:i,setLocations:o,venueType:a,setVenueType:l,assetType:u,setAssetType:d,setTemplateKey:y,locationOptions:Ud,locationsQuery:Hd,assetTypeOptions:hm,assetTypesQuery:ko,timeOfDay:h,setTimeOfDay:f,timeOfDayDisabled:b,sideDisabled:k,side:p,setSide:w,timeOfDayOptions:j6,sideOptions:C6,venueTypeOptions:E6,editingTemplate:V,editingTemplateLoading:he,stopEditTemplate:X0,templatesOpen:Dt,setTemplatesOpen:ur,templateOptions:yc,templatesQuery:xc,templateThumbs:P,getTemplateKey:pr,startEditTemplate:B2,deleteTemplate:L2,setupPhoto:S,setSetupPhoto:j,handleSetupPhoto:rb,handleSetupDragOver:uP,handleSetupDragLeave:dP,handleSetupDrop:hP,setupDragActive:U,handleSetupPhotoClear:cP,framesJson:I,setFramesJson:A,setFramesJsonDirty:E,applyFramesJsonToCanvas:oP,buildFramesPayload:Ma,setupImageReady:tt,greenscreenOpen:Ea,setGreenscreenOpen:lm,greenscreenColor:De,setGreenscreenColor:J,greenscreenDetecting:K,colorTolerance:pe,setColorTolerance:ie,RangeField:Gn,handleGreenscreenDetect:aP,canDetectGreenscreen:ae,hasActiveFrame:An,frameSettingsOpen:cm,setFrameSettingsOpen:Dr,setupFrameConfig:me,handleSetupFrameConfigChange:J2,FrameConfigControls:M6,previewOpen:$d,setPreviewOpen:um,testPreviewMode:bo,setTestPreviewMode:Na,testPreviewImgRef:Ws,testPreviewUrlRef:Vs,previewImgRef:ft,drawPreview:xt,activeTestCreativeFile:Y0,updateTestCreativeForActive:X2,generateTestPreview:lP,testPreviewing:mc,activeFrameIndex:oe,canvasRef:At,canvasWidth:Rh,canvasHeight:Ah,handleCanvasPointerDown:Z2,handleCanvasPointerMove:eP,handleCanvasPointerUp:tP,handleCanvasWheel:H2,setupHint:be,handleZoomOut:V2,handleZoomIn:W2,handleFitToScreen:q2,zoomPercent:I2,pixelUpscale:Le,setPixelUpscale:we,setupError:O,setupMessage:L,addFrame:sP,resetCurrentFrame:rP,saveSetup:D2,setupSaving:N,clearAllFrames:ib,currentPoints:le,frameCount:B,useNativeSelects:y_})}):null]})]})})}function M6({config:t,onChange:e}){return c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsx(Gn,{label:"Brightness",value:t.brightness,min:50,max:200,suffix:"%",onChange:n=>e("brightness",n)}),c.jsx(Gn,{label:"Contrast",value:t.contrast,min:50,max:200,suffix:"%",onChange:n=>e("contrast",n)}),c.jsx(Gn,{label:"Saturation",value:t.saturation,min:0,max:200,suffix:"%",onChange:n=>e("saturation",n)}),c.jsx(Gn,{label:"Image Blur",value:t.imageBlur,min:0,max:20,onChange:n=>e("imageBlur",n),helper:"Blur entire creative (0 = off)."}),c.jsx(Gn,{label:"Edge Blur",value:t.edgeBlur,min:1,max:20,suffix:"px",onChange:n=>e("edgeBlur",n),helper:"Edge blur amount (1 = off)."}),c.jsx(Gn,{label:"Overlay Opacity",value:t.overlayOpacity,min:0,max:50,suffix:"%",onChange:n=>e("overlayOpacity",n),helper:"Billboard overlay strength."}),c.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[c.jsx(I6,{value:t.lightDirection,onChange:n=>e("lightDirection",n)}),c.jsx(Gn,{label:"Depth Perception",value:t.depthMultiplier,min:5,max:30,suffix:"x",onChange:n=>e("depthMultiplier",n),helper:"Perspective compensation."})]}),c.jsx(Gn,{label:"Shadow Intensity",value:t.shadowIntensity,min:0,max:100,suffix:"%",onChange:n=>e("shadowIntensity",n),helper:"Edge darkening."}),c.jsx(Gn,{label:"Lighting Match",value:t.lightingAdjustment,min:-50,max:50,suffix:"%",onChange:n=>e("lightingAdjustment",n),helper:"Brightness matching."}),c.jsx(Gn,{label:"Color Temperature",value:t.colorTemperature,min:-50,max:50,onChange:n=>e("colorTemperature",n),helper:"Warm/cool shift."}),c.jsx(Gn,{label:"Vignette",value:t.vignette,min:0,max:100,suffix:"%",onChange:n=>e("vignette",n),helper:"Corner darkening."}),c.jsx(Gn,{label:"Edge Smoother",value:t.edgeSmoother,min:1,max:20,suffix:"x",onChange:n=>e("edgeSmoother",n),helper:"Higher = softer edges."}),c.jsx(Gn,{label:"Sharpening",value:t.sharpening,min:0,max:100,suffix:"%",onChange:n=>e("sharpening",n),helper:"Unsharp mask strength (0 = off)."})]})}function I6({value:t,onChange:e}){return c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"text-xs font-semibold text-black/70 dark:text-white/70",children:["Light Direction: ",R6[t]||"Top"]}),c.jsx("div",{className:"grid grid-cols-3 gap-2 w-[150px]",children:KT.map(n=>c.jsx("button",{type:"button",onClick:()=>e(n.value),className:`rounded-lg border px-2 py-2 text-sm font-semibold ${t===n.value?"border-black/40 dark:border-white/50 bg-black/5 dark:bg-white/15 text-black dark:text-white":"border-black/10 dark:border-white/20 bg-white/80 dark:bg-black/40 text-black/70 dark:text-white/80"}`,title:n.label,children:n.glyph},n.value))})]})}function Gn({label:t,value:e,min:n,max:s,step:r=1,suffix:i="",helper:o,onChange:a}){return c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"text-xs font-semibold text-black/70 dark:text-white/70",children:[t,": ",e,i]}),c.jsx("input",{type:"range",min:n,max:s,step:r,value:e,onChange:l=>a(Number(l.target.value)),style:{background:A6(e,n,s)},className:"w-full accent-black"}),o?c.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:o}):null]})}function pr(t){return`${t.storage_key||""}::${t.photo}::${t.time_of_day||"all"}::${t.side||"all"}`}function D6(t,{color:e,tolerance:n,depthMultiplier:s,existingFrames:r}){const i=t.data,o=t.width,a=t.height,l=parseInt(e.slice(1,3),16),u=parseInt(e.slice(3,5),16),d=parseInt(e.slice(5,7),16),h=n,f=new Uint8Array(o*a);r.forEach(O=>{const $=O.points;for(let I=0;I<a;I+=1)for(let A=0;A<o;A+=1)L6(A,I,$)&&(f[I*o+A]=1)});const p=new Uint8Array(o*a);let w=0;for(let O=0;O<a;O+=1)for(let $=0;$<o;$+=1){const I=O*o+$;if(f[I]===1)continue;const A=I*4,W=i[A],E=i[A+1],P=i[A+2];Math.sqrt((W-l)**2+(E-u)**2+(P-d)**2)<=h&&(p[I]=255,w+=1)}if(w<1e3)return null;const x=new Uint8Array(o*a),y=3;for(let O=0;O<a;O+=1)for(let $=0;$<o;$+=1){const I=O*o+$;let A=!1;for(let W=-y;W<=y;W+=1){for(let E=-y;E<=y;E+=1){const P=O+W,F=$+E;if(P>=0&&P<a&&F>=0&&F<o&&p[P*o+F]===255){A=!0;break}}if(A)break}x[I]=A?255:0}const g=[];for(let O=1;O<a-1;O+=1)for(let $=1;$<o-1;$+=1){const I=O*o+$;x[I]===0&&(x[I-1]===255||x[I+1]===255||x[I-o]===255||x[I+o]===255||x[I-o-1]===255||x[I-o+1]===255||x[I+o-1]===255||x[I+o+1]===255)&&g.push([$,O])}if(g.length<4)return null;let m=g[0],b=g[0],k=g[0],_=g[0];g.forEach(O=>{const[$,I]=O;$+I<m[0]+m[1]&&(m=O),$-I>b[0]-b[1]&&(b=O),$+I>k[0]+k[1]&&(k=O),$-I<_[0]-_[1]&&(_=O)});const C=Math.abs(b[0]-m[0]),S=Math.abs(k[0]-_[0]),j=Math.abs(_[1]-m[1]),N=Math.abs(k[1]-b[1]),T=C/S,L=j/N,D=s||Io.depthMultiplier;if(T>1.1){const O=Math.floor((T-1)*D);_=[_[0],Math.min(a-1,_[1]+O)],k=[k[0],Math.min(a-1,k[1]+O)]}else if(T<.9){const O=Math.floor((1/T-1)*D);m=[m[0],Math.max(0,m[1]-O)],b=[b[0],Math.max(0,b[1]-O)]}if(L>1.1){const O=Math.floor((L-1)*D);b=[Math.min(o-1,b[0]+O),b[1]],k=[Math.min(o-1,k[0]+O),k[1]]}else if(L<.9){const O=Math.floor((1/L-1)*D);m=[Math.max(0,m[0]-O),m[1]],_=[Math.max(0,_[0]-O),_[1]]}return[m,b,k,_]}function L6(t,e,n){let s=!1;for(let r=0,i=n.length-1;r<n.length;i=r++){const o=n[r][0],a=n[r][1],l=n[i][0],u=n[i][1];a>e!=u>e&&t<(l-o)*(e-a)/(u-a)+o&&(s=!s)}return s}function $6(t){if(!t)return"";const e=String(t).trim();if(!e)return"";if(e.includes("/"))return e;const n=e.split("-");if(n.length===3){const[s,r,i]=n;if(s&&r&&i)return`${i}/${r}/${s}`}return e}function b_(t){const e=Number.parseInt(t,10),n=Number.isFinite(e)&&e>0?e:1;return`${n} ${n===1?"Week":"Weeks"}`}function Oh(t,e){const n=e;if(t==null||t==="")return`${n} 0`;const s=typeof t=="string"?t.trim():t;if(typeof s=="string"&&s.toUpperCase().startsWith(n))return s;const r=typeof s=="number"?s:Number.parseFloat(String(s).replace(/,/g,""));return Number.isFinite(r)?`${n} ${r.toLocaleString()}`:`${n} 0`}function w_(t){if(t==null)return 0;const e=Number.parseFloat(String(t).replace(/[^\d.-]/g,""));return Number.isFinite(e)?e:0}function F6(){const t=Or(),[e,n]=v.useState(""),s=()=>({id:crypto.randomUUID(),startDate:"",duration:"",netRate:""}),r=()=>({id:crypto.randomUUID(),location:"",spots:"1",productionFee:"",periods:[s()]}),[i,o]=v.useState(()=>[r()]),[a,l]=v.useState("separate"),[u,d]=v.useState(""),[h,f]=v.useState("AED"),[p,w]=v.useState("100% upfront"),[x,y]=v.useState([]),[g,m]=v.useState({}),b=an({queryKey:["locations","proposals"],queryFn:()=>y3({service:"proposals"})}),k=v.useMemo(()=>{const I=b.data;return Array.isArray(I)?I:(I==null?void 0:I.locations)||(I==null?void 0:I.data)||[]},[b.data]),_=v.useMemo(()=>Array.from(new Set(i.map(I=>I.location).filter(Boolean))),[i]);v.useEffect(()=>{if(!_.length)return;const I=_.filter(W=>!g[W]);if(!I.length)return;let A=!0;return(async()=>{const W=await Promise.all(I.map(async E=>{try{const P=await v3(E);return[E,P]}catch{return[E,null]}}));A&&m(E=>{const P={...E};return W.forEach(([F,V])=>{V&&(P[F]=V)}),P})})(),()=>{A=!1}},[_,g]);const C=NM({mutationFn:I=>b3(I),onSuccess:()=>{t.invalidateQueries({queryKey:["proposals","history"]})}});function S(I,A,W){o(E=>E.map(P=>P.id===I?{...P,[A]:W}:P))}function j(I,A,W,E){o(P=>P.map(F=>F.id!==I?F:{...F,periods:F.periods.map(V=>V.id===A?{...V,[W]:E}:V)}))}function N(){o(I=>[...I,r()])}function T(I){o(A=>A.length>1?A.filter(W=>W.id!==I):A)}function L(I){o(A=>A.map(W=>W.id===I?{...W,periods:[...W.periods,s()]}:W))}function D(I,A){o(W=>W.map(E=>E.id!==I||E.periods.length<=1?E:{...E,periods:E.periods.filter(P=>P.id!==A)}))}function O(){const I=h||"AED",A=Oh(u,I),W=i.filter(H=>H.location),E=W.map(H=>{const he=H.periods.filter(K=>K.startDate||K.duration||K.netRate),ee=a==="combined"?[he[0]||H.periods[0]]:he,U=ee.map(K=>$6((K==null?void 0:K.startDate)||"")),Q=ee.map(K=>b_(K==null?void 0:K.duration)),de=ee.map(K=>Oh(K==null?void 0:K.netRate,I)),Z=Number.parseInt(H.spots,10),be=Number.isFinite(Z)&&Z>0?Z:1,Ae=g[H.location]||{},me=Ae.location||Ae,fe=(me.display_type||me.displayType||"").toLowerCase()==="static",De=me.upload_fee??me.uploadFee??0,J=me.production_fee??me.productionFee??0,pe=H.productionFee,ie={location:H.location||"",upload_fee:Oh(De,I),spots:be};return fe&&(ie.production_fee=Oh(pe!==""&&pe!==null&&pe!==void 0?pe:J,I)),a==="combined"?(ie.start_date=U[0]||"",ie.duration=Q[0]||b_(1)):(ie.start_dates=U,ie.durations=Q,ie.net_rates=de),ie}),P=W.map(H=>{const he=k.find(ee=>(ee.location_key||ee.key||ee.id)===H.location);return(he==null?void 0:he.display_name)||(he==null?void 0:he.name)||(he==null?void 0:he.label)||H.location}).filter(Boolean).join(", "),F={proposals:E,client_name:e,proposal_type:a,payment_terms:p||"100% upfront",currency:I};a==="combined"&&(F.combined_net_rate=A);const V={client:e,packageType:a,items:E.map(H=>({location:H.location,netRatesValue:Array.isArray(H.net_rates)?H.net_rates.map(w_):[]})),combinedNetRateValue:a==="combined"?w_(A):0,locationsLabel:P,currency:I,paymentTerms:p||"100% upfront"};C.mutate(F,{onSuccess:H=>{y(he=>[{data:H,meta:V},...he].slice(0,3))}})}function $(){n(""),o([r()]),l("separate"),d(""),f("AED"),w("100% upfront")}return{client:e,setClient:n,items:i,updateItem:S,addItem:N,removeItem:T,addPeriod:L,removePeriod:D,updatePeriod:j,packageType:a,setPackageType:l,combinedNetRate:u,setCombinedNetRate:d,currency:h,setCurrency:f,paymentTerms:p,setPaymentTerms:w,lastResults:x,locationsQuery:b,locationOptions:k,generateMutation:C,handleGenerate:O,resetForm:$}}function z6(){const t=F6();return c.jsx(B6,{...t})}function B6({client:t,setClient:e,items:n,updateItem:s,addItem:r,removeItem:i,addPeriod:o,removePeriod:a,updatePeriod:l,packageType:u,setPackageType:d,combinedNetRate:h,setCombinedNetRate:f,currency:p,setCurrency:w,paymentTerms:x,setPaymentTerms:y,lastResults:g,locationsQuery:m,locationOptions:b,generateMutation:k,handleGenerate:_,resetForm:C}){var D;const S=Array.isArray(g)?g:[],j=k.isPending,N=v.useMemo(()=>{const O=b.map($=>{const I=$.location_key||$.key||$.id||"",A=$.display_name||$.name||$.label||I||"";return{value:I,label:A}}).filter($=>$.value);return[{value:"",label:"Select a location"},...O]},[b]),T=v.useMemo(()=>[{value:"separate",label:"Separate"},{value:"combined",label:"Combined"}],[]),L=v.useMemo(()=>[{value:"AED",label:"AED"},{value:"EUR",label:"EUR"},{value:"USD",label:"USD"},{value:"GBP",label:"GBP"}],[]);return c.jsxs(_t,{className:"h-full flex flex-col",children:[c.jsx(Kt,{className:"flex flex-row items-center justify-between",children:c.jsx(Qt,{children:"Generate Proposal"})}),c.jsxs(Gt,{className:"flex-1 min-h-0 overflow-y-auto space-y-3",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsx(Se,{label:"Client",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:t,onChange:O=>e(O.target.value),placeholder:"Client name"})}),c.jsx(Se,{label:"Package Type",children:c.jsx(at,{value:u,options:T,onChange:d})})]}),u==="combined"?c.jsx(Se,{label:"Combined Net Rate",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:h,onChange:O=>f(O.target.value),type:"number",min:"0",step:"0.01",placeholder:"0"})}):null,c.jsxs("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white/40 dark:bg-white/5 p-3 space-y-3",children:[c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Locations"}),m.isLoading?c.jsx("div",{className:"mt-1 text-xs text-black/50 dark:text-white/60",children:c.jsx(Ye,{text:"Loading locations"})}):null]}),c.jsx(te,{variant:"secondary",size:"sm",className:"rounded-xl",onClick:r,children:"Add Location"})]}),c.jsx("div",{className:"space-y-3",children:n.map(O=>{var A,W;const $=b.find(E=>(E.location_key||E.key||E.id)===O.location),I=(($==null?void 0:$.display_type)||"").toLowerCase()==="static";return c.jsxs("div",{className:"rounded-xl border border-black/5 dark:border-white/10 bg-white/60 dark:bg-white/5 p-3 space-y-3",children:[u==="combined"?c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[1.4fr_0.6fr_0.9fr_0.7fr_auto] gap-2 items-end",children:[c.jsx(Se,{label:"Location",children:c.jsx(at,{value:O.location,options:N,onChange:E=>s(O.id,"location",E)})}),c.jsx(Se,{label:"Spots",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:O.spots,onChange:E=>s(O.id,"spots",E.target.value),type:"number",min:"1",step:"1",placeholder:"1"})}),c.jsx(Se,{label:"Start Date",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:((A=O.periods[0])==null?void 0:A.startDate)||"",onChange:E=>{var P;return l(O.id,(P=O.periods[0])==null?void 0:P.id,"startDate",E.target.value)},type:"date"})}),c.jsx(Se,{label:"Duration (weeks)",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:((W=O.periods[0])==null?void 0:W.duration)||"",onChange:E=>{var P;return l(O.id,(P=O.periods[0])==null?void 0:P.id,"duration",E.target.value)},type:"number",min:"1",step:"1",placeholder:"1"})}),c.jsx(te,{variant:"ghost",size:"icon",className:"rounded-xl h-10 w-10",onClick:()=>i(O.id),disabled:n.length===1,title:"Remove location",children:c.jsx(ia,{size:16})})]}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 items-end",children:[c.jsx(Se,{label:"Location",children:c.jsx(at,{value:O.location,options:N,onChange:E=>s(O.id,"location",E)})}),c.jsxs("div",{className:"flex items-end justify-between gap-2",children:[c.jsx(Se,{label:"Spots",className:"flex-1",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:O.spots,onChange:E=>s(O.id,"spots",E.target.value),type:"number",min:"1",step:"1",placeholder:"1"})}),c.jsx(te,{variant:"ghost",size:"icon",className:"rounded-xl h-10 w-10",onClick:()=>i(O.id),disabled:n.length===1,title:"Remove location",children:c.jsx(ia,{size:16})})]})]}),I?c.jsx(Se,{label:"Production Fee",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:O.productionFee,onChange:E=>s(O.id,"productionFee",E.target.value),type:"number",min:"0",step:"0.01",placeholder:"0"})}):null,u!=="combined"?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[c.jsx("div",{className:"text-xs font-semibold text-black/60 dark:text-white/60",children:"Line Items"}),c.jsx(te,{variant:"secondary",size:"sm",className:"rounded-xl",onClick:()=>o(O.id),children:"Add Line Item"})]}),c.jsx("div",{className:"space-y-2",children:O.periods.map(E=>c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[1fr_1fr_1fr_1fr_auto] gap-2 items-end",children:[c.jsx(Se,{label:"Start Date",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:E.startDate,onChange:P=>l(O.id,E.id,"startDate",P.target.value),type:"date"})}),c.jsx(Se,{label:"Duration (weeks)",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:E.duration,onChange:P=>l(O.id,E.id,"duration",P.target.value),type:"number",min:"1",step:"1",placeholder:"1"})}),c.jsx(Se,{label:"Net Rate",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:E.netRate,onChange:P=>l(O.id,E.id,"netRate",P.target.value),type:"number",min:"0",step:"0.01",placeholder:"0"})}),c.jsx(te,{variant:"ghost",size:"icon",className:"rounded-xl h-10 w-10",onClick:()=>a(O.id,E.id),disabled:O.periods.length===1,title:"Remove dates",children:c.jsx(ia,{size:16})})]},E.id))})]}):null]},O.id)})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsx(Se,{label:"Currency",children:c.jsx(at,{value:p,options:L,onChange:w})}),c.jsx(Se,{label:"Payment Terms",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:x,onChange:O=>y(O.target.value),placeholder:"Payment terms"})})]}),k.isError?c.jsx("div",{className:"rounded-xl bg-red-50/70 text-red-700 px-4 py-2 text-sm dark:bg-red-500/10 dark:text-red-300",children:((D=k.error)==null?void 0:D.message)||"Generation failed"}):null,c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(te,{className:"rounded-2xl",onClick:_,disabled:j,children:j?c.jsx(Ye,{text:"Generating Proposal"}):"Generate Proposal"}),c.jsx(te,{variant:"secondary",className:"rounded-2xl",onClick:C,disabled:j,children:"Reset"})]}),c.jsxs("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white/40 dark:bg-white/5 p-4 space-y-3",children:[!S.length&&!j?c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"Result will appear here"}):null,j?c.jsx(Ye,{text:"Processing proposal",className:"text-sm text-black/60 dark:text-white/65"}):null,S.length?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Last 3 Generated Proposals"}),c.jsx("div",{className:"space-y-4",children:S.map((O,$)=>{const I=(O==null?void 0:O.data)||null,A=(O==null?void 0:O.meta)||null,W=[];I!=null&&I.pptx_url&&W.push({url:I.pptx_url,type:"pptx"}),I!=null&&I.pdf_url&&W.push({url:I.pdf_url,type:"pdf"});const E=(I==null?void 0:I.locations)||(A==null?void 0:A.locationsLabel)||"",P=(A==null?void 0:A.packageType)==="combined"?A==null?void 0:A.combinedNetRateValue:((A==null?void 0:A.items)||[]).reduce((V,H)=>{const he=Array.isArray(H.netRatesValue)?H.netRatesValue:[];return V+he.reduce((ee,U)=>ee+(U||0),0)},0),F=Number.isFinite(P)?`${(A==null?void 0:A.currency)||"AED"} ${Number(P).toLocaleString()}`:"";return c.jsxs("div",{className:"rounded-xl border border-black/5 dark:border-white/10 bg-white/60 dark:bg-white/5 p-3 space-y-3",children:[c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1.5 text-xs text-black/65 dark:text-white/65",children:[c.jsxs("div",{className:"flex flex-wrap items-baseline gap-1",children:[c.jsx("span",{className:"uppercase tracking-wide text-black/45 dark:text-white/50",children:"Client"}),c.jsx("span",{className:"font-semibold text-black/80 dark:text-white/85",children:(A==null?void 0:A.client)||""})]}),c.jsxs("div",{className:"flex flex-wrap items-baseline gap-1",children:[c.jsx("span",{className:"uppercase tracking-wide text-black/45 dark:text-white/50",children:"Package"}),c.jsx("span",{className:"font-semibold text-black/80 dark:text-white/85",children:(A==null?void 0:A.packageType)||""})]}),c.jsxs("div",{className:"flex flex-wrap items-baseline gap-1 sm:col-span-2",children:[c.jsx("span",{className:"uppercase tracking-wide text-black/45 dark:text-white/50",children:"Locations"}),c.jsx("span",{className:"font-semibold text-black/80 dark:text-white/85",children:E})]}),c.jsxs("div",{className:"flex flex-wrap items-baseline gap-1",children:[c.jsx("span",{className:"uppercase tracking-wide text-black/45 dark:text-white/50",children:"Total Amount"}),c.jsx("span",{className:"font-semibold text-black/80 dark:text-white/85",children:F})]})]}),W.length?c.jsx("div",{className:"space-y-2",children:W.map(V=>{const H=U6(V.url),he=H6(H),ee=V.type==="pdf"?"proposal.pdf":"proposal.pptx",U=he||ee,Q=V.type==="pdf";return c.jsx("div",{className:"rounded-xl border border-black/5 dark:border-white/10 bg-white/70 dark:bg-white/5 p-3",children:c.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[c.jsxs("div",{className:"min-w-0",children:[c.jsx("div",{className:"flex items-center gap-2 text-xs uppercase tracking-wide text-black/50 dark:text-white/60",children:Q?c.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-red-500/10 text-red-700 dark:text-red-300 px-2 py-0.5",children:[c.jsx(Kv,{size:12}),"PDF"]}):c.jsx("span",{className:"inline-flex items-center gap-1 rounded-full bg-black/5 dark:bg-white/10 px-2 py-0.5",children:"PPTX"})}),c.jsx("div",{className:"mt-1 text-xs font-semibold text-black/80 dark:text-white/85 truncate",children:U})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(te,{asChild:!0,size:"sm",variant:"ghost",className:"rounded-xl",children:c.jsxs("a",{href:H,target:"_blank",rel:"noopener noreferrer",children:[c.jsx(io,{size:14,className:"mr-1"}),"Open"]})}),c.jsx(te,{size:"sm",variant:"secondary",className:"rounded-xl",children:c.jsxs("span",{role:"link",tabIndex:0,onClick:de=>{de.preventDefault(),k_(H,U)},onKeyDown:de=>{(de.key==="Enter"||de.key===" ")&&(de.preventDefault(),k_(H,U))},className:"inline-flex items-center",children:[c.jsx(pa,{size:14,className:"mr-1"}),"Download"]})})]})]})},`${V.type}-${V.url}`)})}):c.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:"No files returned yet."})]},`proposal-output-${$}`)})})]}):null]})]})]})}function U6(t){return t?t.startsWith("http")?t:`${oc.API_BASE_URL}${t}`:""}function H6(t){if(!t)return"";try{const n=new URL(t,window.location.href).pathname.split("/").filter(Boolean);return n.length?decodeURIComponent(n[n.length-1]):""}catch{const n=t.split("?")[0].split("#")[0].split("/").filter(Boolean);return n.length?decodeURIComponent(n[n.length-1]):""}}async function k_(t,e){const s=await(await fetch(t)).blob(),r=document.createElement("a");r.href=URL.createObjectURL(s),r.download=e,document.body.appendChild(r),r.click(),r.remove(),setTimeout(()=>URL.revokeObjectURL(r.href),1e3)}function vo({className:t,placeholder:e="Search...",...n}){return c.jsx("input",{type:"text",placeholder:e,className:Te("rounded-2xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",t),...n})}function W6(){const{user:t}=oi(),[e,n]=v.useState({}),[s,r]=v.useState(!1),i=an({queryKey:["proposals","history"],queryFn:w3}),o=v.useMemo(()=>{var h;return Array.isArray(i.data)?i.data:(h=i.data)!=null&&h.proposals?i.data.proposals:i.data||[]},[i.data]),a=v.useMemo(()=>Sd(t),[t]),l=v.useMemo(()=>{const h=o||[];if(a)return h;const f=(t==null?void 0:t.id)||(t==null?void 0:t.user_id)||(t==null?void 0:t.email)||"";return f?h.filter(p=>(p.submitted_by||p.user_id||"")===f):h},[o,a,t==null?void 0:t.id,t==null?void 0:t.user_id,t==null?void 0:t.email]),u=v.useMemo(()=>{const h=new Set;return(l||[]).forEach(f=>{const p=f.submitted_by||f.user_id;p&&h.add(p)}),Array.from(h)},[l]),d=v.useMemo(()=>u.filter(h=>!e[h]),[u,e]);return v.useEffect(()=>{if(!d.length)return;r(!0);let h=!0;return(async()=>{const f=await Promise.all(d.map(async p=>{var w,x;try{const y=await _3(p),g=(y==null?void 0:y.name)||((w=y==null?void 0:y.user)==null?void 0:w.name)||((x=y==null?void 0:y.profile)==null?void 0:x.name)||p;return[p,g]}catch{return[p,p]}}));h&&(n(p=>{const w={...p};return f.forEach(([x,y])=>{w[x]||(w[x]=y)}),w}),r(!1))})(),()=>{h=!1}},[d]),v.useEffect(()=>{d.length||r(!1)},[d.length]),{historyQuery:i,userNamesLoading:s,visibleProposals:l,userNameById:e}}function V6(){const t=W6();return c.jsx(q6,{...t})}function q6({historyQuery:t,userNamesLoading:e,visibleProposals:n,userNameById:s}){const[r,i]=v.useState(""),[o,a]=v.useState(""),[l,u]=v.useState(""),d=v.useMemo(()=>(n||[]).map((y,g)=>{var T;const m=y.client_name||y.client||"Proposal",b=y.submitted_by||y.user_id||"",k=b?s[b]||b:"",_=y.date_generated||y.created_at,C=y.package_type||"",S=y.locations||((T=y.proposal_data)==null?void 0:T.locations_text)||y.location||"",j=y.total_amount||(y.total_amount_value!=null?`${y.currency||""} ${Number(y.total_amount_value).toLocaleString()}`:""),N=[];return y.pptx_url&&N.push({url:y.pptx_url,type:"pptx"}),y.pdf_url&&N.push({url:y.pdf_url,type:"pdf"}),!N.length&&y.file_url&&N.push({url:y.file_url,type:"pdf"}),{id:y.id||y.file_url||g,clientName:m,userName:k,generatedAt:_,packageType:C,locationText:S,totalAmount:j,fileEntries:N}}),[n,s]),h=v.useMemo(()=>{const y=new Set;return d.forEach(g=>{g.packageType&&g.packageType!==""&&y.add(g.packageType)}),Array.from(y)},[d]),f=v.useMemo(()=>{const y=new Set;return d.forEach(g=>{!g.locationText||g.locationText===""||g.locationText.split(",").forEach(m=>{const b=m.trim();b&&y.add(b)})}),Array.from(y)},[d]),p=v.useMemo(()=>[{value:"",label:"All packages"},...h.map(y=>({value:y,label:y}))],[h]),w=v.useMemo(()=>[{value:"",label:"All locations"},...f.map(y=>({value:y,label:y}))],[f]),x=v.useMemo(()=>{const y=l.trim().toLowerCase();return d.filter(g=>!(r&&g.packageType!==r||o&&!(g.locationText||"").split(",").map(b=>b.trim()).filter(Boolean).includes(o)||y&&!`${g.clientName} ${g.locationText}`.toLowerCase().includes(y)))},[d,r,o,l]);return c.jsxs(_t,{className:"h-full flex flex-col",children:[c.jsx(Kt,{className:"space-y-2",children:c.jsx(Qt,{children:"History"})}),c.jsx(Gt,{className:"flex-1 min-h-0 flex flex-col",children:t.isLoading||e?c.jsx(Ye,{text:"Loading",className:"text-sm text-black/60 dark:text-white/65"}):n!=null&&n.length?c.jsxs("div",{className:"flex-1 min-h-0 flex flex-col gap-3",children:[c.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[c.jsx(vo,{value:l,onChange:y=>u(y.target.value),className:"w-full sm:w-[260px]",placeholder:"Search..."}),c.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-end",children:[c.jsx(at,{value:r,options:p,onChange:i,className:"sm:w-[200px]"}),c.jsx(at,{value:o,options:w,onChange:a,className:"sm:w-[220px]"})]})]}),c.jsx("div",{className:"flex-1 min-h-0 rounded-2xl border border-black/5 dark:border-white/10 bg-white/40 dark:bg-white/5 w-full min-w-0 overflow-hidden",children:c.jsx("div",{className:"h-full w-full min-w-0 overflow-auto",children:c.jsxs("table",{className:"min-w-[760px] w-full text-sm",children:[c.jsx("thead",{className:"bg-white dark:bg-neutral-900 text-xs uppercase tracking-wide text-black/45 dark:text-white/50 sticky top-0 z-10",children:c.jsxs("tr",{children:[c.jsx("th",{className:"sticky top-0 z-10 px-4 py-3 text-left font-semibold bg-white dark:bg-neutral-900",children:"Client"}),c.jsx("th",{className:"sticky top-0 z-10 px-4 py-3 text-left font-semibold bg-white dark:bg-neutral-900",children:"Locations"}),c.jsx("th",{className:"sticky top-0 z-10 px-4 py-3 text-left font-semibold bg-white dark:bg-neutral-900",children:"Amount"}),c.jsx("th",{className:"sticky top-0 z-10 px-4 py-3 text-left font-semibold bg-white dark:bg-neutral-900",children:"User"}),c.jsx("th",{className:"sticky top-0 z-10 px-4 py-3 text-left font-semibold bg-white dark:bg-neutral-900",children:"Generated"}),c.jsx("th",{className:"sticky top-0 right-0 z-20 px-4 py-3 text-left font-semibold bg-white dark:bg-neutral-900",children:"Actions"})]})}),c.jsx("tbody",{className:"divide-y divide-black/5 dark:divide-white/10",children:(x||[]).map(y=>c.jsxs("tr",{className:"text-black/80 dark:text-white/85",children:[c.jsx("td",{className:"px-4 py-3 font-semibold",children:y.clientName}),c.jsx("td",{className:"px-4 py-3",children:y.locationText}),c.jsx("td",{className:"px-4 py-3",children:y.totalAmount}),c.jsx("td",{className:"px-4 py-3",children:y.userName}),c.jsx("td",{className:"px-4 py-3",children:y.generatedAt?new Date(y.generatedAt).toLocaleString():""}),c.jsx("td",{className:"sticky right-0 z-10 px-4 py-3 bg-white/90 dark:bg-neutral-900/95",children:y.fileEntries.length?c.jsx("div",{className:"flex flex-col gap-2",children:y.fileEntries.map(g=>{const m=K6(g.url),b=G6(m),k=g.type==="pdf"?"proposal.pdf":"proposal.pptx",_=b||k;return c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsx("span",{className:"text-[11px] uppercase tracking-wide text-black/50 dark:text-white/60",children:g.type}),c.jsx(te,{asChild:!0,size:"sm",variant:"ghost",className:"rounded-xl",children:c.jsxs("a",{href:m,target:"_blank",rel:"noopener noreferrer",children:[c.jsx(io,{size:14,className:"mr-1"}),"Open"]})}),c.jsx(te,{size:"sm",variant:"secondary",className:"rounded-xl",children:c.jsxs("span",{role:"link",tabIndex:0,onClick:C=>{C.preventDefault(),__(m,_)},onKeyDown:C=>{(C.key==="Enter"||C.key===" ")&&(C.preventDefault(),__(m,_))},className:"inline-flex items-center",children:[c.jsx(pa,{size:14,className:"mr-1"}),"Download"]})})]},`${g.type}-${g.url}`)})}):c.jsx("span",{className:"text-xs text-black/50 dark:text-white/55",children:""})})]},y.id))})]})})}),x.length?null:c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No matching proposals."})]}):c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No proposals yet."})})]})}function K6(t){return t?t.startsWith("http")?t:`${oc.API_BASE_URL}${t}`:""}function G6(t){if(!t)return"";try{const n=new URL(t,window.location.href).pathname.split("/").filter(Boolean);return n.length?decodeURIComponent(n[n.length-1]):""}catch{const n=t.split("?")[0].split("#")[0].split("/").filter(Boolean);return n.length?decodeURIComponent(n[n.length-1]):""}}async function __(t,e){const s=await(await fetch(t)).blob(),r=document.createElement("a");r.href=URL.createObjectURL(s),r.download=e,document.body.appendChild(r),r.click(),r.remove(),setTimeout(()=>URL.revokeObjectURL(r.href),1e3)}function Y6(){const[t,e]=v.useState("generate");return c.jsx("div",{className:"h-full min-h-0 flex flex-col",children:c.jsxs("div",{className:"flex-1 min-h-0 flex flex-col gap-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(te,{variant:t==="generate"?"default":"ghost",onClick:()=>e("generate"),className:"rounded-2xl",children:"Generate"}),c.jsx(te,{variant:t==="history"?"default":"ghost",onClick:()=>e("history"),className:"rounded-2xl",children:"History"})]}),c.jsxs("div",{className:"flex-1 min-h-0",children:[c.jsx("div",{className:t==="generate"?"h-full":"hidden","aria-hidden":t!=="generate",children:c.jsx(z6,{})}),c.jsx("div",{className:t==="history"?"h-full":"hidden","aria-hidden":t!=="history",children:c.jsx(V6,{})})]})]})})}function GT(t){return t?typeof t=="string"?t:t.name||t.id||t.value||"":""}function YT(t){return t?typeof t=="string"?t:t.name||t.value||t.permission||"":""}function jg(t,e){if(!t||!e)return!0;for(const n of t)if(!e.has(n))return!1;return!0}function Q6(t){const e=new Map;return(t||[]).forEach(n=>{const s=GT(n);if(!s)return;const r=(n.permissions||n.permission_list||n.permissionList||[]).map(YT).filter(Boolean);e.set(s,new Set(r))}),e}function X6(t){const e=new Map;return(t||[]).forEach(n=>{const s=n.name||n.id;if(!s)return;const r=(n.permission_sets||n.permissionSets||n.permission_set_names||[]).map(GT).filter(Boolean);e.set(s,new Set(r))}),e}function J6(t){const e=new Map;return(t||[]).forEach(n=>{const s=n.name||n.id;if(!s)return;const r=(n.permissions||[]).map(YT).filter(Boolean);e.set(s,new Set(r))}),e}function Z6({q:t,setQ:e,openNewUserModal:n,usersQuery:s,users:r,user:i,selectUser:o,setConfirmDelete:a,companyLookup:l,userCompanyFilter:u,setUserCompanyFilter:d,userProfileFilter:h,setUserProfileFilter:f,companyFilterOptions:p,profileFilterOptions:w}){const x=v.useMemo(()=>[{value:"",label:"All companies"},...p.map(m=>({...m}))],[p]),y=v.useMemo(()=>[{value:"",label:"All profiles"},...w.map(m=>({...m}))],[w]),g=c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[c.jsx(Qt,{children:"Users"}),c.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-end",children:[c.jsx(vo,{value:t,onChange:m=>e(m.target.value),className:"w-full sm:w-[220px]"}),c.jsx(te,{variant:"secondary",className:"rounded-2xl self-start sm:self-auto",onClick:n,children:"Add user"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[c.jsx(at,{value:u,options:x,onChange:d}),c.jsx(at,{value:h,options:y,onChange:f})]})]});return c.jsxs(_t,{className:"h-full min-h-0 flex flex-col",children:[c.jsx(Kt,{className:"hidden md:block space-y-2",children:g}),c.jsxs(Gt,{className:"flex-1 min-h-0 overflow-y-auto p-0",children:[c.jsx("div",{className:"space-y-2 p-5 pb-3 md:hidden",children:g}),c.jsx("div",{className:"space-y-4 p-5 pt-1",children:s.isLoading?c.jsx(Ye,{text:"Loading",className:"text-sm text-black/60 dark:text-white/65"}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:r.map(m=>{var T,L,D,O;const b=Array.isArray(m.profiles)?m.profiles.map($=>($==null?void 0:$.display_name)||($==null?void 0:$.name)||$).filter(Boolean):[((T=m.profiles)==null?void 0:T.display_name)||((L=m.profiles)==null?void 0:L.name)||m.profile||m.profile_name].filter(Boolean),k=b.length?b.length>2?`${b[0]}, +${b.length-1}`:b.join(", "):"",_=!!(m.id&&(i!=null&&i.id)&&m.id===i.id||m.user_id&&(i!=null&&i.user_id)&&m.user_id===i.user_id||m.email&&(i!=null&&i.email)&&m.email===i.email),C=m.is_active??m.isActive??m.active,S=typeof C=="boolean",j=S?C:!0,N=j?"Deactivate":"Reactivate";return c.jsxs(zt,{className:"p-4 space-y-2",children:[c.jsxs("div",{className:"flex items-start justify-between gap-2",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsx("div",{className:"text-base font-semibold",children:m.name||""}),S&&!j?c.jsx("span",{className:"rounded-full bg-red-100 px-2 py-0.5 text-xs font-semibold text-red-700 dark:bg-red-500/20 dark:text-red-200",children:"Inactive"}):null]}),c.jsx("div",{className:"text-sm text-black/55 dark:text-white/60",children:m.email})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Tn,{onClick:()=>o(m),title:"Edit user","aria-label":"Edit user",children:c.jsx(kd,{size:16})}),c.jsx(Tn,{variant:"ghost",onClick:()=>a({open:!0,type:"user",payload:{id:m.id||m.user_id,isActive:j},label:`${N} user "${m.email}"?`}),disabled:_,title:_?"You cannot deactivate yourself":`${N} user`,"aria-label":`${N} user`,className:j?void 0:"text-emerald-600 hover:text-emerald-700 dark:text-emerald-300",children:j?c.jsx(YM,{size:16}):c.jsx(GM,{size:16})})]})]}),c.jsxs("div",{className:"text-sm text-black/55 dark:text-white/60",children:["Profiles: ",c.jsx("span",{className:"font-semibold",children:k})]}),c.jsxs("div",{className:"text-sm text-black/55 dark:text-white/60",children:["Company:"," ",c.jsx("span",{className:"font-semibold",children:((D=m.company)==null?void 0:D.name)||l.get(((O=m.company)==null?void 0:O.code)||m.company_code||m.company_id)||""})]})]},m.id||m.user_id||m.email)})})})]})]})}function eH({q:t,setQ:e,usersQuery:n,users:s,user:r,companyLookup:i,userCompanyFilter:o,setUserCompanyFilter:a,userProfileFilter:l,setUserProfileFilter:u,companyFilterOptions:d,profileFilterOptions:h,companyList:f,profileOptions:p,profileValues:w,permissionSetList:x,permissionSetValues:y,permissionList:g,permissionsQuery:m,page:b}){const{selectedUser:k,setSelectedUser:_,userForm:C,setUserForm:S,userModalOpen:j,setUserModalOpen:N,userModalLoading:T,setUserModalLoading:L,userModalMode:D,setUserModalMode:O,userProfilesOpen:$,setUserProfilesOpen:I,userPermissionSetsOpen:A,setUserPermissionSetsOpen:W,userPermissionsOpen:E,setUserPermissionsOpen:P,savingUser:F,setPermissionsMessage:V,selectUser:H,openNewUserModal:he,saveUser:ee,deleteUser:U,selectedUserProfiles:Q,selectedUserPermissionSets:de,selectedUserPermissions:Z,selectedUserPermissionSet:be,customUserPermissions:Ae,toggleUserPermission:me,selectAllUserPermissions:fe,clearUserPermissions:De,toggleUserProfile:J,selectAllUserProfiles:pe,clearUserProfiles:ie,toggleUserPermissionSet:K,selectAllUserPermissionSets:G,clearUserPermissionSets:le}=tH({permissionList:g,profileValues:w,permissionSetValues:y,profileOptions:p,permissionSetList:x}),[Y,B]=v.useState({open:!1,type:"",payload:null,label:""}),xe=!!(k&&(k.id&&(r!=null&&r.id)&&k.id===(r==null?void 0:r.id)||k.user_id&&(r!=null&&r.user_id)&&k.user_id===(r==null?void 0:r.user_id)||k.email&&(r!=null&&r.email)&&k.email===(r==null?void 0:r.email)));v.useEffect(()=>{_(null)},[b,_]);async function je(){if(!(!Y.open||!Y.payload))try{const Ce=Y.payload,Le=(Ce==null?void 0:Ce.id)??Ce;if(!Le||r!=null&&r.id&&Le===r.id||r!=null&&r.user_id&&Le===r.user_id)return;await U(Ce)}finally{B({open:!1,type:"",payload:null,label:""})}}return c.jsxs(c.Fragment,{children:[c.jsx(Z6,{q:t,setQ:e,openNewUserModal:he,usersQuery:n,users:s,user:r,selectUser:H,setConfirmDelete:B,companyLookup:i,userCompanyFilter:o,setUserCompanyFilter:a,userProfileFilter:l,setUserProfileFilter:u,companyFilterOptions:d,profileFilterOptions:h}),c.jsx(nH,{open:j,onClose:()=>{N(!1),_(null),V(""),L(!1),O("edit"),I(!1),W(!1),P(!1)},userModalLoading:T,userModalMode:D,selectedUser:k,userForm:C,setUserForm:S,companyList:f,profileOptions:p,profileValues:w,userProfilesOpen:$,setUserProfilesOpen:I,selectAllUserProfiles:pe,clearUserProfiles:ie,selectedUserProfiles:Q,toggleUserProfile:J,permissionSetList:x,permissionSetValues:y,userPermissionSetsOpen:A,setUserPermissionSetsOpen:W,selectAllUserPermissionSets:G,clearUserPermissionSets:le,selectedUserPermissionSets:de,toggleUserPermissionSet:K,userPermissionsOpen:E,setUserPermissionsOpen:P,selectedUserPermissions:Z,permissionList:g,permissionsQuery:m,selectedUserPermissionSet:be,toggleUserPermission:me,selectAllUserPermissions:fe,clearUserPermissions:De,customUserPermissions:Ae,isSelfUser:xe,setConfirmDelete:B,saveUser:ee,savingUser:F}),c.jsx(cc,{open:Y.open,message:Y.label,onClose:()=>B({open:!1,type:"",payload:null,label:""}),onConfirm:je})]})}function tH({permissionList:t,profileValues:e,permissionSetValues:n,profileOptions:s,permissionSetList:r}){const i=Or(),[o,a]=v.useState(null),[l,u]=v.useState({name:"",email:"",profiles:[],permissionSets:[],company:"",is_active:!0,permissionsText:""}),[d,h]=v.useState(!1),[f,p]=v.useState(!1),[w,x]=v.useState("edit"),[y,g]=v.useState(!1),[m,b]=v.useState(!1),[k,_]=v.useState(!1),[C,S]=v.useState(!1),[j,N]=v.useState(""),T=v.useMemo(()=>new Set(l.profiles||[]),[l.profiles]),L=v.useMemo(()=>new Set(l.permissionSets||[]),[l.permissionSets]),D=v.useMemo(()=>yn(l.permissionsText),[l.permissionsText]),O=v.useMemo(()=>new Set(D),[D]),$=v.useMemo(()=>{if(!t.length)return D;const J=new Set(t);return D.filter(pe=>!J.has(pe))},[t,D]),I=v.useMemo(()=>Q6(r),[r]),A=v.useMemo(()=>X6(s),[s]),W=v.useMemo(()=>J6(s),[s]);function E(J,pe,ie){return(J||[]).filter(K=>{const G=pe.get(K);return G?jg(G,ie):!0})}function P(J,pe,ie){const K=new Set(ie||[]);return(J||[]).filter(G=>{const le=W.get(G),Y=A.get(G);if(!le&&!Y)return!0;if(Y&&!jg(Y,K))return!1;const B=new Set;return le&&le.forEach(xe=>B.add(xe)),Y&&Y.forEach(xe=>{const je=I.get(xe);je&&je.forEach(Ce=>B.add(Ce))}),jg(B,pe)})}function F(J,pe){const ie=new Set(J.profiles||[]),K=new Set(J.permissionSets||[]),G=new Set(yn(J.permissionsText));return ie.forEach(le=>{const Y=A.get(le);Y&&Y.forEach(xe=>K.add(xe));const B=W.get(le);B&&B.forEach(xe=>G.add(xe)),Y&&Y.forEach(xe=>{const je=I.get(xe);je&&je.forEach(Ce=>G.add(Ce))})}),{...J,permissionSets:Array.from(K),permissionsText:Array.from(G).join(`
`)}}async function V(J){var G,le;a(J),N(""),x("edit"),h(!0),p(!0),g(!1),b(!1),_(!1);const pe=Array.isArray(J.profiles)?J.profiles.map(Y=>(Y==null?void 0:Y.name)||(Y==null?void 0:Y.id)||Y).filter(Boolean):[((G=J.profiles)==null?void 0:G.name)||J.profile||J.profile_name].filter(Boolean),ie=(J.permission_sets||J.permissionSets||J.permission_set_names||[]).map(Y=>typeof Y=="string"?Y:(Y==null?void 0:Y.name)||(Y==null?void 0:Y.id)).filter(Boolean);u({name:J.name||"",email:J.email||"",profiles:pe,permissionSets:ie,company:((le=J.company)==null?void 0:le.code)||J.company_code||J.company_id||"",is_active:J.is_active!==!1,permissionsText:""});const K=J.id||J.user_id;if(K)try{const Y=await S3(K),B=(Y==null?void 0:Y.permissions)??Y,xe=Array.isArray(B)?B.map(je=>typeof je=="string"?je:je==null?void 0:je.name).filter(Boolean):[];u(je=>F({...je,permissionsText:xe.join(`
`)}))}catch{}p(!1)}function H(){a(null),N(""),x("add"),p(!1),g(!1),b(!1),_(!1),u({name:"",email:"",profiles:[],permissionSets:[],company:"",is_active:!0,permissionsText:""}),h(!0)}async function he(){var G,le;if(w==="edit"&&!o)return;S(!0),N("");const J=(o==null?void 0:o.id)||(o==null?void 0:o.user_id);if(w==="edit"&&!J){S(!1),N("Missing user id");return}const pe=yn(l.permissionsText),ie=l.profiles||[],K={name:l.name,is_active:!!l.is_active,profile_names:ie,profile_name:ie[0]||null,permission_sets:l.permissionSets||[],company_code:l.company||null,...w==="add"?{email:l.email}:{}};try{if(w==="add"){const Y=await j3(K),B=(Y==null?void 0:Y.id)||(Y==null?void 0:Y.user_id)||((G=Y==null?void 0:Y.user)==null?void 0:G.id)||((le=Y==null?void 0:Y.user)==null?void 0:le.user_id);B!=null&&await Uk(B,pe),N("User created")}else await C3(J,K),await Uk(J,pe),N("User updated");i.invalidateQueries({queryKey:["admin","users"]}),h(!1),a(null)}catch(Y){N((Y==null?void 0:Y.message)||"Failed to save user")}finally{S(!1)}}async function ee(J){const pe=(J==null?void 0:J.id)??J;if(pe)try{const ie=(J==null?void 0:J.isActive)??(J==null?void 0:J.is_active);(typeof ie=="boolean"?ie:!0)?await E3(pe):await N3(pe),i.invalidateQueries({queryKey:["admin","users"]}),h(!1),a(null)}catch{}}function U(J){u(pe=>{const ie=new Set(yn(pe.permissionsText)),K=ie.has(J);K?ie.delete(J):ie.add(J);let G=pe.permissionSets||[],le=pe.profiles||[];return K&&(G=E(G,I,ie),le=P(le,ie,G)),{...pe,permissionsText:Array.from(ie).join(`
`),permissionSets:G,profiles:le}})}function Q(){const J=new Set([...D,...t]);u(pe=>({...pe,permissionsText:Array.from(J).join(`
`)}))}function de(){u(J=>({...J,permissionsText:"",permissionSets:[],profiles:[]}))}function Z(J){u(pe=>{const ie=new Set(pe.profiles||[]),K=new Set(pe.permissionSets||[]),G=new Set(yn(pe.permissionsText));if(ie.has(J)){ie.delete(J);const xe=E(Array.from(K),I,G),je=P(Array.from(ie),G,xe);return{...pe,profiles:je,permissionSets:xe,permissionsText:Array.from(G).join(`
`)}}ie.add(J);const Y=A.get(J);Y&&Y.forEach(xe=>K.add(xe));const B=W.get(J);return B&&B.forEach(xe=>G.add(xe)),Y&&Y.forEach(xe=>{const je=I.get(xe);je&&je.forEach(Ce=>G.add(Ce))}),{...pe,profiles:Array.from(ie),permissionSets:Array.from(K),permissionsText:Array.from(G).join(`
`)}})}function be(){u(J=>{const pe=new Set([...J.profiles||[],...e]),ie=new Set(J.permissionSets||[]),K=new Set(yn(J.permissionsText));return pe.forEach(G=>{const le=A.get(G);le&&le.forEach(B=>ie.add(B));const Y=W.get(G);Y&&Y.forEach(B=>K.add(B)),le&&le.forEach(B=>{const xe=I.get(B);xe&&xe.forEach(je=>K.add(je))})}),{...J,profiles:Array.from(pe),permissionSets:Array.from(ie),permissionsText:Array.from(K).join(`
`)}})}function Ae(){u(J=>({...J,profiles:[]}))}function me(J){u(pe=>{const ie=new Set(pe.permissionSets||[]),K=new Set(yn(pe.permissionsText));if(ie.has(J)){ie.delete(J);const Y=P(pe.profiles||[],K,Array.from(ie));return{...pe,permissionSets:Array.from(ie),profiles:Y,permissionsText:Array.from(K).join(`
`)}}ie.add(J);const le=I.get(J);return le&&le.forEach(Y=>K.add(Y)),{...pe,permissionSets:Array.from(ie),permissionsText:Array.from(K).join(`
`)}})}function fe(){u(J=>{const pe=new Set([...J.permissionSets||[],...n]),ie=new Set(yn(J.permissionsText));return pe.forEach(K=>{const G=I.get(K);G&&G.forEach(le=>ie.add(le))}),{...J,permissionSets:Array.from(pe),permissionsText:Array.from(ie).join(`
`)}})}function De(){u(J=>{const pe=new Set(yn(J.permissionsText)),ie=P(J.profiles||[],pe,[]);return{...J,permissionSets:[],profiles:ie,permissionsText:Array.from(pe).join(`
`)}})}return{selectedUser:o,setSelectedUser:a,userForm:l,setUserForm:u,userModalOpen:d,setUserModalOpen:h,userModalLoading:f,setUserModalLoading:p,userModalMode:w,setUserModalMode:x,userProfilesOpen:y,setUserProfilesOpen:g,userPermissionSetsOpen:m,setUserPermissionSetsOpen:b,userPermissionsOpen:k,setUserPermissionsOpen:_,savingUser:C,permissionsMessage:j,setPermissionsMessage:N,selectUser:V,openNewUserModal:H,saveUser:he,selectedUserProfiles:T,selectedUserPermissionSets:L,selectedUserPermissions:D,selectedUserPermissionSet:O,customUserPermissions:$,toggleUserPermission:U,selectAllUserPermissions:Q,clearUserPermissions:de,toggleUserProfile:Z,selectAllUserProfiles:be,clearUserProfiles:Ae,toggleUserPermissionSet:me,selectAllUserPermissionSets:fe,clearUserPermissionSets:De,deleteUser:ee}}function nH({open:t,onClose:e,userModalLoading:n,userModalMode:s,selectedUser:r,userForm:i,setUserForm:o,companyList:a,profileOptions:l,profileValues:u,userProfilesOpen:d,setUserProfilesOpen:h,selectAllUserProfiles:f,clearUserProfiles:p,selectedUserProfiles:w,toggleUserProfile:x,permissionSetList:y,permissionSetValues:g,userPermissionSetsOpen:m,setUserPermissionSetsOpen:b,selectAllUserPermissionSets:k,clearUserPermissionSets:_,selectedUserPermissionSets:C,toggleUserPermissionSet:S,userPermissionsOpen:j,setUserPermissionsOpen:N,selectedUserPermissions:T,permissionList:L,permissionsQuery:D,selectedUserPermissionSet:O,toggleUserPermission:$,selectAllUserPermissions:I,clearUserPermissions:A,customUserPermissions:W,isSelfUser:E,setConfirmDelete:P,saveUser:F,savingUser:V}){const H=v.useMemo(()=>{const ee=a.map(U=>{const Q=U.code||U.id||"";return{value:Q,label:U.name||U.code||Q||""}}).filter(U=>U.value);return[{value:"",label:"Select company"},...ee]},[a]),he=v.useMemo(()=>[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],[]);return c.jsx(ks,{open:t,onClose:e,title:s==="add"?"Add user":"Edit user",maxWidth:"560px",children:n?c.jsx(Ye,{text:"Loading user",className:"text-sm text-black/60 dark:text-white/65"}):s==="add"||r?c.jsxs("div",{className:"space-y-3",children:[s==="edit"?c.jsxs("div",{className:"text-xs text-black/50 dark:text-white/55",children:["Editing ",r==null?void 0:r.email]}):null,c.jsx(Se,{label:"Name",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:i.name,onChange:ee=>o(U=>({...U,name:ee.target.value}))})}),c.jsx(Se,{label:"Email",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:i.email,onChange:ee=>o(U=>({...U,email:ee.target.value})),type:"email",disabled:s==="edit"})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsx(Se,{label:"Company",children:c.jsx(at,{value:i.company||"",options:H,onChange:ee=>o(U=>({...U,company:ee}))})}),c.jsx(Se,{label:"Status",children:c.jsx(at,{value:i.is_active?"active":"inactive",options:he,onChange:ee=>o(U=>({...U,is_active:ee==="active"}))})})]}),c.jsx(Se,{label:"Profiles",children:c.jsxs(zt,{className:"p-4",children:[c.jsxs("button",{type:"button",className:"flex w-full items-center justify-between gap-3 text-left",onClick:()=>h(ee=>!ee),"aria-expanded":d,children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Profiles"}),c.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:bl(i.profiles.length,"profile")})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-black/50 dark:text-white/55",children:[c.jsx("span",{children:d?"Hide":"Edit"}),c.jsx(es,{size:16,className:Te("transition-transform",d&&"rotate-180")})]})]}),d?c.jsxs("div",{className:"mt-0 space-y-0",children:[c.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx(te,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:f,disabled:!u.length,children:"Select all"}),c.jsx(te,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:p,disabled:!i.profiles.length,children:"Clear"})]})}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-[168px] overflow-y-auto p-1",children:[l.map(ee=>{const U=ee.name||ee.id;if(!U)return null;const Q=w.has(U);return c.jsxs("button",{type:"button",onClick:()=>x(U),className:Te("mmg-profile-option flex items-center justify-between gap-3 rounded-xl px-3 py-1.5 text-xs ring-1 transition-colors",Q?"bg-black/5 dark:bg-white/10 ring-black/20 dark:ring-white/20 text-black dark:text-white":"bg-white/60 dark:bg-white/5 ring-black/5 dark:ring-white/10 text-black/70 dark:text-white/70 hover:bg-black/5 dark:hover:bg-white/10"),children:[c.jsx("span",{className:"min-w-0 truncate",children:ee.display_name||ee.name||U}),c.jsx("span",{className:Te("h-4 w-4 rounded-full flex items-center justify-center transition-colors",Q?"bg-black text-white dark:bg-white dark:text-black shadow-soft":"bg-black/5 dark:bg-white/10 text-black/40 dark:text-white/40"),children:c.jsx(ra,{size:14,className:Q?"opacity-100":"opacity-0"})})]},U)}),l.length?null:c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No profiles available."})]})]}):null]})}),c.jsx(Se,{label:"Permission Sets",children:c.jsxs(zt,{className:"p-4",children:[c.jsxs("button",{type:"button",className:"flex w-full items-center justify-between gap-3 text-left",onClick:()=>b(ee=>!ee),"aria-expanded":m,children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Permission sets"}),c.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:bl(i.permissionSets.length,"permission set","permission sets")})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-black/50 dark:text-white/55",children:[c.jsx("span",{children:m?"Hide":"Edit"}),c.jsx(es,{size:16,className:Te("transition-transform",m&&"rotate-180")})]})]}),m?c.jsxs("div",{className:"mt-0 space-y-0",children:[c.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx(te,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:k,disabled:!g.length,children:"Select all"}),c.jsx(te,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:_,disabled:!i.permissionSets.length,children:"Clear"})]})}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-[168px] overflow-y-auto p-1",children:[y.map(ee=>{const U=ee.name||ee.id;if(!U)return null;const Q=C.has(U);return c.jsxs("button",{type:"button",onClick:()=>S(U),className:Te("flex items-center justify-between gap-3 rounded-xl px-3 py-1.5 text-xs ring-1 transition-colors",Q?"bg-black/5 dark:bg-white/10 ring-black/20 dark:ring-white/20 text-black dark:text-white":"bg-white/60 dark:bg-white/5 ring-black/5 dark:ring-white/10 text-black/70 dark:text-white/70 hover:bg-black/5 dark:hover:bg-white/10"),children:[c.jsx("span",{className:"min-w-0 truncate",children:ee.display_name||ee.name||U}),c.jsx("span",{className:Te("h-4 w-4 rounded-full flex items-center justify-center transition-colors",Q?"bg-black text-white dark:bg-white dark:text-black shadow-soft":"bg-black/5 dark:bg-white/10 text-black/40 dark:text-white/40"),children:c.jsx(ra,{size:14,className:Q?"opacity-100":"opacity-0"})})]},U)}),y.length?null:c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No permission sets available."})]})]}):null]})}),c.jsx(Se,{label:"Permissions",children:c.jsxs(zt,{className:"p-4",children:[c.jsxs("button",{type:"button",className:"flex w-full items-center justify-between gap-3 text-left",onClick:()=>N(ee=>!ee),"aria-expanded":j,children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Permissions"}),c.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:bl(T.length,"permission")})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-black/50 dark:text-white/55",children:[c.jsx("span",{children:j?"Hide":"Edit"}),c.jsx(es,{size:16,className:Te("transition-transform",j&&"rotate-180")})]})]}),j?c.jsxs("div",{className:"mt-0 space-y-0",children:[c.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx(te,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:I,disabled:!L.length,children:"Select all"}),c.jsx(te,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:A,disabled:!T.length,children:"Clear"})]})}),D.isLoading?c.jsx(Ye,{text:"Loading permissions",className:"text-sm text-black/60 dark:text-white/65"}):L.length?c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-[168px] overflow-y-auto p-1",children:L.map(ee=>{const U=O.has(ee);return c.jsxs("button",{type:"button",onClick:()=>$(ee),className:Te("flex items-center justify-between gap-3 rounded-xl px-3 py-1.5 text-xs ring-1 transition-colors",U?"bg-black/5 dark:bg-white/10 ring-black/20 dark:ring-white/20 text-black dark:text-white":"bg-white/60 dark:bg-white/5 ring-black/5 dark:ring-white/10 text-black/70 dark:text-white/70 hover:bg-black/5 dark:hover:bg-white/10"),children:[c.jsx("span",{className:"min-w-0 truncate",children:ee}),c.jsx("span",{className:Te("h-4 w-4 rounded-full flex items-center justify-center transition-colors",U?"bg-black text-white dark:bg-white dark:text-black shadow-soft":"bg-black/5 dark:bg-white/10 text-black/40 dark:text-white/40"),children:c.jsx(ra,{size:14,className:U?"opacity-100":"opacity-0"})})]},ee)})}):c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No permissions available."}),W.length?c.jsxs("div",{className:"rounded-2xl bg-white/50 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 p-3",children:[c.jsx("div",{className:"text-xs font-semibold text-black/60 dark:text-white/65",children:"Custom permissions"}),c.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:W.map(ee=>c.jsxs("button",{type:"button",onClick:()=>$(ee),className:"flex items-center gap-2 rounded-full bg-black/5 dark:bg-white/10 px-3 py-1 text-xs text-black/70 dark:text-white/70 hover:bg-black/8 dark:hover:bg-white/15",title:"Remove permission",children:[c.jsx("span",{className:"max-w-[220px] truncate",children:ee}),c.jsx("span",{className:"text-black/40 dark:text-white/40",children:"x"})]},ee))})]}):null]}):null]})}),c.jsxs("div",{className:"flex gap-2 justify-end",children:[s==="edit"?c.jsx(te,{variant:"ghost",className:Te("rounded-2xl",typeof((r==null?void 0:r.is_active)??(r==null?void 0:r.isActive)??(r==null?void 0:r.active))=="boolean"&&!((r==null?void 0:r.is_active)??(r==null?void 0:r.isActive)??(r==null?void 0:r.active))?"text-emerald-600 hover:text-emerald-700 dark:text-emerald-300":"text-red-600 hover:text-red-700 dark:text-red-300"),onClick:()=>P({open:!0,type:"user",payload:{id:(r==null?void 0:r.id)||(r==null?void 0:r.user_id),isActive:typeof((r==null?void 0:r.is_active)??(r==null?void 0:r.isActive)??(r==null?void 0:r.active))=="boolean"?(r==null?void 0:r.is_active)??(r==null?void 0:r.isActive)??(r==null?void 0:r.active):!0},label:`${typeof((r==null?void 0:r.is_active)??(r==null?void 0:r.isActive)??(r==null?void 0:r.active))=="boolean"?(r==null?void 0:r.is_active)??(r==null?void 0:r.isActive)??(r==null?void 0:r.active)?"Deactivate":"Reactivate":"Deactivate"} user "${r==null?void 0:r.email}"?`}),disabled:E,children:typeof((r==null?void 0:r.is_active)??(r==null?void 0:r.isActive)??(r==null?void 0:r.active))=="boolean"?(r==null?void 0:r.is_active)??(r==null?void 0:r.isActive)??(r==null?void 0:r.active)?"Deactivate":"Reactivate":"Deactivate"}):c.jsx("span",{}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(te,{variant:"ghost",className:"rounded-2xl",onClick:e,children:"Cancel"}),c.jsx(te,{className:"rounded-2xl",onClick:F,disabled:V,children:V?c.jsx(Ye,{text:"Saving"}):"Save"})]})]})]}):c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"Select a user to edit."})})}function sH({companySearch:t,setCompanySearch:e,openCompanyModal:n,companiesQuery:s,filteredCompanyList:r,companyLookup:i,setConfirmDelete:o}){const a=c.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[c.jsx(Qt,{children:"Companies"}),c.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-end",children:[c.jsx(vo,{value:t,onChange:l=>e(l.target.value),className:"w-full sm:w-[220px]"}),c.jsx(te,{variant:"secondary",className:"rounded-2xl self-start sm:self-auto",onClick:()=>n(null),children:"Add company"})]})]});return c.jsxs(_t,{className:"h-full min-h-0 flex flex-col",children:[c.jsx(Kt,{className:"hidden md:block space-y-2",children:a}),c.jsxs(Gt,{className:"flex-1 min-h-0 overflow-y-auto p-0",children:[c.jsx("div",{className:"space-y-2 p-5 pb-3 md:hidden",children:a}),c.jsx("div",{className:"space-y-4 p-5 pt-1",children:s.isLoading?c.jsx(Ye,{text:"Loading",className:"text-sm text-black/60 dark:text-white/65"}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.map(l=>c.jsxs(zt,{className:"p-4 space-y-2",children:[c.jsxs("div",{className:"flex items-start justify-between gap-2",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-base font-semibold",children:l.name||l.code}),c.jsx("div",{className:"text-sm text-black/55 dark:text-white/60",children:l.code||""})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Tn,{onClick:()=>n(l),title:"Edit company","aria-label":"Edit company",children:c.jsx(kd,{size:16})}),c.jsx(Tn,{variant:"ghost",onClick:()=>o({open:!0,type:"company",payload:l.code||l.id,label:`Delete company "${l.name||l.code}"?`}),title:"Delete company","aria-label":"Delete company",children:c.jsx(ia,{size:16})})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-2 text-sm text-black/55 dark:text-white/60",children:[l.country?c.jsx("span",{children:l.country}):null,l.currency?c.jsxs("span",{children:[" ",l.currency]}):null,l.timezone?c.jsxs("span",{children:[" ",l.timezone]}):null]}),c.jsxs("div",{className:"flex flex-wrap gap-2 text-sm text-black/55 dark:text-white/60",children:[c.jsxs("span",{children:["Parent: ",i.get(l.parent_id)||""]}),c.jsxs("span",{children:[" ",l.isgroup?"Group":"Company"]}),c.jsxs("span",{children:[" ",l.is_active===!1?"Inactive":"Active"]})]})]},l.code||l.id)),r.length?null:c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:t.trim()?"No matching companies.":"No companies available."})]})})]})]})}function rH({companySearch:t,setCompanySearch:e,companiesQuery:n,filteredCompanyList:s,companyLookup:r,companyList:i}){const{companyForm:o,setCompanyForm:a,editingCompany:l,setEditingCompany:u,companyModalOpen:d,setCompanyModalOpen:h,savingCompany:f,openCompanyModal:p,saveCompany:w,deleteCompany:x}=iH(),[y,g]=v.useState({open:!1,type:"",payload:null,label:""});async function m(){if(!(!y.open||!y.payload))try{await x(y.payload)}finally{g({open:!1,type:"",payload:null,label:""})}}return c.jsxs(c.Fragment,{children:[c.jsx(sH,{companySearch:t,setCompanySearch:e,openCompanyModal:p,companiesQuery:n,filteredCompanyList:s,companyLookup:r,setConfirmDelete:g}),c.jsx(oH,{open:d,onClose:()=>{h(!1),u(null),a({code:"",name:"",parent_id:"",country:"",currency:"",timezone:"",isgroup:!1,is_active:!0})},editingCompany:l,companyForm:o,setCompanyForm:a,companyList:i,setConfirmDelete:g,saveCompany:w,savingCompany:f}),c.jsx(cc,{open:y.open,message:y.label,onClose:()=>g({open:!1,type:"",payload:null,label:""}),onConfirm:m})]})}function iH(){const t=Or(),[e,n]=v.useState({code:"",name:"",parent_id:"",country:"",currency:"",timezone:"",isgroup:!1,is_active:!0}),[s,r]=v.useState(null),[i,o]=v.useState(!1),[a,l]=v.useState(!1);function u(f){f?(r(f.code||f.id),n({code:f.code||"",name:f.name||"",parent_id:f.parent_id??"",country:f.country??"",currency:f.currency??"",timezone:f.timezone??"",isgroup:!!f.isgroup,is_active:f.is_active!==!1})):(r(null),n({code:"",name:"",parent_id:"",country:"",currency:"",timezone:"",isgroup:!1,is_active:!0})),o(!0)}async function d(){if(!e.code.trim()||!e.name.trim())return;l(!0);const f={code:e.code.trim(),name:e.name.trim(),parent_id:e.parent_id||null,country:e.country||null,currency:e.currency||null,timezone:e.timezone||null,isgroup:!!e.isgroup,is_active:!!e.is_active};try{s?await D3(s,f):await I3(f),t.invalidateQueries({queryKey:["admin","companies"]}),o(!1),r(null)}catch{}finally{l(!1)}}async function h(f){if(f)try{await L3(f),t.invalidateQueries({queryKey:["admin","companies"]}),o(!1),r(null)}catch{}}return{companyForm:e,setCompanyForm:n,editingCompany:s,setEditingCompany:r,companyModalOpen:i,setCompanyModalOpen:o,savingCompany:a,openCompanyModal:u,saveCompany:d,deleteCompany:h}}function oH({open:t,onClose:e,editingCompany:n,companyForm:s,setCompanyForm:r,companyList:i,setConfirmDelete:o,saveCompany:a,savingCompany:l}){const u=[{value:"",label:"None"},...i.filter(f=>(f.code||f.id)!==s.code).map(f=>{const p=f.code||f.id||"";return{value:p,label:f.name||f.code||p||""}}).filter(f=>f.value)],d=[{value:"company",label:"Company"},{value:"group",label:"Group"}],h=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}];return c.jsx(ks,{open:t,onClose:e,title:n?`Edit company: ${s.name||s.code}`:"Add company",maxWidth:"640px",children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsx(Se,{label:"Code",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:s.code,onChange:f=>r(p=>({...p,code:f.target.value})),placeholder:"MMG-001",disabled:!!n})}),c.jsx(Se,{label:"Name",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:s.name,onChange:f=>r(p=>({...p,name:f.target.value})),placeholder:"MMG Global"})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsx(Se,{label:"Parent company",children:c.jsx(at,{value:s.parent_id||"",options:u,onChange:f=>r(p=>({...p,parent_id:f}))})}),c.jsx(Se,{label:"Country",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:s.country,onChange:f=>r(p=>({...p,country:f.target.value})),placeholder:"US"})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsx(Se,{label:"Currency",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:s.currency,onChange:f=>r(p=>({...p,currency:f.target.value})),placeholder:"USD"})}),c.jsx(Se,{label:"Timezone",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:s.timezone,onChange:f=>r(p=>({...p,timezone:f.target.value})),placeholder:"America/New_York"})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsx(Se,{label:"Type",children:c.jsx(at,{value:s.isgroup?"group":"company",options:d,onChange:f=>r(p=>({...p,isgroup:f==="group"}))})}),c.jsx(Se,{label:"Status",children:c.jsx(at,{value:s.is_active?"active":"inactive",options:h,onChange:f=>r(p=>({...p,is_active:f==="active"}))})})]}),c.jsxs("div",{className:"flex items-center justify-between gap-2 pt-1",children:[n?c.jsx(te,{variant:"ghost",className:"rounded-2xl text-red-600 hover:text-red-700 dark:text-red-300",onClick:()=>o({open:!0,type:"company",payload:n,label:`Delete company "${s.name||s.code}"?`}),children:"Delete"}):c.jsx("span",{}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(te,{variant:"ghost",className:"rounded-2xl",onClick:e,children:"Cancel"}),c.jsx(te,{className:"rounded-2xl",onClick:a,disabled:l,children:l?c.jsx(Ye,{text:"Saving"}):"Save"})]})]})]})})}function aH({profileSearch:t,setProfileSearch:e,openProfileModal:n,filteredProfileOptions:s,duplicateProfile:r,setConfirmDelete:i}){const o=c.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[c.jsx(Qt,{children:"Profiles"}),c.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-end",children:[c.jsx(vo,{value:t,onChange:a=>e(a.target.value),className:"w-full sm:w-[220px]"}),c.jsx(te,{variant:"secondary",className:"rounded-2xl self-start sm:self-auto",onClick:()=>n(null),children:"Add profile"})]})]});return c.jsxs(_t,{className:"h-full min-h-0 flex flex-col",children:[c.jsx(Kt,{className:"hidden md:block space-y-2",children:o}),c.jsxs(Gt,{className:"flex-1 min-h-0 overflow-y-auto p-0",children:[c.jsx("div",{className:"space-y-2 p-5 pb-3 md:hidden",children:o}),c.jsxs("div",{className:"space-y-4 p-5 pt-1",children:[c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:s.map(a=>c.jsxs(zt,{className:"p-4 space-y-1",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-base font-semibold",children:a.display_name||a.name}),c.jsx("div",{className:"text-sm text-black/55 dark:text-white/60",children:a.name})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Tn,{onClick:()=>r(a),title:"Duplicate profile","aria-label":"Duplicate profile",children:c.jsx(HC,{size:16})}),a.is_system?c.jsx("span",{className:"text-xs rounded-full px-2 py-0.5 bg-black/5 dark:bg-white/10",children:"System"}):c.jsxs(c.Fragment,{children:[c.jsx(Tn,{onClick:()=>n(a),title:"Edit profile","aria-label":"Edit profile",children:c.jsx(kd,{size:16})}),c.jsx(Tn,{variant:"ghost",onClick:()=>i({open:!0,type:"profile",payload:a.id||a.name,label:`Delete profile "${a.display_name||a.name}"?`}),title:"Delete profile","aria-label":"Delete profile",children:c.jsx(ia,{size:16})})]})]})]}),c.jsxs("div",{className:"text-sm text-black/55 dark:text-white/60",children:[(a.permissions||[]).length," permission",(a.permissions||[]).length===1?"":"s"]}),a.description?c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65 truncate",children:a.description}):null]},a.id||a.name))}),s.length?null:c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:t.trim()?"No matching profiles.":"No profiles available."})]})]})]})}function lH({profileSearch:t,setProfileSearch:e,filteredProfileOptions:n,permissionList:s,permissionSetValues:r,permissionSetList:i,permissionSetsQuery:o,permissionsQuery:a}){const{profileForm:l,setProfileForm:u,editingProfile:d,setEditingProfile:h,profileModalOpen:f,setProfileModalOpen:p,profileIsSystem:w,setProfileIsSystem:x,profilePermissionSetsOpen:y,setProfilePermissionSetsOpen:g,profilePermissionsOpen:m,setProfilePermissionsOpen:b,savingProfile:k,openProfileModal:_,duplicateProfile:C,saveProfile:S,deleteProfile:j,selectedProfilePermissions:N,selectedProfilePermissionSet:T,selectedProfilePermissionSets:L,customProfilePermissions:D,toggleProfilePermission:O,selectAllProfilePermissions:$,clearProfilePermissions:I,toggleProfilePermissionSet:A,selectAllProfilePermissionSets:W,clearProfilePermissionSets:E}=cH({permissionList:s,permissionSetValues:r,permissionSetList:i}),[P,F]=v.useState({open:!1,type:"",payload:null,label:""});async function V(){if(!(!P.open||!P.payload))try{await j(P.payload)}finally{F({open:!1,type:"",payload:null,label:""})}}return c.jsxs(c.Fragment,{children:[c.jsx(aH,{profileSearch:t,setProfileSearch:e,openProfileModal:_,filteredProfileOptions:n,duplicateProfile:C,setConfirmDelete:F}),c.jsx(uH,{open:f,onClose:()=>{p(!1),h(null),u({name:"",display_name:"",description:"",permissionsText:"",permissionSets:[]}),x(!1),g(!1),b(!1)},editingProfile:d,profileForm:l,setProfileForm:u,profileIsSystem:w,profilePermissionSetsOpen:y,setProfilePermissionSetsOpen:g,profilePermissionsOpen:m,setProfilePermissionsOpen:b,permissionSetValues:r,permissionSetsQuery:o,permissionSetList:i,selectedProfilePermissionSets:L,toggleProfilePermissionSet:A,selectAllProfilePermissionSets:W,clearProfilePermissionSets:E,selectedProfilePermissions:N,permissionList:s,permissionsQuery:a,selectedProfilePermissionSet:T,toggleProfilePermission:O,selectAllProfilePermissions:$,clearProfilePermissions:I,customProfilePermissions:D,setConfirmDelete:F,saveProfile:S,savingProfile:k}),c.jsx(cc,{open:P.open,message:P.label,onClose:()=>F({open:!1,type:"",payload:null,label:""}),onConfirm:V})]})}function cH({permissionList:t,permissionSetValues:e,permissionSetList:n}){const s=Or(),[r,i]=v.useState({name:"",display_name:"",description:"",permissionsText:"",permissionSets:[]}),[o,a]=v.useState(null),[l,u]=v.useState(!1),[d,h]=v.useState(!1),[f,p]=v.useState(!1),[w,x]=v.useState(!1),[y,g]=v.useState(!1),m=v.useMemo(()=>yn(r.permissionsText),[r.permissionsText]),b=v.useMemo(()=>new Set(m),[m]),k=v.useMemo(()=>new Set(r.permissionSets||[]),[r.permissionSets]),_=v.useMemo(()=>{if(!t.length)return m;const E=new Set(t);return m.filter(P=>!E.has(P))},[t,m]),C=v.useMemo(()=>{const E=new Map;return(n||[]).forEach(P=>{const F=P.name||P.id;if(!F)return;const V=(P.permissions||P.permission_list||P.permissionList||[]).map(H=>typeof H=="string"?H:(H==null?void 0:H.name)||(H==null?void 0:H.value)||(H==null?void 0:H.permission)).filter(Boolean);E.set(F,new Set(V))}),E},[n]);function S(E,P){return(E||[]).filter(F=>{const V=C.get(F);if(!V)return!0;for(const H of V)if(!P.has(H))return!1;return!0})}function j(E){h(!!(E!=null&&E.is_system)),!(E!=null&&E.is_system)&&(p(!1),x(!1),E?(a(E.id||E.name),i({name:E.name,display_name:E.display_name||E.name,description:E.description||"",permissionsText:(E.permissions||[]).map(P=>typeof P=="string"?P:P==null?void 0:P.name).filter(Boolean).join(`
`),permissionSets:(E.permission_sets||E.permissionSets||E.permission_set_names||[]).map(P=>typeof P=="string"?P:(P==null?void 0:P.name)||(P==null?void 0:P.id)).filter(Boolean)})):(a(null),i({name:"",display_name:"",description:"",permissionsText:"",permissionSets:[]})),u(!0))}function N(E){if(!E)return;const P=E.name||E.display_name||"profile",F=E.display_name||E.name||P;h(!1),a(null),p(!1),x(!1),i({name:`${P}_new`,display_name:`${F}_new`,description:E.description||"",permissionsText:(E.permissions||[]).map(V=>typeof V=="string"?V:V==null?void 0:V.name).filter(Boolean).join(`
`),permissionSets:(E.permission_sets||E.permissionSets||E.permission_set_names||[]).map(V=>typeof V=="string"?V:(V==null?void 0:V.name)||(V==null?void 0:V.id)).filter(Boolean)}),u(!0)}async function T(){if(r.name.trim()){g(!0);try{const E={name:r.name.trim(),display_name:r.display_name||r.name,description:r.description,permissions:yn(r.permissionsText),permission_sets:r.permissionSets||[]};o?await R3(o,E):await P3(E),s.invalidateQueries({queryKey:["admin","profiles"]}),i({name:"",display_name:"",description:"",permissionsText:"",permissionSets:[]}),a(null),u(!1)}catch{}finally{g(!1)}}}async function L(E){try{await A3(E),s.invalidateQueries({queryKey:["admin","profiles"]}),o===E&&(a(null),i({name:"",display_name:"",description:"",permissionsText:"",permissionSets:[]})),u(!1)}catch{}}function D(E){i(P=>{const F=new Set(yn(P.permissionsText)),V=F.has(E);V?F.delete(E):F.add(E);let H=P.permissionSets||[];return V&&(H=S(H,F)),{...P,permissionsText:Array.from(F).join(`
`),permissionSets:H}})}function O(){const E=new Set([...m,...t]);i(P=>({...P,permissionsText:Array.from(E).join(`
`)}))}function $(){i(E=>({...E,permissionsText:""}))}function I(E){i(P=>{const F=new Set(P.permissionSets||[]),V=new Set(yn(P.permissionsText));if(F.has(E))return F.delete(E),{...P,permissionSets:Array.from(F),permissionsText:Array.from(V).join(`
`)};F.add(E);const he=C.get(E);return he&&he.forEach(ee=>V.add(ee)),{...P,permissionSets:Array.from(F),permissionsText:Array.from(V).join(`
`)}})}function A(){i(E=>{const P=new Set([...E.permissionSets||[],...e]),F=new Set(yn(E.permissionsText));return P.forEach(V=>{const H=C.get(V);H&&H.forEach(he=>F.add(he))}),{...E,permissionSets:Array.from(P),permissionsText:Array.from(F).join(`
`)}})}function W(){i(E=>({...E,permissionSets:[]}))}return{profileForm:r,setProfileForm:i,editingProfile:o,setEditingProfile:a,profileModalOpen:l,setProfileModalOpen:u,profileIsSystem:d,setProfileIsSystem:h,profilePermissionSetsOpen:f,setProfilePermissionSetsOpen:p,profilePermissionsOpen:w,setProfilePermissionsOpen:x,savingProfile:y,openProfileModal:j,duplicateProfile:N,saveProfile:T,deleteProfile:L,selectedProfilePermissions:m,selectedProfilePermissionSet:b,selectedProfilePermissionSets:k,customProfilePermissions:_,toggleProfilePermission:D,selectAllProfilePermissions:O,clearProfilePermissions:$,toggleProfilePermissionSet:I,selectAllProfilePermissionSets:A,clearProfilePermissionSets:W}}function uH({open:t,onClose:e,editingProfile:n,profileForm:s,setProfileForm:r,profileIsSystem:i,profilePermissionSetsOpen:o,setProfilePermissionSetsOpen:a,profilePermissionsOpen:l,setProfilePermissionsOpen:u,permissionSetValues:d,permissionSetsQuery:h,permissionSetList:f,selectedProfilePermissionSets:p,toggleProfilePermissionSet:w,selectAllProfilePermissionSets:x,clearProfilePermissionSets:y,selectedProfilePermissions:g,permissionList:m,permissionsQuery:b,selectedProfilePermissionSet:k,toggleProfilePermission:_,selectAllProfilePermissions:C,clearProfilePermissions:S,customProfilePermissions:j,setConfirmDelete:N,saveProfile:T,savingProfile:L}){return c.jsx(ks,{open:t,onClose:e,title:n?`Edit profile: ${n}`:"Add profile",maxWidth:"640px",children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsx(Se,{label:"Name",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:s.name,onChange:D=>r(O=>({...O,name:D.target.value})),placeholder:"system_admin",disabled:!!n})}),c.jsx(Se,{label:"Display Name",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:s.display_name,onChange:D=>r(O=>({...O,display_name:D.target.value})),placeholder:"System Admin"})})]}),c.jsx(Se,{label:"Description",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:s.description,onChange:D=>r(O=>({...O,description:D.target.value})),placeholder:"What this profile can do"})}),c.jsx(Se,{label:"Permission Sets",children:c.jsxs(zt,{className:"p-4",children:[c.jsxs("button",{type:"button",className:"flex w-full items-center justify-between gap-3 text-left",onClick:()=>a(D=>!D),"aria-expanded":o,children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Permission sets"}),c.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:bl(s.permissionSets.length,"permission set","permission sets")})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-black/50 dark:text-white/55",children:[c.jsx("span",{children:o?"Hide":"Edit"}),c.jsx(es,{size:16,className:Te("transition-transform",o&&"rotate-180")})]})]}),o?c.jsxs("div",{className:"mt-0 space-y-0",children:[c.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx(te,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:x,disabled:!d.length,children:"Select all"}),c.jsx(te,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:y,disabled:!s.permissionSets.length,children:"Clear"})]})}),h.isLoading?c.jsx(Ye,{text:"Loading permission sets",className:"text-sm text-black/60 dark:text-white/65"}):f.length?c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-[168px] overflow-y-auto p-1",children:f.map(D=>{const O=D.name||D.id;if(!O)return null;const $=p.has(O);return c.jsxs("button",{type:"button",onClick:()=>w(O),className:Te("flex items-center justify-between gap-3 rounded-xl px-3 py-1.5 text-xs ring-1 transition-colors",$?"bg-black/5 dark:bg-white/10 ring-black/20 dark:ring-white/20 text-black dark:text-white":"bg-white/60 dark:bg-white/5 ring-black/5 dark:ring-white/10 text-black/70 dark:text-white/70 hover:bg-black/5 dark:hover:bg-white/10"),children:[c.jsx("span",{className:"min-w-0 truncate text-xs font-medium",children:D.display_name||D.name||O}),c.jsx("span",{className:Te("h-4 w-4 rounded-full flex items-center justify-center transition-colors",$?"bg-black text-white dark:bg-white dark:text-black shadow-soft":"bg-black/5 dark:bg-white/10 text-black/40 dark:text-white/40"),children:c.jsx(ra,{size:14,className:$?"opacity-100":"opacity-0"})})]},O)})}):c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No permission sets available."})]}):null]})}),c.jsx(Se,{label:"Permissions",children:c.jsxs(zt,{className:"p-4",children:[c.jsxs("button",{type:"button",className:"flex w-full items-center justify-between gap-3 text-left",onClick:()=>u(D=>!D),"aria-expanded":l,children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Permissions"}),c.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:bl(g.length,"permission")})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-black/50 dark:text-white/55",children:[c.jsx("span",{children:l?"Hide":"Edit"}),c.jsx(es,{size:16,className:Te("transition-transform",l&&"rotate-180")})]})]}),l?c.jsxs("div",{className:"mt-0 space-y-0",children:[c.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx(te,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:C,disabled:!m.length,children:"Select all"}),c.jsx(te,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:S,disabled:!g.length,children:"Clear"})]})}),b.isLoading?c.jsx(Ye,{text:"Loading permissions",className:"text-sm text-black/60 dark:text-white/65"}):m.length?c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-[110px] overflow-y-auto p-1",children:m.map(D=>{const O=k.has(D);return c.jsxs("button",{type:"button",onClick:()=>_(D),className:Te("flex items-center justify-between gap-3 rounded-xl px-3 py-1.5 text-xs ring-1 transition-colors",O?"bg-black/5 dark:bg-white/10 ring-black/20 dark:ring-white/20 text-black dark:text-white":"bg-white/60 dark:bg-white/5 ring-black/5 dark:ring-white/10 text-black/70 dark:text-white/70 hover:bg-black/5 dark:hover:bg-white/10"),children:[c.jsx("span",{className:"min-w-0 truncate",children:D}),c.jsx("span",{className:Te("h-4 w-4 rounded-full flex items-center justify-center transition-colors",O?"bg-black text-white dark:bg-white dark:text-black shadow-soft":"bg-black/5 dark:bg-white/10 text-black/40 dark:text-white/40"),children:c.jsx(ra,{size:14,className:O?"opacity-100":"opacity-0"})})]},D)})}):c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No permissions available."}),j.length?c.jsxs("div",{className:"rounded-2xl bg-white/50 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 p-3",children:[c.jsx("div",{className:"text-xs font-semibold text-black/60 dark:text-white/65",children:"Custom permissions"}),c.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:j.map(D=>c.jsxs("button",{type:"button",onClick:()=>_(D),className:"flex items-center gap-2 rounded-full bg-black/5 dark:bg-white/10 px-3 py-1 text-xs text-black/70 dark:text-white/70 hover:bg-black/8 dark:hover:bg-white/15",title:"Remove permission",children:[c.jsx("span",{className:"max-w-[220px] truncate",children:D}),c.jsx("span",{className:"text-black/40 dark:text-white/40",children:"x"})]},D))})]}):null]}):null]})}),c.jsxs("div",{className:"flex items-center justify-between gap-2 pt-1",children:[n?c.jsx(te,{variant:"ghost",className:"rounded-2xl text-red-600 hover:text-red-700 dark:text-red-300",onClick:()=>N({open:!0,type:"profile",payload:n,label:`Delete profile "${s.display_name||s.name}"?`}),disabled:i,children:"Delete"}):c.jsx("span",{}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(te,{variant:"ghost",className:"rounded-2xl",onClick:e,children:"Cancel"}),c.jsx(te,{className:"rounded-2xl",onClick:T,disabled:L||i,children:L?c.jsx(Ye,{text:"Saving"}):"Save"})]})]})]})})}function dH({permissionSetSearch:t,setPermissionSetSearch:e,openPermissionSetModal:n,permissionSetsQuery:s,filteredPermissionSetList:r,duplicatePermissionSet:i,setConfirmDelete:o}){const a=c.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[c.jsx(Qt,{children:"Permission Sets"}),c.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-end",children:[c.jsx(vo,{value:t,onChange:l=>e(l.target.value),className:"w-full sm:w-[220px]"}),c.jsx(te,{variant:"secondary",className:"rounded-2xl self-start sm:self-auto",onClick:()=>n(null),children:"Add permission set"})]})]});return c.jsxs(_t,{className:"h-full min-h-0 flex flex-col",children:[c.jsx(Kt,{className:"hidden md:block space-y-2",children:a}),c.jsxs(Gt,{className:"flex-1 min-h-0 overflow-y-auto p-0",children:[c.jsx("div",{className:"space-y-2 p-5 pb-3 md:hidden",children:a}),c.jsx("div",{className:"space-y-4 p-5 pt-1",children:s.isLoading?c.jsx(Ye,{text:"Loading",className:"text-sm text-black/60 dark:text-white/65"}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.map(l=>c.jsxs(zt,{className:"p-4 space-y-1",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-base font-semibold",children:l.display_name||l.name}),c.jsx("div",{className:"text-sm text-black/55 dark:text-white/60",children:l.name})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Tn,{onClick:()=>i(l),title:"Duplicate permission set","aria-label":"Duplicate permission set",children:c.jsx(HC,{size:16})}),c.jsx(Tn,{onClick:()=>n(l),title:"Edit permission set","aria-label":"Edit permission set",children:c.jsx(kd,{size:16})}),c.jsx(Tn,{variant:"ghost",onClick:()=>o({open:!0,type:"permission-set",payload:l.name,label:`Delete permission set "${l.display_name||l.name}"?`}),title:"Delete permission set","aria-label":"Delete permission set",children:c.jsx(ia,{size:16})})]})]}),c.jsxs("div",{className:"text-sm text-black/55 dark:text-white/60",children:[(l.permissions||[]).length," permission",(l.permissions||[]).length===1?"":"s"]}),l.description?c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65 truncate",children:l.description}):null]},l.name)),r.length?null:c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:t.trim()?"No matching permission sets.":"No permission sets available."})]})})]})]})}function hH({permissionSetSearch:t,setPermissionSetSearch:e,permissionSetsQuery:n,filteredPermissionSetList:s,permissionList:r,permissionsQuery:i}){const{permissionSetForm:o,setPermissionSetForm:a,editingPermissionSet:l,setEditingPermissionSet:u,permissionSetModalOpen:d,setPermissionSetModalOpen:h,savingPermissionSet:f,permissionSetPermissionsOpen:p,setPermissionSetPermissionsOpen:w,openPermissionSetModal:x,duplicatePermissionSet:y,savePermissionSet:g,deletePermissionSet:m,selectedPermissionSetPermissions:b,selectedPermissionSetPermissionSet:k,customPermissionSetPermissions:_,togglePermissionSetPermission:C,selectAllPermissionSetPermissions:S,clearPermissionSetPermissions:j}=fH({permissionList:r}),[N,T]=v.useState({open:!1,type:"",payload:null,label:""});async function L(){if(!(!N.open||!N.payload))try{await m(N.payload)}finally{T({open:!1,type:"",payload:null,label:""})}}return c.jsxs(c.Fragment,{children:[c.jsx(dH,{permissionSetSearch:t,setPermissionSetSearch:e,openPermissionSetModal:x,permissionSetsQuery:n,filteredPermissionSetList:s,duplicatePermissionSet:y,setConfirmDelete:T}),c.jsx(pH,{open:d,onClose:()=>{h(!1),u(null),a({name:"",display_name:"",description:"",permissionsText:""}),w(!1)},editingPermissionSet:l,permissionSetForm:o,setPermissionSetForm:a,permissionSetPermissionsOpen:p,setPermissionSetPermissionsOpen:w,selectedPermissionSetPermissions:b,permissionList:r,permissionsQuery:i,selectedPermissionSetPermissionSet:k,togglePermissionSetPermission:C,selectAllPermissionSetPermissions:S,clearPermissionSetPermissions:j,customPermissionSetPermissions:_,setConfirmDelete:T,savePermissionSet:g,savingPermissionSet:f}),c.jsx(cc,{open:N.open,message:N.label,onClose:()=>T({open:!1,type:"",payload:null,label:""}),onConfirm:L})]})}function fH({permissionList:t}){const e=Or(),[n,s]=v.useState({name:"",display_name:"",description:"",permissionsText:""}),[r,i]=v.useState(null),[o,a]=v.useState(!1),[l,u]=v.useState(!1),[d,h]=v.useState(!1),f=v.useMemo(()=>yn(n.permissionsText),[n.permissionsText]),p=v.useMemo(()=>new Set(f),[f]),w=v.useMemo(()=>{if(!t.length)return f;const C=new Set(t);return f.filter(S=>!C.has(S))},[t,f]);function x(C){h(!1),C?(i(C.name),s({name:C.name||"",display_name:C.display_name||C.name||"",description:C.description||"",permissionsText:(C.permissions||[]).map(S=>typeof S=="string"?S:S==null?void 0:S.name).filter(Boolean).join(`
`)})):(i(null),s({name:"",display_name:"",description:"",permissionsText:""})),a(!0)}function y(C){if(!C)return;const S=C.name||C.display_name||"permission_set",j=C.display_name||C.name||S;i(null),h(!1),s({name:`${S}_new`,display_name:`${j}_new`,description:C.description||"",permissionsText:(C.permissions||[]).map(N=>typeof N=="string"?N:N==null?void 0:N.name).filter(Boolean).join(`
`)}),a(!0)}async function g(){if(!n.name.trim())return;u(!0);const C={name:n.name.trim(),display_name:n.display_name||n.name.trim(),description:n.description,permissions:yn(n.permissionsText)};try{r?await z3(r,C):await F3(C),e.invalidateQueries({queryKey:["admin","permission-sets"]}),a(!1),i(null)}catch{}finally{u(!1)}}async function m(C){if(C)try{await B3(C),e.invalidateQueries({queryKey:["admin","permission-sets"]}),a(!1),i(null)}catch{}}function b(C){s(S=>{const j=new Set(yn(S.permissionsText));return j.has(C)?j.delete(C):j.add(C),{...S,permissionsText:Array.from(j).join(`
`)}})}function k(){const C=new Set([...f,...t]);s(S=>({...S,permissionsText:Array.from(C).join(`
`)}))}function _(){s(C=>({...C,permissionsText:""}))}return{permissionSetForm:n,setPermissionSetForm:s,editingPermissionSet:r,setEditingPermissionSet:i,permissionSetModalOpen:o,setPermissionSetModalOpen:a,savingPermissionSet:l,permissionSetPermissionsOpen:d,setPermissionSetPermissionsOpen:h,openPermissionSetModal:x,duplicatePermissionSet:y,savePermissionSet:g,deletePermissionSet:m,selectedPermissionSetPermissions:f,selectedPermissionSetPermissionSet:p,customPermissionSetPermissions:w,togglePermissionSetPermission:b,selectAllPermissionSetPermissions:k,clearPermissionSetPermissions:_}}function pH({open:t,onClose:e,editingPermissionSet:n,permissionSetForm:s,setPermissionSetForm:r,permissionSetPermissionsOpen:i,setPermissionSetPermissionsOpen:o,selectedPermissionSetPermissions:a,permissionList:l,permissionsQuery:u,selectedPermissionSetPermissionSet:d,togglePermissionSetPermission:h,selectAllPermissionSetPermissions:f,clearPermissionSetPermissions:p,customPermissionSetPermissions:w,setConfirmDelete:x,savePermissionSet:y,savingPermissionSet:g}){return c.jsx(ks,{open:t,onClose:e,title:n?`Edit permission set: ${n}`:"Add permission set",maxWidth:"640px",children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsx(Se,{label:"Name",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:s.name,onChange:m=>r(b=>({...b,name:m.target.value})),placeholder:"sales_ops",disabled:!!n})}),c.jsx(Se,{label:"Display Name",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:s.display_name,onChange:m=>r(b=>({...b,display_name:m.target.value})),placeholder:"Sales Ops"})})]}),c.jsx(Se,{label:"Description",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:s.description,onChange:m=>r(b=>({...b,description:m.target.value})),placeholder:"What this permission set grants"})}),c.jsx(Se,{label:"Permissions",children:c.jsxs(zt,{className:"p-4",children:[c.jsxs("button",{type:"button",className:"flex w-full items-center justify-between gap-3 text-left",onClick:()=>o(m=>!m),"aria-expanded":i,children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Permissions"}),c.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:bl(a.length,"permission")})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-black/50 dark:text-white/55",children:[c.jsx("span",{children:i?"Hide":"Edit"}),c.jsx(es,{size:16,className:Te("transition-transform",i&&"rotate-180")})]})]}),i?c.jsxs("div",{className:"mt-0 space-y-0",children:[c.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx(te,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:f,disabled:!l.length,children:"Select all"}),c.jsx(te,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:p,disabled:!a.length,children:"Clear"})]})}),u.isLoading?c.jsx(Ye,{text:"Loading permissions",className:"text-sm text-black/60 dark:text-white/65"}):l.length?c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-[168px] overflow-y-auto p-1",children:l.map(m=>{const b=d.has(m);return c.jsxs("button",{type:"button",onClick:()=>h(m),className:Te("flex items-center justify-between gap-3 rounded-xl px-3 py-1.5 text-xs ring-1 transition-colors",b?"bg-black/5 dark:bg-white/10 ring-black/20 dark:ring-white/20 text-black dark:text-white":"bg-white/60 dark:bg-white/5 ring-black/5 dark:ring-white/10 text-black/70 dark:text-white/70 hover:bg-black/5 dark:hover:bg-white/10"),children:[c.jsx("span",{className:"min-w-0 truncate",children:m}),c.jsx("span",{className:Te("h-4 w-4 rounded-full flex items-center justify-center transition-colors",b?"bg-black text-white dark:bg-white dark:text-black shadow-soft":"bg-black/5 dark:bg-white/10 text-black/40 dark:text-white/40"),children:c.jsx(ra,{size:14,className:b?"opacity-100":"opacity-0"})})]},m)})}):c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No permissions available."}),w.length?c.jsxs("div",{className:"rounded-2xl bg-white/50 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 p-3",children:[c.jsx("div",{className:"text-xs font-semibold text-black/60 dark:text-white/65",children:"Custom permissions"}),c.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:w.map(m=>c.jsxs("button",{type:"button",onClick:()=>h(m),className:"flex items-center gap-2 rounded-full bg-black/5 dark:bg-white/10 px-3 py-1 text-xs text-black/70 dark:text-white/70 hover:bg-black/8 dark:hover:bg-white/15",title:"Remove permission",children:[c.jsx("span",{className:"max-w-[220px] truncate",children:m}),c.jsx("span",{className:"text-black/40 dark:text-white/40",children:"x"})]},m))})]}):null]}):null]})}),c.jsxs("div",{className:"flex items-center justify-between gap-2 pt-1",children:[n?c.jsx(te,{variant:"ghost",className:"rounded-2xl text-red-600 hover:text-red-700 dark:text-red-300",onClick:()=>x({open:!0,type:"permission-set",payload:n,label:`Delete permission set "${s.display_name||s.name}"?`}),children:"Delete"}):c.jsx("span",{}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(te,{variant:"ghost",className:"rounded-2xl",onClick:e,children:"Cancel"}),c.jsx(te,{className:"rounded-2xl",onClick:y,disabled:g,children:g?c.jsx(Ye,{text:"Saving"}):"Save"})]})]})]})})}function mH({permissionSearch:t,setPermissionSearch:e,openPermissionModal:n,permissionModuleFilter:s,setPermissionModuleFilter:r,permissionServiceFilter:i,setPermissionServiceFilter:o,permissionActionFilter:a,setPermissionActionFilter:l,permissionModuleOptions:u,permissionFilterServiceOptions:d,permissionFilterActionOptions:h,permissionsQuery:f,filteredPermissionList:p,parsePermissionParts:w,mergedPermissionDescriptions:x,setConfirmDelete:y}){const g=[{value:"",label:"All modules"},...u.map(_=>({value:_,label:_}))],m=[{value:"",label:"All services"},...d.map(_=>({value:_,label:_}))],b=[{value:"",label:"All permissions"},...h.map(_=>({value:_,label:_}))],k=c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[c.jsx(Qt,{children:"Permissions"}),c.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-end",children:[c.jsx(vo,{value:t,onChange:_=>e(_.target.value),className:"w-full sm:w-[220px]"}),c.jsx(te,{className:"rounded-2xl self-start sm:self-auto",variant:"secondary",onClick:()=>n("add",""),children:"Add permission"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:[c.jsx(at,{value:s,options:g,onChange:r}),c.jsx(at,{value:i,options:m,onChange:o}),c.jsx(at,{value:a,options:b,onChange:l,className:"col-span-2 sm:col-span-1"})]})]});return c.jsxs(_t,{className:"h-full min-h-0 flex flex-col",children:[c.jsx(Kt,{className:"hidden md:block space-y-2",children:k}),c.jsxs(Gt,{className:"flex-1 min-h-0 overflow-y-auto p-0",children:[c.jsx("div",{className:"space-y-2 p-5 pb-3 md:hidden",children:k}),c.jsx("div",{className:"space-y-3 p-5 pt-1",children:f.isLoading?c.jsx(Ye,{text:"Loading",className:"text-sm text-black/60 dark:text-white/65"}):p.length?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-3",children:p.map(_=>{const C=w(_),S=x[_];return c.jsxs(zt,{className:"p-3",children:[c.jsxs("div",{className:"flex items-start justify-between gap-2",children:[c.jsxs("div",{className:"grid grid-cols-1 gap-1 text-sm",children:[c.jsxs("div",{className:"flex flex-wrap items-baseline gap-1",children:[c.jsx("span",{className:"text-xs uppercase tracking-wide text-black/50 dark:text-white/60",children:"Module"}),c.jsx("span",{className:"font-semibold text-black/85 dark:text-white/85",children:C.module})]}),c.jsxs("div",{className:"flex flex-wrap items-baseline gap-1",children:[c.jsx("span",{className:"text-xs uppercase tracking-wide text-black/50 dark:text-white/60",children:"Service"}),c.jsx("span",{className:"font-semibold text-black/85 dark:text-white/85",children:C.service})]}),c.jsxs("div",{className:"flex flex-wrap items-baseline gap-1",children:[c.jsx("span",{className:"text-xs uppercase tracking-wide text-black/50 dark:text-white/60",children:"Permission"}),c.jsx("span",{className:"font-semibold text-black/85 dark:text-white/85",children:C.action})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Tn,{onClick:()=>n("edit",_),title:"Edit permission","aria-label":"Edit permission",children:c.jsx(kd,{size:16})}),c.jsx(Tn,{variant:"ghost",onClick:()=>y({open:!0,type:"permission",payload:_,label:`Delete permission "${_}"?`}),title:"Delete permission","aria-label":"Delete permission",children:c.jsx(ia,{size:16})})]})]}),S?c.jsxs("div",{className:"mt-2 flex items-baseline gap-1 text-sm min-w-0",children:[c.jsx("span",{className:"text-xs uppercase tracking-wide text-black/50 dark:text-white/60",children:"Description"}),c.jsx("span",{className:"text-black/60 dark:text-white/65 truncate",children:S})]}):null]},_)})}):c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:t.trim()?"No matching permissions.":"No permissions available."})})]})]})}function gH({permissionSearch:t,setPermissionSearch:e,openPermissionModal:n,permissionModuleFilter:s,setPermissionModuleFilter:r,permissionServiceFilter:i,setPermissionServiceFilter:o,permissionActionFilter:a,setPermissionActionFilter:l,permissionModuleOptions:u,permissionFilterServiceOptions:d,permissionFilterActionOptions:h,permissionsQuery:f,filteredPermissionList:p,parsePermissionParts:w,mergedPermissionDescriptions:x,permissionTree:y,updateLocalPermissionDescription:g}){const{permissionModal:m,setPermissionModal:b,permissionModalError:k,savingPermission:_,openPermissionModal:C,updatePermissionModalField:S,savePermissionModal:j,deletePermissionFromModal:N,setPermissionModalError:T}=xH({mergedPermissionDescriptions:x,updateLocalPermissionDescription:g}),[L,D]=v.useState({open:!1,type:"",payload:null,label:""}),O=m.module?y.servicesByModule[m.module]||[]:y.allServices,$=m.module&&m.service?y.actionsByService[`${m.module}:${m.service}`]||[]:y.allActions;async function I(){if(!(!L.open||!L.payload))try{await N(L.payload)}finally{D({open:!1,type:"",payload:null,label:""})}}return c.jsxs(c.Fragment,{children:[c.jsx(mH,{permissionSearch:t,setPermissionSearch:e,openPermissionModal:n||C,permissionModuleFilter:s,setPermissionModuleFilter:r,permissionServiceFilter:i,setPermissionServiceFilter:o,permissionActionFilter:a,setPermissionActionFilter:l,permissionModuleOptions:u,permissionFilterServiceOptions:d,permissionFilterActionOptions:h,permissionsQuery:f,filteredPermissionList:p,parsePermissionParts:w,mergedPermissionDescriptions:x,setConfirmDelete:D}),c.jsx(yH,{open:m.open,onClose:()=>{b({open:!1,mode:"add",value:"",original:"",module:"",service:"",action:"",description:"",originalDescription:""}),T("")},permissionModal:m,permissionModuleOptions:u,permissionServiceOptions:O,permissionActionOptions:$,updatePermissionModalField:S,permissionModalError:k,savePermissionModal:j,savingPermission:_}),c.jsx(cc,{open:L.open,message:L.label,onClose:()=>D({open:!1,type:"",payload:null,label:""}),onConfirm:I})]})}const Mh={open:!1,mode:"add",value:"",original:"",module:"",service:"",action:"",description:"",originalDescription:""};function xH({mergedPermissionDescriptions:t,updateLocalPermissionDescription:e}){const n=Or(),[s,r]=v.useState(Mh),[i,o]=v.useState(""),[a,l]=v.useState(!1);function u(p="add",w=""){const x=ny(w),y=w&&t[w]||"";o(""),r({open:!0,mode:p,value:w,original:w,module:x.module,service:x.service,action:x.action,description:y,originalDescription:y})}function d(p,w){r(x=>{const y={...x,[p]:w};return{...y,value:Bw(y)}}),o("")}async function h(){var w;const p=Bw(s);if(!p){o("Select module, service, and permission.");return}l(!0);try{const x=((w=s.description)==null?void 0:w.trim())||"";if(s.mode==="add")await mg(p,x),e(p,x);else if(p!==s.original)await mg(p,x),await Hk(s.original),e(s.original,""),e(p,x);else if(x!==s.originalDescription)await mg(p,x),e(p,x);else{r({...Mh});return}n.invalidateQueries({queryKey:["admin","permissions"]}),r({...Mh})}catch{}finally{l(!1)}}async function f(p){const w=p||s.original||s.value;if(w){l(!0);try{await Hk(w),e(w,""),n.invalidateQueries({queryKey:["admin","permissions"]}),r({...Mh})}catch{}finally{l(!1)}}}return{permissionModal:s,setPermissionModal:r,permissionModalError:i,savingPermission:a,openPermissionModal:u,updatePermissionModalField:d,savePermissionModal:h,deletePermissionFromModal:f,setPermissionModalError:o}}function yH({open:t,onClose:e,permissionModal:n,permissionModuleOptions:s,permissionServiceOptions:r,permissionActionOptions:i,updatePermissionModalField:o,permissionModalError:a,savePermissionModal:l,savingPermission:u}){return c.jsx(ks,{open:t,onClose:e,title:n.mode==="edit"?"Edit permission":"Add permission",maxWidth:"520px",children:c.jsxs("div",{className:"space-y-3",children:[c.jsx(Se,{label:"Permission",children:c.jsxs("div",{className:"grid grid-cols-[1fr_auto_1fr_auto_1fr] items-center gap-2",children:[c.jsxs("div",{children:[c.jsx("input",{list:"permission-module-options",className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:n.module,onChange:d=>o("module",d.target.value),placeholder:"module"}),c.jsx("datalist",{id:"permission-module-options",children:s.map((d,h)=>c.jsx("option",{value:d},`${d}-${h}`))})]}),c.jsx("span",{className:"text-sm text-black/40 dark:text-white/40",children:":"}),c.jsxs("div",{children:[c.jsx("input",{list:"permission-service-options",className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:n.service,onChange:d=>o("service",d.target.value),placeholder:"service"}),c.jsx("datalist",{id:"permission-service-options",children:r.map((d,h)=>c.jsx("option",{value:d},`${d}-${h}`))})]}),c.jsx("span",{className:"text-sm text-black/40 dark:text-white/40",children:":"}),c.jsxs("div",{children:[c.jsx("input",{list:"permission-action-options",className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:n.action,onChange:d=>o("action",d.target.value),placeholder:"permission"}),c.jsx("datalist",{id:"permission-action-options",children:i.map((d,h)=>c.jsx("option",{value:d},`${d}-${h}`))})]})]})}),c.jsx(Se,{label:"Description",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:n.description,onChange:d=>o("description",d.target.value),placeholder:"Short description"})}),a?c.jsx("div",{className:"text-xs text-red-600 dark:text-red-300",children:a}):null,c.jsx("div",{className:"flex justify-end",children:c.jsx(te,{className:"rounded-2xl",onClick:l,disabled:u,children:u?c.jsx(Ye,{text:"Saving"}):n.mode==="edit"?"Update Permission":"Add Permission"})})]})})}const Cg=20;function vH(){const{user:t}=oi(),[e,n]=v.useState("users"),[s,r]=v.useState(""),[i,o]=v.useState(0),[a,l]=v.useState(""),[u,d]=v.useState(""),[h,f]=v.useState(""),[p,w]=v.useState(""),[x,y]=v.useState(""),[g,m]=v.useState(""),[b,k]=v.useState(""),[_,C]=v.useState(""),[S,j]=v.useState("");if(!Sd(t))return c.jsxs(_t,{children:[c.jsx(Kt,{children:c.jsx(Qt,{children:"Restricted"})}),c.jsx(Gt,{className:"text-sm text-black/60 dark:text-white/65",children:"You don't have access to the admin panel."})]});const N=an({queryKey:["admin","users",i],queryFn:()=>k3({limit:Cg,offset:i*Cg})}),T=an({queryKey:["admin","profiles"],queryFn:T3}),L=an({queryKey:["admin","permissions"],queryFn:O3}),D=an({queryKey:["admin","companies"],queryFn:M3}),O=an({queryKey:["admin","permission-sets"],queryFn:$3}),$=v.useMemo(()=>{var le;const K=((le=N.data)==null?void 0:le.users)||N.data||[],G=s.trim().toLowerCase();return K.filter(Y=>{var Ce,Le,we,oe,Ne;const B=Array.isArray(Y.profiles)?Y.profiles.map(tt=>(tt==null?void 0:tt.display_name)||(tt==null?void 0:tt.name)||tt).filter(Boolean).join(" "):((Ce=Y.profiles)==null?void 0:Ce.display_name)||((Le=Y.profiles)==null?void 0:Le.name)||Y.profile||Y.profile_name||"",xe=`${Y.email||""} ${Y.name||""} ${B}`.toLowerCase();if(G&&!xe.includes(G))return!1;const je=((we=Y.company)==null?void 0:we.code)||Y.company_code||Y.company_id||"";return!(x&&je!==x||g&&!(Array.isArray(Y.profiles)?Y.profiles.map(ht=>(ht==null?void 0:ht.name)||(ht==null?void 0:ht.display_name)||ht).filter(Boolean):[((oe=Y.profiles)==null?void 0:oe.name)||((Ne=Y.profiles)==null?void 0:Ne.display_name)||Y.profile||Y.profile_name].filter(Boolean)).includes(g))})},[N.data,s,x,g]);v.useMemo(()=>{var G;return(((G=N.data)==null?void 0:G.users)||N.data||[]).length===Cg},[N.data]),v.useEffect(()=>{C(""),j("")},[b]),v.useEffect(()=>{j("")},[_]);const I=v.useMemo(()=>{var G;const K=((G=T.data)==null?void 0:G.profiles)??T.data;return Array.isArray(K)?K:[]},[T.data]),A=v.useMemo(()=>{var oe;const K=((oe=L.data)==null?void 0:oe.permissions)??L.data,G=new Map,le={},Y=(Ne,tt,ht)=>{if(!Ne||!tt||!ht)return;G.has(Ne)||G.set(Ne,new Map);const Dt=G.get(Ne);Dt.has(tt)||Dt.set(tt,new Set),Dt.get(tt).add(ht)};Array.isArray(K)?K.forEach(Ne=>{const tt=typeof Ne=="string"?Ne:Ne==null?void 0:Ne.name,ht=typeof Ne=="string"?"":(Ne==null?void 0:Ne.description)||"";if(tt&&ht&&(le[tt]=ht),!tt)return;const Dt=tt.split(":");Dt.length>=3&&Y(Dt[0],Dt[1],Dt[2])}):K&&typeof K=="object"&&Object.entries(K).forEach(([Ne,tt])=>{!tt||typeof tt!="object"||Object.entries(tt).forEach(([ht,Dt])=>{Array.isArray(Dt)&&Dt.forEach(ur=>Y(Ne,ht,ur))})});const B=Array.from(G.keys()).sort(),xe={},je={},Ce=[],Le=new Set,we=new Set;return B.forEach(Ne=>{const tt=Array.from(G.get(Ne).keys()).sort();xe[Ne]=tt,tt.forEach(ht=>{Le.add(ht);const Dt=Array.from(G.get(Ne).get(ht)).sort();je[`${Ne}:${ht}`]=Dt,Dt.forEach(ur=>{we.add(ur),Ce.push(`${Ne}:${ht}:${ur}`)})})}),{modules:B,servicesByModule:xe,actionsByService:je,flat:Ce,allServices:Array.from(Le).sort(),allActions:Array.from(we).sort(),descriptions:le}},[L.data]),W=v.useMemo(()=>A.flat,[A]),E=A.descriptions||{},[P,F]=v.useState({}),V=v.useMemo(()=>({...E||{},...P}),[E,P]),H=v.useCallback((K,G)=>{if(!K)return;const le=(G==null?void 0:G.trim())||"";F(Y=>{const B={...Y};return le?B[K]=le:delete B[K],B})},[]),he=A.modules,ee=b?A.servicesByModule[b]||[]:A.allServices,U=b&&_?A.actionsByService[`${b}:${_}`]||[]:A.allActions,Q=v.useMemo(()=>{var G;const K=((G=D.data)==null?void 0:G.companies)??D.data;return Array.isArray(K)?K:[]},[D.data]),de=v.useMemo(()=>{var G,le;const K=((G=O.data)==null?void 0:G.permission_sets)??((le=O.data)==null?void 0:le.permissionSets)??O.data;return Array.isArray(K)?K.map(Y=>typeof Y=="string"?{name:Y}:Y):[]},[O.data]),Z=v.useMemo(()=>{const K=u.trim().toLowerCase();return K?Q.filter(G=>`${G.name||""} ${G.code||""} ${G.country||""} ${G.currency||""} ${G.timezone||""}`.toLowerCase().includes(K)):Q},[Q,u]),be=v.useMemo(()=>{const K=a.trim().toLowerCase();return K?I.filter(G=>`${G.display_name||""} ${G.name||""} ${G.description||""}`.toLowerCase().includes(K)):I},[I,a]),Ae=v.useMemo(()=>{const K=h.trim().toLowerCase();return K?de.filter(G=>`${G.display_name||""} ${G.name||""} ${G.description||""}`.toLowerCase().includes(K)):de},[de,h]),me=v.useMemo(()=>{const K=p.trim().toLowerCase();let G=W;return(b||_||S)&&(G=G.filter(le=>{const Y=ny(le);return!(b&&Y.module!==b||_&&Y.service!==_||S&&Y.action!==S)})),K?G.filter(le=>{const Y=V[le]||"";return`${le} ${Y}`.toLowerCase().includes(K)}):G},[W,p,V,b,_,S]),fe=v.useMemo(()=>Q.map(K=>({value:K.code||K.id||"",label:K.name||K.code||K.id||""})).filter(K=>K.value),[Q]),De=v.useMemo(()=>I.map(K=>({value:K.name||K.display_name||"",label:K.display_name||K.name||""})).filter(K=>K.value),[I]),J=v.useMemo(()=>de.map(K=>K.name||K.id).filter(Boolean),[de]),pe=v.useMemo(()=>I.map(K=>K.name||K.id).filter(Boolean),[I]),ie=v.useMemo(()=>{const K=new Map;return Q.forEach(G=>{const le=G.code||G.id;le&&K.set(le,G.name||G.code||le)}),K},[Q]);return c.jsxs("div",{className:"flex h-full min-h-0 flex-col gap-4",children:[c.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto",children:[c.jsx(te,{variant:e==="users"?"default":"ghost",onClick:()=>n("users"),className:"rounded-2xl shrink-0",children:"Users"}),c.jsx(te,{variant:e==="companies"?"default":"ghost",onClick:()=>n("companies"),className:"rounded-2xl shrink-0",children:"Companies"}),c.jsx(te,{variant:e==="profiles"?"default":"ghost",onClick:()=>n("profiles"),className:"rounded-2xl shrink-0",children:"Profiles"}),c.jsx(te,{variant:e==="permission-sets"?"default":"ghost",onClick:()=>n("permission-sets"),className:"rounded-2xl shrink-0",children:"Permission Sets"}),c.jsx(te,{variant:e==="permissions"?"default":"ghost",onClick:()=>n("permissions"),className:"rounded-2xl shrink-0",children:"Permissions"})]}),c.jsxs("div",{className:"flex-1 min-h-0",children:[c.jsx("div",{className:e==="users"?"h-full":"hidden","aria-hidden":e!=="users",children:c.jsx(eH,{q:s,setQ:r,usersQuery:N,users:$,user:t,companyLookup:ie,userCompanyFilter:x,setUserCompanyFilter:y,userProfileFilter:g,setUserProfileFilter:m,companyFilterOptions:fe,profileFilterOptions:De,companyList:Q,profileOptions:I,profileValues:pe,permissionSetList:de,permissionSetValues:J,permissionList:W,permissionsQuery:L,page:i})}),c.jsx("div",{className:e==="companies"?"h-full":"hidden","aria-hidden":e!=="companies",children:c.jsx(rH,{companySearch:u,setCompanySearch:d,companiesQuery:D,filteredCompanyList:Z,companyLookup:ie,companyList:Q})}),c.jsx("div",{className:e==="profiles"?"h-full":"hidden","aria-hidden":e!=="profiles",children:c.jsx(lH,{profileSearch:a,setProfileSearch:l,filteredProfileOptions:be,permissionList:W,permissionSetValues:J,permissionSetList:de,permissionSetsQuery:O,permissionsQuery:L})}),c.jsx("div",{className:e==="permission-sets"?"h-full":"hidden","aria-hidden":e!=="permission-sets",children:c.jsx(hH,{permissionSetSearch:h,setPermissionSetSearch:f,permissionSetsQuery:O,filteredPermissionSetList:Ae,permissionList:W,permissionsQuery:L})}),c.jsx("div",{className:e==="permissions"?"h-full":"hidden","aria-hidden":e!=="permissions",children:c.jsx(gH,{permissionSearch:p,setPermissionSearch:w,permissionModuleFilter:b,setPermissionModuleFilter:k,permissionServiceFilter:_,setPermissionServiceFilter:C,permissionActionFilter:S,setPermissionActionFilter:j,permissionModuleOptions:he,permissionFilterServiceOptions:ee,permissionFilterActionOptions:U,permissionsQuery:L,filteredPermissionList:me,parsePermissionParts:ny,mergedPermissionDescriptions:V,permissionTree:A,updateLocalPermissionDescription:H})})]})]})}function bH({notification:t}){var e;return t?c.jsxs("div",{className:"space-y-3 text-sm text-black/70 dark:text-white/70",children:[t.message?c.jsx("div",{children:t.message}):c.jsx("div",{children:"No additional details."}),(e=t.meta)!=null&&e.details?c.jsx("div",{className:"rounded-xl bg-black/5 dark:bg-white/10 p-3 text-xs whitespace-pre-wrap",children:t.meta.details}):null]}):null}function wH(){const{notifications:t,loading:e,clearAll:n,dismissNotification:s,markRead:r,formatTime:i}=y0(),[o,a]=v.useState(null),l=v.useMemo(()=>t,[t]);return c.jsxs("div",{className:"h-full min-h-0",children:[c.jsxs(_t,{className:"h-full flex flex-col",children:[c.jsxs(Kt,{className:"flex flex-wrap items-center justify-between gap-2",children:[c.jsxs("div",{children:[c.jsx(Qt,{children:"Notifications"}),c.jsx("div",{className:"text-xs text-black/50 dark:text-white/55",children:l.length?`${l.length} total`:"No alerts yet"})]}),c.jsx(te,{variant:"secondary",className:"rounded-2xl",onClick:n,disabled:!l.length,children:"Clear all"})]}),c.jsx(Gt,{className:"flex-1 min-h-0 overflow-y-auto pt-2",children:e?c.jsx(Ye,{text:"Loading",className:"text-sm text-black/60 dark:text-white/65"}):l.length?c.jsx("div",{className:"space-y-2",children:l.map(u=>c.jsx(zt,{className:"p-3",children:c.jsxs("div",{className:"flex items-start justify-between gap-2",children:[c.jsxs("div",{className:"min-w-0",children:[c.jsx("div",{className:"text-base font-semibold text-black/85 dark:text-white/85 truncate",children:u.title||"Notification"}),u.message?c.jsx("div",{className:"mt-1 text-sm text-black/60 dark:text-white/65 leading-5 mmg-line-clamp-2",children:u.message}):null,u.created_at?c.jsx("div",{className:"mt-1 text-xs text-black/45 dark:text-white/45",children:i(u.created_at)}):null]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Tn,{variant:"ghost",className:"h-8 w-8",onClick:()=>{r(u.id),a(u)},"aria-label":"View notification",children:c.jsx(WC,{size:14})}),c.jsx(Tn,{variant:"ghost",className:"h-8 w-8",onClick:()=>s(u.id),"aria-label":"Close notification",children:c.jsx(Gv,{size:14})})]})]})},u.id))}):c.jsx(zt,{className:"p-6 text-center text-sm text-black/60 dark:text-white/65",children:"You're all caught up."})})]}),c.jsx(ks,{open:!!o,onClose:()=>a(null),title:(o==null?void 0:o.title)||"Notification",maxWidth:"520px",children:c.jsx(bH,{notification:o})})]})}function kH(){const[t,e]=v.useState(null),[n,s]=v.useState([]),[r,i]=v.useState(""),[o,a]=v.useState(null),[l,u]=v.useState(null),[d,h]=v.useState(!1),[f,p]=v.useState(!1),[w,x]=v.useState(!1),[y,g]=v.useState(null),[m,b]=v.useState({}),[k,_]=v.useState(null),[C,S]=v.useState(!1),[j,N]=v.useState(!1),T=v.useRef(null),L=v.useRef(null),D=v.useRef(null),O=v.useRef(null),$=v.useRef(!0),I=an({queryKey:["video-critique","history"],queryFn:g4,enabled:!0}),A=v.useMemo(()=>(r.trim().length>0||!!o)&&!d,[r,o,d]);v.useEffect(()=>{var Q;if(f||I.isLoading)return;const U=I.data;if(U&&((Q=U.messages)!=null&&Q.length||U.session_id||U.conversation_id)){e(U.session_id||U.conversation_id||null);const de=(U.messages||[]).map(NH);s(de.length?de:[j_()])}else s([j_()]);p(!0)},[I.data,I.isLoading,f]),v.useEffect(()=>{const U=L.current;if(!U)return;const Q=()=>{const Z=U.scrollHeight-U.scrollTop-U.clientHeight<=120;$.current=Z};return Q(),U.addEventListener("scroll",Q,{passive:!0}),()=>U.removeEventListener("scroll",Q)},[]);const W=ge.useCallback((U="smooth",Q=!1)=>{var de;!Q&&!$.current||(de=D.current)==null||de.scrollIntoView({behavior:U,block:"end"})},[]);v.useEffect(()=>{const U=d?"auto":"smooth";requestAnimationFrame(()=>W(U))},[n,d,W]),v.useEffect(()=>{f&&requestAnimationFrame(()=>W("auto",!0))},[f,W]),v.useEffect(()=>()=>{var U,Q;return(Q=(U=O.current)==null?void 0:U.abort)==null?void 0:Q.call(U)},[]);const E=v.useMemo(()=>{var U;return(U=y==null?void 0:y.fields)!=null&&U.length?y.fields.every(Q=>{if(!Q.required)return!0;const de=m==null?void 0:m[Q.id];return de!=null&&String(de).trim()!==""}):!1},[y,m]);function P(){x(!1),g(null),b({}),_(null),S(!1),N(!1)}async function F({formType:U,workflowId:Q}){x(!0),S(!0),_({formType:U,workflowId:Q}),g(null),b({});try{const de=await k4(U);g(de);const Z={};((de==null?void 0:de.fields)||[]).forEach(be=>{Z[be.id]=be.default_value||""}),b(Z)}catch(de){g({title:"Action",submit_text:"Submit",fields:[],error:(de==null?void 0:de.message)||"Failed to load form."})}finally{S(!1)}}function V(U,Q={}){s(de=>[...de,{id:crypto.randomUUID(),role:"assistant",content:U,files:[],status:null,...Q}])}async function H(U){if(!U||U.url)return;const Q=U.action_id||U.id,de=U.workflow_id||U.workflowId;if(!Q||!de){V("Missing action details. Please try again.");return}try{N(!0);const Z=await b4({actionId:Q,workflowId:de});if(Z!=null&&Z.requires_form){N(!1),await F({formType:Z.form_type||U.form_type,workflowId:Z.workflow_id||de});return}V((Z==null?void 0:Z.message)||"Action completed.")}catch(Z){V((Z==null?void 0:Z.message)||"Unable to complete that action.")}finally{N(!1)}}async function he(){if(!(!(k!=null&&k.formType)||!(k!=null&&k.workflowId))&&E){N(!0);try{const U=await w4({formType:k.formType,workflowId:k.workflowId,category:m.category,reason:m.reason});P(),V((U==null?void 0:U.message)||"Form submitted.")}catch(U){V((U==null?void 0:U.message)||"Unable to submit the form."),N(!1)}}}async function ee(){var J,pe;if(!A)return;const U=r.trim(),Q=o,de=!!l&&!Q,Z=U||(Q?`Please review this file: ${Q.name}`:"");Q&&l&&u(null);const be=crypto.randomUUID(),Ae=Q?[{file_id:`local-${Date.now()}`,filename:Q.name,preview_url:URL.createObjectURL(Q)}]:[],me={id:be,role:"user",content:U,files:Ae,status:null},fe=crypto.randomUUID(),De={id:fe,role:"assistant",content:"",files:[],status:de?null:"Reviewing..."};s(ie=>[...ie,me,De]),i(""),a(null),$.current=!0,requestAnimationFrame(()=>W("auto",!0));try{let ie=[];if(de){const B=S_(U);if(!B){s(je=>je.map(Ce=>Ce.id===fe?{...Ce,status:null,content:"Please provide a task number to upload this video."}:Ce));return}h(!0);const xe=await Vk({file:l,taskNumber:B});s(je=>je.map(Ce=>Ce.id===fe?{...Ce,status:null,content:(xe==null?void 0:xe.message)||"Video uploaded."}:Ce)),u(null);return}if(Q&&CH(Q)){const B=S_(U);if(B){h(!0);const xe=await Vk({file:Q,taskNumber:B});s(je=>je.map(Ce=>Ce.id===fe?{...Ce,status:null,content:(xe==null?void 0:xe.message)||"Video uploaded."}:Ce));return}u(Q),s(xe=>xe.map(je=>je.id===fe?{...je,status:null,content:"Video received. Which task number is this for?"}:je));return}if(Q&&EH(Q)){h(!0);const B=await x4({file:Q,message:U||void 0,sessionId:t});if(B!=null&&B.session_id&&e(xe=>xe||B.session_id),B!=null&&B.file_id){const xe={file_id:B.file_id,filename:Q.name,file_url:B.file_url||B.url||""};s(je=>je.map(Ce=>{var Le,we,oe,Ne;return Ce.id===be?{...Ce,files:[{...xe,preview_url:((we=(Le=Ce.files)==null?void 0:Le[0])==null?void 0:we.preview_url)||((Ne=(oe=Ce.files)==null?void 0:oe[0])==null?void 0:Ne.url)||""}]}:Ce}))}s(xe=>xe.map(je=>je.id===fe?{...je,status:null,content:(B==null?void 0:B.response)||(B==null?void 0:B.message)||"File received."}:je));return}if(Q){h(!0);const B=await y4({file:Q});if(!(B!=null&&B.file_id))throw new Error("Upload failed");ie=[B.file_id];const xe={file_id:B.file_id,filename:Q.name,file_url:B.file_url||B.url||""};s(je=>je.map(Ce=>{var Le,we,oe,Ne;return Ce.id===be?{...Ce,files:[{...xe,preview_url:((we=(Le=Ce.files)==null?void 0:Le[0])==null?void 0:we.preview_url)||((Ne=(oe=Ce.files)==null?void 0:oe[0])==null?void 0:Ne.url)||""}]}:Ce}))}if(!Q&&U.startsWith("/")){h(!0);const xe=U.replace(/^\/+/,"").split(/\\s+/),je=xe.shift()||"",Ce=xe.join(" "),Le=await v4({command:je,args:Ce,sessionId:t});Le!=null&&Le.session_id&&e(we=>we||Le.session_id),s(we=>we.map(oe=>oe.id===fe?{...oe,status:null,content:(Le==null?void 0:Le.response)||(Le==null?void 0:Le.error)||"Command failed."}:oe));return}h(!0),(pe=(J=O.current)==null?void 0:J.abort)==null||pe.call(J);const K=new AbortController;O.current=K;let G="",le=null,Y=!1;await S4({sessionId:t,message:Z,fileIds:ie,signal:K.signal,onEvent:B=>{var Ce,Le;if((B!=null&&B.session_id||B!=null&&B.conversation_id)&&e(we=>we||B.session_id||B.conversation_id),(B==null?void 0:B.type)==="error"||B!=null&&B.error){const we=(B==null?void 0:B.message)||(B==null?void 0:B.error)||"Stream error";s(oe=>oe.map(Ne=>Ne.id===fe?{...Ne,status:null,content:`Error: ${we}`}:Ne));return}if((B==null?void 0:B.type)==="status"){s(we=>we.map(oe=>oe.id===fe?{...oe,status:B.content||"Processing..."}:oe)),B.message_id&&(le=B.message_id);return}if((B==null?void 0:B.type)==="delete"){B.message_id&&B.message_id===le&&(G="",le=null,s(we=>we.map(oe=>oe.id===fe?{...oe,status:"Reviewing...",content:""}:oe)));return}if((B==null?void 0:B.type)==="tool_call"){const we=B.name||((Ce=B.tool)==null?void 0:Ce.name)||"processing";s(oe=>oe.map(Ne=>Ne.id===fe?{...Ne,status:`Processing ${we}...`}:Ne));return}const xe=((Le=B==null?void 0:B.result)==null?void 0:Le.pdf_filename)||(B==null?void 0:B.pdf_filename),je=we=>!we||!xe||we.pdf_filename?we:{...we,pdf_filename:xe};if(xe&&s(we=>we.map(oe=>oe.id===fe&&!oe.pdf_filename?{...oe,pdf_filename:xe}:oe)),(B==null?void 0:B.type)==="delta"&&B.content){G+=B.content,s(we=>we.map(oe=>oe.id===fe?{...oe,status:null,content:G}:oe));return}if((B==null?void 0:B.type)==="text_done"){G=B.content||G,s(we=>we.map(oe=>oe.id===fe?{...oe,status:null,content:G}:oe));return}if(((B==null?void 0:B.type)==="chunk"||(B==null?void 0:B.type)==="content")&&B.content){B.message_id&&B.message_id!==le&&(le=B.message_id),G=B.type==="content"?B.content:G+B.content,s(we=>we.map(oe=>oe.id===fe?{...oe,status:null,content:G}:oe));return}if(B!=null&&B.content&&!B.type){G+=B.content,s(we=>we.map(oe=>oe.id===fe?{...oe,status:null,content:G}:oe));return}if((B==null?void 0:B.type)==="actions"&&B.actions){s(we=>we.map(oe=>oe.id===fe?{...oe,actions:B.actions}:oe));return}if(B!=null&&B.actions){s(we=>we.map(oe=>oe.id===fe?{...oe,actions:B.actions}:oe));return}if((B==null?void 0:B.type)==="files"&&B.files){if(Y=!0,s(we=>we.map(oe=>oe.id===fe?{...oe,files:[...oe.files||[],...B.files.map(je)]}:oe)),!G){const we=B.files.find(oe=>oe.comment);we!=null&&we.comment&&(G=we.comment,s(oe=>oe.map(Ne=>Ne.id===fe?{...Ne,status:null,content:G}:Ne)))}return}if((B==null?void 0:B.type)==="file"&&(B.file||B.url)){const we=je(B.file||B);Y=!0,s(oe=>oe.map(Ne=>Ne.id===fe?{...Ne,files:[...Ne.files||[],we]}:Ne)),!G&&we.comment&&(G=we.comment,s(oe=>oe.map(Ne=>Ne.id===fe?{...Ne,status:null,content:G}:Ne)));return}if(B!=null&&B.files){Y=!0,s(we=>we.map(oe=>oe.id===fe?{...oe,files:[...oe.files||[],...B.files.map(je)]}:oe));return}typeof B=="string"&&B.trim()&&(G+=B,s(we=>we.map(oe=>oe.id===fe?{...oe,status:null,content:G}:oe)))},onDone:()=>{!G&&!Y&&s(B=>B.map(xe=>xe.id===fe?{...xe,status:null,content:"Ready for the next request when you are."}:xe))}})}catch(ie){s(K=>K.map(G=>G.id===fe?{...G,status:null,content:(ie==null?void 0:ie.message)||"Failed to get response"}:G))}finally{h(!1)}}return c.jsxs("div",{className:"h-full flex flex-col gap-4 min-h-0",children:[c.jsx(_t,{className:"p-4 overflow-hidden flex-1 min-h-0",children:c.jsx("div",{ref:L,className:"h-full overflow-y-auto px-2",children:c.jsxs("div",{className:"space-y-3",children:[!f&&I.isLoading?c.jsx(Ye,{text:"Loading conversation",className:"text-sm text-black/60 dark:text-white/65"}):null,n.map(U=>c.jsx(_H,{msg:U,onMediaLoad:()=>W("auto"),onAction:H,actionsDisabled:j},U.id)),c.jsx("div",{ref:D})]})})}),c.jsxs(_t,{className:"p-3",children:[l&&!o?c.jsxs("div",{className:"mb-2 flex items-center justify-between rounded-2xl bg-black/5 dark:bg-white/10 px-3 py-2 text-sm",children:[c.jsxs("div",{className:"truncate",children:["Awaiting task number for ",l.name]}),c.jsx("button",{className:"opacity-70 hover:opacity-100",onClick:()=>u(null),children:"x"})]}):null,o?c.jsxs("div",{className:"mb-2 flex items-center justify-between rounded-2xl bg-black/5 dark:bg-white/10 px-3 py-2 text-sm",children:[c.jsx("div",{className:"truncate",children:o.name}),c.jsx("button",{className:"opacity-70 hover:opacity-100",onClick:()=>a(null),children:"x"})]}):null,c.jsxs("div",{className:"flex items-end gap-2",children:[c.jsx("input",{ref:T,type:"file",className:"hidden",onChange:U=>{var Q;return a(((Q=U.target.files)==null?void 0:Q[0])||null)},accept:"video/*,image/*,.pdf,.xlsx,.xls,.csv,.docx,.doc"}),c.jsx(te,{variant:"ghost",size:"icon",className:"rounded-2xl",title:"Attach file",onClick:()=>{var U;return(U=T.current)==null?void 0:U.click()},children:c.jsx(VC,{size:18})}),c.jsx(SH,{value:r,onChange:i,placeholder:"Describe the video request...",onEnter:ee}),c.jsx(te,{size:"icon",className:"w-12 rounded-2xl",title:"Send",disabled:!A,onClick:ee,children:c.jsx(qC,{size:18})})]}),c.jsx("div",{className:"mt-2 text-xs text-black/45 dark:text-white/55",children:"Share a brief, a link, or upload a cut for review."})]}),c.jsx(ks,{open:w,onClose:P,title:(y==null?void 0:y.title)||"Action",maxWidth:"520px",children:C?c.jsx(Ye,{text:"Loading form",className:"text-sm text-black/60 dark:text-white/65"}):y!=null&&y.error?c.jsx("div",{className:"text-sm text-red-600 dark:text-red-300",children:y.error}):c.jsxs("div",{className:"space-y-3",children:[((y==null?void 0:y.fields)||[]).map(U=>{if(U.type==="select"){const Q=[{value:"",label:U.placeholder||"Select..."},...U.options||[]];return c.jsx(Se,{label:U.label,children:c.jsx(at,{value:m[U.id]||"",options:Q,onChange:de=>b(Z=>({...Z,[U.id]:de}))})},U.id)}return U.type==="textarea"?c.jsx(Se,{label:U.label,children:c.jsx("textarea",{rows:3,placeholder:U.placeholder||"",className:"w-full resize-none rounded-2xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:m[U.id]||"",onChange:Q=>b(de=>({...de,[U.id]:Q.target.value}))})},U.id):c.jsx(Se,{label:U.label,children:c.jsx("input",{type:"text",placeholder:U.placeholder||"",className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:m[U.id]||"",onChange:Q=>b(de=>({...de,[U.id]:Q.target.value}))})},U.id)}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx(te,{variant:"ghost",className:"rounded-2xl",onClick:P,children:"Cancel"}),c.jsx(te,{className:"rounded-2xl",onClick:he,disabled:!E||j||C,children:(y==null?void 0:y.submit_text)||"Submit"})]})]})})]})}function _H({msg:t,onMediaLoad:e,onAction:n,actionsDisabled:s}){var h;const r=t.role==="user",i=v.useMemo(()=>MH(t.content||""),[t.content]),o=v.useMemo(()=>Ry(t.status||""),[t.status]),a=v.useMemo(()=>!t.status&&TH(t.content||""),[t.status,t.content]),l=v.useMemo(()=>Ry(t.content||""),[t.content]),u=v.useRef(new Map),d=t.actions||t.buttons||[];return c.jsx("div",{className:r?"flex justify-end":"flex justify-start",children:c.jsxs("div",{className:["max-w-[85%] rounded-2xl px-3 py-2 text-sm shadow-soft break-words","ring-1 ring-black/5 dark:ring-white/10 backdrop-blur-xs",r?"bg-black text-white dark:bg-white dark:text-black":"bg-white/70 dark:bg-white/10"].join(" "),children:[t.status||a?c.jsx(jH,{text:o||l}):c.jsx("div",{dangerouslySetInnerHTML:{__html:i}}),(h=t.files)!=null&&h.length?c.jsx("div",{className:"mt-2 space-y-1",children:t.files.map((f,p)=>{const w=_4(f);if(!w)return null;const x=f.pdf_filename||t.pdf_filename,y=AH(x?{...f,pdf_filename:x}:f,w,u.current),g=qc(y),m=["jpg","jpeg","png","gif","webp","bmp"].includes(g),b=!r,k=g==="pdf";return m?c.jsx("div",{className:"rounded-xl border border-black/5 dark:border-white/10 bg-white/70 dark:bg-white/5 p-2",children:b?c.jsxs(c.Fragment,{children:[c.jsx("a",{href:w,target:"_blank",rel:"noopener noreferrer",className:"block overflow-hidden rounded-lg",children:c.jsx("img",{src:w,alt:y,className:"max-h-64 w-full object-cover",loading:"lazy",onLoad:e})}),c.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[c.jsx(te,{asChild:!0,size:"sm",variant:"ghost",className:"rounded-xl",children:c.jsxs("a",{href:w,target:"_blank",rel:"noopener noreferrer",children:[c.jsx(io,{size:14,className:"mr-1"}),"Open"]})}),c.jsx(te,{size:"sm",variant:"secondary",className:"rounded-xl",children:c.jsxs("span",{role:"link",tabIndex:0,onClick:_=>{_.preventDefault(),Ih(w,y)},onKeyDown:_=>{(_.key==="Enter"||_.key===" ")&&(_.preventDefault(),Ih(w,y))},className:"inline-flex items-center",children:[c.jsx(pa,{size:14,className:"mr-1"}),"Download"]})})]})]}):c.jsx("div",{className:"overflow-hidden rounded-lg",children:c.jsx("img",{src:w,alt:y,className:"max-h-64 w-full object-cover",loading:"lazy",onLoad:e})})},f.file_id||w||p):c.jsx("div",{className:"rounded-xl border border-black/5 dark:border-white/10 bg-white/70 dark:bg-white/5 p-3",children:c.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[c.jsxs("div",{className:"min-w-0",children:[c.jsx("div",{className:"flex items-center gap-2 text-xs uppercase tracking-wide text-black/50 dark:text-white/60",children:k?c.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-red-500/10 text-red-700 dark:text-red-300 px-2 py-0.5",children:[c.jsx(Kv,{size:12}),"PDF"]}):c.jsx("span",{className:"inline-flex items-center gap-1 rounded-full bg-black/5 dark:bg-white/10 px-2 py-0.5",children:g?g.toUpperCase():"FILE"})}),b?c.jsx("div",{className:"mt-1 text-xs font-semibold text-black/80 dark:text-white/85 truncate",children:y}):null]}),b?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(te,{asChild:!0,size:"sm",variant:"ghost",className:"rounded-xl",children:c.jsxs("a",{href:w,target:"_blank",rel:"noopener noreferrer",children:[c.jsx(io,{size:14,className:"mr-1"}),"Open"]})}),c.jsx(te,{size:"sm",variant:"secondary",className:"rounded-xl",children:c.jsxs("span",{role:"link",tabIndex:0,onClick:_=>{_.preventDefault(),Ih(w,y)},onKeyDown:_=>{(_.key==="Enter"||_.key===" ")&&(_.preventDefault(),Ih(w,y))},className:"inline-flex items-center",children:[c.jsx(pa,{size:14,className:"mr-1"}),"Download"]})})]}):null]})},f.file_id||w||p)})}):null,d.length?c.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:d.map((f,p)=>{const w=f.action_id||f.id||`${f.label}-${p}`,x=f.variant||"secondary";return f.url?c.jsx(te,{asChild:!0,size:"sm",variant:x,className:"rounded-xl",disabled:s,children:c.jsx("a",{href:f.url,target:"_blank",rel:"noopener noreferrer",children:f.label||"Open"})},w):c.jsx(te,{size:"sm",variant:x,className:"rounded-xl",onClick:()=>n==null?void 0:n(f),disabled:s,children:f.label||"Action"},w)})}):null]})})}function SH({value:t,onChange:e,placeholder:n,onEnter:s,disabled:r}){const i=v.useRef(null);v.useEffect(()=>{const a=i.current;if(!a)return;a.style.height="0px";const u=22*5+16;a.style.height=Math.min(a.scrollHeight,u)+"px"},[t]);function o(a){a.key==="Enter"&&!a.shiftKey&&(a.preventDefault(),s==null||s())}return c.jsx("textarea",{ref:i,rows:1,value:t,disabled:r,onChange:a=>e(a.target.value),onKeyDown:o,placeholder:n,className:"w-full resize-none rounded-2xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-4 py-2 text-sm outline-none focus:ring-2 focus:ring-black/10 dark:focus:ring-white/15 overflow-auto",style:{maxHeight:"132px"}})}function jH({text:t}){return c.jsxs("span",{className:"inline-flex items-center gap-2 opacity-80",children:[c.jsx("span",{children:t||"Reviewing"}),c.jsxs("span",{className:"mmg-ellipsis","aria-hidden":"true",children:[c.jsx("span",{className:"mmg-ellipsis-dot",style:{animationDelay:"0ms"}}),c.jsx("span",{className:"mmg-ellipsis-dot",style:{animationDelay:"120ms"}}),c.jsx("span",{className:"mmg-ellipsis-dot",style:{animationDelay:"240ms"}})]})]})}function S_(t){if(!t)return null;const e=String(t).match(/\b(\d{1,6})\b/);return e?Number(e[1]):null}function CH(t){if(!t)return!1;if(t.type&&t.type.startsWith("video/"))return!0;const e=t.name||"";return/\.(mp4|mov|avi|mkv|webm)$/i.test(e)}function EH(t){if(!t)return!1;if(t.type&&t.type.startsWith("image/"))return!0;const e=t.name||"";return/\.(png|jpe?g|gif|webp|bmp)$/i.test(e)}function NH(t){return{id:t.id||t.message_id||crypto.randomUUID(),role:t.role||t.sender||"assistant",content:t.content||t.message||"",files:t.files||t.attachments||[],actions:t.actions||t.buttons||[],pdf_filename:t.pdf_filename||t.pdfFilename,status:null}}function Ry(t){return t?String(t).replace(/[_*`]/g,"").replace(/\.+$/,"").replace(/\s+/g," ").trim():""}function TH(t){const e=Ry(t);return e?!!(e==="Reviewing"||e.startsWith("Processing")||e.startsWith("Analyzing")):!1}function qc(t){if(!t)return"";const n=String(t).split("?")[0].split("#")[0].split(".");return n.length<=1?"":n.pop().toLowerCase()}function PH(t){if(!t)return"";try{const n=new URL(t,window.location.href).pathname.split("/").filter(Boolean);return n.length?decodeURIComponent(n[n.length-1]):""}catch{const n=t.split("?")[0].split("#")[0].split("/").filter(Boolean);return n.length?decodeURIComponent(n[n.length-1]):""}}function RH(t){if(!t)return!0;const e=t.trim().toLowerCase();if(!e||e==="file"||e==="download")return!0;const n=e.replace(/\.[^.]+$/,"");return!!(n==="tmp"||n==="temp"||/^[a-f0-9-]{16,}$/.test(n)||/^file[-_]?\d+$/.test(n)||/^(tmp|temp)/.test(n)||/^upload[-_]?.+$/.test(n))}function AH(t,e,n){const s=(t==null?void 0:t.pdf_filename)||"",r=s||(t==null?void 0:t.filename)||(t==null?void 0:t.title)||"",i=PH(e),o=(t==null?void 0:t.file_id)||(t==null?void 0:t.id)||e||r;let a=r||i||"";const l=qc(a)||qc(i)||qc(e);if(s){const u=qc(a)||"pdf";return a.toLowerCase().endsWith(`.${u}`)||(a=`${a}.${u}`),o&&n&&n.set(o,a),a}return RH(a)?l==="pdf"?a="Review.pdf":l?a=`Attachment.${l}`:a="Attachment":l&&!a.toLowerCase().endsWith(`.${l}`)&&(a=`${a}.${l}`),o&&n&&n.set(o,a),a||(l?`Attachment.${l}`:"Attachment")}async function Ih(t,e){try{const n=Up(),s=await fetch(t,{headers:n?{Authorization:`Bearer ${n}`}:void 0});if(!s.ok)throw new Error("Download failed");const r=await s.blob(),i=URL.createObjectURL(r),o=document.createElement("a");o.href=i,o.download=e,document.body.appendChild(o),o.click(),o.remove(),setTimeout(()=>URL.revokeObjectURL(i),1e3)}catch{const n=document.createElement("a");n.href=t,n.download=e,n.target="_blank",n.rel="noopener noreferrer",document.body.appendChild(n),n.click(),n.remove()}}function j_(){return{id:crypto.randomUUID(),role:"assistant",content:`Good ${OH()}, ready for a video critique?`,files:[],status:null}}function OH(){const t=new Date().getHours();return t>=5&&t<12?"morning":t>=12&&t<17?"afternoon":t>=17&&t<21?"evening":"night"}function Ay(t){return String(t||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function Rc(t){return t?Ay(t).replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer" class="chat-link">$1</a>').replace(/!\[([^\]]*)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer" class="chat-link">[Image: $1]</a>').replace(/\*\*\*(.+?)\*\*\*/g,"<strong><em>$1</em></strong>").replace(/___(.+?)___/g,"<strong><em>$1</em></strong>").replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/__(?!INLINE_CODE_|CODE_BLOCK_)(.+?)__/g,"<strong>$1</strong>").replace(new RegExp("(?<!\\*)\\*(?!\\*)(.+?)(?<!\\*)\\*(?!\\*)","g"),"<em>$1</em>").replace(new RegExp("(?<!\\w)_(?!_)(.+?)(?<!_)_(?!\\w)","g"),"<em>$1</em>").replace(/~~(.+?)~~/g,"<del>$1</del>").replace(/==(.+?)==/g,'<mark class="chat-highlight">$1</mark>'):""}function MH(t){if(!t)return"";const e=[];let n=t.replace(/```(\w*)\n?([\s\S]*?)```/g,(d,h,f)=>{const p=e.length;return e.push({lang:h||"",code:f.trim()}),`__CODE_BLOCK_${p}__`});const s=[];n=n.replace(/`([^`]+)`/g,(d,h)=>{const f=s.length;return s.push(h),`__INLINE_CODE_${f}__`});const r=n.split(`
`);let i=[],o=!1,a=!1,l=!1;for(let d=0;d<r.length;d++){let h=r[d];const f=h.match(/^__CODE_BLOCK_(\d+)__$/);if(f){o&&(i.push("</ul>"),o=!1),a&&(i.push("</ol>"),a=!1),l&&(i.push("</blockquote>"),l=!1);const g=e[parseInt(f[1],10)],m=g.lang?` class="language-${g.lang}"`:"";i.push(`<pre class="chat-code-block"><code${m}>${Ay(g.code)}</code></pre>`);continue}const p=h.match(/^(#{1,6})\s+(.*)$/);if(p){o&&(i.push("</ul>"),o=!1),a&&(i.push("</ol>"),a=!1),l&&(i.push("</blockquote>"),l=!1);const g=p[1].length,m=Rc(p[2]);i.push(`<h${g} class="chat-header chat-h${g}">${m}</h${g}>`);continue}if(/^[-*_]{3,}\s*$/.test(h)){o&&(i.push("</ul>"),o=!1),a&&(i.push("</ol>"),a=!1),l&&(i.push("</blockquote>"),l=!1),i.push('<hr class="chat-hr">');continue}const w=h.match(/^>\s*(.*)$/);if(w){o&&(i.push("</ul>"),o=!1),a&&(i.push("</ol>"),a=!1),l||(i.push('<blockquote class="chat-blockquote">'),l=!0),i.push(Rc(w[1])+"<br>");continue}else l&&(i.push("</blockquote>"),l=!1);const x=h.match(/^(\s*)([-*])\s+(.*)$/);if(x){a&&(i.push("</ol>"),a=!1),o||(i.push('<ul class="chat-list">'),o=!0);const g=Rc(x[3]);i.push(`<li>${g}</li>`);continue}else o&&(i.push("</ul>"),o=!1);const y=h.match(/^(\s*)(\d+)\.\s+(.*)$/);if(y){o&&(i.push("</ul>"),o=!1),a||(i.push('<ol class="chat-numbered-list">'),a=!0);const g=Rc(y[3]);i.push(`<li>${g}</li>`);continue}else a&&(i.push("</ol>"),a=!1);if(h.trim()===""){i.push("<br>");continue}i.push(Rc(h)),d<r.length-1&&i.push("<br>")}o&&i.push("</ul>"),a&&i.push("</ol>"),l&&i.push("</blockquote>");let u=i.join("");return s.forEach((d,h)=>{u=u.replace(`__INLINE_CODE_${h}__`,`<code class="chat-inline-code">${Ay(d)}</code>`)}),u}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ld(t){return t+.5|0}const zi=(t,e,n)=>Math.max(Math.min(t,n),e);function Kc(t){return zi(Ld(t*2.55),0,255)}function to(t){return zi(Ld(t*255),0,255)}function Vr(t){return zi(Ld(t/2.55)/100,0,1)}function C_(t){return zi(Ld(t*100),0,100)}const Ts={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Oy=[..."0123456789ABCDEF"],IH=t=>Oy[t&15],DH=t=>Oy[(t&240)>>4]+Oy[t&15],Dh=t=>(t&240)>>4===(t&15),LH=t=>Dh(t.r)&&Dh(t.g)&&Dh(t.b)&&Dh(t.a);function $H(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Ts[t[1]]*17,g:255&Ts[t[2]]*17,b:255&Ts[t[3]]*17,a:e===5?Ts[t[4]]*17:255}:(e===7||e===9)&&(n={r:Ts[t[1]]<<4|Ts[t[2]],g:Ts[t[3]]<<4|Ts[t[4]],b:Ts[t[5]]<<4|Ts[t[6]],a:e===9?Ts[t[7]]<<4|Ts[t[8]]:255})),n}const FH=(t,e)=>t<255?e(t):"";function zH(t){var e=LH(t)?IH:DH;return t?"#"+e(t.r)+e(t.g)+e(t.b)+FH(t.a,e):void 0}const BH=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function QT(t,e,n){const s=e*Math.min(n,1-n),r=(i,o=(i+t/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function UH(t,e,n){const s=(r,i=(r+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function HH(t,e,n){const s=QT(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)s[r]*=1-e-n,s[r]+=e;return s}function WH(t,e,n,s,r){return t===r?(e-n)/s+(e<n?6:0):e===r?(n-t)/s+2:(t-e)/s+4}function M0(t){const n=t.r/255,s=t.g/255,r=t.b/255,i=Math.max(n,s,r),o=Math.min(n,s,r),a=(i+o)/2;let l,u,d;return i!==o&&(d=i-o,u=a>.5?d/(2-i-o):d/(i+o),l=WH(n,s,r,d,i),l=l*60+.5),[l|0,u||0,a]}function I0(t,e,n,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,s)).map(to)}function D0(t,e,n){return I0(QT,t,e,n)}function VH(t,e,n){return I0(HH,t,e,n)}function qH(t,e,n){return I0(UH,t,e,n)}function XT(t){return(t%360+360)%360}function KH(t){const e=BH.exec(t);let n=255,s;if(!e)return;e[5]!==s&&(n=e[6]?Kc(+e[5]):to(+e[5]));const r=XT(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?s=VH(r,i,o):e[1]==="hsv"?s=qH(r,i,o):s=D0(r,i,o),{r:s[0],g:s[1],b:s[2],a:n}}function GH(t,e){var n=M0(t);n[0]=XT(n[0]+e),n=D0(n),t.r=n[0],t.g=n[1],t.b=n[2]}function YH(t){if(!t)return;const e=M0(t),n=e[0],s=C_(e[1]),r=C_(e[2]);return t.a<255?`hsla(${n}, ${s}%, ${r}%, ${Vr(t.a)})`:`hsl(${n}, ${s}%, ${r}%)`}const E_={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},N_={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function QH(){const t={},e=Object.keys(N_),n=Object.keys(E_);let s,r,i,o,a;for(s=0;s<e.length;s++){for(o=a=e[s],r=0;r<n.length;r++)i=n[r],a=a.replace(i,E_[i]);i=parseInt(N_[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let Lh;function XH(t){Lh||(Lh=QH(),Lh.transparent=[0,0,0,0]);const e=Lh[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const JH=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function ZH(t){const e=JH.exec(t);let n=255,s,r,i;if(e){if(e[7]!==s){const o=+e[7];n=e[8]?Kc(o):zi(o*255,0,255)}return s=+e[1],r=+e[3],i=+e[5],s=255&(e[2]?Kc(s):zi(s,0,255)),r=255&(e[4]?Kc(r):zi(r,0,255)),i=255&(e[6]?Kc(i):zi(i,0,255)),{r:s,g:r,b:i,a:n}}}function e8(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Vr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Eg=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Va=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function t8(t,e,n){const s=Va(Vr(t.r)),r=Va(Vr(t.g)),i=Va(Vr(t.b));return{r:to(Eg(s+n*(Va(Vr(e.r))-s))),g:to(Eg(r+n*(Va(Vr(e.g))-r))),b:to(Eg(i+n*(Va(Vr(e.b))-i))),a:t.a+n*(e.a-t.a)}}function $h(t,e,n){if(t){let s=M0(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*n,e===0?360:1)),s=D0(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function JT(t,e){return t&&Object.assign(e||{},t)}function T_(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=to(t[3]))):(e=JT(t,{r:0,g:0,b:0,a:1}),e.a=to(e.a)),e}function n8(t){return t.charAt(0)==="r"?ZH(t):KH(t)}class td{constructor(e){if(e instanceof td)return e;const n=typeof e;let s;n==="object"?s=T_(e):n==="string"&&(s=$H(e)||XH(e)||n8(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=JT(this._rgb);return e&&(e.a=Vr(e.a)),e}set rgb(e){this._rgb=T_(e)}rgbString(){return this._valid?e8(this._rgb):void 0}hexString(){return this._valid?zH(this._rgb):void 0}hslString(){return this._valid?YH(this._rgb):void 0}mix(e,n){if(e){const s=this.rgb,r=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=s.a-r.a,u=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-u,s.r=255&u*s.r+i*r.r+.5,s.g=255&u*s.g+i*r.g+.5,s.b=255&u*s.b+i*r.b+.5,s.a=o*s.a+(1-o)*r.a,this.rgb=s}return this}interpolate(e,n){return e&&(this._rgb=t8(this._rgb,e._rgb,n)),this}clone(){return new td(this.rgb)}alpha(e){return this._rgb.a=to(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Ld(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return $h(this._rgb,2,e),this}darken(e){return $h(this._rgb,2,-e),this}saturate(e){return $h(this._rgb,1,e),this}desaturate(e){return $h(this._rgb,1,-e),this}rotate(e){return GH(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function $r(){}const s8=(()=>{let t=0;return()=>t++})();function bt(t){return t==null}function hn(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function it(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Hs(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function mr(t,e){return Hs(t)?t:e}function st(t,e){return typeof t>"u"?e:t}const r8=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,ZT=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Et(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function pt(t,e,n,s){let r,i,o;if(hn(t))for(i=t.length,r=0;r<i;r++)e.call(n,t[r],r);else if(it(t))for(o=Object.keys(t),i=o.length,r=0;r<i;r++)e.call(n,t[o[r]],o[r])}function dp(t,e){let n,s,r,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,s=t.length;n<s;++n)if(r=t[n],i=e[n],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function hp(t){if(hn(t))return t.map(hp);if(it(t)){const e=Object.create(null),n=Object.keys(t),s=n.length;let r=0;for(;r<s;++r)e[n[r]]=hp(t[n[r]]);return e}return t}function e2(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function i8(t,e,n,s){if(!e2(t))return;const r=e[t],i=n[t];it(r)&&it(i)?nd(r,i,s):e[t]=hp(i)}function nd(t,e,n){const s=hn(e)?e:[e],r=s.length;if(!it(t))return t;n=n||{};const i=n.merger||i8;let o;for(let a=0;a<r;++a){if(o=s[a],!it(o))continue;const l=Object.keys(o);for(let u=0,d=l.length;u<d;++u)i(l[u],t,o,n)}return t}function uu(t,e){return nd(t,e,{merger:o8})}function o8(t,e,n){if(!e2(t))return;const s=e[t],r=n[t];it(s)&&it(r)?uu(s,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=hp(r))}const P_={"":t=>t,x:t=>t.x,y:t=>t.y};function a8(t){const e=t.split("."),n=[];let s="";for(const r of e)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function l8(t){const e=a8(t);return n=>{for(const s of e){if(s==="")break;n=n&&n[s]}return n}}function xa(t,e){return(P_[e]||(P_[e]=l8(e)))(t)}function L0(t){return t.charAt(0).toUpperCase()+t.slice(1)}const sd=t=>typeof t<"u",uo=t=>typeof t=="function",R_=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function c8(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Nt=Math.PI,tn=2*Nt,fp=Number.POSITIVE_INFINITY,u8=Nt/180,cn=Nt/2,To=Nt/4,A_=Nt*2/3,t2=Math.log10,no=Math.sign;function bf(t,e,n){return Math.abs(t-e)<n}function O_(t){const e=Math.round(t);t=bf(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(t2(t))),s=t/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function d8(t){const e=[],n=Math.sqrt(t);let s;for(s=1;s<n;s++)t%s===0&&(e.push(s),e.push(t/s));return n===(n|0)&&e.push(n),e.sort((r,i)=>r-i).pop(),e}function h8(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function pp(t){return!h8(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function f8(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function p8(t,e,n){let s,r,i;for(s=0,r=t.length;s<r;s++)i=t[s][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Zr(t){return t*(Nt/180)}function m8(t){return t*(180/Nt)}function M_(t){if(!Hs(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function n2(t,e){const n=e.x-t.x,s=e.y-t.y,r=Math.sqrt(n*n+s*s);let i=Math.atan2(s,n);return i<-.5*Nt&&(i+=tn),{angle:i,distance:r}}function g8(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function vr(t){return(t%tn+tn)%tn}function mp(t,e,n,s){const r=vr(t),i=vr(e),o=vr(n),a=vr(i-r),l=vr(o-r),u=vr(r-i),d=vr(r-o);return r===i||r===o||s&&i===o||a>l&&u<d}function ts(t,e,n){return Math.max(e,Math.min(n,t))}function x8(t){return ts(t,-32768,32767)}function Vo(t,e,n,s=1e-6){return t>=Math.min(e,n)-s&&t<=Math.max(e,n)+s}function $0(t,e,n){n=n||(o=>t[o]<e);let s=t.length-1,r=0,i;for(;s-r>1;)i=r+s>>1,n(i)?r=i:s=i;return{lo:r,hi:s}}const My=(t,e,n,s)=>$0(t,n,s?r=>{const i=t[r][e];return i<n||i===n&&t[r+1][e]===n}:r=>t[r][e]<n),y8=(t,e,n)=>$0(t,n,s=>t[s][e]>=n);function v8(t,e,n){let s=0,r=t.length;for(;s<r&&t[s]<e;)s++;for(;r>s&&t[r-1]>n;)r--;return s>0||r<t.length?t.slice(s,r):t}const s2=["push","pop","shift","splice","unshift"];function b8(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),s2.forEach(n=>{const s="_onData"+L0(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=r.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...i)}),o}})})}function I_(t,e){const n=t._chartjs;if(!n)return;const s=n.listeners,r=s.indexOf(e);r!==-1&&s.splice(r,1),!(s.length>0)&&(s2.forEach(i=>{delete t[i]}),delete t._chartjs)}function r2(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const i2=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function o2(t,e){let n=[],s=!1;return function(...r){n=r,s||(s=!0,i2.call(window,()=>{s=!1,t.apply(e,n)}))}}function w8(t,e){let n;return function(...s){return e?(clearTimeout(n),n=setTimeout(t,e,s)):t.apply(this,s),e}}const a2=t=>t==="start"?"left":t==="end"?"right":"center",hs=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,k8=(t,e,n,s)=>t===(s?"left":"right")?n:t==="center"?(e+n)/2:e,Fh=t=>t===0||t===1,D_=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*tn/n)),L_=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*tn/n)+1,du={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*cn)+1,easeOutSine:t=>Math.sin(t*cn),easeInOutSine:t=>-.5*(Math.cos(Nt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Fh(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Fh(t)?t:D_(t,.075,.3),easeOutElastic:t=>Fh(t)?t:L_(t,.075,.3),easeInOutElastic(t){return Fh(t)?t:t<.5?.5*D_(t*2,.1125,.45):.5+.5*L_(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-du.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?du.easeInBounce(t*2)*.5:du.easeOutBounce(t*2-1)*.5+.5};function l2(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function $_(t){return l2(t)?t:new td(t)}function Ng(t){return l2(t)?t:new td(t).saturate(.5).darken(.1).hexString()}const _8=["x","y","borderWidth","radius","tension"],S8=["color","borderColor","backgroundColor"];function j8(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:S8},numbers:{type:"number",properties:_8}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function C8(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const F_=new Map;function E8(t,e){e=e||{};const n=t+JSON.stringify(e);let s=F_.get(n);return s||(s=new Intl.NumberFormat(t,e),F_.set(n,s)),s}function F0(t,e,n){return E8(e,n).format(t)}const N8={values(t){return hn(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const s=this.chart.options.locale;let r,i=t;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(r="scientific"),i=T8(t,n)}const o=t2(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),F0(t,s,l)}};function T8(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var c2={formatters:N8};function P8(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:c2.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const ya=Object.create(null),Iy=Object.create(null);function hu(t,e){if(!e)return t;const n=e.split(".");for(let s=0,r=n.length;s<r;++s){const i=n[s];t=t[i]||(t[i]=Object.create(null))}return t}function Tg(t,e,n){return typeof e=="string"?nd(hu(t,e),n):nd(hu(t,""),e)}class R8{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,r)=>Ng(r.backgroundColor),this.hoverBorderColor=(s,r)=>Ng(r.borderColor),this.hoverColor=(s,r)=>Ng(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Tg(this,e,n)}get(e){return hu(this,e)}describe(e,n){return Tg(Iy,e,n)}override(e,n){return Tg(ya,e,n)}route(e,n,s,r){const i=hu(this,e),o=hu(this,s),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],u=o[r];return it(l)?Object.assign({},u,l):st(l,u)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Xt=new R8({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[j8,C8,P8]);function A8(t){return!t||bt(t.size)||bt(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function z_(t,e,n,s,r){let i=e[r];return i||(i=e[r]=t.measureText(r).width,n.push(r)),i>s&&(s=i),s}function Po(t,e,n){const s=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*s)/s+r}function B_(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function U_(t,e,n,s){u2(t,e,n,s,null)}function u2(t,e,n,s,r){let i,o,a,l,u,d,h,f;const p=e.pointStyle,w=e.rotation,x=e.radius;let y=(w||0)*u8;if(p&&typeof p=="object"&&(i=p.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,s),t.rotate(y),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(x)||x<=0)){switch(t.beginPath(),p){default:r?t.ellipse(n,s,r/2,x,0,0,tn):t.arc(n,s,x,0,tn),t.closePath();break;case"triangle":d=r?r/2:x,t.moveTo(n+Math.sin(y)*d,s-Math.cos(y)*x),y+=A_,t.lineTo(n+Math.sin(y)*d,s-Math.cos(y)*x),y+=A_,t.lineTo(n+Math.sin(y)*d,s-Math.cos(y)*x),t.closePath();break;case"rectRounded":u=x*.516,l=x-u,o=Math.cos(y+To)*l,h=Math.cos(y+To)*(r?r/2-u:l),a=Math.sin(y+To)*l,f=Math.sin(y+To)*(r?r/2-u:l),t.arc(n-h,s-a,u,y-Nt,y-cn),t.arc(n+f,s-o,u,y-cn,y),t.arc(n+h,s+a,u,y,y+cn),t.arc(n-f,s+o,u,y+cn,y+Nt),t.closePath();break;case"rect":if(!w){l=Math.SQRT1_2*x,d=r?r/2:l,t.rect(n-d,s-l,2*d,2*l);break}y+=To;case"rectRot":h=Math.cos(y)*(r?r/2:x),o=Math.cos(y)*x,a=Math.sin(y)*x,f=Math.sin(y)*(r?r/2:x),t.moveTo(n-h,s-a),t.lineTo(n+f,s-o),t.lineTo(n+h,s+a),t.lineTo(n-f,s+o),t.closePath();break;case"crossRot":y+=To;case"cross":h=Math.cos(y)*(r?r/2:x),o=Math.cos(y)*x,a=Math.sin(y)*x,f=Math.sin(y)*(r?r/2:x),t.moveTo(n-h,s-a),t.lineTo(n+h,s+a),t.moveTo(n+f,s-o),t.lineTo(n-f,s+o);break;case"star":h=Math.cos(y)*(r?r/2:x),o=Math.cos(y)*x,a=Math.sin(y)*x,f=Math.sin(y)*(r?r/2:x),t.moveTo(n-h,s-a),t.lineTo(n+h,s+a),t.moveTo(n+f,s-o),t.lineTo(n-f,s+o),y+=To,h=Math.cos(y)*(r?r/2:x),o=Math.cos(y)*x,a=Math.sin(y)*x,f=Math.sin(y)*(r?r/2:x),t.moveTo(n-h,s-a),t.lineTo(n+h,s+a),t.moveTo(n+f,s-o),t.lineTo(n-f,s+o);break;case"line":o=r?r/2:Math.cos(y)*x,a=Math.sin(y)*x,t.moveTo(n-o,s-a),t.lineTo(n+o,s+a);break;case"dash":t.moveTo(n,s),t.lineTo(n+Math.cos(y)*(r?r/2:x),s+Math.sin(y)*x);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function d2(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function z0(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function B0(t){t.restore()}function O8(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),bt(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function M8(t,e,n,s,r){if(r.strikethrough||r.underline){const i=t.measureText(s),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,u=n+i.actualBoundingBoxDescent,d=r.strikethrough?(l+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,d),t.lineTo(a,d),t.stroke()}}function I8(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function gp(t,e,n,s,r,i={}){const o=hn(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,u;for(t.save(),t.font=r.string,O8(t,i),l=0;l<o.length;++l)u=o[l],i.backdrop&&I8(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),bt(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(u,n,s,i.maxWidth)),t.fillText(u,n,s,i.maxWidth),M8(t,n,s,u,i),s+=Number(r.lineHeight);t.restore()}function xp(t,e){const{x:n,y:s,w:r,h:i,radius:o}=e;t.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*Nt,Nt,!0),t.lineTo(n,s+i-o.bottomLeft),t.arc(n+o.bottomLeft,s+i-o.bottomLeft,o.bottomLeft,Nt,cn,!0),t.lineTo(n+r-o.bottomRight,s+i),t.arc(n+r-o.bottomRight,s+i-o.bottomRight,o.bottomRight,cn,0,!0),t.lineTo(n+r,s+o.topRight),t.arc(n+r-o.topRight,s+o.topRight,o.topRight,0,-cn,!0),t.lineTo(n+o.topLeft,s)}const D8=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,L8=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function $8(t,e){const n=(""+t).match(D8);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const F8=t=>+t||0;function U0(t,e){const n={},s=it(e),r=s?Object.keys(e):e,i=it(t)?s?o=>st(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=F8(i(o));return n}function h2(t){return U0(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Cl(t){return U0(t,["topLeft","topRight","bottomLeft","bottomRight"])}function cr(t){const e=h2(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function ns(t,e){t=t||{},e=e||Xt.font;let n=st(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let s=st(t.style,e.style);s&&!(""+s).match(L8)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:st(t.family,e.family),lineHeight:$8(st(t.lineHeight,e.lineHeight),n),size:n,style:s,weight:st(t.weight,e.weight),string:""};return r.string=A8(r),r}function zh(t,e,n,s){let r,i,o;for(r=0,i=t.length;r<i;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function z8(t,e,n){const{min:s,max:r}=t,i=ZT(e,(r-s)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(s,-Math.abs(i)),max:o(r,i)}}function hc(t,e){return Object.assign(Object.create(t),e)}function H0(t,e=[""],n,s,r=()=>t[0]){const i=n||t;typeof s>"u"&&(s=g2("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:s,_getTarget:r,override:a=>H0([a,...t],e,i,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return p2(a,l,()=>G8(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return W_(a).includes(l)},ownKeys(a){return W_(a)},set(a,l,u){const d=a._storage||(a._storage=r());return a[l]=d[l]=u,delete a._keys,!0}})}function Jl(t,e,n,s){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:f2(t,s),setContext:i=>Jl(t,i,n,s),override:i=>Jl(t.override(i),e,n,s)};return new Proxy(r,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return p2(i,o,()=>U8(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function f2(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:s=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:s,isScriptable:uo(n)?n:()=>n,isIndexable:uo(s)?s:()=>s}}const B8=(t,e)=>t?t+L0(e):e,W0=(t,e)=>it(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function p2(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const s=n();return t[e]=s,s}function U8(t,e,n){const{_proxy:s,_context:r,_subProxy:i,_descriptors:o}=t;let a=s[e];return uo(a)&&o.isScriptable(e)&&(a=H8(e,a,t,n)),hn(a)&&a.length&&(a=W8(e,a,t,o.isIndexable)),W0(e,a)&&(a=Jl(a,r,i&&i[e],o)),a}function H8(t,e,n,s){const{_proxy:r,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||s);return a.delete(t),W0(t,l)&&(l=V0(r._scopes,r,t,l)),l}function W8(t,e,n,s){const{_proxy:r,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&s(t))return e[i.index%e.length];if(it(e[0])){const l=e,u=r._scopes.filter(d=>d!==l);e=[];for(const d of l){const h=V0(u,r,t,d);e.push(Jl(h,i,o&&o[t],a))}}return e}function m2(t,e,n){return uo(t)?t(e,n):t}const V8=(t,e)=>t===!0?e:typeof t=="string"?xa(e,t):void 0;function q8(t,e,n,s,r){for(const i of e){const o=V8(n,i);if(o){t.add(o);const a=m2(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==s)return a}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function V0(t,e,n,s){const r=e._rootScopes,i=m2(e._fallback,n,s),o=[...t,...r],a=new Set;a.add(s);let l=H_(a,o,n,i||n,s);return l===null||typeof i<"u"&&i!==n&&(l=H_(a,o,i,l,s),l===null)?!1:H0(Array.from(a),[""],r,i,()=>K8(e,n,s))}function H_(t,e,n,s,r){for(;n;)n=q8(t,e,n,s,r);return n}function K8(t,e,n){const s=t._getTarget();e in s||(s[e]={});const r=s[e];return hn(r)&&it(n)?n:r||{}}function G8(t,e,n,s){let r;for(const i of e)if(r=g2(B8(i,t),n),typeof r<"u")return W0(t,r)?V0(n,s,t,r):r}function g2(t,e){for(const n of e){if(!n)continue;const s=n[t];if(typeof s<"u")return s}}function W_(t){let e=t._keys;return e||(e=t._keys=Y8(t._scopes)),e}function Y8(t){const e=new Set;for(const n of t)for(const s of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(s);return Array.from(e)}function q0(){return typeof window<"u"&&typeof document<"u"}function K0(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function yp(t,e,n){let s;return typeof t=="string"?(s=parseInt(t,10),t.indexOf("%")!==-1&&(s=s/100*e.parentNode[n])):s=t,s}const rm=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Q8(t,e){return rm(t).getPropertyValue(e)}const X8=["top","right","bottom","left"];function oa(t,e,n){const s={};n=n?"-"+n:"";for(let r=0;r<4;r++){const i=X8[r];s[i]=parseFloat(t[e+"-"+i+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const J8=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function Z8(t,e){const n=t.touches,s=n&&n.length?n[0]:t,{offsetX:r,offsetY:i}=s;let o=!1,a,l;if(J8(r,i,t.target))a=r,l=i;else{const u=e.getBoundingClientRect();a=s.clientX-u.left,l=s.clientY-u.top,o=!0}return{x:a,y:l,box:o}}function Do(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:s}=e,r=rm(n),i=r.boxSizing==="border-box",o=oa(r,"padding"),a=oa(r,"border","width"),{x:l,y:u,box:d}=Z8(t,n),h=o.left+(d&&a.left),f=o.top+(d&&a.top);let{width:p,height:w}=e;return i&&(p-=o.width+a.width,w-=o.height+a.height),{x:Math.round((l-h)/p*n.width/s),y:Math.round((u-f)/w*n.height/s)}}function eW(t,e,n){let s,r;if(e===void 0||n===void 0){const i=t&&K0(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=rm(i),l=oa(a,"border","width"),u=oa(a,"padding");e=o.width-u.width-l.width,n=o.height-u.height-l.height,s=yp(a.maxWidth,i,"clientWidth"),r=yp(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:s||fp,maxHeight:r||fp}}const Bi=t=>Math.round(t*10)/10;function tW(t,e,n,s){const r=rm(t),i=oa(r,"margin"),o=yp(r.maxWidth,t,"clientWidth")||fp,a=yp(r.maxHeight,t,"clientHeight")||fp,l=eW(t,e,n);let{width:u,height:d}=l;if(r.boxSizing==="content-box"){const f=oa(r,"border","width"),p=oa(r,"padding");u-=p.width+f.width,d-=p.height+f.height}return u=Math.max(0,u-i.width),d=Math.max(0,s?u/s:d-i.height),u=Bi(Math.min(u,o,l.maxWidth)),d=Bi(Math.min(d,a,l.maxHeight)),u&&!d&&(d=Bi(u/2)),(e!==void 0||n!==void 0)&&s&&l.height&&d>l.height&&(d=l.height,u=Bi(Math.floor(d*s))),{width:u,height:d}}function V_(t,e,n){const s=e||1,r=Bi(t.height*s),i=Bi(t.width*s);t.height=Bi(t.height),t.width=Bi(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==s||o.height!==r||o.width!==i?(t.currentDevicePixelRatio=s,o.height=r,o.width=i,t.ctx.setTransform(s,0,0,s,0,0),!0):!1}const nW=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};q0()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function q_(t,e){const n=Q8(t,e),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}const sW=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},rW=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function El(t,e,n){return t?sW(e,n):rW()}function x2(t,e){let n,s;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=s)}function y2(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Bh(t,e,n){return t.options.clip?t[n]:e[n]}function iW(t,e){const{xScale:n,yScale:s}=t;return n&&s?{left:Bh(n,e,"left"),right:Bh(n,e,"right"),top:Bh(s,e,"top"),bottom:Bh(s,e,"bottom")}:e}function oW(t,e){const n=e._clip;if(n.disabled)return!1;const s=iW(e,t.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class aW{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,s,r){const i=n.listeners[r],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=i2.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const i=s.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(r.draw(),this._notify(r,s,e,"progress")),i.length||(s.running=!1,this._notify(r,s,e,"complete"),s.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let s=n.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,s)),s}listen(e,n,s){this._getAnims(e).listeners[n].push(s)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const s=n.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var zr=new aW;const K_="transparent",lW={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const s=$_(t||K_),r=s.valid&&$_(e||K_);return r&&r.valid?r.mix(s,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class cW{constructor(e,n,s,r){const i=n[s];r=zh([e.to,r,i,e.from]);const o=zh([e.from,i,r]);this._active=!0,this._fn=e.fn||lW[e.type||typeof o],this._easing=du[e.easing]||du.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=s,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,s){if(this._active){this._notify(!1);const r=this._target[this._prop],i=s-this._start,o=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=zh([e.to,n,r,e.from]),this._from=zh([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,s=this._duration,r=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<s),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=i;return}l=n/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,s)=>{e.push({res:n,rej:s})})}_notify(e){const n=e?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][n]()}}class v2{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!it(e))return;const n=Object.keys(Xt.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const i=e[r];if(!it(i))return;const o={};for(const a of n)o[a]=i[a];(hn(i.properties)&&i.properties||[r]).forEach(a=>{(a===r||!s.has(a))&&s.set(a,o)})})}_animateOptions(e,n){const s=n.options,r=dW(e,s);if(!r)return[];const i=this._createAnimations(r,s);return s.$shared&&uW(e.options.$animations,s).then(()=>{e.options=s},()=>{}),i}_createAnimations(e,n){const s=this._properties,r=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const u=o[l];if(u.charAt(0)==="$")continue;if(u==="options"){r.push(...this._animateOptions(e,n));continue}const d=n[u];let h=i[u];const f=s.get(u);if(h)if(f&&h.active()){h.update(f,d,a);continue}else h.cancel();if(!f||!f.duration){e[u]=d;continue}i[u]=h=new cW(f,e,u,d),r.push(h)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const s=this._createAnimations(e,n);if(s.length)return zr.add(this._chart,s),!0}}function uW(t,e){const n=[],s=Object.keys(e);for(let r=0;r<s.length;r++){const i=t[s[r]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function dW(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function G_(t,e){const n=t&&t.options||{},s=n.reverse,r=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:s?i:r,end:s?r:i}}function hW(t,e,n){if(n===!1)return!1;const s=G_(t,n),r=G_(e,n);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}function fW(t){let e,n,s,r;return it(t)?(e=t.top,n=t.right,s=t.bottom,r=t.left):e=n=s=r=t,{top:e,right:n,bottom:s,left:r,disabled:t===!1}}function b2(t,e){const n=[],s=t._getSortedDatasetMetas(e);let r,i;for(r=0,i=s.length;r<i;++r)n.push(s[r].index);return n}function Y_(t,e,n,s={}){const r=t.keys,i=s.mode==="single";let o,a,l,u;if(e===null)return;let d=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(d=!0,s.all)continue;break}u=t.values[l],Hs(u)&&(i||e===0||no(e)===no(u))&&(e+=u)}return!d&&!s.all?0:e}function pW(t,e){const{iScale:n,vScale:s}=e,r=n.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,u,d;for(l=0,u=o.length;l<u;++l)d=o[l],a[l]={[r]:d,[i]:t[d]};return a}function Pg(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function mW(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function gW(t){const{min:e,max:n,minDefined:s,maxDefined:r}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function xW(t,e,n){const s=t[e]||(t[e]={});return s[n]||(s[n]={})}function Q_(t,e,n,s){for(const r of e.getMatchingVisibleMetas(s).reverse()){const i=t[r.index];if(n&&i>0||!n&&i<0)return r.index}return null}function X_(t,e){const{chart:n,_cachedMeta:s}=t,r=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=s,l=i.axis,u=o.axis,d=mW(i,o,s),h=e.length;let f;for(let p=0;p<h;++p){const w=e[p],{[l]:x,[u]:y}=w,g=w._stacks||(w._stacks={});f=g[u]=xW(r,d,x),f[a]=y,f._top=Q_(f,o,!0,s.type),f._bottom=Q_(f,o,!1,s.type);const m=f._visualValues||(f._visualValues={});m[a]=y}}function Rg(t,e){const n=t.scales;return Object.keys(n).filter(s=>n[s].axis===e).shift()}function yW(t,e){return hc(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function vW(t,e,n){return hc(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Ac(t,e){const n=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const r of e){const i=r._stacks;if(!i||i[s]===void 0||i[s][n]===void 0)return;delete i[s][n],i[s]._visualValues!==void 0&&i[s]._visualValues[n]!==void 0&&delete i[s]._visualValues[n]}}}const Ag=t=>t==="reset"||t==="none",J_=(t,e)=>e?t:Object.assign({},t),bW=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:b2(n,!0),values:null};class Nl{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Pg(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Ac(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,s=this.getDataset(),r=(h,f,p,w)=>h==="x"?f:h==="r"?w:p,i=n.xAxisID=st(s.xAxisID,Rg(e,"x")),o=n.yAxisID=st(s.yAxisID,Rg(e,"y")),a=n.rAxisID=st(s.rAxisID,Rg(e,"r")),l=n.indexAxis,u=n.iAxisID=r(l,i,o,a),d=n.vAxisID=r(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&I_(this._data,this),e._stacked&&Ac(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),s=this._data;if(it(n)){const r=this._cachedMeta;this._data=pW(n,r)}else if(s!==n){if(s){I_(s,this);const r=this._cachedMeta;Ac(r),r._parsed=[]}n&&Object.isExtensible(n)&&b8(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const i=n._stacked;n._stacked=Pg(n.vScale,n),n.stack!==s.stack&&(r=!0,Ac(n),n.stack=s.stack),this._resyncElements(e),(r||i!==n._stacked)&&(X_(this,n._parsed),n._stacked=Pg(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:s,_data:r}=this,{iScale:i,_stacked:o}=s,a=i.axis;let l=e===0&&n===r.length?!0:s._sorted,u=e>0&&s._parsed[e-1],d,h,f;if(this._parsing===!1)s._parsed=r,s._sorted=!0,f=r;else{hn(r[e])?f=this.parseArrayData(s,r,e,n):it(r[e])?f=this.parseObjectData(s,r,e,n):f=this.parsePrimitiveData(s,r,e,n);const p=()=>h[a]===null||u&&h[a]<u[a];for(d=0;d<n;++d)s._parsed[d+e]=h=f[d],l&&(p()&&(l=!1),u=h);s._sorted=l}o&&X_(this,f)}parsePrimitiveData(e,n,s,r){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,u=i.getLabels(),d=i===o,h=new Array(r);let f,p,w;for(f=0,p=r;f<p;++f)w=f+s,h[f]={[a]:d||i.parse(u[w],w),[l]:o.parse(n[w],w)};return h}parseArrayData(e,n,s,r){const{xScale:i,yScale:o}=e,a=new Array(r);let l,u,d,h;for(l=0,u=r;l<u;++l)d=l+s,h=n[d],a[l]={x:i.parse(h[0],d),y:o.parse(h[1],d)};return a}parseObjectData(e,n,s,r){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=new Array(r);let d,h,f,p;for(d=0,h=r;d<h;++d)f=d+s,p=n[f],u[d]={x:i.parse(xa(p,a),f),y:o.parse(xa(p,l),f)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,s){const r=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:b2(r,!0),values:n._stacks[e.axis]._visualValues};return Y_(a,o,i.index,{mode:s})}updateRangeFromParsed(e,n,s,r){const i=s[n.axis];let o=i===null?NaN:i;const a=r&&s._stacks[n.axis];r&&a&&(r.values=a,o=Y_(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const s=this._cachedMeta,r=s._parsed,i=s._sorted&&e===s.iScale,o=r.length,a=this._getOtherScale(e),l=bW(n,s,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=gW(a);let f,p;function w(){p=r[f];const x=p[a.axis];return!Hs(p[e.axis])||d>x||h<x}for(f=0;f<o&&!(!w()&&(this.updateRangeFromParsed(u,e,p,l),i));++f);if(i){for(f=o-1;f>=0;--f)if(!w()){this.updateRangeFromParsed(u,e,p,l);break}}return u}getAllParsedValues(e){const n=this._cachedMeta._parsed,s=[];let r,i,o;for(r=0,i=n.length;r<i;++r)o=n[r][e.axis],Hs(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,s=n.iScale,r=n.vScale,i=this.getParsed(e);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=fW(st(this.options.clip,hW(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,s=this._cachedMeta,r=s.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,u=this.options.drawActiveElementsOnTop;let d;for(s.dataset&&s.dataset.draw(e,i,a,l),d=a;d<a+l;++d){const h=r[d];h.hidden||(h.active&&u?o.push(h):h.draw(e,i))}for(d=0;d<o.length;++d)o[d].draw(e,i)}getStyle(e,n){const s=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,n,s){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=vW(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=yW(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=s,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",s){const r=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&sd(s);if(a)return J_(a,l);const u=this.chart.config,d=u.datasetElementScopeKeys(this._type,e),h=r?[`${e}Hover`,"hover",e,""]:[e,""],f=u.getOptionScopes(this.getDataset(),d),p=Object.keys(Xt.elements[e]),w=()=>this.getContext(s,r,n),x=u.resolveNamedOptions(f,p,w,h);return x.$shared&&(x.$shared=l,i[o]=Object.freeze(J_(x,l))),x}_resolveAnimations(e,n,s){const r=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(r.options.animation!==!1){const d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,n),f=d.getOptionScopes(this.getDataset(),h);l=d.createResolver(f,this.getContext(e,s,n))}const u=new v2(r,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Ag(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const s=this.resolveDataElementOptions(e,n),r=this._sharedOptions,i=this.getSharedOptions(s),o=this.includeOptions(n,i)||i!==r;return this.updateSharedOptions(i,n,s),{sharedOptions:i,includeOptions:o}}updateElement(e,n,s,r){Ag(r)?Object.assign(e,s):this._resolveAnimations(n,r).update(e,s)}updateSharedOptions(e,n,s){e&&!Ag(n)&&this._resolveAnimations(void 0,n).update(e,s)}_setStyle(e,n,s,r){e.active=r;const i=this.getStyle(n,r);this._resolveAnimations(n,s,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,n,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,s=this._cachedMeta.data;for(const[a,l,u]of this._syncList)this[a](l,u);this._syncList=[];const r=s.length,i=n.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,n,s=!0){const r=this._cachedMeta,i=r.data,o=e+n;let a;const l=u=>{for(u.length+=n,a=u.length-1;a>=o;a--)u[a]=u[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),s&&this.updateElements(i,e,n,"reset")}updateElements(e,n,s,r){}_removeElements(e,n){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(e,n);s._stacked&&Ac(s,r)}s.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,s,r]=e;this[n](s,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}$e(Nl,"defaults",{}),$e(Nl,"datasetElementType",null),$e(Nl,"dataElementType",null);function wW(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let s=[];for(let r=0,i=n.length;r<i;r++)s=s.concat(n[r].controller.getAllParsedValues(t));t._cache.$bar=r2(s.sort((r,i)=>r-i))}return t._cache.$bar}function kW(t){const e=t.iScale,n=wW(e,t.type);let s=e._length,r,i,o,a;const l=()=>{o===32767||o===-32768||(sd(a)&&(s=Math.min(s,Math.abs(o-a)||s)),a=o)};for(r=0,i=n.length;r<i;++r)o=e.getPixelForValue(n[r]),l();for(a=void 0,r=0,i=e.ticks.length;r<i;++r)o=e.getPixelForTick(r),l();return s}function _W(t,e,n,s){const r=n.barThickness;let i,o;return bt(r)?(i=e.min*n.categoryPercentage,o=n.barPercentage):(i=r*s,o=1),{chunk:i/s,ratio:o,start:e.pixels[t]-i/2}}function SW(t,e,n,s){const r=e.pixels,i=r[t];let o=t>0?r[t-1]:null,a=t<r.length-1?r[t+1]:null;const l=n.categoryPercentage;o===null&&(o=i-(a===null?e.end-e.start:a-i)),a===null&&(a=i+i-o);const u=i-(i-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/s,ratio:n.barPercentage,start:u}}function jW(t,e,n,s){const r=n.parse(t[0],s),i=n.parse(t[1],s),o=Math.min(r,i),a=Math.max(r,i);let l=o,u=a;Math.abs(o)>Math.abs(a)&&(l=a,u=o),e[n.axis]=u,e._custom={barStart:l,barEnd:u,start:r,end:i,min:o,max:a}}function w2(t,e,n,s){return hn(t)?jW(t,e,n,s):e[n.axis]=n.parse(t,s),e}function Z_(t,e,n,s){const r=t.iScale,i=t.vScale,o=r.getLabels(),a=r===i,l=[];let u,d,h,f;for(u=n,d=n+s;u<d;++u)f=e[u],h={},h[r.axis]=a||r.parse(o[u],u),l.push(w2(f,h,i,u));return l}function Og(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function CW(t,e,n){return t!==0?no(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function EW(t){let e,n,s,r,i;return t.horizontal?(e=t.base>t.x,n="left",s="right"):(e=t.base<t.y,n="bottom",s="top"),e?(r="end",i="start"):(r="start",i="end"),{start:n,end:s,reverse:e,top:r,bottom:i}}function NW(t,e,n,s){let r=e.borderSkipped;const i={};if(!r){t.borderSkipped=i;return}if(r===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:u,bottom:d}=EW(t);r==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===s?r=u:(n._bottom||0)===s?r=d:(i[eS(d,o,a,l)]=!0,r=u)),i[eS(r,o,a,l)]=!0,t.borderSkipped=i}function eS(t,e,n,s){return s?(t=TW(t,e,n),t=tS(t,n,e)):t=tS(t,e,n),t}function TW(t,e,n){return t===e?n:t===n?e:t}function tS(t,e,n){return t==="start"?e:t==="end"?n:t}function PW(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class wf extends Nl{parsePrimitiveData(e,n,s,r){return Z_(e,n,s,r)}parseArrayData(e,n,s,r){return Z_(e,n,s,r)}parseObjectData(e,n,s,r){const{iScale:i,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=i.axis==="x"?a:l,d=o.axis==="x"?a:l,h=[];let f,p,w,x;for(f=s,p=s+r;f<p;++f)x=n[f],w={},w[i.axis]=i.parse(xa(x,u),f),h.push(w2(xa(x,d),w,o,f));return h}updateRangeFromParsed(e,n,s,r){super.updateRangeFromParsed(e,n,s,r);const i=s._custom;i&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:s,vScale:r}=n,i=this.getParsed(e),o=i._custom,a=Og(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+s.getLabelForValue(i[s.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,s,r){const i=r==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),u=a.isHorizontal(),d=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(n,r);for(let p=n;p<n+s;p++){const w=this.getParsed(p),x=i||bt(w[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),y=this._calculateBarIndexPixels(p,d),g=(w._stacks||{})[a.axis],m={horizontal:u,base:x.base,enableBorderRadius:!g||Og(w._custom)||o===g._top||o===g._bottom,x:u?x.head:y.center,y:u?y.center:x.head,height:u?y.size:Math.abs(x.size),width:u?Math.abs(x.size):y.size};f&&(m.options=h||this.resolveDataElementOptions(p,e[p].active?"active":r));const b=m.options||e[p].options;NW(m,b,g,o),PW(m,b,d.ratio),this.updateElement(e[p],p,m,r)}}_getStacks(e,n){const{iScale:s}=this._cachedMeta,r=s.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),i=s.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[s.axis],u=d=>{const h=d._parsed.find(p=>p[s.axis]===l),f=h&&h[d.vScale.axis];if(bt(f)||isNaN(f))return!0};for(const d of r)if(!(n!==void 0&&u(d))&&((i===!1||o.indexOf(d.stack)===-1||i===void 0&&d.stack===void 0)&&o.push(d.stack),d.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(s=>e[s].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)e[st(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,s){const r=this._getStacks(e,s),i=n!==void 0?r.indexOf(n):-1;return i===-1?r.length-1:i}_getRuler(){const e=this.options,n=this._cachedMeta,s=n.iScale,r=[];let i,o;for(i=0,o=n.data.length;i<o;++i)r.push(s.getPixelForValue(this.getParsed(i)[s.axis],i));const a=e.barThickness;return{min:a||kW(n),pixels:r,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:s,index:r},options:{base:i,minBarLength:o}}=this,a=i||0,l=this.getParsed(e),u=l._custom,d=Og(u);let h=l[n.axis],f=0,p=s?this.applyStack(n,l,s):h,w,x;p!==h&&(f=p-h,p=h),d&&(h=u.barStart,p=u.barEnd-u.barStart,h!==0&&no(h)!==no(u.barEnd)&&(f=0),f+=h);const y=!bt(i)&&!d?i:f;let g=n.getPixelForValue(y);if(this.chart.getDataVisibility(e)?w=n.getPixelForValue(f+p):w=g,x=w-g,Math.abs(x)<o){x=CW(x,n,a)*o,h===a&&(g-=x/2);const m=n.getPixelForDecimal(0),b=n.getPixelForDecimal(1),k=Math.min(m,b),_=Math.max(m,b);g=Math.max(Math.min(g,_),k),w=g+x,s&&!d&&(l._stacks[n.axis]._visualValues[r]=n.getValueForPixel(w)-n.getValueForPixel(g))}if(g===n.getPixelForValue(a)){const m=no(x)*n.getLineWidthForValue(a)/2;g+=m,x-=m}return{size:x,base:g,head:w,center:w+x/2}}_calculateBarIndexPixels(e,n){const s=n.scale,r=this.options,i=r.skipNull,o=st(r.maxBarThickness,1/0);let a,l;const u=this._getAxisCount();if(n.grouped){const d=i?this._getStackCount(e):n.stackCount,h=r.barThickness==="flex"?SW(e,n,r,d*u):_W(e,n,r,d*u),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,p=this._getAxis().indexOf(st(f,this.getFirstScaleIdForIndexAxis())),w=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+p;a=h.start+h.chunk*w+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=s.getPixelForValue(this.getParsed(e)[s.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,s=e.data,r=s.length;let i=0;for(;i<r;++i)this.getParsed(i)[n.axis]!==null&&!s[i].hidden&&s[i].draw(this._ctx)}}$e(wf,"id","bar"),$e(wf,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),$e(wf,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function RW(t,e,n){let s=1,r=1,i=0,o=0;if(e<tn){const a=t,l=a+e,u=Math.cos(a),d=Math.sin(a),h=Math.cos(l),f=Math.sin(l),p=(b,k,_)=>mp(b,a,l,!0)?1:Math.max(k,k*n,_,_*n),w=(b,k,_)=>mp(b,a,l,!0)?-1:Math.min(k,k*n,_,_*n),x=p(0,u,h),y=p(cn,d,f),g=w(Nt,u,h),m=w(Nt+cn,d,f);s=(x-g)/2,r=(y-m)/2,i=-(x+g)/2,o=-(y+m)/2}return{ratioX:s,ratioY:r,offsetX:i,offsetY:o}}class hl extends Nl{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let i=l=>+s[l];if(it(s[e])){const{key:l="value"}=this._parsing;i=u=>+xa(s[u],l)}let o,a;for(o=e,a=e+n;o<a;++o)r._parsed[o]=i(o)}}_getRotation(){return Zr(this.options.rotation-90)}_getCircumference(){return Zr(this.options.circumference)}_getRotationExtents(){let e=tn,n=-tn;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const r=this.chart.getDatasetMeta(s).controller,i=r._getRotation(),o=r._getCircumference();e=Math.min(e,i),n=Math.max(n,i+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:s}=n,r=this._cachedMeta,i=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),l=Math.min(r8(this.options.cutout,a),1),u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:w,offsetY:x}=RW(h,d,l),y=(s.width-o)/f,g=(s.height-o)/p,m=Math.max(Math.min(y,g)/2,0),b=ZT(this.options.radius,m),k=Math.max(b*l,0),_=(b-k)/this._getVisibleDatasetWeightTotal();this.offsetX=w*b,this.offsetY=x*b,r.total=this.calculateTotal(),this.outerRadius=b-_*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-_*u,0),this.updateElements(i,0,i.length,e)}_circumference(e,n){const s=this.options,r=this._cachedMeta,i=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/tn)}updateElements(e,n,s,r){const i=r==="reset",o=this.chart,a=o.chartArea,u=o.options.animation,d=(a.left+a.right)/2,h=(a.top+a.bottom)/2,f=i&&u.animateScale,p=f?0:this.innerRadius,w=f?0:this.outerRadius,{sharedOptions:x,includeOptions:y}=this._getSharedOptions(n,r);let g=this._getRotation(),m;for(m=0;m<n;++m)g+=this._circumference(m,i);for(m=n;m<n+s;++m){const b=this._circumference(m,i),k=e[m],_={x:d+this.offsetX,y:h+this.offsetY,startAngle:g,endAngle:g+b,circumference:b,outerRadius:w,innerRadius:p};y&&(_.options=x||this.resolveDataElementOptions(m,k.active?"active":r)),g+=b,this.updateElement(k,m,_,r)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let s=0,r;for(r=0;r<n.length;r++){const i=e._parsed[r];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(s+=Math.abs(i))}return s}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?tn*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart,r=s.data.labels||[],i=F0(n._parsed[e],s.options.locale);return{label:r[e]||"",value:i}}getMaxBorderWidth(e){let n=0;const s=this.chart;let r,i,o,a,l;if(!e){for(r=0,i=s.data.datasets.length;r<i;++r)if(s.isDatasetVisible(r)){o=s.getDatasetMeta(r),e=o.data,a=o.controller;break}}if(!e)return 0;for(r=0,i=e.length;r<i;++r)l=a.resolveDataElementOptions(r),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let s=0,r=e.length;s<r;++s){const i=this.resolveDataElementOptions(s);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(e){return Math.max(st(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}$e(hl,"id","doughnut"),$e(hl,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),$e(hl,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),$e(hl,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:a}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((l,u)=>{const h=e.getDatasetMeta(0).controller.getStyle(u);return{text:l,fillStyle:h.backgroundColor,fontColor:i,hidden:!e.getDataVisibility(u),lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:h.borderWidth,strokeStyle:h.borderColor,textAlign:r,pointStyle:s,borderRadius:o&&(a||h.borderRadius),index:u}}):[]}},onClick(e,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}});class Dy extends hl{}$e(Dy,"id","pie"),$e(Dy,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});function Ro(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class G0{constructor(e){$e(this,"options");this.options=e||{}}static override(e){Object.assign(G0.prototype,e)}init(){}formats(){return Ro()}parse(){return Ro()}format(){return Ro()}add(){return Ro()}diff(){return Ro()}startOf(){return Ro()}endOf(){return Ro()}}var AW={_date:G0};function OW(t,e,n,s){const{controller:r,data:i,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const u=a._reversePixels?y8:My;if(s){if(r._sharedOptions){const d=i[0],h=typeof d.getRange=="function"&&d.getRange(e);if(h){const f=u(i,e,n-h),p=u(i,e,n+h);return{lo:f.lo,hi:p.hi}}}}else{const d=u(i,e,n);if(l){const{vScale:h}=r._cachedMeta,{_parsed:f}=t,p=f.slice(0,d.lo+1).reverse().findIndex(x=>!bt(x[h.axis]));d.lo-=Math.max(0,p);const w=f.slice(d.hi).findIndex(x=>!bt(x[h.axis]));d.hi+=Math.max(0,w)}return d}}return{lo:0,hi:i.length-1}}function im(t,e,n,s,r){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:u,data:d}=i[a],{lo:h,hi:f}=OW(i[a],e,o,r);for(let p=h;p<=f;++p){const w=d[p];w.skip||s(w,u,p)}}}function MW(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(s,r){const i=e?Math.abs(s.x-r.x):0,o=n?Math.abs(s.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Mg(t,e,n,s,r){const i=[];return!r&&!t.isPointInArea(e)||im(t,n,e,function(a,l,u){!r&&!d2(a,t.chartArea,0)||a.inRange(e.x,e.y,s)&&i.push({element:a,datasetIndex:l,index:u})},!0),i}function IW(t,e,n,s){let r=[];function i(o,a,l){const{startAngle:u,endAngle:d}=o.getProps(["startAngle","endAngle"],s),{angle:h}=n2(o,{x:e.x,y:e.y});mp(h,u,d)&&r.push({element:o,datasetIndex:a,index:l})}return im(t,n,e,i),r}function DW(t,e,n,s,r,i){let o=[];const a=MW(n);let l=Number.POSITIVE_INFINITY;function u(d,h,f){const p=d.inRange(e.x,e.y,r);if(s&&!p)return;const w=d.getCenterPoint(r);if(!(!!i||t.isPointInArea(w))&&!p)return;const y=a(e,w);y<l?(o=[{element:d,datasetIndex:h,index:f}],l=y):y===l&&o.push({element:d,datasetIndex:h,index:f})}return im(t,n,e,u),o}function Ig(t,e,n,s,r,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!s?IW(t,e,n,r):DW(t,e,n,s,r,i)}function nS(t,e,n,s,r){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return im(t,n,e,(l,u,d)=>{l[o]&&l[o](e[n],r)&&(i.push({element:l,datasetIndex:u,index:d}),a=a||l.inRange(e.x,e.y,r))}),s&&!a?[]:i}var LW={modes:{index(t,e,n,s){const r=Do(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Mg(t,r,i,s,o):Ig(t,r,i,!1,s,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(u=>{const d=a[0].index,h=u.data[d];h&&!h.skip&&l.push({element:h,datasetIndex:u.index,index:d})}),l):[]},dataset(t,e,n,s){const r=Do(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Mg(t,r,i,s,o):Ig(t,r,i,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,u=t.getDatasetMeta(l).data;a=[];for(let d=0;d<u.length;++d)a.push({element:u[d],datasetIndex:l,index:d})}return a},point(t,e,n,s){const r=Do(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Mg(t,r,i,s,o)},nearest(t,e,n,s){const r=Do(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Ig(t,r,i,n.intersect,s,o)},x(t,e,n,s){const r=Do(e,t);return nS(t,r,"x",n.intersect,s)},y(t,e,n,s){const r=Do(e,t);return nS(t,r,"y",n.intersect,s)}}};const k2=["left","top","right","bottom"];function Oc(t,e){return t.filter(n=>n.pos===e)}function sS(t,e){return t.filter(n=>k2.indexOf(n.pos)===-1&&n.box.axis===e)}function Mc(t,e){return t.sort((n,s)=>{const r=e?s:n,i=e?n:s;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function $W(t){const e=[];let n,s,r,i,o,a;for(n=0,s=(t||[]).length;n<s;++n)r=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&i+o,stackWeight:a});return e}function FW(t){const e={};for(const n of t){const{stack:s,pos:r,stackWeight:i}=n;if(!s||!k2.includes(r))continue;const o=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function zW(t,e){const n=FW(t),{vBoxMaxWidth:s,hBoxMaxHeight:r}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,u=n[a.stack],d=u&&a.stackWeight/u.weight;a.horizontal?(a.width=d?d*s:l&&e.availableWidth,a.height=r):(a.width=s,a.height=d?d*r:l&&e.availableHeight)}return n}function BW(t){const e=$W(t),n=Mc(e.filter(u=>u.box.fullSize),!0),s=Mc(Oc(e,"left"),!0),r=Mc(Oc(e,"right")),i=Mc(Oc(e,"top"),!0),o=Mc(Oc(e,"bottom")),a=sS(e,"x"),l=sS(e,"y");return{fullSize:n,leftAndTop:s.concat(i),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:Oc(e,"chartArea"),vertical:s.concat(r).concat(l),horizontal:i.concat(o).concat(a)}}function rS(t,e,n,s){return Math.max(t[n],e[n])+Math.max(t[s],e[s])}function _2(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function UW(t,e,n,s){const{pos:r,box:i}=n,o=t.maxPadding;if(!it(r)){n.size&&(t[r]-=n.size);const h=s[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?i.height:i.width),n.size=h.size/h.count,t[r]+=n.size}i.getPadding&&_2(o,i.getPadding());const a=Math.max(0,e.outerWidth-rS(o,t,"left","right")),l=Math.max(0,e.outerHeight-rS(o,t,"top","bottom")),u=a!==t.w,d=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:u,other:d}:{same:d,other:u}}function HW(t){const e=t.maxPadding;function n(s){const r=Math.max(e[s]-t[s],0);return t[s]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function WW(t,e){const n=e.maxPadding;function s(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return s(t?["left","right"]:["top","bottom"])}function Gc(t,e,n,s){const r=[];let i,o,a,l,u,d;for(i=0,o=t.length,u=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,WW(a.horizontal,e));const{same:h,other:f}=UW(e,n,a,s);u|=h&&r.length,d=d||f,l.fullSize||r.push(a)}return u&&Gc(r,e,n,s)||d}function Uh(t,e,n,s,r){t.top=n,t.left=e,t.right=e+s,t.bottom=n+r,t.width=s,t.height=r}function iS(t,e,n,s){const r=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,u=s[a.stack]||{placed:0,weight:1},d=a.stackWeight/u.weight||1;if(a.horizontal){const h=e.w*d,f=u.size||l.height;sd(u.start)&&(o=u.start),l.fullSize?Uh(l,r.left,o,n.outerWidth-r.right-r.left,f):Uh(l,e.left+u.placed,o,h,f),u.start=o,u.placed+=h,o=l.bottom}else{const h=e.h*d,f=u.size||l.width;sd(u.start)&&(i=u.start),l.fullSize?Uh(l,i,r.top,f,n.outerHeight-r.bottom-r.top):Uh(l,i,e.top+u.placed,f,h),u.start=i,u.placed+=h,i=l.right}}e.x=i,e.y=o}var Ui={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,s){if(!t)return;const r=cr(t.options.layout.padding),i=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=BW(t.boxes),l=a.vertical,u=a.horizontal;pt(t.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const d=l.reduce((x,y)=>y.box.options&&y.box.options.display===!1?x:x+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/d,hBoxMaxHeight:o/2}),f=Object.assign({},r);_2(f,cr(s));const p=Object.assign({maxPadding:f,w:i,h:o,x:r.left,y:r.top},r),w=zW(l.concat(u),h);Gc(a.fullSize,p,h,w),Gc(l,p,h,w),Gc(u,p,h,w)&&Gc(l,p,h,w),HW(p),iS(a.leftAndTop,p,h,w),p.x+=p.w,p.y+=p.h,iS(a.rightAndBottom,p,h,w),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},pt(a.chartArea,x=>{const y=x.box;Object.assign(y,t.chartArea),y.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class S2{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,s){}removeEventListener(e,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,s,r){return n=Math.max(0,n||e.width),s=s||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):s)}}isAttached(e){return!0}updateConfig(e){}}class VW extends S2{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const kf="$chartjs",qW={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},oS=t=>t===null||t==="";function KW(t,e){const n=t.style,s=t.getAttribute("height"),r=t.getAttribute("width");if(t[kf]={initial:{height:s,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",oS(r)){const i=q_(t,"width");i!==void 0&&(t.width=i)}if(oS(s))if(t.style.height==="")t.height=t.width/(e||2);else{const i=q_(t,"height");i!==void 0&&(t.height=i)}return t}const j2=nW?{passive:!0}:!1;function GW(t,e,n){t&&t.addEventListener(e,n,j2)}function YW(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,j2)}function QW(t,e){const n=qW[t.type]||t.type,{x:s,y:r}=Do(t,e);return{type:n,chart:e,native:t,x:s!==void 0?s:null,y:r!==void 0?r:null}}function vp(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function XW(t,e,n){const s=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||vp(a.addedNodes,s),o=o&&!vp(a.removedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function JW(t,e,n){const s=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||vp(a.removedNodes,s),o=o&&!vp(a.addedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const rd=new Map;let aS=0;function C2(){const t=window.devicePixelRatio;t!==aS&&(aS=t,rd.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function ZW(t,e){rd.size||window.addEventListener("resize",C2),rd.set(t,e)}function eV(t){rd.delete(t),rd.size||window.removeEventListener("resize",C2)}function tV(t,e,n){const s=t.canvas,r=s&&K0(s);if(!r)return;const i=o2((a,l)=>{const u=r.clientWidth;n(a,l),u<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,d=l.contentRect.height;u===0&&d===0||i(u,d)});return o.observe(r),ZW(t,i),o}function Dg(t,e,n){n&&n.disconnect(),e==="resize"&&eV(t)}function nV(t,e,n){const s=t.canvas,r=o2(i=>{t.ctx!==null&&n(QW(i,t))},t);return GW(s,e,r),r}class sV extends S2{acquireContext(e,n){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(KW(e,n),s):null}releaseContext(e){const n=e.canvas;if(!n[kf])return!1;const s=n[kf].initial;["height","width"].forEach(i=>{const o=s[i];bt(o)?n.removeAttribute(i):n.setAttribute(i,o)});const r=s.style||{};return Object.keys(r).forEach(i=>{n.style[i]=r[i]}),n.width=n.width,delete n[kf],!0}addEventListener(e,n,s){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:XW,detach:JW,resize:tV}[n]||nV;r[n]=o(e,n,s)}removeEventListener(e,n){const s=e.$proxies||(e.$proxies={}),r=s[n];if(!r)return;({attach:Dg,detach:Dg,resize:Dg}[n]||YW)(e,n,r),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,s,r){return tW(e,n,s,r)}isAttached(e){const n=e&&K0(e);return!!(n&&n.isConnected)}}function rV(t){return!q0()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?VW:sV}var Qh;let fc=(Qh=class{constructor(){$e(this,"x");$e(this,"y");$e(this,"active",!1);$e(this,"options");$e(this,"$animations")}tooltipPosition(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}hasValue(){return pp(this.x)&&pp(this.y)}getProps(e,n){const s=this.$animations;if(!n||!s)return this;const r={};return e.forEach(i=>{r[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),r}},$e(Qh,"defaults",{}),$e(Qh,"defaultRoutes"),Qh);function iV(t,e){const n=t.options.ticks,s=oV(t),r=Math.min(n.maxTicksLimit||s,s),i=n.major.enabled?lV(e):[],o=i.length,a=i[0],l=i[o-1],u=[];if(o>r)return cV(e,u,i,o/r),u;const d=aV(i,e,r);if(o>0){let h,f;const p=o>1?Math.round((l-a)/(o-1)):null;for(Hh(e,u,d,bt(p)?0:a-p,a),h=0,f=o-1;h<f;h++)Hh(e,u,d,i[h],i[h+1]);return Hh(e,u,d,l,bt(p)?e.length:l+p),u}return Hh(e,u,d),u}function oV(t){const e=t.options.offset,n=t._tickSize(),s=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(s,r))}function aV(t,e,n){const s=uV(t),r=e.length/n;if(!s)return Math.max(r,1);const i=d8(s);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>r)return l}return Math.max(r,1)}function lV(t){const e=[];let n,s;for(n=0,s=t.length;n<s;n++)t[n].major&&e.push(n);return e}function cV(t,e,n,s){let r=0,i=n[0],o;for(s=Math.ceil(s),o=0;o<t.length;o++)o===i&&(e.push(t[o]),r++,i=n[r*s])}function Hh(t,e,n,s,r){const i=st(s,0),o=Math.min(st(r,t.length),t.length);let a=0,l,u,d;for(n=Math.ceil(n),r&&(l=r-s,n=l/Math.floor(l/n)),d=i;d<0;)a++,d=Math.round(i+a*n);for(u=Math.max(i,0);u<o;u++)u===d&&(e.push(t[u]),a++,d=Math.round(i+a*n))}function uV(t){const e=t.length;let n,s;if(e<2)return!1;for(s=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==s)return!1;return s}const dV=t=>t==="left"?"right":t==="right"?"left":t,lS=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,cS=(t,e)=>Math.min(e||t,t);function uS(t,e){const n=[],s=t.length/e,r=t.length;let i=0;for(;i<r;i+=s)n.push(t[Math.floor(i)]);return n}function hV(t,e,n){const s=t.ticks.length,r=Math.min(e,s-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),u;if(!(n&&(s===1?u=Math.max(l-i,o-l):e===0?u=(t.getPixelForTick(1)-l)/2:u=(l-t.getPixelForTick(r-1))/2,l+=r<e?u:-u,l<i-a||l>o+a)))return l}function fV(t,e){pt(t,n=>{const s=n.gc,r=s.length/2;let i;if(r>e){for(i=0;i<r;++i)delete n.data[s[i]];s.splice(0,r)}})}function Ic(t){return t.drawTicks?t.tickLength:0}function dS(t,e){if(!t.display)return 0;const n=ns(t.font,e),s=cr(t.padding);return(hn(t.text)?t.text.length:1)*n.lineHeight+s.height}function pV(t,e){return hc(t,{scale:e,type:"scale"})}function mV(t,e,n){return hc(t,{tick:n,index:e,type:"tick"})}function gV(t,e,n){let s=a2(t);return(n&&e!=="right"||!n&&e==="right")&&(s=dV(s)),s}function xV(t,e,n,s){const{top:r,left:i,bottom:o,right:a,chart:l}=t,{chartArea:u,scales:d}=l;let h=0,f,p,w;const x=o-r,y=a-i;if(t.isHorizontal()){if(p=hs(s,i,a),it(n)){const g=Object.keys(n)[0],m=n[g];w=d[g].getPixelForValue(m)+x-e}else n==="center"?w=(u.bottom+u.top)/2+x-e:w=lS(t,n,e);f=a-i}else{if(it(n)){const g=Object.keys(n)[0],m=n[g];p=d[g].getPixelForValue(m)-y+e}else n==="center"?p=(u.left+u.right)/2-y+e:p=lS(t,n,e);w=hs(s,o,r),h=n==="left"?-cn:cn}return{titleX:p,titleY:w,maxWidth:f,rotation:h}}class pc extends fc{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:s,_suggestedMax:r}=this;return e=mr(e,Number.POSITIVE_INFINITY),n=mr(n,Number.NEGATIVE_INFINITY),s=mr(s,Number.POSITIVE_INFINITY),r=mr(r,Number.NEGATIVE_INFINITY),{min:mr(e,s),max:mr(n,r),minDefined:Hs(e),maxDefined:Hs(n)}}getMinMax(e){let{min:n,max:s,minDefined:r,maxDefined:i}=this.getUserBounds(),o;if(r&&i)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),i||(s=Math.max(s,o.max));return n=i&&n>s?s:n,s=r&&n>s?n:s,{min:mr(n,mr(s,n)),max:mr(s,mr(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Et(this.options.beforeUpdate,[this])}update(e,n,s){const{beginAtZero:r,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=z8(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?uS(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=iV(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,e=!e),this._startPixel=n,this._endPixel=s,this._reversePixels=e,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Et(this.options.afterUpdate,[this])}beforeSetDimensions(){Et(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Et(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Et(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Et(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let s,r,i;for(s=0,r=e.length;s<r;s++)i=e[s],i.label=Et(n.callback,[i.value,s,e],this)}afterTickToLabelConversion(){Et(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Et(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,s=cS(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,i=n.maxRotation;let o=r,a,l,u;if(!this._isVisible()||!n.display||r>=i||s<=1||!this.isHorizontal()){this.labelRotation=r;return}const d=this._getLabelSizes(),h=d.widest.width,f=d.highest.height,p=ts(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/s:p/(s-1),h+6>a&&(a=p/(s-(e.offset?.5:1)),l=this.maxHeight-Ic(e.grid)-n.padding-dS(e.title,this.chart.options.font),u=Math.sqrt(h*h+f*f),o=m8(Math.min(Math.asin(ts((d.highest.height+6)/a,-1,1)),Math.asin(ts(l/u,-1,1))-Math.asin(ts(f/u,-1,1)))),o=Math.max(r,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){Et(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Et(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:s,title:r,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=dS(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=Ic(i)+l):(e.height=this.maxHeight,e.width=Ic(i)+l),s.display&&this.ticks.length){const{first:u,last:d,widest:h,highest:f}=this._getLabelSizes(),p=s.padding*2,w=Zr(this.labelRotation),x=Math.cos(w),y=Math.sin(w);if(a){const g=s.mirror?0:y*h.width+x*f.height;e.height=Math.min(this.maxHeight,e.height+g+p)}else{const g=s.mirror?0:x*h.width+y*f.height;e.width=Math.min(this.maxWidth,e.width+g+p)}this._calculatePadding(u,d,y,x)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,s,r){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;l?u?(f=r*e.width,p=s*n.height):(f=s*e.height,p=r*n.width):i==="start"?p=n.width:i==="end"?f=e.width:i!=="inner"&&(f=e.width/2,p=n.width/2),this.paddingLeft=Math.max((f-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((p-h+o)*this.width/(this.width-h),0)}else{let d=n.height/2,h=e.height/2;i==="start"?(d=0,h=e.height):i==="end"&&(d=n.height,h=0),this.paddingTop=d+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Et(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,s;for(n=0,s=e.length;n<s;n++)bt(e[n].label)&&(e.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=uS(s,n)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,s){const{ctx:r,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/cS(n,s));let u=0,d=0,h,f,p,w,x,y,g,m,b,k,_;for(h=0;h<n;h+=l){if(w=e[h].label,x=this._resolveTickFontOptions(h),r.font=y=x.string,g=i[y]=i[y]||{data:{},gc:[]},m=x.lineHeight,b=k=0,!bt(w)&&!hn(w))b=z_(r,g.data,g.gc,b,w),k=m;else if(hn(w))for(f=0,p=w.length;f<p;++f)_=w[f],!bt(_)&&!hn(_)&&(b=z_(r,g.data,g.gc,b,_),k+=m);o.push(b),a.push(k),u=Math.max(b,u),d=Math.max(k,d)}fV(i,n);const C=o.indexOf(u),S=a.indexOf(d),j=N=>({width:o[N]||0,height:a[N]||0});return{first:j(0),last:j(n-1),widest:j(C),highest:j(S),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return x8(this._alignToPixels?Po(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const s=n[e];return s.$context||(s.$context=mV(this.getContext(),e,s))}return this.$context||(this.$context=pV(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Zr(this.labelRotation),s=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*s>a*r?a/s:l/r:l*r<a*s?l/s:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,s=this.chart,r=this.options,{grid:i,position:o,border:a}=r,l=i.offset,u=this.isHorizontal(),h=this.ticks.length+(l?1:0),f=Ic(i),p=[],w=a.setContext(this.getContext()),x=w.display?w.width:0,y=x/2,g=function(A){return Po(s,A,x)};let m,b,k,_,C,S,j,N,T,L,D,O;if(o==="top")m=g(this.bottom),S=this.bottom-f,N=m-y,L=g(e.top)+y,O=e.bottom;else if(o==="bottom")m=g(this.top),L=e.top,O=g(e.bottom)-y,S=m+y,N=this.top+f;else if(o==="left")m=g(this.right),C=this.right-f,j=m-y,T=g(e.left)+y,D=e.right;else if(o==="right")m=g(this.left),T=e.left,D=g(e.right)-y,C=m+y,j=this.left+f;else if(n==="x"){if(o==="center")m=g((e.top+e.bottom)/2+.5);else if(it(o)){const A=Object.keys(o)[0],W=o[A];m=g(this.chart.scales[A].getPixelForValue(W))}L=e.top,O=e.bottom,S=m+y,N=S+f}else if(n==="y"){if(o==="center")m=g((e.left+e.right)/2);else if(it(o)){const A=Object.keys(o)[0],W=o[A];m=g(this.chart.scales[A].getPixelForValue(W))}C=m-y,j=C-f,T=e.left,D=e.right}const $=st(r.ticks.maxTicksLimit,h),I=Math.max(1,Math.ceil(h/$));for(b=0;b<h;b+=I){const A=this.getContext(b),W=i.setContext(A),E=a.setContext(A),P=W.lineWidth,F=W.color,V=E.dash||[],H=E.dashOffset,he=W.tickWidth,ee=W.tickColor,U=W.tickBorderDash||[],Q=W.tickBorderDashOffset;k=hV(this,b,l),k!==void 0&&(_=Po(s,k,P),u?C=j=T=D=_:S=N=L=O=_,p.push({tx1:C,ty1:S,tx2:j,ty2:N,x1:T,y1:L,x2:D,y2:O,width:P,color:F,borderDash:V,borderDashOffset:H,tickWidth:he,tickColor:ee,tickBorderDash:U,tickBorderDashOffset:Q}))}return this._ticksLength=h,this._borderValue=m,p}_computeLabelItems(e){const n=this.axis,s=this.options,{position:r,ticks:i}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:d,mirror:h}=i,f=Ic(s.grid),p=f+d,w=h?-d:p,x=-Zr(this.labelRotation),y=[];let g,m,b,k,_,C,S,j,N,T,L,D,O="middle";if(r==="top")C=this.bottom-w,S=this._getXAxisLabelAlignment();else if(r==="bottom")C=this.top+w,S=this._getXAxisLabelAlignment();else if(r==="left"){const I=this._getYAxisLabelAlignment(f);S=I.textAlign,_=I.x}else if(r==="right"){const I=this._getYAxisLabelAlignment(f);S=I.textAlign,_=I.x}else if(n==="x"){if(r==="center")C=(e.top+e.bottom)/2+p;else if(it(r)){const I=Object.keys(r)[0],A=r[I];C=this.chart.scales[I].getPixelForValue(A)+p}S=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")_=(e.left+e.right)/2-p;else if(it(r)){const I=Object.keys(r)[0],A=r[I];_=this.chart.scales[I].getPixelForValue(A)}S=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?O="top":l==="end"&&(O="bottom"));const $=this._getLabelSizes();for(g=0,m=a.length;g<m;++g){b=a[g],k=b.label;const I=i.setContext(this.getContext(g));j=this.getPixelForTick(g)+i.labelOffset,N=this._resolveTickFontOptions(g),T=N.lineHeight,L=hn(k)?k.length:1;const A=L/2,W=I.color,E=I.textStrokeColor,P=I.textStrokeWidth;let F=S;o?(_=j,S==="inner"&&(g===m-1?F=this.options.reverse?"left":"right":g===0?F=this.options.reverse?"right":"left":F="center"),r==="top"?u==="near"||x!==0?D=-L*T+T/2:u==="center"?D=-$.highest.height/2-A*T+T:D=-$.highest.height+T/2:u==="near"||x!==0?D=T/2:u==="center"?D=$.highest.height/2-A*T:D=$.highest.height-L*T,h&&(D*=-1),x!==0&&!I.showLabelBackdrop&&(_+=T/2*Math.sin(x))):(C=j,D=(1-L)*T/2);let V;if(I.showLabelBackdrop){const H=cr(I.backdropPadding),he=$.heights[g],ee=$.widths[g];let U=D-H.top,Q=0-H.left;switch(O){case"middle":U-=he/2;break;case"bottom":U-=he;break}switch(S){case"center":Q-=ee/2;break;case"right":Q-=ee;break;case"inner":g===m-1?Q-=ee:g>0&&(Q-=ee/2);break}V={left:Q,top:U,width:ee+H.width,height:he+H.height,color:I.backdropColor}}y.push({label:k,font:N,textOffset:D,options:{rotation:x,color:W,strokeColor:E,strokeWidth:P,textAlign:F,textBaseline:O,translation:[_,C],backdrop:V}})}return y}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Zr(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:s,mirror:r,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let u,d;return n==="left"?r?(d=this.right+i,s==="near"?u="left":s==="center"?(u="center",d+=l/2):(u="right",d+=l)):(d=this.right-a,s==="near"?u="right":s==="center"?(u="center",d-=l/2):(u="left",d=this.left)):n==="right"?r?(d=this.left+i,s==="near"?u="right":s==="center"?(u="center",d-=l/2):(u="left",d-=l)):(d=this.left+a,s==="near"?u="left":s==="center"?(u="center",d+=l/2):(u="right",d=this.right)):u="right",{textAlign:u,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:s,top:r,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(s,r,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(i=>i.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,u,d)=>{!d.width||!d.color||(s.save(),s.lineWidth=d.width,s.strokeStyle=d.color,s.setLineDash(d.borderDash||[]),s.lineDashOffset=d.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(u.x,u.y),s.stroke(),s.restore())};if(n.display)for(i=0,o=r.length;i<o;++i){const l=r[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:s,grid:r}}=this,i=s.setContext(this.getContext()),o=s.display?i.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,d,h,f;this.isHorizontal()?(u=Po(e,this.left,o)-o/2,d=Po(e,this.right,a)+a/2,h=f=l):(h=Po(e,this.top,o)-o/2,f=Po(e,this.bottom,a)+a/2,u=d=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(u,h),n.lineTo(d,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,r=this._computeLabelArea();r&&z0(s,r);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,u=o.label,d=o.textOffset;gp(s,u,0,d,l,a)}r&&B0(s)}drawTitle(){const{ctx:e,options:{position:n,title:s,reverse:r}}=this;if(!s.display)return;const i=ns(s.font),o=cr(s.padding),a=s.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||it(n)?(l+=o.bottom,hn(s.text)&&(l+=i.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:u,titleY:d,maxWidth:h,rotation:f}=xV(this,l,n,a);gp(e,s.text,0,0,i,{color:s.color,maxWidth:h,rotation:f,textAlign:gV(a,n,r),textBaseline:"middle",translation:[u,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,s=st(e.grid&&e.grid.z,-1),r=st(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==pc.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[s]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return ns(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Wh{constructor(e,n,s){this.type=e,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let s;bV(n)&&(s=this.register(n));const r=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,yV(e,o,s),this.override&&Xt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,s=e.id,r=this.scope;s in n&&delete n[s],r&&s in Xt[r]&&(delete Xt[r][s],this.override&&delete ya[s])}}function yV(t,e,n){const s=nd(Object.create(null),[n?Xt.get(n):{},Xt.get(e),t.defaults]);Xt.set(e,s),t.defaultRoutes&&vV(e,t.defaultRoutes),t.descriptors&&Xt.describe(e,t.descriptors)}function vV(t,e){Object.keys(e).forEach(n=>{const s=n.split("."),r=s.pop(),i=[t].concat(s).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Xt.route(i,r,l,a)})}function bV(t){return"id"in t&&"defaults"in t}class wV{constructor(){this.controllers=new Wh(Nl,"datasets",!0),this.elements=new Wh(fc,"elements"),this.plugins=new Wh(Object,"plugins"),this.scales=new Wh(pc,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,s){[...n].forEach(r=>{const i=s||this._getRegistryForType(r);s||i.isForType(r)||i===this.plugins&&r.id?this._exec(e,i,r):pt(r,o=>{const a=s||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,s){const r=L0(e);Et(s["before"+r],[],s),n[e](s),Et(s["after"+r],[],s)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(e))return s}return this.plugins}_get(e,n,s){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return r}}var yr=new wV;class kV{constructor(){this._init=void 0}notify(e,n,s,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const i=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(i,e,n,s);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,s,r){r=r||{};for(const i of e){const o=i.plugin,a=o[s],l=[n,r,i.options];if(Et(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){bt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const s=e&&e.config,r=st(s.options&&s.options.plugins,{}),i=_V(s);return r===!1&&!n?[]:jV(e,i,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],s=this._cache,r=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,s),e,"stop"),this._notify(r(s,n),e,"start")}}function _V(t){const e={},n=[],s=Object.keys(yr.plugins.items);for(let i=0;i<s.length;i++)n.push(yr.getPlugin(s[i]));const r=t.plugins||[];for(let i=0;i<r.length;i++){const o=r[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function SV(t,e){return!e&&t===!1?null:t===!0?{}:t}function jV(t,{plugins:e,localIds:n},s,r){const i=[],o=t.getContext();for(const a of e){const l=a.id,u=SV(s[l],r);u!==null&&i.push({plugin:a,options:CV(t.config,{plugin:a,local:n[l]},u,o)})}return i}function CV(t,{plugin:e,local:n},s,r){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(s,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ly(t,e){const n=Xt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function EV(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function NV(t,e){return t===e?"_index_":"_value_"}function hS(t){if(t==="x"||t==="y"||t==="r")return t}function TV(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function $y(t,...e){if(hS(t))return t;for(const n of e){const s=n.axis||TV(n.position)||t.length>1&&hS(t[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function fS(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function PV(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(s=>s.xAxisID===t||s.yAxisID===t);if(n.length)return fS(t,"x",n[0])||fS(t,"y",n[0])}return{}}function RV(t,e){const n=ya[t.type]||{scales:{}},s=e.scales||{},r=Ly(t.type,e),i=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!it(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=$y(o,a,PV(o,t),Xt.scales[a.type]),u=NV(l,r),d=n.scales||{};i[o]=uu(Object.create(null),[{axis:l},a,d[l],d[u]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Ly(a,e),d=(ya[a]||{}).scales||{};Object.keys(d).forEach(h=>{const f=EV(h,l),p=o[f+"AxisID"]||f;i[p]=i[p]||Object.create(null),uu(i[p],[{axis:f},s[p],d[h]])})}),Object.keys(i).forEach(o=>{const a=i[o];uu(a,[Xt.scales[a.type],Xt.scale])}),i}function E2(t){const e=t.options||(t.options={});e.plugins=st(e.plugins,{}),e.scales=RV(t,e)}function N2(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function AV(t){return t=t||{},t.data=N2(t.data),E2(t),t}const pS=new Map,T2=new Set;function Vh(t,e){let n=pS.get(t);return n||(n=e(),pS.set(t,n),T2.add(n)),n}const Dc=(t,e,n)=>{const s=xa(e,n);s!==void 0&&t.add(s)};class OV{constructor(e){this._config=AV(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=N2(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),E2(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Vh(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Vh(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Vh(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,s=this.type;return Vh(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const s=this._scopeCache;let r=s.get(e);return(!r||n)&&(r=new Map,s.set(e,r)),r}getOptionScopes(e,n,s){const{options:r,type:i}=this,o=this._cachedScopes(e,s),a=o.get(n);if(a)return a;const l=new Set;n.forEach(d=>{e&&(l.add(e),d.forEach(h=>Dc(l,e,h))),d.forEach(h=>Dc(l,r,h)),d.forEach(h=>Dc(l,ya[i]||{},h)),d.forEach(h=>Dc(l,Xt,h)),d.forEach(h=>Dc(l,Iy,h))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),T2.has(n)&&o.set(n,u),u}chartOptionScopes(){const{options:e,type:n}=this;return[e,ya[n]||{},Xt.datasets[n]||{},{type:n},Xt,Iy]}resolveNamedOptions(e,n,s,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=mS(this._resolverCache,e,r);let l=o;if(IV(o,n)){i.$shared=!1,s=uo(s)?s():s;const u=this.createResolver(e,s,a);l=Jl(o,s,u)}for(const u of n)i[u]=l[u];return i}createResolver(e,n,s=[""],r){const{resolver:i}=mS(this._resolverCache,e,s);return it(n)?Jl(i,n,void 0,r):i}}function mS(t,e,n){let s=t.get(e);s||(s=new Map,t.set(e,s));const r=n.join();let i=s.get(r);return i||(i={resolver:H0(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(r,i)),i}const MV=t=>it(t)&&Object.getOwnPropertyNames(t).some(e=>uo(t[e]));function IV(t,e){const{isScriptable:n,isIndexable:s}=f2(t);for(const r of e){const i=n(r),o=s(r),a=(o||i)&&t[r];if(i&&(uo(a)||MV(a))||o&&hn(a))return!0}return!1}var DV="4.5.1";const LV=["top","bottom","left","right","chartArea"];function gS(t,e){return t==="top"||t==="bottom"||LV.indexOf(t)===-1&&e==="x"}function xS(t,e){return function(n,s){return n[t]===s[t]?n[e]-s[e]:n[t]-s[t]}}function yS(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Et(n&&n.onComplete,[t],e)}function $V(t){const e=t.chart,n=e.options.animation;Et(n&&n.onProgress,[t],e)}function P2(t){return q0()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const _f={},vS=t=>{const e=P2(t);return Object.values(_f).filter(n=>n.canvas===e).pop()};function FV(t,e,n){const s=Object.keys(t);for(const r of s){const i=+r;if(i>=e){const o=t[r];delete t[r],(n>0||i>e)&&(t[i+n]=o)}}}function zV(t,e,n,s){return!n||t.type==="mouseout"?null:s?e:t}class Sr{static register(...e){yr.add(...e),bS()}static unregister(...e){yr.remove(...e),bS()}constructor(e,n){const s=this.config=new OV(n),r=P2(e),i=vS(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||rV(r)),this.platform.updateConfig(s);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,u=l&&l.height,d=l&&l.width;if(this.id=s8(),this.ctx=a,this.canvas=l,this.width=d,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new kV,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=w8(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],_f[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}zr.listen(this,"complete",yS),zr.listen(this,"progress",$V),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:s,height:r,_aspectRatio:i}=this;return bt(e)?n&&i?i:r?s/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return yr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():V_(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return B_(this.canvas,this.ctx),this}stop(){return zr.stop(this),this}resize(e,n){zr.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const s=this.options,r=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,i),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,V_(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Et(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};pt(n,(s,r)=>{s.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,s=this.scales,r=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=$y(o,a),u=l==="r",d=l==="x";return{options:a,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),pt(i,o=>{const a=o.options,l=a.id,u=$y(l,a),d=st(a.type,o.dtype);(a.position===void 0||gS(a.position,u)!==gS(o.dposition))&&(a.position=o.dposition),r[l]=!0;let h=null;if(l in s&&s[l].type===d)h=s[l];else{const f=yr.getScale(d);h=new f({id:l,type:d,ctx:this.ctx,chart:this}),s[h.id]=h}h.init(a,e)}),pt(r,(o,a)=>{o||delete s[a]}),pt(s,o=>{Ui.configure(this,o,o.options),Ui.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,s=e.length;if(e.sort((r,i)=>r.index-i.index),s>n){for(let r=n;r<s;++r)this._destroyDatasetMeta(r);e.splice(n,s-n)}this._sortedMetasets=e.slice(0).sort(xS("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((s,r)=>{n.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=n.length;s<r;s++){const i=n[s];let o=this.getDatasetMeta(s);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=i.indexAxis||Ly(a,this.options),o.order=i.order||0,o.index=s,o.label=""+i.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=yr.getController(a),{datasetElementType:u,dataElementType:d}=Xt.datasets[a];Object.assign(l,{dataElementType:yr.getElement(d),datasetElementType:u&&yr.getElement(u)}),o.controller=new l(this,s),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){pt(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,d=this.data.datasets.length;u<d;u++){const{controller:h}=this.getDatasetMeta(u),f=!r&&i.indexOf(h)===-1;h.buildOrUpdateElements(f),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),r||pt(i,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(xS("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){pt(this.scales,e=>{Ui.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!R_(n,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:i}of n){const o=s==="_removeElements"?-i:i;FV(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),r=s(0);for(let i=1;i<n;i++)if(!R_(r,s(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ui.update(this,this.width,this.height,e);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],pt(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,uo(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const s=this.getDatasetMeta(e),r={meta:s,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(zr.has(this)?this.attached&&!zr.running(this)&&zr.start(this):(this.draw(),yS({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,s=[];let r,i;for(r=0,i=n.length;r<i;++r){const o=n[r];(!e||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,s={meta:e,index:e.index,cancelable:!0},r=oW(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&z0(n,r),e.controller.draw(),r&&B0(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return d2(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,s,r){const i=LW.modes[n];return typeof i=="function"?i(this,e,s,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],s=this._metasets;let r=s.filter(i=>i&&i._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=hc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(e,n){const s=this.getDatasetMeta(e);s.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,s){const r=s?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,r);sd(n)?(i.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),o.update(i,{visible:s}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),zr.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),B_(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete _f[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,s=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},r=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};pt(this.options.events,i=>s(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,s=(l,u)=>{n.addEventListener(this,l,u),e[l]=u},r=(l,u)=>{e[l]&&(n.removeEventListener(this,l,u),delete e[l])},i=(l,u)=>{this.canvas&&this.resize(l,u)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),s("resize",i),s("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){pt(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},pt(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,s){const r=s?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],s=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!dp(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(e,n,s){return this._plugins.notify(this,e,n,s)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,s){const r=this.options.hover,i=(l,u)=>l.filter(d=>!u.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),o=i(n,e),a=s?e:i(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const s={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const i=this._handleEvent(e,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(i||s.changed)&&this.render(),this}_handleEvent(e,n,s){const{_active:r=[],options:i}=this,o=n,a=this._getActiveElements(e,r,s,o),l=c8(e),u=zV(e,this._lastEvent,s,l);s&&(this._lastEvent=null,Et(i.onHover,[e,a,this],this),l&&Et(i.onClick,[e,a,this],this));const d=!dp(a,r);return(d||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=u,d}_getActiveElements(e,n,s,r){if(e.type==="mouseout")return[];if(!s)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}}$e(Sr,"defaults",Xt),$e(Sr,"instances",_f),$e(Sr,"overrides",ya),$e(Sr,"registry",yr),$e(Sr,"version",DV),$e(Sr,"getChart",vS);function bS(){return pt(Sr.instances,t=>t._plugins.invalidate())}function BV(t,e,n){const{startAngle:s,x:r,y:i,outerRadius:o,innerRadius:a,options:l}=e,{borderWidth:u,borderJoinStyle:d}=l,h=Math.min(u/o,vr(s-n));if(t.beginPath(),t.arc(r,i,o-u/2,s+h/2,n-h/2),a>0){const f=Math.min(u/a,vr(s-n));t.arc(r,i,a+u/2,n-f/2,s+f/2,!0)}else{const f=Math.min(u/2,o*vr(s-n));if(d==="round")t.arc(r,i,f,n-Nt/2,s+Nt/2,!0);else if(d==="bevel"){const p=2*f*f,w=-p*Math.cos(n+Nt/2)+r,x=-p*Math.sin(n+Nt/2)+i,y=p*Math.cos(s+Nt/2)+r,g=p*Math.sin(s+Nt/2)+i;t.lineTo(w,x),t.lineTo(y,g)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function UV(t,e,n){const{startAngle:s,pixelMargin:r,x:i,y:o,outerRadius:a,innerRadius:l}=e;let u=r/a;t.beginPath(),t.arc(i,o,a,s-u,n+u),l>r?(u=r/l,t.arc(i,o,l,n+u,s-u,!0)):t.arc(i,o,r,n+cn,s-cn),t.closePath(),t.clip()}function HV(t){return U0(t,["outerStart","outerEnd","innerStart","innerEnd"])}function WV(t,e,n,s){const r=HV(t.options.borderRadius),i=(n-e)/2,o=Math.min(i,s*e/2),a=l=>{const u=(n-Math.min(i,l))*s/2;return ts(l,0,Math.min(i,u))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:ts(r.innerStart,0,o),innerEnd:ts(r.innerEnd,0,o)}}function qa(t,e,n,s){return{x:n+t*Math.cos(e),y:s+t*Math.sin(e)}}function bp(t,e,n,s,r,i){const{x:o,y:a,startAngle:l,pixelMargin:u,innerRadius:d}=e,h=Math.max(e.outerRadius+s+n-u,0),f=d>0?d+s+n+u:0;let p=0;const w=r-l;if(s){const I=d>0?d-s:0,A=h>0?h-s:0,W=(I+A)/2,E=W!==0?w*W/(W+s):w;p=(w-E)/2}const x=Math.max(.001,w*h-n/Nt)/h,y=(w-x)/2,g=l+y+p,m=r-y-p,{outerStart:b,outerEnd:k,innerStart:_,innerEnd:C}=WV(e,f,h,m-g),S=h-b,j=h-k,N=g+b/S,T=m-k/j,L=f+_,D=f+C,O=g+_/L,$=m-C/D;if(t.beginPath(),i){const I=(N+T)/2;if(t.arc(o,a,h,N,I),t.arc(o,a,h,I,T),k>0){const P=qa(j,T,o,a);t.arc(P.x,P.y,k,T,m+cn)}const A=qa(D,m,o,a);if(t.lineTo(A.x,A.y),C>0){const P=qa(D,$,o,a);t.arc(P.x,P.y,C,m+cn,$+Math.PI)}const W=(m-C/f+(g+_/f))/2;if(t.arc(o,a,f,m-C/f,W,!0),t.arc(o,a,f,W,g+_/f,!0),_>0){const P=qa(L,O,o,a);t.arc(P.x,P.y,_,O+Math.PI,g-cn)}const E=qa(S,g,o,a);if(t.lineTo(E.x,E.y),b>0){const P=qa(S,N,o,a);t.arc(P.x,P.y,b,g-cn,N)}}else{t.moveTo(o,a);const I=Math.cos(N)*h+o,A=Math.sin(N)*h+a;t.lineTo(I,A);const W=Math.cos(T)*h+o,E=Math.sin(T)*h+a;t.lineTo(W,E)}t.closePath()}function VV(t,e,n,s,r){const{fullCircles:i,startAngle:o,circumference:a}=e;let l=e.endAngle;if(i){bp(t,e,n,s,l,r);for(let u=0;u<i;++u)t.fill();isNaN(a)||(l=o+(a%tn||tn))}return bp(t,e,n,s,l,r),t.fill(),l}function qV(t,e,n,s,r){const{fullCircles:i,startAngle:o,circumference:a,options:l}=e,{borderWidth:u,borderJoinStyle:d,borderDash:h,borderDashOffset:f,borderRadius:p}=l,w=l.borderAlign==="inner";if(!u)return;t.setLineDash(h||[]),t.lineDashOffset=f,w?(t.lineWidth=u*2,t.lineJoin=d||"round"):(t.lineWidth=u,t.lineJoin=d||"bevel");let x=e.endAngle;if(i){bp(t,e,n,s,x,r);for(let y=0;y<i;++y)t.stroke();isNaN(a)||(x=o+(a%tn||tn))}w&&UV(t,e,x),l.selfJoin&&x-o>=Nt&&p===0&&d!=="miter"&&BV(t,e,x),i||(bp(t,e,n,s,x,r),t.stroke())}class Yc extends fc{constructor(n){super();$e(this,"circumference");$e(this,"endAngle");$e(this,"fullCircles");$e(this,"innerRadius");$e(this,"outerRadius");$e(this,"pixelMargin");$e(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,s,r){const i=this.getProps(["x","y"],r),{angle:o,distance:a}=n2(i,{x:n,y:s}),{startAngle:l,endAngle:u,innerRadius:d,outerRadius:h,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),p=(this.options.spacing+this.options.borderWidth)/2,w=st(f,u-l),x=mp(o,l,u)&&l!==u,y=w>=tn||x,g=Vo(a,d+p,h+p);return y&&g}getCenterPoint(n){const{x:s,y:r,startAngle:i,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:u,spacing:d}=this.options,h=(i+o)/2,f=(a+l+d+u)/2;return{x:s+Math.cos(h)*f,y:r+Math.sin(h)*f}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:s,circumference:r}=this,i=(s.offset||0)/4,o=(s.spacing||0)/2,a=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=r>tn?Math.floor(r/tn):0,r===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*i,Math.sin(l)*i);const u=1-Math.sin(Math.min(Nt,r||0)),d=i*u;n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,VV(n,this,d,o,a),qV(n,this,d,o,a),n.restore()}}$e(Yc,"id","arc"),$e(Yc,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),$e(Yc,"defaultRoutes",{backgroundColor:"backgroundColor"}),$e(Yc,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function R2(t,e){const{x:n,y:s,base:r,width:i,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,u,d,h;return t.horizontal?(h=o/2,a=Math.min(n,r),l=Math.max(n,r),u=s-h,d=s+h):(h=i/2,a=n-h,l=n+h,u=Math.min(s,r),d=Math.max(s,r)),{left:a,top:u,right:l,bottom:d}}function Hi(t,e,n,s){return t?0:ts(e,n,s)}function KV(t,e,n){const s=t.options.borderWidth,r=t.borderSkipped,i=h2(s);return{t:Hi(r.top,i.top,0,n),r:Hi(r.right,i.right,0,e),b:Hi(r.bottom,i.bottom,0,n),l:Hi(r.left,i.left,0,e)}}function GV(t,e,n){const{enableBorderRadius:s}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,i=Cl(r),o=Math.min(e,n),a=t.borderSkipped,l=s||it(r);return{topLeft:Hi(!l||a.top||a.left,i.topLeft,0,o),topRight:Hi(!l||a.top||a.right,i.topRight,0,o),bottomLeft:Hi(!l||a.bottom||a.left,i.bottomLeft,0,o),bottomRight:Hi(!l||a.bottom||a.right,i.bottomRight,0,o)}}function YV(t){const e=R2(t),n=e.right-e.left,s=e.bottom-e.top,r=KV(t,n/2,s/2),i=GV(t,n/2,s/2);return{outer:{x:e.left,y:e.top,w:n,h:s,radius:i},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:s-r.t-r.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,i.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(r.b,r.r))}}}}function Lg(t,e,n,s){const r=e===null,i=n===null,a=t&&!(r&&i)&&R2(t,s);return a&&(r||Vo(e,a.left,a.right))&&(i||Vo(n,a.top,a.bottom))}function QV(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function XV(t,e){t.rect(e.x,e.y,e.w,e.h)}function $g(t,e,n={}){const s=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,i=(t.x+t.w!==n.x+n.w?e:0)-s,o=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+s,y:t.y+r,w:t.w+i,h:t.h+o,radius:t.radius}}class Sf extends fc{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:s,backgroundColor:r}}=this,{inner:i,outer:o}=YV(this),a=QV(o.radius)?xp:XV;e.save(),(o.w!==i.w||o.h!==i.h)&&(e.beginPath(),a(e,$g(o,n,i)),e.clip(),a(e,$g(i,-n,o)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),a(e,$g(i,n)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,n,s){return Lg(this,e,n,s)}inXRange(e,n){return Lg(this,e,null,n)}inYRange(e,n){return Lg(this,null,e,n)}getCenterPoint(e){const{x:n,y:s,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(n+r)/2:n,y:i?s:(s+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}$e(Sf,"id","bar"),$e(Sf,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),$e(Sf,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const wS=(t,e)=>{let{boxHeight:n=e,boxWidth:s=e}=t;return t.usePointStyle&&(n=Math.min(n,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(e,n)}},JV=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class kS extends fc{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,s){this.maxWidth=e,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Et(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(s=>e.filter(s,this.chart.data))),e.sort&&(n=n.sort((s,r)=>e.sort(s,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,r=ns(s.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=wS(s,i);let u,d;n.font=r.string,this.isHorizontal()?(u=this.maxWidth,d=this._fitRows(o,i,a,l)+10):(d=this.maxHeight,u=this._fitCols(o,r,a,l)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,n,s,r){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],d=r+a;let h=e;i.textAlign="left",i.textBaseline="middle";let f=-1,p=-d;return this.legendItems.forEach((w,x)=>{const y=s+n/2+i.measureText(w.text).width;(x===0||u[u.length-1]+y+2*a>o)&&(h+=d,u[u.length-(x>0?0:1)]=0,p+=d,f++),l[x]={left:0,top:p,row:f,width:y,height:r},u[u.length-1]+=y+a}),h}_fitCols(e,n,s,r){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],d=o-e;let h=a,f=0,p=0,w=0,x=0;return this.legendItems.forEach((y,g)=>{const{itemWidth:m,itemHeight:b}=ZV(s,n,i,y,r);g>0&&p+b+2*a>d&&(h+=f+a,u.push({width:f,height:p}),w+=f+a,x++,f=p=0),l[g]={left:w,top:p,col:x,width:m,height:b},f=Math.max(f,m),p+=b+a}),h+=f,u.push({width:f,height:p}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:r},rtl:i}}=this,o=El(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=hs(s,this.left+r,this.right-this.lineWidths[a]);for(const u of n)a!==u.row&&(a=u.row,l=hs(s,this.left+r,this.right-this.lineWidths[a])),u.top+=this.top+e+r,u.left=o.leftForLtr(o.x(l),u.width),l+=u.width+r}else{let a=0,l=hs(s,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const u of n)u.col!==a&&(a=u.col,l=hs(s,this.top+e+r,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+r,u.left=o.leftForLtr(o.x(u.left),u.width),l+=u.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;z0(e,this),this._draw(),B0(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:s,ctx:r}=this,{align:i,labels:o}=e,a=Xt.color,l=El(e.rtl,this.left,this.width),u=ns(o.font),{padding:d}=o,h=u.size,f=h/2;let p;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=u.string;const{boxWidth:w,boxHeight:x,itemHeight:y}=wS(o,h),g=function(C,S,j){if(isNaN(w)||w<=0||isNaN(x)||x<0)return;r.save();const N=st(j.lineWidth,1);if(r.fillStyle=st(j.fillStyle,a),r.lineCap=st(j.lineCap,"butt"),r.lineDashOffset=st(j.lineDashOffset,0),r.lineJoin=st(j.lineJoin,"miter"),r.lineWidth=N,r.strokeStyle=st(j.strokeStyle,a),r.setLineDash(st(j.lineDash,[])),o.usePointStyle){const T={radius:x*Math.SQRT2/2,pointStyle:j.pointStyle,rotation:j.rotation,borderWidth:N},L=l.xPlus(C,w/2),D=S+f;u2(r,T,L,D,o.pointStyleWidth&&w)}else{const T=S+Math.max((h-x)/2,0),L=l.leftForLtr(C,w),D=Cl(j.borderRadius);r.beginPath(),Object.values(D).some(O=>O!==0)?xp(r,{x:L,y:T,w,h:x,radius:D}):r.rect(L,T,w,x),r.fill(),N!==0&&r.stroke()}r.restore()},m=function(C,S,j){gp(r,j.text,C,S+y/2,u,{strikethrough:j.hidden,textAlign:l.textAlign(j.textAlign)})},b=this.isHorizontal(),k=this._computeTitleHeight();b?p={x:hs(i,this.left+d,this.right-s[0]),y:this.top+d+k,line:0}:p={x:this.left+d,y:hs(i,this.top+k+d,this.bottom-n[0].height),line:0},x2(this.ctx,e.textDirection);const _=y+d;this.legendItems.forEach((C,S)=>{r.strokeStyle=C.fontColor,r.fillStyle=C.fontColor;const j=r.measureText(C.text).width,N=l.textAlign(C.textAlign||(C.textAlign=o.textAlign)),T=w+f+j;let L=p.x,D=p.y;l.setWidth(this.width),b?S>0&&L+T+d>this.right&&(D=p.y+=_,p.line++,L=p.x=hs(i,this.left+d,this.right-s[p.line])):S>0&&D+_>this.bottom&&(L=p.x=L+n[p.line].width+d,p.line++,D=p.y=hs(i,this.top+k+d,this.bottom-n[p.line].height));const O=l.x(L);if(g(O,D,C),L=k8(N,L+w+f,b?L+T:this.right,e.rtl),m(l.x(L),D,C),b)p.x+=T+d;else if(typeof C.text!="string"){const $=u.lineHeight;p.y+=A2(C,$)+d}else p.y+=_}),y2(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,s=ns(n.font),r=cr(n.padding);if(!n.display)return;const i=El(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=s.size/2,u=r.top+l;let d,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),d=this.top+u,h=hs(e.align,h,this.right-f);else{const w=this.columnSizes.reduce((x,y)=>Math.max(x,y.height),0);d=u+hs(e.align,this.top,this.bottom-w-e.labels.padding-this._computeTitleHeight())}const p=hs(a,h,h+f);o.textAlign=i.textAlign(a2(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,gp(o,n.text,p,d,s)}_computeTitleHeight(){const e=this.options.title,n=ns(e.font),s=cr(e.padding);return e.display?n.lineHeight+s.height:0}_getLegendItemAt(e,n){let s,r,i;if(Vo(e,this.left,this.right)&&Vo(n,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(r=i[s],Vo(e,r.left,r.left+r.width)&&Vo(n,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(e){const n=this.options;if(!n7(e.type,n))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,i=JV(r,s);r&&!i&&Et(n.onLeave,[e,r,this],this),this._hoveredItem=s,s&&!i&&Et(n.onHover,[e,s,this],this)}else s&&Et(n.onClick,[e,s,this],this)}}function ZV(t,e,n,s,r){const i=e7(s,t,e,n),o=t7(r,s,e.lineHeight);return{itemWidth:i,itemHeight:o}}function e7(t,e,n,s){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+s.measureText(r).width}function t7(t,e,n){let s=t;return typeof e.text!="string"&&(s=A2(e,n)),s}function A2(t,e){const n=t.text?t.text.length:0;return e*n}function n7(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var s7={id:"legend",_element:kS,start(t,e,n){const s=t.legend=new kS({ctx:t.ctx,options:n,chart:t});Ui.configure(t,s,n),Ui.addBox(t,s)},stop(t){Ui.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const s=t.legend;Ui.configure(t,s,n),s.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const s=e.datasetIndex,r=n.chart;r.isDatasetVisible(s)?(r.hide(s),e.hidden=!0):(r.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(n?0:void 0),d=cr(u.borderWidth);return{text:e[l.index].label,fillStyle:u.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:u.borderColor,pointStyle:s||u.pointStyle,rotation:u.rotation,textAlign:r||u.textAlign,borderRadius:o&&(a||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const Qc={average(t){if(!t.length)return!1;let e,n,s=new Set,r=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),r+=l.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:r/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,s=e.y,r=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),d=g8(e,u);d<r&&(r=d,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,s=l.y}return{x:n,y:s}}};function gr(t,e){return e&&(hn(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Br(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function r7(t,e){const{element:n,datasetIndex:s,index:r}=e,i=t.getDatasetMeta(s).controller,{label:o,value:a}=i.getLabelAndValue(r);return{chart:t,label:o,parsed:i.getParsed(r),raw:t.data.datasets[s].data[r],formattedValue:a,dataset:i.getDataset(),dataIndex:r,datasetIndex:s,element:n}}function _S(t,e){const n=t.chart.ctx,{body:s,footer:r,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=ns(e.bodyFont),u=ns(e.titleFont),d=ns(e.footerFont),h=i.length,f=r.length,p=s.length,w=cr(e.padding);let x=w.height,y=0,g=s.reduce((k,_)=>k+_.before.length+_.lines.length+_.after.length,0);if(g+=t.beforeBody.length+t.afterBody.length,h&&(x+=h*u.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),g){const k=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;x+=p*k+(g-p)*l.lineHeight+(g-1)*e.bodySpacing}f&&(x+=e.footerMarginTop+f*d.lineHeight+(f-1)*e.footerSpacing);let m=0;const b=function(k){y=Math.max(y,n.measureText(k).width+m)};return n.save(),n.font=u.string,pt(t.title,b),n.font=l.string,pt(t.beforeBody.concat(t.afterBody),b),m=e.displayColors?o+2+e.boxPadding:0,pt(s,k=>{pt(k.before,b),pt(k.lines,b),pt(k.after,b)}),m=0,n.font=d.string,pt(t.footer,b),n.restore(),y+=w.width,{width:y,height:x}}function i7(t,e){const{y:n,height:s}=e;return n<s/2?"top":n>t.height-s/2?"bottom":"center"}function o7(t,e,n,s){const{x:r,width:i}=s,o=n.caretSize+n.caretPadding;if(t==="left"&&r+i+o>e.width||t==="right"&&r-i-o<0)return!0}function a7(t,e,n,s){const{x:r,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let u="center";return s==="center"?u=r<=(a+l)/2?"left":"right":r<=i/2?u="left":r>=o-i/2&&(u="right"),o7(u,t,e,n)&&(u="center"),u}function SS(t,e,n){const s=n.yAlign||e.yAlign||i7(t,n);return{xAlign:n.xAlign||e.xAlign||a7(t,e,n,s),yAlign:s}}function l7(t,e){let{x:n,width:s}=t;return e==="right"?n-=s:e==="center"&&(n-=s/2),n}function c7(t,e,n){let{y:s,height:r}=t;return e==="top"?s+=n:e==="bottom"?s-=r+n:s-=r/2,s}function jS(t,e,n,s){const{caretSize:r,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,u=r+i,{topLeft:d,topRight:h,bottomLeft:f,bottomRight:p}=Cl(o);let w=l7(e,a);const x=c7(e,l,u);return l==="center"?a==="left"?w+=u:a==="right"&&(w-=u):a==="left"?w-=Math.max(d,f)+r:a==="right"&&(w+=Math.max(h,p)+r),{x:ts(w,0,s.width-e.width),y:ts(x,0,s.height-e.height)}}function qh(t,e,n){const s=cr(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-s.right:t.x+s.left}function CS(t){return gr([],Br(t))}function u7(t,e,n){return hc(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function ES(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const O2={beforeTitle:$r,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return n[e.dataIndex]}return""},afterTitle:$r,beforeBody:$r,beforeLabel:$r,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return bt(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:$r,afterBody:$r,beforeFooter:$r,footer:$r,afterFooter:$r};function Kn(t,e,n,s){const r=t[e].call(n,s);return typeof r>"u"?O2[e].call(n,s):r}class Fy extends fc{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&n.options.animation&&s.animations,i=new v2(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=u7(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:s}=n,r=Kn(s,"beforeTitle",this,e),i=Kn(s,"title",this,e),o=Kn(s,"afterTitle",this,e);let a=[];return a=gr(a,Br(r)),a=gr(a,Br(i)),a=gr(a,Br(o)),a}getBeforeBody(e,n){return CS(Kn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:s}=n,r=[];return pt(e,i=>{const o={before:[],lines:[],after:[]},a=ES(s,i);gr(o.before,Br(Kn(a,"beforeLabel",this,i))),gr(o.lines,Kn(a,"label",this,i)),gr(o.after,Br(Kn(a,"afterLabel",this,i))),r.push(o)}),r}getAfterBody(e,n){return CS(Kn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:s}=n,r=Kn(s,"beforeFooter",this,e),i=Kn(s,"footer",this,e),o=Kn(s,"afterFooter",this,e);let a=[];return a=gr(a,Br(r)),a=gr(a,Br(i)),a=gr(a,Br(o)),a}_createItems(e){const n=this._active,s=this.chart.data,r=[],i=[],o=[];let a=[],l,u;for(l=0,u=n.length;l<u;++l)a.push(r7(this.chart,n[l]));return e.filter&&(a=a.filter((d,h,f)=>e.filter(d,h,f,s))),e.itemSort&&(a=a.sort((d,h)=>e.itemSort(d,h,s))),pt(a,d=>{const h=ES(e.callbacks,d);r.push(Kn(h,"labelColor",this,d)),i.push(Kn(h,"labelPointStyle",this,d)),o.push(Kn(h,"labelTextColor",this,d))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const s=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const a=Qc[s.position].call(this,r,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=_S(this,s),u=Object.assign({},a,l),d=SS(this.chart,s,u),h=jS(s,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,i={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,s,r){const i=this.getCaretPosition(e,s,r);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,s){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:u,bottomLeft:d,bottomRight:h}=Cl(a),{x:f,y:p}=e,{width:w,height:x}=n;let y,g,m,b,k,_;return i==="center"?(k=p+x/2,r==="left"?(y=f,g=y-o,b=k+o,_=k-o):(y=f+w,g=y+o,b=k-o,_=k+o),m=y):(r==="left"?g=f+Math.max(l,d)+o:r==="right"?g=f+w-Math.max(u,h)-o:g=this.caretX,i==="top"?(b=p,k=b-o,y=g-o,m=g+o):(b=p+x,k=b+o,y=g+o,m=g-o),_=b),{x1:y,x2:g,x3:m,y1:b,y2:k,y3:_}}drawTitle(e,n,s){const r=this.title,i=r.length;let o,a,l;if(i){const u=El(s.rtl,this.x,this.width);for(e.x=qh(this,s.titleAlign,s),n.textAlign=u.textAlign(s.titleAlign),n.textBaseline="middle",o=ns(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(r[l],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=s.titleMarginBottom-a)}}_drawColorBox(e,n,s,r,i){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:u}=i,d=ns(i.bodyFont),h=qh(this,"left",i),f=r.x(h),p=l<d.lineHeight?(d.lineHeight-l)/2:0,w=n.y+p;if(i.usePointStyle){const x={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},y=r.leftForLtr(f,u)+u/2,g=w+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,U_(e,x,y,g),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,U_(e,x,y,g)}else{e.lineWidth=it(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const x=r.leftForLtr(f,u),y=r.leftForLtr(r.xPlus(f,1),u-2),g=Cl(o.borderRadius);Object.values(g).some(m=>m!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,xp(e,{x,y:w,w:u,h:l,radius:g}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),xp(e,{x:y,y:w+1,w:u-2,h:l-2,radius:g}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(x,w,u,l),e.strokeRect(x,w,u,l),e.fillStyle=o.backgroundColor,e.fillRect(y,w+1,u-2,l-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,n,s){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:u,boxPadding:d}=s,h=ns(s.bodyFont);let f=h.lineHeight,p=0;const w=El(s.rtl,this.x,this.width),x=function(j){n.fillText(j,w.x(e.x+p),e.y+f/2),e.y+=f+i},y=w.textAlign(o);let g,m,b,k,_,C,S;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=qh(this,y,s),n.fillStyle=s.bodyColor,pt(this.beforeBody,x),p=a&&y!=="right"?o==="center"?u/2+d:u+2+d:0,k=0,C=r.length;k<C;++k){for(g=r[k],m=this.labelTextColors[k],n.fillStyle=m,pt(g.before,x),b=g.lines,a&&b.length&&(this._drawColorBox(n,e,k,w,s),f=Math.max(h.lineHeight,l)),_=0,S=b.length;_<S;++_)x(b[_]),f=h.lineHeight;pt(g.after,x)}p=0,f=h.lineHeight,pt(this.afterBody,x),e.y-=i}drawFooter(e,n,s){const r=this.footer,i=r.length;let o,a;if(i){const l=El(s.rtl,this.x,this.width);for(e.x=qh(this,s.footerAlign,s),e.y+=s.footerMarginTop,n.textAlign=l.textAlign(s.footerAlign),n.textBaseline="middle",o=ns(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s.footerSpacing}}drawBackground(e,n,s,r){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:u,height:d}=s,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:w}=Cl(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+h,l),o==="top"&&this.drawCaret(e,n,s,r),n.lineTo(a+u-f,l),n.quadraticCurveTo(a+u,l,a+u,l+f),o==="center"&&i==="right"&&this.drawCaret(e,n,s,r),n.lineTo(a+u,l+d-w),n.quadraticCurveTo(a+u,l+d,a+u-w,l+d),o==="bottom"&&this.drawCaret(e,n,s,r),n.lineTo(a+p,l+d),n.quadraticCurveTo(a,l+d,a,l+d-p),o==="center"&&i==="left"&&this.drawCaret(e,n,s,r),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,s=this.$animations,r=s&&s.x,i=s&&s.y;if(r||i){const o=Qc[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=_S(this,e),l=Object.assign({},o,this._size),u=SS(n,e,l),d=jS(e,l,u,n);(r._to!==d.x||i._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=cr(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=s,this.drawBackground(i,e,r,n),x2(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),y2(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const s=this._active,r=e.map(({datasetIndex:a,index:l})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[l],index:l}}),i=!dp(s,r),o=this._positionChanged(r,n);(i||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,s),a=this._positionChanged(o,e),l=n||!dp(o,i)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,s,r){const i=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,s);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:s,caretY:r,options:i}=this,o=Qc[i.position].call(this,e,n);return o!==!1&&(s!==o.x||r!==o.y)}}$e(Fy,"positioners",Qc);var d7={id:"tooltip",_element:Fy,positioners:Qc,afterInit(t,e,n){n&&(t.tooltip=new Fy({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:O2},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const h7=(t,e,n,s)=>(typeof e=="string"?(n=t.push(e)-1,s.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function f7(t,e,n,s){const r=t.indexOf(e);if(r===-1)return h7(t,e,n,s);const i=t.lastIndexOf(e);return r!==i?n:r}const p7=(t,e)=>t===null?null:ts(Math.round(t),0,e);function NS(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class zy extends pc{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:r,label:i}of n)s[r]===i&&s.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(bt(e))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===e?n:f7(s,e,st(n,e),this._addedLabels),p7(n,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),n||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const e=this.min,n=this.max,s=this.options.offset,r=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return NS.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}$e(zy,"id","category"),$e(zy,"defaults",{ticks:{callback:NS}});function m7(t,e){const n=[],{bounds:r,step:i,min:o,max:a,precision:l,count:u,maxTicks:d,maxDigits:h,includeBounds:f}=t,p=i||1,w=d-1,{min:x,max:y}=e,g=!bt(o),m=!bt(a),b=!bt(u),k=(y-x)/(h+1);let _=O_((y-x)/w/p)*p,C,S,j,N;if(_<1e-14&&!g&&!m)return[{value:x},{value:y}];N=Math.ceil(y/_)-Math.floor(x/_),N>w&&(_=O_(N*_/w/p)*p),bt(l)||(C=Math.pow(10,l),_=Math.ceil(_*C)/C),r==="ticks"?(S=Math.floor(x/_)*_,j=Math.ceil(y/_)*_):(S=x,j=y),g&&m&&i&&f8((a-o)/i,_/1e3)?(N=Math.round(Math.min((a-o)/_,d)),_=(a-o)/N,S=o,j=a):b?(S=g?o:S,j=m?a:j,N=u-1,_=(j-S)/N):(N=(j-S)/_,bf(N,Math.round(N),_/1e3)?N=Math.round(N):N=Math.ceil(N));const T=Math.max(M_(_),M_(S));C=Math.pow(10,bt(l)?T:l),S=Math.round(S*C)/C,j=Math.round(j*C)/C;let L=0;for(g&&(f&&S!==o?(n.push({value:o}),S<o&&L++,bf(Math.round((S+L*_)*C)/C,o,TS(o,k,t))&&L++):S<o&&L++);L<N;++L){const D=Math.round((S+L*_)*C)/C;if(m&&D>a)break;n.push({value:D})}return m&&f&&j!==a?n.length&&bf(n[n.length-1].value,a,TS(a,k,t))?n[n.length-1].value=a:n.push({value:a}):(!m||j===a)&&n.push({value:j}),n}function TS(t,e,{horizontal:n,minRotation:s}){const r=Zr(s),i=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class g7 extends pc{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return bt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:r,max:i}=this;const o=l=>r=n?r:l,a=l=>i=s?i:l;if(e){const l=no(r),u=no(i);l<0&&u<0?a(0):l>0&&u>0&&o(0)}if(r===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(r-l)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=e,r;return s?(r=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=m7(r,i);return e.bounds==="ticks"&&p8(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const r=(s-n)/Math.max(e.length-1,1)/2;n-=r,s+=r}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(e){return F0(e,this.chart.options.locale,this.options.ticks.format)}}class By extends g7{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Hs(e)?e:0,this.max=Hs(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,s=Zr(this.options.ticks.minRotation),r=(e?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}$e(By,"id","linear"),$e(By,"defaults",{ticks:{callback:c2.formatters.numeric}});const om={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Jn=Object.keys(om);function PS(t,e){return t-e}function RS(t,e){if(bt(e))return null;const n=t._adapter,{parser:s,round:r,isoWeekday:i}=t._parseOpts;let o=e;return typeof s=="function"&&(o=s(o)),Hs(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(pp(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,r)),+o)}function AS(t,e,n,s){const r=Jn.length;for(let i=Jn.indexOf(t);i<r-1;++i){const o=om[Jn[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=s)return Jn[i]}return Jn[r-1]}function x7(t,e,n,s,r){for(let i=Jn.length-1;i>=Jn.indexOf(n);i--){const o=Jn[i];if(om[o].common&&t._adapter.diff(r,s,o)>=e-1)return o}return Jn[n?Jn.indexOf(n):0]}function y7(t){for(let e=Jn.indexOf(t)+1,n=Jn.length;e<n;++e)if(om[Jn[e]].common)return Jn[e]}function OS(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:s,hi:r}=$0(n,e),i=n[s]>=e?n[s]:n[r];t[i]=!0}}function v7(t,e,n,s){const r=t._adapter,i=+r.startOf(e[0].value,s),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+r.add(a,1,s))l=n[a],l>=0&&(e[l].major=!0);return e}function MS(t,e,n){const s=[],r={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],r[a]=o,s.push({value:a,major:!1});return i===0||!n?s:v7(t,s,r,n)}class wp extends pc{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const s=e.time||(e.time={}),r=this._adapter=new AW._date(e.adapters.date);r.init(n),uu(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:RS(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,s=e.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(u){!o&&!isNaN(u.min)&&(r=Math.min(r,u.min)),!a&&!isNaN(u.max)&&(i=Math.max(i,u.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=Hs(r)&&!isNaN(r)?r:+n.startOf(Date.now(),s),i=Hs(i)&&!isNaN(i)?i:+n.endOf(Date.now(),s)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],s=e[e.length-1]),{min:n,max:s}}buildTicks(){const e=this.options,n=e.time,s=e.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=this.max,a=v8(r,i,o);return this._unit=n.unit||(s.autoSkip?AS(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):x7(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:y7(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),MS(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,s=0,r,i;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?s=i:s=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=ts(n,0,o),s=ts(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const e=this._adapter,n=this.min,s=this.max,r=this.options,i=r.time,o=i.unit||AS(i.minUnit,n,s,this._getLabelCapacity(n)),a=st(r.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,u=pp(l)||l===!0,d={};let h=n,f,p;if(u&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,u?"day":o),e.diff(s,n,o)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+o);const w=r.ticks.source==="data"&&this.getDataTimestamps();for(f=h,p=0;f<s;f=+e.add(f,a,o),p++)OS(d,f,w);return(f===s||r.bounds==="ticks"||p===1)&&OS(d,f,w),Object.keys(d).sort(PS).map(x=>+x)}getLabelForValue(e){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(e,s.tooltipFormat):n.format(e,s.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,i=this._unit,o=n||r[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,s,r){const i=this.options,o=i.ticks.callback;if(o)return Et(o,[e,n,s],this);const a=i.time.displayFormats,l=this._unit,u=this._majorUnit,d=l&&a[l],h=u&&a[u],f=s[n],p=u&&h&&f&&f.major;return this._adapter.format(e,r||(p?h:d))}generateTickLabels(e){let n,s,r;for(n=0,s=e.length;n<s;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,s=this.ctx.measureText(e).width,r=Zr(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:s*i+a*o,h:s*o+a*i}}_getLabelCapacity(e){const n=this.options.time,s=n.displayFormats,r=s[n.unit]||s.millisecond,i=this._tickFormatFunction(e,0,MS(this,[e],this._majorUnit),r),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,s;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,s=r.length;n<s;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,s;if(e.length)return e;const r=this.getLabels();for(n=0,s=r.length;n<s;++n)e.push(RS(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return r2(e.sort(PS))}}$e(wp,"id","time"),$e(wp,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Kh(t,e,n){let s=0,r=t.length-1,i,o,a,l;n?(e>=t[s].pos&&e<=t[r].pos&&({lo:s,hi:r}=My(t,"pos",e)),{pos:i,time:a}=t[s],{pos:o,time:l}=t[r]):(e>=t[s].time&&e<=t[r].time&&({lo:s,hi:r}=My(t,"time",e)),{time:i,pos:a}=t[s],{time:o,pos:l}=t[r]);const u=o-i;return u?a+(l-a)*(e-i)/u:a}class IS extends wp{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Kh(n,this.min),this._tableRange=Kh(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:s}=this,r=[],i=[];let o,a,l,u,d;for(o=0,a=e.length;o<a;++o)u=e[o],u>=n&&u<=s&&r.push(u);if(r.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,a=r.length;o<a;++o)d=r[o+1],l=r[o-1],u=r[o],Math.round((d+l)/2)!==u&&i.push({time:u,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((r,i)=>r-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?e=this.normalize(n.concat(s)):e=n.length?n:s,e=this._cache.all=e,e}getDecimalForValue(e){return(Kh(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return Kh(this._table,s*this._tableRange+this._minPos,!0)}}$e(IS,"id","timeseries"),$e(IS,"defaults",wp.defaults);Sr.register(Yc,Sf,zy,hl,Dy,wf,s7,By,d7);const Ln={pending:"rgba(234, 179, 8, 0.7)",rejected:"rgba(239, 68, 68, 0.7)",returned:"rgba(249, 115, 22, 0.7)",submitted:"rgba(59, 130, 246, 0.7)",accepted:"rgba(34, 197, 94, 0.7)"},b7=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}];function w7(t){const e=t-4,n=t+1,s=[];for(let r=e;r<=n;r+=1)s.push(r);return s}function On({icon:t,label:e,value:n,helper:s,accentClass:r,onClick:i}){const o=!!i;return c.jsxs(zt,{className:`p-4 ${o?"cursor-pointer hover:shadow-md transition-shadow":""}`,onClick:i,role:o?"button":void 0,tabIndex:o?0:void 0,onKeyDown:o?a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),i==null||i())}:void 0,children:[c.jsxs("div",{className:"flex items-center justify-between gap-3",children:[c.jsx("div",{className:`h-10 w-10 rounded-xl flex items-center justify-center ${r}`,children:c.jsx(t,{size:18})}),c.jsx("div",{className:"text-2xl font-semibold",children:n})]}),c.jsx("div",{className:"mt-2 text-xs text-black/55 dark:text-white/60",children:e}),s?c.jsx("div",{className:"text-xs text-black/45 dark:text-white/55",children:s}):null]})}function Ka({title:t,children:e}){return c.jsxs(_t,{className:"h-full",children:[c.jsx(Kt,{children:c.jsx(Qt,{children:t})}),c.jsx(Gt,{children:c.jsx("div",{className:"h-[260px]",children:e})})]})}function M2({title:t,subtitle:e,children:n,defaultOpen:s=!1}){const[r,i]=v.useState(s);return c.jsxs(zt,{className:"p-3",children:[c.jsxs("button",{type:"button",className:"flex w-full items-center justify-between gap-3 text-left",onClick:()=>i(o=>!o),"aria-expanded":r,children:[c.jsxs("div",{className:"min-w-0",children:[c.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85 truncate",children:t}),e?c.jsx("div",{className:"text-xs text-black/50 dark:text-white/60",children:e}):null]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-black/50 dark:text-white/55",children:[c.jsx("span",{children:r?"Hide":"View"}),c.jsx(es,{size:16,className:`transition-transform ${r?"rotate-180":""}`})]})]}),r?c.jsx("div",{className:"mt-3 space-y-2 text-xs text-black/60 dark:text-white/65",children:n}):null]})}function Ga({type:t,data:e,options:n}){const s=ge.useRef(null);return ge.useEffect(()=>{if(!s.current)return;const r=Sr.getChart(s.current);r&&r.destroy();const i=new Sr(s.current,{type:t,data:e,options:n});return()=>i.destroy()},[e,n,t]),c.jsx("canvas",{ref:s})}function k7(t){const e=Number(t)||0;return e>=80?"bg-emerald-500/80":e>=60?"bg-amber-500/80":"bg-rose-500/80"}function DS(t){if(!t)return"--";const e=Us(t);return e?e.toLocaleDateString():t}function _7({mode:t,period:e}){if(!e)return"Current period";if(t==="month"){const[n,s]=e.split("-");return new Date(Number(n),Number(s)-1,1).toLocaleString(void 0,{month:"long",year:"numeric"})}if(t==="year")return e;if(t==="range"){const[n,s]=e.split(",");return`${n} to ${s}`}return e}function LS(t){return{labels:["Pending","Rejected","Returned","Submitted","Accepted"],datasets:[{data:[t.pending,t.rejected,t.returned,t.submitted,t.accepted],backgroundColor:[Ln.pending,Ln.rejected,Ln.returned,Ln.submitted,Ln.accepted],borderWidth:0}]}}function Gh(t){const e={Pending:0,Rejected:0,Returned:0,"Submitted to Sales":0,Accepted:0};return t.forEach(n=>{const s=n.status||"";s.includes("Pending")||s==="Critique"||s==="Raw"?e.Pending+=1:s==="Rejected"||s==="Editing"?e.Rejected+=1:s==="Returned"?e.Returned+=1:s==="Submitted to Sales"?e["Submitted to Sales"]+=1:(s==="Accepted"||s==="Done")&&(e.Accepted+=1)}),e}function Lc(t){return t.length?c.jsx("div",{className:"space-y-3",children:t.map(e=>c.jsx("div",{className:"rounded-xl border border-black/5 dark:border-white/10 bg-white/60 dark:bg-white/5 p-3",children:c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsxs("div",{className:"min-w-0",children:[c.jsxs("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85 truncate",children:["#",e.task_number," - ",e.brand]}),c.jsxs("div",{className:"text-xs text-black/50 dark:text-white/60",children:[e.status," - ",e.videographer||"Unassigned"]})]}),c.jsxs("div",{className:"text-right text-xs text-black/50 dark:text-white/60",children:[c.jsxs("div",{children:["Film: ",DS(e.filming_deadline)]}),c.jsxs("div",{children:["Due: ",DS(e.submission_date)]})]})]})},e.task_number))}):c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No tasks found."})}function Yh(t){return t.length?c.jsx("div",{className:"space-y-4",children:t.map(e=>c.jsxs("div",{className:"rounded-xl border border-black/5 dark:border-white/10 p-3",children:[c.jsxs("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:["#",e.task_number," - ",e.brand]}),c.jsx("div",{className:"mt-2 space-y-2",children:(e.versions||[]).map(n=>c.jsxs("div",{className:"rounded-lg bg-black/5 dark:bg-white/5 p-2 text-xs",children:[c.jsxs("div",{className:"font-semibold",children:["Version ",n.version]}),c.jsx("div",{className:"mt-1 text-black/50 dark:text-white/60",children:(n.lifecycle||[]).map(s=>`${s.stage} (${s.at||""})`).join(" -> ")})]},n.version))})]},e.task_number))}):c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No versions found."})}function Fg(t){return t.length?c.jsx("div",{className:"space-y-4",children:t.map(e=>c.jsxs("div",{className:"rounded-xl border border-black/5 dark:border-white/10 p-3",children:[c.jsxs("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:["#",e.task_number," - ",e.brand]}),c.jsx("div",{className:"mt-2 space-y-2",children:e.rejectionEvents.map((n,s)=>c.jsxs("div",{className:"rounded-lg bg-black/5 dark:bg-white/5 p-2 text-xs",children:[c.jsxs("div",{className:"font-semibold",children:["Version ",n.version]}),c.jsxs("div",{className:"text-black/50 dark:text-white/60",children:[n.event.rejection_class||"Unclassified"," - ",n.event.rejection_comments||"No notes"]})]},`${e.task_number}-${s}`))})]},e.task_number))}):c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No rejection events."})}function S7(t){if(!t.length)return c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No pending reviews."});const e=t.reduce((n,s)=>{const r=s.task.task_number;return n[r]||(n[r]={task:s.task,versions:[]}),n[r].versions.push(s),n},{});return c.jsx("div",{className:"space-y-3",children:Object.values(e).map(n=>c.jsx(M2,{title:`#${n.task.task_number} - ${n.task.brand}`,subtitle:n.task.videographer?`Videographer: ${n.task.videographer}`:"Videographer: --",children:n.versions.map(s=>c.jsxs("div",{className:"rounded-lg bg-black/5 dark:bg-white/5 p-2",children:[c.jsxs("div",{className:"font-semibold",children:["Version ",s.version.version]}),c.jsxs("div",{children:["Waiting: ",s.waitingHours??"--"," hrs"]}),c.jsxs("div",{children:["Uploaded: ",s.uploadTime?s.uploadTime.toLocaleString():"--"]})]},`${n.task.task_number}-${s.version.version}`))},n.task.task_number))})}function j7(t){if(!t.length)return c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No response data."});const e=t.reduce((n,s)=>{const r=s.task.task_number;return n[r]||(n[r]={task:s.task,responses:[]}),n[r].responses.push(s),n},{});return c.jsx("div",{className:"space-y-3",children:Object.values(e).map(n=>c.jsx(M2,{title:`#${n.task.task_number} - ${n.task.brand}`,subtitle:n.task.videographer?`Videographer: ${n.task.videographer}`:"Videographer: --",children:n.responses.map((s,r)=>c.jsxs("div",{className:"rounded-lg bg-black/5 dark:bg-white/5 p-2",children:[c.jsxs("div",{className:"font-semibold",children:["Version ",s.version.version]}),c.jsxs("div",{children:["Decision: ",s.decision]}),c.jsxs("div",{children:["Response: ",s.responseHours," hrs"]}),c.jsxs("div",{children:["Uploaded: ",s.uploadTime?s.uploadTime.toLocaleString():"--"]}),c.jsxs("div",{children:["Reviewed: ",s.reviewTime?s.reviewTime.toLocaleString():"--"]}),s.rejectionClass?c.jsxs("div",{children:["Class: ",s.rejectionClass]}):null,s.comments?c.jsxs("div",{children:["Notes: ",s.comments]}):null]},`${n.task.task_number}-${r}`))},n.task.task_number))})}function C7(){const t=new Date,e=t.getFullYear(),[n,s]=v.useState("month"),[r,i]=v.useState(e),[o,a]=v.useState(t.getMonth()+1),[l,u]=v.useState(""),[d,h]=v.useState(""),[f,p]=v.useState(!1),[w,x]=v.useState(null),[y,g]=v.useState(null),m=w7(e),b=v.useMemo(()=>m.map(me=>({value:me,label:String(me)})),[m]),k=v.useMemo(()=>[{value:"month",label:"Month"},{value:"year",label:"Year"},{value:"range",label:"Range"}],[]),_=v.useMemo(()=>n==="month"?`${r}-${String(o).padStart(2,"0")}`:n==="year"?`${r}`:n==="range"&&l&&d?`${l},${d}`:"",[n,l,d,o,r]),C=an({queryKey:["video-critique","dashboard",n,_],queryFn:()=>m4({mode:n,period:_})}),S=C.data||{},j=S.tasks||[],N=S.summary||{},T=S.pie||{},L=S.reviewer||{},D=S.summary_videographers&&Object.keys(S.summary_videographers).length?S.summary_videographers:iT(j),O=S.videographers||{},$=v.useMemo(()=>lT(j),[j]),I=v.useMemo(()=>Ci(j),[j]),A=v.useMemo(()=>oT(j),[j]),W=v.useMemo(()=>aT(j),[j]),E=v.useMemo(()=>({labels:["Completed","Not Completed"],datasets:[{data:[T.completed||0,T.not_completed||0],backgroundColor:["rgba(34, 197, 94, 0.7)","rgba(239, 68, 68, 0.7)"],borderWidth:0}]}),[T.completed,T.not_completed]),P=v.useMemo(()=>{const me=$.tasksStarted||0,fe=T.completed||0,De=Math.max(me-fe,0);return{labels:["Completed","Not Completed"],datasets:[{data:[fe,De],backgroundColor:["rgba(34, 197, 94, 0.7)","rgba(239, 68, 68, 0.7)"],borderWidth:0}]}},[$.tasksStarted,T.completed]),F=v.useMemo(()=>LS(I),[I]),V=v.useMemo(()=>Object.entries(D).sort((me,fe)=>fe[1].total-me[1].total),[D]),H=!!w,he=!!y,ee=y?D[y]:null,U=y?O[y]||[]:[],Q=v.useMemo(()=>qu(j,"pending"),[j]),de=v.useMemo(()=>qu(j,"submitted"),[j]),Z=v.useMemo(()=>gg(j,"hod"),[j]),be=v.useMemo(()=>gg(j,"hos"),[j]),Ae=v.useMemo(()=>{const me={};let fe=0,De=0;j.forEach(G=>{(G.versions||[]).forEach(le=>{const Y=le.lifecycle||[];if(!Y.length)return;const B=Y[Y.length-1],xe=((B==null?void 0:B.stage)||"").toLowerCase();(xe==="accepted"||xe==="done")&&(fe+=1),(xe==="rejected"||xe==="editing"||xe==="returned")&&(De+=1),Y.forEach(je=>{const Ce=(je.stage||"").toLowerCase();if(Ce==="rejected"||Ce==="editing"||Ce==="returned"){const Le=je.rejection_class||"Unclassified";me[Le]=(me[Le]||0)+1}})})});const J=fe+De,pe=J?(fe/J*100).toFixed(1):"0",ie=J?(De/J*100).toFixed(1):"0",K=Object.entries(me).sort((G,le)=>le[1]-G[1]);return{acceptedPct:pe,rejectedPct:ie,classes:K,totalRejections:De}},[j]);return C.isLoading?c.jsxs(_t,{children:[c.jsx(Kt,{children:c.jsx(Qt,{children:"Video Critique Dashboard"})}),c.jsx(Gt,{children:c.jsx(Ye,{text:"Loading dashboard",className:"text-sm text-black/60 dark:text-white/65"})})]}):c.jsxs("div",{className:"flex flex-col gap-4 min-h-0 pb-4",children:[c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 px-1",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Video Critique Dashboard"}),c.jsx("div",{className:"text-xs text-black/50 dark:text-white/60",children:_7({mode:n,period:_})})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsx(at,{value:n,options:k,onChange:s,className:"sm:w-[200px]"}),n==="month"?c.jsxs(c.Fragment,{children:[c.jsx(at,{value:o,options:b7,onChange:a,className:"sm:w-[200px]"}),c.jsx(at,{value:r,options:b,onChange:i,className:"sm:w-[200px]"})]}):null,n==="year"?c.jsx(at,{value:r,options:b,onChange:i,className:"sm:w-[200px]"}):null,n==="range"?c.jsxs(te,{variant:"ghost",className:"rounded-2xl",onClick:()=>p(!0),children:[c.jsx(DM,{size:16,className:"mr-2"}),"Pick Range"]}):null,c.jsxs(te,{variant:"ghost",className:"rounded-2xl",onClick:()=>C.refetch(),children:[c.jsx(VM,{size:16,className:"mr-2"}),"Refresh"]})]})]}),c.jsxs("div",{className:"grid gap-3 md:grid-cols-2 xl:grid-cols-6",children:[c.jsx(On,{icon:hf,label:"Total Tasks",value:N.total||0,helper:"Tasks created",accentClass:"bg-black/5 dark:bg-white/10 text-black/70 dark:text-white/80",onClick:()=>x("total_created")}),c.jsx(On,{icon:fh,label:"Assigned",value:N.assigned||0,helper:"Assigned to videographers",accentClass:"bg-blue-500/10 text-blue-700 dark:text-blue-200",onClick:()=>x("total_assigned")}),c.jsx(On,{icon:ph,label:"Tasks Started",value:$.tasksStarted||0,helper:"Filming date passed",accentClass:"bg-yellow-500/10 text-yellow-700 dark:text-yellow-200",onClick:()=>x("total_started")}),c.jsx(On,{icon:mh,label:"Late Tasks",value:$.lateTasks||0,helper:"Submission overdue",accentClass:"bg-red-500/10 text-red-700 dark:text-red-200",onClick:()=>x("total_late")}),c.jsx(On,{icon:hf,label:"Uploads",value:N.uploads||0,helper:"Total versions",accentClass:"bg-purple-500/10 text-purple-700 dark:text-purple-200",onClick:()=>x("upload_ratio")}),c.jsx(On,{icon:fh,label:"Completed",value:T.completed||0,helper:"Accepted or done",accentClass:"bg-emerald-500/10 text-emerald-700 dark:text-emerald-200",onClick:()=>x("completed")})]}),c.jsxs("div",{className:"grid gap-3 md:grid-cols-2 xl:grid-cols-6",children:[c.jsx(On,{icon:ph,label:"Pending HOD",value:$.pendingHOD||0,helper:"Versions in critique",accentClass:"bg-yellow-500/10 text-yellow-700 dark:text-yellow-200",onClick:()=>x("pending_hod")}),c.jsx(On,{icon:ph,label:"Pending HOS",value:$.pendingHOS||0,helper:"Submitted to sales",accentClass:"bg-blue-500/10 text-blue-700 dark:text-blue-200",onClick:()=>x("pending_hos")}),c.jsx(On,{icon:mh,label:"Rejected by HOD",value:$.rejectionsByHOD||0,helper:"Editing / rejected",accentClass:"bg-red-500/10 text-red-700 dark:text-red-200",onClick:()=>x("rejected_hod")}),c.jsx(On,{icon:mh,label:"Rejected by HOS",value:$.rejectionsByHOS||0,helper:"Returned",accentClass:"bg-orange-500/10 text-orange-700 dark:text-orange-200",onClick:()=>x("rejected_hos")}),c.jsx(On,{icon:hf,label:"Upload Ratio",value:$.uploadRatio||"0",helper:"Avg versions/task",accentClass:"bg-black/5 dark:bg-white/10 text-black/70 dark:text-white/80",onClick:()=>x("upload_ratio")}),c.jsx(On,{icon:fh,label:"Acceptance Rate",value:`${N.accepted_pct||0}%`,helper:"Accepted vs reviewed",accentClass:"bg-emerald-500/10 text-emerald-700 dark:text-emerald-200",onClick:()=>x("acceptance_rate")})]}),c.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[c.jsx(Ka,{title:"Completion Overview",children:c.jsx(Ga,{type:"doughnut",data:E,options:{maintainAspectRatio:!1}})}),c.jsx(Ka,{title:"Started vs Completed",children:c.jsx(Ga,{type:"doughnut",data:P,options:{maintainAspectRatio:!1}})}),c.jsx(Ka,{title:"Status Distribution",children:c.jsx(Ga,{type:"bar",data:F,options:{maintainAspectRatio:!1,indexAxis:"y",scales:{x:{ticks:{color:"#94a3b8"},grid:{color:"rgba(148,163,184,0.2)"}},y:{ticks:{color:"#94a3b8"},grid:{color:"rgba(148,163,184,0.2)"}}}}})})]}),c.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[c.jsxs(_t,{children:[c.jsx(Kt,{children:c.jsx(Qt,{children:"Reviewer Performance"})}),c.jsx(Gt,{children:c.jsxs("div",{className:"space-y-3 text-sm",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-black/60 dark:text-white/60",children:"Avg response time"}),c.jsx("span",{className:"font-semibold",children:L.avg_response_display||"0 hrs"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-black/60 dark:text-white/60",children:"Handled"}),c.jsx("span",{className:"font-semibold",children:L.handled||0})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-black/60 dark:text-white/60",children:"Accepted by HOS"}),c.jsx("span",{className:"font-semibold",children:L.accepted||0})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-black/60 dark:text-white/60",children:"Success rate"}),c.jsxs("span",{className:"font-semibold",children:[L.handled_percent||0,"%"]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-black/60 dark:text-white/60",children:"Pending reviews"}),c.jsx("span",{className:"font-semibold",children:A.count||0})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[c.jsx(te,{variant:"secondary",className:"rounded-2xl w-full justify-center h-auto py-2 whitespace-normal text-center leading-snug",onClick:()=>x("response_time"),children:"View response times"}),c.jsx(te,{variant:"secondary",className:"rounded-2xl w-full justify-center h-auto py-2 whitespace-normal text-center leading-snug",onClick:()=>x("pending_reviews"),children:"View pending reviews"})]})]})})]}),c.jsxs(_t,{className:"lg:col-span-2",children:[c.jsx(Kt,{children:c.jsx(Qt,{children:"Videographers"})}),c.jsx(Gt,{children:V.length?c.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:V.map(([me,fe])=>c.jsxs("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white/60 dark:bg-white/5 p-4 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>g(me),children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:me}),c.jsxs("div",{className:"text-xs text-black/50 dark:text-white/60",children:[fe.total," tasks"]})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("div",{className:"text-lg font-semibold",children:[fe.accepted_pct,"%"]}),c.jsx("div",{className:"text-xs text-black/50 dark:text-white/60",children:"Acceptance"})]})]}),c.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-xs text-black/60 dark:text-white/60",children:[c.jsxs("div",{children:["Started: ",fe.started]}),c.jsxs("div",{children:["Late: ",fe.late]}),c.jsxs("div",{children:["Completed: ",fe.completed]}),c.jsxs("div",{children:["Uploads: ",fe.uploads]})]}),c.jsx("div",{className:"mt-3 h-2 rounded-full bg-black/10 dark:bg-white/10 overflow-hidden",children:c.jsx("div",{className:`h-full ${k7(fe.accepted_pct)}`,style:{width:`${fe.accepted_pct}%`}})})]},me))}):c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No videographer data."})})]})]}),c.jsxs(ks,{open:H,onClose:()=>x(null),title:"Details",maxWidth:"820px",children:[w==="total_created"?Lc(j):null,w==="total_assigned"?Lc(j.filter(me=>me.status!=="Not assigned yet")):null,w==="total_started"?Lc(j.filter(me=>{const fe=Us(me.filming_deadline||"");if(!fe)return!1;const De=new Date;return De.setHours(0,0,0,0),fe<=De})):null,w==="total_late"?Lc(j.filter(xg)):null,w==="completed"?Lc(j.filter(me=>me.status==="Accepted"||me.status==="Done")):null,w==="pending_hod"?Yh(Q.map(me=>({...me.task,versions:[me.version]}))):null,w==="pending_hos"?Yh(de.map(me=>({...me.task,versions:[me.version]}))):null,w==="rejected_hod"?Fg(Z):null,w==="rejected_hos"?Fg(be):null,w==="upload_ratio"?Yh(j.filter(me=>{var fe;return(fe=me.versions)==null?void 0:fe.length})):null,w==="acceptance_rate"?c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs(zt,{className:"p-4 text-center",children:[c.jsxs("div",{className:"text-2xl font-semibold text-emerald-600",children:[Ae.acceptedPct,"%"]}),c.jsx("div",{className:"text-xs text-black/50 dark:text-white/60",children:"Acceptance"})]}),c.jsxs(zt,{className:"p-4 text-center",children:[c.jsxs("div",{className:"text-2xl font-semibold text-red-600",children:[Ae.rejectedPct,"%"]}),c.jsx("div",{className:"text-xs text-black/50 dark:text-white/60",children:"Rejection"})]})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-black/70 dark:text-white/70 mb-2",children:"Rejection classes"}),Ae.classes.length?c.jsx("div",{className:"space-y-2",children:Ae.classes.map(([me,fe])=>c.jsx("div",{className:"rounded-lg bg-black/5 dark:bg-white/5 p-2 text-xs",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{children:me}),c.jsx("span",{children:fe})]})},me))}):c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No rejection data."})]})]}):null,w==="response_time"?j7(W):null,w==="pending_reviews"?S7(A.reviews||[]):null]}),c.jsx(ks,{open:he,onClose:()=>g(null),title:y?`${y} Details`:"Videographer",maxWidth:"980px",children:y&&ee?c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs(zt,{className:"p-4 text-center",children:[c.jsxs("div",{className:"text-2xl font-semibold",children:[ee.accepted_pct,"%"]}),c.jsx("div",{className:"text-xs text-black/50 dark:text-white/60",children:"Acceptance rate"})]}),c.jsxs(zt,{className:"p-4 text-center",children:[c.jsx("div",{className:"text-2xl font-semibold",children:ee.late}),c.jsx("div",{className:"text-xs text-black/50 dark:text-white/60",children:"Late tasks"})]})]}),c.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[c.jsx(On,{icon:ph,label:"Pending",value:Ci(U).pending,accentClass:"bg-yellow-500/10 text-yellow-700 dark:text-yellow-200"}),c.jsx(On,{icon:mh,label:"Rejected",value:Ci(U).rejected,accentClass:"bg-red-500/10 text-red-700 dark:text-red-200"}),c.jsx(On,{icon:fh,label:"Accepted",value:Ci(U).accepted,accentClass:"bg-emerald-500/10 text-emerald-700 dark:text-emerald-200"})]}),c.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[c.jsx(Ka,{title:"Version Distribution",children:c.jsx(Ga,{type:"bar",data:LS(Ci(U)),options:{maintainAspectRatio:!1,indexAxis:"y"}})}),c.jsx(Ka,{title:"All Tasks Status",children:c.jsx(Ga,{type:"pie",data:{labels:Object.keys(Gh(U)),datasets:[{data:Object.values(Gh(U)),backgroundColor:[Ln.pending,Ln.rejected,Ln.returned,Ln.submitted,Ln.accepted],borderWidth:0}]},options:{maintainAspectRatio:!1}})})]}),c.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[c.jsx(Ka,{title:"Overdue Tasks",children:c.jsx(Ga,{type:"pie",data:{labels:Object.keys(Gh(U.filter(xg))),datasets:[{data:Object.values(Gh(U.filter(xg))),backgroundColor:[Ln.pending,Ln.rejected,Ln.returned,Ln.submitted,Ln.accepted],borderWidth:0}]},options:{maintainAspectRatio:!1}})}),c.jsxs(_t,{children:[c.jsx(Kt,{children:c.jsx(Qt,{children:"Failure Analysis"})}),c.jsx(Gt,{children:Fg(gg(U,"hod"))})]})]}),c.jsxs(_t,{children:[c.jsx(Kt,{children:c.jsx(Qt,{children:"Version History"})}),c.jsx(Gt,{children:Yh(U)})]})]}):null}),c.jsx(ks,{open:f,onClose:()=>p(!1),title:"Select date range",maxWidth:"520px",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid gap-3",children:[c.jsx("label",{className:"text-xs text-black/60 dark:text-white/60",children:"Start date"}),c.jsx("input",{type:"date",value:l,onChange:me=>u(me.target.value),className:"rounded-2xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-xs"})]}),c.jsxs("div",{className:"grid gap-3",children:[c.jsx("label",{className:"text-xs text-black/60 dark:text-white/60",children:"End date"}),c.jsx("input",{type:"date",value:d,onChange:me=>h(me.target.value),className:"rounded-2xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-xs"})]}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx(te,{variant:"ghost",className:"rounded-2xl",onClick:()=>p(!1),children:"Cancel"}),c.jsx(te,{className:"rounded-2xl",onClick:()=>p(!1),children:"Apply"})]})]})})]})}function E7(){const[t,e]=v.useState("chat");return c.jsxs("div",{className:"h-full min-h-0 flex flex-col gap-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(te,{variant:t==="chat"?"default":"ghost",className:"rounded-2xl",onClick:()=>e("chat"),children:"Chat"}),c.jsx(te,{variant:t==="dashboard"?"default":"ghost",className:"rounded-2xl",onClick:()=>e("dashboard"),children:"Dashboard"})]}),c.jsxs("div",{className:"flex-1 min-h-0",children:[c.jsx("div",{className:t==="chat"?"h-full":"hidden","aria-hidden":t!=="chat",children:c.jsx(kH,{})}),c.jsx("div",{className:t==="dashboard"?"h-full overflow-y-auto px-2 py-1":"hidden","aria-hidden":t!=="dashboard",children:c.jsx(C7,{})})]})]})}function N7(t){return t?Object.values(t).map(e=>e==null?"":typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"?String(e):"").join(" ").toLowerCase():""}function $S(t){return t?t==="display_name"?"NAME":String(t).replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()):""}function FS(t){if(t==null||t==="")return"";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="number")return Number.isFinite(t)?String(t):"";if(Array.isArray(t))return t.length?JSON.stringify(t):"";if(typeof t=="object")try{return JSON.stringify(t)}catch{return""}return String(t)}function T7({locations:t,locationsQuery:e}){var b;const[n,s]=v.useState(null),[r,i]=v.useState(""),[o,a]=v.useState(""),[l,u]=v.useState(""),[d,h]=v.useState(""),f=v.useMemo(()=>{const k=Array.isArray(t)?t:[],_=new Set;return k.forEach(C=>{const S=(C==null?void 0:C.display_type)||"";S&&_.add(S)}),[{value:"",label:"All display types"},...Array.from(_).sort().map(C=>({value:C,label:C}))]},[t]),p=v.useMemo(()=>{const k=Array.isArray(t)?t:[],_=new Set;return k.forEach(C=>{const S=(C==null?void 0:C.company_schema)||"";S&&_.add(S)}),[{value:"",label:"All companies"},...Array.from(_).sort().map(C=>({value:C,label:C}))]},[t]),w=v.useMemo(()=>{const k=Array.isArray(t)?t:[],_=new Set;return k.forEach(C=>{const S=(C==null?void 0:C.series)||"";S&&_.add(S)}),[{value:"",label:"All series"},...Array.from(_).sort().map(C=>({value:C,label:C}))]},[t]),x=v.useMemo(()=>{const k=Array.isArray(t)?t:[],_=r.trim().toLowerCase();return k.filter(S=>!(o&&((S==null?void 0:S.display_type)||"")!==o||l&&((S==null?void 0:S.company_schema)||"")!==l||d&&((S==null?void 0:S.series)||"")!==d||_&&!N7(S).includes(_))).map((S,j)=>({id:(S==null?void 0:S.location_key)||`location-${j}`,raw:S}))},[t,o,l,d,r]),y=v.useMemo(()=>{const k=Array.isArray(t)?t:[],_=new Set;k.forEach(j=>{Object.keys(j||{}).forEach(N=>_.add(N))});const C=["display_name","location_key","display_type","company_schema","series","city","area","upload_fee","height","width","number_of_faces","spot_duration","loop_duration","sov_percent","eligible_for_proposals","eligible_for_mockups"],S=Array.from(_).filter(j=>!C.includes(j)).sort();return[...C.filter(j=>_.has(j)),...S]},[t]),g=v.useMemo(()=>n?Object.entries(n):[],[n]),m=n||null;return c.jsxs(c.Fragment,{children:[c.jsxs(_t,{className:"h-full min-h-0 flex flex-col",children:[c.jsxs(Kt,{className:"space-y-1",children:[c.jsx(Qt,{children:"Locations"}),c.jsxs("div",{className:"text-xs text-black/55 dark:text-white/60",children:[x.length," location",x.length===1?"":"s"]})]}),c.jsxs(Gt,{className:"flex-1 min-h-0 overflow-y-auto space-y-3 pt-1 md:flex md:flex-col md:overflow-hidden",children:[c.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-4 md:shrink-0",children:[c.jsx(vo,{value:r,onChange:k=>i(k.target.value),className:"w-full",placeholder:"Search locations..."}),c.jsx(at,{value:o,options:f,onChange:a,className:"w-full"}),c.jsx(at,{value:l,options:p,onChange:u,className:"w-full"}),c.jsx(at,{value:d,options:w,onChange:h,className:"w-full"})]}),e.isLoading?c.jsx(Ye,{text:"Loading locations",className:"text-sm text-black/60 dark:text-white/65"}):e.isError?c.jsx("div",{className:"text-sm text-red-700 dark:text-red-300",children:((b=e.error)==null?void 0:b.message)||"Failed to load locations."}):x.length?c.jsx("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white/40 dark:bg-white/5 w-full max-w-full overflow-hidden md:flex-1 md:min-h-0",children:c.jsx("div",{className:"w-full max-w-full min-w-0 overflow-x-auto md:h-full md:overflow-auto",children:c.jsx("div",{className:"min-w-max",children:c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-white dark:bg-neutral-900 text-xs uppercase tracking-wide text-black/45 dark:text-white/50",children:c.jsxs("tr",{children:[y.map(k=>c.jsx("th",{className:"sticky top-0 z-10 px-4 py-3 text-left font-semibold whitespace-nowrap bg-white dark:bg-neutral-900",children:$S(k)},k)),c.jsx("th",{className:"sticky top-0 right-0 z-20 px-4 py-3 text-left font-semibold bg-white dark:bg-neutral-900",children:"Actions"})]})}),c.jsx("tbody",{className:"divide-y divide-black/5 dark:divide-white/10",children:x.map(k=>c.jsxs("tr",{className:"text-black/80 dark:text-white/85",children:[y.map(_=>{var S;const C=FS((S=k.raw)==null?void 0:S[_]);return c.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:C},`${k.id}-${_}`)}),c.jsx("td",{className:"sticky right-0 z-10 px-4 py-3 bg-white/90 dark:bg-neutral-900/95",children:c.jsx(te,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:()=>s(k.raw),children:"Edit"})})]},k.id))})]})})})}):c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No locations found."})]})]}),c.jsx(ks,{open:!!n,onClose:()=>s(null),title:"Edit location",maxWidth:"560px",children:m?c.jsxs("div",{className:"space-y-3",children:[c.jsx(Se,{label:"Location Key",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:m.location_key||"",disabled:!0,readOnly:!0})}),c.jsx(Se,{label:"Display Name",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:m.display_name||"",disabled:!0,readOnly:!0})}),c.jsx(Se,{label:"Display Type",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:m.display_type||"",disabled:!0,readOnly:!0})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsx(Se,{label:"Company",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:m.company_schema||"",disabled:!0,readOnly:!0})}),c.jsx(Se,{label:"Series",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:m.series||"",disabled:!0,readOnly:!0})}),c.jsx(Se,{label:"City",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:m.city||"",disabled:!0,readOnly:!0})}),c.jsx(Se,{label:"Area",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:m.area||"",disabled:!0,readOnly:!0})})]}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx(te,{variant:"ghost",className:"rounded-2xl",onClick:()=>s(null),children:"Close"}),c.jsx(te,{className:"rounded-2xl",disabled:!0,children:"Save"})]}),c.jsxs("div",{className:"pt-2",children:[c.jsx("div",{className:"text-xs uppercase tracking-wide text-black/50 dark:text-white/60 mb-2",children:"All fields"}),c.jsx("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white/40 dark:bg-white/5 divide-y divide-black/5 dark:divide-white/10",children:g.map(([k,_])=>c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-2 px-3 py-2 text-sm",children:[c.jsx("div",{className:"text-xs uppercase tracking-wide text-black/45 dark:text-white/55 md:w-56",children:$S(k)}),c.jsx("div",{className:"text-black/80 dark:text-white/85 break-all",children:FS(_)})]},k))})]})]}):null})]})}function P7(t){return t?Object.values(t).map(e=>e==null?"":typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"?String(e):"").join(" ").toLowerCase():""}function R7(t){return t?t==="display_name"?"NAME":String(t).replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()):""}function A7(t){if(t==null||t==="")return"";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="number")return Number.isFinite(t)?String(t):"";if(Array.isArray(t))return t.length?JSON.stringify(t):"";if(typeof t=="object")try{return JSON.stringify(t)}catch{return""}return String(t)}function am({title:t,items:e,itemsQuery:n,itemLabel:s="item",searchPlaceholder:r="Search...",emptyMessage:i="No items found.",preferredColumns:o=[],stringKey:a="value"}){var y;const[l,u]=v.useState(""),d=v.useMemo(()=>(Array.isArray(e)?e:[]).map(m=>m==null?{[a]:""}:typeof m=="string"||typeof m=="number"||typeof m=="boolean"?{[a]:m}:m),[e,a]),h=v.useMemo(()=>{const g=new Set;d.forEach(b=>{Object.keys(b||{}).forEach(k=>g.add(k))});const m=Array.from(g).filter(b=>!o.includes(b)).sort();return[...o.filter(b=>g.has(b)),...m]},[d,o]),f=v.useMemo(()=>{const g=l.trim().toLowerCase();return d.filter(b=>g?P7(b).includes(g):!0).map((b,k)=>({id:(b==null?void 0:b.id)??(b==null?void 0:b[a])??`row-${k}`,raw:b}))},[d,l,a]),p=n==null?void 0:n.isLoading,w=n==null?void 0:n.isError,x=((y=n==null?void 0:n.error)==null?void 0:y.message)||"Failed to load data.";return c.jsxs(_t,{className:"h-full min-h-0 flex flex-col",children:[c.jsxs(Kt,{className:"space-y-1",children:[c.jsx(Qt,{children:t}),c.jsxs("div",{className:"text-xs text-black/55 dark:text-white/60",children:[f.length," ",s,f.length===1?"":"s"]})]}),c.jsxs(Gt,{className:"flex-1 min-h-0 overflow-y-auto space-y-3 pt-1 md:flex md:flex-col md:overflow-hidden",children:[c.jsx(vo,{value:l,onChange:g=>u(g.target.value),className:"w-full md:shrink-0",placeholder:r}),p?c.jsx(Ye,{text:"Loading",className:"text-sm text-black/60 dark:text-white/65"}):w?c.jsx("div",{className:"text-sm text-red-700 dark:text-red-300",children:x}):f.length?c.jsx("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white/40 dark:bg-white/5 w-full max-w-full overflow-hidden md:flex-1 md:min-h-0",children:c.jsx("div",{className:"w-full max-w-full min-w-0 overflow-x-auto md:h-full md:overflow-auto",children:c.jsx("div",{className:"min-w-max",children:c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-white dark:bg-neutral-900 text-xs uppercase tracking-wide text-black/45 dark:text-white/50",children:c.jsx("tr",{children:h.map(g=>c.jsx("th",{className:"sticky top-0 z-10 px-4 py-3 text-left font-semibold whitespace-nowrap bg-white dark:bg-neutral-900",children:R7(g)},g))})}),c.jsx("tbody",{className:"divide-y divide-black/5 dark:divide-white/10",children:f.map(g=>c.jsx("tr",{className:"text-black/80 dark:text-white/85",children:h.map(m=>{var b;return c.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:A7((b=g.raw)==null?void 0:b[m])},`${g.id}-${m}`)})},g.id))})]})})})}):c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:i})]})]})}function O7({networks:t,networksQuery:e}){return c.jsx(am,{title:"Networks",items:t,itemsQuery:e,itemLabel:"network",searchPlaceholder:"Search networks...",emptyMessage:"No networks found.",preferredColumns:["network_name","name","company","company_schema","is_active","location_count"]})}function M7({assetTypes:t,assetTypesQuery:e}){return c.jsx(am,{title:"Asset Types",items:t,itemsQuery:e,itemLabel:"type",searchPlaceholder:"Search asset types...",emptyMessage:"No asset types found.",preferredColumns:["name","type_key","company","network_id","is_active","location_count"]})}function I7({networkAssets:t,networkAssetsQuery:e}){return c.jsx(am,{title:"Network Assets",items:t,itemsQuery:e,itemLabel:"asset",searchPlaceholder:"Search assets...",emptyMessage:"No network assets found.",preferredColumns:["display_name","asset_key","location_key","network_id","type_id","company","is_active"]})}function D7({packages:t,packagesQuery:e}){return c.jsx(am,{title:"Packages",items:t,itemsQuery:e,itemLabel:"package",searchPlaceholder:"Search packages...",emptyMessage:"No packages found.",preferredColumns:["name","company","is_active"]})}const L7=[{key:"networks",label:"Networks",disabled:!1},{key:"asset-types",label:"Asset Types",disabled:!1},{key:"network-assets",label:"Network Assets",disabled:!1},{key:"packages",label:"Packages",disabled:!1},{key:"locations",label:"Locations",disabled:!1}];function $c(t,e=[]){if(Array.isArray(t))return t;for(const n of e)if(Array.isArray(t==null?void 0:t[n]))return t[n];return Array.isArray(t==null?void 0:t.data)?t.data:[]}function $7(){const{user:t}=oi(),[e,n]=v.useState("networks");if(!Sd(t))return c.jsxs(_t,{children:[c.jsx(Kt,{children:c.jsx(Qt,{children:"Restricted"})}),c.jsx(Gt,{className:"text-sm text-black/60 dark:text-white/65",children:"You don't have access to asset management."})]});const s=an({queryKey:["asset-management","networks"],queryFn:()=>j4(),enabled:e==="networks"}),r=an({queryKey:["asset-management","asset-types"],queryFn:()=>C4(),enabled:e==="asset-types"}),i=an({queryKey:["asset-management","network-assets"],queryFn:()=>E4(),enabled:e==="network-assets"}),o=an({queryKey:["asset-management","packages"],queryFn:()=>T4(),enabled:e==="packages"}),a=an({queryKey:["asset-management","locations"],queryFn:()=>N4(),enabled:e==="locations"}),l=v.useMemo(()=>$c(s.data,["networks"]),[s.data]),u=v.useMemo(()=>$c(r.data,["asset_types","types"]),[r.data]),d=v.useMemo(()=>$c(i.data,["network_assets","assets"]),[i.data]),h=v.useMemo(()=>$c(o.data,["packages"]),[o.data]),f=v.useMemo(()=>$c(a.data,["locations"]),[a.data]);return c.jsxs("div",{className:"flex h-full min-h-0 min-w-0 flex-col gap-4",children:[c.jsx("div",{className:"flex items-center gap-2 overflow-x-auto",children:L7.map(p=>c.jsx(te,{variant:e===p.key?"default":"ghost",onClick:()=>n(p.key),className:"rounded-2xl shrink-0",disabled:p.disabled,title:p.disabled?"Coming soon":void 0,children:p.label},p.key))}),c.jsxs("div",{className:"flex-1 min-h-0 min-w-0",children:[e==="networks"?c.jsx("div",{className:"h-full",children:c.jsx(O7,{networks:l,networksQuery:s})}):null,e==="asset-types"?c.jsx("div",{className:"h-full",children:c.jsx(M7,{assetTypes:u,assetTypesQuery:r})}):null,e==="network-assets"?c.jsx("div",{className:"h-full",children:c.jsx(I7,{networkAssets:d,networkAssetsQuery:i})}):null,e==="packages"?c.jsx("div",{className:"h-full",children:c.jsx(D7,{packages:h,packagesQuery:o})}):null,e==="locations"?c.jsx("div",{className:"h-full",children:c.jsx(T7,{locations:f,locationsQuery:a})}):null]})]})}function F7({children:t}){const{user:e,authReady:n,session:s,pendingAccess:r,logout:i}=oi(),o=sc();return!n||s&&!e?(console.log("[ProtectedRoute] Waiting for auth",{authReady:n,hasSession:!!s,hasUser:!!e}),null):(console.log("[ProtectedRoute] Auth ready, rendering children",{user:e==null?void 0:e.email}),r?c.jsx(jE,{email:r.email,message:r.message,onSignOut:i}):e?t:c.jsx(uf,{to:"/login",replace:!0,state:{from:o.pathname}}))}function z7(){const t="mmg-brand-theme",[e,n]=v.useState("none");v.useEffect(()=>{if(typeof window>"u")return;const i=window.localStorage.getItem(t)||"none";n(i),i==="none"?document.body.removeAttribute("data-brand-theme"):document.body.setAttribute("data-brand-theme",i)},[]);const s=r=>{n(r),typeof window<"u"&&window.localStorage.setItem(t,r),r==="none"?document.body.removeAttribute("data-brand-theme"):document.body.setAttribute("data-brand-theme",r)};return c.jsx("div",{className:"h-full min-h-0",children:c.jsxs(_t,{className:"h-full",children:[c.jsx(Kt,{children:c.jsx(Qt,{children:"Settings"})}),c.jsxs(Gt,{className:"text-sm text-black/60 dark:text-white/65 space-y-4",children:[c.jsxs(zt,{className:"flex items-center justify-between p-4",children:[c.jsxs("div",{children:[c.jsx("div",{className:"font-semibold text-black/80 dark:text-white/85",children:"Theme"}),c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"Toggle dark / light mode"})]}),c.jsx(CE,{})]}),c.jsxs(zt,{className:"space-y-3 p-4",children:[c.jsx("div",{className:"flex items-center justify-between gap-4",children:c.jsxs("div",{children:[c.jsx("div",{className:"font-semibold text-black/80 dark:text-white/85",children:"Color theme"}),c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"Choose a color palette that layers on top of light / dark mode."})]})}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 mt-2",children:[c.jsx("button",{type:"button",onClick:()=>s("none"),className:`flex items-center justify-between rounded-2xl border px-3 py-2 text-left text-sm transition-colors ${e==="none"?"border-black/60 dark:border-white/80 bg-black/5 dark:bg-white/10":"border-black/10 dark:border-white/15 hover:bg-black/3 dark:hover:bg-white/5"}`,children:c.jsx("span",{className:"font-medium",children:"System default"})}),c.jsxs("button",{type:"button",onClick:()=>s("blue"),className:`flex items-center justify-between rounded-2xl border px-3 py-2 text-left text-sm transition-colors ${e==="blue"?"border-blue-500/80 bg-blue-500/5":"border-black/10 dark:border-white/15 hover:bg-black/3 dark:hover:bg-white/5"}`,children:[c.jsx("span",{className:"font-medium",children:"Blue"}),c.jsx("span",{className:"flex h-5 w-5 rounded-full bg-[#007AFF]"})]}),c.jsxs("button",{type:"button",onClick:()=>s("green"),className:`flex items-center justify-between rounded-2xl border px-3 py-2 text-left text-sm transition-colors ${e==="green"?"border-emerald-500/80 bg-emerald-500/5":"border-black/10 dark:border-white/15 hover:bg-black/3 dark:hover:bg-white/5"}`,children:[c.jsx("span",{className:"font-medium",children:"Green"}),c.jsx("span",{className:"flex h-5 w-5 rounded-full bg-[#0F806B]"})]}),c.jsxs("button",{type:"button",onClick:()=>s("orange"),className:`flex items-center justify-between rounded-2xl border px-3 py-2 text-left text-sm transition-colors ${e==="orange"?"border-orange-500/80 bg-orange-500/5":"border-black/10 dark:border-white/15 hover:bg-black/3 dark:hover:bg-white/5"}`,children:[c.jsx("span",{className:"font-medium",children:"Orange"}),c.jsx("span",{className:"flex h-5 w-5 rounded-full bg-[#FF7900]"})]}),c.jsxs("button",{type:"button",onClick:()=>s("gold"),className:`flex items-center justify-between rounded-2xl border px-3 py-2 text-left text-sm transition-colors ${e==="gold"?"border-amber-500/80 bg-amber-500/5":"border-black/10 dark:border-white/15 hover:bg-black/3 dark:hover:bg-white/5"}`,children:[c.jsx("span",{className:"font-medium",children:"Gold"}),c.jsx("span",{className:"flex h-5 w-5 rounded-full bg-[#CA9E2C]"})]}),c.jsxs("button",{type:"button",onClick:()=>s("brand"),className:`flex items-center justify-between rounded-2xl border px-3 py-2 text-left text-sm transition-colors ${e==="brand"?"border-black/70 dark:border-white/80 bg-black/5 dark:bg-white/10":"border-black/10 dark:border-white/15 hover:bg-black/3 dark:hover:bg-white/5"}`,children:[c.jsx("span",{className:"font-medium",children:"Brand Theme"}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"h-4 w-4 rounded-full bg-[#000000]"}),c.jsx("span",{className:"h-4 w-4 rounded-full bg-[#007AFF]"}),c.jsx("span",{className:"h-4 w-4 rounded-full bg-[#CA9E2C]"})]})]})]})]})]})]})})}function B7(){return c.jsxs(BO,{children:[c.jsx(Mn,{path:"/",element:c.jsx(uf,{to:"/login",replace:!0})}),c.jsx(Mn,{path:"/login",element:c.jsx(k5,{})}),c.jsx(Mn,{path:"/auth/callback",element:c.jsx(_5,{})}),c.jsxs(Mn,{path:"/app",element:c.jsx(F7,{children:c.jsx(I4,{})}),children:[c.jsx(Mn,{index:!0,element:c.jsx(uf,{to:"chat",replace:!0})}),c.jsx(Mn,{path:"chat",element:c.jsx(a6,{})}),c.jsx(Mn,{path:"video-critique",element:c.jsx(E7,{})}),c.jsx(Mn,{path:"mockup",element:c.jsx(O6,{})}),c.jsx(Mn,{path:"proposals",element:c.jsx(Y6,{})}),c.jsx(Mn,{path:"notifications",element:c.jsx(wH,{})}),c.jsx(Mn,{path:"admin",element:c.jsx(vH,{})}),c.jsx(Mn,{path:"asset-management",element:c.jsx($7,{})}),c.jsx(Mn,{path:"settings",element:c.jsx(z7,{})})]}),c.jsx(Mn,{path:"*",element:c.jsx(uf,{to:"/login",replace:!0})})]})}function U7(){if(!(typeof window>"u"))try{const t=window.AudioContext||window.webkitAudioContext;if(!t)return;const e=new t,n=e.createOscillator(),s=e.createGain();n.type="sine",n.frequency.value=740,s.gain.value=.15,n.connect(s),s.connect(e.destination),n.start(),s.gain.exponentialRampToValueAtTime(.001,e.currentTime+.25),n.stop(e.currentTime+.3),n.onended=()=>{e.close()}}catch{}}function H7(t){if(!t)return"";const e=new Date(t);return Number.isNaN(e.getTime())?"":e.toLocaleString()}function W7({children:t}){const[e,n]=v.useState([]),[s,r]=v.useState(!0),[i,o]=v.useState([]),a=v.useRef(new Set),l=v.useRef(!1),u=v.useRef(new Map),d=v.useCallback(async()=>{r(!0);const b=await W3();n(Array.isArray(b)?b:[]),r(!1)},[]),h=v.useCallback(async()=>{await q3(),n([])},[]),f=v.useCallback(async b=>{b&&(await K3(b),n(k=>k.filter(_=>_.id!==b)))},[]),p=v.useCallback(async b=>{b&&(await G3(b),n(k=>k.map(_=>_.id===b?{..._,read:!0}:_)))},[]),w=v.useCallback(async b=>{const k=await V3(b);return n(_=>[k,..._]),k},[]),x=v.useCallback(b=>{o(_=>_.filter(C=>C.id!==b));const k=u.current.get(b);k&&(clearTimeout(k),u.current.delete(b))},[]),y=v.useCallback(b=>{if(!(b!=null&&b.id))return;o(_=>[..._,{id:b.id,notification:b}]);const k=setTimeout(()=>x(b.id),4200);u.current.set(b.id,k)},[x]);v.useEffect(()=>{d()},[d]),v.useEffect(()=>{if(!l.current){e.forEach(k=>a.current.add(k.id)),l.current=!0;return}const b=e.filter(k=>k.id&&!a.current.has(k.id));b.length&&(U7(),b.forEach(k=>{a.current.add(k.id),y(k)}))},[e,y]),v.useEffect(()=>{if(typeof window>"u")return;const b=k=>{k.key===Y3&&d()};return window.addEventListener("storage",b),()=>window.removeEventListener("storage",b)},[d]),v.useEffect(()=>{if(!(typeof window>"u"))return window.mmgNotify=b=>w(b),window.mmgNotifications={add:b=>w(b),clear:h,dismiss:f,markRead:p},()=>{delete window.mmgNotify,delete window.mmgNotifications}},[w,h,f,p]);const g=v.useMemo(()=>e.filter(b=>!b.read).length,[e]),m=v.useMemo(()=>({notifications:e,loading:s,unreadCount:g,toasts:i,addNotification:w,clearAll:h,dismissNotification:f,markRead:p,dismissToast:x,formatTime:H7}),[e,s,g,i,w,h,f,p,x]);return c.jsx(ZN.Provider,{value:m,children:t})}function V7(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:s,onRegistered:r,onRegisteredSW:i,onRegisterError:o}=t;let a,l;const u=async(h=!0)=>{await l};async function d(){if("serviceWorker"in navigator){if(a=await RM(async()=>{const{Workbox:h}=await import("./workbox-window.prod.es5-vqzQaGvo.js");return{Workbox:h}},[]).then(({Workbox:h})=>new h("/sw.js",{scope:"/",type:"classic"})).catch(h=>{o==null||o(h)}),!a)return;a.addEventListener("activated",h=>{(h.isUpdate||h.isExternal)&&window.location.reload()}),a.addEventListener("installed",h=>{h.isUpdate||s==null||s()}),a.register({immediate:e}).then(h=>{i?i("/sw.js",h):r==null||r(h)}).catch(h=>{o==null||o(h)})}}return l=d(),u}V7({immediate:!0});const q7="mmg-brand-theme";if(typeof window<"u"){const t=window.localStorage.getItem(q7);t&&t!=="none"?document.body.setAttribute("data-brand-theme",t):document.body.removeAttribute("data-brand-theme"),window.addEventListener("wheel",e=>{const n=e.target;n instanceof HTMLInputElement&&n.type==="number"&&n===document.activeElement&&e.preventDefault()},{passive:!1})}const K7=new kM({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1}}});zg.createRoot(document.getElementById("root")).render(c.jsx(ge.StrictMode,{children:c.jsx(GO,{attribute:"class",defaultTheme:"light",enableSystem:!1,children:c.jsx(_M,{client:K7,children:c.jsx(b5,{children:c.jsx(W7,{children:c.jsx(WO,{children:c.jsx(B7,{})})})})})})}));
