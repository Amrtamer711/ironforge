var jm=e=>{throw TypeError(e)};var Yu=(e,t,n)=>t.has(e)||jm("Cannot "+n);var T=(e,t,n)=>(Yu(e,t,"read from private field"),n?n.call(e):t.get(e)),de=(e,t,n)=>t.has(e)?jm("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ne=(e,t,n,r)=>(Yu(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Se=(e,t,n)=>(Yu(e,t,"access private method"),n);var Al=(e,t,n,r)=>({set _(s){ne(e,t,s,n)},get _(){return T(e,t,r)}});function d_(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Ny(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Py={exports:{}},yu={},Ry={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cl=Symbol.for("react.element"),h_=Symbol.for("react.portal"),f_=Symbol.for("react.fragment"),p_=Symbol.for("react.strict_mode"),m_=Symbol.for("react.profiler"),g_=Symbol.for("react.provider"),v_=Symbol.for("react.context"),y_=Symbol.for("react.forward_ref"),x_=Symbol.for("react.suspense"),w_=Symbol.for("react.memo"),b_=Symbol.for("react.lazy"),Em=Symbol.iterator;function k_(e){return e===null||typeof e!="object"?null:(e=Em&&e[Em]||e["@@iterator"],typeof e=="function"?e:null)}var Ty={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ay=Object.assign,Oy={};function Ia(e,t,n){this.props=e,this.context=t,this.refs=Oy,this.updater=n||Ty}Ia.prototype.isReactComponent={};Ia.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ia.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Iy(){}Iy.prototype=Ia.prototype;function Mf(e,t,n){this.props=e,this.context=t,this.refs=Oy,this.updater=n||Ty}var $f=Mf.prototype=new Iy;$f.constructor=Mf;Ay($f,Ia.prototype);$f.isPureReactComponent=!0;var Cm=Array.isArray,My=Object.prototype.hasOwnProperty,Df={current:null},$y={key:!0,ref:!0,__self:!0,__source:!0};function Dy(e,t,n){var r,s={},i=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)My.call(t,r)&&!$y.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:cl,type:e,key:i,ref:a,props:s,_owner:Df.current}}function __(e,t){return{$$typeof:cl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Lf(e){return typeof e=="object"&&e!==null&&e.$$typeof===cl}function S_(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Nm=/\/+/g;function Xu(e,t){return typeof e=="object"&&e!==null&&e.key!=null?S_(""+e.key):t.toString(36)}function pc(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case cl:case h_:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+Xu(a,0):r,Cm(s)?(n="",e!=null&&(n=e.replace(Nm,"$&/")+"/"),pc(s,t,n,"",function(u){return u})):s!=null&&(Lf(s)&&(s=__(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Nm,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",Cm(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+Xu(i,l);a+=pc(i,t,n,c,s)}else if(c=k_(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+Xu(i,l++),a+=pc(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Ol(e,t,n){if(e==null)return e;var r=[],s=0;return pc(e,r,"","",function(i){return t.call(n,i,s++)}),r}function j_(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var qt={current:null},mc={transition:null},E_={ReactCurrentDispatcher:qt,ReactCurrentBatchConfig:mc,ReactCurrentOwner:Df};function Ly(){throw Error("act(...) is not supported in production builds of React.")}je.Children={map:Ol,forEach:function(e,t,n){Ol(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ol(e,function(){t++}),t},toArray:function(e){return Ol(e,function(t){return t})||[]},only:function(e){if(!Lf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};je.Component=Ia;je.Fragment=f_;je.Profiler=m_;je.PureComponent=Mf;je.StrictMode=p_;je.Suspense=x_;je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E_;je.act=Ly;je.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Ay({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=Df.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)My.call(t,c)&&!$y.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:cl,type:e.type,key:s,ref:i,props:r,_owner:a}};je.createContext=function(e){return e={$$typeof:v_,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:g_,_context:e},e.Consumer=e};je.createElement=Dy;je.createFactory=function(e){var t=Dy.bind(null,e);return t.type=e,t};je.createRef=function(){return{current:null}};je.forwardRef=function(e){return{$$typeof:y_,render:e}};je.isValidElement=Lf;je.lazy=function(e){return{$$typeof:b_,_payload:{_status:-1,_result:e},_init:j_}};je.memo=function(e,t){return{$$typeof:w_,type:e,compare:t===void 0?null:t}};je.startTransition=function(e){var t=mc.transition;mc.transition={};try{e()}finally{mc.transition=t}};je.unstable_act=Ly;je.useCallback=function(e,t){return qt.current.useCallback(e,t)};je.useContext=function(e){return qt.current.useContext(e)};je.useDebugValue=function(){};je.useDeferredValue=function(e){return qt.current.useDeferredValue(e)};je.useEffect=function(e,t){return qt.current.useEffect(e,t)};je.useId=function(){return qt.current.useId()};je.useImperativeHandle=function(e,t,n){return qt.current.useImperativeHandle(e,t,n)};je.useInsertionEffect=function(e,t){return qt.current.useInsertionEffect(e,t)};je.useLayoutEffect=function(e,t){return qt.current.useLayoutEffect(e,t)};je.useMemo=function(e,t){return qt.current.useMemo(e,t)};je.useReducer=function(e,t,n){return qt.current.useReducer(e,t,n)};je.useRef=function(e){return qt.current.useRef(e)};je.useState=function(e){return qt.current.useState(e)};je.useSyncExternalStore=function(e,t,n){return qt.current.useSyncExternalStore(e,t,n)};je.useTransition=function(){return qt.current.useTransition()};je.version="18.3.1";Ry.exports=je;var f=Ry.exports;const Dt=Ny(f),xu=d_({__proto__:null,default:Dt},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C_=f,N_=Symbol.for("react.element"),P_=Symbol.for("react.fragment"),R_=Object.prototype.hasOwnProperty,T_=C_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,A_={key:!0,ref:!0,__self:!0,__source:!0};function Fy(e,t,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)R_.call(t,r)&&!A_.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:N_,type:e,key:i,ref:a,props:s,_owner:T_.current}}yu.Fragment=P_;yu.jsx=Fy;yu.jsxs=Fy;Py.exports=yu;var o=Py.exports,Zd={},Uy={exports:{}},Cn={},zy={exports:{}},By={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(N,S){var U=N.length;N.push(S);e:for(;0<U;){var W=U-1>>>1,F=N[W];if(0<s(F,S))N[W]=S,N[U]=F,U=W;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var S=N[0],U=N.pop();if(U!==S){N[0]=U;e:for(var W=0,F=N.length,ee=F>>>1;W<ee;){var J=2*(W+1)-1,te=N[J],ce=J+1,Oe=N[ce];if(0>s(te,U))ce<F&&0>s(Oe,te)?(N[W]=Oe,N[ce]=U,W=ce):(N[W]=te,N[J]=U,W=J);else if(ce<F&&0>s(Oe,U))N[W]=Oe,N[ce]=U,W=ce;else break e}}return S}function s(N,S){var U=N.sortIndex-S.sortIndex;return U!==0?U:N.id-S.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,p=3,x=!1,w=!1,m=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(N){for(var S=n(u);S!==null;){if(S.callback===null)r(u);else if(S.startTime<=N)r(u),S.sortIndex=S.expirationTime,t(c,S);else break;S=n(u)}}function k(N){if(m=!1,y(N),!w)if(n(c)!==null)w=!0,L(_);else{var S=n(u);S!==null&&q(k,S.startTime-N)}}function _(N,S){w=!1,m&&(m=!1,v(C),C=-1),x=!0;var U=p;try{for(y(S),h=n(c);h!==null&&(!(h.expirationTime>S)||N&&!z());){var W=h.callback;if(typeof W=="function"){h.callback=null,p=h.priorityLevel;var F=W(h.expirationTime<=S);S=e.unstable_now(),typeof F=="function"?h.callback=F:h===n(c)&&r(c),y(S)}else r(c);h=n(c)}if(h!==null)var ee=!0;else{var J=n(u);J!==null&&q(k,J.startTime-S),ee=!1}return ee}finally{h=null,p=U,x=!1}}var j=!1,E=null,C=-1,I=5,P=-1;function z(){return!(e.unstable_now()-P<I)}function O(){if(E!==null){var N=e.unstable_now();P=N;var S=!0;try{S=E(!0,N)}finally{S?D():(j=!1,E=null)}}else j=!1}var D;if(typeof g=="function")D=function(){g(O)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,A=B.port2;B.port1.onmessage=O,D=function(){A.postMessage(null)}}else D=function(){b(O,0)};function L(N){E=N,j||(j=!0,D())}function q(N,S){C=b(function(){N(e.unstable_now())},S)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_continueExecution=function(){w||x||(w=!0,L(_))},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(N){switch(p){case 1:case 2:case 3:var S=3;break;default:S=p}var U=p;p=S;try{return N()}finally{p=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(N,S){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var U=p;p=N;try{return S()}finally{p=U}},e.unstable_scheduleCallback=function(N,S,U){var W=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?W+U:W):U=W,N){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=U+F,N={id:d++,callback:S,priorityLevel:N,startTime:U,expirationTime:F,sortIndex:-1},U>W?(N.sortIndex=U,t(u,N),n(c)===null&&N===n(u)&&(m?(v(C),C=-1):m=!0,q(k,U-W))):(N.sortIndex=F,t(c,N),w||x||(w=!0,L(_))),N},e.unstable_shouldYield=z,e.unstable_wrapCallback=function(N){var S=p;return function(){var U=p;p=S;try{return N.apply(this,arguments)}finally{p=U}}}})(By);zy.exports=By;var O_=zy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I_=f,En=O_;function Y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wy=new Set,No={};function vi(e,t){ja(e,t),ja(e+"Capture",t)}function ja(e,t){for(No[e]=t,e=0;e<t.length;e++)Wy.add(t[e])}var Ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),eh=Object.prototype.hasOwnProperty,M_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Pm={},Rm={};function $_(e){return eh.call(Rm,e)?!0:eh.call(Pm,e)?!1:M_.test(e)?Rm[e]=!0:(Pm[e]=!0,!1)}function D_(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function L_(e,t,n,r){if(t===null||typeof t>"u"||D_(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Gt(e,t,n,r,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var At={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){At[e]=new Gt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];At[t]=new Gt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){At[e]=new Gt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){At[e]=new Gt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){At[e]=new Gt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){At[e]=new Gt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){At[e]=new Gt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){At[e]=new Gt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){At[e]=new Gt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ff=/[\-:]([a-z])/g;function Uf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ff,Uf);At[t]=new Gt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ff,Uf);At[t]=new Gt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ff,Uf);At[t]=new Gt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){At[e]=new Gt(e,1,!1,e.toLowerCase(),null,!1,!1)});At.xlinkHref=new Gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){At[e]=new Gt(e,1,!1,e.toLowerCase(),null,!0,!0)});function zf(e,t,n,r){var s=At.hasOwnProperty(t)?At[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(L_(t,n,s,r)&&(n=null),r||s===null?$_(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var zr=I_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Il=Symbol.for("react.element"),zi=Symbol.for("react.portal"),Bi=Symbol.for("react.fragment"),Bf=Symbol.for("react.strict_mode"),th=Symbol.for("react.profiler"),Vy=Symbol.for("react.provider"),Hy=Symbol.for("react.context"),Wf=Symbol.for("react.forward_ref"),nh=Symbol.for("react.suspense"),rh=Symbol.for("react.suspense_list"),Vf=Symbol.for("react.memo"),Qr=Symbol.for("react.lazy"),Ky=Symbol.for("react.offscreen"),Tm=Symbol.iterator;function Qa(e){return e===null||typeof e!="object"?null:(e=Tm&&e[Tm]||e["@@iterator"],typeof e=="function"?e:null)}var st=Object.assign,Zu;function oo(e){if(Zu===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Zu=t&&t[1]||""}return`
`+Zu+e}var ed=!1;function td(e,t){if(!e||ed)return"";ed=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{ed=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?oo(e):""}function F_(e){switch(e.tag){case 5:return oo(e.type);case 16:return oo("Lazy");case 13:return oo("Suspense");case 19:return oo("SuspenseList");case 0:case 2:case 15:return e=td(e.type,!1),e;case 11:return e=td(e.type.render,!1),e;case 1:return e=td(e.type,!0),e;default:return""}}function sh(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Bi:return"Fragment";case zi:return"Portal";case th:return"Profiler";case Bf:return"StrictMode";case nh:return"Suspense";case rh:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Hy:return(e.displayName||"Context")+".Consumer";case Vy:return(e._context.displayName||"Context")+".Provider";case Wf:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Vf:return t=e.displayName||null,t!==null?t:sh(e.type)||"Memo";case Qr:t=e._payload,e=e._init;try{return sh(e(t))}catch{}}return null}function U_(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sh(t);case 8:return t===Bf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function _s(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function qy(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function z_(e){var t=qy(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ml(e){e._valueTracker||(e._valueTracker=z_(e))}function Gy(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=qy(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ac(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ih(e,t){var n=t.checked;return st({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Am(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=_s(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Qy(e,t){t=t.checked,t!=null&&zf(e,"checked",t,!1)}function ah(e,t){Qy(e,t);var n=_s(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?oh(e,t.type,n):t.hasOwnProperty("defaultValue")&&oh(e,t.type,_s(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Om(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function oh(e,t,n){(t!=="number"||Ac(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var lo=Array.isArray;function ea(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+_s(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function lh(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Y(91));return st({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Im(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Y(92));if(lo(n)){if(1<n.length)throw Error(Y(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:_s(n)}}function Jy(e,t){var n=_s(t.value),r=_s(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Mm(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Yy(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ch(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Yy(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var $l,Xy=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for($l=$l||document.createElement("div"),$l.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=$l.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Po(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var vo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},B_=["Webkit","ms","Moz","O"];Object.keys(vo).forEach(function(e){B_.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),vo[t]=vo[e]})});function Zy(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||vo.hasOwnProperty(e)&&vo[e]?(""+t).trim():t+"px"}function ex(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Zy(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var W_=st({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function uh(e,t){if(t){if(W_[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Y(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Y(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Y(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Y(62))}}function dh(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hh=null;function Hf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var fh=null,ta=null,na=null;function $m(e){if(e=hl(e)){if(typeof fh!="function")throw Error(Y(280));var t=e.stateNode;t&&(t=Su(t),fh(e.stateNode,e.type,t))}}function tx(e){ta?na?na.push(e):na=[e]:ta=e}function nx(){if(ta){var e=ta,t=na;if(na=ta=null,$m(e),t)for(e=0;e<t.length;e++)$m(t[e])}}function rx(e,t){return e(t)}function sx(){}var nd=!1;function ix(e,t,n){if(nd)return e(t,n);nd=!0;try{return rx(e,t,n)}finally{nd=!1,(ta!==null||na!==null)&&(sx(),nx())}}function Ro(e,t){var n=e.stateNode;if(n===null)return null;var r=Su(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Y(231,t,typeof n));return n}var ph=!1;if(Ir)try{var Ja={};Object.defineProperty(Ja,"passive",{get:function(){ph=!0}}),window.addEventListener("test",Ja,Ja),window.removeEventListener("test",Ja,Ja)}catch{ph=!1}function V_(e,t,n,r,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var yo=!1,Oc=null,Ic=!1,mh=null,H_={onError:function(e){yo=!0,Oc=e}};function K_(e,t,n,r,s,i,a,l,c){yo=!1,Oc=null,V_.apply(H_,arguments)}function q_(e,t,n,r,s,i,a,l,c){if(K_.apply(this,arguments),yo){if(yo){var u=Oc;yo=!1,Oc=null}else throw Error(Y(198));Ic||(Ic=!0,mh=u)}}function yi(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ax(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Dm(e){if(yi(e)!==e)throw Error(Y(188))}function G_(e){var t=e.alternate;if(!t){if(t=yi(e),t===null)throw Error(Y(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Dm(s),e;if(i===r)return Dm(s),t;i=i.sibling}throw Error(Y(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?e:t}function ox(e){return e=G_(e),e!==null?lx(e):null}function lx(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=lx(e);if(t!==null)return t;e=e.sibling}return null}var cx=En.unstable_scheduleCallback,Lm=En.unstable_cancelCallback,Q_=En.unstable_shouldYield,J_=En.unstable_requestPaint,ht=En.unstable_now,Y_=En.unstable_getCurrentPriorityLevel,Kf=En.unstable_ImmediatePriority,ux=En.unstable_UserBlockingPriority,Mc=En.unstable_NormalPriority,X_=En.unstable_LowPriority,dx=En.unstable_IdlePriority,wu=null,mr=null;function Z_(e){if(mr&&typeof mr.onCommitFiberRoot=="function")try{mr.onCommitFiberRoot(wu,e,void 0,(e.current.flags&128)===128)}catch{}}var Xn=Math.clz32?Math.clz32:nS,eS=Math.log,tS=Math.LN2;function nS(e){return e>>>=0,e===0?32:31-(eS(e)/tS|0)|0}var Dl=64,Ll=4194304;function co(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function $c(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=co(l):(i&=a,i!==0&&(r=co(i)))}else a=n&~s,a!==0?r=co(a):i!==0&&(r=co(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Xn(t),s=1<<n,r|=e[n],t&=~s;return r}function rS(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sS(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-Xn(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=rS(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function gh(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function hx(){var e=Dl;return Dl<<=1,!(Dl&4194240)&&(Dl=64),e}function rd(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ul(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Xn(t),e[t]=n}function iS(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Xn(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function qf(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Xn(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Fe=0;function fx(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var px,Gf,mx,gx,vx,vh=!1,Fl=[],fs=null,ps=null,ms=null,To=new Map,Ao=new Map,Xr=[],aS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fm(e,t){switch(e){case"focusin":case"focusout":fs=null;break;case"dragenter":case"dragleave":ps=null;break;case"mouseover":case"mouseout":ms=null;break;case"pointerover":case"pointerout":To.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ao.delete(t.pointerId)}}function Ya(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=hl(t),t!==null&&Gf(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function oS(e,t,n,r,s){switch(t){case"focusin":return fs=Ya(fs,e,t,n,r,s),!0;case"dragenter":return ps=Ya(ps,e,t,n,r,s),!0;case"mouseover":return ms=Ya(ms,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return To.set(i,Ya(To.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ao.set(i,Ya(Ao.get(i)||null,e,t,n,r,s)),!0}return!1}function yx(e){var t=Ks(e.target);if(t!==null){var n=yi(t);if(n!==null){if(t=n.tag,t===13){if(t=ax(n),t!==null){e.blockedOn=t,vx(e.priority,function(){mx(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function gc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=yh(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);hh=r,n.target.dispatchEvent(r),hh=null}else return t=hl(n),t!==null&&Gf(t),e.blockedOn=n,!1;t.shift()}return!0}function Um(e,t,n){gc(e)&&n.delete(t)}function lS(){vh=!1,fs!==null&&gc(fs)&&(fs=null),ps!==null&&gc(ps)&&(ps=null),ms!==null&&gc(ms)&&(ms=null),To.forEach(Um),Ao.forEach(Um)}function Xa(e,t){e.blockedOn===t&&(e.blockedOn=null,vh||(vh=!0,En.unstable_scheduleCallback(En.unstable_NormalPriority,lS)))}function Oo(e){function t(s){return Xa(s,e)}if(0<Fl.length){Xa(Fl[0],e);for(var n=1;n<Fl.length;n++){var r=Fl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(fs!==null&&Xa(fs,e),ps!==null&&Xa(ps,e),ms!==null&&Xa(ms,e),To.forEach(t),Ao.forEach(t),n=0;n<Xr.length;n++)r=Xr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Xr.length&&(n=Xr[0],n.blockedOn===null);)yx(n),n.blockedOn===null&&Xr.shift()}var ra=zr.ReactCurrentBatchConfig,Dc=!0;function cS(e,t,n,r){var s=Fe,i=ra.transition;ra.transition=null;try{Fe=1,Qf(e,t,n,r)}finally{Fe=s,ra.transition=i}}function uS(e,t,n,r){var s=Fe,i=ra.transition;ra.transition=null;try{Fe=4,Qf(e,t,n,r)}finally{Fe=s,ra.transition=i}}function Qf(e,t,n,r){if(Dc){var s=yh(e,t,n,r);if(s===null)fd(e,t,r,Lc,n),Fm(e,r);else if(oS(s,e,t,n,r))r.stopPropagation();else if(Fm(e,r),t&4&&-1<aS.indexOf(e)){for(;s!==null;){var i=hl(s);if(i!==null&&px(i),i=yh(e,t,n,r),i===null&&fd(e,t,r,Lc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else fd(e,t,r,null,n)}}var Lc=null;function yh(e,t,n,r){if(Lc=null,e=Hf(r),e=Ks(e),e!==null)if(t=yi(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ax(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Lc=e,null}function xx(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Y_()){case Kf:return 1;case ux:return 4;case Mc:case X_:return 16;case dx:return 536870912;default:return 16}default:return 16}}var us=null,Jf=null,vc=null;function wx(){if(vc)return vc;var e,t=Jf,n=t.length,r,s="value"in us?us.value:us.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[i-r];r++);return vc=s.slice(e,1<r?1-r:void 0)}function yc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ul(){return!0}function zm(){return!1}function Nn(e){function t(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ul:zm,this.isPropagationStopped=zm,this}return st(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ul)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ul)},persist:function(){},isPersistent:Ul}),t}var Ma={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yf=Nn(Ma),dl=st({},Ma,{view:0,detail:0}),dS=Nn(dl),sd,id,Za,bu=st({},dl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Za&&(Za&&e.type==="mousemove"?(sd=e.screenX-Za.screenX,id=e.screenY-Za.screenY):id=sd=0,Za=e),sd)},movementY:function(e){return"movementY"in e?e.movementY:id}}),Bm=Nn(bu),hS=st({},bu,{dataTransfer:0}),fS=Nn(hS),pS=st({},dl,{relatedTarget:0}),ad=Nn(pS),mS=st({},Ma,{animationName:0,elapsedTime:0,pseudoElement:0}),gS=Nn(mS),vS=st({},Ma,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yS=Nn(vS),xS=st({},Ma,{data:0}),Wm=Nn(xS),wS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _S(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=kS[e])?!!t[e]:!1}function Xf(){return _S}var SS=st({},dl,{key:function(e){if(e.key){var t=wS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=yc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?bS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xf,charCode:function(e){return e.type==="keypress"?yc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?yc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),jS=Nn(SS),ES=st({},bu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vm=Nn(ES),CS=st({},dl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xf}),NS=Nn(CS),PS=st({},Ma,{propertyName:0,elapsedTime:0,pseudoElement:0}),RS=Nn(PS),TS=st({},bu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),AS=Nn(TS),OS=[9,13,27,32],Zf=Ir&&"CompositionEvent"in window,xo=null;Ir&&"documentMode"in document&&(xo=document.documentMode);var IS=Ir&&"TextEvent"in window&&!xo,bx=Ir&&(!Zf||xo&&8<xo&&11>=xo),Hm=" ",Km=!1;function kx(e,t){switch(e){case"keyup":return OS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _x(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Wi=!1;function MS(e,t){switch(e){case"compositionend":return _x(t);case"keypress":return t.which!==32?null:(Km=!0,Hm);case"textInput":return e=t.data,e===Hm&&Km?null:e;default:return null}}function $S(e,t){if(Wi)return e==="compositionend"||!Zf&&kx(e,t)?(e=wx(),vc=Jf=us=null,Wi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return bx&&t.locale!=="ko"?null:t.data;default:return null}}var DS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!DS[e.type]:t==="textarea"}function Sx(e,t,n,r){tx(r),t=Fc(t,"onChange"),0<t.length&&(n=new Yf("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var wo=null,Io=null;function LS(e){Mx(e,0)}function ku(e){var t=Ki(e);if(Gy(t))return e}function FS(e,t){if(e==="change")return t}var jx=!1;if(Ir){var od;if(Ir){var ld="oninput"in document;if(!ld){var Gm=document.createElement("div");Gm.setAttribute("oninput","return;"),ld=typeof Gm.oninput=="function"}od=ld}else od=!1;jx=od&&(!document.documentMode||9<document.documentMode)}function Qm(){wo&&(wo.detachEvent("onpropertychange",Ex),Io=wo=null)}function Ex(e){if(e.propertyName==="value"&&ku(Io)){var t=[];Sx(t,Io,e,Hf(e)),ix(LS,t)}}function US(e,t,n){e==="focusin"?(Qm(),wo=t,Io=n,wo.attachEvent("onpropertychange",Ex)):e==="focusout"&&Qm()}function zS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ku(Io)}function BS(e,t){if(e==="click")return ku(t)}function WS(e,t){if(e==="input"||e==="change")return ku(t)}function VS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var er=typeof Object.is=="function"?Object.is:VS;function Mo(e,t){if(er(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!eh.call(t,s)||!er(e[s],t[s]))return!1}return!0}function Jm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ym(e,t){var n=Jm(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Jm(n)}}function Cx(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Cx(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Nx(){for(var e=window,t=Ac();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ac(e.document)}return t}function ep(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function HS(e){var t=Nx(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Cx(n.ownerDocument.documentElement,n)){if(r!==null&&ep(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=Ym(n,i);var a=Ym(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var KS=Ir&&"documentMode"in document&&11>=document.documentMode,Vi=null,xh=null,bo=null,wh=!1;function Xm(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;wh||Vi==null||Vi!==Ac(r)||(r=Vi,"selectionStart"in r&&ep(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),bo&&Mo(bo,r)||(bo=r,r=Fc(xh,"onSelect"),0<r.length&&(t=new Yf("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Vi)))}function zl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Hi={animationend:zl("Animation","AnimationEnd"),animationiteration:zl("Animation","AnimationIteration"),animationstart:zl("Animation","AnimationStart"),transitionend:zl("Transition","TransitionEnd")},cd={},Px={};Ir&&(Px=document.createElement("div").style,"AnimationEvent"in window||(delete Hi.animationend.animation,delete Hi.animationiteration.animation,delete Hi.animationstart.animation),"TransitionEvent"in window||delete Hi.transitionend.transition);function _u(e){if(cd[e])return cd[e];if(!Hi[e])return e;var t=Hi[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Px)return cd[e]=t[n];return e}var Rx=_u("animationend"),Tx=_u("animationiteration"),Ax=_u("animationstart"),Ox=_u("transitionend"),Ix=new Map,Zm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ps(e,t){Ix.set(e,t),vi(t,[e])}for(var ud=0;ud<Zm.length;ud++){var dd=Zm[ud],qS=dd.toLowerCase(),GS=dd[0].toUpperCase()+dd.slice(1);Ps(qS,"on"+GS)}Ps(Rx,"onAnimationEnd");Ps(Tx,"onAnimationIteration");Ps(Ax,"onAnimationStart");Ps("dblclick","onDoubleClick");Ps("focusin","onFocus");Ps("focusout","onBlur");Ps(Ox,"onTransitionEnd");ja("onMouseEnter",["mouseout","mouseover"]);ja("onMouseLeave",["mouseout","mouseover"]);ja("onPointerEnter",["pointerout","pointerover"]);ja("onPointerLeave",["pointerout","pointerover"]);vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vi("onBeforeInput",["compositionend","keypress","textInput","paste"]);vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QS=new Set("cancel close invalid load scroll toggle".split(" ").concat(uo));function eg(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,q_(r,t,void 0,e),e.currentTarget=null}function Mx(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;eg(s,l,u),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;eg(s,l,u),i=c}}}if(Ic)throw e=mh,Ic=!1,mh=null,e}function Je(e,t){var n=t[jh];n===void 0&&(n=t[jh]=new Set);var r=e+"__bubble";n.has(r)||($x(t,e,2,!1),n.add(r))}function hd(e,t,n){var r=0;t&&(r|=4),$x(n,e,r,t)}var Bl="_reactListening"+Math.random().toString(36).slice(2);function $o(e){if(!e[Bl]){e[Bl]=!0,Wy.forEach(function(n){n!=="selectionchange"&&(QS.has(n)||hd(n,!1,e),hd(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Bl]||(t[Bl]=!0,hd("selectionchange",!1,t))}}function $x(e,t,n,r){switch(xx(t)){case 1:var s=cS;break;case 4:s=uS;break;default:s=Qf}n=s.bind(null,t,n,e),s=void 0,!ph||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function fd(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Ks(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}ix(function(){var u=i,d=Hf(n),h=[];e:{var p=Ix.get(e);if(p!==void 0){var x=Yf,w=e;switch(e){case"keypress":if(yc(n)===0)break e;case"keydown":case"keyup":x=jS;break;case"focusin":w="focus",x=ad;break;case"focusout":w="blur",x=ad;break;case"beforeblur":case"afterblur":x=ad;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Bm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=fS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=NS;break;case Rx:case Tx:case Ax:x=gS;break;case Ox:x=RS;break;case"scroll":x=dS;break;case"wheel":x=AS;break;case"copy":case"cut":case"paste":x=yS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Vm}var m=(t&4)!==0,b=!m&&e==="scroll",v=m?p!==null?p+"Capture":null:p;m=[];for(var g=u,y;g!==null;){y=g;var k=y.stateNode;if(y.tag===5&&k!==null&&(y=k,v!==null&&(k=Ro(g,v),k!=null&&m.push(Do(g,k,y)))),b)break;g=g.return}0<m.length&&(p=new x(p,w,null,n,d),h.push({event:p,listeners:m}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",p&&n!==hh&&(w=n.relatedTarget||n.fromElement)&&(Ks(w)||w[Mr]))break e;if((x||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,x?(w=n.relatedTarget||n.toElement,x=u,w=w?Ks(w):null,w!==null&&(b=yi(w),w!==b||w.tag!==5&&w.tag!==6)&&(w=null)):(x=null,w=u),x!==w)){if(m=Bm,k="onMouseLeave",v="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(m=Vm,k="onPointerLeave",v="onPointerEnter",g="pointer"),b=x==null?p:Ki(x),y=w==null?p:Ki(w),p=new m(k,g+"leave",x,n,d),p.target=b,p.relatedTarget=y,k=null,Ks(d)===u&&(m=new m(v,g+"enter",w,n,d),m.target=y,m.relatedTarget=b,k=m),b=k,x&&w)t:{for(m=x,v=w,g=0,y=m;y;y=Ni(y))g++;for(y=0,k=v;k;k=Ni(k))y++;for(;0<g-y;)m=Ni(m),g--;for(;0<y-g;)v=Ni(v),y--;for(;g--;){if(m===v||v!==null&&m===v.alternate)break t;m=Ni(m),v=Ni(v)}m=null}else m=null;x!==null&&tg(h,p,x,m,!1),w!==null&&b!==null&&tg(h,b,w,m,!0)}}e:{if(p=u?Ki(u):window,x=p.nodeName&&p.nodeName.toLowerCase(),x==="select"||x==="input"&&p.type==="file")var _=FS;else if(qm(p))if(jx)_=WS;else{_=zS;var j=US}else(x=p.nodeName)&&x.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(_=BS);if(_&&(_=_(e,u))){Sx(h,_,n,d);break e}j&&j(e,p,u),e==="focusout"&&(j=p._wrapperState)&&j.controlled&&p.type==="number"&&oh(p,"number",p.value)}switch(j=u?Ki(u):window,e){case"focusin":(qm(j)||j.contentEditable==="true")&&(Vi=j,xh=u,bo=null);break;case"focusout":bo=xh=Vi=null;break;case"mousedown":wh=!0;break;case"contextmenu":case"mouseup":case"dragend":wh=!1,Xm(h,n,d);break;case"selectionchange":if(KS)break;case"keydown":case"keyup":Xm(h,n,d)}var E;if(Zf)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Wi?kx(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(bx&&n.locale!=="ko"&&(Wi||C!=="onCompositionStart"?C==="onCompositionEnd"&&Wi&&(E=wx()):(us=d,Jf="value"in us?us.value:us.textContent,Wi=!0)),j=Fc(u,C),0<j.length&&(C=new Wm(C,e,null,n,d),h.push({event:C,listeners:j}),E?C.data=E:(E=_x(n),E!==null&&(C.data=E)))),(E=IS?MS(e,n):$S(e,n))&&(u=Fc(u,"onBeforeInput"),0<u.length&&(d=new Wm("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=E))}Mx(h,t)})}function Do(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fc(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ro(e,n),i!=null&&r.unshift(Do(e,i,s)),i=Ro(e,t),i!=null&&r.push(Do(e,i,s))),e=e.return}return r}function Ni(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function tg(e,t,n,r,s){for(var i=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Ro(n,i),c!=null&&a.unshift(Do(n,c,l))):s||(c=Ro(n,i),c!=null&&a.push(Do(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var JS=/\r\n?/g,YS=/\u0000|\uFFFD/g;function ng(e){return(typeof e=="string"?e:""+e).replace(JS,`
`).replace(YS,"")}function Wl(e,t,n){if(t=ng(t),ng(e)!==t&&n)throw Error(Y(425))}function Uc(){}var bh=null,kh=null;function _h(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Sh=typeof setTimeout=="function"?setTimeout:void 0,XS=typeof clearTimeout=="function"?clearTimeout:void 0,rg=typeof Promise=="function"?Promise:void 0,ZS=typeof queueMicrotask=="function"?queueMicrotask:typeof rg<"u"?function(e){return rg.resolve(null).then(e).catch(e1)}:Sh;function e1(e){setTimeout(function(){throw e})}function pd(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Oo(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Oo(t)}function gs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function sg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var $a=Math.random().toString(36).slice(2),dr="__reactFiber$"+$a,Lo="__reactProps$"+$a,Mr="__reactContainer$"+$a,jh="__reactEvents$"+$a,t1="__reactListeners$"+$a,n1="__reactHandles$"+$a;function Ks(e){var t=e[dr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Mr]||n[dr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=sg(e);e!==null;){if(n=e[dr])return n;e=sg(e)}return t}e=n,n=e.parentNode}return null}function hl(e){return e=e[dr]||e[Mr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ki(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Y(33))}function Su(e){return e[Lo]||null}var Eh=[],qi=-1;function Rs(e){return{current:e}}function Ye(e){0>qi||(e.current=Eh[qi],Eh[qi]=null,qi--)}function qe(e,t){qi++,Eh[qi]=e.current,e.current=t}var Ss={},Ut=Rs(Ss),ln=Rs(!1),ci=Ss;function Ea(e,t){var n=e.type.contextTypes;if(!n)return Ss;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function cn(e){return e=e.childContextTypes,e!=null}function zc(){Ye(ln),Ye(Ut)}function ig(e,t,n){if(Ut.current!==Ss)throw Error(Y(168));qe(Ut,t),qe(ln,n)}function Dx(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(Y(108,U_(e)||"Unknown",s));return st({},n,r)}function Bc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ss,ci=Ut.current,qe(Ut,e),qe(ln,ln.current),!0}function ag(e,t,n){var r=e.stateNode;if(!r)throw Error(Y(169));n?(e=Dx(e,t,ci),r.__reactInternalMemoizedMergedChildContext=e,Ye(ln),Ye(Ut),qe(Ut,e)):Ye(ln),qe(ln,n)}var jr=null,ju=!1,md=!1;function Lx(e){jr===null?jr=[e]:jr.push(e)}function r1(e){ju=!0,Lx(e)}function Ts(){if(!md&&jr!==null){md=!0;var e=0,t=Fe;try{var n=jr;for(Fe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}jr=null,ju=!1}catch(s){throw jr!==null&&(jr=jr.slice(e+1)),cx(Kf,Ts),s}finally{Fe=t,md=!1}}return null}var Gi=[],Qi=0,Wc=null,Vc=0,An=[],On=0,ui=null,Rr=1,Tr="";function Us(e,t){Gi[Qi++]=Vc,Gi[Qi++]=Wc,Wc=e,Vc=t}function Fx(e,t,n){An[On++]=Rr,An[On++]=Tr,An[On++]=ui,ui=e;var r=Rr;e=Tr;var s=32-Xn(r)-1;r&=~(1<<s),n+=1;var i=32-Xn(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Rr=1<<32-Xn(t)+s|n<<s|r,Tr=i+e}else Rr=1<<i|n<<s|r,Tr=e}function tp(e){e.return!==null&&(Us(e,1),Fx(e,1,0))}function np(e){for(;e===Wc;)Wc=Gi[--Qi],Gi[Qi]=null,Vc=Gi[--Qi],Gi[Qi]=null;for(;e===ui;)ui=An[--On],An[On]=null,Tr=An[--On],An[On]=null,Rr=An[--On],An[On]=null}var Sn=null,_n=null,Ze=!1,Yn=null;function Ux(e,t){var n=Mn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function og(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Sn=e,_n=gs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Sn=e,_n=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ui!==null?{id:Rr,overflow:Tr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Mn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Sn=e,_n=null,!0):!1;default:return!1}}function Ch(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Nh(e){if(Ze){var t=_n;if(t){var n=t;if(!og(e,t)){if(Ch(e))throw Error(Y(418));t=gs(n.nextSibling);var r=Sn;t&&og(e,t)?Ux(r,n):(e.flags=e.flags&-4097|2,Ze=!1,Sn=e)}}else{if(Ch(e))throw Error(Y(418));e.flags=e.flags&-4097|2,Ze=!1,Sn=e}}}function lg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Sn=e}function Vl(e){if(e!==Sn)return!1;if(!Ze)return lg(e),Ze=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!_h(e.type,e.memoizedProps)),t&&(t=_n)){if(Ch(e))throw zx(),Error(Y(418));for(;t;)Ux(e,t),t=gs(t.nextSibling)}if(lg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Y(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){_n=gs(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}_n=null}}else _n=Sn?gs(e.stateNode.nextSibling):null;return!0}function zx(){for(var e=_n;e;)e=gs(e.nextSibling)}function Ca(){_n=Sn=null,Ze=!1}function rp(e){Yn===null?Yn=[e]:Yn.push(e)}var s1=zr.ReactCurrentBatchConfig;function eo(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,e))}return e}function Hl(e,t){throw e=Object.prototype.toString.call(t),Error(Y(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function cg(e){var t=e._init;return t(e._payload)}function Bx(e){function t(v,g){if(e){var y=v.deletions;y===null?(v.deletions=[g],v.flags|=16):y.push(g)}}function n(v,g){if(!e)return null;for(;g!==null;)t(v,g),g=g.sibling;return null}function r(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function s(v,g){return v=ws(v,g),v.index=0,v.sibling=null,v}function i(v,g,y){return v.index=y,e?(y=v.alternate,y!==null?(y=y.index,y<g?(v.flags|=2,g):y):(v.flags|=2,g)):(v.flags|=1048576,g)}function a(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,g,y,k){return g===null||g.tag!==6?(g=kd(y,v.mode,k),g.return=v,g):(g=s(g,y),g.return=v,g)}function c(v,g,y,k){var _=y.type;return _===Bi?d(v,g,y.props.children,k,y.key):g!==null&&(g.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Qr&&cg(_)===g.type)?(k=s(g,y.props),k.ref=eo(v,g,y),k.return=v,k):(k=jc(y.type,y.key,y.props,null,v.mode,k),k.ref=eo(v,g,y),k.return=v,k)}function u(v,g,y,k){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=_d(y,v.mode,k),g.return=v,g):(g=s(g,y.children||[]),g.return=v,g)}function d(v,g,y,k,_){return g===null||g.tag!==7?(g=oi(y,v.mode,k,_),g.return=v,g):(g=s(g,y),g.return=v,g)}function h(v,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=kd(""+g,v.mode,y),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Il:return y=jc(g.type,g.key,g.props,null,v.mode,y),y.ref=eo(v,null,g),y.return=v,y;case zi:return g=_d(g,v.mode,y),g.return=v,g;case Qr:var k=g._init;return h(v,k(g._payload),y)}if(lo(g)||Qa(g))return g=oi(g,v.mode,y,null),g.return=v,g;Hl(v,g)}return null}function p(v,g,y,k){var _=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return _!==null?null:l(v,g,""+y,k);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Il:return y.key===_?c(v,g,y,k):null;case zi:return y.key===_?u(v,g,y,k):null;case Qr:return _=y._init,p(v,g,_(y._payload),k)}if(lo(y)||Qa(y))return _!==null?null:d(v,g,y,k,null);Hl(v,y)}return null}function x(v,g,y,k,_){if(typeof k=="string"&&k!==""||typeof k=="number")return v=v.get(y)||null,l(g,v,""+k,_);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Il:return v=v.get(k.key===null?y:k.key)||null,c(g,v,k,_);case zi:return v=v.get(k.key===null?y:k.key)||null,u(g,v,k,_);case Qr:var j=k._init;return x(v,g,y,j(k._payload),_)}if(lo(k)||Qa(k))return v=v.get(y)||null,d(g,v,k,_,null);Hl(g,k)}return null}function w(v,g,y,k){for(var _=null,j=null,E=g,C=g=0,I=null;E!==null&&C<y.length;C++){E.index>C?(I=E,E=null):I=E.sibling;var P=p(v,E,y[C],k);if(P===null){E===null&&(E=I);break}e&&E&&P.alternate===null&&t(v,E),g=i(P,g,C),j===null?_=P:j.sibling=P,j=P,E=I}if(C===y.length)return n(v,E),Ze&&Us(v,C),_;if(E===null){for(;C<y.length;C++)E=h(v,y[C],k),E!==null&&(g=i(E,g,C),j===null?_=E:j.sibling=E,j=E);return Ze&&Us(v,C),_}for(E=r(v,E);C<y.length;C++)I=x(E,v,C,y[C],k),I!==null&&(e&&I.alternate!==null&&E.delete(I.key===null?C:I.key),g=i(I,g,C),j===null?_=I:j.sibling=I,j=I);return e&&E.forEach(function(z){return t(v,z)}),Ze&&Us(v,C),_}function m(v,g,y,k){var _=Qa(y);if(typeof _!="function")throw Error(Y(150));if(y=_.call(y),y==null)throw Error(Y(151));for(var j=_=null,E=g,C=g=0,I=null,P=y.next();E!==null&&!P.done;C++,P=y.next()){E.index>C?(I=E,E=null):I=E.sibling;var z=p(v,E,P.value,k);if(z===null){E===null&&(E=I);break}e&&E&&z.alternate===null&&t(v,E),g=i(z,g,C),j===null?_=z:j.sibling=z,j=z,E=I}if(P.done)return n(v,E),Ze&&Us(v,C),_;if(E===null){for(;!P.done;C++,P=y.next())P=h(v,P.value,k),P!==null&&(g=i(P,g,C),j===null?_=P:j.sibling=P,j=P);return Ze&&Us(v,C),_}for(E=r(v,E);!P.done;C++,P=y.next())P=x(E,v,C,P.value,k),P!==null&&(e&&P.alternate!==null&&E.delete(P.key===null?C:P.key),g=i(P,g,C),j===null?_=P:j.sibling=P,j=P);return e&&E.forEach(function(O){return t(v,O)}),Ze&&Us(v,C),_}function b(v,g,y,k){if(typeof y=="object"&&y!==null&&y.type===Bi&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Il:e:{for(var _=y.key,j=g;j!==null;){if(j.key===_){if(_=y.type,_===Bi){if(j.tag===7){n(v,j.sibling),g=s(j,y.props.children),g.return=v,v=g;break e}}else if(j.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Qr&&cg(_)===j.type){n(v,j.sibling),g=s(j,y.props),g.ref=eo(v,j,y),g.return=v,v=g;break e}n(v,j);break}else t(v,j);j=j.sibling}y.type===Bi?(g=oi(y.props.children,v.mode,k,y.key),g.return=v,v=g):(k=jc(y.type,y.key,y.props,null,v.mode,k),k.ref=eo(v,g,y),k.return=v,v=k)}return a(v);case zi:e:{for(j=y.key;g!==null;){if(g.key===j)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){n(v,g.sibling),g=s(g,y.children||[]),g.return=v,v=g;break e}else{n(v,g);break}else t(v,g);g=g.sibling}g=_d(y,v.mode,k),g.return=v,v=g}return a(v);case Qr:return j=y._init,b(v,g,j(y._payload),k)}if(lo(y))return w(v,g,y,k);if(Qa(y))return m(v,g,y,k);Hl(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(n(v,g.sibling),g=s(g,y),g.return=v,v=g):(n(v,g),g=kd(y,v.mode,k),g.return=v,v=g),a(v)):n(v,g)}return b}var Na=Bx(!0),Wx=Bx(!1),Hc=Rs(null),Kc=null,Ji=null,sp=null;function ip(){sp=Ji=Kc=null}function ap(e){var t=Hc.current;Ye(Hc),e._currentValue=t}function Ph(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function sa(e,t){Kc=e,sp=Ji=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(on=!0),e.firstContext=null)}function Ln(e){var t=e._currentValue;if(sp!==e)if(e={context:e,memoizedValue:t,next:null},Ji===null){if(Kc===null)throw Error(Y(308));Ji=e,Kc.dependencies={lanes:0,firstContext:e}}else Ji=Ji.next=e;return t}var qs=null;function op(e){qs===null?qs=[e]:qs.push(e)}function Vx(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,op(t)):(n.next=s.next,s.next=n),t.interleaved=n,$r(e,r)}function $r(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Jr=!1;function lp(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hx(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ar(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function vs(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ae&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,$r(e,n)}return s=r.interleaved,s===null?(t.next=t,op(r)):(t.next=s.next,s.next=t),r.interleaved=t,$r(e,n)}function xc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,qf(e,n)}}function ug(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qc(e,t,n,r){var s=e.updateQueue;Jr=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;a=0,d=u=c=null,l=i;do{var p=l.lane,x=l.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=e,m=l;switch(p=t,x=n,m.tag){case 1:if(w=m.payload,typeof w=="function"){h=w.call(x,h,p);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=m.payload,p=typeof w=="function"?w.call(x,h,p):w,p==null)break e;h=st({},h,p);break e;case 2:Jr=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else x={eventTime:x,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=x,c=h):d=d.next=x,a|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);hi|=a,e.lanes=a,e.memoizedState=h}}function dg(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Y(191,s));s.call(r)}}}var fl={},gr=Rs(fl),Fo=Rs(fl),Uo=Rs(fl);function Gs(e){if(e===fl)throw Error(Y(174));return e}function cp(e,t){switch(qe(Uo,t),qe(Fo,e),qe(gr,fl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ch(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ch(t,e)}Ye(gr),qe(gr,t)}function Pa(){Ye(gr),Ye(Fo),Ye(Uo)}function Kx(e){Gs(Uo.current);var t=Gs(gr.current),n=ch(t,e.type);t!==n&&(qe(Fo,e),qe(gr,n))}function up(e){Fo.current===e&&(Ye(gr),Ye(Fo))}var nt=Rs(0);function Gc(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var gd=[];function dp(){for(var e=0;e<gd.length;e++)gd[e]._workInProgressVersionPrimary=null;gd.length=0}var wc=zr.ReactCurrentDispatcher,vd=zr.ReactCurrentBatchConfig,di=0,rt=null,xt=null,jt=null,Qc=!1,ko=!1,zo=0,i1=0;function Mt(){throw Error(Y(321))}function hp(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!er(e[n],t[n]))return!1;return!0}function fp(e,t,n,r,s,i){if(di=i,rt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,wc.current=e===null||e.memoizedState===null?c1:u1,e=n(r,s),ko){i=0;do{if(ko=!1,zo=0,25<=i)throw Error(Y(301));i+=1,jt=xt=null,t.updateQueue=null,wc.current=d1,e=n(r,s)}while(ko)}if(wc.current=Jc,t=xt!==null&&xt.next!==null,di=0,jt=xt=rt=null,Qc=!1,t)throw Error(Y(300));return e}function pp(){var e=zo!==0;return zo=0,e}function or(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?rt.memoizedState=jt=e:jt=jt.next=e,jt}function Fn(){if(xt===null){var e=rt.alternate;e=e!==null?e.memoizedState:null}else e=xt.next;var t=jt===null?rt.memoizedState:jt.next;if(t!==null)jt=t,xt=e;else{if(e===null)throw Error(Y(310));xt=e,e={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},jt===null?rt.memoizedState=jt=e:jt=jt.next=e}return jt}function Bo(e,t){return typeof t=="function"?t(e):t}function yd(e){var t=Fn(),n=t.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=e;var r=xt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((di&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,a=r):c=c.next=h,rt.lanes|=d,hi|=d}u=u.next}while(u!==null&&u!==i);c===null?a=r:c.next=l,er(r,t.memoizedState)||(on=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,rt.lanes|=i,hi|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xd(e){var t=Fn(),n=t.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);er(i,t.memoizedState)||(on=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function qx(){}function Gx(e,t){var n=rt,r=Fn(),s=t(),i=!er(r.memoizedState,s);if(i&&(r.memoizedState=s,on=!0),r=r.queue,mp(Yx.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||jt!==null&&jt.memoizedState.tag&1){if(n.flags|=2048,Wo(9,Jx.bind(null,n,r,s,t),void 0,null),Et===null)throw Error(Y(349));di&30||Qx(n,t,s)}return s}function Qx(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=rt.updateQueue,t===null?(t={lastEffect:null,stores:null},rt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Jx(e,t,n,r){t.value=n,t.getSnapshot=r,Xx(t)&&Zx(e)}function Yx(e,t,n){return n(function(){Xx(t)&&Zx(e)})}function Xx(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!er(e,n)}catch{return!0}}function Zx(e){var t=$r(e,1);t!==null&&Zn(t,e,1,-1)}function hg(e){var t=or();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bo,lastRenderedState:e},t.queue=e,e=e.dispatch=l1.bind(null,rt,e),[t.memoizedState,e]}function Wo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=rt.updateQueue,t===null?(t={lastEffect:null,stores:null},rt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function ew(){return Fn().memoizedState}function bc(e,t,n,r){var s=or();rt.flags|=e,s.memoizedState=Wo(1|t,n,void 0,r===void 0?null:r)}function Eu(e,t,n,r){var s=Fn();r=r===void 0?null:r;var i=void 0;if(xt!==null){var a=xt.memoizedState;if(i=a.destroy,r!==null&&hp(r,a.deps)){s.memoizedState=Wo(t,n,i,r);return}}rt.flags|=e,s.memoizedState=Wo(1|t,n,i,r)}function fg(e,t){return bc(8390656,8,e,t)}function mp(e,t){return Eu(2048,8,e,t)}function tw(e,t){return Eu(4,2,e,t)}function nw(e,t){return Eu(4,4,e,t)}function rw(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function sw(e,t,n){return n=n!=null?n.concat([e]):null,Eu(4,4,rw.bind(null,t,e),n)}function gp(){}function iw(e,t){var n=Fn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&hp(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function aw(e,t){var n=Fn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&hp(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ow(e,t,n){return di&21?(er(n,t)||(n=hx(),rt.lanes|=n,hi|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,on=!0),e.memoizedState=n)}function a1(e,t){var n=Fe;Fe=n!==0&&4>n?n:4,e(!0);var r=vd.transition;vd.transition={};try{e(!1),t()}finally{Fe=n,vd.transition=r}}function lw(){return Fn().memoizedState}function o1(e,t,n){var r=xs(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},cw(e))uw(t,n);else if(n=Vx(e,t,n,r),n!==null){var s=Kt();Zn(n,e,r,s),dw(n,t,r)}}function l1(e,t,n){var r=xs(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(cw(e))uw(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,er(l,a)){var c=t.interleaved;c===null?(s.next=s,op(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=Vx(e,t,s,r),n!==null&&(s=Kt(),Zn(n,e,r,s),dw(n,t,r))}}function cw(e){var t=e.alternate;return e===rt||t!==null&&t===rt}function uw(e,t){ko=Qc=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function dw(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,qf(e,n)}}var Jc={readContext:Ln,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},c1={readContext:Ln,useCallback:function(e,t){return or().memoizedState=[e,t===void 0?null:t],e},useContext:Ln,useEffect:fg,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,bc(4194308,4,rw.bind(null,t,e),n)},useLayoutEffect:function(e,t){return bc(4194308,4,e,t)},useInsertionEffect:function(e,t){return bc(4,2,e,t)},useMemo:function(e,t){var n=or();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=or();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=o1.bind(null,rt,e),[r.memoizedState,e]},useRef:function(e){var t=or();return e={current:e},t.memoizedState=e},useState:hg,useDebugValue:gp,useDeferredValue:function(e){return or().memoizedState=e},useTransition:function(){var e=hg(!1),t=e[0];return e=a1.bind(null,e[1]),or().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=rt,s=or();if(Ze){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=t(),Et===null)throw Error(Y(349));di&30||Qx(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,fg(Yx.bind(null,r,i,e),[e]),r.flags|=2048,Wo(9,Jx.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=or(),t=Et.identifierPrefix;if(Ze){var n=Tr,r=Rr;n=(r&~(1<<32-Xn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=zo++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=i1++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},u1={readContext:Ln,useCallback:iw,useContext:Ln,useEffect:mp,useImperativeHandle:sw,useInsertionEffect:tw,useLayoutEffect:nw,useMemo:aw,useReducer:yd,useRef:ew,useState:function(){return yd(Bo)},useDebugValue:gp,useDeferredValue:function(e){var t=Fn();return ow(t,xt.memoizedState,e)},useTransition:function(){var e=yd(Bo)[0],t=Fn().memoizedState;return[e,t]},useMutableSource:qx,useSyncExternalStore:Gx,useId:lw,unstable_isNewReconciler:!1},d1={readContext:Ln,useCallback:iw,useContext:Ln,useEffect:mp,useImperativeHandle:sw,useInsertionEffect:tw,useLayoutEffect:nw,useMemo:aw,useReducer:xd,useRef:ew,useState:function(){return xd(Bo)},useDebugValue:gp,useDeferredValue:function(e){var t=Fn();return xt===null?t.memoizedState=e:ow(t,xt.memoizedState,e)},useTransition:function(){var e=xd(Bo)[0],t=Fn().memoizedState;return[e,t]},useMutableSource:qx,useSyncExternalStore:Gx,useId:lw,unstable_isNewReconciler:!1};function Hn(e,t){if(e&&e.defaultProps){t=st({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Rh(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:st({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Cu={isMounted:function(e){return(e=e._reactInternals)?yi(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Kt(),s=xs(e),i=Ar(r,s);i.payload=t,n!=null&&(i.callback=n),t=vs(e,i,s),t!==null&&(Zn(t,e,s,r),xc(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Kt(),s=xs(e),i=Ar(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=vs(e,i,s),t!==null&&(Zn(t,e,s,r),xc(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Kt(),r=xs(e),s=Ar(n,r);s.tag=2,t!=null&&(s.callback=t),t=vs(e,s,r),t!==null&&(Zn(t,e,r,n),xc(t,e,r))}};function pg(e,t,n,r,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,a):t.prototype&&t.prototype.isPureReactComponent?!Mo(n,r)||!Mo(s,i):!0}function hw(e,t,n){var r=!1,s=Ss,i=t.contextType;return typeof i=="object"&&i!==null?i=Ln(i):(s=cn(t)?ci:Ut.current,r=t.contextTypes,i=(r=r!=null)?Ea(e,s):Ss),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Cu,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function mg(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Cu.enqueueReplaceState(t,t.state,null)}function Th(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},lp(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Ln(i):(i=cn(t)?ci:Ut.current,s.context=Ea(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Rh(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Cu.enqueueReplaceState(s,s.state,null),qc(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Ra(e,t){try{var n="",r=t;do n+=F_(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function wd(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ah(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var h1=typeof WeakMap=="function"?WeakMap:Map;function fw(e,t,n){n=Ar(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Xc||(Xc=!0,Bh=r),Ah(e,t)},n}function pw(e,t,n){n=Ar(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Ah(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ah(e,t),typeof r!="function"&&(ys===null?ys=new Set([this]):ys.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function gg(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new h1;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=E1.bind(null,e,t,n),t.then(e,e))}function vg(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function yg(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ar(-1,1),t.tag=2,vs(n,t,1))),n.lanes|=1),e)}var f1=zr.ReactCurrentOwner,on=!1;function Vt(e,t,n,r){t.child=e===null?Wx(t,null,n,r):Na(t,e.child,n,r)}function xg(e,t,n,r,s){n=n.render;var i=t.ref;return sa(t,s),r=fp(e,t,n,r,i,s),n=pp(),e!==null&&!on?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Dr(e,t,s)):(Ze&&n&&tp(t),t.flags|=1,Vt(e,t,r,s),t.child)}function wg(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!Sp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,mw(e,t,i,r,s)):(e=jc(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Mo,n(a,r)&&e.ref===t.ref)return Dr(e,t,s)}return t.flags|=1,e=ws(i,r),e.ref=t.ref,e.return=t,t.child=e}function mw(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Mo(i,r)&&e.ref===t.ref)if(on=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(on=!0);else return t.lanes=e.lanes,Dr(e,t,s)}return Oh(e,t,n,r,s)}function gw(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(Xi,xn),xn|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,qe(Xi,xn),xn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,qe(Xi,xn),xn|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,qe(Xi,xn),xn|=r;return Vt(e,t,s,n),t.child}function vw(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Oh(e,t,n,r,s){var i=cn(n)?ci:Ut.current;return i=Ea(t,i),sa(t,s),n=fp(e,t,n,r,i,s),r=pp(),e!==null&&!on?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Dr(e,t,s)):(Ze&&r&&tp(t),t.flags|=1,Vt(e,t,n,s),t.child)}function bg(e,t,n,r,s){if(cn(n)){var i=!0;Bc(t)}else i=!1;if(sa(t,s),t.stateNode===null)kc(e,t),hw(t,n,r),Th(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ln(u):(u=cn(n)?ci:Ut.current,u=Ea(t,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&mg(t,a,r,u),Jr=!1;var p=t.memoizedState;a.state=p,qc(t,r,a,s),c=t.memoizedState,l!==r||p!==c||ln.current||Jr?(typeof d=="function"&&(Rh(t,n,d,r),c=t.memoizedState),(l=Jr||pg(t,n,l,r,p,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Hx(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Hn(t.type,l),a.props=u,h=t.pendingProps,p=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ln(c):(c=cn(n)?ci:Ut.current,c=Ea(t,c));var x=n.getDerivedStateFromProps;(d=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||p!==c)&&mg(t,a,r,c),Jr=!1,p=t.memoizedState,a.state=p,qc(t,r,a,s);var w=t.memoizedState;l!==h||p!==w||ln.current||Jr?(typeof x=="function"&&(Rh(t,n,x,r),w=t.memoizedState),(u=Jr||pg(t,n,u,r,p,w,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,w,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,w,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),a.props=r,a.state=w,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return Ih(e,t,n,r,i,s)}function Ih(e,t,n,r,s,i){vw(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&ag(t,n,!1),Dr(e,t,i);r=t.stateNode,f1.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Na(t,e.child,null,i),t.child=Na(t,null,l,i)):Vt(e,t,l,i),t.memoizedState=r.state,s&&ag(t,n,!0),t.child}function yw(e){var t=e.stateNode;t.pendingContext?ig(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ig(e,t.context,!1),cp(e,t.containerInfo)}function kg(e,t,n,r,s){return Ca(),rp(s),t.flags|=256,Vt(e,t,n,r),t.child}var Mh={dehydrated:null,treeContext:null,retryLane:0};function $h(e){return{baseLanes:e,cachePool:null,transitions:null}}function xw(e,t,n){var r=t.pendingProps,s=nt.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),qe(nt,s&1),e===null)return Nh(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,i?(r=t.mode,i=t.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Ru(a,r,0,null),e=oi(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=$h(n),t.memoizedState=Mh,e):vp(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return p1(e,t,a,r,l,s,n);if(i){i=r.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=ws(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=ws(l,i):(i=oi(i,a,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,a=e.child.memoizedState,a=a===null?$h(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=Mh,r}return i=e.child,e=i.sibling,r=ws(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function vp(e,t){return t=Ru({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Kl(e,t,n,r){return r!==null&&rp(r),Na(t,e.child,null,n),e=vp(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function p1(e,t,n,r,s,i,a){if(n)return t.flags&256?(t.flags&=-257,r=wd(Error(Y(422))),Kl(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Ru({mode:"visible",children:r.children},s,0,null),i=oi(i,s,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Na(t,e.child,null,a),t.child.memoizedState=$h(a),t.memoizedState=Mh,i);if(!(t.mode&1))return Kl(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(Y(419)),r=wd(i,r,void 0),Kl(e,t,a,r)}if(l=(a&e.childLanes)!==0,on||l){if(r=Et,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,$r(e,s),Zn(r,e,s,-1))}return _p(),r=wd(Error(Y(421))),Kl(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=C1.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,_n=gs(s.nextSibling),Sn=t,Ze=!0,Yn=null,e!==null&&(An[On++]=Rr,An[On++]=Tr,An[On++]=ui,Rr=e.id,Tr=e.overflow,ui=t),t=vp(t,r.children),t.flags|=4096,t)}function _g(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ph(e.return,t,n)}function bd(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function ww(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Vt(e,t,r.children,n),r=nt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&_g(e,n,t);else if(e.tag===19)_g(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(qe(nt,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Gc(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),bd(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Gc(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}bd(t,!0,n,null,i);break;case"together":bd(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function kc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Dr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),hi|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Y(153));if(t.child!==null){for(e=t.child,n=ws(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ws(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function m1(e,t,n){switch(t.tag){case 3:yw(t),Ca();break;case 5:Kx(t);break;case 1:cn(t.type)&&Bc(t);break;case 4:cp(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;qe(Hc,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(qe(nt,nt.current&1),t.flags|=128,null):n&t.child.childLanes?xw(e,t,n):(qe(nt,nt.current&1),e=Dr(e,t,n),e!==null?e.sibling:null);qe(nt,nt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return ww(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),qe(nt,nt.current),r)break;return null;case 22:case 23:return t.lanes=0,gw(e,t,n)}return Dr(e,t,n)}var bw,Dh,kw,_w;bw=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Dh=function(){};kw=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Gs(gr.current);var i=null;switch(n){case"input":s=ih(e,s),r=ih(e,r),i=[];break;case"select":s=st({},s,{value:void 0}),r=st({},r,{value:void 0}),i=[];break;case"textarea":s=lh(e,s),r=lh(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Uc)}uh(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(No.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(No.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Je("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};_w=function(e,t,n,r){n!==r&&(t.flags|=4)};function to(e,t){if(!Ze)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function $t(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function g1(e,t,n){var r=t.pendingProps;switch(np(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(t),null;case 1:return cn(t.type)&&zc(),$t(t),null;case 3:return r=t.stateNode,Pa(),Ye(ln),Ye(Ut),dp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Vl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Yn!==null&&(Hh(Yn),Yn=null))),Dh(e,t),$t(t),null;case 5:up(t);var s=Gs(Uo.current);if(n=t.type,e!==null&&t.stateNode!=null)kw(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Y(166));return $t(t),null}if(e=Gs(gr.current),Vl(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[dr]=t,r[Lo]=i,e=(t.mode&1)!==0,n){case"dialog":Je("cancel",r),Je("close",r);break;case"iframe":case"object":case"embed":Je("load",r);break;case"video":case"audio":for(s=0;s<uo.length;s++)Je(uo[s],r);break;case"source":Je("error",r);break;case"img":case"image":case"link":Je("error",r),Je("load",r);break;case"details":Je("toggle",r);break;case"input":Am(r,i),Je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Je("invalid",r);break;case"textarea":Im(r,i),Je("invalid",r)}uh(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Wl(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Wl(r.textContent,l,e),s=["children",""+l]):No.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Je("scroll",r)}switch(n){case"input":Ml(r),Om(r,i,!0);break;case"textarea":Ml(r),Mm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Uc)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Yy(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[dr]=t,e[Lo]=r,bw(e,t,!1,!1),t.stateNode=e;e:{switch(a=dh(n,r),n){case"dialog":Je("cancel",e),Je("close",e),s=r;break;case"iframe":case"object":case"embed":Je("load",e),s=r;break;case"video":case"audio":for(s=0;s<uo.length;s++)Je(uo[s],e);s=r;break;case"source":Je("error",e),s=r;break;case"img":case"image":case"link":Je("error",e),Je("load",e),s=r;break;case"details":Je("toggle",e),s=r;break;case"input":Am(e,r),s=ih(e,r),Je("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=st({},r,{value:void 0}),Je("invalid",e);break;case"textarea":Im(e,r),s=lh(e,r),Je("invalid",e);break;default:s=r}uh(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?ex(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Xy(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Po(e,c):typeof c=="number"&&Po(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(No.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Je("scroll",e):c!=null&&zf(e,i,c,a))}switch(n){case"input":Ml(e),Om(e,r,!1);break;case"textarea":Ml(e),Mm(e);break;case"option":r.value!=null&&e.setAttribute("value",""+_s(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?ea(e,!!r.multiple,i,!1):r.defaultValue!=null&&ea(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Uc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return $t(t),null;case 6:if(e&&t.stateNode!=null)_w(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Y(166));if(n=Gs(Uo.current),Gs(gr.current),Vl(t)){if(r=t.stateNode,n=t.memoizedProps,r[dr]=t,(i=r.nodeValue!==n)&&(e=Sn,e!==null))switch(e.tag){case 3:Wl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Wl(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[dr]=t,t.stateNode=r}return $t(t),null;case 13:if(Ye(nt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ze&&_n!==null&&t.mode&1&&!(t.flags&128))zx(),Ca(),t.flags|=98560,i=!1;else if(i=Vl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(Y(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Y(317));i[dr]=t}else Ca(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;$t(t),i=!1}else Yn!==null&&(Hh(Yn),Yn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||nt.current&1?bt===0&&(bt=3):_p())),t.updateQueue!==null&&(t.flags|=4),$t(t),null);case 4:return Pa(),Dh(e,t),e===null&&$o(t.stateNode.containerInfo),$t(t),null;case 10:return ap(t.type._context),$t(t),null;case 17:return cn(t.type)&&zc(),$t(t),null;case 19:if(Ye(nt),i=t.memoizedState,i===null)return $t(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)to(i,!1);else{if(bt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Gc(e),a!==null){for(t.flags|=128,to(i,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return qe(nt,nt.current&1|2),t.child}e=e.sibling}i.tail!==null&&ht()>Ta&&(t.flags|=128,r=!0,to(i,!1),t.lanes=4194304)}else{if(!r)if(e=Gc(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),to(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ze)return $t(t),null}else 2*ht()-i.renderingStartTime>Ta&&n!==1073741824&&(t.flags|=128,r=!0,to(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ht(),t.sibling=null,n=nt.current,qe(nt,r?n&1|2:n&1),t):($t(t),null);case 22:case 23:return kp(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?xn&1073741824&&($t(t),t.subtreeFlags&6&&(t.flags|=8192)):$t(t),null;case 24:return null;case 25:return null}throw Error(Y(156,t.tag))}function v1(e,t){switch(np(t),t.tag){case 1:return cn(t.type)&&zc(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Pa(),Ye(ln),Ye(Ut),dp(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return up(t),null;case 13:if(Ye(nt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Y(340));Ca()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ye(nt),null;case 4:return Pa(),null;case 10:return ap(t.type._context),null;case 22:case 23:return kp(),null;case 24:return null;default:return null}}var ql=!1,Lt=!1,y1=typeof WeakSet=="function"?WeakSet:Set,se=null;function Yi(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ct(e,t,r)}else n.current=null}function Lh(e,t,n){try{n()}catch(r){ct(e,t,r)}}var Sg=!1;function x1(e,t){if(bh=Dc,e=Nx(),ep(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var x;h!==n||s!==0&&h.nodeType!==3||(l=a+s),h!==i||r!==0&&h.nodeType!==3||(c=a+r),h.nodeType===3&&(a+=h.nodeValue.length),(x=h.firstChild)!==null;)p=h,h=x;for(;;){if(h===e)break t;if(p===n&&++u===s&&(l=a),p===i&&++d===r&&(c=a),(x=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=x}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(kh={focusedElem:e,selectionRange:n},Dc=!1,se=t;se!==null;)if(t=se,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,se=e;else for(;se!==null;){t=se;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var m=w.memoizedProps,b=w.memoizedState,v=t.stateNode,g=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:Hn(t.type,m),b);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(k){ct(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,se=e;break}se=t.return}return w=Sg,Sg=!1,w}function _o(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Lh(t,n,i)}s=s.next}while(s!==r)}}function Nu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Fh(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Sw(e){var t=e.alternate;t!==null&&(e.alternate=null,Sw(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[dr],delete t[Lo],delete t[jh],delete t[t1],delete t[n1])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function jw(e){return e.tag===5||e.tag===3||e.tag===4}function jg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||jw(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Uh(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Uc));else if(r!==4&&(e=e.child,e!==null))for(Uh(e,t,n),e=e.sibling;e!==null;)Uh(e,t,n),e=e.sibling}function zh(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(zh(e,t,n),e=e.sibling;e!==null;)zh(e,t,n),e=e.sibling}var Pt=null,Qn=!1;function Vr(e,t,n){for(n=n.child;n!==null;)Ew(e,t,n),n=n.sibling}function Ew(e,t,n){if(mr&&typeof mr.onCommitFiberUnmount=="function")try{mr.onCommitFiberUnmount(wu,n)}catch{}switch(n.tag){case 5:Lt||Yi(n,t);case 6:var r=Pt,s=Qn;Pt=null,Vr(e,t,n),Pt=r,Qn=s,Pt!==null&&(Qn?(e=Pt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Pt.removeChild(n.stateNode));break;case 18:Pt!==null&&(Qn?(e=Pt,n=n.stateNode,e.nodeType===8?pd(e.parentNode,n):e.nodeType===1&&pd(e,n),Oo(e)):pd(Pt,n.stateNode));break;case 4:r=Pt,s=Qn,Pt=n.stateNode.containerInfo,Qn=!0,Vr(e,t,n),Pt=r,Qn=s;break;case 0:case 11:case 14:case 15:if(!Lt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Lh(n,t,a),s=s.next}while(s!==r)}Vr(e,t,n);break;case 1:if(!Lt&&(Yi(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ct(n,t,l)}Vr(e,t,n);break;case 21:Vr(e,t,n);break;case 22:n.mode&1?(Lt=(r=Lt)||n.memoizedState!==null,Vr(e,t,n),Lt=r):Vr(e,t,n);break;default:Vr(e,t,n)}}function Eg(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new y1),t.forEach(function(r){var s=N1.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Wn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:Pt=l.stateNode,Qn=!1;break e;case 3:Pt=l.stateNode.containerInfo,Qn=!0;break e;case 4:Pt=l.stateNode.containerInfo,Qn=!0;break e}l=l.return}if(Pt===null)throw Error(Y(160));Ew(i,a,s),Pt=null,Qn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ct(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Cw(t,e),t=t.sibling}function Cw(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Wn(t,e),ar(e),r&4){try{_o(3,e,e.return),Nu(3,e)}catch(m){ct(e,e.return,m)}try{_o(5,e,e.return)}catch(m){ct(e,e.return,m)}}break;case 1:Wn(t,e),ar(e),r&512&&n!==null&&Yi(n,n.return);break;case 5:if(Wn(t,e),ar(e),r&512&&n!==null&&Yi(n,n.return),e.flags&32){var s=e.stateNode;try{Po(s,"")}catch(m){ct(e,e.return,m)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Qy(s,i),dh(l,a);var u=dh(l,i);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];d==="style"?ex(s,h):d==="dangerouslySetInnerHTML"?Xy(s,h):d==="children"?Po(s,h):zf(s,d,h,u)}switch(l){case"input":ah(s,i);break;case"textarea":Jy(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?ea(s,!!i.multiple,x,!1):p!==!!i.multiple&&(i.defaultValue!=null?ea(s,!!i.multiple,i.defaultValue,!0):ea(s,!!i.multiple,i.multiple?[]:"",!1))}s[Lo]=i}catch(m){ct(e,e.return,m)}}break;case 6:if(Wn(t,e),ar(e),r&4){if(e.stateNode===null)throw Error(Y(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(m){ct(e,e.return,m)}}break;case 3:if(Wn(t,e),ar(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Oo(t.containerInfo)}catch(m){ct(e,e.return,m)}break;case 4:Wn(t,e),ar(e);break;case 13:Wn(t,e),ar(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(wp=ht())),r&4&&Eg(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Lt=(u=Lt)||d,Wn(t,e),Lt=u):Wn(t,e),ar(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(se=e,d=e.child;d!==null;){for(h=se=d;se!==null;){switch(p=se,x=p.child,p.tag){case 0:case 11:case 14:case 15:_o(4,p,p.return);break;case 1:Yi(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(m){ct(r,n,m)}}break;case 5:Yi(p,p.return);break;case 22:if(p.memoizedState!==null){Ng(h);continue}}x!==null?(x.return=p,se=x):Ng(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Zy("display",a))}catch(m){ct(e,e.return,m)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){ct(e,e.return,m)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Wn(t,e),ar(e),r&4&&Eg(e);break;case 21:break;default:Wn(t,e),ar(e)}}function ar(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(jw(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Po(s,""),r.flags&=-33);var i=jg(e);zh(e,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=jg(e);Uh(e,l,a);break;default:throw Error(Y(161))}}catch(c){ct(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function w1(e,t,n){se=e,Nw(e)}function Nw(e,t,n){for(var r=(e.mode&1)!==0;se!==null;){var s=se,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||ql;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Lt;l=ql;var u=Lt;if(ql=a,(Lt=c)&&!u)for(se=s;se!==null;)a=se,c=a.child,a.tag===22&&a.memoizedState!==null?Pg(s):c!==null?(c.return=a,se=c):Pg(s);for(;i!==null;)se=i,Nw(i),i=i.sibling;se=s,ql=l,Lt=u}Cg(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,se=i):Cg(e)}}function Cg(e){for(;se!==null;){var t=se;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Lt||Nu(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Lt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Hn(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&dg(t,i,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}dg(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Oo(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Lt||t.flags&512&&Fh(t)}catch(p){ct(t,t.return,p)}}if(t===e){se=null;break}if(n=t.sibling,n!==null){n.return=t.return,se=n;break}se=t.return}}function Ng(e){for(;se!==null;){var t=se;if(t===e){se=null;break}var n=t.sibling;if(n!==null){n.return=t.return,se=n;break}se=t.return}}function Pg(e){for(;se!==null;){var t=se;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Nu(4,t)}catch(c){ct(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){ct(t,s,c)}}var i=t.return;try{Fh(t)}catch(c){ct(t,i,c)}break;case 5:var a=t.return;try{Fh(t)}catch(c){ct(t,a,c)}}}catch(c){ct(t,t.return,c)}if(t===e){se=null;break}var l=t.sibling;if(l!==null){l.return=t.return,se=l;break}se=t.return}}var b1=Math.ceil,Yc=zr.ReactCurrentDispatcher,yp=zr.ReactCurrentOwner,$n=zr.ReactCurrentBatchConfig,Ae=0,Et=null,pt=null,Tt=0,xn=0,Xi=Rs(0),bt=0,Vo=null,hi=0,Pu=0,xp=0,So=null,an=null,wp=0,Ta=1/0,_r=null,Xc=!1,Bh=null,ys=null,Gl=!1,ds=null,Zc=0,jo=0,Wh=null,_c=-1,Sc=0;function Kt(){return Ae&6?ht():_c!==-1?_c:_c=ht()}function xs(e){return e.mode&1?Ae&2&&Tt!==0?Tt&-Tt:s1.transition!==null?(Sc===0&&(Sc=hx()),Sc):(e=Fe,e!==0||(e=window.event,e=e===void 0?16:xx(e.type)),e):1}function Zn(e,t,n,r){if(50<jo)throw jo=0,Wh=null,Error(Y(185));ul(e,n,r),(!(Ae&2)||e!==Et)&&(e===Et&&(!(Ae&2)&&(Pu|=n),bt===4&&Zr(e,Tt)),un(e,r),n===1&&Ae===0&&!(t.mode&1)&&(Ta=ht()+500,ju&&Ts()))}function un(e,t){var n=e.callbackNode;sS(e,t);var r=$c(e,e===Et?Tt:0);if(r===0)n!==null&&Lm(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Lm(n),t===1)e.tag===0?r1(Rg.bind(null,e)):Lx(Rg.bind(null,e)),ZS(function(){!(Ae&6)&&Ts()}),n=null;else{switch(fx(r)){case 1:n=Kf;break;case 4:n=ux;break;case 16:n=Mc;break;case 536870912:n=dx;break;default:n=Mc}n=$w(n,Pw.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Pw(e,t){if(_c=-1,Sc=0,Ae&6)throw Error(Y(327));var n=e.callbackNode;if(ia()&&e.callbackNode!==n)return null;var r=$c(e,e===Et?Tt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=eu(e,r);else{t=r;var s=Ae;Ae|=2;var i=Tw();(Et!==e||Tt!==t)&&(_r=null,Ta=ht()+500,ai(e,t));do try{S1();break}catch(l){Rw(e,l)}while(!0);ip(),Yc.current=i,Ae=s,pt!==null?t=0:(Et=null,Tt=0,t=bt)}if(t!==0){if(t===2&&(s=gh(e),s!==0&&(r=s,t=Vh(e,s))),t===1)throw n=Vo,ai(e,0),Zr(e,r),un(e,ht()),n;if(t===6)Zr(e,r);else{if(s=e.current.alternate,!(r&30)&&!k1(s)&&(t=eu(e,r),t===2&&(i=gh(e),i!==0&&(r=i,t=Vh(e,i))),t===1))throw n=Vo,ai(e,0),Zr(e,r),un(e,ht()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(Y(345));case 2:zs(e,an,_r);break;case 3:if(Zr(e,r),(r&130023424)===r&&(t=wp+500-ht(),10<t)){if($c(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Kt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Sh(zs.bind(null,e,an,_r),t);break}zs(e,an,_r);break;case 4:if(Zr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-Xn(r);i=1<<a,a=t[a],a>s&&(s=a),r&=~i}if(r=s,r=ht()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*b1(r/1960))-r,10<r){e.timeoutHandle=Sh(zs.bind(null,e,an,_r),r);break}zs(e,an,_r);break;case 5:zs(e,an,_r);break;default:throw Error(Y(329))}}}return un(e,ht()),e.callbackNode===n?Pw.bind(null,e):null}function Vh(e,t){var n=So;return e.current.memoizedState.isDehydrated&&(ai(e,t).flags|=256),e=eu(e,t),e!==2&&(t=an,an=n,t!==null&&Hh(t)),e}function Hh(e){an===null?an=e:an.push.apply(an,e)}function k1(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!er(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zr(e,t){for(t&=~xp,t&=~Pu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Xn(t),r=1<<n;e[n]=-1,t&=~r}}function Rg(e){if(Ae&6)throw Error(Y(327));ia();var t=$c(e,0);if(!(t&1))return un(e,ht()),null;var n=eu(e,t);if(e.tag!==0&&n===2){var r=gh(e);r!==0&&(t=r,n=Vh(e,r))}if(n===1)throw n=Vo,ai(e,0),Zr(e,t),un(e,ht()),n;if(n===6)throw Error(Y(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,zs(e,an,_r),un(e,ht()),null}function bp(e,t){var n=Ae;Ae|=1;try{return e(t)}finally{Ae=n,Ae===0&&(Ta=ht()+500,ju&&Ts())}}function fi(e){ds!==null&&ds.tag===0&&!(Ae&6)&&ia();var t=Ae;Ae|=1;var n=$n.transition,r=Fe;try{if($n.transition=null,Fe=1,e)return e()}finally{Fe=r,$n.transition=n,Ae=t,!(Ae&6)&&Ts()}}function kp(){xn=Xi.current,Ye(Xi)}function ai(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,XS(n)),pt!==null)for(n=pt.return;n!==null;){var r=n;switch(np(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&zc();break;case 3:Pa(),Ye(ln),Ye(Ut),dp();break;case 5:up(r);break;case 4:Pa();break;case 13:Ye(nt);break;case 19:Ye(nt);break;case 10:ap(r.type._context);break;case 22:case 23:kp()}n=n.return}if(Et=e,pt=e=ws(e.current,null),Tt=xn=t,bt=0,Vo=null,xp=Pu=hi=0,an=So=null,qs!==null){for(t=0;t<qs.length;t++)if(n=qs[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}qs=null}return e}function Rw(e,t){do{var n=pt;try{if(ip(),wc.current=Jc,Qc){for(var r=rt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Qc=!1}if(di=0,jt=xt=rt=null,ko=!1,zo=0,yp.current=null,n===null||n.return===null){bt=1,Vo=t,pt=null;break}e:{var i=e,a=n.return,l=n,c=t;if(t=Tt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var x=vg(a);if(x!==null){x.flags&=-257,yg(x,a,l,i,t),x.mode&1&&gg(i,u,t),t=x,c=u;var w=t.updateQueue;if(w===null){var m=new Set;m.add(c),t.updateQueue=m}else w.add(c);break e}else{if(!(t&1)){gg(i,u,t),_p();break e}c=Error(Y(426))}}else if(Ze&&l.mode&1){var b=vg(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),yg(b,a,l,i,t),rp(Ra(c,l));break e}}i=c=Ra(c,l),bt!==4&&(bt=2),So===null?So=[i]:So.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=fw(i,c,t);ug(i,v);break e;case 1:l=c;var g=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ys===null||!ys.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var k=pw(i,l,t);ug(i,k);break e}}i=i.return}while(i!==null)}Ow(n)}catch(_){t=_,pt===n&&n!==null&&(pt=n=n.return);continue}break}while(!0)}function Tw(){var e=Yc.current;return Yc.current=Jc,e===null?Jc:e}function _p(){(bt===0||bt===3||bt===2)&&(bt=4),Et===null||!(hi&268435455)&&!(Pu&268435455)||Zr(Et,Tt)}function eu(e,t){var n=Ae;Ae|=2;var r=Tw();(Et!==e||Tt!==t)&&(_r=null,ai(e,t));do try{_1();break}catch(s){Rw(e,s)}while(!0);if(ip(),Ae=n,Yc.current=r,pt!==null)throw Error(Y(261));return Et=null,Tt=0,bt}function _1(){for(;pt!==null;)Aw(pt)}function S1(){for(;pt!==null&&!Q_();)Aw(pt)}function Aw(e){var t=Mw(e.alternate,e,xn);e.memoizedProps=e.pendingProps,t===null?Ow(e):pt=t,yp.current=null}function Ow(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=v1(n,t),n!==null){n.flags&=32767,pt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{bt=6,pt=null;return}}else if(n=g1(n,t,xn),n!==null){pt=n;return}if(t=t.sibling,t!==null){pt=t;return}pt=t=e}while(t!==null);bt===0&&(bt=5)}function zs(e,t,n){var r=Fe,s=$n.transition;try{$n.transition=null,Fe=1,j1(e,t,n,r)}finally{$n.transition=s,Fe=r}return null}function j1(e,t,n,r){do ia();while(ds!==null);if(Ae&6)throw Error(Y(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Y(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(iS(e,i),e===Et&&(pt=Et=null,Tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Gl||(Gl=!0,$w(Mc,function(){return ia(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=$n.transition,$n.transition=null;var a=Fe;Fe=1;var l=Ae;Ae|=4,yp.current=null,x1(e,n),Cw(n,e),HS(kh),Dc=!!bh,kh=bh=null,e.current=n,w1(n),J_(),Ae=l,Fe=a,$n.transition=i}else e.current=n;if(Gl&&(Gl=!1,ds=e,Zc=s),i=e.pendingLanes,i===0&&(ys=null),Z_(n.stateNode),un(e,ht()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Xc)throw Xc=!1,e=Bh,Bh=null,e;return Zc&1&&e.tag!==0&&ia(),i=e.pendingLanes,i&1?e===Wh?jo++:(jo=0,Wh=e):jo=0,Ts(),null}function ia(){if(ds!==null){var e=fx(Zc),t=$n.transition,n=Fe;try{if($n.transition=null,Fe=16>e?16:e,ds===null)var r=!1;else{if(e=ds,ds=null,Zc=0,Ae&6)throw Error(Y(331));var s=Ae;for(Ae|=4,se=e.current;se!==null;){var i=se,a=i.child;if(se.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(se=u;se!==null;){var d=se;switch(d.tag){case 0:case 11:case 15:_o(8,d,i)}var h=d.child;if(h!==null)h.return=d,se=h;else for(;se!==null;){d=se;var p=d.sibling,x=d.return;if(Sw(d),d===u){se=null;break}if(p!==null){p.return=x,se=p;break}se=x}}}var w=i.alternate;if(w!==null){var m=w.child;if(m!==null){w.child=null;do{var b=m.sibling;m.sibling=null,m=b}while(m!==null)}}se=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,se=a;else e:for(;se!==null;){if(i=se,i.flags&2048)switch(i.tag){case 0:case 11:case 15:_o(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,se=v;break e}se=i.return}}var g=e.current;for(se=g;se!==null;){a=se;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,se=y;else e:for(a=g;se!==null;){if(l=se,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Nu(9,l)}}catch(_){ct(l,l.return,_)}if(l===a){se=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,se=k;break e}se=l.return}}if(Ae=s,Ts(),mr&&typeof mr.onPostCommitFiberRoot=="function")try{mr.onPostCommitFiberRoot(wu,e)}catch{}r=!0}return r}finally{Fe=n,$n.transition=t}}return!1}function Tg(e,t,n){t=Ra(n,t),t=fw(e,t,1),e=vs(e,t,1),t=Kt(),e!==null&&(ul(e,1,t),un(e,t))}function ct(e,t,n){if(e.tag===3)Tg(e,e,n);else for(;t!==null;){if(t.tag===3){Tg(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ys===null||!ys.has(r))){e=Ra(n,e),e=pw(t,e,1),t=vs(t,e,1),e=Kt(),t!==null&&(ul(t,1,e),un(t,e));break}}t=t.return}}function E1(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Kt(),e.pingedLanes|=e.suspendedLanes&n,Et===e&&(Tt&n)===n&&(bt===4||bt===3&&(Tt&130023424)===Tt&&500>ht()-wp?ai(e,0):xp|=n),un(e,t)}function Iw(e,t){t===0&&(e.mode&1?(t=Ll,Ll<<=1,!(Ll&130023424)&&(Ll=4194304)):t=1);var n=Kt();e=$r(e,t),e!==null&&(ul(e,t,n),un(e,n))}function C1(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Iw(e,n)}function N1(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(t),Iw(e,n)}var Mw;Mw=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ln.current)on=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return on=!1,m1(e,t,n);on=!!(e.flags&131072)}else on=!1,Ze&&t.flags&1048576&&Fx(t,Vc,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;kc(e,t),e=t.pendingProps;var s=Ea(t,Ut.current);sa(t,n),s=fp(null,t,r,e,s,n);var i=pp();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,cn(r)?(i=!0,Bc(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,lp(t),s.updater=Cu,t.stateNode=s,s._reactInternals=t,Th(t,r,e,n),t=Ih(null,t,r,!0,i,n)):(t.tag=0,Ze&&i&&tp(t),Vt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(kc(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=R1(r),e=Hn(r,e),s){case 0:t=Oh(null,t,r,e,n);break e;case 1:t=bg(null,t,r,e,n);break e;case 11:t=xg(null,t,r,e,n);break e;case 14:t=wg(null,t,r,Hn(r.type,e),n);break e}throw Error(Y(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Hn(r,s),Oh(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Hn(r,s),bg(e,t,r,s,n);case 3:e:{if(yw(t),e===null)throw Error(Y(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Hx(e,t),qc(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Ra(Error(Y(423)),t),t=kg(e,t,r,n,s);break e}else if(r!==s){s=Ra(Error(Y(424)),t),t=kg(e,t,r,n,s);break e}else for(_n=gs(t.stateNode.containerInfo.firstChild),Sn=t,Ze=!0,Yn=null,n=Wx(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ca(),r===s){t=Dr(e,t,n);break e}Vt(e,t,r,n)}t=t.child}return t;case 5:return Kx(t),e===null&&Nh(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,_h(r,s)?a=null:i!==null&&_h(r,i)&&(t.flags|=32),vw(e,t),Vt(e,t,a,n),t.child;case 6:return e===null&&Nh(t),null;case 13:return xw(e,t,n);case 4:return cp(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Na(t,null,r,n):Vt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Hn(r,s),xg(e,t,r,s,n);case 7:return Vt(e,t,t.pendingProps,n),t.child;case 8:return Vt(e,t,t.pendingProps.children,n),t.child;case 12:return Vt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,qe(Hc,r._currentValue),r._currentValue=a,i!==null)if(er(i.value,a)){if(i.children===s.children&&!ln.current){t=Dr(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Ar(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Ph(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(Y(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Ph(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Vt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,sa(t,n),s=Ln(s),r=r(s),t.flags|=1,Vt(e,t,r,n),t.child;case 14:return r=t.type,s=Hn(r,t.pendingProps),s=Hn(r.type,s),wg(e,t,r,s,n);case 15:return mw(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Hn(r,s),kc(e,t),t.tag=1,cn(r)?(e=!0,Bc(t)):e=!1,sa(t,n),hw(t,r,s),Th(t,r,s,n),Ih(null,t,r,!0,e,n);case 19:return ww(e,t,n);case 22:return gw(e,t,n)}throw Error(Y(156,t.tag))};function $w(e,t){return cx(e,t)}function P1(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(e,t,n,r){return new P1(e,t,n,r)}function Sp(e){return e=e.prototype,!(!e||!e.isReactComponent)}function R1(e){if(typeof e=="function")return Sp(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Wf)return 11;if(e===Vf)return 14}return 2}function ws(e,t){var n=e.alternate;return n===null?(n=Mn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function jc(e,t,n,r,s,i){var a=2;if(r=e,typeof e=="function")Sp(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Bi:return oi(n.children,s,i,t);case Bf:a=8,s|=8;break;case th:return e=Mn(12,n,t,s|2),e.elementType=th,e.lanes=i,e;case nh:return e=Mn(13,n,t,s),e.elementType=nh,e.lanes=i,e;case rh:return e=Mn(19,n,t,s),e.elementType=rh,e.lanes=i,e;case Ky:return Ru(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Vy:a=10;break e;case Hy:a=9;break e;case Wf:a=11;break e;case Vf:a=14;break e;case Qr:a=16,r=null;break e}throw Error(Y(130,e==null?e:typeof e,""))}return t=Mn(a,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function oi(e,t,n,r){return e=Mn(7,e,r,t),e.lanes=n,e}function Ru(e,t,n,r){return e=Mn(22,e,r,t),e.elementType=Ky,e.lanes=n,e.stateNode={isHidden:!1},e}function kd(e,t,n){return e=Mn(6,e,null,t),e.lanes=n,e}function _d(e,t,n){return t=Mn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function T1(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rd(0),this.expirationTimes=rd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function jp(e,t,n,r,s,i,a,l,c){return e=new T1(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Mn(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},lp(i),e}function A1(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zi,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Dw(e){if(!e)return Ss;e=e._reactInternals;e:{if(yi(e)!==e||e.tag!==1)throw Error(Y(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(cn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Y(171))}if(e.tag===1){var n=e.type;if(cn(n))return Dx(e,n,t)}return t}function Lw(e,t,n,r,s,i,a,l,c){return e=jp(n,r,!0,e,s,i,a,l,c),e.context=Dw(null),n=e.current,r=Kt(),s=xs(n),i=Ar(r,s),i.callback=t??null,vs(n,i,s),e.current.lanes=s,ul(e,s,r),un(e,r),e}function Tu(e,t,n,r){var s=t.current,i=Kt(),a=xs(s);return n=Dw(n),t.context===null?t.context=n:t.pendingContext=n,t=Ar(i,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=vs(s,t,a),e!==null&&(Zn(e,s,a,i),xc(e,s,a)),a}function tu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ag(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ep(e,t){Ag(e,t),(e=e.alternate)&&Ag(e,t)}function O1(){return null}var Fw=typeof reportError=="function"?reportError:function(e){console.error(e)};function Cp(e){this._internalRoot=e}Au.prototype.render=Cp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Y(409));Tu(e,t,null,null)};Au.prototype.unmount=Cp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;fi(function(){Tu(null,e,null,null)}),t[Mr]=null}};function Au(e){this._internalRoot=e}Au.prototype.unstable_scheduleHydration=function(e){if(e){var t=gx();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Xr.length&&t!==0&&t<Xr[n].priority;n++);Xr.splice(n,0,e),n===0&&yx(e)}};function Np(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ou(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Og(){}function I1(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=tu(a);i.call(u)}}var a=Lw(t,r,e,0,null,!1,!1,"",Og);return e._reactRootContainer=a,e[Mr]=a.current,$o(e.nodeType===8?e.parentNode:e),fi(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=tu(c);l.call(u)}}var c=jp(e,0,!1,null,null,!1,!1,"",Og);return e._reactRootContainer=c,e[Mr]=c.current,$o(e.nodeType===8?e.parentNode:e),fi(function(){Tu(t,c,n,r)}),c}function Iu(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=tu(a);l.call(c)}}Tu(t,a,e,s)}else a=I1(n,t,e,s,r);return tu(a)}px=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=co(t.pendingLanes);n!==0&&(qf(t,n|1),un(t,ht()),!(Ae&6)&&(Ta=ht()+500,Ts()))}break;case 13:fi(function(){var r=$r(e,1);if(r!==null){var s=Kt();Zn(r,e,1,s)}}),Ep(e,1)}};Gf=function(e){if(e.tag===13){var t=$r(e,134217728);if(t!==null){var n=Kt();Zn(t,e,134217728,n)}Ep(e,134217728)}};mx=function(e){if(e.tag===13){var t=xs(e),n=$r(e,t);if(n!==null){var r=Kt();Zn(n,e,t,r)}Ep(e,t)}};gx=function(){return Fe};vx=function(e,t){var n=Fe;try{return Fe=e,t()}finally{Fe=n}};fh=function(e,t,n){switch(t){case"input":if(ah(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Su(r);if(!s)throw Error(Y(90));Gy(r),ah(r,s)}}}break;case"textarea":Jy(e,n);break;case"select":t=n.value,t!=null&&ea(e,!!n.multiple,t,!1)}};rx=bp;sx=fi;var M1={usingClientEntryPoint:!1,Events:[hl,Ki,Su,tx,nx,bp]},no={findFiberByHostInstance:Ks,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$1={bundleType:no.bundleType,version:no.version,rendererPackageName:no.rendererPackageName,rendererConfig:no.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ox(e),e===null?null:e.stateNode},findFiberByHostInstance:no.findFiberByHostInstance||O1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ql=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ql.isDisabled&&Ql.supportsFiber)try{wu=Ql.inject($1),mr=Ql}catch{}}Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M1;Cn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Np(t))throw Error(Y(200));return A1(e,t,null,n)};Cn.createRoot=function(e,t){if(!Np(e))throw Error(Y(299));var n=!1,r="",s=Fw;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=jp(e,1,!1,null,null,n,!1,r,s),e[Mr]=t.current,$o(e.nodeType===8?e.parentNode:e),new Cp(t)};Cn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Y(188)):(e=Object.keys(e).join(","),Error(Y(268,e)));return e=ox(t),e=e===null?null:e.stateNode,e};Cn.flushSync=function(e){return fi(e)};Cn.hydrate=function(e,t,n){if(!Ou(t))throw Error(Y(200));return Iu(null,e,t,!0,n)};Cn.hydrateRoot=function(e,t,n){if(!Np(e))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=Fw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Lw(t,null,e,1,n??null,s,!1,i,a),e[Mr]=t.current,$o(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Au(t)};Cn.render=function(e,t,n){if(!Ou(t))throw Error(Y(200));return Iu(null,e,t,!1,n)};Cn.unmountComponentAtNode=function(e){if(!Ou(e))throw Error(Y(40));return e._reactRootContainer?(fi(function(){Iu(null,null,e,!1,function(){e._reactRootContainer=null,e[Mr]=null})}),!0):!1};Cn.unstable_batchedUpdates=bp;Cn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ou(n))throw Error(Y(200));if(e==null||e._reactInternals===void 0)throw Error(Y(38));return Iu(e,t,n,!1,r)};Cn.version="18.3.1-next-f1338f8080-20240426";function Uw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Uw)}catch(e){console.error(e)}}Uw(),Uy.exports=Cn;var pl=Uy.exports;const D1=Ny(pl);var Ig=pl;Zd.createRoot=Ig.createRoot,Zd.hydrateRoot=Ig.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ho(){return Ho=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ho.apply(this,arguments)}var hs;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(hs||(hs={}));const Mg="popstate";function L1(e){e===void 0&&(e={});function t(r,s){let{pathname:i,search:a,hash:l}=r.location;return Kh("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:zw(s)}return U1(t,n,null,e)}function mt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Pp(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function F1(){return Math.random().toString(36).substr(2,8)}function $g(e,t){return{usr:e.state,key:e.key,idx:t}}function Kh(e,t,n,r){return n===void 0&&(n=null),Ho({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Da(t):t,{state:n,key:t&&t.key||r||F1()})}function zw(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Da(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function U1(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,l=hs.Pop,c=null,u=d();u==null&&(u=0,a.replaceState(Ho({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function h(){l=hs.Pop;let b=d(),v=b==null?null:b-u;u=b,c&&c({action:l,location:m.location,delta:v})}function p(b,v){l=hs.Push;let g=Kh(m.location,b,v);u=d()+1;let y=$g(g,u),k=m.createHref(g);try{a.pushState(y,"",k)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;s.location.assign(k)}i&&c&&c({action:l,location:m.location,delta:1})}function x(b,v){l=hs.Replace;let g=Kh(m.location,b,v);u=d();let y=$g(g,u),k=m.createHref(g);a.replaceState(y,"",k),i&&c&&c({action:l,location:m.location,delta:0})}function w(b){let v=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof b=="string"?b:zw(b);return g=g.replace(/ $/,"%20"),mt(v,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,v)}let m={get action(){return l},get location(){return e(s,a)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Mg,h),c=b,()=>{s.removeEventListener(Mg,h),c=null}},createHref(b){return t(s,b)},createURL:w,encodeLocation(b){let v=w(b);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:x,go(b){return a.go(b)}};return m}var Dg;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Dg||(Dg={}));function z1(e,t,n){return n===void 0&&(n="/"),B1(e,t,n)}function B1(e,t,n,r){let s=typeof t=="string"?Da(t):t,i=Vw(s.pathname||"/",n);if(i==null)return null;let a=Bw(e);W1(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=tj(i);l=X1(a[c],u)}return l}function Bw(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(mt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=li([r,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(mt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Bw(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:J1(u,i.index),routesMeta:d})};return e.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let c of Ww(i.path))s(i,a,c)}),t}function Ww(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=Ww(r.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function W1(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Y1(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const V1=/^:[\w-]+$/,H1=3,K1=2,q1=1,G1=10,Q1=-2,Lg=e=>e==="*";function J1(e,t){let n=e.split("/"),r=n.length;return n.some(Lg)&&(r+=Q1),t&&(r+=K1),n.filter(s=>!Lg(s)).reduce((s,i)=>s+(V1.test(i)?H1:i===""?q1:G1),r)}function Y1(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function X1(e,t,n){let{routesMeta:r}=e,s={},i="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=Z1({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),p=c.route;if(!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:li([i,h.pathname]),pathnameBase:aj(li([i,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(i=li([i,h.pathnameBase]))}return a}function Z1(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=ej(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:p,isOptional:x}=d;if(p==="*"){let m=l[h]||"";a=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}const w=l[h];return x&&!w?u[p]=void 0:u[p]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:e}}function ej(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Pp(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function tj(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Pp(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Vw(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const nj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rj=e=>nj.test(e);function sj(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Da(e):e,i;if(n)if(rj(n))i=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Pp(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?i=Fg(n.substring(1),"/"):i=Fg(n,t)}else i=t;return{pathname:i,search:oj(r),hash:lj(s)}}function Fg(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Sd(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ij(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Hw(e,t){let n=ij(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Kw(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=Da(e):(s=Ho({},e),mt(!s.pathname||!s.pathname.includes("?"),Sd("?","pathname","search",s)),mt(!s.pathname||!s.pathname.includes("#"),Sd("#","pathname","hash",s)),mt(!s.search||!s.search.includes("#"),Sd("#","search","hash",s)));let i=e===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=n;else{let h=t.length-1;if(!r&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),h-=1;s.pathname=p.join("/")}l=h>=0?t[h]:"/"}let c=sj(s,l),u=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const li=e=>e.join("/").replace(/\/\/+/g,"/"),aj=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),oj=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,lj=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function cj(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const qw=["post","put","patch","delete"];new Set(qw);const uj=["get",...qw];new Set(uj);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ko(){return Ko=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ko.apply(this,arguments)}const Rp=f.createContext(null),dj=f.createContext(null),ml=f.createContext(null),Mu=f.createContext(null),As=f.createContext({outlet:null,matches:[],isDataRoute:!1}),Gw=f.createContext(null);function gl(){return f.useContext(Mu)!=null}function La(){return gl()||mt(!1),f.useContext(Mu).location}function Qw(e){f.useContext(ml).static||f.useLayoutEffect(e)}function Fa(){let{isDataRoute:e}=f.useContext(As);return e?Ej():hj()}function hj(){gl()||mt(!1);let e=f.useContext(Rp),{basename:t,future:n,navigator:r}=f.useContext(ml),{matches:s}=f.useContext(As),{pathname:i}=La(),a=JSON.stringify(Hw(s,n.v7_relativeSplatPath)),l=f.useRef(!1);return Qw(()=>{l.current=!0}),f.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let h=Kw(u,JSON.parse(a),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:li([t,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[t,r,a,i,e])}const fj=f.createContext(null);function pj(e){let t=f.useContext(As).outlet;return t&&f.createElement(fj.Provider,{value:e},t)}function mj(e,t){return gj(e,t)}function gj(e,t,n,r){gl()||mt(!1);let{navigator:s}=f.useContext(ml),{matches:i}=f.useContext(As),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=La(),d;if(t){var h;let b=typeof t=="string"?Da(t):t;c==="/"||(h=b.pathname)!=null&&h.startsWith(c)||mt(!1),d=b}else d=u;let p=d.pathname||"/",x=p;if(c!=="/"){let b=c.replace(/^\//,"").split("/");x="/"+p.replace(/^\//,"").split("/").slice(b.length).join("/")}let w=z1(e,{pathname:x}),m=bj(w&&w.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:li([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:li([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,n,r);return t&&m?f.createElement(Mu.Provider,{value:{location:Ko({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:hs.Pop}},m):m}function vj(){let e=jj(),t=cj(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},t),n?f.createElement("pre",{style:s},n):null,null)}const yj=f.createElement(vj,null);class xj extends f.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?f.createElement(As.Provider,{value:this.props.routeContext},f.createElement(Gw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wj(e){let{routeContext:t,match:n,children:r}=e,s=f.useContext(Rp);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),f.createElement(As.Provider,{value:t},r)}function bj(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,l=(s=n)==null?void 0:s.errors;if(l!=null){let d=a.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||mt(!1),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:p,errors:x}=n,w=h.route.loader&&p[h.route.id]===void 0&&(!x||x[h.route.id]===void 0);if(h.route.lazy||w){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,h,p)=>{let x,w=!1,m=null,b=null;n&&(x=l&&h.route.id?l[h.route.id]:void 0,m=h.route.errorElement||yj,c&&(u<0&&p===0?(Cj("route-fallback"),w=!0,b=null):u===p&&(w=!0,b=h.route.hydrateFallbackElement||null)));let v=t.concat(a.slice(0,p+1)),g=()=>{let y;return x?y=m:w?y=b:h.route.Component?y=f.createElement(h.route.Component,null):h.route.element?y=h.route.element:y=d,f.createElement(wj,{match:h,routeContext:{outlet:d,matches:v,isDataRoute:n!=null},children:y})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?f.createElement(xj,{location:n.location,revalidation:n.revalidation,component:m,error:x,children:g(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):g()},null)}var Jw=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Jw||{}),Yw=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Yw||{});function kj(e){let t=f.useContext(Rp);return t||mt(!1),t}function _j(e){let t=f.useContext(dj);return t||mt(!1),t}function Sj(e){let t=f.useContext(As);return t||mt(!1),t}function Xw(e){let t=Sj(),n=t.matches[t.matches.length-1];return n.route.id||mt(!1),n.route.id}function jj(){var e;let t=f.useContext(Gw),n=_j(),r=Xw();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Ej(){let{router:e}=kj(Jw.UseNavigateStable),t=Xw(Yw.UseNavigateStable),n=f.useRef(!1);return Qw(()=>{n.current=!0}),f.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Ko({fromRouteId:t},i)))},[e,t])}const Ug={};function Cj(e,t,n){Ug[e]||(Ug[e]=!0)}function Nj(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function qh(e){let{to:t,replace:n,state:r,relative:s}=e;gl()||mt(!1);let{future:i,static:a}=f.useContext(ml),{matches:l}=f.useContext(As),{pathname:c}=La(),u=Fa(),d=Kw(t,Hw(l,i.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return f.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:s}),[u,h,s,n,r]),null}function Pj(e){return pj(e.context)}function vn(e){mt(!1)}function Rj(e){let{basename:t="/",children:n=null,location:r,navigationType:s=hs.Pop,navigator:i,static:a=!1,future:l}=e;gl()&&mt(!1);let c=t.replace(/^\/*/,"/"),u=f.useMemo(()=>({basename:c,navigator:i,static:a,future:Ko({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof r=="string"&&(r=Da(r));let{pathname:d="/",search:h="",hash:p="",state:x=null,key:w="default"}=r,m=f.useMemo(()=>{let b=Vw(d,c);return b==null?null:{location:{pathname:b,search:h,hash:p,state:x,key:w},navigationType:s}},[c,d,h,p,x,w,s]);return m==null?null:f.createElement(ml.Provider,{value:u},f.createElement(Mu.Provider,{children:n,value:m}))}function Tj(e){let{children:t,location:n}=e;return mj(Gh(t),n)}new Promise(()=>{});function Gh(e,t){t===void 0&&(t=[]);let n=[];return f.Children.forEach(e,(r,s)=>{if(!f.isValidElement(r))return;let i=[...t,s];if(r.type===f.Fragment){n.push.apply(n,Gh(r.props.children,i));return}r.type!==vn&&mt(!1),!r.props.index||!r.props.children||mt(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Gh(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Aj="6";try{window.__reactRouterVersion=Aj}catch{}const Oj="startTransition",zg=xu[Oj];function Ij(e){let{basename:t,children:n,future:r,window:s}=e,i=f.useRef();i.current==null&&(i.current=L1({window:s,v5Compat:!0}));let a=i.current,[l,c]=f.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},d=f.useCallback(h=>{u&&zg?zg(()=>c(h)):c(h)},[c,u]);return f.useLayoutEffect(()=>a.listen(d),[a,d]),f.useEffect(()=>Nj(r),[r]),f.createElement(Rj,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}var Bg;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Bg||(Bg={}));var Wg;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Wg||(Wg={}));var nu=["light","dark"],Tp="(prefers-color-scheme: dark)",Mj=typeof window>"u",Ap=f.createContext(void 0),$j={setTheme:e=>{},themes:[]},Dj=()=>{var e;return(e=f.useContext(Ap))!=null?e:$j},Lj=e=>f.useContext(Ap)?e.children:f.createElement(Uj,{...e}),Fj=["light","dark"],Uj=({forcedTheme:e,disableTransitionOnChange:t=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:i=Fj,defaultTheme:a=n?"system":"light",attribute:l="data-theme",value:c,children:u,nonce:d})=>{let[h,p]=f.useState(()=>Vg(s,a)),[x,w]=f.useState(()=>Vg(s)),m=c?Object.values(c):i,b=f.useCallback(k=>{let _=k;if(!_)return;k==="system"&&n&&(_=Hg());let j=c?c[_]:_,E=t?Bj():null,C=document.documentElement;if(l==="class"?(C.classList.remove(...m),j&&C.classList.add(j)):j?C.setAttribute(l,j):C.removeAttribute(l),r){let I=nu.includes(a)?a:null,P=nu.includes(_)?_:I;C.style.colorScheme=P}E==null||E()},[]),v=f.useCallback(k=>{let _=typeof k=="function"?k(k):k;p(_);try{localStorage.setItem(s,_)}catch{}},[e]),g=f.useCallback(k=>{let _=Hg(k);w(_),h==="system"&&n&&!e&&b("system")},[h,e]);f.useEffect(()=>{let k=window.matchMedia(Tp);return k.addListener(g),g(k),()=>k.removeListener(g)},[g]),f.useEffect(()=>{let k=_=>{if(_.key!==s)return;let j=_.newValue||a;v(j)};return window.addEventListener("storage",k),()=>window.removeEventListener("storage",k)},[v]),f.useEffect(()=>{b(e??h)},[e,h]);let y=f.useMemo(()=>({theme:h,setTheme:v,forcedTheme:e,resolvedTheme:h==="system"?x:h,themes:n?[...i,"system"]:i,systemTheme:n?x:void 0}),[h,v,e,x,n,i]);return f.createElement(Ap.Provider,{value:y},f.createElement(zj,{forcedTheme:e,disableTransitionOnChange:t,enableSystem:n,enableColorScheme:r,storageKey:s,themes:i,defaultTheme:a,attribute:l,value:c,children:u,attrs:m,nonce:d}),u)},zj=f.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:a,attrs:l,nonce:c})=>{let u=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(w=>`'${w}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?nu.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(w,m=!1,b=!0)=>{let v=a?a[w]:w,g=m?w+"|| ''":`'${v}'`,y="";return s&&b&&!m&&nu.includes(w)&&(y+=`d.style.colorScheme = '${w}';`),n==="class"?m||v?y+=`c.add(${g})`:y+="null":v&&(y+=`d[s](n,${g})`),y},x=e?`!function(){${d}${p(e)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${Tp}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${a?`var x=${JSON.stringify(a)};`:""}${p(a?"x[e]":"e",!0)}}${u?"":"else{"+p(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${a?`var x=${JSON.stringify(a)};`:""}${p(a?"x[e]":"e",!0)}}else{${p(i,!1,!1)};}${h}}catch(t){}}();`;return f.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:x}})}),Vg=(e,t)=>{if(Mj)return;let n;try{n=localStorage.getItem(e)||void 0}catch{}return n||t},Bj=()=>{let e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},Hg=e=>(e||(e=window.matchMedia(Tp)),e.matches?"dark":"light"),Ua=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Wj={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},ts,If,vy,Vj=(vy=class{constructor(){de(this,ts,Wj);de(this,If,!1)}setTimeoutProvider(e){ne(this,ts,e)}setTimeout(e,t){return T(this,ts).setTimeout(e,t)}clearTimeout(e){T(this,ts).clearTimeout(e)}setInterval(e,t){return T(this,ts).setInterval(e,t)}clearInterval(e){T(this,ts).clearInterval(e)}},ts=new WeakMap,If=new WeakMap,vy),Qs=new Vj;function Hj(e){setTimeout(e,0)}var pi=typeof window>"u"||"Deno"in globalThis;function Ht(){}function Kj(e,t){return typeof e=="function"?e(t):e}function Qh(e){return typeof e=="number"&&e>=0&&e!==1/0}function Zw(e,t){return Math.max(e+(t||0)-Date.now(),0)}function bs(e,t){return typeof e=="function"?e(t):e}function Tn(e,t){return typeof e=="function"?e(t):e}function Kg(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:a,stale:l}=e;if(a){if(r){if(t.queryHash!==Op(a,t.options))return!1}else if(!qo(t.queryKey,a))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function qg(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(mi(t.options.mutationKey)!==mi(i))return!1}else if(!qo(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function Op(e,t){return((t==null?void 0:t.queryKeyHashFn)||mi)(e)}function mi(e){return JSON.stringify(e,(t,n)=>Jh(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function qo(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>qo(e[n],t[n])):!1}var qj=Object.prototype.hasOwnProperty;function e0(e,t){if(e===t)return e;const n=Gg(e)&&Gg(t);if(!n&&!(Jh(e)&&Jh(t)))return t;const s=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),a=i.length,l=n?new Array(a):{};let c=0;for(let u=0;u<a;u++){const d=n?u:i[u],h=e[d],p=t[d];if(h===p){l[d]=h,(n?u<s:qj.call(e,d))&&c++;continue}if(h===null||p===null||typeof h!="object"||typeof p!="object"){l[d]=p;continue}const x=e0(h,p);l[d]=x,x===h&&c++}return s===a&&c===s?e:l}function ru(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function Gg(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Jh(e){if(!Qg(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Qg(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Qg(e){return Object.prototype.toString.call(e)==="[object Object]"}function Gj(e){return new Promise(t=>{Qs.setTimeout(t,e)})}function Yh(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?e0(e,t):t}function Qj(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function Jj(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Ip=Symbol();function t0(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Ip?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function n0(e,t){return typeof e=="function"?e(...t):!!e}var Ys,ns,fa,yy,Yj=(yy=class extends Ua{constructor(){super();de(this,Ys);de(this,ns);de(this,fa);ne(this,fa,t=>{if(!pi&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){T(this,ns)||this.setEventListener(T(this,fa))}onUnsubscribe(){var t;this.hasListeners()||((t=T(this,ns))==null||t.call(this),ne(this,ns,void 0))}setEventListener(t){var n;ne(this,fa,t),(n=T(this,ns))==null||n.call(this),ne(this,ns,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){T(this,Ys)!==t&&(ne(this,Ys,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof T(this,Ys)=="boolean"?T(this,Ys):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Ys=new WeakMap,ns=new WeakMap,fa=new WeakMap,yy),Mp=new Yj;function Xh(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}var Xj=Hj;function Zj(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=Xj;const i=l=>{t?e.push(l):s(()=>{n(l)})},a=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||a()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var wt=Zj(),pa,rs,ma,xy,eE=(xy=class extends Ua{constructor(){super();de(this,pa,!0);de(this,rs);de(this,ma);ne(this,ma,t=>{if(!pi&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){T(this,rs)||this.setEventListener(T(this,ma))}onUnsubscribe(){var t;this.hasListeners()||((t=T(this,rs))==null||t.call(this),ne(this,rs,void 0))}setEventListener(t){var n;ne(this,ma,t),(n=T(this,rs))==null||n.call(this),ne(this,rs,t(this.setOnline.bind(this)))}setOnline(t){T(this,pa)!==t&&(ne(this,pa,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return T(this,pa)}},pa=new WeakMap,rs=new WeakMap,ma=new WeakMap,xy),su=new eE;function tE(e){return Math.min(1e3*2**e,3e4)}function r0(e){return(e??"online")==="online"?su.isOnline():!0}var Zh=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function s0(e){let t=!1,n=0,r;const s=Xh(),i=()=>s.status!=="pending",a=m=>{var b;if(!i()){const v=new Zh(m);p(v),(b=e.onCancel)==null||b.call(e,v)}},l=()=>{t=!0},c=()=>{t=!1},u=()=>Mp.isFocused()&&(e.networkMode==="always"||su.isOnline())&&e.canRun(),d=()=>r0(e.networkMode)&&e.canRun(),h=m=>{i()||(r==null||r(),s.resolve(m))},p=m=>{i()||(r==null||r(),s.reject(m))},x=()=>new Promise(m=>{var b;r=v=>{(i()||u())&&m(v)},(b=e.onPause)==null||b.call(e)}).then(()=>{var m;r=void 0,i()||(m=e.onContinue)==null||m.call(e)}),w=()=>{if(i())return;let m;const b=n===0?e.initialPromise:void 0;try{m=b??e.fn()}catch(v){m=Promise.reject(v)}Promise.resolve(m).then(h).catch(v=>{var j;if(i())return;const g=e.retry??(pi?0:3),y=e.retryDelay??tE,k=typeof y=="function"?y(n,v):y,_=g===!0||typeof g=="number"&&n<g||typeof g=="function"&&g(n,v);if(t||!_){p(v);return}n++,(j=e.onFail)==null||j.call(e,n,v),Gj(k).then(()=>u()?void 0:x()).then(()=>{t?p(v):w()})})};return{promise:s,status:()=>s.status,cancel:a,continue:()=>(r==null||r(),s),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?w():x().then(w),s)}}var Xs,wy,i0=(wy=class{constructor(){de(this,Xs)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Qh(this.gcTime)&&ne(this,Xs,Qs.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(pi?1/0:5*60*1e3))}clearGcTimeout(){T(this,Xs)&&(Qs.clearTimeout(T(this,Xs)),ne(this,Xs,void 0))}},Xs=new WeakMap,wy),Zs,ga,Rn,ei,St,sl,ti,qn,kr,by,nE=(by=class extends i0{constructor(t){super();de(this,qn);de(this,Zs);de(this,ga);de(this,Rn);de(this,ei);de(this,St);de(this,sl);de(this,ti);ne(this,ti,!1),ne(this,sl,t.defaultOptions),this.setOptions(t.options),this.observers=[],ne(this,ei,t.client),ne(this,Rn,T(this,ei).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ne(this,Zs,Yg(this.options)),this.state=t.state??T(this,Zs),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=T(this,St))==null?void 0:t.promise}setOptions(t){if(this.options={...T(this,sl),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=Yg(this.options);n.data!==void 0&&(this.setState(Jg(n.data,n.dataUpdatedAt)),ne(this,Zs,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&T(this,Rn).remove(this)}setData(t,n){const r=Yh(this.state.data,t,this.options);return Se(this,qn,kr).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){Se(this,qn,kr).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=T(this,St))==null?void 0:r.promise;return(s=T(this,St))==null||s.cancel(t),n?n.then(Ht).catch(Ht):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(T(this,Zs))}isActive(){return this.observers.some(t=>Tn(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ip||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>bs(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Zw(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=T(this,St))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=T(this,St))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),T(this,Rn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(T(this,St)&&(T(this,ti)?T(this,St).cancel({revert:!0}):T(this,St).cancelRetry()),this.scheduleGc()),T(this,Rn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Se(this,qn,kr).call(this,{type:"invalidate"})}async fetch(t,n){var c,u,d,h,p,x,w,m,b,v,g,y;if(this.state.fetchStatus!=="idle"&&((c=T(this,St))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(T(this,St))return T(this,St).continueRetry(),T(this,St).promise}if(t&&this.setOptions(t),!this.options.queryFn){const k=this.observers.find(_=>_.options.queryFn);k&&this.setOptions(k.options)}const r=new AbortController,s=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(ne(this,ti,!0),r.signal)})},i=()=>{const k=t0(this.options,n),j=(()=>{const E={client:T(this,ei),queryKey:this.queryKey,meta:this.meta};return s(E),E})();return ne(this,ti,!1),this.options.persister?this.options.persister(k,j,this):k(j)},l=(()=>{const k={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:T(this,ei),state:this.state,fetchFn:i};return s(k),k})();(u=this.options.behavior)==null||u.onFetch(l,this),ne(this,ga,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&Se(this,qn,kr).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta}),ne(this,St,s0({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:k=>{k instanceof Zh&&k.revert&&this.setState({...T(this,ga),fetchStatus:"idle"}),r.abort()},onFail:(k,_)=>{Se(this,qn,kr).call(this,{type:"failed",failureCount:k,error:_})},onPause:()=>{Se(this,qn,kr).call(this,{type:"pause"})},onContinue:()=>{Se(this,qn,kr).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const k=await T(this,St).start();if(k===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(k),(x=(p=T(this,Rn).config).onSuccess)==null||x.call(p,k,this),(m=(w=T(this,Rn).config).onSettled)==null||m.call(w,k,this.state.error,this),k}catch(k){if(k instanceof Zh){if(k.silent)return T(this,St).promise;if(k.revert){if(this.state.data===void 0)throw k;return this.state.data}}throw Se(this,qn,kr).call(this,{type:"error",error:k}),(v=(b=T(this,Rn).config).onError)==null||v.call(b,k,this),(y=(g=T(this,Rn).config).onSettled)==null||y.call(g,this.state.data,k,this),k}finally{this.scheduleGc()}}},Zs=new WeakMap,ga=new WeakMap,Rn=new WeakMap,ei=new WeakMap,St=new WeakMap,sl=new WeakMap,ti=new WeakMap,qn=new WeakSet,kr=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...a0(r.data,this.options),fetchMeta:t.meta??null};case"success":const s={...r,...Jg(t.data,t.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ne(this,ga,t.manual?s:void 0),s;case"error":const i=t.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),wt.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),T(this,Rn).notify({query:this,type:"updated",action:t})})},by);function a0(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:r0(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Jg(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Yg(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var rn,Ne,il,Bt,ni,va,Er,ss,al,ya,xa,ri,si,is,wa,De,ho,ef,tf,nf,rf,sf,af,of,o0,ky,rE=(ky=class extends Ua{constructor(t,n){super();de(this,De);de(this,rn);de(this,Ne);de(this,il);de(this,Bt);de(this,ni);de(this,va);de(this,Er);de(this,ss);de(this,al);de(this,ya);de(this,xa);de(this,ri);de(this,si);de(this,is);de(this,wa,new Set);this.options=n,ne(this,rn,t),ne(this,ss,null),ne(this,Er,Xh()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(T(this,Ne).addObserver(this),Xg(T(this,Ne),this.options)?Se(this,De,ho).call(this):this.updateResult(),Se(this,De,rf).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return lf(T(this,Ne),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return lf(T(this,Ne),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Se(this,De,sf).call(this),Se(this,De,af).call(this),T(this,Ne).removeObserver(this)}setOptions(t){const n=this.options,r=T(this,Ne);if(this.options=T(this,rn).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Tn(this.options.enabled,T(this,Ne))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Se(this,De,of).call(this),T(this,Ne).setOptions(this.options),n._defaulted&&!ru(this.options,n)&&T(this,rn).getQueryCache().notify({type:"observerOptionsUpdated",query:T(this,Ne),observer:this});const s=this.hasListeners();s&&Zg(T(this,Ne),r,this.options,n)&&Se(this,De,ho).call(this),this.updateResult(),s&&(T(this,Ne)!==r||Tn(this.options.enabled,T(this,Ne))!==Tn(n.enabled,T(this,Ne))||bs(this.options.staleTime,T(this,Ne))!==bs(n.staleTime,T(this,Ne)))&&Se(this,De,ef).call(this);const i=Se(this,De,tf).call(this);s&&(T(this,Ne)!==r||Tn(this.options.enabled,T(this,Ne))!==Tn(n.enabled,T(this,Ne))||i!==T(this,is))&&Se(this,De,nf).call(this,i)}getOptimisticResult(t){const n=T(this,rn).getQueryCache().build(T(this,rn),t),r=this.createResult(n,t);return iE(this,r)&&(ne(this,Bt,r),ne(this,va,this.options),ne(this,ni,T(this,Ne).state)),r}getCurrentResult(){return T(this,Bt)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&T(this,Er).status==="pending"&&T(this,Er).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(t){T(this,wa).add(t)}getCurrentQuery(){return T(this,Ne)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=T(this,rn).defaultQueryOptions(t),r=T(this,rn).getQueryCache().build(T(this,rn),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return Se(this,De,ho).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),T(this,Bt)))}createResult(t,n){var I;const r=T(this,Ne),s=this.options,i=T(this,Bt),a=T(this,ni),l=T(this,va),u=t!==r?t.state:T(this,il),{state:d}=t;let h={...d},p=!1,x;if(n._optimisticResults){const P=this.hasListeners(),z=!P&&Xg(t,n),O=P&&Zg(t,r,n,s);(z||O)&&(h={...h,...a0(d.data,t.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:w,errorUpdatedAt:m,status:b}=h;x=h.data;let v=!1;if(n.placeholderData!==void 0&&x===void 0&&b==="pending"){let P;i!=null&&i.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(P=i.data,v=!0):P=typeof n.placeholderData=="function"?n.placeholderData((I=T(this,xa))==null?void 0:I.state.data,T(this,xa)):n.placeholderData,P!==void 0&&(b="success",x=Yh(i==null?void 0:i.data,P,n),p=!0)}if(n.select&&x!==void 0&&!v)if(i&&x===(a==null?void 0:a.data)&&n.select===T(this,al))x=T(this,ya);else try{ne(this,al,n.select),x=n.select(x),x=Yh(i==null?void 0:i.data,x,n),ne(this,ya,x),ne(this,ss,null)}catch(P){ne(this,ss,P)}T(this,ss)&&(w=T(this,ss),x=T(this,ya),m=Date.now(),b="error");const g=h.fetchStatus==="fetching",y=b==="pending",k=b==="error",_=y&&g,j=x!==void 0,C={status:b,fetchStatus:h.fetchStatus,isPending:y,isSuccess:b==="success",isError:k,isInitialLoading:_,isLoading:_,data:x,dataUpdatedAt:h.dataUpdatedAt,error:w,errorUpdatedAt:m,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:g,isRefetching:g&&!y,isLoadingError:k&&!j,isPaused:h.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:k&&j,isStale:$p(t,n),refetch:this.refetch,promise:T(this,Er),isEnabled:Tn(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const P=D=>{C.status==="error"?D.reject(C.error):C.data!==void 0&&D.resolve(C.data)},z=()=>{const D=ne(this,Er,C.promise=Xh());P(D)},O=T(this,Er);switch(O.status){case"pending":t.queryHash===r.queryHash&&P(O);break;case"fulfilled":(C.status==="error"||C.data!==O.value)&&z();break;case"rejected":(C.status!=="error"||C.error!==O.reason)&&z();break}}return C}updateResult(){const t=T(this,Bt),n=this.createResult(T(this,Ne),this.options);if(ne(this,ni,T(this,Ne).state),ne(this,va,this.options),T(this,ni).data!==void 0&&ne(this,xa,T(this,Ne)),ru(n,t))return;ne(this,Bt,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!T(this,wa).size)return!0;const a=new Set(i??T(this,wa));return this.options.throwOnError&&a.add("error"),Object.keys(T(this,Bt)).some(l=>{const c=l;return T(this,Bt)[c]!==t[c]&&a.has(c)})};Se(this,De,o0).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Se(this,De,rf).call(this)}},rn=new WeakMap,Ne=new WeakMap,il=new WeakMap,Bt=new WeakMap,ni=new WeakMap,va=new WeakMap,Er=new WeakMap,ss=new WeakMap,al=new WeakMap,ya=new WeakMap,xa=new WeakMap,ri=new WeakMap,si=new WeakMap,is=new WeakMap,wa=new WeakMap,De=new WeakSet,ho=function(t){Se(this,De,of).call(this);let n=T(this,Ne).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(Ht)),n},ef=function(){Se(this,De,sf).call(this);const t=bs(this.options.staleTime,T(this,Ne));if(pi||T(this,Bt).isStale||!Qh(t))return;const r=Zw(T(this,Bt).dataUpdatedAt,t)+1;ne(this,ri,Qs.setTimeout(()=>{T(this,Bt).isStale||this.updateResult()},r))},tf=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(T(this,Ne)):this.options.refetchInterval)??!1},nf=function(t){Se(this,De,af).call(this),ne(this,is,t),!(pi||Tn(this.options.enabled,T(this,Ne))===!1||!Qh(T(this,is))||T(this,is)===0)&&ne(this,si,Qs.setInterval(()=>{(this.options.refetchIntervalInBackground||Mp.isFocused())&&Se(this,De,ho).call(this)},T(this,is)))},rf=function(){Se(this,De,ef).call(this),Se(this,De,nf).call(this,Se(this,De,tf).call(this))},sf=function(){T(this,ri)&&(Qs.clearTimeout(T(this,ri)),ne(this,ri,void 0))},af=function(){T(this,si)&&(Qs.clearInterval(T(this,si)),ne(this,si,void 0))},of=function(){const t=T(this,rn).getQueryCache().build(T(this,rn),this.options);if(t===T(this,Ne))return;const n=T(this,Ne);ne(this,Ne,t),ne(this,il,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},o0=function(t){wt.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(T(this,Bt))}),T(this,rn).getQueryCache().notify({query:T(this,Ne),type:"observerResultsUpdated"})})},ky);function sE(e,t){return Tn(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Xg(e,t){return sE(e,t)||e.state.data!==void 0&&lf(e,t,t.refetchOnMount)}function lf(e,t,n){if(Tn(t.enabled,e)!==!1&&bs(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&$p(e,t)}return!1}function Zg(e,t,n,r){return(e!==t||Tn(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&$p(e,n)}function $p(e,t){return Tn(t.enabled,e)!==!1&&e.isStaleByTime(bs(t.staleTime,e))}function iE(e,t){return!ru(e.getCurrentResult(),t)}function ev(e){return{onFetch:(t,n)=>{var d,h,p,x,w;const r=t.options,s=(p=(h=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:p.direction,i=((x=t.state.data)==null?void 0:x.pages)||[],a=((w=t.state.data)==null?void 0:w.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let m=!1;const b=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(t.signal.aborted?m=!0:t.signal.addEventListener("abort",()=>{m=!0}),t.signal)})},v=t0(t.options,t.fetchOptions),g=async(y,k,_)=>{if(m)return Promise.reject();if(k==null&&y.pages.length)return Promise.resolve(y);const E=(()=>{const z={client:t.client,queryKey:t.queryKey,pageParam:k,direction:_?"backward":"forward",meta:t.options.meta};return b(z),z})(),C=await v(E),{maxPages:I}=t.options,P=_?Jj:Qj;return{pages:P(y.pages,C,I),pageParams:P(y.pageParams,k,I)}};if(s&&i.length){const y=s==="backward",k=y?aE:tv,_={pages:i,pageParams:a},j=k(r,_);l=await g(_,j,y)}else{const y=e??i.length;do{const k=c===0?a[0]??r.initialPageParam:tv(r,l);if(c>0&&k==null)break;l=await g(l,k),c++}while(c<y)}return l};t.options.persister?t.fetchFn=()=>{var m,b;return(b=(m=t.options).persister)==null?void 0:b.call(m,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function tv(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function aE(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var ol,lr,Wt,ii,cr,qr,_y,oE=(_y=class extends i0{constructor(t){super();de(this,cr);de(this,ol);de(this,lr);de(this,Wt);de(this,ii);ne(this,ol,t.client),this.mutationId=t.mutationId,ne(this,Wt,t.mutationCache),ne(this,lr,[]),this.state=t.state||l0(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){T(this,lr).includes(t)||(T(this,lr).push(t),this.clearGcTimeout(),T(this,Wt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ne(this,lr,T(this,lr).filter(n=>n!==t)),this.scheduleGc(),T(this,Wt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){T(this,lr).length||(this.state.status==="pending"?this.scheduleGc():T(this,Wt).remove(this))}continue(){var t;return((t=T(this,ii))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,l,c,u,d,h,p,x,w,m,b,v,g,y,k,_,j,E,C,I;const n=()=>{Se(this,cr,qr).call(this,{type:"continue"})},r={client:T(this,ol),meta:this.options.meta,mutationKey:this.options.mutationKey};ne(this,ii,s0({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(P,z)=>{Se(this,cr,qr).call(this,{type:"failed",failureCount:P,error:z})},onPause:()=>{Se(this,cr,qr).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>T(this,Wt).canRun(this)}));const s=this.state.status==="pending",i=!T(this,ii).canStart();try{if(s)n();else{Se(this,cr,qr).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(a=T(this,Wt).config).onMutate)==null?void 0:l.call(a,t,this,r));const z=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,t,r));z!==this.state.context&&Se(this,cr,qr).call(this,{type:"pending",context:z,variables:t,isPaused:i})}const P=await T(this,ii).start();return await((h=(d=T(this,Wt).config).onSuccess)==null?void 0:h.call(d,P,t,this.state.context,this,r)),await((x=(p=this.options).onSuccess)==null?void 0:x.call(p,P,t,this.state.context,r)),await((m=(w=T(this,Wt).config).onSettled)==null?void 0:m.call(w,P,null,this.state.variables,this.state.context,this,r)),await((v=(b=this.options).onSettled)==null?void 0:v.call(b,P,null,t,this.state.context,r)),Se(this,cr,qr).call(this,{type:"success",data:P}),P}catch(P){try{throw await((y=(g=T(this,Wt).config).onError)==null?void 0:y.call(g,P,t,this.state.context,this,r)),await((_=(k=this.options).onError)==null?void 0:_.call(k,P,t,this.state.context,r)),await((E=(j=T(this,Wt).config).onSettled)==null?void 0:E.call(j,void 0,P,this.state.variables,this.state.context,this,r)),await((I=(C=this.options).onSettled)==null?void 0:I.call(C,void 0,P,t,this.state.context,r)),P}finally{Se(this,cr,qr).call(this,{type:"error",error:P})}}finally{T(this,Wt).runNext(this)}}},ol=new WeakMap,lr=new WeakMap,Wt=new WeakMap,ii=new WeakMap,cr=new WeakSet,qr=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),wt.batch(()=>{T(this,lr).forEach(r=>{r.onMutationUpdate(t)}),T(this,Wt).notify({mutation:this,type:"updated",action:t})})},_y);function l0(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Cr,Gn,ll,Sy,lE=(Sy=class extends Ua{constructor(t={}){super();de(this,Cr);de(this,Gn);de(this,ll);this.config=t,ne(this,Cr,new Set),ne(this,Gn,new Map),ne(this,ll,0)}build(t,n,r){const s=new oE({client:t,mutationCache:this,mutationId:++Al(this,ll)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){T(this,Cr).add(t);const n=Jl(t);if(typeof n=="string"){const r=T(this,Gn).get(n);r?r.push(t):T(this,Gn).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(T(this,Cr).delete(t)){const n=Jl(t);if(typeof n=="string"){const r=T(this,Gn).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&T(this,Gn).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Jl(t);if(typeof n=="string"){const r=T(this,Gn).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=Jl(t);if(typeof n=="string"){const s=(r=T(this,Gn).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){wt.batch(()=>{T(this,Cr).forEach(t=>{this.notify({type:"removed",mutation:t})}),T(this,Cr).clear(),T(this,Gn).clear()})}getAll(){return Array.from(T(this,Cr))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>qg(n,r))}findAll(t={}){return this.getAll().filter(n=>qg(t,n))}notify(t){wt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return wt.batch(()=>Promise.all(t.map(n=>n.continue().catch(Ht))))}},Cr=new WeakMap,Gn=new WeakMap,ll=new WeakMap,Sy);function Jl(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Nr,as,sn,Pr,Or,Ec,cf,jy,cE=(jy=class extends Ua{constructor(n,r){super();de(this,Or);de(this,Nr);de(this,as);de(this,sn);de(this,Pr);ne(this,Nr,n),this.setOptions(r),this.bindMethods(),Se(this,Or,Ec).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=T(this,Nr).defaultMutationOptions(n),ru(this.options,r)||T(this,Nr).getMutationCache().notify({type:"observerOptionsUpdated",mutation:T(this,sn),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&mi(r.mutationKey)!==mi(this.options.mutationKey)?this.reset():((s=T(this,sn))==null?void 0:s.state.status)==="pending"&&T(this,sn).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=T(this,sn))==null||n.removeObserver(this)}onMutationUpdate(n){Se(this,Or,Ec).call(this),Se(this,Or,cf).call(this,n)}getCurrentResult(){return T(this,as)}reset(){var n;(n=T(this,sn))==null||n.removeObserver(this),ne(this,sn,void 0),Se(this,Or,Ec).call(this),Se(this,Or,cf).call(this)}mutate(n,r){var s;return ne(this,Pr,r),(s=T(this,sn))==null||s.removeObserver(this),ne(this,sn,T(this,Nr).getMutationCache().build(T(this,Nr),this.options)),T(this,sn).addObserver(this),T(this,sn).execute(n)}},Nr=new WeakMap,as=new WeakMap,sn=new WeakMap,Pr=new WeakMap,Or=new WeakSet,Ec=function(){var r;const n=((r=T(this,sn))==null?void 0:r.state)??l0();ne(this,as,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},cf=function(n){wt.batch(()=>{var r,s,i,a,l,c,u,d;if(T(this,Pr)&&this.hasListeners()){const h=T(this,as).variables,p=T(this,as).context,x={client:T(this,Nr),meta:this.options.meta,mutationKey:this.options.mutationKey};(n==null?void 0:n.type)==="success"?((s=(r=T(this,Pr)).onSuccess)==null||s.call(r,n.data,h,p,x),(a=(i=T(this,Pr)).onSettled)==null||a.call(i,n.data,null,h,p,x)):(n==null?void 0:n.type)==="error"&&((c=(l=T(this,Pr)).onError)==null||c.call(l,n.error,h,p,x),(d=(u=T(this,Pr)).onSettled)==null||d.call(u,void 0,n.error,h,p,x))}this.listeners.forEach(h=>{h(T(this,as))})})},jy),ur,Ey,uE=(Ey=class extends Ua{constructor(t={}){super();de(this,ur);this.config=t,ne(this,ur,new Map)}build(t,n,r){const s=n.queryKey,i=n.queryHash??Op(s,n);let a=this.get(i);return a||(a=new nE({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(a)),a}add(t){T(this,ur).has(t.queryHash)||(T(this,ur).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=T(this,ur).get(t.queryHash);n&&(t.destroy(),n===t&&T(this,ur).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){wt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return T(this,ur).get(t)}getAll(){return[...T(this,ur).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Kg(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>Kg(t,r)):n}notify(t){wt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){wt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){wt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ur=new WeakMap,Ey),ot,os,ls,ba,ka,cs,_a,Sa,Cy,dE=(Cy=class{constructor(e={}){de(this,ot);de(this,os);de(this,ls);de(this,ba);de(this,ka);de(this,cs);de(this,_a);de(this,Sa);ne(this,ot,e.queryCache||new uE),ne(this,os,e.mutationCache||new lE),ne(this,ls,e.defaultOptions||{}),ne(this,ba,new Map),ne(this,ka,new Map),ne(this,cs,0)}mount(){Al(this,cs)._++,T(this,cs)===1&&(ne(this,_a,Mp.subscribe(async e=>{e&&(await this.resumePausedMutations(),T(this,ot).onFocus())})),ne(this,Sa,su.subscribe(async e=>{e&&(await this.resumePausedMutations(),T(this,ot).onOnline())})))}unmount(){var e,t;Al(this,cs)._--,T(this,cs)===0&&((e=T(this,_a))==null||e.call(this),ne(this,_a,void 0),(t=T(this,Sa))==null||t.call(this),ne(this,Sa,void 0))}isFetching(e){return T(this,ot).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return T(this,os).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=T(this,ot).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=T(this,ot).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(bs(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return T(this,ot).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=T(this,ot).get(r.queryHash),i=s==null?void 0:s.state.data,a=Kj(t,i);if(a!==void 0)return T(this,ot).build(this,r).setData(a,{...n,manual:!0})}setQueriesData(e,t,n){return wt.batch(()=>T(this,ot).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=T(this,ot).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=T(this,ot);wt.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=T(this,ot);return wt.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=wt.batch(()=>T(this,ot).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(Ht).catch(Ht)}invalidateQueries(e,t={}){return wt.batch(()=>(T(this,ot).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=wt.batch(()=>T(this,ot).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Ht)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Ht)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=T(this,ot).build(this,t);return n.isStaleByTime(bs(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ht).catch(Ht)}fetchInfiniteQuery(e){return e.behavior=ev(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ht).catch(Ht)}ensureInfiniteQueryData(e){return e.behavior=ev(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return su.isOnline()?T(this,os).resumePausedMutations():Promise.resolve()}getQueryCache(){return T(this,ot)}getMutationCache(){return T(this,os)}getDefaultOptions(){return T(this,ls)}setDefaultOptions(e){ne(this,ls,e)}setQueryDefaults(e,t){T(this,ba).set(mi(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...T(this,ba).values()],n={};return t.forEach(r=>{qo(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){T(this,ka).set(mi(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...T(this,ka).values()],n={};return t.forEach(r=>{qo(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...T(this,ls).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Op(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Ip&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...T(this,ls).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){T(this,ot).clear(),T(this,os).clear()}},ot=new WeakMap,os=new WeakMap,ls=new WeakMap,ba=new WeakMap,ka=new WeakMap,cs=new WeakMap,_a=new WeakMap,Sa=new WeakMap,Cy),c0=f.createContext(void 0),Br=e=>{const t=f.useContext(c0);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},hE=({client:e,children:t})=>(f.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),o.jsx(c0.Provider,{value:e,children:t})),u0=f.createContext(!1),fE=()=>f.useContext(u0);u0.Provider;function pE(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var mE=f.createContext(pE()),gE=()=>f.useContext(mE),vE=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},yE=e=>{f.useEffect(()=>{e.clearReset()},[e])},xE=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||n0(n,[e.error,r])),wE=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},bE=(e,t)=>e.isLoading&&e.isFetching&&!t,kE=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,nv=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function _E(e,t,n){var h,p,x,w,m;const r=fE(),s=gE(),i=Br(),a=i.defaultQueryOptions(e);(p=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||p.call(h,a),a._optimisticResults=r?"isRestoring":"optimistic",wE(a),vE(a,s),yE(s);const l=!i.getQueryCache().get(a.queryHash),[c]=f.useState(()=>new t(i,a)),u=c.getOptimisticResult(a),d=!r&&e.subscribed!==!1;if(f.useSyncExternalStore(f.useCallback(b=>{const v=d?c.subscribe(wt.batchCalls(b)):Ht;return c.updateResult(),v},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),f.useEffect(()=>{c.setOptions(a)},[a,c]),kE(a,u))throw nv(a,c,s);if(xE({result:u,errorResetBoundary:s,throwOnError:a.throwOnError,query:i.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw u.error;if((w=(x=i.getDefaultOptions().queries)==null?void 0:x._experimental_afterQuery)==null||w.call(x,a,u),a.experimental_prefetchInRender&&!pi&&bE(u,r)){const b=l?nv(a,c,s):(m=i.getQueryCache().get(a.queryHash))==null?void 0:m.promise;b==null||b.catch(Ht).finally(()=>{c.updateResult()})}return a.notifyOnChangeProps?u:c.trackResult(u)}function In(e,t){return _E(e,rE)}function SE(e,t){const n=Br(),[r]=f.useState(()=>new cE(n,e));f.useEffect(()=>{r.setOptions(e)},[r,e]);const s=f.useSyncExternalStore(f.useCallback(a=>r.subscribe(wt.batchCalls(a)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=f.useCallback((a,l)=>{r.mutate(a,l).catch(Ht)},[r]);if(s.error&&n0(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jE=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),d0=(...e)=>e.filter((t,n,r)=>!!t&&r.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var EE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=f.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...l},c)=>f.createElement("svg",{ref:c,...EE,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:d0("lucide",s),...l},[...a.map(([u,d])=>f.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=(e,t)=>{const n=f.forwardRef(({className:r,...s},i)=>f.createElement(CE,{ref:i,iconNode:t,className:d0(`lucide-${jE(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NE=Be("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PE=Be("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=Be("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=Be("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0=Be("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=Be("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=Be("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RE=Be("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dp=Be("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0=Be("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TE=Be("Grid2x2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AE=Be("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OE=Be("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=Be("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IE=Be("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ME=Be("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $E=Be("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=Be("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vl=Be("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LE=Be("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FE=Be("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0=Be("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UE=Be("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zE=Be("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=Be("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BE=Be("UserRoundCheck",[["path",{d:"M2 21a8 8 0 0 1 13.292-6",key:"bjp14o"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WE=Be("UserRoundX",[["path",{d:"M2 21a8 8 0 0 1 11.873-7",key:"74fkxq"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"m17 17 5 5",key:"p7ous7"}],["path",{d:"m22 17-5 5",key:"gqnmv0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lp=Be("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function m0(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=m0(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function g0(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=m0(e))&&(r&&(r+=" "),r+=t);return r}const Fp="-",VE=e=>{const t=KE(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:a=>{const l=a.split(Fp);return l[0]===""&&l.length!==1&&l.shift(),v0(l,t)||HE(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&r[a]?[...c,...r[a]]:c}}},v0=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?v0(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const i=e.join(Fp);return(a=t.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},rv=/^\[(.+)\]$/,HE=e=>{if(rv.test(e)){const t=rv.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},KE=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return GE(Object.entries(e.classGroups),n).forEach(([i,a])=>{uf(a,r,i,t)}),r},uf=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const i=s===""?t:sv(t,s);i.classGroupId=n;return}if(typeof s=="function"){if(qE(s)){uf(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,a])=>{uf(a,sv(t,i),n,r)})})},sv=(e,t)=>{let n=e;return t.split(Fp).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},qE=e=>e.isThemeGetter,GE=(e,t)=>t?e.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[t+a,l])):i);return[n,s]}):e,QE=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(i,a)=>{n.set(i,a),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return s(i,a),a},set(i,a){n.has(i)?n.set(i,a):s(i,a)}}},y0="!",JE=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,s=t[0],i=t.length,a=l=>{const c=[];let u=0,d=0,h;for(let b=0;b<l.length;b++){let v=l[b];if(u===0){if(v===s&&(r||l.slice(b,b+i)===t)){c.push(l.slice(d,b)),d=b+i;continue}if(v==="/"){h=b;continue}}v==="["?u++:v==="]"&&u--}const p=c.length===0?l:l.substring(d),x=p.startsWith(y0),w=x?p.substring(1):p,m=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:x,baseClassName:w,maybePostfixModifierPosition:m}};return n?l=>n({className:l,parseClassName:a}):a},YE=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},XE=e=>({cache:QE(e.cacheSize),parseClassName:JE(e),...VE(e)}),ZE=/\s+/,eC=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,i=[],a=e.trim().split(ZE);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:d,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:x}=n(u);let w=!!x,m=r(w?p.substring(0,x):p);if(!m){if(!w){l=u+(l.length>0?" "+l:l);continue}if(m=r(p),!m){l=u+(l.length>0?" "+l:l);continue}w=!1}const b=YE(d).join(":"),v=h?b+y0:b,g=v+m;if(i.includes(g))continue;i.push(g);const y=s(m,w);for(let k=0;k<y.length;++k){const _=y[k];i.push(v+_)}l=u+(l.length>0?" "+l:l)}return l};function tC(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=x0(t))&&(r&&(r+=" "),r+=n);return r}const x0=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=x0(e[r]))&&(n&&(n+=" "),n+=t);return n};function nC(e,...t){let n,r,s,i=a;function a(c){const u=t.reduce((d,h)=>h(d),e());return n=XE(u),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const u=r(c);if(u)return u;const d=eC(c,n);return s(c,d),d}return function(){return i(tC.apply(null,arguments))}}const Qe=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},w0=/^\[(?:([a-z-]+):)?(.+)\]$/i,rC=/^\d+\/\d+$/,sC=new Set(["px","full","screen"]),iC=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,aC=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,oC=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,lC=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,cC=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,br=e=>oa(e)||sC.has(e)||rC.test(e),Hr=e=>za(e,"length",vC),oa=e=>!!e&&!Number.isNaN(Number(e)),Ed=e=>za(e,"number",oa),ro=e=>!!e&&Number.isInteger(Number(e)),uC=e=>e.endsWith("%")&&oa(e.slice(0,-1)),_e=e=>w0.test(e),Kr=e=>iC.test(e),dC=new Set(["length","size","percentage"]),hC=e=>za(e,dC,b0),fC=e=>za(e,"position",b0),pC=new Set(["image","url"]),mC=e=>za(e,pC,xC),gC=e=>za(e,"",yC),so=()=>!0,za=(e,t,n)=>{const r=w0.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},vC=e=>aC.test(e)&&!oC.test(e),b0=()=>!1,yC=e=>lC.test(e),xC=e=>cC.test(e),wC=()=>{const e=Qe("colors"),t=Qe("spacing"),n=Qe("blur"),r=Qe("brightness"),s=Qe("borderColor"),i=Qe("borderRadius"),a=Qe("borderSpacing"),l=Qe("borderWidth"),c=Qe("contrast"),u=Qe("grayscale"),d=Qe("hueRotate"),h=Qe("invert"),p=Qe("gap"),x=Qe("gradientColorStops"),w=Qe("gradientColorStopPositions"),m=Qe("inset"),b=Qe("margin"),v=Qe("opacity"),g=Qe("padding"),y=Qe("saturate"),k=Qe("scale"),_=Qe("sepia"),j=Qe("skew"),E=Qe("space"),C=Qe("translate"),I=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],z=()=>["auto",_e,t],O=()=>[_e,t],D=()=>["",br,Hr],B=()=>["auto",oa,_e],A=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],L=()=>["solid","dashed","dotted","double","none"],q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],N=()=>["start","end","center","between","around","evenly","stretch"],S=()=>["","0",_e],U=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>[oa,_e];return{cacheSize:500,separator:":",theme:{colors:[so],spacing:[br,Hr],blur:["none","",Kr,_e],brightness:W(),borderColor:[e],borderRadius:["none","","full",Kr,_e],borderSpacing:O(),borderWidth:D(),contrast:W(),grayscale:S(),hueRotate:W(),invert:S(),gap:O(),gradientColorStops:[e],gradientColorStopPositions:[uC,Hr],inset:z(),margin:z(),opacity:W(),padding:O(),saturate:W(),scale:W(),sepia:S(),skew:W(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",_e]}],container:["container"],columns:[{columns:[Kr]}],"break-after":[{"break-after":U()}],"break-before":[{"break-before":U()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...A(),_e]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ro,_e]}],basis:[{basis:z()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",_e]}],grow:[{grow:S()}],shrink:[{shrink:S()}],order:[{order:["first","last","none",ro,_e]}],"grid-cols":[{"grid-cols":[so]}],"col-start-end":[{col:["auto",{span:["full",ro,_e]},_e]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[so]}],"row-start-end":[{row:["auto",{span:[ro,_e]},_e]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",_e]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",_e]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...N()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...N(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...N(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[g]}],px:[{px:[g]}],py:[{py:[g]}],ps:[{ps:[g]}],pe:[{pe:[g]}],pt:[{pt:[g]}],pr:[{pr:[g]}],pb:[{pb:[g]}],pl:[{pl:[g]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",_e,t]}],"min-w":[{"min-w":[_e,t,"min","max","fit"]}],"max-w":[{"max-w":[_e,t,"none","full","min","max","fit","prose",{screen:[Kr]},Kr]}],h:[{h:[_e,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[_e,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[_e,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[_e,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Kr,Hr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ed]}],"font-family":[{font:[so]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",_e]}],"line-clamp":[{"line-clamp":["none",oa,Ed]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",br,_e]}],"list-image":[{"list-image":["none",_e]}],"list-style-type":[{list:["none","disc","decimal",_e]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...L(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",br,Hr]}],"underline-offset":[{"underline-offset":["auto",br,_e]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_e]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_e]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...A(),fC]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",hC]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},mC]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...L(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:L()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...L()]}],"outline-offset":[{"outline-offset":[br,_e]}],"outline-w":[{outline:[br,Hr]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[br,Hr]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Kr,gC]}],"shadow-color":[{shadow:[so]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":q()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Kr,_e]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[y]}],sepia:[{sepia:[_]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[_]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",_e]}],duration:[{duration:W()}],ease:[{ease:["linear","in","out","in-out",_e]}],delay:[{delay:W()}],animate:[{animate:["none","spin","ping","pulse","bounce",_e]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[ro,_e]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",_e]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_e]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_e]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[br,Hr,Ed]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},bC=nC(wC);function ge(...e){return bC(g0(e))}function Rt(e){return e.split(/\n|,/).map(t=>t.trim()).filter(Boolean)}function df(e){if(!e)return{module:"",service:"",action:""};const[t,n,r]=e.split(":");return{module:(t==null?void 0:t.trim())||"",service:(n==null?void 0:n.trim())||"",action:(r==null?void 0:r.trim())||""}}function iv({module:e,service:t,action:n}){return!e||!t||!n?"":`${e}:${t}:${n}`}function la(e,t,n=`${t}s`){return e?`${e} ${e===1?t:n} selected`:`No ${n} selected`}function Cc(e,t={}){return{...t,...e||{}}}function Ot({className:e,...t}){return o.jsx("div",{className:ge("mmg-card rounded-2xl bg-white/70 dark:bg-white/5 backdrop-blur-xs shadow-soft","ring-1 ring-black/5 dark:ring-white/10",e),...t})}function Qt({className:e,...t}){return o.jsx("div",{className:ge("p-5 pb-3",e),...t})}function hn({className:e,...t}){return o.jsx("h3",{className:ge("text-base font-semibold",e),...t})}function Jt({className:e,...t}){return o.jsx("div",{className:ge("p-5 pt-0",e),...t})}function av(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function xi(...e){return t=>{let n=!1;const r=e.map(s=>{const i=av(s,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():av(e[s],null)}}}}function dn(...e){return f.useCallback(xi(...e),e)}var kC=Symbol.for("react.lazy"),ou=xu[" use ".trim().toString()];function _C(e){return typeof e=="object"&&e!==null&&"then"in e}function k0(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===kC&&"_payload"in e&&_C(e._payload)}function SC(e){const t=EC(e),n=f.forwardRef((r,s)=>{let{children:i,...a}=r;k0(i)&&typeof ou=="function"&&(i=ou(i._payload));const l=f.Children.toArray(i),c=l.find(NC);if(c){const u=c.props.children,d=l.map(h=>h===c?f.Children.count(u)>1?f.Children.only(null):f.isValidElement(u)?u.props.children:null:h);return o.jsx(t,{...a,ref:s,children:f.isValidElement(u)?f.cloneElement(u,void 0,d):null})}return o.jsx(t,{...a,ref:s,children:i})});return n.displayName=`${e}.Slot`,n}var jC=SC("Slot");function EC(e){const t=f.forwardRef((n,r)=>{let{children:s,...i}=n;if(k0(s)&&typeof ou=="function"&&(s=ou(s._payload)),f.isValidElement(s)){const a=RC(s),l=PC(i,s.props);return s.type!==f.Fragment&&(l.ref=r?xi(r,a):a),f.cloneElement(s,l)}return f.Children.count(s)>1?f.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var CC=Symbol("radix.slottable");function NC(e){return f.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===CC}function PC(e,t){const n={...t};for(const r in t){const s=e[r],i=t[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function RC(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}const ov=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,lv=g0,TC=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return lv(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=t,a=Object.keys(s).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const p=ov(d)||ov(h);return s[u][p]}),l=n&&Object.entries(n).reduce((u,d)=>{let[h,p]=d;return p===void 0||(u[h]=p),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:p,...x}=d;return Object.entries(x).every(w=>{let[m,b]=w;return Array.isArray(b)?b.includes({...i,...l}[m]):{...i,...l}[m]===b})?[...u,h,p]:u},[]);return lv(e,a,c,n==null?void 0:n.class,n==null?void 0:n.className)},AC=TC("inline-flex items-center justify-center whitespace-nowrap rounded-xl text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-black/10 dark:focus-visible:ring-white/15 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"mmg-btn-primary bg-black text-white hover:bg-black/90 dark:bg-white dark:text-black dark:hover:bg-white/90 shadow-soft",secondary:"bg-black/5 text-black hover:bg-black/8 dark:bg-white/10 dark:text-white dark:hover:bg-white/15 shadow-soft",ghost:"bg-transparent hover:bg-black/5 text-black dark:text-white dark:hover:bg-white/10 shadow-soft"},size:{default:"h-10 px-4",sm:"h-9 px-3",lg:"h-11 px-5",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Z=Dt.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},i)=>{const a=r?jC:"button";return o.jsx(a,{className:ge(AC({variant:t,size:n,className:e})),ref:i,...s})});Z.displayName="Button";function kt({className:e,...t}){return o.jsx("div",{className:ge("rounded-2xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 shadow-soft",e),...t})}function Up({size:e=128}){return o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("img",{src:"/logo.svg",width:e,height:e,alt:"Unified UI",className:"shrink-0 filter invert dark:invert-0"}),o.jsx("span",{className:"font-semibold align-text-bottom tracking-tight hidden sm:inline-flex",children:"Unified UI"})]})}function OC(){const e=Fa();return o.jsxs("div",{className:"min-h-screen",children:[o.jsxs("header",{className:"w-full px-6 lg:px-10 py-5 flex items-center justify-between",children:[o.jsx(Up,{size:64}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx(Z,{variant:"secondary",onClick:()=>e("/login"),children:"Sign In"})})]}),o.jsxs("main",{className:"w-full px-6 lg:px-10 pb-12",children:[o.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 items-center",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs bg-black/5 dark:bg-white/10",children:[o.jsx("span",{className:"h-2 w-2 rounded-full bg-black/30 dark:bg-white/40"}),"Enterprise AI Platform"]}),o.jsxs("h1",{className:"text-4xl sm:text-5xl font-extrabold tracking-tight",children:["The Future of"," ",o.jsx("span",{className:"bg-gradient-to-r from-blue-500 via-cyan-500 to-purple-500 bg-clip-text text-transparent",children:"Business Intelligence"})]}),o.jsx("p",{className:"text-base sm:text-lg text-black/60 dark:text-white/65 max-w-xl",children:"Unified AI-powered platform for sales proposals, mockup generation, and intelligent automation  with a clean, subtle, glassy UI."}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsxs(Z,{size:"lg",onClick:()=>e("/login"),children:["Get Started ",o.jsx(NE,{className:"ml-2",size:18})]}),o.jsxs(Z,{variant:"secondary",size:"lg",children:["Watch Demo ",o.jsx(LE,{className:"ml-2",size:18})]})]}),o.jsxs("div",{className:"flex items-center gap-4 pt-2 text-sm text-black/55 dark:text-white/60",children:[o.jsx(Cd,{value:"500+",label:"Enterprise Clients"}),o.jsx(cv,{}),o.jsx(Cd,{value:"10M+",label:"AI Interactions"}),o.jsx(cv,{}),o.jsx(Cd,{value:"99.9%",label:"Uptime"})]})]}),o.jsxs(Ot,{className:"overflow-hidden",children:[o.jsx(Qt,{children:o.jsx(hn,{children:"AI Assistant"})}),o.jsx(Jt,{children:o.jsxs("div",{className:"space-y-3",children:[o.jsx(Nd,{role:"assistant",text:"How can I help you with your sales proposal today?"}),o.jsx(Nd,{role:"user",text:"Generate a proposal for ABC Corp"}),o.jsx(Nd,{role:"assistant",text:"Thinking",typing:!0})]})})]})]}),o.jsxs("section",{className:"mt-10 grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4",children:[o.jsx(Yl,{title:"AI Chat Assistant",desc:"Chat interface for natural language workflows."}),o.jsx(Yl,{title:"Mockup Generator",desc:"AI creative generation with compositing."}),o.jsx(Yl,{title:"Sales Proposals",desc:"Generate professional proposals quickly."}),o.jsx(Yl,{title:"Role-Based Access",desc:"Multi-role authentication and routing."})]}),o.jsx("footer",{className:"mt-10 text-xs text-black/45 dark:text-white/55",children:"MMG Unified UI"})]})]})}function Cd({value:e,label:t}){return o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"font-semibold text-black/80 dark:text-white/85",children:e}),o.jsx("span",{className:"text-[12px]",children:t})]})}function cv(){return o.jsx("div",{className:"h-8 w-px bg-black/5 dark:bg-white/10"})}function Nd({role:e,text:t,typing:n}){const r=e==="user";return o.jsx("div",{className:"flex "+(r?"justify-end":"justify-start"),children:o.jsx("div",{className:["max-w-[85%] rounded-2xl px-3 py-2 text-sm shadow-soft",r?"bg-black text-white dark:bg-white dark:text-black":"bg-white/70 dark:bg-white/10","ring-1 ring-black/5 dark:ring-white/10 backdrop-blur-xs"].join(" "),children:n?o.jsxs("span",{className:"inline-flex items-center gap-1",children:[o.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-current opacity-40 animate-pulse"}),o.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-current opacity-40 animate-pulse [animation-delay:120ms]"}),o.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-current opacity-40 animate-pulse [animation-delay:240ms]"})]}):t})})}function Yl({title:e,desc:t}){return o.jsxs(kt,{className:"bg-white/55 dark:bg-white/5 backdrop-blur-md p-5",children:[o.jsx("div",{className:"text-sm font-semibold",children:e}),o.jsx("div",{className:"mt-1 text-sm text-black/60 dark:text-white/65",children:t})]})}function he({label:e,children:t,className:n,labelClassName:r,withGap:s=!0}){return o.jsxs("label",{className:ge("block",s&&"space-y-1",n),children:[o.jsx("div",{className:ge("text-xs font-semibold text-black/60 dark:text-white/65",r),children:e}),t]})}function Ee({text:e="Loading",className:t=""}){return o.jsxs("span",{className:["inline-flex items-center gap-2",t].filter(Boolean).join(" "),children:[o.jsx("span",{children:e}),o.jsxs("span",{className:"mmg-ellipsis","aria-hidden":"true",children:[o.jsx("span",{className:"mmg-ellipsis-dot",style:{animationDelay:"0ms"}}),o.jsx("span",{className:"mmg-ellipsis-dot",style:{animationDelay:"120ms"}}),o.jsx("span",{className:"mmg-ellipsis-dot",style:{animationDelay:"240ms"}})]})]})}var hr=function(){return hr=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},hr.apply(this,arguments)};function Ba(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function IC(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})}function MC(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,i;r<s;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}const $C=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class zp extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class DC extends zp{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class uv extends zp{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class dv extends zp{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var hf;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(hf||(hf={}));class LC{constructor(t,{headers:n={},customFetch:r,region:s=hf.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=$C(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return IC(this,arguments,void 0,function*(n,r={}){var s;let i,a;try{const{headers:l,method:c,body:u,signal:d,timeout:h}=r;let p={},{region:x}=r;x||(x=this.region);const w=new URL(`${this.url}/${n}`);x&&x!=="any"&&(p["x-region"]=x,w.searchParams.set("forceFunctionRegion",x));let m;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",m=u):typeof u=="string"?(p["Content-Type"]="text/plain",m=u):typeof FormData<"u"&&u instanceof FormData?m=u:(p["Content-Type"]="application/json",m=JSON.stringify(u)):m=u;let b=d;h&&(a=new AbortController,i=setTimeout(()=>a.abort(),h),d?(b=a.signal,d.addEventListener("abort",()=>a.abort())):b=a.signal);const v=yield this.fetch(w.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),l),body:m,signal:b}).catch(_=>{throw new DC(_)}),g=v.headers.get("x-relay-error");if(g&&g==="true")throw new uv(v);if(!v.ok)throw new dv(v);let y=((s=v.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),k;return y==="application/json"?k=yield v.json():y==="application/octet-stream"||y==="application/pdf"?k=yield v.blob():y==="text/event-stream"?k=v:y==="multipart/form-data"?k=yield v.formData():k=yield v.text(),{data:k,error:null,response:v}}catch(l){return{data:null,error:l,response:l instanceof dv||l instanceof uv?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var FC=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},UC=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let a=null,l=null,c=null,u=i.status,d=i.statusText;if(i.ok){var h,p;if(n.method!=="HEAD"){var x;const v=await i.text();v===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((x=n.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?l=v:l=JSON.parse(v))}const m=(h=n.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),b=(p=i.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");m&&b&&b.length>1&&(c=parseInt(b[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(l)&&(l.length>1?(a={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,u=406,d="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var w;const m=await i.text();try{a=JSON.parse(m),Array.isArray(a)&&i.status===404&&(l=[],a=null,u=200,d="OK")}catch{i.status===404&&m===""?(u=204,d="No Content"):a={message:m}}if(a&&n.isMaybeSingle&&(!(a==null||(w=a.details)===null||w===void 0)&&w.includes("0 rows"))&&(a=null,u=200,d="OK"),a&&n.shouldThrowOnError)throw new FC(a)}return{error:a,data:l,count:c,status:u,statusText:d}});return this.shouldThrowOnError||(s=s.catch(i=>{var a;let l="";const c=i==null?void 0:i.cause;if(c){var u,d,h,p;const w=(u=c==null?void 0:c.message)!==null&&u!==void 0?u:"",m=(d=c==null?void 0:c.code)!==null&&d!==void 0?d:"";l=`${(h=i==null?void 0:i.name)!==null&&h!==void 0?h:"FetchError"}: ${i==null?void 0:i.message}`,l+=`

Caused by: ${(p=c==null?void 0:c.name)!==null&&p!==void 0?p:"Error"}: ${w}`,m&&(l+=` (${m})`),c!=null&&c.stack&&(l+=`
${c.stack}`)}else{var x;l=(x=i==null?void 0:i.stack)!==null&&x!==void 0?x:""}return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},zC=class extends UC{select(e){let t=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const i=s?`${s}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:i="text"}={}){var a;const l=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const hv=new RegExp("[,()]");var Li=class extends zC{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&hv.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&hv.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},BC=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}select(e,t){const{head:n=!1,count:r}=t??{},s=n?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),r&&this.headers.append("Prefer",`count=${r}`),new Li({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;const s="POST";if(t&&this.headers.append("Prefer",`count=${t}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(i.length>0){const a=[...new Set(i)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Li({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){var i;const a="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer",`count=${r}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Li({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var n;const r="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new Li({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var t;const n="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Li({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},WC=class _0{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new BC(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new _0(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){var a;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;r||s?(l=r?"HEAD":"GET",Object.entries(n).filter(([h,p])=>p!==void 0).map(([h,p])=>[h,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([h,p])=>{c.searchParams.append(h,p)})):(l="POST",u=n);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new Li({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};class VC{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const HC="2.88.0",KC=`realtime-js/${HC}`,S0="1.0.0",qC="2.0.0",fv=S0,ff=1e4,GC=1e3,QC=100;var Yr;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Yr||(Yr={}));var yt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(yt||(yt={}));var Jn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Jn||(Jn={}));var pf;(function(e){e.websocket="websocket"})(pf||(pf={}));var Vs;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Vs||(Vs={}));class JC{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;const s=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var n,r;const s=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},a=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(t,n,r){var s,i;const a=t.topic,l=(s=t.ref)!==null&&s!==void 0?s:"",c=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},h=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const p=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+a.length+u.length+h.length,x=new ArrayBuffer(this.HEADER_LENGTH+p);let w=new DataView(x),m=0;w.setUint8(m++,this.KINDS.userBroadcastPush),w.setUint8(m++,c.length),w.setUint8(m++,l.length),w.setUint8(m++,a.length),w.setUint8(m++,u.length),w.setUint8(m++,h.length),w.setUint8(m++,n),Array.from(c,v=>w.setUint8(m++,v.charCodeAt(0))),Array.from(l,v=>w.setUint8(m++,v.charCodeAt(0))),Array.from(a,v=>w.setUint8(m++,v.charCodeAt(0))),Array.from(u,v=>w.setUint8(m++,v.charCodeAt(0))),Array.from(h,v=>w.setUint8(m++,v.charCodeAt(0)));var b=new Uint8Array(x.byteLength+r.byteLength);return b.set(new Uint8Array(x),0),b.set(new Uint8Array(r),x.byteLength),b.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){const r=JSON.parse(t),[s,i,a,l,c]=r;return n({join_ref:s,ref:i,topic:a,event:l,payload:c})}return n({})}_binaryDecode(t){const n=new DataView(t),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,s)}}_decodeUserBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2),a=n.getUint8(3),l=n.getUint8(4);let c=this.HEADER_LENGTH+4;const u=r.decode(t.slice(c,c+s));c=c+s;const d=r.decode(t.slice(c,c+i));c=c+i;const h=r.decode(t.slice(c,c+a));c=c+a;const p=t.slice(c,t.byteLength),x=l===this.JSON_ENCODING?JSON.parse(r.decode(p)):p,w={type:this.BROADCAST_EVENT,event:d,payload:x};return a>0&&(w.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:w}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}}class j0{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ke;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ke||(Ke={}));const pv=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((i,a)=>(i[a]=YC(a,e,t,s),i),{}):{}},YC=(e,t,n,r)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,a=n[e];return i&&!r.includes(i)?E0(i,a):mf(a)},E0=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return tN(t,n)}switch(e){case Ke.bool:return XC(t);case Ke.float4:case Ke.float8:case Ke.int2:case Ke.int4:case Ke.int8:case Ke.numeric:case Ke.oid:return ZC(t);case Ke.json:case Ke.jsonb:return eN(t);case Ke.timestamp:return nN(t);case Ke.abstime:case Ke.date:case Ke.daterange:case Ke.int4range:case Ke.int8range:case Ke.money:case Ke.reltime:case Ke.text:case Ke.time:case Ke.timestamptz:case Ke.timetz:case Ke.tsrange:case Ke.tstzrange:return mf(t);default:return mf(t)}},mf=e=>e,XC=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},ZC=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},eN=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},tN=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const a=e.slice(1,n);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>E0(t,l))}return e},nN=e=>typeof e=="string"?e.replace(" ","T"):e,C0=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Pd{constructor(t,n,r={},s=ff){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var mv;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(mv||(mv={}));class Eo{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Eo.syncState(this.state,s,i,a),this.pendingDiffs.forEach(c=>{this.state=Eo.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Eo.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),a=this.transformState(n),l={},c={};return this.map(i,(u,d)=>{a[u]||(c[u]=d)}),this.map(a,(u,d)=>{const h=i[u];if(h){const p=d.map(b=>b.presence_ref),x=h.map(b=>b.presence_ref),w=d.filter(b=>x.indexOf(b.presence_ref)<0),m=h.filter(b=>p.indexOf(b.presence_ref)<0);w.length>0&&(l[u]=w),m.length>0&&(c[u]=m)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(x=>x.presence_ref),p=d.filter(x=>h.indexOf(x.presence_ref)<0);t[l].unshift(...p)}r(l,d,c)}),this.map(a,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var gv;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(gv||(gv={}));var Co;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Co||(Co={}));var Sr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Sr||(Sr={}));class Zi{constructor(t,n={config:{}},r){var s,i;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=yt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Pd(this,Jn.join,this.params,this.timeout),this.rejoinTimer=new j0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=yt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=yt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=yt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=yt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=yt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Jn.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new Eo(this),this.broadcastEndpointURL=C0(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==yt.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(x=>x.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Co.PRESENCE]&&this.bindings[Co.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},p={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(x=>t==null?void 0:t(Sr.CHANNEL_ERROR,x)),this._onClose(()=>t==null?void 0:t(Sr.CLOSED)),this.updateJoinPayload(Object.assign({config:p},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:x})=>{var w;if(this.socket._isManualToken()||this.socket.setAuth(),x===void 0){t==null||t(Sr.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,b=(w=m==null?void 0:m.length)!==null&&w!==void 0?w:0,v=[];for(let g=0;g<b;g++){const y=m[g],{filter:{event:k,schema:_,table:j,filter:E}}=y,C=x&&x[g];if(C&&C.event===k&&Zi.isFilterValueEqual(C.schema,_)&&Zi.isFilterValueEqual(C.table,j)&&Zi.isFilterValueEqual(C.filter,E))v.push(Object.assign(Object.assign({},y),{id:C.id}));else{this.unsubscribe(),this.state=yt.errored,t==null||t(Sr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(Sr.SUBSCRIBED);return}}).receive("error",x=>{this.state=yt.errored,t==null||t(Sr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Sr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===yt.joined&&t===Co.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const a={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:a}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=yt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Jn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Pd(this,Jn.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=yt.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Pd(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>QC){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Jn;if(r&&[l,c,u,d].indexOf(a)>=0&&r!==this._joinRef())return;let p=this._onMessage(a,n,r);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(x=>{var w,m,b;return((w=x.filter)===null||w===void 0?void 0:w.event)==="*"||((b=(m=x.filter)===null||m===void 0?void 0:m.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===a}).map(x=>x.callback(p,r)):(i=this.bindings[a])===null||i===void 0||i.filter(x=>{var w,m,b,v,g,y;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in x){const k=x.id,_=(w=x.filter)===null||w===void 0?void 0:w.event;return k&&((m=n.ids)===null||m===void 0?void 0:m.includes(k))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const k=(g=(v=x==null?void 0:x.filter)===null||v===void 0?void 0:v.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return k==="*"||k===((y=n==null?void 0:n.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===a}).map(x=>{if(typeof p=="object"&&"ids"in p){const w=p.data,{schema:m,table:b,commit_timestamp:v,type:g,errors:y}=w;p=Object.assign(Object.assign({},{schema:m,table:b,commit_timestamp:v,eventType:g,new:{},old:{},errors:y}),this._getPayloadRecords(w))}x.callback(p,r)})}_isClosed(){return this.state===yt.closed}_isJoined(){return this.state===yt.joined}_isJoining(){return this.state===yt.joining}_isLeaving(){return this.state===yt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Zi.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Jn.close,{},t)}_onError(t){this._on(Jn.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=yt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=pv(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=pv(t.columns,t.old_record)),n}}const Rd=()=>{},Xl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},rN=[1e3,2e3,5e3,1e4],sN=1e4,iN=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class aN{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ff,this.transport=null,this.heartbeatIntervalMs=Xl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Rd,this.ref=0,this.reconnectTimer=null,this.vsn=fv,this.logger=Rd,this.conn=null,this.sendBuffer=[],this.serializer=new JC,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${pf.websocket}`,this.httpEndpoint=C0(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=VC.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Yr.connecting:return Vs.Connecting;case Yr.open:return Vs.Open;case Yr.closing:return Vs.Closing;default:return Vs.Closed}}isConnected(){return this.connectionState()===Vs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Zi(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(GC,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Xl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:a}=n,l=a?`(${a})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Yr.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Yr.open||this.conn.readyState===Yr.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Jn.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([iN],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,r=!1;if(t)n=t,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const i={access_token:n,version:KC};n&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(Jn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new j0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Xl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,i,a,l,c,u,d,h,p,x;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:ff,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Xl.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Rd,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:fv,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:w=>rN[w-1]||sN,this.vsn){case S0:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(w,m)=>m(JSON.stringify(w)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:(w,m)=>m(JSON.parse(w));break;case qC:this.encode=(p=t==null?void 0:t.encode)!==null&&p!==void 0?p:this.serializer.encode.bind(this.serializer),this.decode=(x=t==null?void 0:t.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Go=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((n=t.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function oN(e,t,n){const r=new URL(t,e);if(n)for(const[s,i]of Object.entries(n))i!==void 0&&r.searchParams.set(s,i);return r.toString()}async function lN(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function cN(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:i,headers:a}){const l=oN(e.baseUrl,r,s),c=await lN(e.auth),u=await t(l,{method:n,headers:{...i?{"Content-Type":"application/json"}:{},...c,...a},body:i?JSON.stringify(i):void 0}),d=await u.text(),h=(u.headers.get("content-type")||"").includes("application/json"),p=h&&d?JSON.parse(d):d;if(!u.ok){const x=h?p:void 0,w=x==null?void 0:x.error;throw new Go((w==null?void 0:w.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:w==null?void 0:w.type,icebergCode:w==null?void 0:w.code,details:x})}return{status:u.status,headers:u.headers,data:p}}}}function Zl(e){return e.join("")}var uN=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Zl(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Zl(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Zl(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Zl(e.namespace)}`}),!0}catch(t){if(t instanceof Go&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof Go&&n.status===409)return;throw n}}};function Pi(e){return e.join("")}var dN=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Pi(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Pi(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Pi(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Pi(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Pi(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Pi(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof Go&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof Go&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},hN=class{constructor(e){var r;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=cN({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(r=e.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new uN(this.client,t),this.tableOps=new dN(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},$u=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function tt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var fN=class extends $u{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},gf=class extends $u{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const Bp=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),pN=()=>Response,vf=e=>{if(Array.isArray(e))return e.map(n=>vf(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=vf(r)}),t},mN=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},gN=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Qo(e){"@babel/helpers - typeof";return Qo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qo(e)}function vN(e,t){if(Qo(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Qo(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yN(e){var t=vN(e,"string");return Qo(t)=="symbol"?t:t+""}function xN(e,t,n){return(t=yN(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vv(Object(n),!0).forEach(function(r){xN(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vv(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const Td=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},wN=async(e,t,n)=>{e instanceof await pN()&&!(n!=null&&n.noResolveJson)?e.json().then(r=>{const s=e.status||500,i=(r==null?void 0:r.statusCode)||s+"";t(new fN(Td(r),s,i))}).catch(r=>{t(new gf(Td(r),r))}):t(new gf(Td(e),e))},bN=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(mN(r)?(s.headers=me({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),me(me({},s),n))};async function yl(e,t,n,r,s,i){return new Promise((a,l)=>{e(n,bN(t,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>wN(c,l,r))})}async function Jo(e,t,n,r){return yl(e,"GET",t,n,r)}async function Kn(e,t,n,r,s){return yl(e,"POST",t,r,s,n)}async function yf(e,t,n,r,s){return yl(e,"PUT",t,r,s,n)}async function kN(e,t,n,r){return yl(e,"HEAD",t,me(me({},n),{},{noResolveJson:!0}),r)}async function Wp(e,t,n,r,s){return yl(e,"DELETE",t,r,s,n)}var _N=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(tt(t))return{data:null,error:t};throw t}}};let N0;N0=Symbol.toStringTag;var SN=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[N0]="BlobDownloadBuilder",this.promise=null}asStream(){return new _N(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(tt(t))return{data:null,error:t};throw t}}};const jN={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},yv={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var EN=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=Bp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,n,r){var s=this;try{let i;const a=me(me({},yv),r);let l=me(me({},s.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",s.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",a.cacheControl),c&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=s.toBase64(s.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!a.duplex&&(a.duplex="half")),r!=null&&r.headers&&(l=me(me({},l),r.headers));const u=s._removeEmptyFolders(t),d=s._getFinalPath(u),h=await(e=="PUT"?yf:Kn)(s.fetch,`${s.url}/object/${d}`,i,me({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(tt(i))return{data:null,error:i};throw i}}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,r){var s=this;const i=s._removeEmptyFolders(e),a=s._getFinalPath(i),l=new URL(s.url+`/object/upload/sign/${a}`);l.searchParams.set("token",t);try{let c;const u=me({upsert:yv.upsert},r),d=me(me({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{data:{path:i,fullPath:(await yf(s.fetch,l.toString(),c,{headers:d})).Key},error:null}}catch(c){if(s.shouldThrowOnError)throw c;if(tt(c))return{data:null,error:c};throw c}}async createSignedUploadUrl(e,t){var n=this;try{let r=n._getFinalPath(e);const s=me({},n.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=await Kn(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(n.url+i.url),l=a.searchParams.get("token");if(!l)throw new $u("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:l},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var r=this;try{return{data:await Kn(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(tt(s))return{data:null,error:s};throw s}}async copy(e,t,n){var r=this;try{return{data:{path:(await Kn(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(tt(s))return{data:null,error:s};throw s}}async createSignedUrl(e,t,n){var r=this;try{let s=r._getFinalPath(e),i=await Kn(r.fetch,`${r.url}/object/sign/${s}`,me({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${r.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(tt(s))return{data:null,error:s};throw s}}async createSignedUrls(e,t,n){var r=this;try{const s=await Kn(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(a=>me(me({},a),{},{signedUrl:a.signedURL?encodeURI(`${r.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(tt(s))return{data:null,error:s};throw s}}download(e,t){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=r?`?${r}`:"",i=this._getFinalPath(e),a=()=>Jo(this.fetch,`${this.url}/${n}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new SN(a,this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);try{return{data:vf(await Jo(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await kN(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(tt(r)&&r instanceof gf){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&r.push(s);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});a!==""&&r.push(a);let l=r.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${l}`)}}}async remove(e){var t=this;try{return{data:await Wp(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(tt(n))return{data:null,error:n};throw n}}async list(e,t,n){var r=this;try{const s=me(me(me({},jN),t),{},{prefix:e||""});return{data:await Kn(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},n),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(tt(s))return{data:null,error:s};throw s}}async listV2(e,t){var n=this;try{const r=me({},e);return{data:await Kn(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},t),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const P0="2.88.0",R0={"X-Client-Info":`storage-js/${P0}`};var CN=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1;const s=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=me(me({},R0),t),this.fetch=Bp(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const n=t.listBucketOptionsToQueryString(e);return{data:await Jo(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(tt(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await Jo(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(tt(n))return{data:null,error:n};throw n}}async createBucket(e,t={public:!1}){var n=this;try{return{data:await Kn(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}}async updateBucket(e,t){var n=this;try{return{data:await yf(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}}async emptyBucket(e){var t=this;try{return{data:await Kn(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(tt(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await Wp(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(tt(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},NN=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=me(me({},R0),t),this.fetch=Bp(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Kn(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(tt(n))return{data:null,error:n};throw n}}async listBuckets(e){var t=this;try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),s=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return{data:await Jo(t.fetch,s,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(tt(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await Wp(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(tt(n))return{data:null,error:n};throw n}}from(e){var t=this;if(!gN(e))throw new $u("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new hN({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(s,i){const a=s[i];return typeof a!="function"?a:async(...l)=>{try{return{data:await a.apply(s,l),error:null}}catch(c){if(r)throw c;return{data:null,error:c}}}}})}};const Vp={"X-Client-Info":`storage-js/${P0}`,"Content-Type":"application/json"};var T0=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function bn(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var Ad=class extends T0{constructor(e,t,n){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},PN=class extends T0{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const Hp=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),RN=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},xv=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),TN=async(e,t,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const r=e.status||500,s=e;if(typeof s.json=="function")s.json().then(i=>{const a=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||r+"";t(new Ad(xv(i),r,a))}).catch(()=>{const i=r+"";t(new Ad(s.statusText||`HTTP ${r} error`,r,i))});else{const i=r+"";t(new Ad(s.statusText||`HTTP ${r} error`,r,i))}}else t(new PN(xv(e),e))},AN=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return r?(RN(r)?(s.headers=me({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,me(me({},s),n)):s};async function ON(e,t,n,r,s,i){return new Promise((a,l)=>{e(n,AN(t,r,s,i)).then(c=>{if(!c.ok)throw c;if(r!=null&&r.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>a(c)).catch(c=>TN(c,l,r))})}async function kn(e,t,n,r,s){return ON(e,"POST",t,r,s,n)}var IN=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=me(me({},Vp),t),this.fetch=Hp(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await kn(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(bn(n))return{data:null,error:n};throw n}}async getIndex(e,t){var n=this;try{return{data:await kn(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(bn(r))return{data:null,error:r};throw r}}async listIndexes(e){var t=this;try{return{data:await kn(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(bn(n))return{data:null,error:n};throw n}}async deleteIndex(e,t){var n=this;try{return{data:await kn(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(bn(r))return{data:null,error:r};throw r}}},MN=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=me(me({},Vp),t),this.fetch=Hp(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await kn(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(bn(n))return{data:null,error:n};throw n}}async getVectors(e){var t=this;try{return{data:await kn(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(bn(n))return{data:null,error:n};throw n}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await kn(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(bn(n))return{data:null,error:n};throw n}}async queryVectors(e){var t=this;try{return{data:await kn(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(bn(n))return{data:null,error:n};throw n}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await kn(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(bn(n))return{data:null,error:n};throw n}}},$N=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=me(me({},Vp),t),this.fetch=Hp(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await kn(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(bn(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await kn(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(bn(n))return{data:null,error:n};throw n}}async listBuckets(e={}){var t=this;try{return{data:await kn(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(bn(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await kn(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(bn(n))return{data:null,error:n};throw n}}},DN=class extends $N{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new LN(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},LN=class extends IN{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,me(me({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,me(me({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new FN(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},FN=class extends MN{constructor(e,t,n,r,s){super(e,t,s),this.vectorBucketName=n,this.indexName=r}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,me(me({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,me(me({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,me(me({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,me(me({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,me(me({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},UN=class extends CN{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new EN(this.url,this.headers,e,this.fetch)}get vectors(){return new DN(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new NN(this.url+"/iceberg",this.headers,this.fetch)}};const A0="2.88.0",Fi=30*1e3,xf=3,Od=xf*Fi,zN="http://localhost:9999",BN="supabase.auth.token",WN={"X-Client-Info":`gotrue-js/${A0}`},wf="X-Supabase-Api-Version",O0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},VN=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,HN=10*60*1e3;class Yo extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function le(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class KN extends Yo{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function qN(e){return le(e)&&e.name==="AuthApiError"}class Hs extends Yo{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Wr extends Yo{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class yn extends Wr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function GN(e){return le(e)&&e.name==="AuthSessionMissingError"}class Ri extends Wr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ec extends Wr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class tc extends Wr{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function QN(e){return le(e)&&e.name==="AuthImplicitGrantRedirectError"}class wv extends Wr{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class JN extends Wr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class bf extends Wr{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Id(e){return le(e)&&e.name==="AuthRetryableFetchError"}class bv extends Wr{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class kf extends Wr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const lu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),kv=` 	
\r=`.split(""),YN=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<kv.length;t+=1)e[kv[t].charCodeAt(0)]=-2;for(let t=0;t<lu.length;t+=1)e[lu[t].charCodeAt(0)]=t;return e})();function _v(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(lu[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(lu[r]),t.queuedBits-=6}}function I0(e,t,n){const r=YN[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Sv(e){const t=[],n=a=>{t.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{eP(a,r,n)};for(let a=0;a<e.length;a+=1)I0(e.charCodeAt(a),s,i);return t.join("")}function XN(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function ZN(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}XN(r,t)}}function eP(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function ca(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)I0(e.charCodeAt(s),n,r);return new Uint8Array(t)}function tP(e){const t=[];return ZN(e,n=>t.push(n)),new Uint8Array(t)}function Js(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>_v(s,n,r)),_v(null,n,r),t.join("")}function nP(e){return Math.round(Date.now()/1e3)+e}function rP(){return Symbol("auth-callback")}const Nt=()=>typeof window<"u"&&typeof document<"u",Ls={tested:!1,writable:!1},M0=()=>{if(!Nt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ls.tested)return Ls.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ls.tested=!0,Ls.writable=!0}catch{Ls.tested=!0,Ls.writable=!1}return Ls.writable};function sP(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const $0=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),iP=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Ui=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Fs=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ct=async(e,t)=>{await e.removeItem(t)};class Du{constructor(){this.promise=new Du.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Du.promiseConstructor=Promise;function Md(e){const t=e.split(".");if(t.length!==3)throw new kf("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!VN.test(t[r]))throw new kf("JWT not in base64url format");return{header:JSON.parse(Sv(t[0])),payload:JSON.parse(Sv(t[1])),signature:ca(t[2]),raw:{header:t[0],payload:t[1]}}}async function aP(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function oP(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await e(i);if(!t(i,null,a)){r(a);return}}catch(a){if(!t(i,a)){s(a);return}}})()})}function lP(e){return("0"+e.toString(16)).substr(-2)}function cP(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,lP).join("")}async function uP(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function dP(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await uP(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ti(e,t,n=!1){const r=cP();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Ui(e,`${t}-code-verifier`,s);const i=await dP(r);return[i,r===i?"plain":"s256"]}const hP=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function fP(e){const t=e.headers.get(wf);if(!t||!t.match(hP))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function pP(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function mP(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const gP=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ai(e){if(!gP.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function $d(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function vP(e,t){return new Proxy(e,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,s)}})}function jv(e){return JSON.parse(JSON.stringify(e))}const Bs=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),yP=[502,503,504];async function Ev(e){var t;if(!iP(e))throw new bf(Bs(e),0);if(yP.includes(e.status))throw new bf(Bs(e),e.status);let n;try{n=await e.json()}catch(i){throw new Hs(Bs(i),i)}let r;const s=fP(e);if(s&&s.getTime()>=O0["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new bv(Bs(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new yn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new bv(Bs(n),e.status,n.weak_password.reasons);throw new KN(Bs(n),e.status||500,r)}const xP=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function pe(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[wf]||(i[wf]=O0["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await wP(e,t,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function wP(e,t,n,r,s,i){const a=xP(t,r,s,i);let l;try{l=await e(n,Object.assign({},a))}catch(c){throw console.error(c),new bf(Bs(c),0)}if(l.ok||await Ev(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await Ev(c)}}function Vn(e){var t;let n=null;_P(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=nP(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Cv(e){const t=Vn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function es(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function bP(e){return{data:e,error:null}}function kP(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,a=Ba(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function Nv(e){return e}function _P(e){return e.access_token&&e.refresh_token&&e.expires_in}const Dd=["global","local","others"];class SP{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=$0(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=Dd[0]){if(Dd.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Dd.join(", ")}`);try{return await pe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(le(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await pe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:es})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=Ba(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await pe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:kP,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(le(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await pe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:es})}catch(n){if(le(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await pe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Nv});if(d.error)throw d.error;const h=await d.json(),p=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,x=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return x.length>0&&(x.forEach(w=>{const m=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(w.split(";")[1].split("=")[1]);u[`${b}Page`]=m}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(le(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Ai(t);try{return await pe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:es})}catch(n){if(le(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Ai(t);try{return await pe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:es})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Ai(t);try{return await pe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:es})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Ai(t.userId);try{const{data:n,error:r}=await pe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(le(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Ai(t.userId),Ai(t.id);try{return{data:await pe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(le(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,s,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await pe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Nv});if(d.error)throw d.error;const h=await d.json(),p=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,x=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return x.length>0&&(x.forEach(w=>{const m=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(w.split(";")[1].split("=")[1]);u[`${b}Page`]=m}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(le(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await pe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(le(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await pe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(le(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await pe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(le(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await pe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(le(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await pe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(le(n))return{data:null,error:n};throw n}}}function Pv(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Oi={debug:!!(globalThis&&M0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class D0 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class jP extends D0{}async function EP(e,t,n){Oi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Oi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Oi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{Oi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Oi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new jP(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Oi.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function CP(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function L0(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function NP(e){return parseInt(e,16)}function PP(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function RP(e){var t;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:a,notBefore:l,requestId:c,resources:u,scheme:d,uri:h,version:p}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const x=L0(e.address),w=d?`${d}://${r}`:r,m=e.statement?`${e.statement}
`:"",b=`${w} wants you to sign in with your Ethereum account:
${x}

${m}`;let v=`URI: ${h}
Version: ${p}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${i.toISOString()}`;if(s&&(v+=`
Expiration Time: ${s.toISOString()}`),l&&(v+=`
Not Before: ${l.toISOString()}`),c&&(v+=`
Request ID: ${c}`),u){let g=`
Resources:`;for(const y of u){if(!y||typeof y!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${y}`);g+=`
- ${y}`}v+=g}return`${b}
${v}`}class ft extends Error{constructor({message:t,code:n,cause:r,name:s}){var i;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class cu extends ft{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function TP({error:e,options:t}){var n,r,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ft({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new ft({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ft({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new ft({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new ft({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new ft({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new ft({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new ft({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(F0(a)){if(i.rp.id!==a)return new ft({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ft({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new ft({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new ft({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ft({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function AP({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ft({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new ft({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(F0(r)){if(n.rpId!==r)return new ft({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ft({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new ft({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ft({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class OP{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const IP=new OP;function MP(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,s=Ba(e,["challenge","user","excludeCredentials"]),i=ca(t).buffer,a=Object.assign(Object.assign({},n),{id:ca(n.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:i,user:a});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const u=r[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:ca(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function $P(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=Ba(e,["challenge","allowCredentials"]),s=ca(t).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const l=n[a];i.allowCredentials[a]=Object.assign(Object.assign({},l),{id:ca(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function DP(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Js(new Uint8Array(e.response.attestationObject)),clientDataJSON:Js(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function LP(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Js(new Uint8Array(s.authenticatorData)),clientDataJSON:Js(new Uint8Array(s.clientDataJSON)),signature:Js(new Uint8Array(s.signature)),userHandle:s.userHandle?Js(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function F0(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Rv(){var e,t;return!!(Nt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function FP(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new cu("Browser returned unexpected credential type",t)}:{data:null,error:new cu("Empty credential response",t)}}catch(t){return{data:null,error:TP({error:t,options:e})}}}async function UP(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new cu("Browser returned unexpected credential type",t)}:{data:null,error:new cu("Empty credential response",t)}}catch(t){return{data:null,error:AP({error:t,options:e})}}}const zP={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},BP={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function uu(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of e)if(s)for(const i in s){const a=s[i];if(a!==void 0)if(Array.isArray(a))r[i]=a;else if(n(a))r[i]=a;else if(t(a)){const l=r[i];t(l)?r[i]=uu(l,a):r[i]=uu(a)}else r[i]=a}return r}function WP(e,t){return uu(zP,e,t||{})}function VP(e,t){return uu(BP,e,t||{})}class HP{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:s},i){try{const{data:a,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!a)return{data:null,error:l};const c=s??IP.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:u}=a.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(a.webauthn.type){case"create":{const u=WP(a.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:h}=await FP({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=VP(a.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:h}=await UP(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(a){return le(a)?{data:null,error:a}:{data:null,error:new Hs("Unexpected error in challenge",a)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new Yo("rpId is required for WebAuthn authentication")};try{if(!Rv())return{data:null,error:new Hs("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:i});if(!a)return{data:null,error:l};const{webauthn:c}=a;return this._verify({factorId:t,challengeId:a.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(a){return le(a)?{data:null,error:a}:{data:null,error:new Hs("Unexpected error in authenticate",a)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new Yo("rpId is required for WebAuthn registration")};try{if(!Rv())return{data:null,error:new Hs("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this._enroll({friendlyName:t});if(!a)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===t&&p.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:i});return c?this._verify({factorId:a.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(a){return le(a)?{data:null,error:a}:{data:null,error:new Hs("Unexpected error in register",a)}}}}CP();const KP={url:zN,storageKey:BN,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:WN,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Tv(e,t,n){return await n()}const Ii={};class Xo{get jwks(){var t,n;return(n=(t=Ii[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Ii[this.storageKey]=Object.assign(Object.assign({},Ii[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Ii[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ii[this.storageKey]=Object.assign(Object.assign({},Ii[this.storageKey]),{cachedAt:t})}constructor(t){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},KP),t);if(this.storageKey=i.storageKey,this.instanceID=(n=Xo.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Xo.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Nt()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new SP({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=$0(i.fetch),this.lock=i.lock||Tv,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&Nt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=EP:this.lock=Tv,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new HP(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:M0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Pv(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Pv(this.memoryStorage)),Nt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${A0}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(Nt()&&(n=sP(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Nt()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),QN(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return le(n)?this._returnResult({error:n}):this._returnResult({error:new Hs("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Vn}),{data:a,error:l}=i;if(l||!a)return this._returnResult({data:{user:null,session:null},error:l});const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(le(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:d,password:h,options:p}=t;let x=null,w=null;this.flowType==="pkce"&&([x,w]=await Ti(this.storage,this.storageKey)),i=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:d,password:h,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:x,code_challenge_method:w},xform:Vn})}else if("phone"in t){const{phone:d,password:h,options:p}=t;i=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(s=p==null?void 0:p.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Vn})}else throw new ec("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return await Ct(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(await Ct(this.storage,`${this.storageKey}-code-verifier`),le(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:a,options:l}=t;n=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Cv})}else if("phone"in t){const{phone:i,password:a,options:l}=t;n=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Cv})}else throw new ec("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const i=new Ri;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(le(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,s,i,a,l,c,u,d,h,p;let x,w;if("message"in t)x=t.message,w=t.signature;else{const{chain:m,wallet:b,statement:v,options:g}=t;let y;if(Nt())if(typeof b=="object")y=b;else{const I=window;if("ethereum"in I&&typeof I.ethereum=="object"&&"request"in I.ethereum&&typeof I.ethereum.request=="function")y=I.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=b}const k=new URL((n=g==null?void 0:g.url)!==null&&n!==void 0?n:window.location.href),_=await y.request({method:"eth_requestAccounts"}).then(I=>I).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!_||_.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const j=L0(_[0]);let E=(r=g==null?void 0:g.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!E){const I=await y.request({method:"eth_chainId"});E=NP(I)}const C={domain:k.host,address:j,statement:v,uri:k.href,version:"1",chainId:E,nonce:(s=g==null?void 0:g.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(i=g==null?void 0:g.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(l=g==null?void 0:g.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=g==null?void 0:g.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=g==null?void 0:g.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=g==null?void 0:g.signInWithEthereum)===null||d===void 0?void 0:d.resources};x=RP(C),w=await y.request({method:"personal_sign",params:[PP(x),j]})}try{const{data:m,error:b}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:w},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Vn});if(b)throw b;if(!m||!m.session||!m.user){const v=new Ri;return this._returnResult({data:{user:null,session:null},error:v})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:Object.assign({},m),error:b})}catch(m){if(le(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async signInWithSolana(t){var n,r,s,i,a,l,c,u,d,h,p,x;let w,m;if("message"in t)w=t.message,m=t.signature;else{const{chain:b,wallet:v,statement:g,options:y}=t;let k;if(Nt())if(typeof v=="object")k=v;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))k=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=v}const _=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in k&&k.signIn){const j=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),g?{statement:g}:null));let E;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")E=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)E=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)w=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),m=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${_.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(s=(r=y==null?void 0:y.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((a=y==null?void 0:y.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((h=(d=y==null?void 0:y.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...y.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const j=await k.signMessage(new TextEncoder().encode(w),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=j}}try{const{data:b,error:v}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:Js(m)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Vn});if(v)throw v;if(!b||!b.session||!b.user){const g=new Ri;return this._returnResult({data:{user:null,session:null},error:g})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:v})}catch(b){if(le(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(t){const n=await Fs(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new JN;const{data:i,error:a}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Vn});if(await Ct(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!i||!i.session||!i.user){const l=new Ri;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(await Ct(this.storage,`${this.storageKey}-code-verifier`),le(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:a}=t,l=await pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Vn}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new Ri;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(n){if(le(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,s,i,a;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Ti(this.storage,this.storageKey));const{error:h}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new ec("You must provide either an email or phone number.")}catch(l){if(await Ct(this.storage,`${this.storageKey}-code-verifier`),le(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await pe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Vn});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(le(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var n,r,s,i,a;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await Ti(this.storage,this.storageKey));const u=await pe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:bP});return!((i=u.data)===null||i===void 0)&&i.url&&Nt()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await Ct(this.storage,`${this.storageKey}-code-verifier`),le(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new yn;const{error:s}=await pe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(le(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:a}=await pe(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:a,error:l}=await pe(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l})}throw new ec("You must provide either an email or phone number and a type")}catch(n){if(le(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Fs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Od:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const a=await Fs(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=$d()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};t.user=vP(t.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:es}):await this._useSession(async n=>{var r,s,i;const{data:a,error:l}=n;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new yn}:await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:es})})}catch(n){if(le(n))return GN(n)&&(await this._removeSession(),await Ct(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new yn;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Ti(this.storage,this.storageKey));const{data:u,error:d}=await pe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:es});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(r){if(await Ct(this.storage,`${this.storageKey}-code-verifier`),le(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new yn;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:a}=Md(t.access_token);if(a.exp&&(r=a.exp,s=r<=n),s){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(n){if(le(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:l}=n;if(l)throw l;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new yn;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(le(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!Nt())throw new tc("No browser detected.");if(t.error||t.error_description||t.error_code)throw new tc(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new wv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new tc("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new wv("No code detected.");const{data:g,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!a||!u)throw new tc("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let p=d+h;c&&(p=parseInt(c));const x=p-d;x*1e3<=Fi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${h}s`);const w=p-h;d-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,p,d):d-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,p,d);const{data:m,error:b}=await this._getUser(i);if(b)throw b;const v={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:p,refresh_token:a,token_type:u,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:v,redirectType:t.type},error:null})}catch(r){if(le(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Fs(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({error:i});const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(qN(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await Ct(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=rP(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Ti(this.storage,this.storageKey,!0));try{return await pe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(await Ct(this.storage,`${this.storageKey}-code-verifier`),le(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var a,l,c,u,d;const{data:h,error:p}=i;if(p)throw p;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await pe(this.fetch,"GET",x,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Nt()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:t.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(le(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:i}}=n;if(s)throw s;const{options:a,provider:l,token:c,access_token:u,nonce:d}=t,h=await pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Vn}),{data:p,error:x}=h;return x?this._returnResult({data:{user:null,session:null},error:x}):!p||!p.session||!p.user?this._returnResult({data:{user:null,session:null},error:new Ri}):(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),this._returnResult({data:p,error:x}))}catch(s){if(await Ct(this.storage,`${this.storageKey}-code-verifier`),le(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)throw a;return await pe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await oP(async s=>(s>0&&await aP(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await pe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Vn})),(s,i)=>{const a=200*Math.pow(2,s);return i&&Id(i)&&Date.now()+a-r<Fi})}catch(r){if(this._debug(n,"error",r),le(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Nt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Fs(this.storage,this.storageKey);if(s&&this.userStorage){let a=await Fs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await Ui(this.userStorage,this.storageKey+"-user",a)),s.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:$d()}else if(s&&!s.user&&!s.user){const a=await Fs(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await Ct(this.storage,this.storageKey+"-user"),await Ui(this.storage,this.storageKey,s)):s.user=$d()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Od;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Od}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),Id(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(s.access_token);!l&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new yn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Du;const{data:i,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!i.session)throw new yn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),le(i)){const a={data:null,error:i};return Id(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Ct(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Ui(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=jv(s);await Ui(this.storage,this.storageKey,i)}else{const s=jv(n);await Ui(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ct(this.storage,this.storageKey),await Ct(this.storage,this.storageKey+"-code-verifier"),await Ct(this.storage,this.storageKey+"-user"),this.userStorage&&await Ct(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Nt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Fi);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/Fi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Fi}ms, refresh threshold is ${xf} ticks`),s<=xf&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof D0)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Nt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await Ti(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?this._returnResult({data:null,error:i}):await pe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)return this._returnResult({data:null,error:a});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await pe(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const a=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?DP(t.webauthn.credential_response):LP(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await pe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const a=await pe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:l}=a;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:MP(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:$P(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:r},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Md(r.access_token);let a=null;i.aal&&(a=i.aal);let l=a;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await pe(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new yn})})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new yn});const a=await pe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&Nt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(le(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new yn});const a=await pe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&Nt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(le(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await pe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new yn})})}catch(t){if(le(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await pe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new yn})})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+HN>s)return r;const{data:i,error:a}=await pe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:x,error:w}=await this.getSession();if(w||!x.session)return this._returnResult({data:null,error:w});r=x.session.access_token}const{header:s,payload:i,signature:a,raw:{header:l,payload:c}}=Md(r);n!=null&&n.allowExpired||pP(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:x}=await this.getUser(r);if(x)throw x;return{data:{claims:i,header:s,signature:a},error:null}}const d=mP(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,tP(`${l}.${c}`)))throw new kf("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(r){if(le(r))return this._returnResult({data:null,error:r});throw r}}}Xo.nextInstanceID={};const qP=Xo,GP="2.88.0";let fo="";typeof Deno<"u"?fo="deno":typeof document<"u"?fo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?fo="react-native":fo="node";const QP={"X-Client-Info":`supabase-js-${fo}/${GP}`},JP={headers:QP},YP={schema:"public"},XP={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ZP={};function Zo(e){"@babel/helpers - typeof";return Zo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zo(e)}function eR(e,t){if(Zo(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Zo(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tR(e){var t=eR(e,"string");return Zo(t)=="symbol"?t:t+""}function nR(e,t,n){return(t=tR(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Av(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function lt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Av(Object(n),!0).forEach(function(r){nR(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Av(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const rR=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),sR=()=>Headers,iR=(e,t,n)=>{const r=rR(n),s=sR();return async(i,a)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,lt(lt({},a),{},{headers:u}))}};function aR(e){return e.endsWith("/")?e:e+"/"}function oR(e,t){var n,r;const{db:s,auth:i,realtime:a,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,p={db:lt(lt({},c),s),auth:lt(lt({},u),i),realtime:lt(lt({},d),a),storage:{},global:lt(lt(lt({},h),l),{},{headers:lt(lt({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}function lR(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(aR(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var cR=class extends qP{constructor(e){super(e)}},uR=class{constructor(e,t,n){var r,s;this.supabaseUrl=e,this.supabaseKey=t;const i=lR(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const a=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:YP,realtime:ZP,auth:lt(lt({},XP),{},{storageKey:a}),global:JP},c=oR(n??{},l);if(this.storageKey=(r=c.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=iR(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(lt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new WC(new URL("rest/v1",i).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new UN(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new LC(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();const{data:r}=await e.auth.getSession();return(t=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:i,flowType:a,lock:l,debug:c,throwOnError:u},d,h){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new cR({url:this.authUrl.href,headers:lt(lt({},p),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,flowType:a,lock:l,debug:c,throwOnError:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new aN(this.realtimeUrl.href,lt(lt({},e),{},{params:lt(lt({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const dR=(e,t,n)=>new uR(e,t,n);function hR(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}hR()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const wi={SUPABASE_URL:window.SUPABASE_URL||void 0||"",SUPABASE_ANON_KEY:window.SUPABASE_ANON_KEY||void 0||"",API_BASE_URL:window.API_BASE_URL||void 0||""};let nc=null;function U0(){if(nc)return nc;const{SUPABASE_URL:e,SUPABASE_ANON_KEY:t}=wi;return!e||!t?null:(nc=dR(e,t),nc)}const Kp="authToken";function qp(){return localStorage.getItem(Kp)}function po(e){e&&localStorage.setItem(Kp,e)}function ua(){localStorage.removeItem(Kp)}async function z0(){var s;const e=qp();if(e)return e;const t=U0();if(!t)return null;const{data:n}=await t.auth.getSession(),r=((s=n==null?void 0:n.session)==null?void 0:s.access_token)||null;return r&&po(r),r}async function xe(e,t={}){const{baseUrl:n,...r}=t,s=`${n??wi.API_BASE_URL}${e}`,i=new Headers(r.headers||{});!(r.body instanceof FormData)&&!i.has("Content-Type")&&i.set("Content-Type","application/json");const l=await z0();l&&!i.has("Authorization")&&i.set("Authorization",`Bearer ${l}`);const c=await fetch(s,{...r,headers:i});if(c.status===401)return ua(),window.dispatchEvent(new CustomEvent("auth:logout")),null;if(!c.ok){const d=await c.json().catch(()=>({detail:"Request failed"})),h=new Error(d.detail||d.error||`Request failed: ${c.status}`);throw h.status=c.status,h.data=d,h}return c.status===204?null:(c.headers.get("content-type")||"").includes("application/json")?c.json():c}async function Gp(e,t={}){const{baseUrl:n,...r}=t,s=`${n??wi.API_BASE_URL}${e}`,i=new Headers(r.headers||{}),a=await z0();a&&!i.has("Authorization")&&i.set("Authorization",`Bearer ${a}`);const l=await fetch(s,{...r,headers:i});if(l.status===401)return ua(),window.dispatchEvent(new CustomEvent("auth:logout")),null;if(!l.ok){const c=await l.json().catch(()=>({detail:"Request failed"})),u=new Error(c.detail||c.error||`Request failed: ${l.status}`);throw u.status=l.status,u.data=c,u}return l.blob()}const B0=f.createContext(null),Ld={system_admin:["admin","hos","sales_person"],sales_manager:["hos","sales_person"],sales_user:["sales_person"],coordinator:["coordinator"],finance:["finance"],viewer:["viewer"]},fR={"admin@mmg.com":{password:"admin123",id:"dev-admin-1",name:"Sales Admin",email:"admin@mmg.com",roles:["admin","hos","sales_person"]},"hos@mmg.com":{password:"hos123",id:"dev-hos-1",name:"Head of Sales",email:"hos@mmg.com",roles:["hos","sales_person"]},"sales@mmg.com":{password:"sales123",id:"dev-sales-1",name:"Sales Person",email:"sales@mmg.com",roles:["sales_person"]}};function Fd(e){return Array.from(new Set((e||[]).filter(Boolean).map(t=>String(t).toLowerCase())))}function Ov(e=[]){return e.map(t=>String(t||"").replaceAll(".",":"))}function pR(e){return(e||"sales_user").toLowerCase()}function Iv(e,t){var n,r,s,i,a,l,c,u,d;return((n=e==null?void 0:e.user_metadata)==null?void 0:n.full_name)||((r=e==null?void 0:e.user_metadata)==null?void 0:r.name)||((a=(i=(s=e==null?void 0:e.identities)==null?void 0:s[0])==null?void 0:i.identity_data)==null?void 0:a.full_name)||((u=(c=(l=e==null?void 0:e.identities)==null?void 0:l[0])==null?void 0:c.identity_data)==null?void 0:u.name)||((d=e==null?void 0:e.email)==null?void 0:d.split("@")[0])||t||"User"}function Nc(e,t){const n=(e==null?void 0:e.permissions)||[];if(!n.length)return!1;const r=u=>String(u||"").trim().replaceAll(".",":"),s=n.map(r),i=r(t);if(s.includes("*:*:*"))return!0;const[a,l,c]=i.split(":");return s.some(u=>{const[d,h,p]=u.split(":");return u===i?!0:(d==="*"||d===a)&&(h==="*"||h===l)&&(p==="*"||p===c||p==="manage")})}function Qp(e){var t,n,r;return((t=e==null?void 0:e.roles)==null?void 0:t.includes("admin"))||((r=(n=e==null?void 0:e.profile)==null?void 0:n.toLowerCase)==null?void 0:r.call(n))==="system_admin"||Nc(e,"*:*:*")||Nc(e,"core:*:*")||Nc(e,"core:system:admin")}function mR({children:e}){const t=U0(),n=!t&&window.location.hostname==="localhost",[r,s]=f.useState(null),[i,a]=f.useState(()=>{const g=localStorage.getItem("mmg_user")||localStorage.getItem("userData");return g?JSON.parse(g):null}),[l,c]=f.useState(!1),[u,d]=f.useState(null);f.useEffect(()=>{const g=window.location.hash;if(!g||!g.includes("error="))return;const y=new URLSearchParams(g.substring(1)),k=y.get("error"),_=y.get("error_code"),j=y.get("error_description");if(k){let E=j?decodeURIComponent(j.replace(/\+/g," ")):"Authentication failed";_==="otp_expired"?E="Email link has expired. Please sign up again to receive a new confirmation email.":_==="access_denied"&&(E="Access denied. The link may have expired or already been used."),setTimeout(()=>alert(E),300),window.history.replaceState(null,"",window.location.pathname+window.location.search)}},[]),f.useEffect(()=>{let g=null;async function y(){try{if(!t){const j=localStorage.getItem("mmg_user")||localStorage.getItem("userData");j&&a(JSON.parse(j)),c(!0);return}const{data:k}=await t.auth.getSession(),_=(k==null?void 0:k.session)||null;s(_||null),_||(ua(),a(null),localStorage.removeItem("mmg_user"),localStorage.removeItem("userData")),_!=null&&_.access_token&&po(_.access_token),_!=null&&_.access_token&&await h(_.access_token,_.user),g=t.auth.onAuthStateChange(async(j,E)=>{s(E||null),E!=null&&E.access_token?(po(E.access_token),u||await h(E.access_token,E.user)):(ua(),a(null),localStorage.removeItem("mmg_user"),localStorage.removeItem("userData"))}).data.subscription,c(!0)}catch{c(!0)}}return y(),()=>{var k;return(k=g==null?void 0:g.unsubscribe)==null?void 0:k.call(g)}},[t,u]),f.useEffect(()=>{const g=()=>{d(null),b()};return window.addEventListener("auth:logout",g),()=>window.removeEventListener("auth:logout",g)},[]);async function h(g,y=null){var k,_,j,E;try{const C=await xe("/api/base/auth/me",{headers:{Authorization:`Bearer ${g}`}});if(!C)return null;const I=pR((C==null?void 0:C.profile_name)||(C==null?void 0:C.profile)||(C==null?void 0:C.profileName)),P=Ld[I]||["sales_person"],z=(C==null?void 0:C.roles)||(C==null?void 0:C.rbac_roles)||(C==null?void 0:C.user_roles)||[],O={id:(C==null?void 0:C.id)||(y==null?void 0:y.id),email:(C==null?void 0:C.email)||(y==null?void 0:y.email),name:(C==null?void 0:C.name)||Iv(y,I),profile:I,profile_name:I,roles:Fd([...P,...z]),permissions:Ov((C==null?void 0:C.permissions)||[]),raw:C};return a(O),localStorage.setItem("mmg_user",JSON.stringify(O)),localStorage.setItem("userData",JSON.stringify(O)),d(null),O}catch(C){if((C==null?void 0:C.status)===403&&((k=C==null?void 0:C.data)!=null&&k.requiresLogout)){const I=(y==null?void 0:y.email)||(i==null?void 0:i.email)||"";return((_=C==null?void 0:C.data)==null?void 0:_.code)==="USER_PENDING_APPROVAL"?(d({pending:!0,email:I,message:((j=C==null?void 0:C.data)==null?void 0:j.error)||"Your account is pending administrator approval."}),null):(await b(),null)}if(y){const I=((E=y.user_metadata)==null?void 0:E.profile)||"sales_user",P=Ld[I]||["sales_person"],z={id:y.id,email:y.email,name:Iv(y,I),profile:I,profile_name:I,roles:Fd(P),permissions:[],raw:y};return a(z),localStorage.setItem("mmg_user",JSON.stringify(z)),localStorage.setItem("userData",JSON.stringify(z)),d(null),z}return null}}async function p(){return r!=null&&r.access_token?r.access_token:localStorage.getItem("authToken")}async function x({email:g,password:y}){var j;if(d(null),!t){if(!n)throw new Error("Supabase not configured");const E=fR[g.toLowerCase()];if(!E||E.password!==y)throw new Error("Invalid email or password");const C=E.profile||((j=E.roles)!=null&&j.includes("admin")?"system_admin":"sales_user"),I=Fd(E.roles||Ld[C]||["sales_person"]),P={id:E.id,email:E.email,name:E.name,profile:C,profile_name:C,roles:I,permissions:Ov(E.permissions||[]),raw:E},z=`dev-token-${Date.now()}`;return po(z),a(P),localStorage.setItem("mmg_user",JSON.stringify(P)),localStorage.setItem("userData",JSON.stringify(P)),P}const{data:k,error:_}=await t.auth.signInWithPassword({email:g,password:y});if(_)throw _;return po(k.session.access_token),await h(k.session.access_token,k.session.user),k}async function w(){if(!t)throw new Error("Supabase not configured. Please contact your administrator.");const g=gR(),{data:y,error:k}=await t.auth.signInWithOAuth({provider:"azure",options:{scopes:"email profile openid",redirectTo:g}});if(k)throw k;return y}async function m({token:g,email:y,password:k,fullName:_}){var I;if(!t)throw new Error("Supabase not configured");const j=await xe("/api/base/auth/validate-invite",{method:"POST",body:JSON.stringify({token:g,email:y})}),{data:E,error:C}=await t.auth.signUp({email:y,password:k,options:{data:{full_name:_,profile:(j==null?void 0:j.profile_name)||"sales_user"}}});if(C)throw C;return await xe("/api/base/auth/consume-invite",{method:"POST",body:JSON.stringify({token:g,email:y,supabase_user_id:(I=E==null?void 0:E.user)==null?void 0:I.id,profile_name:j==null?void 0:j.profile_name,name:_})}),E}async function b(){try{t&&await t.auth.signOut()}finally{ua(),s(null),a(null),d(null),localStorage.removeItem("mmg_user"),localStorage.removeItem("userData"),sessionStorage.removeItem("msSsoPending")}}const v=f.useMemo(()=>({authReady:l,user:i,session:r,pendingAccess:u,getAccessToken:p,signInWithPassword:x,signInWithMicrosoft:w,signUpWithInvite:m,refreshProfile:h,logout:b}),[l,i,r,u]);return o.jsx(B0.Provider,{value:v,children:e})}function js(){const e=f.useContext(B0);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}function gR(){const e=`${window.location.protocol}//${window.location.host}`,t=window.SUPABASE_REDIRECT_URL||void 0||"";return window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?`${e}/auth/callback`:`${(t||e).replace(/\/$/,"")}/auth/callback`}function vR(){const{signInWithPassword:e,signInWithMicrosoft:t,signUpWithInvite:n}=js(),r=Fa(),s=La(),i=f.useMemo(()=>{var O;return((O=s.state)==null?void 0:O.from)||"/app/chat"},[s.state]),[a,l]=f.useState("signin"),[c,u]=f.useState("admin@mmg.com"),[d,h]=f.useState("admin123"),[p,x]=f.useState(!1),[w,m]=f.useState(""),[b,v]=f.useState(!1),[g,y]=f.useState(""),[k,_]=f.useState(""),[j,E]=f.useState(""),{user:C,authReady:I}=js();f.useEffect(()=>{I&&C&&r(i,{replace:!0})},[I,C,i,r]);async function P(O){O.preventDefault(),m("");try{await e({email:c,password:d}),r(i,{replace:!0})}catch(D){m((D==null?void 0:D.message)||"Login failed")}}async function z(){if(!b){m("");try{v(!0),sessionStorage.setItem("postAuthRedirect",i||"/app/chat"),await new Promise(O=>requestAnimationFrame(O)),await t()}catch(O){m((O==null?void 0:O.message)||"SSO failed"),v(!1)}}}return o.jsxs("div",{className:"min-h-screen grid place-items-center px-4",children:[o.jsx("div",{className:"mmg-particle one"}),o.jsx("div",{className:"mmg-particle two"}),o.jsx("div",{className:"mmg-particle three"}),o.jsx("div",{className:"w-full max-w-[440px] space-y-3",children:o.jsxs(Ot,{children:[o.jsxs(Qt,{className:"text-center",children:[o.jsx("div",{className:"flex items-center justify-center mb-5",children:o.jsx(Up,{size:96})}),o.jsx("p",{className:"text-sm text-black/60 dark:text-white/65",children:"Sign in to continue to your workspace"})]}),o.jsx(Jt,{children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("form",{className:"space-y-3",onSubmit:P,children:[o.jsx(he,{label:"Email",withGap:!1,labelClassName:"mb-1",children:o.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-4 py-2 text-sm outline-none focus:ring-2 focus:ring-black/10 dark:focus:ring-white/15",type:"email",autoComplete:"email",value:c,onChange:O=>u(O.target.value),placeholder:"you@email.com",required:!0})}),o.jsx(he,{label:"Password",withGap:!1,labelClassName:"mb-1",children:o.jsxs("div",{className:"relative",children:[o.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-4 py-2 pr-12 text-sm outline-none focus:ring-2 focus:ring-black/10 dark:focus:ring-white/15",type:p?"text":"password",autoComplete:"current-password",value:d,onChange:O=>h(O.target.value),placeholder:"Enter your password",required:!0}),o.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2 opacity-70 hover:opacity-100",onClick:()=>x(O=>!O),"aria-label":"Toggle password",children:p?o.jsx(RE,{size:18}):o.jsx(Dp,{size:18})})]})}),w?o.jsx("div",{className:"text-sm text-red-700 rounded-2xl px-4 py-2 bg-black/5 dark:bg-white/10",children:w}):null,o.jsx(Z,{className:"w-full",size:"lg",type:"submit",children:"Sign In"}),o.jsxs("p",{className:"text-xs text-black/55 dark:text-white/60",children:["Dev mode: ",o.jsx("code",{className:"font-mono",children:"admin@mmg.com"})," /"," ",o.jsx("code",{className:"font-mono",children:"admin123"})]})]}),o.jsx("div",{className:"h-px bg-black/5 dark:bg-white/10"}),o.jsx(Z,{variant:"secondary",size:"lg",className:"w-full justify-center gap-2",onClick:z,disabled:b,children:b?o.jsx(o.Fragment,{children:o.jsx(Ee,{text:"Signing you in"})}):o.jsxs(o.Fragment,{children:[o.jsx(TE,{size:18}),"Sign in with Microsoft"]})}),o.jsx(Z,{variant:"ghost",className:"w-full",onClick:()=>r("/"),children:"Cancel"})]})})]})})]})}function W0({email:e,message:t,onSignOut:n}){return o.jsx("div",{className:"min-h-screen grid place-items-center px-4",children:o.jsxs("div",{className:"w-full max-w-[520px] space-y-4 rounded-2xl bg-white/60 dark:bg-white/5 backdrop-blur-md shadow-soft ring-1 ring-black/5 dark:ring-white/10 p-6 text-center",children:[o.jsx("div",{className:"text-2xl font-semibold",children:"Access Pending"}),o.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:t||"Your account is pending administrator approval."}),e?o.jsxs("div",{className:"text-xs text-black/55 dark:text-white/60",children:["Signed in as ",o.jsx("strong",{children:e})]}):null,o.jsx("div",{className:"flex justify-center pt-2",children:o.jsx(Z,{variant:"secondary",onClick:n,children:"Sign Out"})})]})})}function yR(){const e=Fa(),{authReady:t,session:n,user:r,pendingAccess:s,logout:i}=js();return f.useEffect(()=>{if(t&&!n){e("/login",{replace:!0});return}if(t&&n&&r){const a=sessionStorage.getItem("postAuthRedirect")||"/app/chat";sessionStorage.removeItem("postAuthRedirect"),e(a,{replace:!0})}},[t,n,r,e]),t&&s?o.jsx(W0,{email:s.email,message:s.message,onSignOut:i}):o.jsx("div",{className:"min-h-screen grid place-items-center px-4",children:o.jsx("div",{className:"rounded-2xl bg-white/55 dark:bg-white/5 backdrop-blur-md shadow-soft ring-1 ring-black/5 dark:ring-white/10 px-5 py-4 text-sm",children:o.jsx(Ee,{text:"Loading"})})})}function V0(){const{theme:e,setTheme:t}=Dj(),n=e==="dark";return o.jsx(Z,{variant:"ghost",size:"icon","aria-label":"Toggle theme",onClick:()=>t(n?"light":"dark"),title:"Toggle theme",className:"rounded-2xl",children:n?o.jsx(zE,{size:18}):o.jsx(ME,{size:18})})}function Pe(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function xl(e,t=[]){let n=[];function r(i,a){const l=f.createContext(a),c=n.length;n=[...n,a];const u=h=>{var v;const{scope:p,children:x,...w}=h,m=((v=p==null?void 0:p[e])==null?void 0:v[c])||l,b=f.useMemo(()=>w,Object.values(w));return o.jsx(m.Provider,{value:b,children:x})};u.displayName=i+"Provider";function d(h,p){var m;const x=((m=p==null?void 0:p[e])==null?void 0:m[c])||l,w=f.useContext(x);if(w)return w;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const s=()=>{const i=n.map(a=>f.createContext(a));return function(l){const c=(l==null?void 0:l[e])||i;return f.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[r,xR(s,...t)]}function xR(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((l,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...l,...h}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}var Es=globalThis!=null&&globalThis.document?f.useLayoutEffect:()=>{},wR=xu[" useInsertionEffect ".trim().toString()]||Es;function H0({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,i,a]=bR({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:s;{const d=f.useRef(e!==void 0);f.useEffect(()=>{const h=d.current;h!==l&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,r])}const u=f.useCallback(d=>{var h;if(l){const p=kR(d)?d(e):d;p!==e&&((h=a.current)==null||h.call(a,p))}else i(d)},[l,e,i,a]);return[c,u]}function bR({defaultProp:e,onChange:t}){const[n,r]=f.useState(e),s=f.useRef(n),i=f.useRef(t);return wR(()=>{i.current=t},[t]),f.useEffect(()=>{var a;s.current!==n&&((a=i.current)==null||a.call(i,n),s.current=n)},[n,s]),[n,r,i]}function kR(e){return typeof e=="function"}function _R(e){const t=SR(e),n=f.forwardRef((r,s)=>{const{children:i,...a}=r,l=f.Children.toArray(i),c=l.find(ER);if(c){const u=c.props.children,d=l.map(h=>h===c?f.Children.count(u)>1?f.Children.only(null):f.isValidElement(u)?u.props.children:null:h);return o.jsx(t,{...a,ref:s,children:f.isValidElement(u)?f.cloneElement(u,void 0,d):null})}return o.jsx(t,{...a,ref:s,children:i})});return n.displayName=`${e}.Slot`,n}function SR(e){const t=f.forwardRef((n,r)=>{const{children:s,...i}=n;if(f.isValidElement(s)){const a=NR(s),l=CR(i,s.props);return s.type!==f.Fragment&&(l.ref=r?xi(r,a):a),f.cloneElement(s,l)}return f.Children.count(s)>1?f.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var jR=Symbol("radix.slottable");function ER(e){return f.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===jR}function CR(e,t){const n={...t};for(const r in t){const s=e[r],i=t[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function NR(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var PR=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Yt=PR.reduce((e,t)=>{const n=_R(`Primitive.${t}`),r=f.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function K0(e,t){e&&pl.flushSync(()=>e.dispatchEvent(t))}function Mv(e){const t=RR(e),n=f.forwardRef((r,s)=>{const{children:i,...a}=r,l=f.Children.toArray(i),c=l.find(AR);if(c){const u=c.props.children,d=l.map(h=>h===c?f.Children.count(u)>1?f.Children.only(null):f.isValidElement(u)?u.props.children:null:h);return o.jsx(t,{...a,ref:s,children:f.isValidElement(u)?f.cloneElement(u,void 0,d):null})}return o.jsx(t,{...a,ref:s,children:i})});return n.displayName=`${e}.Slot`,n}function RR(e){const t=f.forwardRef((n,r)=>{const{children:s,...i}=n;if(f.isValidElement(s)){const a=IR(s),l=OR(i,s.props);return s.type!==f.Fragment&&(l.ref=r?xi(r,a):a),f.cloneElement(s,l)}return f.Children.count(s)>1?f.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var TR=Symbol("radix.slottable");function AR(e){return f.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===TR}function OR(e,t){const n={...t};for(const r in t){const s=e[r],i=t[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function IR(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function q0(e){const t=e+"CollectionProvider",[n,r]=xl(t),[s,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=m=>{const{scope:b,children:v}=m,g=Dt.useRef(null),y=Dt.useRef(new Map).current;return o.jsx(s,{scope:b,itemMap:y,collectionRef:g,children:v})};a.displayName=t;const l=e+"CollectionSlot",c=Mv(l),u=Dt.forwardRef((m,b)=>{const{scope:v,children:g}=m,y=i(l,v),k=dn(b,y.collectionRef);return o.jsx(c,{ref:k,children:g})});u.displayName=l;const d=e+"CollectionItemSlot",h="data-radix-collection-item",p=Mv(d),x=Dt.forwardRef((m,b)=>{const{scope:v,children:g,...y}=m,k=Dt.useRef(null),_=dn(b,k),j=i(d,v);return Dt.useEffect(()=>(j.itemMap.set(k,{ref:k,...y}),()=>void j.itemMap.delete(k))),o.jsx(p,{[h]:"",ref:_,children:g})});x.displayName=d;function w(m){const b=i(e+"CollectionConsumer",m);return Dt.useCallback(()=>{const g=b.collectionRef.current;if(!g)return[];const y=Array.from(g.querySelectorAll(`[${h}]`));return Array.from(b.itemMap.values()).sort((j,E)=>y.indexOf(j.ref.current)-y.indexOf(E.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:a,Slot:u,ItemSlot:x},w,r]}var MR=f.createContext(void 0);function G0(e){const t=f.useContext(MR);return e||t||"ltr"}function Lr(e){const t=f.useRef(e);return f.useEffect(()=>{t.current=e}),f.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function $R(e,t=globalThis==null?void 0:globalThis.document){const n=Lr(e);f.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var DR="DismissableLayer",_f="dismissableLayer.update",LR="dismissableLayer.pointerDownOutside",FR="dismissableLayer.focusOutside",$v,Q0=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),J0=f.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=e,u=f.useContext(Q0),[d,h]=f.useState(null),p=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,x]=f.useState({}),w=dn(t,E=>h(E)),m=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=m.indexOf(b),g=d?m.indexOf(d):-1,y=u.layersWithOutsidePointerEventsDisabled.size>0,k=g>=v,_=BR(E=>{const C=E.target,I=[...u.branches].some(P=>P.contains(C));!k||I||(s==null||s(E),a==null||a(E),E.defaultPrevented||l==null||l())},p),j=WR(E=>{const C=E.target;[...u.branches].some(P=>P.contains(C))||(i==null||i(E),a==null||a(E),E.defaultPrevented||l==null||l())},p);return $R(E=>{g===u.layers.size-1&&(r==null||r(E),!E.defaultPrevented&&l&&(E.preventDefault(),l()))},p),f.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&($v=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),Dv(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=$v)}},[d,p,n,u]),f.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),Dv())},[d,u]),f.useEffect(()=>{const E=()=>x({});return document.addEventListener(_f,E),()=>document.removeEventListener(_f,E)},[]),o.jsx(Yt.div,{...c,ref:w,style:{pointerEvents:y?k?"auto":"none":void 0,...e.style},onFocusCapture:Pe(e.onFocusCapture,j.onFocusCapture),onBlurCapture:Pe(e.onBlurCapture,j.onBlurCapture),onPointerDownCapture:Pe(e.onPointerDownCapture,_.onPointerDownCapture)})});J0.displayName=DR;var UR="DismissableLayerBranch",zR=f.forwardRef((e,t)=>{const n=f.useContext(Q0),r=f.useRef(null),s=dn(t,r);return f.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),o.jsx(Yt.div,{...e,ref:s})});zR.displayName=UR;function BR(e,t=globalThis==null?void 0:globalThis.document){const n=Lr(e),r=f.useRef(!1),s=f.useRef(()=>{});return f.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){Y0(LR,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function WR(e,t=globalThis==null?void 0:globalThis.document){const n=Lr(e),r=f.useRef(!1);return f.useEffect(()=>{const s=i=>{i.target&&!r.current&&Y0(FR,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Dv(){const e=new CustomEvent(_f);document.dispatchEvent(e)}function Y0(e,t,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?K0(s,i):s.dispatchEvent(i)}var Ud=0;function VR(){f.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Lv()),document.body.insertAdjacentElement("beforeend",e[1]??Lv()),Ud++,()=>{Ud===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Ud--}},[])}function Lv(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var zd="focusScope.autoFocusOnMount",Bd="focusScope.autoFocusOnUnmount",Fv={bubbles:!1,cancelable:!0},HR="FocusScope",X0=f.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=e,[l,c]=f.useState(null),u=Lr(s),d=Lr(i),h=f.useRef(null),p=dn(t,m=>c(m)),x=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(r){let m=function(y){if(x.paused||!l)return;const k=y.target;l.contains(k)?h.current=k:Gr(h.current,{select:!0})},b=function(y){if(x.paused||!l)return;const k=y.relatedTarget;k!==null&&(l.contains(k)||Gr(h.current,{select:!0}))},v=function(y){if(document.activeElement===document.body)for(const _ of y)_.removedNodes.length>0&&Gr(l)};document.addEventListener("focusin",m),document.addEventListener("focusout",b);const g=new MutationObserver(v);return l&&g.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",b),g.disconnect()}}},[r,l,x.paused]),f.useEffect(()=>{if(l){zv.add(x);const m=document.activeElement;if(!l.contains(m)){const v=new CustomEvent(zd,Fv);l.addEventListener(zd,u),l.dispatchEvent(v),v.defaultPrevented||(KR(YR(Z0(l)),{select:!0}),document.activeElement===m&&Gr(l))}return()=>{l.removeEventListener(zd,u),setTimeout(()=>{const v=new CustomEvent(Bd,Fv);l.addEventListener(Bd,d),l.dispatchEvent(v),v.defaultPrevented||Gr(m??document.body,{select:!0}),l.removeEventListener(Bd,d),zv.remove(x)},0)}}},[l,u,d,x]);const w=f.useCallback(m=>{if(!n&&!r||x.paused)return;const b=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,v=document.activeElement;if(b&&v){const g=m.currentTarget,[y,k]=qR(g);y&&k?!m.shiftKey&&v===k?(m.preventDefault(),n&&Gr(y,{select:!0})):m.shiftKey&&v===y&&(m.preventDefault(),n&&Gr(k,{select:!0})):v===g&&m.preventDefault()}},[n,r,x.paused]);return o.jsx(Yt.div,{tabIndex:-1,...a,ref:p,onKeyDown:w})});X0.displayName=HR;function KR(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Gr(r,{select:t}),document.activeElement!==n)return}function qR(e){const t=Z0(e),n=Uv(t,e),r=Uv(t.reverse(),e);return[n,r]}function Z0(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Uv(e,t){for(const n of e)if(!GR(n,{upTo:t}))return n}function GR(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function QR(e){return e instanceof HTMLInputElement&&"select"in e}function Gr(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&QR(e)&&t&&e.select()}}var zv=JR();function JR(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=Bv(e,t),e.unshift(t)},remove(t){var n;e=Bv(e,t),(n=e[0])==null||n.resume()}}}function Bv(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function YR(e){return e.filter(t=>t.tagName!=="A")}var XR=xu[" useId ".trim().toString()]||(()=>{}),ZR=0;function Sf(e){const[t,n]=f.useState(XR());return Es(()=>{n(r=>r??String(ZR++))},[e]),t?`radix-${t}`:""}const eT=["top","right","bottom","left"],Cs=Math.min,wn=Math.max,du=Math.round,rc=Math.floor,vr=e=>({x:e,y:e}),tT={left:"right",right:"left",bottom:"top",top:"bottom"},nT={start:"end",end:"start"};function jf(e,t,n){return wn(e,Cs(t,n))}function Fr(e,t){return typeof e=="function"?e(t):e}function Ur(e){return e.split("-")[0]}function Wa(e){return e.split("-")[1]}function Jp(e){return e==="x"?"y":"x"}function Yp(e){return e==="y"?"height":"width"}const rT=new Set(["top","bottom"]);function pr(e){return rT.has(Ur(e))?"y":"x"}function Xp(e){return Jp(pr(e))}function sT(e,t,n){n===void 0&&(n=!1);const r=Wa(e),s=Xp(e),i=Yp(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(a=hu(a)),[a,hu(a)]}function iT(e){const t=hu(e);return[Ef(e),t,Ef(t)]}function Ef(e){return e.replace(/start|end/g,t=>nT[t])}const Wv=["left","right"],Vv=["right","left"],aT=["top","bottom"],oT=["bottom","top"];function lT(e,t,n){switch(e){case"top":case"bottom":return n?t?Vv:Wv:t?Wv:Vv;case"left":case"right":return t?aT:oT;default:return[]}}function cT(e,t,n,r){const s=Wa(e);let i=lT(Ur(e),n==="start",r);return s&&(i=i.map(a=>a+"-"+s),t&&(i=i.concat(i.map(Ef)))),i}function hu(e){return e.replace(/left|right|bottom|top/g,t=>tT[t])}function uT(e){return{top:0,right:0,bottom:0,left:0,...e}}function eb(e){return typeof e!="number"?uT(e):{top:e,right:e,bottom:e,left:e}}function fu(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function Hv(e,t,n){let{reference:r,floating:s}=e;const i=pr(t),a=Xp(t),l=Yp(a),c=Ur(t),u=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,p=r[l]/2-s[l]/2;let x;switch(c){case"top":x={x:d,y:r.y-s.height};break;case"bottom":x={x:d,y:r.y+r.height};break;case"right":x={x:r.x+r.width,y:h};break;case"left":x={x:r.x-s.width,y:h};break;default:x={x:r.x,y:r.y}}switch(Wa(t)){case"start":x[a]-=p*(n&&u?-1:1);break;case"end":x[a]+=p*(n&&u?-1:1);break}return x}const dT=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=n,l=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:h}=Hv(u,r,c),p=r,x={},w=0;for(let m=0;m<l.length;m++){const{name:b,fn:v}=l[m],{x:g,y,data:k,reset:_}=await v({x:d,y:h,initialPlacement:r,placement:p,strategy:s,middlewareData:x,rects:u,platform:a,elements:{reference:e,floating:t}});d=g??d,h=y??h,x={...x,[b]:{...x[b],...k}},_&&w<=50&&(w++,typeof _=="object"&&(_.placement&&(p=_.placement),_.rects&&(u=_.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:s}):_.rects),{x:d,y:h}=Hv(u,p,c)),m=-1)}return{x:d,y:h,placement:p,strategy:s,middlewareData:x}};async function el(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:i,rects:a,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:p=!1,padding:x=0}=Fr(t,e),w=eb(x),b=l[p?h==="floating"?"reference":"floating":h],v=fu(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(b)))==null||n?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),g=h==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,y=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),k=await(i.isElement==null?void 0:i.isElement(y))?await(i.getScale==null?void 0:i.getScale(y))||{x:1,y:1}:{x:1,y:1},_=fu(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:g,offsetParent:y,strategy:c}):g);return{top:(v.top-_.top+w.top)/k.y,bottom:(_.bottom-v.bottom+w.bottom)/k.y,left:(v.left-_.left+w.left)/k.x,right:(_.right-v.right+w.right)/k.x}}const hT=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:i,platform:a,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=Fr(e,t)||{};if(u==null)return{};const h=eb(d),p={x:n,y:r},x=Xp(s),w=Yp(x),m=await a.getDimensions(u),b=x==="y",v=b?"top":"left",g=b?"bottom":"right",y=b?"clientHeight":"clientWidth",k=i.reference[w]+i.reference[x]-p[x]-i.floating[w],_=p[x]-i.reference[x],j=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let E=j?j[y]:0;(!E||!await(a.isElement==null?void 0:a.isElement(j)))&&(E=l.floating[y]||i.floating[w]);const C=k/2-_/2,I=E/2-m[w]/2-1,P=Cs(h[v],I),z=Cs(h[g],I),O=P,D=E-m[w]-z,B=E/2-m[w]/2+C,A=jf(O,B,D),L=!c.arrow&&Wa(s)!=null&&B!==A&&i.reference[w]/2-(B<O?P:z)-m[w]/2<0,q=L?B<O?B-O:B-D:0;return{[x]:p[x]+q,data:{[x]:A,centerOffset:B-A-q,...L&&{alignmentOffset:q}},reset:L}}}),fT=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:i,rects:a,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:m=!0,...b}=Fr(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const v=Ur(s),g=pr(l),y=Ur(l)===l,k=await(c.isRTL==null?void 0:c.isRTL(u.floating)),_=p||(y||!m?[hu(l)]:iT(l)),j=w!=="none";!p&&j&&_.push(...cT(l,m,w,k));const E=[l,..._],C=await el(t,b),I=[];let P=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&I.push(C[v]),h){const B=sT(s,a,k);I.push(C[B[0]],C[B[1]])}if(P=[...P,{placement:s,overflows:I}],!I.every(B=>B<=0)){var z,O;const B=(((z=i.flip)==null?void 0:z.index)||0)+1,A=E[B];if(A&&(!(h==="alignment"?g!==pr(A):!1)||P.every(N=>pr(N.placement)===g?N.overflows[0]>0:!0)))return{data:{index:B,overflows:P},reset:{placement:A}};let L=(O=P.filter(q=>q.overflows[0]<=0).sort((q,N)=>q.overflows[1]-N.overflows[1])[0])==null?void 0:O.placement;if(!L)switch(x){case"bestFit":{var D;const q=(D=P.filter(N=>{if(j){const S=pr(N.placement);return S===g||S==="y"}return!0}).map(N=>[N.placement,N.overflows.filter(S=>S>0).reduce((S,U)=>S+U,0)]).sort((N,S)=>N[1]-S[1])[0])==null?void 0:D[0];q&&(L=q);break}case"initialPlacement":L=l;break}if(s!==L)return{reset:{placement:L}}}return{}}}};function Kv(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function qv(e){return eT.some(t=>e[t]>=0)}const pT=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=Fr(e,t);switch(r){case"referenceHidden":{const i=await el(t,{...s,elementContext:"reference"}),a=Kv(i,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:qv(a)}}}case"escaped":{const i=await el(t,{...s,altBoundary:!0}),a=Kv(i,n.floating);return{data:{escapedOffsets:a,escaped:qv(a)}}}default:return{}}}}},tb=new Set(["left","top"]);async function mT(e,t){const{placement:n,platform:r,elements:s}=e,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=Ur(n),l=Wa(n),c=pr(n)==="y",u=tb.has(a)?-1:1,d=i&&c?-1:1,h=Fr(t,e);let{mainAxis:p,crossAxis:x,alignmentAxis:w}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof w=="number"&&(x=l==="end"?w*-1:w),c?{x:x*d,y:p*u}:{x:p*u,y:x*d}}const gT=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:i,placement:a,middlewareData:l}=t,c=await mT(t,e);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:a}}}}},vT=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:b=>{let{x:v,y:g}=b;return{x:v,y:g}}},...c}=Fr(e,t),u={x:n,y:r},d=await el(t,c),h=pr(Ur(s)),p=Jp(h);let x=u[p],w=u[h];if(i){const b=p==="y"?"top":"left",v=p==="y"?"bottom":"right",g=x+d[b],y=x-d[v];x=jf(g,x,y)}if(a){const b=h==="y"?"top":"left",v=h==="y"?"bottom":"right",g=w+d[b],y=w-d[v];w=jf(g,w,y)}const m=l.fn({...t,[p]:x,[h]:w});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[p]:i,[h]:a}}}}}},yT=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:i,middlewareData:a}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Fr(e,t),d={x:n,y:r},h=pr(s),p=Jp(h);let x=d[p],w=d[h];const m=Fr(l,t),b=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(c){const y=p==="y"?"height":"width",k=i.reference[p]-i.floating[y]+b.mainAxis,_=i.reference[p]+i.reference[y]-b.mainAxis;x<k?x=k:x>_&&(x=_)}if(u){var v,g;const y=p==="y"?"width":"height",k=tb.has(Ur(s)),_=i.reference[h]-i.floating[y]+(k&&((v=a.offset)==null?void 0:v[h])||0)+(k?0:b.crossAxis),j=i.reference[h]+i.reference[y]+(k?0:((g=a.offset)==null?void 0:g[h])||0)-(k?b.crossAxis:0);w<_?w=_:w>j&&(w=j)}return{[p]:x,[h]:w}}}},xT=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:i,platform:a,elements:l}=t,{apply:c=()=>{},...u}=Fr(e,t),d=await el(t,u),h=Ur(s),p=Wa(s),x=pr(s)==="y",{width:w,height:m}=i.floating;let b,v;h==="top"||h==="bottom"?(b=h,v=p===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(v=h,b=p==="end"?"top":"bottom");const g=m-d.top-d.bottom,y=w-d.left-d.right,k=Cs(m-d[b],g),_=Cs(w-d[v],y),j=!t.middlewareData.shift;let E=k,C=_;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(C=y),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(E=g),j&&!p){const P=wn(d.left,0),z=wn(d.right,0),O=wn(d.top,0),D=wn(d.bottom,0);x?C=w-2*(P!==0||z!==0?P+z:wn(d.left,d.right)):E=m-2*(O!==0||D!==0?O+D:wn(d.top,d.bottom))}await c({...t,availableWidth:C,availableHeight:E});const I=await a.getDimensions(l.floating);return w!==I.width||m!==I.height?{reset:{rects:!0}}:{}}}};function Lu(){return typeof window<"u"}function Va(e){return nb(e)?(e.nodeName||"").toLowerCase():"#document"}function jn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function xr(e){var t;return(t=(nb(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function nb(e){return Lu()?e instanceof Node||e instanceof jn(e).Node:!1}function tr(e){return Lu()?e instanceof Element||e instanceof jn(e).Element:!1}function yr(e){return Lu()?e instanceof HTMLElement||e instanceof jn(e).HTMLElement:!1}function Gv(e){return!Lu()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof jn(e).ShadowRoot}const wT=new Set(["inline","contents"]);function wl(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=nr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!wT.has(s)}const bT=new Set(["table","td","th"]);function kT(e){return bT.has(Va(e))}const _T=[":popover-open",":modal"];function Fu(e){return _T.some(t=>{try{return e.matches(t)}catch{return!1}})}const ST=["transform","translate","scale","rotate","perspective"],jT=["transform","translate","scale","rotate","perspective","filter"],ET=["paint","layout","strict","content"];function Zp(e){const t=em(),n=tr(e)?nr(e):e;return ST.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||jT.some(r=>(n.willChange||"").includes(r))||ET.some(r=>(n.contain||"").includes(r))}function CT(e){let t=Ns(e);for(;yr(t)&&!Oa(t);){if(Zp(t))return t;if(Fu(t))return null;t=Ns(t)}return null}function em(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const NT=new Set(["html","body","#document"]);function Oa(e){return NT.has(Va(e))}function nr(e){return jn(e).getComputedStyle(e)}function Uu(e){return tr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ns(e){if(Va(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Gv(e)&&e.host||xr(e);return Gv(t)?t.host:t}function rb(e){const t=Ns(e);return Oa(t)?e.ownerDocument?e.ownerDocument.body:e.body:yr(t)&&wl(t)?t:rb(t)}function tl(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=rb(e),i=s===((r=e.ownerDocument)==null?void 0:r.body),a=jn(s);if(i){const l=Cf(a);return t.concat(a,a.visualViewport||[],wl(s)?s:[],l&&n?tl(l):[])}return t.concat(s,tl(s,[],n))}function Cf(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function sb(e){const t=nr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=yr(e),i=s?e.offsetWidth:n,a=s?e.offsetHeight:r,l=du(n)!==i||du(r)!==a;return l&&(n=i,r=a),{width:n,height:r,$:l}}function tm(e){return tr(e)?e:e.contextElement}function da(e){const t=tm(e);if(!yr(t))return vr(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:i}=sb(t);let a=(i?du(n.width):n.width)/r,l=(i?du(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const PT=vr(0);function ib(e){const t=jn(e);return!em()||!t.visualViewport?PT:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function RT(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==jn(e)?!1:t}function gi(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),i=tm(e);let a=vr(1);t&&(r?tr(r)&&(a=da(r)):a=da(e));const l=RT(i,n,r)?ib(i):vr(0);let c=(s.left+l.x)/a.x,u=(s.top+l.y)/a.y,d=s.width/a.x,h=s.height/a.y;if(i){const p=jn(i),x=r&&tr(r)?jn(r):r;let w=p,m=Cf(w);for(;m&&r&&x!==w;){const b=da(m),v=m.getBoundingClientRect(),g=nr(m),y=v.left+(m.clientLeft+parseFloat(g.paddingLeft))*b.x,k=v.top+(m.clientTop+parseFloat(g.paddingTop))*b.y;c*=b.x,u*=b.y,d*=b.x,h*=b.y,c+=y,u+=k,w=jn(m),m=Cf(w)}}return fu({width:d,height:h,x:c,y:u})}function zu(e,t){const n=Uu(e).scrollLeft;return t?t.left+n:gi(xr(e)).left+n}function ab(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-zu(e,n),s=n.top+t.scrollTop;return{x:r,y:s}}function TT(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const i=s==="fixed",a=xr(r),l=t?Fu(t.floating):!1;if(r===a||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=vr(1);const d=vr(0),h=yr(r);if((h||!h&&!i)&&((Va(r)!=="body"||wl(a))&&(c=Uu(r)),yr(r))){const x=gi(r);u=da(r),d.x=x.x+r.clientLeft,d.y=x.y+r.clientTop}const p=a&&!h&&!i?ab(a,c):vr(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+p.x,y:n.y*u.y-c.scrollTop*u.y+d.y+p.y}}function AT(e){return Array.from(e.getClientRects())}function OT(e){const t=xr(e),n=Uu(e),r=e.ownerDocument.body,s=wn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=wn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+zu(e);const l=-n.scrollTop;return nr(r).direction==="rtl"&&(a+=wn(t.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:l}}const Qv=25;function IT(e,t){const n=jn(e),r=xr(e),s=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,l=0,c=0;if(s){i=s.width,a=s.height;const d=em();(!d||d&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}const u=zu(r);if(u<=0){const d=r.ownerDocument,h=d.body,p=getComputedStyle(h),x=d.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,w=Math.abs(r.clientWidth-h.clientWidth-x);w<=Qv&&(i-=w)}else u<=Qv&&(i+=u);return{width:i,height:a,x:l,y:c}}const MT=new Set(["absolute","fixed"]);function $T(e,t){const n=gi(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,i=yr(e)?da(e):vr(1),a=e.clientWidth*i.x,l=e.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:a,height:l,x:c,y:u}}function Jv(e,t,n){let r;if(t==="viewport")r=IT(e,n);else if(t==="document")r=OT(xr(e));else if(tr(t))r=$T(t,n);else{const s=ib(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return fu(r)}function ob(e,t){const n=Ns(e);return n===t||!tr(n)||Oa(n)?!1:nr(n).position==="fixed"||ob(n,t)}function DT(e,t){const n=t.get(e);if(n)return n;let r=tl(e,[],!1).filter(l=>tr(l)&&Va(l)!=="body"),s=null;const i=nr(e).position==="fixed";let a=i?Ns(e):e;for(;tr(a)&&!Oa(a);){const l=nr(a),c=Zp(a);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&MT.has(s.position)||wl(a)&&!c&&ob(e,a))?r=r.filter(d=>d!==a):s=l,a=Ns(a)}return t.set(e,r),r}function LT(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const a=[...n==="clippingAncestors"?Fu(t)?[]:DT(t,this._c):[].concat(n),r],l=a[0],c=a.reduce((u,d)=>{const h=Jv(t,d,s);return u.top=wn(h.top,u.top),u.right=Cs(h.right,u.right),u.bottom=Cs(h.bottom,u.bottom),u.left=wn(h.left,u.left),u},Jv(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function FT(e){const{width:t,height:n}=sb(e);return{width:t,height:n}}function UT(e,t,n){const r=yr(t),s=xr(t),i=n==="fixed",a=gi(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=vr(0);function u(){c.x=zu(s)}if(r||!r&&!i)if((Va(t)!=="body"||wl(s))&&(l=Uu(t)),r){const x=gi(t,!0,i,t);c.x=x.x+t.clientLeft,c.y=x.y+t.clientTop}else s&&u();i&&!r&&s&&u();const d=s&&!r&&!i?ab(s,l):vr(0),h=a.left+l.scrollLeft-c.x-d.x,p=a.top+l.scrollTop-c.y-d.y;return{x:h,y:p,width:a.width,height:a.height}}function Wd(e){return nr(e).position==="static"}function Yv(e,t){if(!yr(e)||nr(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return xr(e)===n&&(n=n.ownerDocument.body),n}function lb(e,t){const n=jn(e);if(Fu(e))return n;if(!yr(e)){let s=Ns(e);for(;s&&!Oa(s);){if(tr(s)&&!Wd(s))return s;s=Ns(s)}return n}let r=Yv(e,t);for(;r&&kT(r)&&Wd(r);)r=Yv(r,t);return r&&Oa(r)&&Wd(r)&&!Zp(r)?n:r||CT(e)||n}const zT=async function(e){const t=this.getOffsetParent||lb,n=this.getDimensions,r=await n(e.floating);return{reference:UT(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function BT(e){return nr(e).direction==="rtl"}const WT={convertOffsetParentRelativeRectToViewportRelativeRect:TT,getDocumentElement:xr,getClippingRect:LT,getOffsetParent:lb,getElementRects:zT,getClientRects:AT,getDimensions:FT,getScale:da,isElement:tr,isRTL:BT};function cb(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function VT(e,t){let n=null,r;const s=xr(e);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:d,top:h,width:p,height:x}=u;if(l||t(),!p||!x)return;const w=rc(h),m=rc(s.clientWidth-(d+p)),b=rc(s.clientHeight-(h+x)),v=rc(d),y={rootMargin:-w+"px "+-m+"px "+-b+"px "+-v+"px",threshold:wn(0,Cs(1,c))||1};let k=!0;function _(j){const E=j[0].intersectionRatio;if(E!==c){if(!k)return a();E?a(!1,E):r=setTimeout(()=>{a(!1,1e-7)},1e3)}E===1&&!cb(u,e.getBoundingClientRect())&&a(),k=!1}try{n=new IntersectionObserver(_,{...y,root:s.ownerDocument})}catch{n=new IntersectionObserver(_,y)}n.observe(e)}return a(!0),i}function HT(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=tm(e),d=s||i?[...u?tl(u):[],...tl(t)]:[];d.forEach(v=>{s&&v.addEventListener("scroll",n,{passive:!0}),i&&v.addEventListener("resize",n)});const h=u&&l?VT(u,n):null;let p=-1,x=null;a&&(x=new ResizeObserver(v=>{let[g]=v;g&&g.target===u&&x&&(x.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var y;(y=x)==null||y.observe(t)})),n()}),u&&!c&&x.observe(u),x.observe(t));let w,m=c?gi(e):null;c&&b();function b(){const v=gi(e);m&&!cb(m,v)&&n(),m=v,w=requestAnimationFrame(b)}return n(),()=>{var v;d.forEach(g=>{s&&g.removeEventListener("scroll",n),i&&g.removeEventListener("resize",n)}),h==null||h(),(v=x)==null||v.disconnect(),x=null,c&&cancelAnimationFrame(w)}}const KT=gT,qT=vT,GT=fT,QT=xT,JT=pT,Xv=hT,YT=yT,XT=(e,t,n)=>{const r=new Map,s={platform:WT,...n},i={...s.platform,_c:r};return dT(e,t,{...s,platform:i})};var ZT=typeof document<"u",e2=function(){},Pc=ZT?f.useLayoutEffect:e2;function pu(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!pu(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&e.$$typeof)&&!pu(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function ub(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Zv(e,t){const n=ub(e);return Math.round(t*n)/n}function Vd(e){const t=f.useRef(e);return Pc(()=>{t.current=e}),t}function t2(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,h]=f.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,x]=f.useState(r);pu(p,r)||x(r);const[w,m]=f.useState(null),[b,v]=f.useState(null),g=f.useCallback(N=>{N!==j.current&&(j.current=N,m(N))},[]),y=f.useCallback(N=>{N!==E.current&&(E.current=N,v(N))},[]),k=i||w,_=a||b,j=f.useRef(null),E=f.useRef(null),C=f.useRef(d),I=c!=null,P=Vd(c),z=Vd(s),O=Vd(u),D=f.useCallback(()=>{if(!j.current||!E.current)return;const N={placement:t,strategy:n,middleware:p};z.current&&(N.platform=z.current),XT(j.current,E.current,N).then(S=>{const U={...S,isPositioned:O.current!==!1};B.current&&!pu(C.current,U)&&(C.current=U,pl.flushSync(()=>{h(U)}))})},[p,t,n,z,O]);Pc(()=>{u===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,h(N=>({...N,isPositioned:!1})))},[u]);const B=f.useRef(!1);Pc(()=>(B.current=!0,()=>{B.current=!1}),[]),Pc(()=>{if(k&&(j.current=k),_&&(E.current=_),k&&_){if(P.current)return P.current(k,_,D);D()}},[k,_,D,P,I]);const A=f.useMemo(()=>({reference:j,floating:E,setReference:g,setFloating:y}),[g,y]),L=f.useMemo(()=>({reference:k,floating:_}),[k,_]),q=f.useMemo(()=>{const N={position:n,left:0,top:0};if(!L.floating)return N;const S=Zv(L.floating,d.x),U=Zv(L.floating,d.y);return l?{...N,transform:"translate("+S+"px, "+U+"px)",...ub(L.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:S,top:U}},[n,l,L.floating,d.x,d.y]);return f.useMemo(()=>({...d,update:D,refs:A,elements:L,floatingStyles:q}),[d,D,A,L,q])}const n2=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Xv({element:r.current,padding:s}).fn(n):{}:r?Xv({element:r,padding:s}).fn(n):{}}}},r2=(e,t)=>({...KT(e),options:[e,t]}),s2=(e,t)=>({...qT(e),options:[e,t]}),i2=(e,t)=>({...YT(e),options:[e,t]}),a2=(e,t)=>({...GT(e),options:[e,t]}),o2=(e,t)=>({...QT(e),options:[e,t]}),l2=(e,t)=>({...JT(e),options:[e,t]}),c2=(e,t)=>({...n2(e),options:[e,t]});var u2="Arrow",db=f.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...i}=e;return o.jsx(Yt.svg,{...i,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});db.displayName=u2;var d2=db;function h2(e){const[t,n]=f.useState(void 0);return Es(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=e.offsetWidth,l=e.offsetHeight;n({width:a,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var nm="Popper",[hb,fb]=xl(nm),[f2,pb]=hb(nm),mb=e=>{const{__scopePopper:t,children:n}=e,[r,s]=f.useState(null);return o.jsx(f2,{scope:t,anchor:r,onAnchorChange:s,children:n})};mb.displayName=nm;var gb="PopperAnchor",vb=f.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,i=pb(gb,n),a=f.useRef(null),l=dn(t,a),c=f.useRef(null);return f.useEffect(()=>{const u=c.current;c.current=(r==null?void 0:r.current)||a.current,u!==c.current&&i.onAnchorChange(c.current)}),r?null:o.jsx(Yt.div,{...s,ref:l})});vb.displayName=gb;var rm="PopperContent",[p2,m2]=hb(rm),yb=f.forwardRef((e,t)=>{var Oe,it,Ve,at,gt,Zt;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:x="optimized",onPlaced:w,...m}=e,b=pb(rm,n),[v,g]=f.useState(null),y=dn(t,vt=>g(vt)),[k,_]=f.useState(null),j=h2(k),E=(j==null?void 0:j.width)??0,C=(j==null?void 0:j.height)??0,I=r+(i!=="center"?"-"+i:""),P=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},z=Array.isArray(u)?u:[u],O=z.length>0,D={padding:P,boundary:z.filter(v2),altBoundary:O},{refs:B,floatingStyles:A,placement:L,isPositioned:q,middlewareData:N}=t2({strategy:"fixed",placement:I,whileElementsMounted:(...vt)=>HT(...vt,{animationFrame:x==="always"}),elements:{reference:b.anchor},middleware:[r2({mainAxis:s+C,alignmentAxis:a}),c&&s2({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?i2():void 0,...D}),c&&a2({...D}),o2({...D,apply:({elements:vt,rects:G,availableWidth:ae,availableHeight:re})=>{const{width:V,height:Q}=G.reference,ie=vt.floating.style;ie.setProperty("--radix-popper-available-width",`${ae}px`),ie.setProperty("--radix-popper-available-height",`${re}px`),ie.setProperty("--radix-popper-anchor-width",`${V}px`),ie.setProperty("--radix-popper-anchor-height",`${Q}px`)}}),k&&c2({element:k,padding:l}),y2({arrowWidth:E,arrowHeight:C}),p&&l2({strategy:"referenceHidden",...D})]}),[S,U]=bb(L),W=Lr(w);Es(()=>{q&&(W==null||W())},[q,W]);const F=(Oe=N.arrow)==null?void 0:Oe.x,ee=(it=N.arrow)==null?void 0:it.y,J=((Ve=N.arrow)==null?void 0:Ve.centerOffset)!==0,[te,ce]=f.useState();return Es(()=>{v&&ce(window.getComputedStyle(v).zIndex)},[v]),o.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...A,transform:q?A.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:te,"--radix-popper-transform-origin":[(at=N.transformOrigin)==null?void 0:at.x,(gt=N.transformOrigin)==null?void 0:gt.y].join(" "),...((Zt=N.hide)==null?void 0:Zt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:o.jsx(p2,{scope:n,placedSide:S,onArrowChange:_,arrowX:F,arrowY:ee,shouldHideArrow:J,children:o.jsx(Yt.div,{"data-side":S,"data-align":U,...m,ref:y,style:{...m.style,animation:q?void 0:"none"}})})})});yb.displayName=rm;var xb="PopperArrow",g2={top:"bottom",right:"left",bottom:"top",left:"right"},wb=f.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,i=m2(xb,r),a=g2[i.placedSide];return o.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:o.jsx(d2,{...s,ref:n,style:{...s.style,display:"block"}})})});wb.displayName=xb;function v2(e){return e!==null}var y2=e=>({name:"transformOrigin",options:e,fn(t){var b,v,g;const{placement:n,rects:r,middlewareData:s}=t,a=((b=s.arrow)==null?void 0:b.centerOffset)!==0,l=a?0:e.arrowWidth,c=a?0:e.arrowHeight,[u,d]=bb(n),h={start:"0%",center:"50%",end:"100%"}[d],p=(((v=s.arrow)==null?void 0:v.x)??0)+l/2,x=(((g=s.arrow)==null?void 0:g.y)??0)+c/2;let w="",m="";return u==="bottom"?(w=a?h:`${p}px`,m=`${-c}px`):u==="top"?(w=a?h:`${p}px`,m=`${r.floating.height+c}px`):u==="right"?(w=`${-c}px`,m=a?h:`${x}px`):u==="left"&&(w=`${r.floating.width+c}px`,m=a?h:`${x}px`),{data:{x:w,y:m}}}});function bb(e){const[t,n="center"]=e.split("-");return[t,n]}var x2=mb,w2=vb,b2=yb,k2=wb,_2="Portal",kb=f.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[s,i]=f.useState(!1);Es(()=>i(!0),[]);const a=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?D1.createPortal(o.jsx(Yt.div,{...r,ref:t}),a):null});kb.displayName=_2;function S2(e,t){return f.useReducer((n,r)=>t[n][r]??n,e)}var bl=e=>{const{present:t,children:n}=e,r=j2(t),s=typeof n=="function"?n({present:r.isPresent}):f.Children.only(n),i=dn(r.ref,E2(s));return typeof n=="function"||r.isPresent?f.cloneElement(s,{ref:i}):null};bl.displayName="Presence";function j2(e){const[t,n]=f.useState(),r=f.useRef(null),s=f.useRef(e),i=f.useRef("none"),a=e?"mounted":"unmounted",[l,c]=S2(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const u=sc(r.current);i.current=l==="mounted"?u:"none"},[l]),Es(()=>{const u=r.current,d=s.current;if(d!==e){const p=i.current,x=sc(u);e?c("MOUNT"):x==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&p!==x?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),Es(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,h=x=>{const m=sc(r.current).includes(CSS.escape(x.animationName));if(x.target===t&&m&&(c("ANIMATION_END"),!s.current)){const b=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=b)})}},p=x=>{x.target===t&&(i.current=sc(r.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:f.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function sc(e){return(e==null?void 0:e.animationName)||"none"}function E2(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Hd="rovingFocusGroup.onEntryFocus",C2={bubbles:!1,cancelable:!0},kl="RovingFocusGroup",[Nf,_b,N2]=q0(kl),[P2,Sb]=xl(kl,[N2]),[R2,T2]=P2(kl),jb=f.forwardRef((e,t)=>o.jsx(Nf.Provider,{scope:e.__scopeRovingFocusGroup,children:o.jsx(Nf.Slot,{scope:e.__scopeRovingFocusGroup,children:o.jsx(A2,{...e,ref:t})})}));jb.displayName=kl;var A2=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=e,p=f.useRef(null),x=dn(t,p),w=G0(i),[m,b]=H0({prop:a,defaultProp:l??null,onChange:c,caller:kl}),[v,g]=f.useState(!1),y=Lr(u),k=_b(n),_=f.useRef(!1),[j,E]=f.useState(0);return f.useEffect(()=>{const C=p.current;if(C)return C.addEventListener(Hd,y),()=>C.removeEventListener(Hd,y)},[y]),o.jsx(R2,{scope:n,orientation:r,dir:w,loop:s,currentTabStopId:m,onItemFocus:f.useCallback(C=>b(C),[b]),onItemShiftTab:f.useCallback(()=>g(!0),[]),onFocusableItemAdd:f.useCallback(()=>E(C=>C+1),[]),onFocusableItemRemove:f.useCallback(()=>E(C=>C-1),[]),children:o.jsx(Yt.div,{tabIndex:v||j===0?-1:0,"data-orientation":r,...h,ref:x,style:{outline:"none",...e.style},onMouseDown:Pe(e.onMouseDown,()=>{_.current=!0}),onFocus:Pe(e.onFocus,C=>{const I=!_.current;if(C.target===C.currentTarget&&I&&!v){const P=new CustomEvent(Hd,C2);if(C.currentTarget.dispatchEvent(P),!P.defaultPrevented){const z=k().filter(L=>L.focusable),O=z.find(L=>L.active),D=z.find(L=>L.id===m),A=[O,D,...z].filter(Boolean).map(L=>L.ref.current);Nb(A,d)}}_.current=!1}),onBlur:Pe(e.onBlur,()=>g(!1))})})}),Eb="RovingFocusGroupItem",Cb=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:a,...l}=e,c=Sf(),u=i||c,d=T2(Eb,n),h=d.currentTabStopId===u,p=_b(n),{onFocusableItemAdd:x,onFocusableItemRemove:w,currentTabStopId:m}=d;return f.useEffect(()=>{if(r)return x(),()=>w()},[r,x,w]),o.jsx(Nf.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:o.jsx(Yt.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:Pe(e.onMouseDown,b=>{r?d.onItemFocus(u):b.preventDefault()}),onFocus:Pe(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:Pe(e.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){d.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const v=M2(b,d.orientation,d.dir);if(v!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let y=p().filter(k=>k.focusable).map(k=>k.ref.current);if(v==="last")y.reverse();else if(v==="prev"||v==="next"){v==="prev"&&y.reverse();const k=y.indexOf(b.currentTarget);y=d.loop?$2(y,k+1):y.slice(k+1)}setTimeout(()=>Nb(y))}}),children:typeof a=="function"?a({isCurrentTabStop:h,hasTabStop:m!=null}):a})})});Cb.displayName=Eb;var O2={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function I2(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function M2(e,t,n){const r=I2(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return O2[r]}function Nb(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function $2(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var D2=jb,L2=Cb;function F2(e){const t=U2(e),n=f.forwardRef((r,s)=>{const{children:i,...a}=r,l=f.Children.toArray(i),c=l.find(B2);if(c){const u=c.props.children,d=l.map(h=>h===c?f.Children.count(u)>1?f.Children.only(null):f.isValidElement(u)?u.props.children:null:h);return o.jsx(t,{...a,ref:s,children:f.isValidElement(u)?f.cloneElement(u,void 0,d):null})}return o.jsx(t,{...a,ref:s,children:i})});return n.displayName=`${e}.Slot`,n}function U2(e){const t=f.forwardRef((n,r)=>{const{children:s,...i}=n;if(f.isValidElement(s)){const a=V2(s),l=W2(i,s.props);return s.type!==f.Fragment&&(l.ref=r?xi(r,a):a),f.cloneElement(s,l)}return f.Children.count(s)>1?f.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var z2=Symbol("radix.slottable");function B2(e){return f.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===z2}function W2(e,t){const n={...t};for(const r in t){const s=e[r],i=t[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function V2(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var H2=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Mi=new WeakMap,ic=new WeakMap,ac={},Kd=0,Pb=function(e){return e&&(e.host||Pb(e.parentNode))},K2=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=Pb(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},q2=function(e,t,n,r){var s=K2(t,Array.isArray(e)?e:[e]);ac[n]||(ac[n]=new WeakMap);var i=ac[n],a=[],l=new Set,c=new Set(s),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};s.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(p){if(l.has(p))d(p);else try{var x=p.getAttribute(r),w=x!==null&&x!=="false",m=(Mi.get(p)||0)+1,b=(i.get(p)||0)+1;Mi.set(p,m),i.set(p,b),a.push(p),m===1&&w&&ic.set(p,!0),b===1&&p.setAttribute(n,"true"),w||p.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",p,v)}})};return d(t),l.clear(),Kd++,function(){a.forEach(function(h){var p=Mi.get(h)-1,x=i.get(h)-1;Mi.set(h,p),i.set(h,x),p||(ic.has(h)||h.removeAttribute(r),ic.delete(h)),x||h.removeAttribute(n)}),Kd--,Kd||(Mi=new WeakMap,Mi=new WeakMap,ic=new WeakMap,ac={})}},G2=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=H2(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),q2(r,s,n,"aria-hidden")):function(){return null}},Rc="right-scroll-bar-position",Tc="width-before-scroll-bar",Q2="with-scroll-bars-hidden",J2="--removed-body-scroll-bar-size";function qd(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Y2(e,t){var n=f.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var X2=typeof window<"u"?f.useLayoutEffect:f.useEffect,ey=new WeakMap;function Z2(e,t){var n=Y2(null,function(r){return e.forEach(function(s){return qd(s,r)})});return X2(function(){var r=ey.get(n);if(r){var s=new Set(r),i=new Set(e),a=n.current;s.forEach(function(l){i.has(l)||qd(l,null)}),i.forEach(function(l){s.has(l)||qd(l,a)})}ey.set(n,e)},[e]),n}function eA(e){return e}function tA(e,t){t===void 0&&(t=eA);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var a=t(i,r);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(r=!0;n.length;){var a=n;n=[],a.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(i),a=n}var c=function(){var d=a;a=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){a.push(d),u()},filter:function(d){return a=a.filter(d),n}}}};return s}function nA(e){e===void 0&&(e={});var t=tA(null);return t.options=hr({async:!0,ssr:!1},e),t}var Rb=function(e){var t=e.sideCar,n=Ba(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return f.createElement(r,hr({},n))};Rb.isSideCarExport=!0;function rA(e,t){return e.useMedium(t),Rb}var Tb=nA(),Gd=function(){},Bu=f.forwardRef(function(e,t){var n=f.useRef(null),r=f.useState({onScrollCapture:Gd,onWheelCapture:Gd,onTouchMoveCapture:Gd}),s=r[0],i=r[1],a=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,p=e.sideCar,x=e.noRelative,w=e.noIsolation,m=e.inert,b=e.allowPinchZoom,v=e.as,g=v===void 0?"div":v,y=e.gapMode,k=Ba(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=p,j=Z2([n,t]),E=hr(hr({},k),s);return f.createElement(f.Fragment,null,d&&f.createElement(_,{sideCar:Tb,removeScrollBar:u,shards:h,noRelative:x,noIsolation:w,inert:m,setCallbacks:i,allowPinchZoom:!!b,lockRef:n,gapMode:y}),a?f.cloneElement(f.Children.only(l),hr(hr({},E),{ref:j})):f.createElement(g,hr({},E,{className:c,ref:j}),l))});Bu.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Bu.classNames={fullWidth:Tc,zeroRight:Rc};var sA=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function iA(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=sA();return t&&e.setAttribute("nonce",t),e}function aA(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function oA(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var lA=function(){var e=0,t=null;return{add:function(n){e==0&&(t=iA())&&(aA(t,n),oA(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},cA=function(){var e=lA();return function(t,n){f.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Ab=function(){var e=cA(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},uA={left:0,top:0,right:0,gap:0},Qd=function(e){return parseInt(e||"",10)||0},dA=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[Qd(n),Qd(r),Qd(s)]},hA=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return uA;var t=dA(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},fA=Ab(),ha="data-scroll-locked",pA=function(e,t,n,r){var s=e.left,i=e.top,a=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Q2,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(ha,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Rc,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Tc,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Rc," .").concat(Rc,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Tc," .").concat(Tc,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ha,`] {
    `).concat(J2,": ").concat(l,`px;
  }
`)},ty=function(){var e=parseInt(document.body.getAttribute(ha)||"0",10);return isFinite(e)?e:0},mA=function(){f.useEffect(function(){return document.body.setAttribute(ha,(ty()+1).toString()),function(){var e=ty()-1;e<=0?document.body.removeAttribute(ha):document.body.setAttribute(ha,e.toString())}},[])},gA=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;mA();var i=f.useMemo(function(){return hA(s)},[s]);return f.createElement(fA,{styles:pA(i,!t,s,n?"":"!important")})},Pf=!1;if(typeof window<"u")try{var oc=Object.defineProperty({},"passive",{get:function(){return Pf=!0,!0}});window.addEventListener("test",oc,oc),window.removeEventListener("test",oc,oc)}catch{Pf=!1}var $i=Pf?{passive:!1}:!1,vA=function(e){return e.tagName==="TEXTAREA"},Ob=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!vA(e)&&n[t]==="visible")},yA=function(e){return Ob(e,"overflowY")},xA=function(e){return Ob(e,"overflowX")},ny=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=Ib(e,r);if(s){var i=Mb(e,r),a=i[1],l=i[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},wA=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},bA=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Ib=function(e,t){return e==="v"?yA(t):xA(t)},Mb=function(e,t){return e==="v"?wA(t):bA(t)},kA=function(e,t){return e==="h"&&t==="rtl"?-1:1},_A=function(e,t,n,r,s){var i=kA(e,window.getComputedStyle(t).direction),a=i*r,l=n.target,c=t.contains(l),u=!1,d=a>0,h=0,p=0;do{if(!l)break;var x=Mb(e,l),w=x[0],m=x[1],b=x[2],v=m-b-i*w;(w||v)&&Ib(e,l)&&(h+=v,p+=w);var g=l.parentNode;l=g&&g.nodeType===Node.DOCUMENT_FRAGMENT_NODE?g.host:g}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&Math.abs(h)<1||!d&&Math.abs(p)<1)&&(u=!0),u},lc=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},ry=function(e){return[e.deltaX,e.deltaY]},sy=function(e){return e&&"current"in e?e.current:e},SA=function(e,t){return e[0]===t[0]&&e[1]===t[1]},jA=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},EA=0,Di=[];function CA(e){var t=f.useRef([]),n=f.useRef([0,0]),r=f.useRef(),s=f.useState(EA++)[0],i=f.useState(Ab)[0],a=f.useRef(e);f.useEffect(function(){a.current=e},[e]),f.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var m=MC([e.lockRef.current],(e.shards||[]).map(sy),!0).filter(Boolean);return m.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=f.useCallback(function(m,b){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!a.current.allowPinchZoom;var v=lc(m),g=n.current,y="deltaX"in m?m.deltaX:g[0]-v[0],k="deltaY"in m?m.deltaY:g[1]-v[1],_,j=m.target,E=Math.abs(y)>Math.abs(k)?"h":"v";if("touches"in m&&E==="h"&&j.type==="range")return!1;var C=window.getSelection(),I=C&&C.anchorNode,P=I?I===j||I.contains(j):!1;if(P)return!1;var z=ny(E,j);if(!z)return!0;if(z?_=E:(_=E==="v"?"h":"v",z=ny(E,j)),!z)return!1;if(!r.current&&"changedTouches"in m&&(y||k)&&(r.current=_),!_)return!0;var O=r.current||_;return _A(O,b,m,O==="h"?y:k)},[]),c=f.useCallback(function(m){var b=m;if(!(!Di.length||Di[Di.length-1]!==i)){var v="deltaY"in b?ry(b):lc(b),g=t.current.filter(function(_){return _.name===b.type&&(_.target===b.target||b.target===_.shadowParent)&&SA(_.delta,v)})[0];if(g&&g.should){b.cancelable&&b.preventDefault();return}if(!g){var y=(a.current.shards||[]).map(sy).filter(Boolean).filter(function(_){return _.contains(b.target)}),k=y.length>0?l(b,y[0]):!a.current.noIsolation;k&&b.cancelable&&b.preventDefault()}}},[]),u=f.useCallback(function(m,b,v,g){var y={name:m,delta:b,target:v,should:g,shadowParent:NA(v)};t.current.push(y),setTimeout(function(){t.current=t.current.filter(function(k){return k!==y})},1)},[]),d=f.useCallback(function(m){n.current=lc(m),r.current=void 0},[]),h=f.useCallback(function(m){u(m.type,ry(m),m.target,l(m,e.lockRef.current))},[]),p=f.useCallback(function(m){u(m.type,lc(m),m.target,l(m,e.lockRef.current))},[]);f.useEffect(function(){return Di.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",c,$i),document.addEventListener("touchmove",c,$i),document.addEventListener("touchstart",d,$i),function(){Di=Di.filter(function(m){return m!==i}),document.removeEventListener("wheel",c,$i),document.removeEventListener("touchmove",c,$i),document.removeEventListener("touchstart",d,$i)}},[]);var x=e.removeScrollBar,w=e.inert;return f.createElement(f.Fragment,null,w?f.createElement(i,{styles:jA(s)}):null,x?f.createElement(gA,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function NA(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const PA=rA(Tb,CA);var $b=f.forwardRef(function(e,t){return f.createElement(Bu,hr({},e,{ref:t,sideCar:PA}))});$b.classNames=Bu.classNames;var Rf=["Enter"," "],RA=["ArrowDown","PageUp","Home"],Db=["ArrowUp","PageDown","End"],TA=[...RA,...Db],AA={ltr:[...Rf,"ArrowRight"],rtl:[...Rf,"ArrowLeft"]},OA={ltr:["ArrowLeft"],rtl:["ArrowRight"]},_l="Menu",[nl,IA,MA]=q0(_l),[bi,Lb]=xl(_l,[MA,fb,Sb]),Wu=fb(),Fb=Sb(),[$A,ki]=bi(_l),[DA,Sl]=bi(_l),Ub=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:s,onOpenChange:i,modal:a=!0}=e,l=Wu(t),[c,u]=f.useState(null),d=f.useRef(!1),h=Lr(i),p=G0(s);return f.useEffect(()=>{const x=()=>{d.current=!0,document.addEventListener("pointerdown",w,{capture:!0,once:!0}),document.addEventListener("pointermove",w,{capture:!0,once:!0})},w=()=>d.current=!1;return document.addEventListener("keydown",x,{capture:!0}),()=>{document.removeEventListener("keydown",x,{capture:!0}),document.removeEventListener("pointerdown",w,{capture:!0}),document.removeEventListener("pointermove",w,{capture:!0})}},[]),o.jsx(x2,{...l,children:o.jsx($A,{scope:t,open:n,onOpenChange:h,content:c,onContentChange:u,children:o.jsx(DA,{scope:t,onClose:f.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:p,modal:a,children:r})})})};Ub.displayName=_l;var LA="MenuAnchor",sm=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=Wu(n);return o.jsx(w2,{...s,...r,ref:t})});sm.displayName=LA;var im="MenuPortal",[FA,zb]=bi(im,{forceMount:void 0}),Bb=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:s}=e,i=ki(im,t);return o.jsx(FA,{scope:t,forceMount:n,children:o.jsx(bl,{present:n||i.open,children:o.jsx(kb,{asChild:!0,container:s,children:r})})})};Bb.displayName=im;var Dn="MenuContent",[UA,am]=bi(Dn),Wb=f.forwardRef((e,t)=>{const n=zb(Dn,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,i=ki(Dn,e.__scopeMenu),a=Sl(Dn,e.__scopeMenu);return o.jsx(nl.Provider,{scope:e.__scopeMenu,children:o.jsx(bl,{present:r||i.open,children:o.jsx(nl.Slot,{scope:e.__scopeMenu,children:a.modal?o.jsx(zA,{...s,ref:t}):o.jsx(BA,{...s,ref:t})})})})}),zA=f.forwardRef((e,t)=>{const n=ki(Dn,e.__scopeMenu),r=f.useRef(null),s=dn(t,r);return f.useEffect(()=>{const i=r.current;if(i)return G2(i)},[]),o.jsx(om,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Pe(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),BA=f.forwardRef((e,t)=>{const n=ki(Dn,e.__scopeMenu);return o.jsx(om,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),WA=F2("MenuContent.ScrollLock"),om=f.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:p,onDismiss:x,disableOutsideScroll:w,...m}=e,b=ki(Dn,n),v=Sl(Dn,n),g=Wu(n),y=Fb(n),k=IA(n),[_,j]=f.useState(null),E=f.useRef(null),C=dn(t,E,b.onContentChange),I=f.useRef(0),P=f.useRef(""),z=f.useRef(0),O=f.useRef(null),D=f.useRef("right"),B=f.useRef(0),A=w?$b:f.Fragment,L=w?{as:WA,allowPinchZoom:!0}:void 0,q=S=>{var Oe,it;const U=P.current+S,W=k().filter(Ve=>!Ve.disabled),F=document.activeElement,ee=(Oe=W.find(Ve=>Ve.ref.current===F))==null?void 0:Oe.textValue,J=W.map(Ve=>Ve.textValue),te=tO(J,U,ee),ce=(it=W.find(Ve=>Ve.textValue===te))==null?void 0:it.ref.current;(function Ve(at){P.current=at,window.clearTimeout(I.current),at!==""&&(I.current=window.setTimeout(()=>Ve(""),1e3))})(U),ce&&setTimeout(()=>ce.focus())};f.useEffect(()=>()=>window.clearTimeout(I.current),[]),VR();const N=f.useCallback(S=>{var W,F;return D.current===((W=O.current)==null?void 0:W.side)&&rO(S,(F=O.current)==null?void 0:F.area)},[]);return o.jsx(UA,{scope:n,searchRef:P,onItemEnter:f.useCallback(S=>{N(S)&&S.preventDefault()},[N]),onItemLeave:f.useCallback(S=>{var U;N(S)||((U=E.current)==null||U.focus(),j(null))},[N]),onTriggerLeave:f.useCallback(S=>{N(S)&&S.preventDefault()},[N]),pointerGraceTimerRef:z,onPointerGraceIntentChange:f.useCallback(S=>{O.current=S},[]),children:o.jsx(A,{...L,children:o.jsx(X0,{asChild:!0,trapped:s,onMountAutoFocus:Pe(i,S=>{var U;S.preventDefault(),(U=E.current)==null||U.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:o.jsx(J0,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:p,onDismiss:x,children:o.jsx(D2,{asChild:!0,...y,dir:v.dir,orientation:"vertical",loop:r,currentTabStopId:_,onCurrentTabStopIdChange:j,onEntryFocus:Pe(c,S=>{v.isUsingKeyboardRef.current||S.preventDefault()}),preventScrollOnEntryFocus:!0,children:o.jsx(b2,{role:"menu","aria-orientation":"vertical","data-state":ik(b.open),"data-radix-menu-content":"",dir:v.dir,...g,...m,ref:C,style:{outline:"none",...m.style},onKeyDown:Pe(m.onKeyDown,S=>{const W=S.target.closest("[data-radix-menu-content]")===S.currentTarget,F=S.ctrlKey||S.altKey||S.metaKey,ee=S.key.length===1;W&&(S.key==="Tab"&&S.preventDefault(),!F&&ee&&q(S.key));const J=E.current;if(S.target!==J||!TA.includes(S.key))return;S.preventDefault();const ce=k().filter(Oe=>!Oe.disabled).map(Oe=>Oe.ref.current);Db.includes(S.key)&&ce.reverse(),ZA(ce)}),onBlur:Pe(e.onBlur,S=>{S.currentTarget.contains(S.target)||(window.clearTimeout(I.current),P.current="")}),onPointerMove:Pe(e.onPointerMove,rl(S=>{const U=S.target,W=B.current!==S.clientX;if(S.currentTarget.contains(U)&&W){const F=S.clientX>B.current?"right":"left";D.current=F,B.current=S.clientX}}))})})})})})})});Wb.displayName=Dn;var VA="MenuGroup",lm=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return o.jsx(Yt.div,{role:"group",...r,ref:t})});lm.displayName=VA;var HA="MenuLabel",Vb=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return o.jsx(Yt.div,{...r,ref:t})});Vb.displayName=HA;var mu="MenuItem",iy="menu.itemSelect",Vu=f.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...s}=e,i=f.useRef(null),a=Sl(mu,e.__scopeMenu),l=am(mu,e.__scopeMenu),c=dn(t,i),u=f.useRef(!1),d=()=>{const h=i.current;if(!n&&h){const p=new CustomEvent(iy,{bubbles:!0,cancelable:!0});h.addEventListener(iy,x=>r==null?void 0:r(x),{once:!0}),K0(h,p),p.defaultPrevented?u.current=!1:a.onClose()}};return o.jsx(Hb,{...s,ref:c,disabled:n,onClick:Pe(e.onClick,d),onPointerDown:h=>{var p;(p=e.onPointerDown)==null||p.call(e,h),u.current=!0},onPointerUp:Pe(e.onPointerUp,h=>{var p;u.current||(p=h.currentTarget)==null||p.click()}),onKeyDown:Pe(e.onKeyDown,h=>{const p=l.searchRef.current!=="";n||p&&h.key===" "||Rf.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});Vu.displayName=mu;var Hb=f.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=e,a=am(mu,n),l=Fb(n),c=f.useRef(null),u=dn(t,c),[d,h]=f.useState(!1),[p,x]=f.useState("");return f.useEffect(()=>{const w=c.current;w&&x((w.textContent??"").trim())},[i.children]),o.jsx(nl.ItemSlot,{scope:n,disabled:r,textValue:s??p,children:o.jsx(L2,{asChild:!0,...l,focusable:!r,children:o.jsx(Yt.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:u,onPointerMove:Pe(e.onPointerMove,rl(w=>{r?a.onItemLeave(w):(a.onItemEnter(w),w.defaultPrevented||w.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Pe(e.onPointerLeave,rl(w=>a.onItemLeave(w))),onFocus:Pe(e.onFocus,()=>h(!0)),onBlur:Pe(e.onBlur,()=>h(!1))})})})}),KA="MenuCheckboxItem",Kb=f.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...s}=e;return o.jsx(Yb,{scope:e.__scopeMenu,checked:n,children:o.jsx(Vu,{role:"menuitemcheckbox","aria-checked":gu(n)?"mixed":n,...s,ref:t,"data-state":um(n),onSelect:Pe(s.onSelect,()=>r==null?void 0:r(gu(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Kb.displayName=KA;var qb="MenuRadioGroup",[qA,GA]=bi(qb,{value:void 0,onValueChange:()=>{}}),Gb=f.forwardRef((e,t)=>{const{value:n,onValueChange:r,...s}=e,i=Lr(r);return o.jsx(qA,{scope:e.__scopeMenu,value:n,onValueChange:i,children:o.jsx(lm,{...s,ref:t})})});Gb.displayName=qb;var Qb="MenuRadioItem",Jb=f.forwardRef((e,t)=>{const{value:n,...r}=e,s=GA(Qb,e.__scopeMenu),i=n===s.value;return o.jsx(Yb,{scope:e.__scopeMenu,checked:i,children:o.jsx(Vu,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":um(i),onSelect:Pe(r.onSelect,()=>{var a;return(a=s.onValueChange)==null?void 0:a.call(s,n)},{checkForDefaultPrevented:!1})})})});Jb.displayName=Qb;var cm="MenuItemIndicator",[Yb,QA]=bi(cm,{checked:!1}),Xb=f.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...s}=e,i=QA(cm,n);return o.jsx(bl,{present:r||gu(i.checked)||i.checked===!0,children:o.jsx(Yt.span,{...s,ref:t,"data-state":um(i.checked)})})});Xb.displayName=cm;var JA="MenuSeparator",Zb=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return o.jsx(Yt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});Zb.displayName=JA;var YA="MenuArrow",ek=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=Wu(n);return o.jsx(k2,{...s,...r,ref:t})});ek.displayName=YA;var XA="MenuSub",[g5,tk]=bi(XA),mo="MenuSubTrigger",nk=f.forwardRef((e,t)=>{const n=ki(mo,e.__scopeMenu),r=Sl(mo,e.__scopeMenu),s=tk(mo,e.__scopeMenu),i=am(mo,e.__scopeMenu),a=f.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:e.__scopeMenu},d=f.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return f.useEffect(()=>d,[d]),f.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),o.jsx(sm,{asChild:!0,...u,children:o.jsx(Hb,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":ik(n.open),...e,ref:xi(t,s.onTriggerChange),onClick:h=>{var p;(p=e.onClick)==null||p.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Pe(e.onPointerMove,rl(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!a.current&&(i.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:Pe(e.onPointerLeave,rl(h=>{var x,w;d();const p=(x=n.content)==null?void 0:x.getBoundingClientRect();if(p){const m=(w=n.content)==null?void 0:w.dataset.side,b=m==="right",v=b?-5:5,g=p[b?"left":"right"],y=p[b?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+v,y:h.clientY},{x:g,y:p.top},{x:y,y:p.top},{x:y,y:p.bottom},{x:g,y:p.bottom}],side:m}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Pe(e.onKeyDown,h=>{var x;const p=i.searchRef.current!=="";e.disabled||p&&h.key===" "||AA[r.dir].includes(h.key)&&(n.onOpenChange(!0),(x=n.content)==null||x.focus(),h.preventDefault())})})})});nk.displayName=mo;var rk="MenuSubContent",sk=f.forwardRef((e,t)=>{const n=zb(Dn,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,i=ki(Dn,e.__scopeMenu),a=Sl(Dn,e.__scopeMenu),l=tk(rk,e.__scopeMenu),c=f.useRef(null),u=dn(t,c);return o.jsx(nl.Provider,{scope:e.__scopeMenu,children:o.jsx(bl,{present:r||i.open,children:o.jsx(nl.Slot,{scope:e.__scopeMenu,children:o.jsx(om,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;a.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:Pe(e.onFocusOutside,d=>{d.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Pe(e.onEscapeKeyDown,d=>{a.onClose(),d.preventDefault()}),onKeyDown:Pe(e.onKeyDown,d=>{var x;const h=d.currentTarget.contains(d.target),p=OA[a.dir].includes(d.key);h&&p&&(i.onOpenChange(!1),(x=l.trigger)==null||x.focus(),d.preventDefault())})})})})})});sk.displayName=rk;function ik(e){return e?"open":"closed"}function gu(e){return e==="indeterminate"}function um(e){return gu(e)?"indeterminate":e?"checked":"unchecked"}function ZA(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function eO(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function tO(e,t,n){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let a=eO(e,Math.max(i,0));s.length===1&&(a=a.filter(u=>u!==n));const c=a.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function nO(e,t){const{x:n,y:r}=e;let s=!1;for(let i=0,a=t.length-1;i<t.length;a=i++){const l=t[i],c=t[a],u=l.x,d=l.y,h=c.x,p=c.y;d>r!=p>r&&n<(h-u)*(r-d)/(p-d)+u&&(s=!s)}return s}function rO(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return nO(n,t)}function rl(e){return t=>t.pointerType==="mouse"?e(t):void 0}var sO=Ub,iO=sm,aO=Bb,oO=Wb,lO=lm,cO=Vb,uO=Vu,dO=Kb,hO=Gb,fO=Jb,pO=Xb,mO=Zb,gO=ek,vO=nk,yO=sk,Hu="DropdownMenu",[xO]=xl(Hu,[Lb]),Xt=Lb(),[wO,ak]=xO(Hu),ok=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:a,modal:l=!0}=e,c=Xt(t),u=f.useRef(null),[d,h]=H0({prop:s,defaultProp:i??!1,onChange:a,caller:Hu});return o.jsx(wO,{scope:t,triggerId:Sf(),triggerRef:u,contentId:Sf(),open:d,onOpenChange:h,onOpenToggle:f.useCallback(()=>h(p=>!p),[h]),modal:l,children:o.jsx(sO,{...c,open:d,onOpenChange:h,dir:r,modal:l,children:n})})};ok.displayName=Hu;var lk="DropdownMenuTrigger",ck=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=e,i=ak(lk,n),a=Xt(n);return o.jsx(iO,{asChild:!0,...a,children:o.jsx(Yt.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:xi(t,i.triggerRef),onPointerDown:Pe(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:Pe(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});ck.displayName=lk;var bO="DropdownMenuPortal",uk=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Xt(t);return o.jsx(aO,{...r,...n})};uk.displayName=bO;var dk="DropdownMenuContent",hk=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=ak(dk,n),i=Xt(n),a=f.useRef(!1);return o.jsx(oO,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:t,onCloseAutoFocus:Pe(e.onCloseAutoFocus,l=>{var c;a.current||(c=s.triggerRef.current)==null||c.focus(),a.current=!1,l.preventDefault()}),onInteractOutside:Pe(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!s.modal||d)&&(a.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});hk.displayName=dk;var kO="DropdownMenuGroup",_O=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Xt(n);return o.jsx(lO,{...s,...r,ref:t})});_O.displayName=kO;var SO="DropdownMenuLabel",fk=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Xt(n);return o.jsx(cO,{...s,...r,ref:t})});fk.displayName=SO;var jO="DropdownMenuItem",pk=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Xt(n);return o.jsx(uO,{...s,...r,ref:t})});pk.displayName=jO;var EO="DropdownMenuCheckboxItem",CO=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Xt(n);return o.jsx(dO,{...s,...r,ref:t})});CO.displayName=EO;var NO="DropdownMenuRadioGroup",PO=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Xt(n);return o.jsx(hO,{...s,...r,ref:t})});PO.displayName=NO;var RO="DropdownMenuRadioItem",TO=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Xt(n);return o.jsx(fO,{...s,...r,ref:t})});TO.displayName=RO;var AO="DropdownMenuItemIndicator",OO=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Xt(n);return o.jsx(pO,{...s,...r,ref:t})});OO.displayName=AO;var IO="DropdownMenuSeparator",mk=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Xt(n);return o.jsx(mO,{...s,...r,ref:t})});mk.displayName=IO;var MO="DropdownMenuArrow",$O=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Xt(n);return o.jsx(gO,{...s,...r,ref:t})});$O.displayName=MO;var DO="DropdownMenuSubTrigger",LO=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Xt(n);return o.jsx(vO,{...s,...r,ref:t})});LO.displayName=DO;var FO="DropdownMenuSubContent",UO=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Xt(n);return o.jsx(yO,{...s,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});UO.displayName=FO;var zO=ok,BO=ck,WO=uk,VO=hk,HO=fk,KO=pk,qO=mk;const gk=zO,vk=BO,dm=Dt.forwardRef(({className:e,sideOffset:t=8,...n},r)=>o.jsx(WO,{children:o.jsx(VO,{ref:r,sideOffset:t,className:ge("z-50 min-w-[220px] overflow-hidden rounded-2xl p-1","bg-white/75 dark:bg-black/40 backdrop-blur-md shadow-soft2","ring-1 ring-black/5 dark:ring-white/10",e),...n})}));dm.displayName="DropdownMenuContent";const yk=Dt.forwardRef(({className:e,...t},n)=>o.jsx(HO,{ref:n,className:ge("px-3 py-2 text-xs text-black/60 dark:text-white/60",e),...t}));yk.displayName="DropdownMenuLabel";const vu=Dt.forwardRef(({className:e,...t},n)=>o.jsx(qO,{ref:n,className:ge("my-1 h-px bg-black/5 dark:bg-white/10",e),...t}));vu.displayName="DropdownMenuSeparator";const Tf=Dt.forwardRef(({className:e,inset:t,...n},r)=>o.jsx(KO,{ref:r,className:ge("relative flex cursor-default select-none items-center gap-2 rounded-xl px-3 py-2 text-sm outline-none","text-black/90 dark:text-white/90","focus:bg-black/5 dark:focus:bg-white/10",t&&"pl-8",e),...n}));Tf.displayName="DropdownMenuItem";function Ft({className:e,variant:t="secondary",...n}){return o.jsx(Z,{variant:t,size:"icon",className:ge("rounded-xl h-8 w-8",e),...n})}function Os({open:e,onClose:t,title:n,children:r,maxWidth:s="520px"}){if(!e)return null;const i=o.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/40 backdrop-blur-sm px-4 py-6 overflow-y-auto",children:o.jsx("div",{className:"w-full",style:{maxWidth:s},children:o.jsxs("div",{className:"rounded-2xl bg-white/90 dark:bg-neutral-900/95 shadow-2xl ring-1 ring-black/10 dark:ring-white/10 max-h-[85vh] flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-black/5 dark:border-white/10",children:[o.jsx("div",{className:"text-sm font-semibold",children:n}),o.jsx("button",{className:"text-black/60 dark:text-white/60 hover:opacity-100 opacity-70",onClick:t,children:""})]}),o.jsx("div",{className:"p-4 overflow-y-auto",children:r})]})})});return typeof document>"u"?i:pl.createPortal(i,document.body)}function jl({open:e,onClose:t,onConfirm:n,message:r}){return e?o.jsx(Os,{open:e,onClose:t,title:"Confirm",maxWidth:"420px",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"text-sm text-black/70 dark:text-white/70",children:r||"Are you sure?"}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(Z,{variant:"ghost",className:"rounded-2xl",onClick:t,children:"Cancel"}),o.jsx(Z,{className:"rounded-2xl",onClick:n,children:"Confirm"})]})]})}):null}const xk=f.createContext(null);function hm(){const e=f.useContext(xk);if(!e)throw new Error("useNotifications must be used inside NotificationsProvider");return e}function GO({notification:e}){var t;return e?o.jsxs("div",{className:"space-y-3 text-sm text-black/70 dark:text-white/70",children:[e.message?o.jsx("div",{children:e.message}):o.jsx("div",{children:"No additional details."}),(t=e.meta)!=null&&t.details?o.jsx("div",{className:"rounded-xl bg-black/5 dark:bg-white/10 p-3 text-xs whitespace-pre-wrap",children:e.meta.details}):null]}):null}function QO(){const e=Fa(),{notifications:t,unreadCount:n,clearAll:r,dismissNotification:s,markRead:i,formatTime:a}=hm(),[l,c]=f.useState(null),u=f.useMemo(()=>t.slice(0,6),[t]);return o.jsxs(o.Fragment,{children:[o.jsxs(gk,{children:[o.jsx(vk,{asChild:!0,children:o.jsxs("button",{className:"relative flex h-9 w-9 items-center justify-center rounded-2xl bg-black/5 dark:bg-white/10 text-black/80 dark:text-white/80 shadow-soft","aria-label":"Notifications",children:[o.jsx(PE,{size:18}),n?o.jsx("span",{className:"absolute -right-1 -top-1 min-w-[18px] rounded-full bg-rose-500 px-1 text-[11px] font-semibold leading-4 text-white",children:n>99?"99+":n}):null]})}),o.jsxs(dm,{align:"end",className:"w-[320px] p-0 bg-white/90 dark:bg-neutral-900/85",children:[o.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-semibold",children:"Notifications"}),o.jsx("div",{className:"text-xs text-black/50 dark:text-white/55",children:t.length?`${t.length} total`:"No alerts"})]}),o.jsx(Z,{variant:"secondary",size:"sm",className:"rounded-xl",onClick:r,disabled:!t.length,children:"Clear all"})]}),o.jsx(vu,{}),o.jsx("div",{className:"max-h-[320px] overflow-y-auto p-2 space-y-2",children:u.length?u.map(d=>o.jsx("div",{className:ge("rounded-xl px-3 py-2 ring-1 transition-colors",d.read?"bg-white/50 dark:bg-white/5 ring-black/5 dark:ring-white/10":"bg-black/5 dark:bg-white/10 ring-black/10 dark:ring-white/20"),children:o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"text-sm font-semibold text-black/85 dark:text-white/85 truncate",children:d.title||"Notification"}),d.message?o.jsx("div",{className:"mt-0.5 text-xs text-black/60 dark:text-white/65 leading-4 mmg-line-clamp-2",children:d.message}):null,d.created_at?o.jsx("div",{className:"mt-1 text-[11px] text-black/45 dark:text-white/45",children:a(d.created_at)}):null]}),o.jsxs("div",{className:"flex flex-col items-center gap-2",children:[o.jsx(Ft,{variant:"ghost",className:"h-7 w-7",onClick:()=>s(d.id),"aria-label":"Dismiss notification",children:o.jsx(Lp,{size:14})}),o.jsx(Ft,{variant:"ghost",className:"h-7 w-7",onClick:()=>{i(d.id),c(d)},"aria-label":"View notification",children:o.jsx(Dp,{size:14})})]})]})},d.id)):o.jsx("div",{className:"rounded-xl border border-dashed border-black/10 dark:border-white/15 p-4 text-xs text-black/50 dark:text-white/60 text-center",children:"You're all caught up."})}),o.jsx(vu,{}),o.jsx("div",{className:"px-3 py-2",children:o.jsx(Z,{variant:"secondary",className:"w-full rounded-2xl",onClick:()=>e("/app/notifications"),children:"View all notifications"})})]})]}),o.jsx(Os,{open:!!l,onClose:()=>c(null),title:(l==null?void 0:l.title)||"Notification",maxWidth:"520px",children:o.jsx(GO,{notification:l})})]})}function JO(){const{toasts:e,dismissToast:t,formatTime:n}=hm();return e.length?o.jsx("div",{className:"fixed right-6 top-24 z-50 flex w-[320px] flex-col gap-2",children:e.map(r=>{const s=r.notification;return o.jsx(kt,{className:"p-3 bg-white dark:bg-neutral-900 shadow-soft ring-1 ring-black/10 dark:ring-white/10",children:o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"text-sm font-semibold text-black/85 dark:text-white/85 truncate",children:s.title||"Notification"}),s.message?o.jsx("div",{className:"mt-1 text-xs text-black/60 dark:text-white/65 leading-4 mmg-line-clamp-2",children:s.message}):null,s.created_at?o.jsx("div",{className:"mt-1 text-[11px] text-black/45 dark:text-white/45",children:n(s.created_at)}):null]}),o.jsx("button",{type:"button",className:"rounded-full p-1 text-black/50 hover:text-black/80 dark:text-white/50 dark:hover:text-white/80",onClick:()=>t(r.id),"aria-label":"Dismiss notification",children:o.jsx(Lp,{size:14})})]})},r.id)})}):null}async function YO(){return xe("/api/modules/accessible",{method:"GET"})}async function XO(){return xe("/api/sales/chat/history")}async function ZO({conversationId:e,message:t,fileIds:n,onEvent:r,onChunk:s,onDone:i,onError:a,signal:l}){try{const c=qp(),u=wi.API_BASE_URL||"",d=await fetch(`${u}/api/sales/chat/stream`,{method:"POST",headers:{"Content-Type":"application/json",...c?{Authorization:`Bearer ${c}`}:{}},body:JSON.stringify({message:t,conversation_id:e,...n!=null&&n.length?{file_ids:n}:{}}),signal:l});if(d.status===401){ua(),window.dispatchEvent(new CustomEvent("auth:logout")),a==null||a(new Error("Unauthorized"));return}if(!d.ok){const m=await d.json().catch(()=>({}));throw new Error(m.detail||`API error: ${d.status}`)}const h=d.body.getReader(),p=new TextDecoder;let x="",w=!1;for(;;){const{done:m,value:b}=await h.read();if(m)break;x+=p.decode(b,{stream:!0});const v=x.split(`
`);x=v.pop()||"";for(const g of v){const y=g.trim();if(!y.startsWith("data:"))continue;const k=y.replace(/^data:\s?/,"");if(!k||k==="[DONE]"){w=!0,i==null||i();continue}try{const _=JSON.parse(k);r==null||r(_),!r&&s&&(_.type==="chunk"||_.type==="content")&&s(_)}catch{const _={content:k};r==null||r(_),r||s==null||s(_)}}}w||i==null||i()}catch(c){throw a==null||a(c),c}}async function eI(e){const t=new FormData;return t.append("file",e),xe("/api/sales/files/upload",{method:"POST",body:t})}function tI(e){const t=wi.API_BASE_URL||"";return e!=null&&e.preview_url?e.preview_url:e!=null&&e.file_url?e.file_url.startsWith("http")?e.file_url:e.file_url.startsWith("/api/files/")?`${t}/api/sales/files/${e.file_url.replace("/api/files/","")}`:`${t}${e.file_url}`:e!=null&&e.url?e.url.startsWith("http")?e.url:`${t}${e.url}`:e!=null&&e.file_id?`${t}/api/sales/files/${e.file_id}/${encodeURIComponent(e.filename||"file")}`:null}async function nI(){return xe("/api/sales/mockup/locations")}async function rI(e,{timeOfDay:t,finish:n}={}){const r=new URLSearchParams;return t&&r.set("time_of_day",t),n&&r.set("finish",n),xe(`/api/sales/mockup/templates/${encodeURIComponent(e)}?${r.toString()}`)}async function sI(e){return xe("/api/sales/mockup/save-frame",{method:"POST",body:e})}async function iI(e,t){return xe(`/api/sales/mockup/setup/delete/${encodeURIComponent(e)}/${encodeURIComponent(t)}`,{method:"DELETE"})}async function aI(e){return Gp("/api/sales/mockup/test-preview",{method:"POST",body:e})}async function oI(e){return Gp("/api/sales/mockup/generate",{method:"POST",body:e})}async function lI(){return xe("/api/sales/mockup/history")}async function wk(e,t,{timeOfDay:n,finish:r}={}){if(!e||!t)return null;const s=new URLSearchParams;n&&s.set("time_of_day",n),r&&s.set("finish",r);const i=s.toString(),a=`/api/sales/mockup/photo/${encodeURIComponent(e)}/${encodeURIComponent(t)}${i?`?${i}`:""}`;return Gp(a)}async function cI(e,t,{timeOfDay:n,finish:r}={}){const s=await wk(e,t,{timeOfDay:n,finish:r});return s?URL.createObjectURL(s):""}async function uI(e){return xe("/api/sales/proposals",{method:"POST",body:JSON.stringify(e)})}async function dI({service:e,displayType:t}={}){const n=new URLSearchParams;e&&n.set("service",e),t&&n.set("display_type",t);const r=n.toString();return xe(`/api/sales/locations${r?`?${r}`:""}`)}async function hI(e){return e?xe(`/api/sales/locations/${encodeURIComponent(e)}`):null}async function fI(){return xe("/api/sales/proposals/history")}async function pI({limit:e=100,offset:t=0}={}){return xe("/api/rbac/users")}async function mI(e){return xe(`/api/rbac/user/${e}`)}async function gI(e){return xe(`/api/rbac/users/${e}/permissions`)}async function vI(e){return xe("/api/admin/users",{method:"POST",body:JSON.stringify(e)})}async function yI(e,t){return xe(`/api/admin/users/${e}`,{method:"PATCH",body:JSON.stringify(t)})}async function xI(e){return xe(`/api/rbac/users/${encodeURIComponent(e)}/deactivate`,{method:"POST"})}async function wI(e){return xe(`/api/rbac/users/${encodeURIComponent(e)}/reactivate`,{method:"POST"})}async function bI(){return xe("/api/rbac/profiles")}async function kI(e){return xe("/api/rbac/profiles",{method:"POST",body:JSON.stringify(e)})}async function _I(e,t){return xe(`/api/rbac/profiles/${encodeURIComponent(e)}`,{method:"PUT",body:JSON.stringify(t)})}async function SI(e){return xe(`/api/rbac/profiles/${encodeURIComponent(e)}`,{method:"DELETE"})}async function ay(e,t){return xe(`/api/admin/users/${e}/permissions`,{method:"PUT",body:JSON.stringify({permissions:t})})}async function jI(){return await xe("/api/rbac/permissions")}async function Jd(e,t){return xe("/api/dev/permissions/add",{method:"POST",body:JSON.stringify({name:e,description:t})})}async function oy(e){return xe(`/api/dev/permissions/${encodeURIComponent(e)}`,{method:"DELETE"})}async function EI(){return xe("/api/dev/companies")}async function CI(e){return xe("/api/dev/companies/add",{method:"POST",body:JSON.stringify(e)})}async function NI(e,t){return xe(`/api/admin/company/${encodeURIComponent(e)}`,{method:"PUT",body:JSON.stringify(t)})}async function PI(e){return xe(`/api/dev/companies/${encodeURIComponent(e)}`,{method:"DELETE"})}async function RI(){return xe("/api/rbac/permission-sets")}async function TI(e){return xe("/api/rbac/permission-sets",{method:"POST",body:JSON.stringify(e)})}async function AI(e,t){return xe(`/api/rbac/permission-sets/${encodeURIComponent(e)}`,{method:"PUT",body:JSON.stringify(t)})}async function OI(e){return xe(`/api/rbac/permission-sets/${encodeURIComponent(e)}`,{method:"DELETE"})}const fm="mmg-notifications",El="/api/notifications";function II(e,t){if(!e)return t;try{return JSON.parse(e)}catch{return t}}function ks(){if(typeof window>"u")return[];const e=window.localStorage.getItem(fm),t=II(e,[]);return Array.isArray(t)?t:[]}function Ku(e){typeof window>"u"||window.localStorage.setItem(fm,JSON.stringify(e))}function ly(e){const t=new Date().toISOString();return{id:(e==null?void 0:e.id)||(typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`ntf_${Date.now()}_${Math.random().toString(16).slice(2,8)}`),title:(e==null?void 0:e.title)||"Notification",message:(e==null?void 0:e.message)||"",created_at:(e==null?void 0:e.created_at)||t,read:!!(e!=null&&e.read),level:(e==null?void 0:e.level)||"info",meta:(e==null?void 0:e.meta)||{}}}function MI(e){return Array.isArray(e)?e:Array.isArray(e==null?void 0:e.notifications)?e.notifications:Array.isArray(e==null?void 0:e.data)?e.data:[]}function $I(){return xe(El).then(e=>MI(e)).catch(()=>ks())}function DI(e){return xe(El,{method:"POST",body:JSON.stringify(e||{})}).then(t=>(t==null?void 0:t.notification)||(t==null?void 0:t.data)||t||ly(e)).catch(()=>{const t=ks(),n=ly(e),r=[n,...t];return Ku(r),n})}function LI(){return xe(El,{method:"DELETE"}).then(()=>[]).catch(()=>(Ku([]),[]))}function FI(e){return e?xe(`${El}/${encodeURIComponent(e)}`,{method:"DELETE"}).then(()=>ks()).catch(()=>{const t=ks().filter(n=>n.id!==e);return Ku(t),t}):Promise.resolve(ks())}function UI(e){return e?xe(`${El}/${encodeURIComponent(e)}`,{method:"PATCH",body:JSON.stringify({read:!0})}).then(()=>ks()).catch(()=>{const t=ks().map(n=>n.id===e?{...n,read:!0}:n);return Ku(t),t}):Promise.resolve(ks())}const zI=fm,BI={chat:{to:"/app/chat",label:"AI Chat Assistant",icon:IE},mockup:{to:"/app/mockup",label:"Mockup Assistant",icon:AE},proposals:{to:"/app/proposals",label:"Proposal Assistant",icon:$E},admin:{to:"/app/admin",label:"Admin",icon:UE},settings:{to:"/app/settings",label:"Settings",icon:p0}},WI=["chat","mockup","proposals","admin","settings"];function VI(e){return e.includes("/app/chat")?"AI Chat":e.includes("/app/mockup")?"Mockup Studio":e.includes("/app/proposals")?"Sales Proposals":e.includes("/app/notifications")?"Notifications":e.includes("/app/admin")?"Admin Panel":e.includes("/app/settings")?"Settings":"Workspace"}function HI(e){const t=[{name:"sales",tools:["chat","mockup","proposals"],sort_order:1}];return Qp(e)&&t.push({name:"core",tools:["admin"],sort_order:100}),t}function KI(e,t){var l;const r=[...((l=e==null?void 0:e.modules)!=null&&l.length?e.modules:HI(t))||[]].sort((c,u)=>(c.sort_order||0)-(u.sort_order||0)),s=new Set;r.forEach(c=>{(c.tools||[]).forEach(u=>{s.add(u==="ai_costs"?"costs":u)})}),Qp(t)&&s.add("admin"),s.add("settings");const i=[],a=new Set;return WI.forEach(c=>{if(!s.has(c))return;const u=BI[c];u&&!a.has(u.to)&&(a.add(u.to),i.push(u))}),i}function qI(){const{user:e,logout:t}=js(),n=La(),r=Fa(),[s,i]=f.useState(!1),[a,l]=f.useState(!1),c=In({queryKey:["modules","accessible"],queryFn:YO}),u=f.useMemo(()=>((e==null?void 0:e.name)||"User").split(" ").slice(0,2).map(p=>p[0]).join("").toUpperCase(),[e]),d=f.useMemo(()=>KI(c.data,e),[c.data,e]);return o.jsxs("div",{className:"h-screen flex flex-col overflow-hidden",children:[o.jsx("header",{className:"sticky top-0 z-40",children:o.jsx("div",{className:"w-full px-6 lg:px-10",children:o.jsx("div",{className:"mmg-header-card mt-4 rounded-2xl bg-white/65 dark:bg-white/5 backdrop-blur-md shadow-soft ring-1 ring-black/5 dark:ring-white/10",children:o.jsxs("div",{className:"flex items-center justify-between px-4 py-2 gap-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Up,{size:64}),o.jsx("div",{className:"hidden sm:block text-sm text-black/50 dark:text-white/60",children:"|"}),o.jsx("div",{className:"hidden sm:block text-sm font-medium text-black/70 dark:text-white/70",children:VI(n.pathname)})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Z,{variant:"ghost",size:"icon",className:"rounded-2xl lg:hidden",onClick:()=>l(!0),title:"Open sidebar","aria-label":"Open sidebar",children:o.jsx(jd,{size:18})}),o.jsx(QO,{}),o.jsx(V0,{}),o.jsxs(gk,{children:[o.jsx(vk,{asChild:!0,children:o.jsxs("button",{className:"flex items-center gap-2 rounded-2xl px-2.5 py-1.5 hover:bg-black/5 dark:hover:bg-white/10 transition-colors","aria-label":"User menu",children:[o.jsx("div",{className:"h-9 w-9 rounded-2xl bg-black/5 dark:bg-white/10 flex items-center justify-center shadow-soft",children:o.jsx("span",{className:"text-xs font-semibold",children:u})}),o.jsxs("div",{className:"hidden sm:flex flex-col items-start leading-tight",children:[o.jsx("span",{className:"text-sm font-medium",children:e==null?void 0:e.name}),o.jsx("span",{className:"text-xs text-black/50 dark:text-white/60",children:e==null?void 0:e.email})]})]})}),o.jsxs(dm,{align:"end",children:[o.jsx(yk,{children:o.jsxs("div",{className:"flex items-center justify-between gap-3",children:[o.jsx("span",{className:"truncate",children:e==null?void 0:e.email}),o.jsx("span",{className:"text-xs rounded-full px-2 py-0.5 bg-black/5 dark:bg-white/10",children:((e==null?void 0:e.roles)||[]).join(" | ")})]})}),o.jsx(vu,{}),o.jsxs(Tf,{onSelect:()=>r("/app/settings"),children:[o.jsx(p0,{size:16}),"Settings"]}),o.jsxs(Tf,{onSelect:()=>{t(),r("/")},children:[o.jsx(OE,{size:16}),"Logout"]})]})]})]})]})})})}),o.jsx(JO,{}),o.jsx("div",{className:"w-full px-6 lg:px-10 pb-4 flex-1 flex overflow-hidden",children:o.jsxs("div",{className:ge("mt-4 grid grid-cols-1 gap-4 lg:grid-cols-[280px_1fr] flex-1 min-h-0","transition-[grid-template-columns] duration-500",s&&"lg:grid-cols-[64px_1fr] 2xl:grid-cols-[72px_1fr]"),children:[o.jsxs("aside",{className:ge("hidden lg:block rounded-2xl bg-white/55 dark:bg-white/5 backdrop-blur-md shadow-soft ring-1 ring-black/5 dark:ring-white/10","overflow-hidden"),children:[o.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[o.jsx("div",{className:ge("text-s ms-3 font-semibold tracking-wide text-black/50 dark:text-white/60",s&&"hidden lg:block lg:sr-only"),children:"Tools"}),o.jsx(Z,{variant:"ghost",size:"icon",className:"rounded-2xl",onClick:()=>i(h=>!h),title:"Toggle sidebar","aria-label":"Toggle sidebar",children:o.jsx(jd,{size:18})})]}),o.jsx("nav",{className:"px-2 pb-2",children:d.map(h=>{const p=n.pathname===h.to,x=h.icon;return o.jsxs("button",{onClick:()=>r(h.to),className:ge("mmg-nav-btn w-full flex items-center gap-3 rounded-2xl p-2 text-sm transition-colors mb-1.5 shadow-soft",p?"mmg-nav-btn-active":"","text-base",s&&"lg:justify-center lg:gap-0"),children:[o.jsx("span",{className:"mmg-nav-icon h-8 w-8 shrink-0 rounded-2xl bg-black/4 dark:bg-white/8 flex items-center justify-center shadow-soft",children:o.jsx(x,{size:22})}),o.jsx("span",{className:ge("min-w-0 truncate",s&&"hidden"),children:h.label})]},h.to)})}),o.jsx("div",{className:"px-3 pb-3 pt-1",children:o.jsx("div",{className:ge("h-px bg-black/5 dark:bg-white/10",s&&"lg:mx-auto lg:w-10")})})]}),o.jsx("main",{className:"min-h-0 h-full",children:o.jsx(Pj,{})})]})}),o.jsxs("div",{className:ge("fixed inset-0 z-50 lg:hidden",a?"pointer-events-auto":"pointer-events-none"),children:[o.jsx("div",{className:ge("absolute inset-0 bg-black/40 transition-opacity",a?"opacity-100":"opacity-0"),onClick:()=>l(!1)}),o.jsxs("aside",{className:ge("absolute inset-y-0 left-0 w-72 max-w-full rounded-r-2xl bg-white/90 dark:bg-neutral-900/95","backdrop-blur-xl shadow-2xl ring-1 ring-black/10 dark:ring-white/10","transition-transform duration-200",a?"translate-x-0":"-translate-x-full"),children:[o.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[o.jsx("div",{className:"text-sm font-semibold tracking-wide text-black/60 dark:text-white/70",children:"Tools"}),o.jsx(Z,{variant:"ghost",size:"icon",className:"rounded-2xl",onClick:()=>l(!1),title:"Close sidebar","aria-label":"Close sidebar",children:o.jsx(jd,{size:18})})]}),o.jsx("nav",{className:"px-2 pb-3",children:d.map(h=>{const p=n.pathname===h.to,x=h.icon;return o.jsxs("button",{onClick:()=>{r(h.to),l(!1)},className:ge("mmg-nav-btn w-full flex items-center gap-2.5 rounded-2xl p-2.5 text-sm transition-colors mb-1.5 shadow-soft",p?"mmg-nav-btn-active":"","text-sm"),children:[o.jsx("span",{className:"mmg-nav-icon h-9 w-9 shrink-0 rounded-2xl bg-black/4 dark:bg-white/8 flex items-center justify-center shadow-soft",children:o.jsx(x,{size:20})}),o.jsx("span",{className:"min-w-0 truncate",children:h.label})]},h.to)})})]})]})]})}function GI(){const[e,t]=f.useState(null),[n,r]=f.useState([]),[s,i]=f.useState(""),[a,l]=f.useState(null),[c,u]=f.useState(!1),[d,h]=f.useState(!1),p=f.useRef(null),x=f.useRef(null),w=f.useRef(null),m=f.useRef(null),b=f.useRef(!0),v=In({queryKey:["chat","history"],queryFn:XO,enabled:!0}),g=f.useMemo(()=>(s.trim().length>0||!!a)&&!c,[s,a,c]);f.useEffect(()=>{var j;if(d||v.isLoading)return;const _=v.data;if(_&&((j=_.messages)!=null&&j.length||_.session_id||_.conversation_id)){t(_.session_id||_.conversation_id||null);const E=(_.messages||[]).map(XI);r(E.length?E:[cy()])}else r([cy()]);h(!0)},[v.data,v.isLoading,d]),f.useEffect(()=>{const _=x.current;if(!_)return;const j=()=>{const C=_.scrollHeight-_.scrollTop-_.clientHeight<=120;b.current=C};return j(),_.addEventListener("scroll",j,{passive:!0}),()=>_.removeEventListener("scroll",j)},[]);const y=Dt.useCallback((_="smooth",j=!1)=>{var E;!j&&!b.current||(E=w.current)==null||E.scrollIntoView({behavior:_,block:"end"})},[]);f.useEffect(()=>{const _=c?"auto":"smooth";requestAnimationFrame(()=>y(_))},[n,c,y]),f.useEffect(()=>{d&&requestAnimationFrame(()=>y("auto",!0))},[d,y]),f.useEffect(()=>()=>{var _,j;return(j=(_=m.current)==null?void 0:_.abort)==null?void 0:j.call(_)},[]);async function k(){var O,D;if(!g)return;const _=s.trim(),j=_||(a?`Please process this file: ${a.name}`:""),E=crypto.randomUUID(),C=a?[{file_id:`local-${Date.now()}`,filename:a.name,preview_url:URL.createObjectURL(a)}]:[],I={id:E,role:"user",content:_,files:C,status:null},P=crypto.randomUUID(),z={id:P,role:"assistant",content:"",files:[],status:"Thinking..."};r(B=>[...B,I,z]),i(""),l(null),b.current=!0,requestAnimationFrame(()=>y("auto",!0));try{u(!0),(D=(O=m.current)==null?void 0:O.abort)==null||D.call(O);const B=new AbortController;m.current=B;let A=[],L="",q=null,N=!1;if(a){const S=await eI(a);if(!(S!=null&&S.file_id))throw new Error("Upload failed");A=[S.file_id];const U={file_id:S.file_id,filename:a.name,file_url:S.file_url||S.url||""};r(W=>W.map(F=>{var ee,J,te,ce;return F.id===E?{...F,files:[{...U,preview_url:((J=(ee=F.files)==null?void 0:ee[0])==null?void 0:J.preview_url)||((ce=(te=F.files)==null?void 0:te[0])==null?void 0:ce.url)||""}]}:F}))}await ZO({conversationId:e,message:j,fileIds:A,signal:B.signal,onEvent:S=>{var F,ee;const U=((F=S==null?void 0:S.result)==null?void 0:F.pdf_filename)||(S==null?void 0:S.pdf_filename),W=J=>!J||!U||J.pdf_filename?J:{...J,pdf_filename:U};if(U&&r(J=>J.map(te=>te.id===P&&!te.pdf_filename?{...te,pdf_filename:U}:te)),S!=null&&S.conversation_id&&t(J=>J||S.conversation_id),S!=null&&S.error){r(J=>J.map(te=>te.id===P?{...te,status:null,content:`Error: ${S.error}`}:te));return}if((S==null?void 0:S.type)==="status"){r(J=>J.map(te=>te.id===P?{...te,status:S.content||"Processing..."}:te)),S.message_id&&(q=S.message_id);return}if((S==null?void 0:S.type)==="delete"){S.message_id&&S.message_id===q&&(L="",q=null,r(J=>J.map(te=>te.id===P?{...te,status:"Thinking...",content:""}:te)));return}if((S==null?void 0:S.type)==="tool_call"){const J=((ee=S.tool)==null?void 0:ee.name)||"processing";r(te=>te.map(ce=>ce.id===P?{...ce,status:`Processing ${J}...`}:ce));return}if(((S==null?void 0:S.type)==="chunk"||(S==null?void 0:S.type)==="content")&&S.content){S.message_id&&S.message_id!==q&&(q=S.message_id),L=S.type==="content"?S.content:L+S.content,r(J=>J.map(te=>te.id===P?{...te,status:null,content:L}:te));return}if(S!=null&&S.content&&!S.type){L+=S.content,r(J=>J.map(te=>te.id===P?{...te,status:null,content:L}:te));return}if((S==null?void 0:S.type)==="files"&&S.files){if(N=!0,r(J=>J.map(te=>te.id===P?{...te,files:[...te.files||[],...S.files.map(W)]}:te)),!L){const J=S.files.find(te=>te.comment);J!=null&&J.comment&&(L=J.comment,r(te=>te.map(ce=>ce.id===P?{...ce,status:null,content:L}:ce)))}return}if((S==null?void 0:S.type)==="file"&&(S.file||S.url)){const J=W(S.file||S);N=!0,r(te=>te.map(ce=>ce.id===P?{...ce,files:[...ce.files||[],J]}:ce)),!L&&J.comment&&(L=J.comment,r(te=>te.map(ce=>ce.id===P?{...ce,status:null,content:L}:ce)));return}if(S!=null&&S.files){N=!0,r(J=>J.map(te=>te.id===P?{...te,files:[...te.files||[],...S.files.map(W)]}:te));return}typeof S=="string"&&S.trim()&&(L+=S,r(J=>J.map(te=>te.id===P?{...te,status:null,content:L}:te)))},onDone:()=>{!L&&!N&&r(S=>S.map(U=>U.id===P?{...U,status:null,content:"I'm ready to help. What would you like to do?"}:U))}})}catch(B){r(A=>A.map(L=>L.id===P?{...L,status:null,content:(B==null?void 0:B.message)||"Failed to get response"}:L))}finally{u(!1)}}return o.jsxs("div",{className:"h-full flex flex-col gap-4 min-h-0",children:[o.jsx(Ot,{className:"p-4 overflow-hidden flex-1 min-h-0",children:o.jsx("div",{ref:x,className:"h-full overflow-y-auto px-2",children:o.jsxs("div",{className:"space-y-3",children:[!d&&v.isLoading?o.jsx(Ee,{text:"Loading conversation",className:"text-sm text-black/60 dark:text-white/65"}):null,n.map(_=>o.jsx(QI,{msg:_,onMediaLoad:()=>y("auto")},_.id)),o.jsx("div",{ref:w})]})})}),o.jsxs(Ot,{className:"p-3",children:[a?o.jsxs("div",{className:"mb-2 flex items-center justify-between rounded-2xl bg-black/5 dark:bg-white/10 px-3 py-2 text-sm",children:[o.jsx("div",{className:"truncate",children:a.name}),o.jsx("button",{className:"opacity-70 hover:opacity-100",onClick:()=>l(null),children:""})]}):null,o.jsxs("div",{className:"flex items-end gap-2",children:[o.jsx("input",{ref:p,type:"file",className:"hidden",onChange:_=>{var j;return l(((j=_.target.files)==null?void 0:j[0])||null)},accept:"image/*,.pdf,.xlsx,.xls,.csv,.docx,.doc"}),o.jsx(Z,{variant:"ghost",size:"icon",className:"rounded-2xl",title:"Attach file",onClick:()=>{var _;return(_=p.current)==null?void 0:_.click()},children:o.jsx(DE,{size:18})}),o.jsx(JI,{value:s,onChange:i,placeholder:"Type your message...",onEnter:k}),o.jsx(Z,{size:"icon",className:"w-12 rounded-2xl",title:"Send",disabled:!g,onClick:k,children:o.jsx(FE,{size:18})})]}),o.jsx("div",{className:"mt-2 text-xs text-black/45 dark:text-white/55",children:"AI can make mistakes. Verify important information."})]})]})}function QI({msg:e,onMediaLoad:t}){var c;const n=e.role==="user",r=f.useMemo(()=>sM(e.content||""),[e.content]),s=f.useMemo(()=>Af(e.status||""),[e.status]),i=f.useMemo(()=>!e.status&&ZI(e.content||""),[e.status,e.content]),a=f.useMemo(()=>Af(e.content||""),[e.content]),l=f.useRef(new Map);return o.jsx("div",{className:n?"flex justify-end":"flex justify-start",children:o.jsxs("div",{className:["max-w-[85%] rounded-2xl px-3 py-2 text-sm shadow-soft break-words","ring-1 ring-black/5 dark:ring-white/10 backdrop-blur-xs",n?"bg-black text-white dark:bg-white dark:text-black":"bg-white/70 dark:bg-white/10"].join(" "),children:[e.status||i?o.jsx(YI,{text:s||a}):o.jsx("div",{dangerouslySetInnerHTML:{__html:r}}),(c=e.files)!=null&&c.length?o.jsx("div",{className:"mt-2 space-y-1",children:e.files.map((u,d)=>{const h=tI(u);if(!h)return null;const p=u.pdf_filename||e.pdf_filename,x=nM(p?{...u}:u,h,l.current),w=go(x),m=["jpg","jpeg","png","gif","webp","bmp"].includes(w),b=!n,v=w==="pdf";return m?o.jsx("div",{className:"rounded-xl border border-black/5 dark:border-white/10 bg-white/70 dark:bg-white/5 p-2",children:b?o.jsxs(o.Fragment,{children:[o.jsx("a",{href:h,target:"_blank",rel:"noopener noreferrer",className:"block overflow-hidden rounded-lg",children:o.jsx("img",{src:h,alt:x,className:"max-h-64 w-full object-cover",loading:"lazy",onLoad:t})}),o.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[o.jsx(Z,{asChild:!0,size:"sm",variant:"ghost",className:"rounded-xl",children:o.jsxs("a",{href:h,target:"_blank",rel:"noopener noreferrer",children:[o.jsx(au,{size:14,className:"mr-1"}),"Open"]})}),o.jsx(Z,{size:"sm",variant:"secondary",className:"rounded-xl",children:o.jsxs("span",{role:"link",tabIndex:0,onClick:g=>{g.preventDefault(),cc(h,x)},onKeyDown:g=>{(g.key==="Enter"||g.key===" ")&&(g.preventDefault(),cc(h,x))},className:"inline-flex items-center",children:[o.jsx(iu,{size:14,className:"mr-1"}),"Download"]})})]})]}):o.jsx("div",{className:"overflow-hidden rounded-lg",children:o.jsx("img",{src:h,alt:x,className:"max-h-64 w-full object-cover",loading:"lazy",onLoad:t})})},u.file_id||h||d):o.jsx("div",{className:"rounded-xl border border-black/5 dark:border-white/10 bg-white/70 dark:bg-white/5 p-3",children:o.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"flex items-center gap-2 text-xs uppercase tracking-wide text-black/50 dark:text-white/60",children:v?o.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-red-500/10 text-red-700 dark:text-red-300 px-2 py-0.5",children:[o.jsx(f0,{size:12}),"PDF"]}):o.jsx("span",{className:"inline-flex items-center gap-1 rounded-full bg-black/5 dark:bg-white/10 px-2 py-0.5",children:w?w.toUpperCase():"FILE"})}),b?o.jsx("div",{className:"mt-1 text-xs font-semibold text-black/80 dark:text-white/85 truncate",children:x}):null]}),b?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Z,{asChild:!0,size:"sm",variant:"ghost",className:"rounded-xl",children:o.jsxs("a",{href:h,target:"_blank",rel:"noopener noreferrer",children:[o.jsx(au,{size:14,className:"mr-1"}),"Open"]})}),o.jsx(Z,{size:"sm",variant:"secondary",className:"rounded-xl",children:o.jsxs("span",{role:"link",tabIndex:0,onClick:g=>{g.preventDefault(),cc(h,x)},onKeyDown:g=>{(g.key==="Enter"||g.key===" ")&&(g.preventDefault(),cc(h,x))},className:"inline-flex items-center",children:[o.jsx(iu,{size:14,className:"mr-1"}),"Download"]})})]}):null]})},u.file_id||h||d)})}):null]})})}function JI({value:e,onChange:t,placeholder:n,onEnter:r,disabled:s}){const i=f.useRef(null);f.useEffect(()=>{const l=i.current;if(!l)return;l.style.height="0px";const u=22*5+16;l.style.height=Math.min(l.scrollHeight,u)+"px"},[e]);function a(l){l.key==="Enter"&&!l.shiftKey&&(l.preventDefault(),r==null||r())}return o.jsx("textarea",{ref:i,rows:1,value:e,disabled:s,onChange:l=>t(l.target.value),onKeyDown:a,placeholder:n,className:"w-full resize-none rounded-2xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-4 py-2 text-sm outline-none focus:ring-2 focus:ring-black/10 dark:focus:ring-white/15 overflow-auto",style:{maxHeight:"132px"}})}function YI({text:e}){return o.jsxs("span",{className:"inline-flex items-center gap-2 opacity-80",children:[o.jsx("span",{children:e||"Thinking"}),o.jsxs("span",{className:"mmg-ellipsis","aria-hidden":"true",children:[o.jsx("span",{className:"mmg-ellipsis-dot",style:{animationDelay:"0ms"}}),o.jsx("span",{className:"mmg-ellipsis-dot",style:{animationDelay:"120ms"}}),o.jsx("span",{className:"mmg-ellipsis-dot",style:{animationDelay:"240ms"}})]})]})}function XI(e){return{id:e.id||e.message_id||crypto.randomUUID(),role:e.role||e.sender||"assistant",content:e.content||e.message||"",files:e.files||e.attachments||[],status:null}}function Af(e){return e?String(e).replace(/[]/g,"").replace(/[_*`]/g,"").replace(/\.+$/,"").replace(/\s+/g," ").trim():""}function ZI(e){const t=Af(e);return t?!!(t==="Thinking"||t.startsWith("Processing")||t.startsWith("Building Proposal")):!1}function go(e){if(!e)return"";const n=String(e).split("?")[0].split("#")[0].split(".");return n.length<=1?"":n.pop().toLowerCase()}function eM(e){if(!e)return"";try{const n=new URL(e,window.location.href).pathname.split("/").filter(Boolean);return n.length?decodeURIComponent(n[n.length-1]):""}catch{const n=e.split("?")[0].split("#")[0].split("/").filter(Boolean);return n.length?decodeURIComponent(n[n.length-1]):""}}function tM(e){if(!e)return!0;const t=e.trim().toLowerCase();if(!t||t==="file"||t==="download")return!0;const n=t.replace(/\.[^.]+$/,"");return!!(n==="tmp"||n==="temp"||/^[a-f0-9-]{16,}$/.test(n)||/^file[-_]?\d+$/.test(n)||/^(tmp|temp)/.test(n)||/^upload[-_]?.+$/.test(n))}function nM(e,t,n){const r=(e==null?void 0:e.filename)||"",s=r||(e==null?void 0:e.filename)||(e==null?void 0:e.title)||"",i=eM(t);e!=null&&e.file_id||e!=null&&e.id;let a=s||i||"";const l=go(a)||go(i)||go(t);if(r){const c=go(a)||"pdf";return a.toLowerCase().endsWith(`.${c}`)||(a=`${a}.${c}`),a}return tM(a)?l==="pdf"?a="Proposal.pdf":l?a=`Attachment.${l}`:a="Attachment":l&&!a.toLowerCase().endsWith(`.${l}`)&&(a=`${a}.${l}`),a||(l?`Attachment.${l}`:"Attachment")}async function cc(e,t){try{const n=qp(),r=await fetch(e,{headers:n?{Authorization:`Bearer ${n}`}:void 0});if(!r.ok)throw new Error("Download failed");const s=await r.blob(),i=URL.createObjectURL(s),a=document.createElement("a");a.href=i,a.download=t,document.body.appendChild(a),a.click(),a.remove(),setTimeout(()=>URL.revokeObjectURL(i),1e3)}catch{const n=document.createElement("a");n.href=e,n.download=t,n.target="_blank",n.rel="noopener noreferrer",document.body.appendChild(n),n.click(),n.remove()}}function cy(){return{id:crypto.randomUUID(),role:"assistant",content:`Good ${rM()}, how can I help?`,files:[],status:null}}function rM(){const e=new Date().getHours();return e>=5&&e<12?"morning":e>=12&&e<17?"afternoon":e>=17&&e<21?"evening":"night"}function Of(e){return String(e||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function io(e){return e?Of(e).replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer" class="chat-link">$1</a>').replace(/!\[([^\]]*)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer" class="chat-link">[Image: $1]</a>').replace(/\*\*\*(.+?)\*\*\*/g,"<strong><em>$1</em></strong>").replace(/___(.+?)___/g,"<strong><em>$1</em></strong>").replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/__(?!INLINE_CODE_|CODE_BLOCK_)(.+?)__/g,"<strong>$1</strong>").replace(new RegExp("(?<!\\*)\\*(?!\\*)(.+?)(?<!\\*)\\*(?!\\*)","g"),"<em>$1</em>").replace(new RegExp("(?<!\\w)_(?!_)(.+?)(?<!_)_(?!\\w)","g"),"<em>$1</em>").replace(/~~(.+?)~~/g,"<del>$1</del>").replace(/==(.+?)==/g,'<mark class="chat-highlight">$1</mark>'):""}function sM(e){if(!e)return"";const t=[];let n=e.replace(/```(\w*)\n?([\s\S]*?)```/g,(d,h,p)=>{const x=t.length;return t.push({lang:h||"",code:p.trim()}),`__CODE_BLOCK_${x}__`});const r=[];n=n.replace(/`([^`]+)`/g,(d,h)=>{const p=r.length;return r.push(h),`__INLINE_CODE_${p}__`});const s=n.split(`
`);let i=[],a=!1,l=!1,c=!1;for(let d=0;d<s.length;d++){let h=s[d];const p=h.match(/^__CODE_BLOCK_(\d+)__$/);if(p){a&&(i.push("</ul>"),a=!1),l&&(i.push("</ol>"),l=!1),c&&(i.push("</blockquote>"),c=!1);const v=t[parseInt(p[1])],g=v.lang?` class="language-${v.lang}"`:"";i.push(`<pre class="chat-code-block"><code${g}>${Of(v.code)}</code></pre>`);continue}const x=h.match(/^(#{1,6})\s+(.*)$/);if(x){a&&(i.push("</ul>"),a=!1),l&&(i.push("</ol>"),l=!1),c&&(i.push("</blockquote>"),c=!1);const v=x[1].length,g=io(x[2]);i.push(`<h${v} class="chat-header chat-h${v}">${g}</h${v}>`);continue}if(/^[-*_]{3,}\s*$/.test(h)){a&&(i.push("</ul>"),a=!1),l&&(i.push("</ol>"),l=!1),c&&(i.push("</blockquote>"),c=!1),i.push('<hr class="chat-hr">');continue}const w=h.match(/^>\s*(.*)$/);if(w){a&&(i.push("</ul>"),a=!1),l&&(i.push("</ol>"),l=!1),c||(i.push('<blockquote class="chat-blockquote">'),c=!0),i.push(io(w[1])+"<br>");continue}else c&&(i.push("</blockquote>"),c=!1);const m=h.match(/^(\s*)([-*])\s+(.*)$/);if(m){l&&(i.push("</ol>"),l=!1),a||(i.push('<ul class="chat-list">'),a=!0);const v=io(m[3]);i.push(`<li>${v}</li>`);continue}else a&&(i.push("</ul>"),a=!1);const b=h.match(/^(\s*)(\d+)\.\s+(.*)$/);if(b){a&&(i.push("</ul>"),a=!1),l||(i.push('<ol class="chat-numbered-list">'),l=!0);const v=io(b[3]);i.push(`<li>${v}</li>`);continue}else l&&(i.push("</ol>"),l=!1);if(h.trim()===""){i.push("<br>");continue}i.push(io(h)),d<s.length-1&&i.push("<br>")}a&&i.push("</ul>"),l&&i.push("</ol>"),c&&i.push("</blockquote>");let u=i.join("");return r.forEach((d,h)=>{u=u.replace(`__INLINE_CODE_${h}__`,`<code class="chat-inline-code">${Of(d)}</code>`)}),u}function iM({location:e,timeOfDay:t,finish:n,templateOptions:r,getTemplateKey:s,defaultFrameConfig:i,templateKey:a,setTemplateKey:l}){const[c,u]=f.useState(""),d=a??c,h=l??u,[p,x]=f.useState(null),[w,m]=f.useState(i),[b,v]=f.useState(""),[g,y]=f.useState(null),[k,_]=f.useState([]),[j,E]=f.useState(!1),[C,I]=f.useState(""),P=Dt.useRef([]),z=f.useMemo(()=>{const B=new Map;return r.forEach(A=>{B.set(s(A),A)}),B},[s,r]),O=e&&(g||b.trim())&&!j;f.useEffect(()=>{if(!d){x(null),m(i);return}const B=z.get(d);if(!B){x(null),m(i);return}x(B),m(Cc(B.config,i))},[i,d,z]),f.useEffect(()=>{d&&h("")},[n,t]),f.useEffect(()=>{P.current=k},[k]),f.useEffect(()=>()=>{P.current.forEach(B=>{B!=null&&B.url&&URL.revokeObjectURL(B.url)})},[]);async function D(){if(O){I("");try{E(!0);const B=new FormData;B.append("location_key",e),p?(B.append("time_of_day",p.time_of_day||t||"all"),B.append("finish",p.finish||n||"all"),B.append("specific_photo",p.photo),B.append("frame_config",JSON.stringify(w))):(B.append("time_of_day",t||"all"),B.append("finish",n||"all")),b.trim()?B.append("ai_prompt",b.trim()):g&&B.append("creative",g);const A=await oI(B),L=URL.createObjectURL(A);_(q=>{const N=[{url:L,location:e},...q];if(N.length>3){const S=N.pop();S!=null&&S.url&&URL.revokeObjectURL(S.url)}return N})}catch(B){I((B==null?void 0:B.message)||"Unable to generate mockup.")}finally{E(!1)}}}return{templateKey:d,setTemplateKey:h,aiPrompt:b,setAiPrompt:v,creativeFile:g,setCreativeFile:y,lastResults:k,generating:j,generateError:C,setGenerateError:I,onGenerate:D,canGenerate:O}}function aM(e){const t=iM(e);return o.jsx(oM,{...e,...t})}function oM({location:e,setLocation:t,setTemplateKey:n,locationOptions:r,locationsQuery:s,timeOfDay:i,setTimeOfDay:a,finish:l,setFinish:c,timeOfDayOptions:u,finishOptions:d,templateKey:h,templateOptions:p,templatesQuery:x,templateThumbs:w,getTemplateKey:m,creativeFile:b,setCreativeFile:v,creativeDragActive:g,handleCreativeDragOver:y,handleCreativeDragLeave:k,handleCreativeDrop:_,aiPrompt:j,setAiPrompt:E,generateError:C,setGenerateError:I,generating:P,onGenerate:z,canGenerate:O,lastResults:D}){function B(){t(""),a("all"),c("all"),n(""),v(null),E(""),I("")}return o.jsxs(Ot,{children:[o.jsx(Qt,{children:o.jsx(hn,{children:"Mockup Generator"})}),o.jsxs(Jt,{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsxs(he,{label:"Location",children:[o.jsxs("select",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:e,onChange:A=>{t(A.target.value),n("")},children:[o.jsx("option",{value:"",children:"Select a location"}),r.map(A=>o.jsx("option",{value:A.key,children:A.name},A.key))]}),s.isLoading?o.jsx("div",{className:"mt-1 text-xs text-black/50 dark:text-white/60",children:o.jsx(Ee,{text:"Loading locations"})}):null]}),o.jsx(he,{label:"Time of Day",children:o.jsx("select",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:i,onChange:A=>a(A.target.value),children:u.map(A=>o.jsx("option",{value:A.value,children:A.label},A.value))})}),o.jsx(he,{label:"Billboard Finish",children:o.jsx("select",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:l,onChange:A=>c(A.target.value),children:d.map(A=>o.jsx("option",{value:A.value,children:A.label},A.value))})})]}),e?o.jsxs("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white/40 dark:bg-white/5 p-4 shadow-soft space-y-3",children:[o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Templates (optional)"}),o.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:"Select a template or keep random."})]}),h?o.jsx(Z,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:()=>n(""),children:"Use random"}):null]}),x.isLoading?o.jsx(Ee,{text:"Loading templates",className:"text-sm text-black/60 dark:text-white/65"}):null,!x.isLoading&&!p.length?o.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No templates for this selection."}):null,o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-2",children:p.map(A=>{const L=m(A),q=L===h;return o.jsxs("button",{type:"button",onClick:()=>n(L),className:ge("rounded-xl border border-black/5 dark:border-white/10 bg-white/60 dark:bg-white/5 p-3 text-left text-sm transition flex flex-col",q?"border-2":"hover:bg-black/5 dark:hover:bg-white/10"),style:q?{borderColor:"rgb(var(--brand-accent) / 0.6)",boxShadow:"0 0 0 1px rgb(var(--brand-accent) / 0.25)"}:void 0,children:[o.jsx("div",{className:"overflow-hidden rounded-lg border border-black/5 dark:border-white/10 bg-black/5",children:w[L]?o.jsx("img",{src:w[L],alt:A.photo,className:"w-full h-40 object-cover",loading:"lazy"}):o.jsx("div",{className:"h-40 grid place-items-center text-xs text-black/50 dark:text-white/60",children:o.jsx(Ee,{text:"Loading",className:"text-xs text-black/50 dark:text-white/60"})})}),o.jsxs("div",{className:"mt-auto pt-2 space-y-1",children:[o.jsx("div",{className:"font-semibold truncate",children:A.photo}),o.jsxs("div",{className:"text-xs text-black/55 dark:text-white/60",children:[A.time_of_day,"/",A.finish," - ",A.frame_count," frame",A.frame_count>1?"s":""]})]})]},L)})})]}):null,o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsx(he,{label:"Upload Creative/Ad Image",children:b?o.jsxs("div",{className:`flex items-center justify-between rounded-xl bg-black/5 dark:bg-white/10 px-3 py-2 text-sm min-h-[120px] ${g?"ring-2 ring-black/20 dark:ring-white/30":""}`,onDragOver:y,onDragLeave:k,onDrop:_,children:[o.jsx("div",{className:"truncate",children:b.name}),o.jsx("button",{className:"opacity-70 hover:opacity-100",onClick:()=>v(null),children:"x"})]}):o.jsxs("label",{className:`block cursor-pointer rounded-xl border border-dashed border-black/10 dark:border-white/15 px-4 py-5 text-center text-sm bg-white/50 dark:bg-white/5 min-h-[120px] ${g?"ring-2 ring-black/20 dark:ring-white/30":""}`,onDragOver:y,onDragLeave:k,onDrop:_,children:[o.jsx("input",{type:"file",className:"hidden",accept:"image/jpeg,image/png,image/webp,image/gif",onChange:A=>{var L;return v(((L=A.target.files)==null?void 0:L[0])||null)}}),o.jsx("div",{className:"font-semibold mb-1",children:"Click to upload/ Drag and Drop an Image"}),o.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:"JPG, PNG, WEBP, GIF up to 10MB"})]})}),o.jsx(he,{label:"Or use AI prompt",children:o.jsx("textarea",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-black/10 dark:focus:ring-white/15 min-h-[120px]",value:j,onChange:A=>E(A.target.value),placeholder:"Describe what you want to generate..."})})]}),C?o.jsx("div",{className:"rounded-xl bg-red-50/70 text-red-700 px-4 py-2 text-sm dark:bg-red-500/10 dark:text-red-300",children:C}):null,o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Z,{className:"rounded-2xl",onClick:z,disabled:!O,children:P?o.jsx(Ee,{text:"Generating Mockup"}):"Generate Mockup"}),o.jsx(Z,{variant:"secondary",className:"rounded-2xl",onClick:B,disabled:P,children:"Reset"})]}),o.jsxs("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white/40 dark:bg-white/5 p-4",children:[!D.length&&!P?o.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"Result will appear here"}):null,P?o.jsx(Ee,{text:"Processing mockup",className:"text-sm text-black/60 dark:text-white/65"}):null,D.length?o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Last 3 Generated Mockups"}),D.map((A,L)=>o.jsxs("div",{className:"space-y-3",children:[o.jsx("img",{src:A.url,alt:"Generated mockup",className:"w-full rounded-xl border border-black/5 dark:border-white/10"}),o.jsx("div",{className:"flex gap-2",children:o.jsx("a",{href:A.url,download:`mockup_${A.location||"result"}.jpg`,className:"inline-flex items-center justify-center rounded-2xl bg-black text-white px-4 py-2 text-sm dark:bg-white dark:text-black",children:"Download"})})]},`mockup-result-${L}`))]}):null]})]})]})}function lM({location:e,setLocation:t,setTemplateKey:n,locationOptions:r,locationsQuery:s,timeOfDay:i,setTimeOfDay:a,finish:l,setFinish:c,timeOfDayOptions:u,finishOptions:d,editingTemplate:h,editingTemplateLoading:p,stopEditTemplate:x,templatesOpen:w,setTemplatesOpen:m,templateOptions:b,templatesQuery:v,templateThumbs:g,getTemplateKey:y,startEditTemplate:k,deleteTemplate:_,setupPhoto:j,setSetupPhoto:E,handleSetupPhoto:C,handleSetupDragOver:I,handleSetupDragLeave:P,handleSetupDrop:z,setupDragActive:O,handleSetupPhotoClear:D,framesJson:B,setFramesJson:A,setFramesJsonDirty:L,applyFramesJsonToCanvas:q,buildFramesPayload:N,setupImageReady:S,greenscreenOpen:U,setGreenscreenOpen:W,greenscreenColor:F,setGreenscreenColor:ee,colorTolerance:J,setColorTolerance:te,RangeField:ce,handleGreenscreenDetect:Oe,canDetectGreenscreen:it,hasActiveFrame:Ve,frameSettingsOpen:at,setFrameSettingsOpen:gt,setupFrameConfig:Zt,handleSetupFrameConfigChange:vt,FrameConfigControls:G,previewOpen:ae,setPreviewOpen:re,testPreviewMode:V,setTestPreviewMode:Q,testPreviewImgRef:ie,testPreviewUrlRef:K,previewImgRef:ke,drawPreview:Ce,activeTestCreativeFile:Re,updateTestCreativeForActive:ut,generateTestPreview:_t,testPreviewing:rr,activeFrameIndex:sr,canvasRef:Te,canvasWidth:Ie,canvasHeight:We,handleCanvasPointerDown:dt,handleCanvasPointerMove:wr,handleCanvasPointerUp:Ka,handleCanvasWheel:Xe,setupHint:Ue,handleZoomOut:Un,handleZoomIn:zn,handleFitToScreen:fn,zoomPercent:Cl,pixelUpscale:qa,setPixelUpscale:pn,setupError:Me,setupMessage:Le,addFrame:_i,resetCurrentFrame:It,saveSetup:zt,setupSaving:Si,clearAllFrames:ji,currentPoints:Ei,frameCount:Is}){return o.jsxs(Ot,{children:[o.jsx(Qt,{children:o.jsx(hn,{children:"Mockup Setup"})}),o.jsxs(Jt,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsxs(he,{label:"Location",children:[o.jsxs("select",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:e,onChange:oe=>{t(oe.target.value),n("")},children:[o.jsx("option",{value:"",children:"Select a location"}),r.map(oe=>o.jsx("option",{value:oe.key,children:oe.name},oe.key))]}),s.isLoading?o.jsx("div",{className:"mt-1 text-xs text-black/50 dark:text-white/60",children:o.jsx(Ee,{text:"Loading locations"})}):null]}),o.jsx(he,{label:"Time of Day",children:o.jsx("select",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:i,onChange:oe=>a(oe.target.value),children:u.map(oe=>o.jsx("option",{value:oe.value,children:oe.label},oe.value))})}),o.jsx(he,{label:"Billboard Finish",children:o.jsx("select",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:l,onChange:oe=>c(oe.target.value),children:d.map(oe=>o.jsx("option",{value:oe.value,children:oe.label},oe.value))})})]}),h?o.jsxs("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white/50 dark:bg-white/5 px-4 py-3 flex flex-wrap items-center justify-between gap-2",children:[o.jsxs("div",{className:"text-sm",children:[o.jsx("span",{className:"font-semibold",children:"Editing template:"})," ",h.photo," (",h.time_of_day,"/",h.finish,")"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[p?o.jsx(Ee,{text:"Loading",className:"text-xs text-black/50 dark:text-white/60"}):null,o.jsx(Z,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:x,children:"Stop editing"})]})]}):null,h?null:o.jsxs("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white/40 dark:bg-white/5 p-4 shadow-soft",children:[o.jsxs("button",{type:"button",className:"flex w-full items-center justify-between gap-3 text-left",onClick:()=>m(oe=>!oe),"aria-expanded":w,children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Existing templates"}),o.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:e?`${b.length} template${b.length===1?"":"s"}`:"Select a location to load templates."})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-black/50 dark:text-white/55",children:[o.jsx("span",{children:w?"Hide":"Show"}),o.jsx(fr,{size:16,className:ge("transition-transform",w&&"rotate-180")})]})]}),w?o.jsxs("div",{className:"mt-3 space-y-2",children:[v.isLoading?o.jsx(Ee,{text:"Loading templates",className:"text-sm text-black/60 dark:text-white/65"}):null,!v.isLoading&&(!b.length||!e)?o.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No templates for this selection."}):null,o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-2",children:b.map(oe=>o.jsxs("div",{className:"rounded-xl border border-black/5 dark:border-white/10 bg-white/60 dark:bg-white/5 p-3 text-sm transition flex flex-col",children:[o.jsx("div",{className:"overflow-hidden rounded-lg border border-black/5 dark:border-white/10 bg-black/5",children:g[y(oe)]?o.jsx("img",{src:g[y(oe)],alt:oe.photo,className:"w-full h-40 object-cover",loading:"lazy"}):o.jsx("div",{className:"h-40 grid place-items-center text-xs text-black/50 dark:text-white/60",children:o.jsx(Ee,{text:"Loading",className:"text-xs text-black/50 dark:text-white/60"})})}),o.jsxs("div",{className:"mt-auto pt-2 space-y-2",children:[o.jsx("div",{className:"font-semibold truncate",children:oe.photo}),o.jsxs("div",{className:"text-xs text-black/55 dark:text-white/60",children:[oe.time_of_day,"/",oe.finish," - ",oe.frame_count," frame",oe.frame_count>1?"s":""]}),null]})]},`${oe.photo}-${oe.time_of_day}-${oe.finish}`))})]}):null]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsx(he,{label:"Upload Billboard Photo",children:j?o.jsxs("div",{className:`flex items-center justify-between rounded-xl bg-black/5 dark:bg-white/10 px-3 py-2 text-sm min-h-[120px] ${O?"ring-2 ring-black/20 dark:ring-white/30":""}`,onDragOver:I,onDragLeave:P,onDrop:z,children:[o.jsx("div",{className:"truncate",children:j.name}),o.jsx("button",{className:"opacity-70 hover:opacity-100",onClick:D,children:"x"})]}):o.jsxs("label",{className:`block cursor-pointer rounded-xl border border-dashed border-black/10 dark:border-white/15 px-4 py-5 text-center text-sm bg-white/50 dark:bg-white/5 min-h-[120px] ${O?"ring-2 ring-black/20 dark:ring-white/30":""}`,onDragOver:I,onDragLeave:P,onDrop:z,children:[o.jsx("input",{type:"file",className:"hidden",accept:"image/jpeg,image/png,image/webp",onChange:oe=>{var Nl;const en=(Nl=oe.target.files)==null?void 0:Nl[0];en&&(E(en),C(en))}}),o.jsx("div",{className:"font-semibold mb-1",children:"Click to upload/ Drag and Drop an Image"}),o.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:"JPG, PNG, WEBP up to 20MB"})]})}),o.jsxs(he,{label:"Frames JSON",children:[o.jsx("textarea",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-black/10 dark:focus:ring-white/15 min-h-[120px] font-mono",value:B,onChange:oe=>{A(oe.target.value),L(!0)},placeholder:'[{"points":[0,0,0,0],"config":{"brightness":100}}]'}),o.jsxs("div",{className:"flex items-center justify-between text-xs text-black/50 dark:text-white/60",children:[o.jsx("span",{children:"Auto-filled from canvas. Edit to override."}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{type:"button",className:"text-xs underline",onClick:q,children:"Apply to canvas"}),o.jsx("button",{type:"button",className:"text-xs underline",onClick:()=>{L(!1);const oe=N();A(oe.length?JSON.stringify(oe,null,2):"[]")},children:"Sync from canvas"})]})]})]})]}),S?o.jsxs(o.Fragment,{children:[o.jsxs(kt,{className:"bg-white/50 dark:bg-white/5 p-4",children:[o.jsxs("button",{type:"button",className:"flex w-full items-center justify-between gap-3 text-left",onClick:()=>W(oe=>!oe),"aria-expanded":U,children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Green Screen Detection"}),o.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:"Detect billboard frame using chroma key."})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-black/50 dark:text-white/55",children:[o.jsx("span",{children:U?"Hide":"Edit"}),o.jsx(fr,{size:16,className:ge("transition-transform",U&&"rotate-180")})]})]}),U?o.jsxs("div",{className:"mt-3 space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{type:"color",value:F,onChange:oe=>ee(oe.target.value.toUpperCase()),className:"h-10 w-16 rounded-lg border border-black/10 dark:border-white/20"}),o.jsx("input",{type:"text",value:F,onChange:oe=>ee(oe.target.value.toUpperCase()),className:"flex-1 rounded-xl bg-white/70 dark:bg-white/10 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none font-mono"})]}),o.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:"Tip: Shift+click to pick a color. Shift+drag or middle mouse pans."}),o.jsx(ce,{label:"Color Tolerance",value:J,min:10,max:100,onChange:oe=>te(oe),helper:"Lower is stricter, higher is more forgiving."}),o.jsx(Z,{className:"rounded-2xl w-full",onClick:Oe,disabled:!it,children:"Detect Green Screen Now"})]}):null]}),Ve?o.jsxs("div",{className:"rounded-2xl bg-blue-50/70 dark:bg-blue-500/10 ring-1 ring-blue-500/20 p-4 shadow-soft",children:[o.jsxs("button",{type:"button",className:"flex w-full items-center justify-between gap-3 text-left",onClick:()=>gt(oe=>!oe),"aria-expanded":at,children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100",children:"Current Frame Settings"}),o.jsx("div",{className:"text-xs text-blue-800 dark:text-blue-200",children:"Adjust the current frame appearance."})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-800 dark:text-blue-200",children:[o.jsx("span",{children:at?"Hide":"Edit"}),o.jsx(fr,{size:16,className:ge("transition-transform",at&&"rotate-180")})]})]}),at?o.jsxs("div",{className:"mt-3 space-y-3",children:[o.jsx(G,{config:Zt,onChange:vt}),o.jsx("div",{className:"text-xs text-blue-800 dark:text-blue-200",children:"Settings apply to the current frame only."})]}):null]}):null,Ve?o.jsxs("div",{className:"rounded-2xl bg-blue-50/70 dark:bg-blue-500/10 ring-1 ring-blue-500/20 p-4 shadow-soft",children:[o.jsxs("button",{type:"button",className:"flex w-full items-center justify-between gap-3 text-left",onClick:()=>re(oe=>!oe),"aria-expanded":ae,children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100",children:"Test Preview Mode"}),o.jsx("div",{className:"text-xs text-blue-800 dark:text-blue-200",children:"Preview creative on the current frame before saving."})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-800 dark:text-blue-200",children:[o.jsx("span",{children:ae?"Hide":"Edit"}),o.jsx(fr,{size:16,className:ge("transition-transform",ae&&"rotate-180")})]})]}),ae?o.jsxs("div",{className:"mt-3 space-y-2",children:[o.jsxs("label",{className:"flex items-center gap-3 text-sm",children:[o.jsx("input",{type:"checkbox",checked:V,onChange:oe=>{Q(oe.target.checked),oe.target.checked||(ie.current=null,K.current="",Ce())}}),o.jsx("span",{className:"font-semibold text-blue-900 dark:text-blue-100",children:"Enable preview"})]}),V?o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-xs font-semibold text-blue-900 dark:text-blue-100",children:"Upload Test Creative"}),o.jsx("input",{type:"file",accept:"image/*",onChange:oe=>{var en;return ut(((en=oe.target.files)==null?void 0:en[0])||null)},className:"w-full text-sm"}),Re?o.jsxs("div",{className:"text-xs text-blue-800 dark:text-blue-200",children:["Selected: ",Re.name]}):null,o.jsx(Z,{className:"rounded-2xl w-full",onClick:_t,disabled:!Re||!j||!Ve||rr,children:rr?o.jsx(Ee,{text:"Generating"}):"Generate Test Preview"}),sr>=0?o.jsxs("div",{className:"text-xs text-blue-800 dark:text-blue-200",children:["Preview applies to frame ",sr+1,"."]}):null]}):null]}):null]}):null]}):null]}),S?o.jsxs("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white/40 dark:bg-white/5 p-3 space-y-2",children:[o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Z,{variant:"secondary",size:"sm",className:"h-8 px-3",onClick:Un,disabled:!ke.current,children:"-"}),o.jsx(Z,{variant:"secondary",size:"sm",className:"h-8 px-3",onClick:zn,disabled:!ke.current,children:"+"}),o.jsx(Z,{variant:"ghost",size:"sm",onClick:fn,disabled:!ke.current,children:"Fit"}),o.jsxs("span",{className:"text-xs text-black/60 dark:text-white/60",children:[Cl,"%"]})]}),o.jsxs("label",{className:"flex items-center gap-2 text-xs text-black/70 dark:text-white/70",children:[o.jsx("input",{type:"checkbox",checked:qa,onChange:oe=>pn(oe.target.checked)}),"Pixel Upscale"]})]}),o.jsx("canvas",{ref:Te,width:Ie,height:We,className:"w-full h-auto rounded-xl border border-black/10 dark:border-white/10 bg-white",onPointerDown:dt,onPointerMove:wr,onPointerUp:Ka,onPointerLeave:Ka,onWheel:Xe,style:{touchAction:"none"}}),o.jsx("div",{className:"text-xs text-black/60 dark:text-white/60",children:Ue})]}):o.jsx("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-black/5 dark:bg-white/10 px-4 py-3 text-sm text-black/60 dark:text-white/65",children:"Upload a billboard photo or pick an existing template to enable the canvas tools."})]}),Me?o.jsx("div",{className:"rounded-xl bg-red-50/70 text-red-700 px-4 py-2 text-sm dark:bg-red-500/10 dark:text-red-300",children:Me}):null,Le?o.jsx("div",{className:"rounded-xl bg-green-50/70 text-green-700 px-4 py-2 text-sm dark:bg-green-500/10 dark:text-green-200",children:Le}):null,o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx(Z,{className:"rounded-2xl",onClick:_i,disabled:Ei.length!==4,children:"Add Frame"}),o.jsx(Z,{variant:"secondary",className:"rounded-2xl",onClick:It,children:"Reset Current Frame"}),o.jsx(Z,{className:"rounded-2xl",onClick:zt,disabled:Si||!e||!j,children:Si?o.jsx(Ee,{text:"Saving"}):h?"Save Changes":"Save All Frames"}),o.jsx(Z,{variant:"ghost",className:"rounded-2xl",onClick:()=>ji(!1),children:"Clear All Frames"})]}),Is?o.jsxs("div",{className:"rounded-xl bg-blue-50/70 text-blue-900 px-3 py-2 text-sm dark:bg-blue-500/10 dark:text-blue-100",children:["Frames configured: ",Is]}):null]})]})}function cM({enabled:e}){const t=In({queryKey:["mockup","history"],queryFn:lI,enabled:e}),n=f.useMemo(()=>{var r,s,i;return Array.isArray(t.data)?t.data:(r=t.data)!=null&&r.history?t.data.history:(s=t.data)!=null&&s.mockups?t.data.mockups:(i=t.data)!=null&&i.items?t.data.items:t.data||[]},[t.data]);return{historyQuery:t,historyItems:n}}function uM(e){const t=cM(e);return o.jsx(dM,{...t})}function dM({historyQuery:e,historyItems:t}){return o.jsxs(Ot,{children:[o.jsx(Qt,{children:o.jsx(hn,{children:"History"})}),o.jsx(Jt,{children:e.isLoading?o.jsx(Ee,{text:"Loading",className:"text-sm text-black/60 dark:text-white/65"}):e.isError?o.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"Unable to load history right now."}):o.jsxs("div",{className:"space-y-2",children:[(t||[]).map((n,r)=>{const s=n.image_url||n.mockup_url||n.result_url||n.file_url||n.url||n.image||"",i=n.location_name||n.location||n.location_key||n.location_id||"Mockup",a=n.time_of_day||n.timeOfDay||"",l=n.finish||n.billboard_finish||"",c=n.created_at||n.generated_at||n.date_generated||"",u=["mockup",i,a||"all",l||"all"].filter(Boolean).join("_");return o.jsxs(kt,{className:"p-3 space-y-2",children:[s?o.jsx("div",{className:"overflow-hidden rounded-xl border border-black/5 dark:border-white/10 bg-black/5",children:o.jsx("img",{src:s,alt:i,className:"w-full h-40 object-cover",loading:"lazy"})}):o.jsx("div",{className:"rounded-xl border border-dashed border-black/10 dark:border-white/15 px-3 py-6 text-sm text-black/60 dark:text-white/65 text-center",children:"Preview not available"}),o.jsx("div",{className:"text-base font-semibold",children:i}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1.5 text-xs text-black/65 dark:text-white/65",children:[c?o.jsxs("div",{className:"flex flex-wrap items-baseline gap-1",children:[o.jsx("span",{className:"uppercase tracking-wide text-xs text-black/45 dark:text-white/50",children:"Generated"}),o.jsx("span",{className:"font-semibold text-black/80 dark:text-white/85",children:new Date(c).toLocaleString()})]}):null,a?o.jsxs("div",{className:"flex flex-wrap items-baseline gap-1",children:[o.jsx("span",{className:"uppercase tracking-wide text-xs text-black/45 dark:text-white/50",children:"Time of Day"}),o.jsx("span",{className:"font-semibold text-black/80 dark:text-white/85",children:a})]}):null,l?o.jsxs("div",{className:"flex flex-wrap items-baseline gap-1",children:[o.jsx("span",{className:"uppercase tracking-wide text-xs text-black/45 dark:text-white/50",children:"Finish"}),o.jsx("span",{className:"font-semibold text-black/80 dark:text-white/85",children:l})]}):null]}),s?o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx(Z,{asChild:!0,size:"sm",variant:"ghost",className:"rounded-xl",children:o.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",children:"Open"})}),o.jsx(Z,{asChild:!0,size:"sm",variant:"secondary",className:"rounded-xl",children:o.jsx("a",{href:s,download:u,children:"Download"})})]}):null]},n.id||n.file_id||s||r)}),t!=null&&t.length?null:o.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No mockups yet."})]})})]})}const uy=[{value:"all",label:"All (Default)"},{value:"day",label:"Day"},{value:"night",label:"Night"}],dy=[{value:"all",label:"All (Default)"},{value:"gold",label:"Gold"},{value:"silver",label:"Silver"}],uc=1200,dc=800,hM=.5,fM=4,hy=.1,pM=4,Ws={brightness:100,contrast:100,saturation:100,depthMultiplier:15,lightDirection:"top",imageBlur:0,edgeBlur:1,overlayOpacity:0,shadowIntensity:0,lightingAdjustment:0,colorTemperature:0,vignette:0,edgeSmoother:3,sharpening:0},bk=[{value:"top-left",label:"Top Left",glyph:""},{value:"top",label:"Top",glyph:""},{value:"top-right",label:"Top Right",glyph:""},{value:"left",label:"Left",glyph:""},{value:"center",label:"Center",glyph:""},{value:"right",label:"Right",glyph:""},{value:"bottom-left",label:"Bottom Left",glyph:""},{value:"bottom",label:"Bottom",glyph:""},{value:"bottom-right",label:"Bottom Right",glyph:""}],mM=bk.reduce((e,t)=>(e[t.value]=t.label,e),{});function gM(e,t,n){const r=(e-t)/(n-t)*100;return`linear-gradient(to right, rgb(var(--brand-accent, 102 126 234)) ${r}%, rgba(0, 0, 0, 0.1) ${r}%)`}function vM(){const e=Br(),{user:t}=js(),n=Nc(t,"sales:mockups:setup"),[r,s]=f.useState("generate"),[i,a]=f.useState(""),[l,c]=f.useState("all"),[u,d]=f.useState("all"),[h,p]=f.useState(""),x=f.useRef(r),[w,m]=f.useState(null),[b,v]=f.useState(!1),[g,y]=f.useState(""),[k,_]=f.useState(""),[j,E]=f.useState("[]"),[C,I]=f.useState(!1),[P,z]=f.useState({}),[O,D]=f.useState(null),[B,A]=f.useState(!1),[L,q]=f.useState(!1),[N,S]=f.useState(!1),[U,W]=f.useState("Select a location, upload a billboard photo, then click four corners to define the frame."),[F,ee]=f.useState(Ws),[J,te]=f.useState("#1CFF1C"),[ce,Oe]=f.useState(40),[it,Ve]=f.useState([]),[at,gt]=f.useState(0),[Zt,vt]=f.useState(1),[G,ae]=f.useState(!1),[re,V]=f.useState(-1),[Q,ie]=f.useState(!1),[K,ke]=f.useState(!0),[Ce,Re]=f.useState(!0),[ut,_t]=f.useState(!0),[rr,sr]=f.useState(!0),[Te,Ie]=f.useState(!1),[We,dt]=f.useState({}),[wr,Ka]=f.useState(!1),Xe=f.useRef(null),Ue=f.useRef(null),Un=f.useRef(null),zn=f.useRef(""),fn=f.useRef(new Map),Cl=f.useRef({}),qa=f.useRef({}),pn=f.useRef(!1),Me=f.useRef([]),Le=f.useRef([]),_i=f.useRef(-1),It=f.useRef({zoom:1,panX:0,panY:0}),zt=f.useRef({isDrawing:!1,isDraggingCorner:!1,isDraggingFrame:!1,dragFrameIndex:-1,dragPointIndex:-1,startX:0,startY:0,isPanning:!1,shiftPanPending:!1,hasPanned:!1,panStartX:0,panStartY:0,panOriginX:0,panOriginY:0}),Si=f.useRef({pointers:new Map,isPinching:!1,startDistance:0,startZoom:1,startPanX:0,startPanY:0,startCenterX:0,startCenterY:0}),ji=f.useRef({drawX:0,drawY:0,drawW:0,drawH:0,scale:1,imgNaturalW:0,imgNaturalH:0}),Ei=In({queryKey:["mockup","locations"],queryFn:nI}),Is=In({queryKey:["mockup","templates",i,l,u],queryFn:()=>rI(i,{timeOfDay:l,finish:u}),enabled:!!i});f.useEffect(()=>()=>{fn.current.forEach(R=>{R!=null&&R.url&&URL.revokeObjectURL(R.url)}),fn.current.clear(),zn.current&&URL.revokeObjectURL(zn.current)},[]),f.useEffect(()=>{Cl.current=We},[We]),f.useEffect(()=>{qa.current=P},[P]);const oe=f.useMemo(()=>{const R=Ei.data;return Array.isArray(R)?R:(R==null?void 0:R.locations)||[]},[Ei.data]),en=f.useMemo(()=>{const R=Is.data;return Array.isArray(R)?R:(R==null?void 0:R.templates)||[]},[Is.data]),Nl=r==="history";f.useEffect(()=>{x.current!==r&&(a(""),c("all"),d("all"),p(""),x.current==="setup"&&O&&gm()),x.current=r},[O,r]),f.useEffect(()=>{z(R=>{const M=new Set(en.map(X=>ao(X))),$={};return Object.entries(R).forEach(([X,H])=>{M.has(X)?$[X]=H:H&&URL.revokeObjectURL(H)}),$})},[en]),f.useEffect(()=>{let R=!0;if(!i||!en.length)return()=>{};const M=en.filter($=>!qa.current[ao($)]);return M.length?((async()=>{for(const $ of M){let X="";try{X=await cI(i,$.photo,{timeOfDay:$.time_of_day||l,finish:$.finish||u})}catch{X=""}if(!R){X&&URL.revokeObjectURL(X);return}if(X){const H=ao($);z(ve=>ve[H]?(URL.revokeObjectURL(X),ve):{...ve,[H]:X})}}})(),()=>{R=!1}):()=>{}},[i,en,l,u]),f.useEffect(()=>()=>{Object.values(qa.current).forEach(R=>{R&&URL.revokeObjectURL(R)})},[]);const Sk=!!Ue.current,jk=it.length===4||re>=0,Bn=re>=0?`frame-${re}`:it.length===4?"current":null,pm=Bn?We[Bn]:null,Ek=Math.round(Zt*100);f.useEffect(()=>{if(!Bn){Un.current=null,zn.current="";return}const R=fn.current.get(Bn);Un.current=(R==null?void 0:R.img)||null,zn.current=(R==null?void 0:R.url)||"",Te&&ze()},[Bn,We,Te]),f.useEffect(()=>{Ue.current&&Ga(),ze()},[Te]),f.useEffect(()=>{ze()},[G]),f.useEffect(()=>{Q&&Ue.current&&ze()},[Q]),f.useEffect(()=>{if(C)return;const R=Ci();E(R.length?JSON.stringify(R,null,2):"[]")},[it,at,F,C]);async function Ck(){if(y(""),_(""),!i){_("Select a location first");return}if(!w){_("Upload a billboard photo first");return}let R=Ci();if(j.trim())try{R=JSON.parse(j)}catch(M){_((M==null?void 0:M.message)||"Frames JSON is invalid");return}if(!Array.isArray(R)||!R.length){_("Add at least one frame before saving");return}try{v(!0);const M=new FormData;M.append("location_key",i),M.append("time_of_day",l||"all"),M.append("finish",u||"all"),M.append("frames_data",JSON.stringify(R)),M.append("photo",w),await sI(M),y("Saved frames successfully"),Sm(!0),D(null),A(!1),m(null),Ue.current=null,ie(!1),e.invalidateQueries({queryKey:["mockup","templates"]}),ze()}catch(M){_((M==null?void 0:M.message)||"Failed to save template")}finally{v(!1)}}async function Nk(R){if(i)try{await iI(i,R),e.invalidateQueries({queryKey:["mockup","templates"]})}catch(M){_((M==null?void 0:M.message)||"Failed to delete template")}}function mm(R,{resetFrames:M=!0}={}){Ue.current=R,ie(!0);const $=Lk(R.naturalWidth,R.naturalHeight);ji.current={drawX:$.x,drawY:$.y,drawW:$.w,drawH:$.h,scale:$.scale,imgNaturalW:R.naturalWidth,imgNaturalH:R.naturalHeight},Qu(!1),M&&(Me.current=[],Le.current=[],Pn(),pn.current=!1,qk(),Pl(),mn(),$s(),E("[]"),I(!1)),Ga(),ze()}function Pk(R,M){return new Promise(($,X)=>{const H=new Image;H.onload=()=>{mm(H,M),$()},H.onerror=()=>X(new Error("Failed to load image")),H.src=R})}function Rk(R,M){return new Promise(($,X)=>{const H=new FileReader;H.onload=ve=>{const fe=new Image;fe.onload=()=>{mm(fe,M),$()},fe.onerror=()=>X(new Error("Failed to load image")),fe.src=ve.target.result},H.onerror=()=>X(new Error("Failed to read image")),H.readAsDataURL(R)})}function qu(R){return R?Array.isArray(R)&&R.length===4&&Array.isArray(R[0])?R:Array.isArray(R)&&R.length>=8&&typeof R[0]=="number"?[[R[0],R[1]],[R[2],R[3]],[R[4],R[5]],[R[6],R[7]]]:null:null}function Tk(R){if(!R)return[];let M=R.frames||R.frames_data||R.framesData||R.frame_data||R.frame_points;if(typeof M=="string")try{M=JSON.parse(M)}catch{M=[]}return Array.isArray(M)?M.map($=>{const X=qu(($==null?void 0:$.points)||($==null?void 0:$.frame_points)||$)||qu($==null?void 0:$.points);if(!X)return null;let H=($==null?void 0:$.config)||(R==null?void 0:R.config);if(typeof H=="string")try{H=JSON.parse(H)}catch{H=null}const ve=Cc(H,Ws);return{points:X,config:ve,source:"existing"}}).filter(Boolean):[]}async function Ak(R){if(!(!i||!(R!=null&&R.photo))){D(R),A(!0),_(""),y(""),m(null);try{R.time_of_day&&c(R.time_of_day),R.finish&&d(R.finish);const M=await wk(i,R.photo,{timeOfDay:R.time_of_day||l,finish:R.finish||u});if(!M)throw new Error("Failed to load template image");const $=URL.createObjectURL(M);try{await Pk($,{resetFrames:!1})}finally{URL.revokeObjectURL($)}const X=Tk(R);Le.current=X,Me.current=[],Pn(),pn.current=!1,mn(),$s(),E(X.length?JSON.stringify(Ci(),null,2):"[]"),I(!1),ze();const H=new File([M],R.photo,{type:M.type||"image/jpeg"});m(H)}catch(M){_((M==null?void 0:M.message)||"Failed to load template for editing")}finally{A(!1)}}}function gm(){D(null),A(!1),y(""),_(""),c("all"),d("all"),m(null),Ue.current=null,ie(!1),Me.current=[],Le.current=[],Pn(),pn.current=!1,mn(),$s(),E("[]"),I(!1),Ga(),ze()}function Gu(R){const M=Xe.current;if(!M)return null;const $=M.getBoundingClientRect(),X=M.width/$.width,H=M.height/$.height;return{x:(R.clientX-$.left)*X,y:(R.clientY-$.top)*H}}function vm(R){return Math.min(fM,Math.max(hM,R))}function Ms(){const{drawX:R,drawY:M,drawW:$,drawH:X,scale:H}=ji.current,{zoom:ve,panX:fe,panY:ye}=It.current;return{drawX:R+fe,drawY:M+ye,drawW:$*ve,drawH:X*ve,scale:H*ve}}function Qu(R=!0){It.current={zoom:1,panX:0,panY:0},vt(1),R&&ze()}function ym(){const R=Xe.current;return R?{x:R.width/2,y:R.height/2}:{x:uc/2,y:dc/2}}function xm(R,M,$){const{drawX:X,drawY:H,scale:ve}=ji.current,{zoom:fe,panX:ye,panY:He}=It.current,$e=vm(R),ue=ve*fe,we=ve*$e;if(!ue||!we)return;const be=(M-(X+ye))/ue,et=($-(H+He))/ue,Ge=M-X-be*we,tn=$-H-et*we;It.current={zoom:$e,panX:Ge,panY:tn},vt($e),ze()}function Ok(R,M){if(!Ue.current)return;const{drawX:$,drawY:X,drawW:H,drawH:ve,scale:fe}=Ms();if(R<$||M<X||R>$+H||M>X+ve)return;const ye=Math.floor((R-$)/fe),He=Math.floor((M-X)/fe),$e=document.createElement("canvas");$e.width=Ue.current.naturalWidth,$e.height=Ue.current.naturalHeight;const ue=$e.getContext("2d");ue.drawImage(Ue.current,0,0);const we=ue.getImageData(ye,He,1,1),[be,et,Ge]=we.data,tn=`#${[be,et,Ge].map(ir=>ir.toString(16).padStart(2,"0")).join("").toUpperCase()}`;te(tn)}function Ik(R){}function Mk(){if(!Ue.current)return;const R=ym();xm(It.current.zoom+hy,R.x,R.y)}function $k(){if(!Ue.current)return;const R=ym();xm(It.current.zoom-hy,R.x,R.y)}function Dk(){Ue.current&&Qu()}function Lk(R,M){const $=Math.min(uc/R,dc/M),X=Math.round(R*$),H=Math.round(M*$),ve=Math.round((uc-X)/2),fe=Math.round((dc-H)/2);return{x:ve,y:fe,w:X,h:H,scale:$}}function Fk(){const R=Xe.current;if(!R)return;const M=R.getContext("2d");M.clearRect(0,0,R.width,R.height),M.fillStyle="#f8f9fa",M.fillRect(0,0,R.width,R.height)}function ze(){const R=Xe.current;if(!R)return;const M=R.getContext("2d");Fk();const $=Ue.current;if(!$)return;const{drawX:X,drawY:H,drawW:ve,drawH:fe,scale:ye}=Ms();if(M.imageSmoothingEnabled=!G,G||(M.imageSmoothingQuality="high"),Te&&Un.current){M.drawImage(Un.current,X,H,ve,fe);return}M.drawImage($,X,H,ve,fe),Le.current.forEach((ue,we)=>{const be=ue.points,et=_i.current===we,Ge=1;M.fillStyle="rgba(128, 128, 128, 0.3)",M.strokeStyle=et?"#667eea":"#333",M.lineWidth=Ge,M.setLineDash([8,4]),M.lineCap="butt",M.lineJoin="miter",M.beginPath(),be.forEach((tn,ir)=>{const Ds=X+tn[0]*ye,gn=H+tn[1]*ye;ir===0?M.moveTo(Ds,gn):M.lineTo(Ds,gn)}),M.closePath(),M.fill(),M.stroke(),M.setLineDash([]),be.forEach(tn=>{const ir=X+tn[0]*ye,Ds=H+tn[1]*ye,gn=4;M.fillStyle=et?"#667eea":"#333",M.fillRect(ir-gn/2,Ds-gn/2,gn,gn)})});const $e=Me.current;$e.length>0&&(M.fillStyle="rgba(128, 128, 128, 0.3)",M.strokeStyle="#667eea",M.lineWidth=1,M.setLineDash([8,4]),M.lineCap="butt",M.lineJoin="miter",M.beginPath(),$e.forEach((we,be)=>{const et=X+we[0]*ye,Ge=H+we[1]*ye;be===0?M.moveTo(et,Ge):M.lineTo(et,Ge)}),$e.length===4&&(M.closePath(),M.fill()),M.stroke(),M.setLineDash([]),$e.forEach(we=>{const be=X+we[0]*ye,et=H+we[1]*ye;M.fillStyle="#667eea",M.fillRect(be-4/2,et-4/2,4,4)}))}function mn(){Ve([...Me.current])}function $s(){gt(Le.current.length)}function Pn(){_i.current=-1,V(-1)}function Uk(){if(re>=0){const R=Le.current[re];return R?{key:`frame-${re}`,points:R.points,config:R.config}:null}return Me.current.length===4?{key:"current",points:Me.current,config:F}:null}function zk(){fn.current.forEach(R=>{R!=null&&R.url&&URL.revokeObjectURL(R.url)}),fn.current.clear(),zn.current&&URL.revokeObjectURL(zn.current),zn.current="",Un.current=null}function Pl(){zk(),Ie(!1),dt({})}function Bk(R){Bn&&dt(M=>{const $={...M};return R?$[Bn]=R:delete $[Bn],$})}function Rl(R){Me.current=[],mn(),_i.current=R,V(R);const M=Le.current[R];M!=null&&M.config&&ee(Cc(M.config,Ws)),_t(!0),I(!1);const $=Ci();E($.length?JSON.stringify($,null,2):"[]")}function Wk(R,M){ee($=>{const X={...$,[R]:M},H=_i.current;return H>=0&&Le.current[H]&&(Le.current[H].config=X),X})}function wm(R,M,$){const{drawX:X,drawY:H,scale:ve}=Ms(),fe=(R-X)/ve,ye=(M-H)/ve;let He=!1;for(let $e=0,ue=$.length-1;$e<$.length;ue=$e++){const we=$[$e][0],be=$[$e][1],et=$[ue][0],Ge=$[ue][1];be>ye!=Ge>ye&&fe<(et-we)*(ye-be)/(Ge-be)+we&&(He=!He)}return He}function bm(R,M){if(Me.current.length===4&&wm(R,M,Me.current))return-1;for(let $=Le.current.length-1;$>=0;$-=1)if(wm(R,M,Le.current[$].points))return $;return null}function km(R,M){const{drawX:X,drawY:H,scale:ve}=Ms();if(Me.current.length>0)for(let fe=0;fe<Me.current.length;fe+=1){const ye=X+Me.current[fe][0]*ve,He=H+Me.current[fe][1]*ve;if(Math.hypot(R-ye,M-He)<15)return{frame:-1,point:fe}}for(let fe=0;fe<Le.current.length;fe+=1){const ye=Le.current[fe].points;for(let He=0;He<ye.length;He+=1){const $e=X+ye[He][0]*ve,ue=H+ye[He][1]*ve;if(Math.hypot(R-$e,M-ue)<15)return{frame:fe,point:He}}}return null}function Ga(){if(!Ue.current){W("Select a location, upload a billboard photo, then click four corners to define the frame.");return}W("Click and drag to draw a box. Use +/Fit to zoom; Shift+drag or middle mouse pans; pinch to zoom.")}function _m(R){R&&Rk(R,{resetFrames:!0}).catch(M=>{_((M==null?void 0:M.message)||"Failed to load image")})}function Vk(R){if(r!=="setup"||!Ue.current)return;const M=Gu(R);if(!M)return;const{x:$,y:X}=M,H=zt.current;if(R.pointerType==="touch"){const be=Si.current;if(be.pointers.set(R.pointerId,{x:$,y:X}),be.pointers.size===2){const[et,Ge]=Array.from(be.pointers.values()),tn=(et.x+Ge.x)/2,ir=(et.y+Ge.y)/2;be.isPinching=!0,be.startDistance=Math.hypot(et.x-Ge.x,et.y-Ge.y),be.startZoom=It.current.zoom,be.startPanX=It.current.panX,be.startPanY=It.current.panY,be.startCenterX=tn,be.startCenterY=ir,H.isDrawing=!1,H.isDraggingCorner=!1,H.isDraggingFrame=!1,H.isPanning=!1,Xe.current&&(Xe.current.style.cursor="grabbing");return}}if(R.button===1||R.shiftKey){R.preventDefault(),H.isPanning=!0,H.shiftPanPending=R.shiftKey&&R.button===0,H.hasPanned=!1,H.panStartX=$,H.panStartY=X,H.panOriginX=It.current.panX,H.panOriginY=It.current.panY,Xe.current&&(Xe.current.style.cursor="grabbing");return}H.shiftPanPending=!1,H.hasPanned=!1;const{drawX:fe,drawY:ye,drawW:He,drawH:$e}=Ms(),ue=km($,X);if(ue){zt.current.isDraggingCorner=!0,zt.current.dragFrameIndex=ue.frame,zt.current.dragPointIndex=ue.point,ue.frame>=0?Rl(ue.frame):(Pn(),_t(!0)),ze();return}const we=bm($,X);if(we!==null){zt.current.isDraggingFrame=!0,zt.current.dragFrameIndex=we,zt.current.startX=$,zt.current.startY=X,we>=0?Rl(we):(Pn(),_t(!0)),Xe.current&&(Xe.current.style.cursor="move"),ze();return}$<fe||X<ye||$>fe+He||X>ye+$e||(pn.current=!1,zt.current.isDrawing=!0,zt.current.startX=$,zt.current.startY=X,Pn())}function Hk(R){if(r!=="setup"||!Ue.current)return;const M=Gu(R);if(!M)return;const{x:$,y:X}=M,H=zt.current;if(R.pointerType==="touch"){const ue=Si.current;if(ue.pointers.has(R.pointerId)&&ue.pointers.set(R.pointerId,{x:$,y:X}),ue.isPinching&&ue.pointers.size>=2){const[we,be]=Array.from(ue.pointers.values()),et=(we.x+be.x)/2,Ge=(we.y+be.y)/2,tn=Math.hypot(we.x-be.x,we.y-be.y),{drawX:ir,drawY:Ds,scale:gn}=ji.current,Ju=ue.startZoom;if(ue.startDistance>0&&gn){const Tl=vm(Ju*(tn/ue.startDistance)),o_=(ue.startCenterX-(ir+ue.startPanX))/(gn*Ju),l_=(ue.startCenterY-(Ds+ue.startPanY))/(gn*Ju),c_=et-ir-o_*gn*Tl,u_=Ge-Ds-l_*gn*Tl;It.current={zoom:Tl,panX:c_,panY:u_},vt(Tl),ze()}return}}if(H.isPanning){R.preventDefault();const ue=$-H.panStartX,we=X-H.panStartY;if(H.shiftPanPending&&!H.hasPanned){if(Math.hypot(ue,we)<pM)return;H.hasPanned=!0}It.current.panX=H.panOriginX+ue,It.current.panY=H.panOriginY+we,ze();return}const{drawX:ve,drawY:fe,scale:ye}=Ms();if(H.isDraggingCorner){const ue=($-ve)/ye,we=(X-fe)/ye;H.dragFrameIndex===-1?Me.current[H.dragPointIndex]=[Math.round(ue),Math.round(we)]:Le.current[H.dragFrameIndex].points[H.dragPointIndex]=[Math.round(ue),Math.round(we)],ze();return}if(H.isDraggingFrame){const ue=($-H.startX)/ye,we=(X-H.startY)/ye;H.dragFrameIndex===-1?Me.current=Me.current.map(be=>[Math.round(be[0]+ue),Math.round(be[1]+we)]):Le.current[H.dragFrameIndex].points=Le.current[H.dragFrameIndex].points.map(be=>[Math.round(be[0]+ue),Math.round(be[1]+we)]),H.startX=$,H.startY=X,ze();return}if(H.isDrawing){ze();const ue=Xe.current.getContext("2d");ue.fillStyle="rgba(128, 128, 128, 0.3)";const we=$-H.startX,be=X-H.startY;ue.fillRect(H.startX,H.startY,we,be),ue.strokeStyle="#667eea",ue.lineWidth=1,ue.setLineDash([8,4]),ue.lineCap="butt",ue.lineJoin="miter",ue.strokeRect(H.startX,H.startY,we,be),ue.setLineDash([]);return}const He=km($,X),$e=bm($,X);Xe.current&&(He?Xe.current.style.cursor="pointer":$e!==null?Xe.current.style.cursor="move":Xe.current.style.cursor="crosshair")}function Kk(R){if(r!=="setup"||!Ue.current)return;const M=Gu(R),$=zt.current;if(R.pointerType==="touch"){const Ge=Si.current;if(Ge.pointers.has(R.pointerId)&&Ge.pointers.delete(R.pointerId),Ge.isPinching&&Ge.pointers.size<2&&(Ge.isPinching=!1),Ge.isPinching)return}if($.isPanning){$.isPanning=!1,Xe.current&&(Xe.current.style.cursor="crosshair"),$.shiftPanPending&&!$.hasPanned&&Ce&&M&&Ok(M.x,M.y),$.shiftPanPending=!1,$.hasPanned=!1;return}if($.isDraggingCorner){$.isDraggingCorner=!1,$.dragFrameIndex=-1,$.dragPointIndex=-1,Xe.current&&(Xe.current.style.cursor="crosshair"),mn(),ze();return}if($.isDraggingFrame){$.isDraggingFrame=!1,$.dragFrameIndex=-1,Xe.current&&(Xe.current.style.cursor="crosshair"),mn(),ze();return}if(!$.isDrawing||!M)return;const{x:X,y:H}=M,{drawX:ve,drawY:fe,scale:ye}=Ms(),He=$.startX,$e=$.startY,ue=(Math.min(He,X)-ve)/ye,we=(Math.min($e,H)-fe)/ye,be=(Math.max(He,X)-ve)/ye,et=(Math.max($e,H)-fe)/ye;Me.current=[[Math.round(ue),Math.round(we)],[Math.round(be),Math.round(we)],[Math.round(be),Math.round(et)],[Math.round(ue),Math.round(et)]],$.isDrawing=!1,mn(),Pn(),_t(!0),W("Frame drawn. Drag corners to adjust, or drag inside to move. Click Add Frame to save."),ze()}function qk(){ee(Ws)}function Gk(){if(Me.current.length!==4){_("Select 4 corner points first");return}const R={...F},M=pn.current?"greenscreen":"manual";Le.current.push({points:[...Me.current],config:R,source:M});const $="current";Me.current=[];const X=Le.current.length-1;Rl(X),pn.current=!1,mn(),$s(),W(`Frame ${Le.current.length} added. Draw another box or save when done.`);const H=fn.current.get($);H&&(fn.current.set(`frame-${X}`,H),fn.current.delete($));const ve=Cl.current[$];ve&&dt(fe=>{const ye={...fe};return ye[`frame-${X}`]=ve,delete ye[$],ye}),Ie(!1),Un.current=null,ze()}function Qk(){Me.current=[],Pn(),pn.current=!1,mn(),fn.current.delete("current"),dt(R=>{if(!R.current)return R;const M={...R};return delete M.current,M}),Ie(!1),Un.current=null,Le.current.length?W(`Frames saved: ${Le.current.length}. Draw another box or save all frames.`):Ga(),ze()}function Sm(R=!1){!R&&!window.confirm("Clear all frames? This will reset your work.")||(Le.current=[],Me.current=[],Pn(),pn.current=!1,Pl(),mn(),$s(),E("[]"),I(!1),Ga(),ze())}function Ci(){const R=[...Le.current];return Me.current.length===4&&R.push({points:[...Me.current],config:{...F}}),R.map(M=>({points:M.points.map($=>[$[0],$[1]]),config:M.config}))}function Jk(R){if(!R.trim())return[];let M=[];try{M=JSON.parse(R)}catch($){throw new Error(($==null?void 0:$.message)||"Frames JSON is invalid")}if(!Array.isArray(M))throw new Error("Frames JSON must be an array of frames.");return M.map(($,X)=>{const H=qu(($==null?void 0:$.points)||($==null?void 0:$.frame_points)||$);if(!H||H.length!==4)throw new Error(`Frame ${X+1} must include 4 points.`);const ve=H.map(ye=>{const He=Number(ye[0]),$e=Number(ye[1]);if(!Number.isFinite(He)||!Number.isFinite($e))throw new Error(`Frame ${X+1} has invalid point values.`);return[He,$e]});let fe=$==null?void 0:$.config;if(typeof fe=="string")try{fe=JSON.parse(fe)}catch{fe=null}return{points:ve,config:Cc(fe,Ws),source:"json"}})}function Yk(){_("");try{const R=Jk(j);Le.current=R,Me.current=[],pn.current=!1,Pl(),R.length?Rl(0):Pn(),mn(),$s(),I(!1),E(R.length?JSON.stringify(Ci(),null,2):"[]"),ze()}catch(R){_((R==null?void 0:R.message)||"Frames JSON is invalid")}}function Xk(){if(!Ue.current)return;const R=document.createElement("canvas");R.width=Ue.current.width,R.height=Ue.current.height;const M=R.getContext("2d");M.drawImage(Ue.current,0,0);const $=M.getImageData(0,0,Ue.current.width,Ue.current.height),X=wM($,{color:J,tolerance:ce,depthMultiplier:F.depthMultiplier,existingFrames:Le.current});X?(Me.current=X,Pn(),pn.current=!0,mn(),_t(!0),W("Green screen detected. Adjust points or click Add Frame to save."),ze()):W("No green screen detected. Adjust tolerance or draw frame manually.")}async function Zk(){const R=Uk();if(!w||!R||!Bn){_("Upload a photo and select or draw a frame first.");return}const M=pm;if(!M){_("Upload a test creative for the active frame first.");return}if(!wr){_(""),Ka(!0);try{const $=new FormData;$.append("billboard_photo",w),$.append("creative",M),$.append("frame_points",JSON.stringify(R.points)),$.append("config",JSON.stringify(R.config)),$.append("time_of_day",l||"day");const X=await aI($),H=fn.current.get(Bn);H!=null&&H.url&&URL.revokeObjectURL(H.url);const ve=URL.createObjectURL(X),fe=new Image;fe.onload=()=>{fn.current.set(Bn,{url:ve,img:fe}),zn.current=ve,Un.current=fe,ze()},fe.src=ve}catch($){_(($==null?void 0:$.message)||"Failed to generate preview")}finally{Ka(!1)}}}function e_(){m(null),Ue.current=null,Me.current=[],Le.current=[],Pn(),pn.current=!1,ie(!1),Pl(),Qu(!1),mn(),$s(),E("[]"),I(!1),W("Select a location, upload a billboard photo, then click four corners to define the frame."),ze()}function t_(R){R.preventDefault(),q(!0)}function n_(R){R.preventDefault(),q(!1)}function r_(R){var $,X;R.preventDefault(),q(!1);const M=(X=($=R.dataTransfer)==null?void 0:$.files)==null?void 0:X[0];M&&(m(M),_m(M))}function s_(R){R.preventDefault(),S(!0)}function i_(R){R.preventDefault(),S(!1)}function a_(R){var $,X;R.preventDefault(),S(!1);const M=(X=($=R.dataTransfer)==null?void 0:$.files)==null?void 0:X[0];M&&setCreativeFile(M)}return o.jsx("div",{className:"h-full min-h-0 flex flex-col",children:o.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto space-y-4 px-2 py-1",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Z,{variant:r==="generate"?"default":"ghost",onClick:()=>s("generate"),className:"rounded-2xl",children:"Generate"}),n?o.jsx(Z,{variant:r==="setup"?"default":"ghost",onClick:()=>s("setup"),className:"rounded-2xl",children:"Setup"}):null,o.jsx(Z,{variant:r==="history"?"default":"ghost",onClick:()=>s("history"),className:"rounded-2xl",children:"History"})]}),o.jsx("div",{className:r==="generate"?"block":"hidden","aria-hidden":r!=="generate",children:o.jsx(aM,{location:i,setLocation:a,templateKey:h,setTemplateKey:p,locationOptions:oe,locationsQuery:Ei,timeOfDay:l,setTimeOfDay:c,finish:u,setFinish:d,timeOfDayOptions:uy,finishOptions:dy,templateOptions:en,templatesQuery:Is,templateThumbs:P,getTemplateKey:ao,defaultFrameConfig:Ws,creativeDragActive:N,handleCreativeDragOver:s_,handleCreativeDragLeave:i_,handleCreativeDrop:a_})}),r==="setup"?o.jsx(lM,{location:i,setLocation:a,setTemplateKey:p,locationOptions:oe,locationsQuery:Ei,timeOfDay:l,setTimeOfDay:c,finish:u,setFinish:d,timeOfDayOptions:uy,finishOptions:dy,editingTemplate:O,editingTemplateLoading:B,stopEditTemplate:gm,templatesOpen:K,setTemplatesOpen:ke,templateOptions:en,templatesQuery:Is,templateThumbs:P,getTemplateKey:ao,startEditTemplate:Ak,deleteTemplate:Nk,setupPhoto:w,setSetupPhoto:m,handleSetupPhoto:_m,handleSetupDragOver:t_,handleSetupDragLeave:n_,handleSetupDrop:r_,setupDragActive:L,handleSetupPhotoClear:e_,framesJson:j,setFramesJson:E,setFramesJsonDirty:I,applyFramesJsonToCanvas:Yk,buildFramesPayload:Ci,setupImageReady:Q,greenscreenOpen:Ce,setGreenscreenOpen:Re,greenscreenColor:J,setGreenscreenColor:te,colorTolerance:ce,setColorTolerance:Oe,RangeField:nn,handleGreenscreenDetect:Xk,canDetectGreenscreen:Sk,hasActiveFrame:jk,frameSettingsOpen:ut,setFrameSettingsOpen:_t,setupFrameConfig:F,handleSetupFrameConfigChange:Wk,FrameConfigControls:yM,previewOpen:rr,setPreviewOpen:sr,testPreviewMode:Te,setTestPreviewMode:Ie,testPreviewImgRef:Un,testPreviewUrlRef:zn,previewImgRef:Ue,drawPreview:ze,activeTestCreativeFile:pm,updateTestCreativeForActive:Bk,generateTestPreview:Zk,testPreviewing:wr,activeFrameIndex:re,canvasRef:Xe,canvasWidth:uc,canvasHeight:dc,handleCanvasPointerDown:Vk,handleCanvasPointerMove:Hk,handleCanvasPointerUp:Kk,handleCanvasWheel:Ik,setupHint:U,handleZoomOut:$k,handleZoomIn:Mk,handleFitToScreen:Dk,zoomPercent:Ek,pixelUpscale:G,setPixelUpscale:ae,setupError:k,setupMessage:g,addFrame:Gk,resetCurrentFrame:Qk,saveSetup:Ck,setupSaving:b,clearAllFrames:Sm,currentPoints:it,frameCount:at}):null,o.jsx("div",{className:r==="history"?"block":"hidden","aria-hidden":r!=="history",children:o.jsx(uM,{enabled:Nl})})]})})}function yM({config:e,onChange:t}){return o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsx(nn,{label:"Brightness",value:e.brightness,min:50,max:200,suffix:"%",onChange:n=>t("brightness",n)}),o.jsx(nn,{label:"Contrast",value:e.contrast,min:50,max:200,suffix:"%",onChange:n=>t("contrast",n)}),o.jsx(nn,{label:"Saturation",value:e.saturation,min:0,max:200,suffix:"%",onChange:n=>t("saturation",n)}),o.jsx(nn,{label:"Image Blur",value:e.imageBlur,min:0,max:20,onChange:n=>t("imageBlur",n),helper:"Blur entire creative (0 = off)."}),o.jsx(nn,{label:"Edge Blur",value:e.edgeBlur,min:1,max:20,suffix:"px",onChange:n=>t("edgeBlur",n),helper:"Edge blur amount (1 = off)."}),o.jsx(nn,{label:"Overlay Opacity",value:e.overlayOpacity,min:0,max:50,suffix:"%",onChange:n=>t("overlayOpacity",n),helper:"Billboard overlay strength."}),o.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[o.jsx(xM,{value:e.lightDirection,onChange:n=>t("lightDirection",n)}),o.jsx(nn,{label:"Depth Perception",value:e.depthMultiplier,min:5,max:30,suffix:"x",onChange:n=>t("depthMultiplier",n),helper:"Perspective compensation."})]}),o.jsx(nn,{label:"Shadow Intensity",value:e.shadowIntensity,min:0,max:100,suffix:"%",onChange:n=>t("shadowIntensity",n),helper:"Edge darkening."}),o.jsx(nn,{label:"Lighting Match",value:e.lightingAdjustment,min:-50,max:50,suffix:"%",onChange:n=>t("lightingAdjustment",n),helper:"Brightness matching."}),o.jsx(nn,{label:"Color Temperature",value:e.colorTemperature,min:-50,max:50,onChange:n=>t("colorTemperature",n),helper:"Warm/cool shift."}),o.jsx(nn,{label:"Vignette",value:e.vignette,min:0,max:100,suffix:"%",onChange:n=>t("vignette",n),helper:"Corner darkening."}),o.jsx(nn,{label:"Edge Smoother",value:e.edgeSmoother,min:1,max:20,suffix:"x",onChange:n=>t("edgeSmoother",n),helper:"Higher = softer edges."}),o.jsx(nn,{label:"Sharpening",value:e.sharpening,min:0,max:100,suffix:"%",onChange:n=>t("sharpening",n),helper:"Unsharp mask strength (0 = off)."})]})}function xM({value:e,onChange:t}){return o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"text-xs font-semibold text-black/70 dark:text-white/70",children:["Light Direction: ",mM[e]||"Top"]}),o.jsx("div",{className:"grid grid-cols-3 gap-2 w-[150px]",children:bk.map(n=>o.jsx("button",{type:"button",onClick:()=>t(n.value),className:`rounded-lg border px-2 py-2 text-sm font-semibold ${e===n.value?"border-black/40 dark:border-white/50 bg-black/5 dark:bg-white/15 text-black dark:text-white":"border-black/10 dark:border-white/20 bg-white/80 dark:bg-black/40 text-black/70 dark:text-white/80"}`,title:n.label,children:n.glyph},n.value))})]})}function nn({label:e,value:t,min:n,max:r,step:s=1,suffix:i="",helper:a,onChange:l}){return o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"text-xs font-semibold text-black/70 dark:text-white/70",children:[e,": ",t,i]}),o.jsx("input",{type:"range",min:n,max:r,step:s,value:t,onChange:c=>l(Number(c.target.value)),style:{background:gM(t,n,r)},className:"w-full accent-black"}),a?o.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:a}):null]})}function ao(e){return`${e.photo}::${e.time_of_day||"all"}::${e.finish||"all"}`}function wM(e,{color:t,tolerance:n,depthMultiplier:r,existingFrames:s}){const i=e.data,a=e.width,l=e.height,c=parseInt(t.slice(1,3),16),u=parseInt(t.slice(3,5),16),d=parseInt(t.slice(5,7),16),h=n,p=new Uint8Array(a*l);s.forEach(D=>{const B=D.points;for(let A=0;A<l;A+=1)for(let L=0;L<a;L+=1)bM(L,A,B)&&(p[A*a+L]=1)});const x=new Uint8Array(a*l);let w=0;for(let D=0;D<l;D+=1)for(let B=0;B<a;B+=1){const A=D*a+B;if(p[A]===1)continue;const L=A*4,q=i[L],N=i[L+1],S=i[L+2];Math.sqrt((q-c)**2+(N-u)**2+(S-d)**2)<=h&&(x[A]=255,w+=1)}if(w<1e3)return null;const m=new Uint8Array(a*l),b=3;for(let D=0;D<l;D+=1)for(let B=0;B<a;B+=1){const A=D*a+B;let L=!1;for(let q=-b;q<=b;q+=1){for(let N=-b;N<=b;N+=1){const S=D+q,U=B+N;if(S>=0&&S<l&&U>=0&&U<a&&x[S*a+U]===255){L=!0;break}}if(L)break}m[A]=L?255:0}const v=[];for(let D=1;D<l-1;D+=1)for(let B=1;B<a-1;B+=1){const A=D*a+B;m[A]===0&&(m[A-1]===255||m[A+1]===255||m[A-a]===255||m[A+a]===255||m[A-a-1]===255||m[A-a+1]===255||m[A+a-1]===255||m[A+a+1]===255)&&v.push([B,D])}if(v.length<4)return null;let g=v[0],y=v[0],k=v[0],_=v[0];v.forEach(D=>{const[B,A]=D;B+A<g[0]+g[1]&&(g=D),B-A>y[0]-y[1]&&(y=D),B+A>k[0]+k[1]&&(k=D),B-A<_[0]-_[1]&&(_=D)});const j=Math.abs(y[0]-g[0]),E=Math.abs(k[0]-_[0]),C=Math.abs(_[1]-g[1]),I=Math.abs(k[1]-y[1]),P=j/E,z=C/I,O=r||Ws.depthMultiplier;if(P>1.1){const D=Math.floor((P-1)*O);_=[_[0],Math.min(l-1,_[1]+D)],k=[k[0],Math.min(l-1,k[1]+D)]}else if(P<.9){const D=Math.floor((1/P-1)*O);g=[g[0],Math.max(0,g[1]-D)],y=[y[0],Math.max(0,y[1]-D)]}if(z>1.1){const D=Math.floor((z-1)*O);y=[Math.min(a-1,y[0]+D),y[1]],k=[Math.min(a-1,k[0]+D),k[1]]}else if(z<.9){const D=Math.floor((1/z-1)*O);g=[Math.max(0,g[0]-D),g[1]],_=[Math.max(0,_[0]-D),_[1]]}return[g,y,k,_]}function bM(e,t,n){let r=!1;for(let s=0,i=n.length-1;s<n.length;i=s++){const a=n[s][0],l=n[s][1],c=n[i][0],u=n[i][1];l>t!=u>t&&e<(c-a)*(t-l)/(u-l)+a&&(r=!r)}return r}function kM(e){if(!e)return"";const t=String(e).trim();if(!t)return"";if(t.includes("/"))return t;const n=t.split("-");if(n.length===3){const[r,s,i]=n;if(r&&s&&i)return`${i}/${s}/${r}`}return t}function fy(e){const t=Number.parseInt(e,10),n=Number.isFinite(t)&&t>0?t:1;return`${n} ${n===1?"Week":"Weeks"}`}function hc(e,t){const n=t;if(e==null||e==="")return`${n} 0`;const r=typeof e=="string"?e.trim():e;if(typeof r=="string"&&r.toUpperCase().startsWith(n))return r;const s=typeof r=="number"?r:Number.parseFloat(String(r).replace(/,/g,""));return Number.isFinite(s)?`${n} ${s.toLocaleString()}`:`${n} 0`}function py(e){if(e==null)return 0;const t=Number.parseFloat(String(e).replace(/[^\d.-]/g,""));return Number.isFinite(t)?t:0}function _M(){const e=Br(),[t,n]=f.useState(""),r=()=>({id:crypto.randomUUID(),startDate:"",duration:"",netRate:""}),s=()=>({id:crypto.randomUUID(),location:"",spots:"1",productionFee:"",periods:[r()]}),[i,a]=f.useState(()=>[s()]),[l,c]=f.useState("separate"),[u,d]=f.useState(""),[h,p]=f.useState("AED"),[x,w]=f.useState("100% upfront"),[m,b]=f.useState([]),[v,g]=f.useState({}),y=In({queryKey:["locations","proposals"],queryFn:()=>dI({service:"proposals"})}),k=f.useMemo(()=>{const A=y.data;return Array.isArray(A)?A:(A==null?void 0:A.locations)||(A==null?void 0:A.data)||[]},[y.data]),_=f.useMemo(()=>Array.from(new Set(i.map(A=>A.location).filter(Boolean))),[i]);f.useEffect(()=>{if(!_.length)return;const A=_.filter(q=>!v[q]);if(!A.length)return;let L=!0;return(async()=>{const q=await Promise.all(A.map(async N=>{try{const S=await hI(N);return[N,S]}catch{return[N,null]}}));L&&g(N=>{const S={...N};return q.forEach(([U,W])=>{W&&(S[U]=W)}),S})})(),()=>{L=!1}},[_,v]);const j=SE({mutationFn:A=>uI(A),onSuccess:()=>{e.invalidateQueries({queryKey:["proposals","history"]})}});function E(A,L,q){a(N=>N.map(S=>S.id===A?{...S,[L]:q}:S))}function C(A,L,q,N){a(S=>S.map(U=>U.id!==A?U:{...U,periods:U.periods.map(W=>W.id===L?{...W,[q]:N}:W)}))}function I(){a(A=>[...A,s()])}function P(A){a(L=>L.length>1?L.filter(q=>q.id!==A):L)}function z(A){a(L=>L.map(q=>q.id===A?{...q,periods:[...q.periods,r()]}:q))}function O(A,L){a(q=>q.map(N=>N.id!==A||N.periods.length<=1?N:{...N,periods:N.periods.filter(S=>S.id!==L)}))}function D(){const A=h||"AED",L=hc(u,A),q=i.filter(F=>F.location),N=q.map(F=>{const ee=F.periods.filter(V=>V.startDate||V.duration||V.netRate),J=l==="combined"?[ee[0]||F.periods[0]]:ee,te=J.map(V=>kM((V==null?void 0:V.startDate)||"")),ce=J.map(V=>fy(V==null?void 0:V.duration)),Oe=J.map(V=>hc(V==null?void 0:V.netRate,A)),it=Number.parseInt(F.spots,10),Ve=Number.isFinite(it)&&it>0?it:1,at=v[F.location]||{},gt=at.location||at,Zt=(gt.display_type||gt.displayType||"").toLowerCase()==="static",vt=gt.upload_fee??gt.uploadFee??0,G=gt.production_fee??gt.productionFee??0,ae=F.productionFee,re={location:F.location||"",upload_fee:hc(vt,A),spots:Ve};return Zt&&(re.production_fee=hc(ae!==""&&ae!==null&&ae!==void 0?ae:G,A)),l==="combined"?(re.start_date=te[0]||"",re.duration=ce[0]||fy(1)):(re.start_dates=te,re.durations=ce,re.net_rates=Oe),re}),S=q.map(F=>{const ee=k.find(J=>(J.location_key||J.key||J.id)===F.location);return(ee==null?void 0:ee.display_name)||(ee==null?void 0:ee.name)||(ee==null?void 0:ee.label)||F.location}).filter(Boolean).join(", "),U={proposals:N,client_name:t,proposal_type:l,payment_terms:x||"100% upfront",currency:A};l==="combined"&&(U.combined_net_rate=L);const W={client:t,packageType:l,items:N.map(F=>({location:F.location,netRatesValue:Array.isArray(F.net_rates)?F.net_rates.map(py):[]})),combinedNetRateValue:l==="combined"?py(L):0,locationsLabel:S,currency:A,paymentTerms:x||"100% upfront"};j.mutate(U,{onSuccess:F=>{b(ee=>[{data:F,meta:W},...ee].slice(0,3))}})}function B(){n(""),a([s()]),c("separate"),d(""),p("AED"),w("100% upfront")}return{client:t,setClient:n,items:i,updateItem:E,addItem:I,removeItem:P,addPeriod:z,removePeriod:O,updatePeriod:C,packageType:l,setPackageType:c,combinedNetRate:u,setCombinedNetRate:d,currency:h,setCurrency:p,paymentTerms:x,setPaymentTerms:w,lastResults:m,locationsQuery:y,locationOptions:k,generateMutation:j,handleGenerate:D,resetForm:B}}function SM(){const e=_M();return o.jsx(jM,{...e})}function jM({client:e,setClient:t,items:n,updateItem:r,addItem:s,removeItem:i,addPeriod:a,removePeriod:l,updatePeriod:c,packageType:u,setPackageType:d,combinedNetRate:h,setCombinedNetRate:p,currency:x,setCurrency:w,paymentTerms:m,setPaymentTerms:b,lastResults:v,locationsQuery:g,locationOptions:y,generateMutation:k,handleGenerate:_,resetForm:j}){var I;const E=Array.isArray(v)?v:[],C=k.isPending;return o.jsxs(Ot,{children:[o.jsx(Qt,{className:"flex flex-row items-center justify-between",children:o.jsx(hn,{children:"Generate Proposal"})}),o.jsxs(Jt,{className:"space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsx(he,{label:"Client",children:o.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:e,onChange:P=>t(P.target.value),placeholder:"Client name"})}),o.jsx(he,{label:"Package Type",children:o.jsxs("select",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:u,onChange:P=>d(P.target.value),children:[o.jsx("option",{value:"separate",children:"Separate"}),o.jsx("option",{value:"combined",children:"Combined"})]})})]}),u==="combined"?o.jsx(he,{label:"Combined Net Rate",children:o.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:h,onChange:P=>p(P.target.value),type:"number",min:"0",step:"0.01",placeholder:"0"})}):null,o.jsxs("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white/40 dark:bg-white/5 p-3 space-y-3",children:[o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Locations"}),g.isLoading?o.jsx("div",{className:"mt-1 text-xs text-black/50 dark:text-white/60",children:o.jsx(Ee,{text:"Loading locations"})}):null]}),o.jsx(Z,{variant:"secondary",size:"sm",className:"rounded-xl",onClick:s,children:"Add Location"})]}),o.jsx("div",{className:"space-y-3",children:n.map(P=>{var D,B;const z=y.find(A=>(A.location_key||A.key||A.id)===P.location),O=((z==null?void 0:z.display_type)||"").toLowerCase()==="static";return o.jsxs("div",{className:"rounded-xl border border-black/5 dark:border-white/10 bg-white/60 dark:bg-white/5 p-3 space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 items-end",children:[o.jsx(he,{label:"Location",children:o.jsxs("select",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:P.location,onChange:A=>r(P.id,"location",A.target.value),children:[o.jsx("option",{value:"",children:"Select a location"}),y.map(A=>o.jsx("option",{value:A.location_key||A.key||A.id,children:A.display_name||A.name||A.label||A.key||A.id},A.location_key||A.key||A.id))]})}),o.jsxs("div",{className:"flex items-end justify-between gap-2",children:[o.jsx(he,{label:"Spots",className:"flex-1",children:o.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:P.spots,onChange:A=>r(P.id,"spots",A.target.value),type:"number",min:"1",step:"1",placeholder:"1"})}),o.jsx(Z,{variant:"ghost",size:"icon",className:"rounded-xl h-10 w-10",onClick:()=>i(P.id),disabled:n.length===1,title:"Remove location",children:o.jsx(Aa,{size:16})})]})]}),O?o.jsx(he,{label:"Production Fee",children:o.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:P.productionFee,onChange:A=>r(P.id,"productionFee",A.target.value),type:"number",min:"0",step:"0.01",placeholder:"0"})}):null,u==="combined"?o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 items-end",children:[o.jsx(he,{label:"Start Date",children:o.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:((D=P.periods[0])==null?void 0:D.startDate)||"",onChange:A=>{var L;return c(P.id,(L=P.periods[0])==null?void 0:L.id,"startDate",A.target.value)},type:"date"})}),o.jsx(he,{label:"Duration (weeks)",children:o.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:((B=P.periods[0])==null?void 0:B.duration)||"",onChange:A=>{var L;return c(P.id,(L=P.periods[0])==null?void 0:L.id,"duration",A.target.value)},type:"number",min:"1",step:"1",placeholder:"1"})})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[o.jsx("div",{className:"text-xs font-semibold text-black/60 dark:text-white/60",children:"Line Items"}),o.jsx(Z,{variant:"secondary",size:"sm",className:"rounded-xl",onClick:()=>a(P.id),children:"Add Line Item"})]}),o.jsx("div",{className:"space-y-2",children:P.periods.map(A=>o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[1fr_1fr_1fr_1fr_auto] gap-2 items-end",children:[o.jsx(he,{label:"Start Date",children:o.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:A.startDate,onChange:L=>c(P.id,A.id,"startDate",L.target.value),type:"date"})}),o.jsx(he,{label:"Duration (weeks)",children:o.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:A.duration,onChange:L=>c(P.id,A.id,"duration",L.target.value),type:"number",min:"1",step:"1",placeholder:"1"})}),o.jsx(he,{label:"Net Rate",children:o.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:A.netRate,onChange:L=>c(P.id,A.id,"netRate",L.target.value),type:"number",min:"0",step:"0.01",placeholder:"0"})}),o.jsx(Z,{variant:"ghost",size:"icon",className:"rounded-xl h-10 w-10",onClick:()=>l(P.id,A.id),disabled:P.periods.length===1,title:"Remove dates",children:o.jsx(Aa,{size:16})})]},A.id))})]})]},P.id)})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsx(he,{label:"Currency",children:o.jsxs("select",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:x,onChange:P=>w(P.target.value),children:[o.jsx("option",{value:"AED",children:"AED"}),o.jsx("option",{value:"EUR",children:"EUR"}),o.jsx("option",{value:"USD",children:"USD"}),o.jsx("option",{value:"GBP",children:"GBP"})]})}),o.jsx(he,{label:"Payment Terms",children:o.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:m,onChange:P=>b(P.target.value),placeholder:"Payment terms"})})]}),k.isError?o.jsx("div",{className:"rounded-xl bg-red-50/70 text-red-700 px-4 py-2 text-sm dark:bg-red-500/10 dark:text-red-300",children:((I=k.error)==null?void 0:I.message)||"Generation failed"}):null,o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Z,{className:"rounded-2xl",onClick:_,disabled:C,children:C?o.jsx(Ee,{text:"Generating Proposal"}):"Generate Proposal"}),o.jsx(Z,{variant:"secondary",className:"rounded-2xl",onClick:j,disabled:C,children:"Reset"})]}),o.jsxs("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white/40 dark:bg-white/5 p-4 space-y-3",children:[!E.length&&!C?o.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"Result will appear here"}):null,C?o.jsx(Ee,{text:"Processing proposal",className:"text-sm text-black/60 dark:text-white/65"}):null,E.length?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Last 3 Generated Proposals"}),o.jsx("div",{className:"space-y-4",children:E.map((P,z)=>{const O=(P==null?void 0:P.data)||null,D=(P==null?void 0:P.meta)||null,B=[];O!=null&&O.pptx_url&&B.push({url:O.pptx_url,type:"pptx"}),O!=null&&O.pdf_url&&B.push({url:O.pdf_url,type:"pdf"});const A=(O==null?void 0:O.locations)||(D==null?void 0:D.locationsLabel)||"",L=(D==null?void 0:D.packageType)==="combined"?D==null?void 0:D.combinedNetRateValue:((D==null?void 0:D.items)||[]).reduce((N,S)=>{const U=Array.isArray(S.netRatesValue)?S.netRatesValue:[];return N+U.reduce((W,F)=>W+(F||0),0)},0),q=Number.isFinite(L)?`${(D==null?void 0:D.currency)||"AED"} ${Number(L).toLocaleString()}`:"";return o.jsxs("div",{className:"rounded-xl border border-black/5 dark:border-white/10 bg-white/60 dark:bg-white/5 p-3 space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1.5 text-xs text-black/65 dark:text-white/65",children:[o.jsxs("div",{className:"flex flex-wrap items-baseline gap-1",children:[o.jsx("span",{className:"uppercase tracking-wide text-black/45 dark:text-white/50",children:"Client"}),o.jsx("span",{className:"font-semibold text-black/80 dark:text-white/85",children:(D==null?void 0:D.client)||""})]}),o.jsxs("div",{className:"flex flex-wrap items-baseline gap-1",children:[o.jsx("span",{className:"uppercase tracking-wide text-black/45 dark:text-white/50",children:"Package"}),o.jsx("span",{className:"font-semibold text-black/80 dark:text-white/85",children:(D==null?void 0:D.packageType)||""})]}),o.jsxs("div",{className:"flex flex-wrap items-baseline gap-1",children:[o.jsx("span",{className:"uppercase tracking-wide text-black/45 dark:text-white/50",children:"Total Amount"}),o.jsx("span",{className:"font-semibold text-black/80 dark:text-white/85",children:q})]}),o.jsxs("div",{className:"flex flex-wrap items-baseline gap-1 sm:col-span-2",children:[o.jsx("span",{className:"uppercase tracking-wide text-black/45 dark:text-white/50",children:"Locations"}),o.jsx("span",{className:"font-semibold text-black/80 dark:text-white/85",children:A})]})]}),B.length?o.jsx("div",{className:"space-y-2",children:B.map(N=>{const S=EM(N.url),U=CM(S),W=N.type==="pdf"?"proposal.pdf":"proposal.pptx",F=U||W,ee=N.type==="pdf";return o.jsx("div",{className:"rounded-xl border border-black/5 dark:border-white/10 bg-white/70 dark:bg-white/5 p-3",children:o.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"flex items-center gap-2 text-xs uppercase tracking-wide text-black/50 dark:text-white/60",children:ee?o.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-red-500/10 text-red-700 dark:text-red-300 px-2 py-0.5",children:[o.jsx(f0,{size:12}),"PDF"]}):o.jsx("span",{className:"inline-flex items-center gap-1 rounded-full bg-black/5 dark:bg-white/10 px-2 py-0.5",children:"PPTX"})}),o.jsx("div",{className:"mt-1 text-xs font-semibold text-black/80 dark:text-white/85 truncate",children:F})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Z,{asChild:!0,size:"sm",variant:"ghost",className:"rounded-xl",children:o.jsxs("a",{href:S,target:"_blank",rel:"noopener noreferrer",children:[o.jsx(au,{size:14,className:"mr-1"}),"Open"]})}),o.jsx(Z,{size:"sm",variant:"secondary",className:"rounded-xl",children:o.jsxs("span",{role:"link",tabIndex:0,onClick:J=>{J.preventDefault(),my(S,F)},onKeyDown:J=>{(J.key==="Enter"||J.key===" ")&&(J.preventDefault(),my(S,F))},className:"inline-flex items-center",children:[o.jsx(iu,{size:14,className:"mr-1"}),"Download"]})})]})]})},`${N.type}-${N.url}`)})}):o.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:"No files returned yet."})]},`proposal-output-${z}`)})})]}):null]})]})]})}function EM(e){return e?e.startsWith("http")?e:`${wi.API_BASE_URL}${e}`:""}function CM(e){if(!e)return"";try{const n=new URL(e,window.location.href).pathname.split("/").filter(Boolean);return n.length?decodeURIComponent(n[n.length-1]):""}catch{const n=e.split("?")[0].split("#")[0].split("/").filter(Boolean);return n.length?decodeURIComponent(n[n.length-1]):""}}async function my(e,t){const r=await(await fetch(e)).blob(),s=document.createElement("a");s.href=URL.createObjectURL(r),s.download=t,document.body.appendChild(s),s.click(),s.remove(),setTimeout(()=>URL.revokeObjectURL(s.href),1e3)}function Ha({className:e,placeholder:t="Search...",...n}){return o.jsx("input",{type:"text",placeholder:t,className:ge("rounded-2xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",e),...n})}function NM(){const{user:e}=js(),[t,n]=f.useState({}),[r,s]=f.useState(!1),i=In({queryKey:["proposals","history"],queryFn:fI}),a=f.useMemo(()=>{var d;return Array.isArray(i.data)?i.data:(d=i.data)!=null&&d.proposals?i.data.proposals:i.data||[]},[i.data]),l=f.useMemo(()=>{const d=a||[],h=(e==null?void 0:e.id)||(e==null?void 0:e.user_id)||(e==null?void 0:e.email)||"";return h?d.filter(p=>(p.submitted_by||p.user_id||"")===h):d},[a,e==null?void 0:e.id,e==null?void 0:e.user_id,e==null?void 0:e.email]),c=f.useMemo(()=>{const d=new Set;return(l||[]).forEach(h=>{const p=h.submitted_by||h.user_id;p&&d.add(p)}),Array.from(d)},[l]),u=f.useMemo(()=>c.filter(d=>!t[d]),[c,t]);return f.useEffect(()=>{if(!u.length)return;s(!0);let d=!0;return(async()=>{const h=await Promise.all(u.map(async p=>{var x,w;try{const m=await mI(p),b=(m==null?void 0:m.name)||((x=m==null?void 0:m.user)==null?void 0:x.name)||((w=m==null?void 0:m.profile)==null?void 0:w.name)||p;return[p,b]}catch{return[p,p]}}));d&&(n(p=>{const x={...p};return h.forEach(([w,m])=>{x[w]||(x[w]=m)}),x}),s(!1))})(),()=>{d=!1}},[u]),f.useEffect(()=>{u.length||s(!1)},[u.length]),{historyQuery:i,userNamesLoading:r,visibleProposals:l,userNameById:t}}function PM(){const e=NM();return o.jsx(RM,{...e})}function RM({historyQuery:e,userNamesLoading:t,visibleProposals:n,userNameById:r}){const[s,i]=f.useState(""),[a,l]=f.useState(""),[c,u]=f.useState(""),d=f.useMemo(()=>(n||[]).map((w,m)=>{var C;const b=w.client_name||w.client||"Proposal",v=w.submitted_by||w.user_id||"",g=v?r[v]||v:"",y=w.date_generated||w.created_at,k=w.package_type||"",_=w.locations||((C=w.proposal_data)==null?void 0:C.locations_text)||w.location||"",j=w.total_amount||(w.total_amount_value!=null?`${w.currency||""} ${Number(w.total_amount_value).toLocaleString()}`:""),E=[];return w.pptx_url&&E.push({url:w.pptx_url,type:"pptx"}),w.pdf_url&&E.push({url:w.pdf_url,type:"pdf"}),!E.length&&w.file_url&&E.push({url:w.file_url,type:"pdf"}),{id:w.id||w.file_url||m,clientName:b,userName:g,generatedAt:y,packageType:k,locationText:_,totalAmount:j,fileEntries:E}}),[n,r]),h=f.useMemo(()=>{const w=new Set;return d.forEach(m=>{m.packageType&&m.packageType!==""&&w.add(m.packageType)}),Array.from(w)},[d]),p=f.useMemo(()=>{const w=new Set;return d.forEach(m=>{!m.locationText||m.locationText===""||m.locationText.split(",").forEach(b=>{const v=b.trim();v&&w.add(v)})}),Array.from(w)},[d]),x=f.useMemo(()=>{const w=c.trim().toLowerCase();return d.filter(m=>!(s&&m.packageType!==s||a&&!(m.locationText||"").split(",").map(v=>v.trim()).filter(Boolean).includes(a)||w&&!`${m.clientName} ${m.locationText}`.toLowerCase().includes(w)))},[d,s,a,c]);return o.jsxs(Ot,{children:[o.jsx(Qt,{className:"space-y-2",children:o.jsx(hn,{children:"History"})}),o.jsx(Jt,{children:e.isLoading||t?o.jsx(Ee,{text:"Loading",className:"text-sm text-black/60 dark:text-white/65"}):n!=null&&n.length?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[o.jsx(Ha,{value:c,onChange:w=>u(w.target.value),className:"w-full sm:w-[260px]",placeholder:"Search..."}),o.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-end",children:[o.jsxs("select",{className:"w-full sm:w-[200px] rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:s,onChange:w=>i(w.target.value),children:[o.jsx("option",{value:"",children:"All packages"}),h.map(w=>o.jsx("option",{value:w,children:w},w))]}),o.jsxs("select",{className:"w-full sm:w-[220px] rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:a,onChange:w=>l(w.target.value),children:[o.jsx("option",{value:"",children:"All locations"}),p.map(w=>o.jsx("option",{value:w,children:w},w))]})]})]}),o.jsx("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white/40 dark:bg-white/5 overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-[760px] w-full text-sm",children:[o.jsx("thead",{className:"bg-white/60 dark:bg-white/10 text-xs uppercase tracking-wide text-black/45 dark:text-white/50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Client"}),o.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Generated"}),o.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Package"}),o.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Total"}),o.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Locations"}),o.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-black/5 dark:divide-white/10",children:(x||[]).map(w=>o.jsxs("tr",{className:"text-black/80 dark:text-white/85",children:[o.jsx("td",{className:"px-4 py-3 font-semibold",children:w.clientName}),o.jsx("td",{className:"px-4 py-3",children:w.generatedAt?new Date(w.generatedAt).toLocaleString():""}),o.jsx("td",{className:"px-4 py-3",children:w.packageType}),o.jsx("td",{className:"px-4 py-3",children:w.totalAmount}),o.jsx("td",{className:"px-4 py-3",children:w.locationText}),o.jsx("td",{className:"px-4 py-3",children:w.fileEntries.length?o.jsx("div",{className:"flex flex-col gap-2",children:w.fileEntries.map(m=>{const b=TM(m.url),v=AM(b),g=m.type==="pdf"?"proposal.pdf":"proposal.pptx",y=v||g;return o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsx("span",{className:"text-[11px] uppercase tracking-wide text-black/50 dark:text-white/60",children:m.type}),o.jsx(Z,{asChild:!0,size:"sm",variant:"ghost",className:"rounded-xl",children:o.jsxs("a",{href:b,target:"_blank",rel:"noopener noreferrer",children:[o.jsx(au,{size:14,className:"mr-1"}),"Open"]})}),o.jsx(Z,{size:"sm",variant:"secondary",className:"rounded-xl",children:o.jsxs("span",{role:"link",tabIndex:0,onClick:k=>{k.preventDefault(),gy(b,y)},onKeyDown:k=>{(k.key==="Enter"||k.key===" ")&&(k.preventDefault(),gy(b,y))},className:"inline-flex items-center",children:[o.jsx(iu,{size:14,className:"mr-1"}),"Download"]})})]},`${m.type}-${m.url}`)})}):o.jsx("span",{className:"text-xs text-black/50 dark:text-white/55",children:""})})]},w.id))})]})})}),x.length?null:o.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No matching proposals."})]}):o.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No proposals yet."})})]})}function TM(e){return e?e.startsWith("http")?e:`${wi.API_BASE_URL}${e}`:""}function AM(e){if(!e)return"";try{const n=new URL(e,window.location.href).pathname.split("/").filter(Boolean);return n.length?decodeURIComponent(n[n.length-1]):""}catch{const n=e.split("?")[0].split("#")[0].split("/").filter(Boolean);return n.length?decodeURIComponent(n[n.length-1]):""}}async function gy(e,t){const r=await(await fetch(e)).blob(),s=document.createElement("a");s.href=URL.createObjectURL(r),s.download=t,document.body.appendChild(s),s.click(),s.remove(),setTimeout(()=>URL.revokeObjectURL(s.href),1e3)}function OM(){const[e,t]=f.useState("generate");return o.jsx("div",{className:"h-full min-h-0 flex flex-col",children:o.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto space-y-4 px-2 py-1",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Z,{variant:e==="generate"?"default":"ghost",onClick:()=>t("generate"),className:"rounded-2xl",children:"Generate"}),o.jsx(Z,{variant:e==="history"?"default":"ghost",onClick:()=>t("history"),className:"rounded-2xl",children:"History"})]}),o.jsx("div",{className:e==="generate"?"block":"hidden","aria-hidden":e!=="generate",children:o.jsx(SM,{})}),o.jsx("div",{className:e==="history"?"block":"hidden","aria-hidden":e!=="history",children:o.jsx(PM,{})})]})})}function kk(e){return e?typeof e=="string"?e:e.name||e.id||e.value||"":""}function _k(e){return e?typeof e=="string"?e:e.name||e.value||e.permission||"":""}function Yd(e,t){if(!e||!t)return!0;for(const n of e)if(!t.has(n))return!1;return!0}function IM(e){const t=new Map;return(e||[]).forEach(n=>{const r=kk(n);if(!r)return;const s=(n.permissions||n.permission_list||n.permissionList||[]).map(_k).filter(Boolean);t.set(r,new Set(s))}),t}function MM(e){const t=new Map;return(e||[]).forEach(n=>{const r=n.name||n.id;if(!r)return;const s=(n.permission_sets||n.permissionSets||n.permission_set_names||[]).map(kk).filter(Boolean);t.set(r,new Set(s))}),t}function $M(e){const t=new Map;return(e||[]).forEach(n=>{const r=n.name||n.id;if(!r)return;const s=(n.permissions||[]).map(_k).filter(Boolean);t.set(r,new Set(s))}),t}function DM({q:e,setQ:t,openNewUserModal:n,usersQuery:r,users:s,user:i,selectUser:a,setConfirmDelete:l,companyLookup:c,userCompanyFilter:u,setUserCompanyFilter:d,userProfileFilter:h,setUserProfileFilter:p,companyFilterOptions:x,profileFilterOptions:w}){return o.jsxs(Ot,{className:"flex-1 min-h-0",children:[o.jsxs(Qt,{className:"space-y-2",children:[o.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[o.jsx(hn,{children:"Users"}),o.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-end",children:[o.jsx(Ha,{value:e,onChange:m=>t(m.target.value),className:"w-full sm:w-[220px]"}),o.jsx(Z,{variant:"secondary",className:"rounded-2xl self-start sm:self-auto",onClick:n,children:"Add user"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[o.jsxs("select",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:u,onChange:m=>d(m.target.value),children:[o.jsx("option",{value:"",children:"All companies"}),x.map((m,b)=>o.jsx("option",{value:m.value,children:m.label},`${m.value}-${b}`))]}),o.jsxs("select",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:h,onChange:m=>p(m.target.value),children:[o.jsx("option",{value:"",children:"All profiles"}),w.map((m,b)=>o.jsx("option",{value:m.value,children:m.label},`${m.value}-${b}`))]})]})]}),o.jsx(Jt,{className:"space-y-4",children:r.isLoading?o.jsx(Ee,{text:"Loading",className:"text-sm text-black/60 dark:text-white/65"}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:s.map(m=>{var E,C,I,P;const b=Array.isArray(m.profiles)?m.profiles.map(z=>(z==null?void 0:z.display_name)||(z==null?void 0:z.name)||z).filter(Boolean):[((E=m.profiles)==null?void 0:E.display_name)||((C=m.profiles)==null?void 0:C.name)||m.profile||m.profile_name].filter(Boolean),v=b.length?b.length>2?`${b[0]}, +${b.length-1}`:b.join(", "):"",g=!!(m.id&&(i!=null&&i.id)&&m.id===i.id||m.user_id&&(i!=null&&i.user_id)&&m.user_id===i.user_id||m.email&&(i!=null&&i.email)&&m.email===i.email),y=m.is_active??m.isActive??m.active,k=typeof y=="boolean",_=k?y:!0,j=_?"Deactivate":"Reactivate";return o.jsxs(kt,{className:"p-4 space-y-2",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsx("div",{className:"text-base font-semibold",children:m.name||""}),k&&!_?o.jsx("span",{className:"rounded-full bg-red-100 px-2 py-0.5 text-xs font-semibold text-red-700 dark:bg-red-500/20 dark:text-red-200",children:"Inactive"}):null]}),o.jsx("div",{className:"text-sm text-black/55 dark:text-white/60",children:m.email})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ft,{onClick:()=>a(m),title:"Edit user","aria-label":"Edit user",children:o.jsx(vl,{size:16})}),o.jsx(Ft,{variant:"ghost",onClick:()=>l({open:!0,type:"user",payload:{id:m.id||m.user_id,isActive:_},label:`${j} user "${m.email}"?`}),disabled:g,title:g?"You cannot deactivate yourself":`${j} user`,"aria-label":`${j} user`,className:_?void 0:"text-emerald-600 hover:text-emerald-700 dark:text-emerald-300",children:_?o.jsx(WE,{size:16}):o.jsx(BE,{size:16})})]})]}),o.jsxs("div",{className:"text-sm text-black/55 dark:text-white/60",children:["Profiles: ",o.jsx("span",{className:"font-semibold",children:v})]}),o.jsxs("div",{className:"text-sm text-black/55 dark:text-white/60",children:["Company:"," ",o.jsx("span",{className:"font-semibold",children:((I=m.company)==null?void 0:I.name)||c.get(((P=m.company)==null?void 0:P.code)||m.company_code||m.company_id)||""})]})]},m.id||m.user_id||m.email)})})})]})}function LM({q:e,setQ:t,usersQuery:n,users:r,user:s,companyLookup:i,userCompanyFilter:a,setUserCompanyFilter:l,userProfileFilter:c,setUserProfileFilter:u,companyFilterOptions:d,profileFilterOptions:h,companyList:p,profileOptions:x,profileValues:w,permissionSetList:m,permissionSetValues:b,permissionList:v,permissionsQuery:g,page:y}){const{selectedUser:k,setSelectedUser:_,userForm:j,setUserForm:E,userModalOpen:C,setUserModalOpen:I,userModalLoading:P,setUserModalLoading:z,userModalMode:O,setUserModalMode:D,userProfilesOpen:B,setUserProfilesOpen:A,userPermissionSetsOpen:L,setUserPermissionSetsOpen:q,userPermissionsOpen:N,setUserPermissionsOpen:S,savingUser:U,setPermissionsMessage:W,selectUser:F,openNewUserModal:ee,saveUser:J,deleteUser:te,selectedUserProfiles:ce,selectedUserPermissionSets:Oe,selectedUserPermissions:it,selectedUserPermissionSet:Ve,customUserPermissions:at,toggleUserPermission:gt,selectAllUserPermissions:Zt,clearUserPermissions:vt,toggleUserProfile:G,selectAllUserProfiles:ae,clearUserProfiles:re,toggleUserPermissionSet:V,selectAllUserPermissionSets:Q,clearUserPermissionSets:ie}=FM({permissionList:v,profileValues:w,permissionSetValues:b,profileOptions:x,permissionSetList:m}),[K,ke]=f.useState({open:!1,type:"",payload:null,label:""}),Ce=!!(k&&(k.id&&(s!=null&&s.id)&&k.id===(s==null?void 0:s.id)||k.user_id&&(s!=null&&s.user_id)&&k.user_id===(s==null?void 0:s.user_id)||k.email&&(s!=null&&s.email)&&k.email===(s==null?void 0:s.email)));f.useEffect(()=>{_(null)},[y,_]);async function Re(){if(!(!K.open||!K.payload))try{const ut=K.payload,_t=(ut==null?void 0:ut.id)??ut;if(!_t||s!=null&&s.id&&_t===s.id||s!=null&&s.user_id&&_t===s.user_id)return;await te(ut)}finally{ke({open:!1,type:"",payload:null,label:""})}}return o.jsxs(o.Fragment,{children:[o.jsx(DM,{q:e,setQ:t,openNewUserModal:ee,usersQuery:n,users:r,user:s,selectUser:F,setConfirmDelete:ke,companyLookup:i,userCompanyFilter:a,setUserCompanyFilter:l,userProfileFilter:c,setUserProfileFilter:u,companyFilterOptions:d,profileFilterOptions:h}),o.jsx(UM,{open:C,onClose:()=>{I(!1),_(null),W(""),z(!1),D("edit"),A(!1),q(!1),S(!1)},userModalLoading:P,userModalMode:O,selectedUser:k,userForm:j,setUserForm:E,companyList:p,profileOptions:x,profileValues:w,userProfilesOpen:B,setUserProfilesOpen:A,selectAllUserProfiles:ae,clearUserProfiles:re,selectedUserProfiles:ce,toggleUserProfile:G,permissionSetList:m,permissionSetValues:b,userPermissionSetsOpen:L,setUserPermissionSetsOpen:q,selectAllUserPermissionSets:Q,clearUserPermissionSets:ie,selectedUserPermissionSets:Oe,toggleUserPermissionSet:V,userPermissionsOpen:N,setUserPermissionsOpen:S,selectedUserPermissions:it,permissionList:v,permissionsQuery:g,selectedUserPermissionSet:Ve,toggleUserPermission:gt,selectAllUserPermissions:Zt,clearUserPermissions:vt,customUserPermissions:at,isSelfUser:Ce,setConfirmDelete:ke,saveUser:J,savingUser:U}),o.jsx(jl,{open:K.open,message:K.label,onClose:()=>ke({open:!1,type:"",payload:null,label:""}),onConfirm:Re})]})}function FM({permissionList:e,profileValues:t,permissionSetValues:n,profileOptions:r,permissionSetList:s}){const i=Br(),[a,l]=f.useState(null),[c,u]=f.useState({name:"",email:"",profiles:[],permissionSets:[],company:"",is_active:!0,permissionsText:""}),[d,h]=f.useState(!1),[p,x]=f.useState(!1),[w,m]=f.useState("edit"),[b,v]=f.useState(!1),[g,y]=f.useState(!1),[k,_]=f.useState(!1),[j,E]=f.useState(!1),[C,I]=f.useState(""),P=f.useMemo(()=>new Set(c.profiles||[]),[c.profiles]),z=f.useMemo(()=>new Set(c.permissionSets||[]),[c.permissionSets]),O=f.useMemo(()=>Rt(c.permissionsText),[c.permissionsText]),D=f.useMemo(()=>new Set(O),[O]),B=f.useMemo(()=>{if(!e.length)return O;const G=new Set(e);return O.filter(ae=>!G.has(ae))},[e,O]),A=f.useMemo(()=>IM(s),[s]),L=f.useMemo(()=>MM(r),[r]),q=f.useMemo(()=>$M(r),[r]);function N(G,ae,re){return(G||[]).filter(V=>{const Q=ae.get(V);return Q?Yd(Q,re):!0})}function S(G,ae,re){const V=new Set(re||[]);return(G||[]).filter(Q=>{const ie=q.get(Q),K=L.get(Q);if(!ie&&!K)return!0;if(K&&!Yd(K,V))return!1;const ke=new Set;return ie&&ie.forEach(Ce=>ke.add(Ce)),K&&K.forEach(Ce=>{const Re=A.get(Ce);Re&&Re.forEach(ut=>ke.add(ut))}),Yd(ke,ae)})}function U(G,ae){const re=new Set(G.profiles||[]),V=new Set(G.permissionSets||[]),Q=new Set(Rt(G.permissionsText));return re.forEach(ie=>{const K=L.get(ie);K&&K.forEach(Ce=>V.add(Ce));const ke=q.get(ie);ke&&ke.forEach(Ce=>Q.add(Ce)),K&&K.forEach(Ce=>{const Re=A.get(Ce);Re&&Re.forEach(ut=>Q.add(ut))})}),{...G,permissionSets:Array.from(V),permissionsText:Array.from(Q).join(`
`)}}async function W(G){var Q,ie;l(G),I(""),m("edit"),h(!0),x(!0),v(!1),y(!1),_(!1);const ae=Array.isArray(G.profiles)?G.profiles.map(K=>(K==null?void 0:K.name)||(K==null?void 0:K.id)||K).filter(Boolean):[((Q=G.profiles)==null?void 0:Q.name)||G.profile||G.profile_name].filter(Boolean),re=(G.permission_sets||G.permissionSets||G.permission_set_names||[]).map(K=>typeof K=="string"?K:(K==null?void 0:K.name)||(K==null?void 0:K.id)).filter(Boolean);u({name:G.name||"",email:G.email||"",profiles:ae,permissionSets:re,company:((ie=G.company)==null?void 0:ie.code)||G.company_code||G.company_id||"",is_active:G.is_active!==!1,permissionsText:""});const V=G.id||G.user_id;if(V)try{const K=await gI(V),ke=(K==null?void 0:K.permissions)??K,Ce=Array.isArray(ke)?ke.map(Re=>typeof Re=="string"?Re:Re==null?void 0:Re.name).filter(Boolean):[];u(Re=>U({...Re,permissionsText:Ce.join(`
`)}))}catch{}x(!1)}function F(){l(null),I(""),m("add"),x(!1),v(!1),y(!1),_(!1),u({name:"",email:"",profiles:[],permissionSets:[],company:"",is_active:!0,permissionsText:""}),h(!0)}async function ee(){var Q,ie;if(w==="edit"&&!a)return;E(!0),I("");const G=(a==null?void 0:a.id)||(a==null?void 0:a.user_id);if(w==="edit"&&!G){E(!1),I("Missing user id");return}const ae=Rt(c.permissionsText),re=c.profiles||[],V={name:c.name,is_active:!!c.is_active,profile_names:re,profile_name:re[0]||null,permission_sets:c.permissionSets||[],company_code:c.company||null,...w==="add"?{email:c.email}:{}};try{if(w==="add"){const K=await vI(V),ke=(K==null?void 0:K.id)||(K==null?void 0:K.user_id)||((Q=K==null?void 0:K.user)==null?void 0:Q.id)||((ie=K==null?void 0:K.user)==null?void 0:ie.user_id);ke!=null&&await ay(ke,ae),I("User created")}else await yI(G,V),await ay(G,ae),I("User updated");i.invalidateQueries({queryKey:["admin","users"]}),h(!1),l(null)}catch(K){I((K==null?void 0:K.message)||"Failed to save user")}finally{E(!1)}}async function J(G){const ae=(G==null?void 0:G.id)??G;if(ae)try{const re=(G==null?void 0:G.isActive)??(G==null?void 0:G.is_active);(typeof re=="boolean"?re:!0)?await xI(ae):await wI(ae),i.invalidateQueries({queryKey:["admin","users"]}),h(!1),l(null)}catch{}}function te(G){u(ae=>{const re=new Set(Rt(ae.permissionsText)),V=re.has(G);V?re.delete(G):re.add(G);let Q=ae.permissionSets||[],ie=ae.profiles||[];return V&&(Q=N(Q,A,re),ie=S(ie,re,Q)),{...ae,permissionsText:Array.from(re).join(`
`),permissionSets:Q,profiles:ie}})}function ce(){const G=new Set([...O,...e]);u(ae=>({...ae,permissionsText:Array.from(G).join(`
`)}))}function Oe(){u(G=>({...G,permissionsText:"",permissionSets:[],profiles:[]}))}function it(G){u(ae=>{const re=new Set(ae.profiles||[]),V=new Set(ae.permissionSets||[]),Q=new Set(Rt(ae.permissionsText));if(re.has(G)){re.delete(G);const Ce=N(Array.from(V),A,Q),Re=S(Array.from(re),Q,Ce);return{...ae,profiles:Re,permissionSets:Ce,permissionsText:Array.from(Q).join(`
`)}}re.add(G);const K=L.get(G);K&&K.forEach(Ce=>V.add(Ce));const ke=q.get(G);return ke&&ke.forEach(Ce=>Q.add(Ce)),K&&K.forEach(Ce=>{const Re=A.get(Ce);Re&&Re.forEach(ut=>Q.add(ut))}),{...ae,profiles:Array.from(re),permissionSets:Array.from(V),permissionsText:Array.from(Q).join(`
`)}})}function Ve(){u(G=>{const ae=new Set([...G.profiles||[],...t]),re=new Set(G.permissionSets||[]),V=new Set(Rt(G.permissionsText));return ae.forEach(Q=>{const ie=L.get(Q);ie&&ie.forEach(ke=>re.add(ke));const K=q.get(Q);K&&K.forEach(ke=>V.add(ke)),ie&&ie.forEach(ke=>{const Ce=A.get(ke);Ce&&Ce.forEach(Re=>V.add(Re))})}),{...G,profiles:Array.from(ae),permissionSets:Array.from(re),permissionsText:Array.from(V).join(`
`)}})}function at(){u(G=>({...G,profiles:[]}))}function gt(G){u(ae=>{const re=new Set(ae.permissionSets||[]),V=new Set(Rt(ae.permissionsText));if(re.has(G)){re.delete(G);const K=S(ae.profiles||[],V,Array.from(re));return{...ae,permissionSets:Array.from(re),profiles:K,permissionsText:Array.from(V).join(`
`)}}re.add(G);const ie=A.get(G);return ie&&ie.forEach(K=>V.add(K)),{...ae,permissionSets:Array.from(re),permissionsText:Array.from(V).join(`
`)}})}function Zt(){u(G=>{const ae=new Set([...G.permissionSets||[],...n]),re=new Set(Rt(G.permissionsText));return ae.forEach(V=>{const Q=A.get(V);Q&&Q.forEach(ie=>re.add(ie))}),{...G,permissionSets:Array.from(ae),permissionsText:Array.from(re).join(`
`)}})}function vt(){u(G=>{const ae=new Set(Rt(G.permissionsText)),re=S(G.profiles||[],ae,[]);return{...G,permissionSets:[],profiles:re,permissionsText:Array.from(ae).join(`
`)}})}return{selectedUser:a,setSelectedUser:l,userForm:c,setUserForm:u,userModalOpen:d,setUserModalOpen:h,userModalLoading:p,setUserModalLoading:x,userModalMode:w,setUserModalMode:m,userProfilesOpen:b,setUserProfilesOpen:v,userPermissionSetsOpen:g,setUserPermissionSetsOpen:y,userPermissionsOpen:k,setUserPermissionsOpen:_,savingUser:j,permissionsMessage:C,setPermissionsMessage:I,selectUser:W,openNewUserModal:F,saveUser:ee,selectedUserProfiles:P,selectedUserPermissionSets:z,selectedUserPermissions:O,selectedUserPermissionSet:D,customUserPermissions:B,toggleUserPermission:te,selectAllUserPermissions:ce,clearUserPermissions:Oe,toggleUserProfile:it,selectAllUserProfiles:Ve,clearUserProfiles:at,toggleUserPermissionSet:gt,selectAllUserPermissionSets:Zt,clearUserPermissionSets:vt,deleteUser:J}}function UM({open:e,onClose:t,userModalLoading:n,userModalMode:r,selectedUser:s,userForm:i,setUserForm:a,companyList:l,profileOptions:c,profileValues:u,userProfilesOpen:d,setUserProfilesOpen:h,selectAllUserProfiles:p,clearUserProfiles:x,selectedUserProfiles:w,toggleUserProfile:m,permissionSetList:b,permissionSetValues:v,userPermissionSetsOpen:g,setUserPermissionSetsOpen:y,selectAllUserPermissionSets:k,clearUserPermissionSets:_,selectedUserPermissionSets:j,toggleUserPermissionSet:E,userPermissionsOpen:C,setUserPermissionsOpen:I,selectedUserPermissions:P,permissionList:z,permissionsQuery:O,selectedUserPermissionSet:D,toggleUserPermission:B,selectAllUserPermissions:A,clearUserPermissions:L,customUserPermissions:q,isSelfUser:N,setConfirmDelete:S,saveUser:U,savingUser:W}){return o.jsx(Os,{open:e,onClose:t,title:r==="add"?"Add user":"Edit user",maxWidth:"560px",children:n?o.jsx(Ee,{text:"Loading user",className:"text-sm text-black/60 dark:text-white/65"}):r==="add"||s?o.jsxs("div",{className:"space-y-3",children:[r==="edit"?o.jsxs("div",{className:"text-xs text-black/50 dark:text-white/55",children:["Editing ",s==null?void 0:s.email]}):null,o.jsx(he,{label:"Name",children:o.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:i.name,onChange:F=>a(ee=>({...ee,name:F.target.value}))})}),o.jsx(he,{label:"Email",children:o.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:i.email,onChange:F=>a(ee=>({...ee,email:F.target.value})),type:"email",disabled:r==="edit"})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsx(he,{label:"Company",children:o.jsxs("select",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:i.company,onChange:F=>a(ee=>({...ee,company:F.target.value})),children:[o.jsx("option",{value:"",children:"Select company"}),l.map((F,ee)=>{const J=F.code||F.id;return o.jsx("option",{value:J||"",children:F.name||F.code||J},`${J||"company"}-${ee}`)})]})}),o.jsx(he,{label:"Status",children:o.jsxs("select",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:i.is_active?"active":"inactive",onChange:F=>a(ee=>({...ee,is_active:F.target.value==="active"})),children:[o.jsx("option",{value:"active",children:"Active"}),o.jsx("option",{value:"inactive",children:"Inactive"})]})})]}),o.jsx(he,{label:"Profiles",children:o.jsxs(kt,{className:"p-4",children:[o.jsxs("button",{type:"button",className:"flex w-full items-center justify-between gap-3 text-left",onClick:()=>h(F=>!F),"aria-expanded":d,children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Profiles"}),o.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:la(i.profiles.length,"profile")})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-black/50 dark:text-white/55",children:[o.jsx("span",{children:d?"Hide":"Edit"}),o.jsx(fr,{size:16,className:ge("transition-transform",d&&"rotate-180")})]})]}),d?o.jsxs("div",{className:"mt-0 space-y-0",children:[o.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Z,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:p,disabled:!u.length,children:"Select all"}),o.jsx(Z,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:x,disabled:!i.profiles.length,children:"Clear"})]})}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-[168px] overflow-y-auto p-1",children:[c.map(F=>{const ee=F.name||F.id;if(!ee)return null;const J=w.has(ee);return o.jsxs("button",{type:"button",onClick:()=>m(ee),className:ge("mmg-profile-option flex items-center justify-between gap-3 rounded-xl px-3 py-2 text-sm ring-1 transition-colors",J?"bg-black/5 dark:bg-white/10 ring-black/20 dark:ring-white/20 text-black dark:text-white":"bg-white/60 dark:bg-white/5 ring-black/5 dark:ring-white/10 text-black/70 dark:text-white/70 hover:bg-black/5 dark:hover:bg-white/10"),children:[o.jsx("span",{className:"min-w-0 truncate",children:F.display_name||F.name||ee}),o.jsx("span",{className:ge("h-6 w-6 rounded-full flex items-center justify-center transition-colors",J?"bg-black text-white dark:bg-white dark:text-black shadow-soft":"bg-black/5 dark:bg-white/10 text-black/40 dark:text-white/40"),children:o.jsx(aa,{size:14,className:J?"opacity-100":"opacity-0"})})]},ee)}),c.length?null:o.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No profiles available."})]})]}):null]})}),o.jsx(he,{label:"Permission Sets",children:o.jsxs(kt,{className:"p-4",children:[o.jsxs("button",{type:"button",className:"flex w-full items-center justify-between gap-3 text-left",onClick:()=>y(F=>!F),"aria-expanded":g,children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Permission sets"}),o.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:la(i.permissionSets.length,"permission set","permission sets")})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-black/50 dark:text-white/55",children:[o.jsx("span",{children:g?"Hide":"Edit"}),o.jsx(fr,{size:16,className:ge("transition-transform",g&&"rotate-180")})]})]}),g?o.jsxs("div",{className:"mt-0 space-y-0",children:[o.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Z,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:k,disabled:!v.length,children:"Select all"}),o.jsx(Z,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:_,disabled:!i.permissionSets.length,children:"Clear"})]})}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-[168px] overflow-y-auto p-1",children:[b.map(F=>{const ee=F.name||F.id;if(!ee)return null;const J=j.has(ee);return o.jsxs("button",{type:"button",onClick:()=>E(ee),className:ge("flex items-center justify-between gap-3 rounded-xl px-3 py-2 text-sm ring-1 transition-colors",J?"bg-black/5 dark:bg-white/10 ring-black/20 dark:ring-white/20 text-black dark:text-white":"bg-white/60 dark:bg-white/5 ring-black/5 dark:ring-white/10 text-black/70 dark:text-white/70 hover:bg-black/5 dark:hover:bg-white/10"),children:[o.jsx("span",{className:"min-w-0 truncate",children:F.display_name||F.name||ee}),o.jsx("span",{className:ge("h-6 w-6 rounded-full flex items-center justify-center transition-colors",J?"bg-black text-white dark:bg-white dark:text-black shadow-soft":"bg-black/5 dark:bg-white/10 text-black/40 dark:text-white/40"),children:o.jsx(aa,{size:14,className:J?"opacity-100":"opacity-0"})})]},ee)}),b.length?null:o.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No permission sets available."})]})]}):null]})}),o.jsx(he,{label:"Permissions",children:o.jsxs(kt,{className:"p-4",children:[o.jsxs("button",{type:"button",className:"flex w-full items-center justify-between gap-3 text-left",onClick:()=>I(F=>!F),"aria-expanded":C,children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Permissions"}),o.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:la(P.length,"permission")})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-black/50 dark:text-white/55",children:[o.jsx("span",{children:C?"Hide":"Edit"}),o.jsx(fr,{size:16,className:ge("transition-transform",C&&"rotate-180")})]})]}),C?o.jsxs("div",{className:"mt-0 space-y-0",children:[o.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Z,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:A,disabled:!z.length,children:"Select all"}),o.jsx(Z,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:L,disabled:!P.length,children:"Clear"})]})}),O.isLoading?o.jsx(Ee,{text:"Loading permissions",className:"text-sm text-black/60 dark:text-white/65"}):z.length?o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-[168px] overflow-y-auto p-1",children:z.map(F=>{const ee=D.has(F);return o.jsxs("button",{type:"button",onClick:()=>B(F),className:ge("flex items-center justify-between gap-3 rounded-xl px-3 py-2 text-sm ring-1 transition-colors",ee?"bg-black/5 dark:bg-white/10 ring-black/20 dark:ring-white/20 text-black dark:text-white":"bg-white/60 dark:bg-white/5 ring-black/5 dark:ring-white/10 text-black/70 dark:text-white/70 hover:bg-black/5 dark:hover:bg-white/10"),children:[o.jsx("span",{className:"min-w-0 truncate",children:F}),o.jsx("span",{className:ge("h-6 w-6 rounded-full flex items-center justify-center transition-colors",ee?"bg-black text-white dark:bg-white dark:text-black shadow-soft":"bg-black/5 dark:bg-white/10 text-black/40 dark:text-white/40"),children:o.jsx(aa,{size:14,className:ee?"opacity-100":"opacity-0"})})]},F)})}):o.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No permissions available."}),q.length?o.jsxs("div",{className:"rounded-2xl bg-white/50 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 p-3",children:[o.jsx("div",{className:"text-xs font-semibold text-black/60 dark:text-white/65",children:"Custom permissions"}),o.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:q.map(F=>o.jsxs("button",{type:"button",onClick:()=>B(F),className:"flex items-center gap-2 rounded-full bg-black/5 dark:bg-white/10 px-3 py-1 text-xs text-black/70 dark:text-white/70 hover:bg-black/8 dark:hover:bg-white/15",title:"Remove permission",children:[o.jsx("span",{className:"max-w-[220px] truncate",children:F}),o.jsx("span",{className:"text-black/40 dark:text-white/40",children:"x"})]},F))})]}):null]}):null]})}),o.jsxs("div",{className:"flex gap-2 justify-end",children:[r==="edit"?o.jsx(Z,{variant:"ghost",className:ge("rounded-2xl",typeof((s==null?void 0:s.is_active)??(s==null?void 0:s.isActive)??(s==null?void 0:s.active))=="boolean"&&!((s==null?void 0:s.is_active)??(s==null?void 0:s.isActive)??(s==null?void 0:s.active))?"text-emerald-600 hover:text-emerald-700 dark:text-emerald-300":"text-red-600 hover:text-red-700 dark:text-red-300"),onClick:()=>S({open:!0,type:"user",payload:{id:(s==null?void 0:s.id)||(s==null?void 0:s.user_id),isActive:typeof((s==null?void 0:s.is_active)??(s==null?void 0:s.isActive)??(s==null?void 0:s.active))=="boolean"?(s==null?void 0:s.is_active)??(s==null?void 0:s.isActive)??(s==null?void 0:s.active):!0},label:`${typeof((s==null?void 0:s.is_active)??(s==null?void 0:s.isActive)??(s==null?void 0:s.active))=="boolean"?(s==null?void 0:s.is_active)??(s==null?void 0:s.isActive)??(s==null?void 0:s.active)?"Deactivate":"Reactivate":"Deactivate"} user "${s==null?void 0:s.email}"?`}),disabled:N,children:typeof((s==null?void 0:s.is_active)??(s==null?void 0:s.isActive)??(s==null?void 0:s.active))=="boolean"?(s==null?void 0:s.is_active)??(s==null?void 0:s.isActive)??(s==null?void 0:s.active)?"Deactivate":"Reactivate":"Deactivate"}):o.jsx("span",{}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Z,{variant:"ghost",className:"rounded-2xl",onClick:t,children:"Cancel"}),o.jsx(Z,{className:"rounded-2xl",onClick:U,disabled:W,children:W?o.jsx(Ee,{text:"Saving"}):"Save"})]})]})]}):o.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"Select a user to edit."})})}function zM({companySearch:e,setCompanySearch:t,openCompanyModal:n,companiesQuery:r,filteredCompanyList:s,companyLookup:i,setConfirmDelete:a}){return o.jsxs(Ot,{children:[o.jsx(Qt,{className:"space-y-2",children:o.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[o.jsx(hn,{children:"Companies"}),o.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-end",children:[o.jsx(Ha,{value:e,onChange:l=>t(l.target.value),className:"w-full sm:w-[220px]"}),o.jsx(Z,{variant:"secondary",className:"rounded-2xl self-start sm:self-auto",onClick:()=>n(null),children:"Add company"})]})]})}),o.jsx(Jt,{className:"space-y-4",children:r.isLoading?o.jsx(Ee,{text:"Loading",className:"text-sm text-black/60 dark:text-white/65"}):o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.map(l=>o.jsxs(kt,{className:"p-4 space-y-2",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-base font-semibold",children:l.name||l.code}),o.jsx("div",{className:"text-sm text-black/55 dark:text-white/60",children:l.code||""})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ft,{onClick:()=>n(l),title:"Edit company","aria-label":"Edit company",children:o.jsx(vl,{size:16})}),o.jsx(Ft,{variant:"ghost",onClick:()=>a({open:!0,type:"company",payload:l.code||l.id,label:`Delete company "${l.name||l.code}"?`}),title:"Delete company","aria-label":"Delete company",children:o.jsx(Aa,{size:16})})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2 text-sm text-black/55 dark:text-white/60",children:[l.country?o.jsx("span",{children:l.country}):null,l.currency?o.jsxs("span",{children:[" ",l.currency]}):null,l.timezone?o.jsxs("span",{children:[" ",l.timezone]}):null]}),o.jsxs("div",{className:"flex flex-wrap gap-2 text-sm text-black/55 dark:text-white/60",children:[o.jsxs("span",{children:["Parent: ",i.get(l.parent_id)||""]}),o.jsxs("span",{children:[" ",l.isgroup?"Group":"Company"]}),o.jsxs("span",{children:[" ",l.is_active===!1?"Inactive":"Active"]})]})]},l.code||l.id)),s.length?null:o.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:e.trim()?"No matching companies.":"No companies available."})]})})]})}function BM({companySearch:e,setCompanySearch:t,companiesQuery:n,filteredCompanyList:r,companyLookup:s,companyList:i}){const{companyForm:a,setCompanyForm:l,editingCompany:c,setEditingCompany:u,companyModalOpen:d,setCompanyModalOpen:h,savingCompany:p,openCompanyModal:x,saveCompany:w,deleteCompany:m}=WM(),[b,v]=f.useState({open:!1,type:"",payload:null,label:""});async function g(){if(!(!b.open||!b.payload))try{await m(b.payload)}finally{v({open:!1,type:"",payload:null,label:""})}}return o.jsxs(o.Fragment,{children:[o.jsx(zM,{companySearch:e,setCompanySearch:t,openCompanyModal:x,companiesQuery:n,filteredCompanyList:r,companyLookup:s,setConfirmDelete:v}),o.jsx(VM,{open:d,onClose:()=>{h(!1),u(null),l({code:"",name:"",parent_id:"",country:"",currency:"",timezone:"",isgroup:!1,is_active:!0})},editingCompany:c,companyForm:a,setCompanyForm:l,companyList:i,setConfirmDelete:v,saveCompany:w,savingCompany:p}),o.jsx(jl,{open:b.open,message:b.label,onClose:()=>v({open:!1,type:"",payload:null,label:""}),onConfirm:g})]})}function WM(){const e=Br(),[t,n]=f.useState({code:"",name:"",parent_id:"",country:"",currency:"",timezone:"",isgroup:!1,is_active:!0}),[r,s]=f.useState(null),[i,a]=f.useState(!1),[l,c]=f.useState(!1);function u(p){p?(s(p.code||p.id),n({code:p.code||"",name:p.name||"",parent_id:p.parent_id??"",country:p.country??"",currency:p.currency??"",timezone:p.timezone??"",isgroup:!!p.isgroup,is_active:p.is_active!==!1})):(s(null),n({code:"",name:"",parent_id:"",country:"",currency:"",timezone:"",isgroup:!1,is_active:!0})),a(!0)}async function d(){if(!t.code.trim()||!t.name.trim())return;c(!0);const p={code:t.code.trim(),name:t.name.trim(),parent_id:t.parent_id||null,country:t.country||null,currency:t.currency||null,timezone:t.timezone||null,isgroup:!!t.isgroup,is_active:!!t.is_active};try{r?await NI(r,p):await CI(p),e.invalidateQueries({queryKey:["admin","companies"]}),a(!1),s(null)}catch{}finally{c(!1)}}async function h(p){if(p)try{await PI(p),e.invalidateQueries({queryKey:["admin","companies"]}),a(!1),s(null)}catch{}}return{companyForm:t,setCompanyForm:n,editingCompany:r,setEditingCompany:s,companyModalOpen:i,setCompanyModalOpen:a,savingCompany:l,openCompanyModal:u,saveCompany:d,deleteCompany:h}}function VM({open:e,onClose:t,editingCompany:n,companyForm:r,setCompanyForm:s,companyList:i,setConfirmDelete:a,saveCompany:l,savingCompany:c}){return o.jsx(Os,{open:e,onClose:t,title:n?`Edit company: ${r.name||r.code}`:"Add company",maxWidth:"640px",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsx(he,{label:"Code",children:o.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:r.code,onChange:u=>s(d=>({...d,code:u.target.value})),placeholder:"MMG-001",disabled:!!n})}),o.jsx(he,{label:"Name",children:o.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:r.name,onChange:u=>s(d=>({...d,name:u.target.value})),placeholder:"MMG Global"})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsx(he,{label:"Parent company",children:o.jsxs("select",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:r.parent_id,onChange:u=>s(d=>({...d,parent_id:u.target.value})),children:[o.jsx("option",{value:"",children:"None"}),i.filter(u=>(u.code||u.id)!==r.code).map((u,d)=>{const h=u.code||u.id;return o.jsx("option",{value:h||"",children:u.name||u.code||h},`${h||"company"}-${d}`)})]})}),o.jsx(he,{label:"Country",children:o.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:r.country,onChange:u=>s(d=>({...d,country:u.target.value})),placeholder:"US"})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsx(he,{label:"Currency",children:o.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:r.currency,onChange:u=>s(d=>({...d,currency:u.target.value})),placeholder:"USD"})}),o.jsx(he,{label:"Timezone",children:o.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:r.timezone,onChange:u=>s(d=>({...d,timezone:u.target.value})),placeholder:"America/New_York"})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsx(he,{label:"Type",children:o.jsxs("select",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:r.isgroup?"group":"company",onChange:u=>s(d=>({...d,isgroup:u.target.value==="group"})),children:[o.jsx("option",{value:"company",children:"Company"}),o.jsx("option",{value:"group",children:"Group"})]})}),o.jsx(he,{label:"Status",children:o.jsxs("select",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:r.is_active?"active":"inactive",onChange:u=>s(d=>({...d,is_active:u.target.value==="active"})),children:[o.jsx("option",{value:"active",children:"Active"}),o.jsx("option",{value:"inactive",children:"Inactive"})]})})]}),o.jsxs("div",{className:"flex items-center justify-between gap-2 pt-1",children:[n?o.jsx(Z,{variant:"ghost",className:"rounded-2xl text-red-600 hover:text-red-700 dark:text-red-300",onClick:()=>a({open:!0,type:"company",payload:n,label:`Delete company "${r.name||r.code}"?`}),children:"Delete"}):o.jsx("span",{}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Z,{variant:"ghost",className:"rounded-2xl",onClick:t,children:"Cancel"}),o.jsx(Z,{className:"rounded-2xl",onClick:l,disabled:c,children:c?o.jsx(Ee,{text:"Saving"}):"Save"})]})]})]})})}function HM({profileSearch:e,setProfileSearch:t,openProfileModal:n,filteredProfileOptions:r,duplicateProfile:s,setConfirmDelete:i}){return o.jsxs(Ot,{children:[o.jsx(Qt,{className:"space-y-2",children:o.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[o.jsx(hn,{children:"Profiles"}),o.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-end",children:[o.jsx(Ha,{value:e,onChange:a=>t(a.target.value),className:"w-full sm:w-[220px]"}),o.jsx(Z,{variant:"secondary",className:"rounded-2xl self-start sm:self-auto",onClick:()=>n(null),children:"Add profile"})]})]})}),o.jsxs(Jt,{className:"space-y-4",children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:r.map(a=>o.jsxs(kt,{className:"p-4 space-y-1",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-base font-semibold",children:a.display_name||a.name}),o.jsx("div",{className:"text-sm text-black/55 dark:text-white/60",children:a.name})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ft,{onClick:()=>s(a),title:"Duplicate profile","aria-label":"Duplicate profile",children:o.jsx(h0,{size:16})}),a.is_system?o.jsx("span",{className:"text-xs rounded-full px-2 py-0.5 bg-black/5 dark:bg-white/10",children:"System"}):o.jsxs(o.Fragment,{children:[o.jsx(Ft,{onClick:()=>n(a),title:"Edit profile","aria-label":"Edit profile",children:o.jsx(vl,{size:16})}),o.jsx(Ft,{variant:"ghost",onClick:()=>i({open:!0,type:"profile",payload:a.id||a.name,label:`Delete profile "${a.display_name||a.name}"?`}),title:"Delete profile","aria-label":"Delete profile",children:o.jsx(Aa,{size:16})})]})]})]}),o.jsxs("div",{className:"text-sm text-black/55 dark:text-white/60",children:[(a.permissions||[]).length," permission",(a.permissions||[]).length===1?"":"s"]}),a.description?o.jsx("div",{className:"text-sm text-black/60 dark:text-white/65 truncate",children:a.description}):null]},a.id||a.name))}),r.length?null:o.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:e.trim()?"No matching profiles.":"No profiles available."})]})]})}function KM({profileSearch:e,setProfileSearch:t,filteredProfileOptions:n,permissionList:r,permissionSetValues:s,permissionSetList:i,permissionSetsQuery:a,permissionsQuery:l}){const{profileForm:c,setProfileForm:u,editingProfile:d,setEditingProfile:h,profileModalOpen:p,setProfileModalOpen:x,profileIsSystem:w,setProfileIsSystem:m,profilePermissionSetsOpen:b,setProfilePermissionSetsOpen:v,profilePermissionsOpen:g,setProfilePermissionsOpen:y,savingProfile:k,openProfileModal:_,duplicateProfile:j,saveProfile:E,deleteProfile:C,selectedProfilePermissions:I,selectedProfilePermissionSet:P,selectedProfilePermissionSets:z,customProfilePermissions:O,toggleProfilePermission:D,selectAllProfilePermissions:B,clearProfilePermissions:A,toggleProfilePermissionSet:L,selectAllProfilePermissionSets:q,clearProfilePermissionSets:N}=qM({permissionList:r,permissionSetValues:s,permissionSetList:i}),[S,U]=f.useState({open:!1,type:"",payload:null,label:""});async function W(){if(!(!S.open||!S.payload))try{await C(S.payload)}finally{U({open:!1,type:"",payload:null,label:""})}}return o.jsxs(o.Fragment,{children:[o.jsx(HM,{profileSearch:e,setProfileSearch:t,openProfileModal:_,filteredProfileOptions:n,duplicateProfile:j,setConfirmDelete:U}),o.jsx(GM,{open:p,onClose:()=>{x(!1),h(null),u({name:"",display_name:"",description:"",permissionsText:"",permissionSets:[]}),m(!1),v(!1),y(!1)},editingProfile:d,profileForm:c,setProfileForm:u,profileIsSystem:w,profilePermissionSetsOpen:b,setProfilePermissionSetsOpen:v,profilePermissionsOpen:g,setProfilePermissionsOpen:y,permissionSetValues:s,permissionSetsQuery:a,permissionSetList:i,selectedProfilePermissionSets:z,toggleProfilePermissionSet:L,selectAllProfilePermissionSets:q,clearProfilePermissionSets:N,selectedProfilePermissions:I,permissionList:r,permissionsQuery:l,selectedProfilePermissionSet:P,toggleProfilePermission:D,selectAllProfilePermissions:B,clearProfilePermissions:A,customProfilePermissions:O,setConfirmDelete:U,saveProfile:E,savingProfile:k}),o.jsx(jl,{open:S.open,message:S.label,onClose:()=>U({open:!1,type:"",payload:null,label:""}),onConfirm:W})]})}function qM({permissionList:e,permissionSetValues:t,permissionSetList:n}){const r=Br(),[s,i]=f.useState({name:"",display_name:"",description:"",permissionsText:"",permissionSets:[]}),[a,l]=f.useState(null),[c,u]=f.useState(!1),[d,h]=f.useState(!1),[p,x]=f.useState(!1),[w,m]=f.useState(!1),[b,v]=f.useState(!1),g=f.useMemo(()=>Rt(s.permissionsText),[s.permissionsText]),y=f.useMemo(()=>new Set(g),[g]),k=f.useMemo(()=>new Set(s.permissionSets||[]),[s.permissionSets]),_=f.useMemo(()=>{if(!e.length)return g;const N=new Set(e);return g.filter(S=>!N.has(S))},[e,g]),j=f.useMemo(()=>{const N=new Map;return(n||[]).forEach(S=>{const U=S.name||S.id;if(!U)return;const W=(S.permissions||S.permission_list||S.permissionList||[]).map(F=>typeof F=="string"?F:(F==null?void 0:F.name)||(F==null?void 0:F.value)||(F==null?void 0:F.permission)).filter(Boolean);N.set(U,new Set(W))}),N},[n]);function E(N,S){return(N||[]).filter(U=>{const W=j.get(U);if(!W)return!0;for(const F of W)if(!S.has(F))return!1;return!0})}function C(N){h(!!(N!=null&&N.is_system)),!(N!=null&&N.is_system)&&(x(!1),m(!1),N?(l(N.id||N.name),i({name:N.name,display_name:N.display_name||N.name,description:N.description||"",permissionsText:(N.permissions||[]).map(S=>typeof S=="string"?S:S==null?void 0:S.name).filter(Boolean).join(`
`),permissionSets:(N.permission_sets||N.permissionSets||N.permission_set_names||[]).map(S=>typeof S=="string"?S:(S==null?void 0:S.name)||(S==null?void 0:S.id)).filter(Boolean)})):(l(null),i({name:"",display_name:"",description:"",permissionsText:"",permissionSets:[]})),u(!0))}function I(N){if(!N)return;const S=N.name||N.display_name||"profile",U=N.display_name||N.name||S;h(!1),l(null),x(!1),m(!1),i({name:`${S}_new`,display_name:`${U}_new`,description:N.description||"",permissionsText:(N.permissions||[]).map(W=>typeof W=="string"?W:W==null?void 0:W.name).filter(Boolean).join(`
`),permissionSets:(N.permission_sets||N.permissionSets||N.permission_set_names||[]).map(W=>typeof W=="string"?W:(W==null?void 0:W.name)||(W==null?void 0:W.id)).filter(Boolean)}),u(!0)}async function P(){if(s.name.trim()){v(!0);try{const N={name:s.name.trim(),display_name:s.display_name||s.name,description:s.description,permissions:Rt(s.permissionsText),permission_sets:s.permissionSets||[]};a?await _I(a,N):await kI(N),r.invalidateQueries({queryKey:["admin","profiles"]}),i({name:"",display_name:"",description:"",permissionsText:"",permissionSets:[]}),l(null),u(!1)}catch{}finally{v(!1)}}}async function z(N){try{await SI(N),r.invalidateQueries({queryKey:["admin","profiles"]}),a===N&&(l(null),i({name:"",display_name:"",description:"",permissionsText:"",permissionSets:[]})),u(!1)}catch{}}function O(N){i(S=>{const U=new Set(Rt(S.permissionsText)),W=U.has(N);W?U.delete(N):U.add(N);let F=S.permissionSets||[];return W&&(F=E(F,U)),{...S,permissionsText:Array.from(U).join(`
`),permissionSets:F}})}function D(){const N=new Set([...g,...e]);i(S=>({...S,permissionsText:Array.from(N).join(`
`)}))}function B(){i(N=>({...N,permissionsText:""}))}function A(N){i(S=>{const U=new Set(S.permissionSets||[]),W=new Set(Rt(S.permissionsText));if(U.has(N))return U.delete(N),{...S,permissionSets:Array.from(U),permissionsText:Array.from(W).join(`
`)};U.add(N);const ee=j.get(N);return ee&&ee.forEach(J=>W.add(J)),{...S,permissionSets:Array.from(U),permissionsText:Array.from(W).join(`
`)}})}function L(){i(N=>{const S=new Set([...N.permissionSets||[],...t]),U=new Set(Rt(N.permissionsText));return S.forEach(W=>{const F=j.get(W);F&&F.forEach(ee=>U.add(ee))}),{...N,permissionSets:Array.from(S),permissionsText:Array.from(U).join(`
`)}})}function q(){i(N=>({...N,permissionSets:[]}))}return{profileForm:s,setProfileForm:i,editingProfile:a,setEditingProfile:l,profileModalOpen:c,setProfileModalOpen:u,profileIsSystem:d,setProfileIsSystem:h,profilePermissionSetsOpen:p,setProfilePermissionSetsOpen:x,profilePermissionsOpen:w,setProfilePermissionsOpen:m,savingProfile:b,openProfileModal:C,duplicateProfile:I,saveProfile:P,deleteProfile:z,selectedProfilePermissions:g,selectedProfilePermissionSet:y,selectedProfilePermissionSets:k,customProfilePermissions:_,toggleProfilePermission:O,selectAllProfilePermissions:D,clearProfilePermissions:B,toggleProfilePermissionSet:A,selectAllProfilePermissionSets:L,clearProfilePermissionSets:q}}function GM({open:e,onClose:t,editingProfile:n,profileForm:r,setProfileForm:s,profileIsSystem:i,profilePermissionSetsOpen:a,setProfilePermissionSetsOpen:l,profilePermissionsOpen:c,setProfilePermissionsOpen:u,permissionSetValues:d,permissionSetsQuery:h,permissionSetList:p,selectedProfilePermissionSets:x,toggleProfilePermissionSet:w,selectAllProfilePermissionSets:m,clearProfilePermissionSets:b,selectedProfilePermissions:v,permissionList:g,permissionsQuery:y,selectedProfilePermissionSet:k,toggleProfilePermission:_,selectAllProfilePermissions:j,clearProfilePermissions:E,customProfilePermissions:C,setConfirmDelete:I,saveProfile:P,savingProfile:z}){return o.jsx(Os,{open:e,onClose:t,title:n?`Edit profile: ${n}`:"Add profile",maxWidth:"640px",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsx(he,{label:"Name",children:o.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:r.name,onChange:O=>s(D=>({...D,name:O.target.value})),placeholder:"system_admin",disabled:!!n})}),o.jsx(he,{label:"Display Name",children:o.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:r.display_name,onChange:O=>s(D=>({...D,display_name:O.target.value})),placeholder:"System Admin"})})]}),o.jsx(he,{label:"Description",children:o.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:r.description,onChange:O=>s(D=>({...D,description:O.target.value})),placeholder:"What this profile can do"})}),o.jsx(he,{label:"Permission Sets",children:o.jsxs(kt,{className:"p-4",children:[o.jsxs("button",{type:"button",className:"flex w-full items-center justify-between gap-3 text-left",onClick:()=>l(O=>!O),"aria-expanded":a,children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Permission sets"}),o.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:la(r.permissionSets.length,"permission set","permission sets")})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-black/50 dark:text-white/55",children:[o.jsx("span",{children:a?"Hide":"Edit"}),o.jsx(fr,{size:16,className:ge("transition-transform",a&&"rotate-180")})]})]}),a?o.jsxs("div",{className:"mt-0 space-y-0",children:[o.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Z,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:m,disabled:!d.length,children:"Select all"}),o.jsx(Z,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:b,disabled:!r.permissionSets.length,children:"Clear"})]})}),h.isLoading?o.jsx(Ee,{text:"Loading permission sets",className:"text-sm text-black/60 dark:text-white/65"}):p.length?o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-[168px] overflow-y-auto p-1",children:p.map(O=>{const D=O.name||O.id;if(!D)return null;const B=x.has(D);return o.jsxs("button",{type:"button",onClick:()=>w(D),className:ge("flex items-center justify-between gap-3 rounded-xl px-3 py-2 text-sm ring-1 transition-colors",B?"bg-black/5 dark:bg-white/10 ring-black/20 dark:ring-white/20 text-black dark:text-white":"bg-white/60 dark:bg-white/5 ring-black/5 dark:ring-white/10 text-black/70 dark:text-white/70 hover:bg-black/5 dark:hover:bg-white/10"),children:[o.jsx("span",{className:"min-w-0 truncate text-sm font-medium",children:O.display_name||O.name||D}),o.jsx("span",{className:ge("h-6 w-6 rounded-full flex items-center justify-center transition-colors",B?"bg-black text-white dark:bg-white dark:text-black shadow-soft":"bg-black/5 dark:bg-white/10 text-black/40 dark:text-white/40"),children:o.jsx(aa,{size:14,className:B?"opacity-100":"opacity-0"})})]},D)})}):o.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No permission sets available."})]}):null]})}),o.jsx(he,{label:"Permissions",children:o.jsxs(kt,{className:"p-4",children:[o.jsxs("button",{type:"button",className:"flex w-full items-center justify-between gap-3 text-left",onClick:()=>u(O=>!O),"aria-expanded":c,children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Permissions"}),o.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:la(v.length,"permission")})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-black/50 dark:text-white/55",children:[o.jsx("span",{children:c?"Hide":"Edit"}),o.jsx(fr,{size:16,className:ge("transition-transform",c&&"rotate-180")})]})]}),c?o.jsxs("div",{className:"mt-0 space-y-0",children:[o.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Z,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:j,disabled:!g.length,children:"Select all"}),o.jsx(Z,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:E,disabled:!v.length,children:"Clear"})]})}),y.isLoading?o.jsx(Ee,{text:"Loading permissions",className:"text-sm text-black/60 dark:text-white/65"}):g.length?o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-[110px] overflow-y-auto p-1",children:g.map(O=>{const D=k.has(O);return o.jsxs("button",{type:"button",onClick:()=>_(O),className:ge("flex items-center justify-between gap-3 rounded-xl px-3 py-2 text-sm ring-1 transition-colors",D?"bg-black/5 dark:bg-white/10 ring-black/20 dark:ring-white/20 text-black dark:text-white":"bg-white/60 dark:bg-white/5 ring-black/5 dark:ring-white/10 text-black/70 dark:text-white/70 hover:bg-black/5 dark:hover:bg-white/10"),children:[o.jsx("span",{className:"min-w-0 truncate",children:O}),o.jsx("span",{className:ge("h-6 w-6 rounded-full flex items-center justify-center transition-colors",D?"bg-black text-white dark:bg-white dark:text-black shadow-soft":"bg-black/5 dark:bg-white/10 text-black/40 dark:text-white/40"),children:o.jsx(aa,{size:14,className:D?"opacity-100":"opacity-0"})})]},O)})}):o.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No permissions available."}),C.length?o.jsxs("div",{className:"rounded-2xl bg-white/50 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 p-3",children:[o.jsx("div",{className:"text-xs font-semibold text-black/60 dark:text-white/65",children:"Custom permissions"}),o.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:C.map(O=>o.jsxs("button",{type:"button",onClick:()=>_(O),className:"flex items-center gap-2 rounded-full bg-black/5 dark:bg-white/10 px-3 py-1 text-xs text-black/70 dark:text-white/70 hover:bg-black/8 dark:hover:bg-white/15",title:"Remove permission",children:[o.jsx("span",{className:"max-w-[220px] truncate",children:O}),o.jsx("span",{className:"text-black/40 dark:text-white/40",children:"x"})]},O))})]}):null]}):null]})}),o.jsxs("div",{className:"flex items-center justify-between gap-2 pt-1",children:[n?o.jsx(Z,{variant:"ghost",className:"rounded-2xl text-red-600 hover:text-red-700 dark:text-red-300",onClick:()=>I({open:!0,type:"profile",payload:n,label:`Delete profile "${r.display_name||r.name}"?`}),disabled:i,children:"Delete"}):o.jsx("span",{}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Z,{variant:"ghost",className:"rounded-2xl",onClick:t,children:"Cancel"}),o.jsx(Z,{className:"rounded-2xl",onClick:P,disabled:z||i,children:z?o.jsx(Ee,{text:"Saving"}):"Save"})]})]})]})})}function QM({permissionSetSearch:e,setPermissionSetSearch:t,openPermissionSetModal:n,permissionSetsQuery:r,filteredPermissionSetList:s,duplicatePermissionSet:i,setConfirmDelete:a}){return o.jsxs(Ot,{children:[o.jsx(Qt,{className:"space-y-2",children:o.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[o.jsx(hn,{children:"Permission Sets"}),o.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-end",children:[o.jsx(Ha,{value:e,onChange:l=>t(l.target.value),className:"w-full sm:w-[220px]"}),o.jsx(Z,{variant:"secondary",className:"rounded-2xl self-start sm:self-auto",onClick:()=>n(null),children:"Add permission set"})]})]})}),o.jsx(Jt,{className:"space-y-4",children:r.isLoading?o.jsx(Ee,{text:"Loading",className:"text-sm text-black/60 dark:text-white/65"}):o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.map(l=>o.jsxs(kt,{className:"p-4 space-y-1",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-base font-semibold",children:l.display_name||l.name}),o.jsx("div",{className:"text-sm text-black/55 dark:text-white/60",children:l.name})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ft,{onClick:()=>i(l),title:"Duplicate permission set","aria-label":"Duplicate permission set",children:o.jsx(h0,{size:16})}),o.jsx(Ft,{onClick:()=>n(l),title:"Edit permission set","aria-label":"Edit permission set",children:o.jsx(vl,{size:16})}),o.jsx(Ft,{variant:"ghost",onClick:()=>a({open:!0,type:"permission-set",payload:l.name,label:`Delete permission set "${l.display_name||l.name}"?`}),title:"Delete permission set","aria-label":"Delete permission set",children:o.jsx(Aa,{size:16})})]})]}),o.jsxs("div",{className:"text-sm text-black/55 dark:text-white/60",children:[(l.permissions||[]).length," permission",(l.permissions||[]).length===1?"":"s"]}),l.description?o.jsx("div",{className:"text-sm text-black/60 dark:text-white/65 truncate",children:l.description}):null]},l.name)),s.length?null:o.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:e.trim()?"No matching permission sets.":"No permission sets available."})]})})]})}function JM({permissionSetSearch:e,setPermissionSetSearch:t,permissionSetsQuery:n,filteredPermissionSetList:r,permissionList:s,permissionsQuery:i}){const{permissionSetForm:a,setPermissionSetForm:l,editingPermissionSet:c,setEditingPermissionSet:u,permissionSetModalOpen:d,setPermissionSetModalOpen:h,savingPermissionSet:p,permissionSetPermissionsOpen:x,setPermissionSetPermissionsOpen:w,openPermissionSetModal:m,duplicatePermissionSet:b,savePermissionSet:v,deletePermissionSet:g,selectedPermissionSetPermissions:y,selectedPermissionSetPermissionSet:k,customPermissionSetPermissions:_,togglePermissionSetPermission:j,selectAllPermissionSetPermissions:E,clearPermissionSetPermissions:C}=YM({permissionList:s}),[I,P]=f.useState({open:!1,type:"",payload:null,label:""});async function z(){if(!(!I.open||!I.payload))try{await g(I.payload)}finally{P({open:!1,type:"",payload:null,label:""})}}return o.jsxs(o.Fragment,{children:[o.jsx(QM,{permissionSetSearch:e,setPermissionSetSearch:t,openPermissionSetModal:m,permissionSetsQuery:n,filteredPermissionSetList:r,duplicatePermissionSet:b,setConfirmDelete:P}),o.jsx(XM,{open:d,onClose:()=>{h(!1),u(null),l({name:"",display_name:"",description:"",permissionsText:""}),w(!1)},editingPermissionSet:c,permissionSetForm:a,setPermissionSetForm:l,permissionSetPermissionsOpen:x,setPermissionSetPermissionsOpen:w,selectedPermissionSetPermissions:y,permissionList:s,permissionsQuery:i,selectedPermissionSetPermissionSet:k,togglePermissionSetPermission:j,selectAllPermissionSetPermissions:E,clearPermissionSetPermissions:C,customPermissionSetPermissions:_,setConfirmDelete:P,savePermissionSet:v,savingPermissionSet:p}),o.jsx(jl,{open:I.open,message:I.label,onClose:()=>P({open:!1,type:"",payload:null,label:""}),onConfirm:z})]})}function YM({permissionList:e}){const t=Br(),[n,r]=f.useState({name:"",display_name:"",description:"",permissionsText:""}),[s,i]=f.useState(null),[a,l]=f.useState(!1),[c,u]=f.useState(!1),[d,h]=f.useState(!1),p=f.useMemo(()=>Rt(n.permissionsText),[n.permissionsText]),x=f.useMemo(()=>new Set(p),[p]),w=f.useMemo(()=>{if(!e.length)return p;const j=new Set(e);return p.filter(E=>!j.has(E))},[e,p]);function m(j){h(!1),j?(i(j.name),r({name:j.name||"",display_name:j.display_name||j.name||"",description:j.description||"",permissionsText:(j.permissions||[]).map(E=>typeof E=="string"?E:E==null?void 0:E.name).filter(Boolean).join(`
`)})):(i(null),r({name:"",display_name:"",description:"",permissionsText:""})),l(!0)}function b(j){if(!j)return;const E=j.name||j.display_name||"permission_set",C=j.display_name||j.name||E;i(null),h(!1),r({name:`${E}_new`,display_name:`${C}_new`,description:j.description||"",permissionsText:(j.permissions||[]).map(I=>typeof I=="string"?I:I==null?void 0:I.name).filter(Boolean).join(`
`)}),l(!0)}async function v(){if(!n.name.trim())return;u(!0);const j={name:n.name.trim(),display_name:n.display_name||n.name.trim(),description:n.description,permissions:Rt(n.permissionsText)};try{s?await AI(s,j):await TI(j),t.invalidateQueries({queryKey:["admin","permission-sets"]}),l(!1),i(null)}catch{}finally{u(!1)}}async function g(j){if(j)try{await OI(j),t.invalidateQueries({queryKey:["admin","permission-sets"]}),l(!1),i(null)}catch{}}function y(j){r(E=>{const C=new Set(Rt(E.permissionsText));return C.has(j)?C.delete(j):C.add(j),{...E,permissionsText:Array.from(C).join(`
`)}})}function k(){const j=new Set([...p,...e]);r(E=>({...E,permissionsText:Array.from(j).join(`
`)}))}function _(){r(j=>({...j,permissionsText:""}))}return{permissionSetForm:n,setPermissionSetForm:r,editingPermissionSet:s,setEditingPermissionSet:i,permissionSetModalOpen:a,setPermissionSetModalOpen:l,savingPermissionSet:c,permissionSetPermissionsOpen:d,setPermissionSetPermissionsOpen:h,openPermissionSetModal:m,duplicatePermissionSet:b,savePermissionSet:v,deletePermissionSet:g,selectedPermissionSetPermissions:p,selectedPermissionSetPermissionSet:x,customPermissionSetPermissions:w,togglePermissionSetPermission:y,selectAllPermissionSetPermissions:k,clearPermissionSetPermissions:_}}function XM({open:e,onClose:t,editingPermissionSet:n,permissionSetForm:r,setPermissionSetForm:s,permissionSetPermissionsOpen:i,setPermissionSetPermissionsOpen:a,selectedPermissionSetPermissions:l,permissionList:c,permissionsQuery:u,selectedPermissionSetPermissionSet:d,togglePermissionSetPermission:h,selectAllPermissionSetPermissions:p,clearPermissionSetPermissions:x,customPermissionSetPermissions:w,setConfirmDelete:m,savePermissionSet:b,savingPermissionSet:v}){return o.jsx(Os,{open:e,onClose:t,title:n?`Edit permission set: ${n}`:"Add permission set",maxWidth:"640px",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsx(he,{label:"Name",children:o.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:r.name,onChange:g=>s(y=>({...y,name:g.target.value})),placeholder:"sales_ops",disabled:!!n})}),o.jsx(he,{label:"Display Name",children:o.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:r.display_name,onChange:g=>s(y=>({...y,display_name:g.target.value})),placeholder:"Sales Ops"})})]}),o.jsx(he,{label:"Description",children:o.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:r.description,onChange:g=>s(y=>({...y,description:g.target.value})),placeholder:"What this permission set grants"})}),o.jsx(he,{label:"Permissions",children:o.jsxs(kt,{className:"p-4",children:[o.jsxs("button",{type:"button",className:"flex w-full items-center justify-between gap-3 text-left",onClick:()=>a(g=>!g),"aria-expanded":i,children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Permissions"}),o.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:la(l.length,"permission")})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-black/50 dark:text-white/55",children:[o.jsx("span",{children:i?"Hide":"Edit"}),o.jsx(fr,{size:16,className:ge("transition-transform",i&&"rotate-180")})]})]}),i?o.jsxs("div",{className:"mt-0 space-y-0",children:[o.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Z,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:p,disabled:!c.length,children:"Select all"}),o.jsx(Z,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:x,disabled:!l.length,children:"Clear"})]})}),u.isLoading?o.jsx(Ee,{text:"Loading permissions",className:"text-sm text-black/60 dark:text-white/65"}):c.length?o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-[168px] overflow-y-auto p-1",children:c.map(g=>{const y=d.has(g);return o.jsxs("button",{type:"button",onClick:()=>h(g),className:ge("flex items-center justify-between gap-3 rounded-xl px-3 py-2 text-sm ring-1 transition-colors",y?"bg-black/5 dark:bg-white/10 ring-black/20 dark:ring-white/20 text-black dark:text-white":"bg-white/60 dark:bg-white/5 ring-black/5 dark:ring-white/10 text-black/70 dark:text-white/70 hover:bg-black/5 dark:hover:bg-white/10"),children:[o.jsx("span",{className:"min-w-0 truncate",children:g}),o.jsx("span",{className:ge("h-6 w-6 rounded-full flex items-center justify-center transition-colors",y?"bg-black text-white dark:bg-white dark:text-black shadow-soft":"bg-black/5 dark:bg-white/10 text-black/40 dark:text-white/40"),children:o.jsx(aa,{size:14,className:y?"opacity-100":"opacity-0"})})]},g)})}):o.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No permissions available."}),w.length?o.jsxs("div",{className:"rounded-2xl bg-white/50 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 p-3",children:[o.jsx("div",{className:"text-xs font-semibold text-black/60 dark:text-white/65",children:"Custom permissions"}),o.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:w.map(g=>o.jsxs("button",{type:"button",onClick:()=>h(g),className:"flex items-center gap-2 rounded-full bg-black/5 dark:bg-white/10 px-3 py-1 text-xs text-black/70 dark:text-white/70 hover:bg-black/8 dark:hover:bg-white/15",title:"Remove permission",children:[o.jsx("span",{className:"max-w-[220px] truncate",children:g}),o.jsx("span",{className:"text-black/40 dark:text-white/40",children:"x"})]},g))})]}):null]}):null]})}),o.jsxs("div",{className:"flex items-center justify-between gap-2 pt-1",children:[n?o.jsx(Z,{variant:"ghost",className:"rounded-2xl text-red-600 hover:text-red-700 dark:text-red-300",onClick:()=>m({open:!0,type:"permission-set",payload:n,label:`Delete permission set "${r.display_name||r.name}"?`}),children:"Delete"}):o.jsx("span",{}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Z,{variant:"ghost",className:"rounded-2xl",onClick:t,children:"Cancel"}),o.jsx(Z,{className:"rounded-2xl",onClick:b,disabled:v,children:v?o.jsx(Ee,{text:"Saving"}):"Save"})]})]})]})})}function ZM({permissionSearch:e,setPermissionSearch:t,openPermissionModal:n,permissionModuleFilter:r,setPermissionModuleFilter:s,permissionServiceFilter:i,setPermissionServiceFilter:a,permissionActionFilter:l,setPermissionActionFilter:c,permissionModuleOptions:u,permissionFilterServiceOptions:d,permissionFilterActionOptions:h,permissionsQuery:p,filteredPermissionList:x,parsePermissionParts:w,mergedPermissionDescriptions:m,setConfirmDelete:b}){return o.jsxs(Ot,{children:[o.jsxs(Qt,{className:"space-y-2",children:[o.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[o.jsx(hn,{children:"Permissions"}),o.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-end",children:[o.jsx(Ha,{value:e,onChange:v=>t(v.target.value),className:"w-full sm:w-[220px]"}),o.jsx(Z,{className:"rounded-2xl self-start sm:self-auto",variant:"secondary",onClick:()=>n("add",""),children:"Add permission"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:[o.jsxs("select",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:r,onChange:v=>s(v.target.value),children:[o.jsx("option",{value:"",children:"All modules"}),u.map((v,g)=>o.jsx("option",{value:v,children:v},`${v}-${g}`))]}),o.jsxs("select",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:i,onChange:v=>a(v.target.value),children:[o.jsx("option",{value:"",children:"All services"}),d.map((v,g)=>o.jsx("option",{value:v,children:v},`${v}-${g}`))]}),o.jsxs("select",{className:"col-span-2 w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none sm:col-span-1",value:l,onChange:v=>c(v.target.value),children:[o.jsx("option",{value:"",children:"All permissions"}),h.map((v,g)=>o.jsx("option",{value:v,children:v},`${v}-${g}`))]})]})]}),o.jsx(Jt,{className:"space-y-3",children:p.isLoading?o.jsx(Ee,{text:"Loading",className:"text-sm text-black/60 dark:text-white/65"}):x.length?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-3",children:x.map(v=>{const g=w(v),y=m[v];return o.jsxs(kt,{className:"p-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"grid grid-cols-1 gap-1 text-sm",children:[o.jsxs("div",{className:"flex flex-wrap items-baseline gap-1",children:[o.jsx("span",{className:"text-xs uppercase tracking-wide text-black/50 dark:text-white/60",children:"Module"}),o.jsx("span",{className:"font-semibold text-black/85 dark:text-white/85",children:g.module})]}),o.jsxs("div",{className:"flex flex-wrap items-baseline gap-1",children:[o.jsx("span",{className:"text-xs uppercase tracking-wide text-black/50 dark:text-white/60",children:"Service"}),o.jsx("span",{className:"font-semibold text-black/85 dark:text-white/85",children:g.service})]}),o.jsxs("div",{className:"flex flex-wrap items-baseline gap-1",children:[o.jsx("span",{className:"text-xs uppercase tracking-wide text-black/50 dark:text-white/60",children:"Permission"}),o.jsx("span",{className:"font-semibold text-black/85 dark:text-white/85",children:g.action})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ft,{onClick:()=>n("edit",v),title:"Edit permission","aria-label":"Edit permission",children:o.jsx(vl,{size:16})}),o.jsx(Ft,{variant:"ghost",onClick:()=>b({open:!0,type:"permission",payload:v,label:`Delete permission "${v}"?`}),title:"Delete permission","aria-label":"Delete permission",children:o.jsx(Aa,{size:16})})]})]}),y?o.jsxs("div",{className:"mt-2 flex items-baseline gap-1 text-sm min-w-0",children:[o.jsx("span",{className:"text-xs uppercase tracking-wide text-black/50 dark:text-white/60",children:"Description"}),o.jsx("span",{className:"text-black/60 dark:text-white/65 truncate",children:y})]}):null]},v)})}):o.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:e.trim()?"No matching permissions.":"No permissions available."})})]})}function e5({permissionSearch:e,setPermissionSearch:t,openPermissionModal:n,permissionModuleFilter:r,setPermissionModuleFilter:s,permissionServiceFilter:i,setPermissionServiceFilter:a,permissionActionFilter:l,setPermissionActionFilter:c,permissionModuleOptions:u,permissionFilterServiceOptions:d,permissionFilterActionOptions:h,permissionsQuery:p,filteredPermissionList:x,parsePermissionParts:w,mergedPermissionDescriptions:m,permissionTree:b,updateLocalPermissionDescription:v}){const{permissionModal:g,setPermissionModal:y,permissionModalError:k,savingPermission:_,openPermissionModal:j,updatePermissionModalField:E,savePermissionModal:C,deletePermissionFromModal:I,setPermissionModalError:P}=t5({mergedPermissionDescriptions:m,updateLocalPermissionDescription:v}),[z,O]=f.useState({open:!1,type:"",payload:null,label:""}),D=g.module?b.servicesByModule[g.module]||[]:b.allServices,B=g.module&&g.service?b.actionsByService[`${g.module}:${g.service}`]||[]:b.allActions;async function A(){if(!(!z.open||!z.payload))try{await I(z.payload)}finally{O({open:!1,type:"",payload:null,label:""})}}return o.jsxs(o.Fragment,{children:[o.jsx(ZM,{permissionSearch:e,setPermissionSearch:t,openPermissionModal:n||j,permissionModuleFilter:r,setPermissionModuleFilter:s,permissionServiceFilter:i,setPermissionServiceFilter:a,permissionActionFilter:l,setPermissionActionFilter:c,permissionModuleOptions:u,permissionFilterServiceOptions:d,permissionFilterActionOptions:h,permissionsQuery:p,filteredPermissionList:x,parsePermissionParts:w,mergedPermissionDescriptions:m,setConfirmDelete:O}),o.jsx(n5,{open:g.open,onClose:()=>{y({open:!1,mode:"add",value:"",original:"",module:"",service:"",action:"",description:"",originalDescription:""}),P("")},permissionModal:g,permissionModuleOptions:u,permissionServiceOptions:D,permissionActionOptions:B,updatePermissionModalField:E,permissionModalError:k,savePermissionModal:C,savingPermission:_}),o.jsx(jl,{open:z.open,message:z.label,onClose:()=>O({open:!1,type:"",payload:null,label:""}),onConfirm:A})]})}const fc={open:!1,mode:"add",value:"",original:"",module:"",service:"",action:"",description:"",originalDescription:""};function t5({mergedPermissionDescriptions:e,updateLocalPermissionDescription:t}){const n=Br(),[r,s]=f.useState(fc),[i,a]=f.useState(""),[l,c]=f.useState(!1);function u(x="add",w=""){const m=df(w),b=w&&e[w]||"";a(""),s({open:!0,mode:x,value:w,original:w,module:m.module,service:m.service,action:m.action,description:b,originalDescription:b})}function d(x,w){s(m=>{const b={...m,[x]:w};return{...b,value:iv(b)}}),a("")}async function h(){var w;const x=iv(r);if(!x){a("Select module, service, and permission.");return}c(!0);try{const m=((w=r.description)==null?void 0:w.trim())||"";if(r.mode==="add")await Jd(x,m),t(x,m);else if(x!==r.original)await Jd(x,m),await oy(r.original),t(r.original,""),t(x,m);else if(m!==r.originalDescription)await Jd(x,m),t(x,m);else{s({...fc});return}n.invalidateQueries({queryKey:["admin","permissions"]}),s({...fc})}catch{}finally{c(!1)}}async function p(x){const w=x||r.original||r.value;if(w){c(!0);try{await oy(w),t(w,""),n.invalidateQueries({queryKey:["admin","permissions"]}),s({...fc})}catch{}finally{c(!1)}}}return{permissionModal:r,setPermissionModal:s,permissionModalError:i,savingPermission:l,openPermissionModal:u,updatePermissionModalField:d,savePermissionModal:h,deletePermissionFromModal:p,setPermissionModalError:a}}function n5({open:e,onClose:t,permissionModal:n,permissionModuleOptions:r,permissionServiceOptions:s,permissionActionOptions:i,updatePermissionModalField:a,permissionModalError:l,savePermissionModal:c,savingPermission:u}){return o.jsx(Os,{open:e,onClose:t,title:n.mode==="edit"?"Edit permission":"Add permission",maxWidth:"520px",children:o.jsxs("div",{className:"space-y-3",children:[o.jsx(he,{label:"Permission",children:o.jsxs("div",{className:"grid grid-cols-[1fr_auto_1fr_auto_1fr] items-center gap-2",children:[o.jsxs("div",{children:[o.jsx("input",{list:"permission-module-options",className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:n.module,onChange:d=>a("module",d.target.value),placeholder:"module"}),o.jsx("datalist",{id:"permission-module-options",children:r.map((d,h)=>o.jsx("option",{value:d},`${d}-${h}`))})]}),o.jsx("span",{className:"text-sm text-black/40 dark:text-white/40",children:":"}),o.jsxs("div",{children:[o.jsx("input",{list:"permission-service-options",className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:n.service,onChange:d=>a("service",d.target.value),placeholder:"service"}),o.jsx("datalist",{id:"permission-service-options",children:s.map((d,h)=>o.jsx("option",{value:d},`${d}-${h}`))})]}),o.jsx("span",{className:"text-sm text-black/40 dark:text-white/40",children:":"}),o.jsxs("div",{children:[o.jsx("input",{list:"permission-action-options",className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:n.action,onChange:d=>a("action",d.target.value),placeholder:"permission"}),o.jsx("datalist",{id:"permission-action-options",children:i.map((d,h)=>o.jsx("option",{value:d},`${d}-${h}`))})]})]})}),o.jsx(he,{label:"Description",children:o.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:n.description,onChange:d=>a("description",d.target.value),placeholder:"Short description"})}),l?o.jsx("div",{className:"text-xs text-red-600 dark:text-red-300",children:l}):null,o.jsx("div",{className:"flex justify-end",children:o.jsx(Z,{className:"rounded-2xl",onClick:c,disabled:u,children:u?o.jsx(Ee,{text:"Saving"}):n.mode==="edit"?"Update Permission":"Add Permission"})})]})})}const Xd=20;function r5(){const{user:e}=js(),[t,n]=f.useState("users"),[r,s]=f.useState(""),[i,a]=f.useState(0),[l,c]=f.useState(""),[u,d]=f.useState(""),[h,p]=f.useState(""),[x,w]=f.useState(""),[m,b]=f.useState(""),[v,g]=f.useState(""),[y,k]=f.useState(""),[_,j]=f.useState(""),[E,C]=f.useState("");if(!Qp(e))return o.jsxs(Ot,{children:[o.jsx(Qt,{children:o.jsx(hn,{children:"Restricted"})}),o.jsx(Jt,{className:"text-sm text-black/60 dark:text-white/65",children:"You don't have access to the admin panel."})]});const I=In({queryKey:["admin","users",i],queryFn:()=>pI({limit:Xd,offset:i*Xd})}),P=In({queryKey:["admin","profiles"],queryFn:bI}),z=In({queryKey:["admin","permissions"],queryFn:jI}),O=In({queryKey:["admin","companies"],queryFn:EI}),D=In({queryKey:["admin","permission-sets"],queryFn:RI}),B=f.useMemo(()=>{var ie;const V=((ie=I.data)==null?void 0:ie.users)||I.data||[],Q=r.trim().toLowerCase();return V.filter(K=>{var ut,_t,rr,sr,Te;const ke=Array.isArray(K.profiles)?K.profiles.map(Ie=>(Ie==null?void 0:Ie.display_name)||(Ie==null?void 0:Ie.name)||Ie).filter(Boolean).join(" "):((ut=K.profiles)==null?void 0:ut.display_name)||((_t=K.profiles)==null?void 0:_t.name)||K.profile||K.profile_name||"",Ce=`${K.email||""} ${K.name||""} ${ke}`.toLowerCase();if(Q&&!Ce.includes(Q))return!1;const Re=((rr=K.company)==null?void 0:rr.code)||K.company_code||K.company_id||"";return!(m&&Re!==m||v&&!(Array.isArray(K.profiles)?K.profiles.map(We=>(We==null?void 0:We.name)||(We==null?void 0:We.display_name)||We).filter(Boolean):[((sr=K.profiles)==null?void 0:sr.name)||((Te=K.profiles)==null?void 0:Te.display_name)||K.profile||K.profile_name].filter(Boolean)).includes(v))})},[I.data,r,m,v]);f.useMemo(()=>{var Q;return(((Q=I.data)==null?void 0:Q.users)||I.data||[]).length===Xd},[I.data]),f.useEffect(()=>{j(""),C("")},[y]),f.useEffect(()=>{C("")},[_]);const A=f.useMemo(()=>{var Q;const V=((Q=P.data)==null?void 0:Q.profiles)??P.data;return Array.isArray(V)?V:[]},[P.data]),L=f.useMemo(()=>{var sr;const V=((sr=z.data)==null?void 0:sr.permissions)??z.data,Q=new Map,ie={},K=(Te,Ie,We)=>{if(!Te||!Ie||!We)return;Q.has(Te)||Q.set(Te,new Map);const dt=Q.get(Te);dt.has(Ie)||dt.set(Ie,new Set),dt.get(Ie).add(We)};Array.isArray(V)?V.forEach(Te=>{const Ie=typeof Te=="string"?Te:Te==null?void 0:Te.name,We=typeof Te=="string"?"":(Te==null?void 0:Te.description)||"";if(Ie&&We&&(ie[Ie]=We),!Ie)return;const dt=Ie.split(":");dt.length>=3&&K(dt[0],dt[1],dt[2])}):V&&typeof V=="object"&&Object.entries(V).forEach(([Te,Ie])=>{!Ie||typeof Ie!="object"||Object.entries(Ie).forEach(([We,dt])=>{Array.isArray(dt)&&dt.forEach(wr=>K(Te,We,wr))})});const ke=Array.from(Q.keys()).sort(),Ce={},Re={},ut=[],_t=new Set,rr=new Set;return ke.forEach(Te=>{const Ie=Array.from(Q.get(Te).keys()).sort();Ce[Te]=Ie,Ie.forEach(We=>{_t.add(We);const dt=Array.from(Q.get(Te).get(We)).sort();Re[`${Te}:${We}`]=dt,dt.forEach(wr=>{rr.add(wr),ut.push(`${Te}:${We}:${wr}`)})})}),{modules:ke,servicesByModule:Ce,actionsByService:Re,flat:ut,allServices:Array.from(_t).sort(),allActions:Array.from(rr).sort(),descriptions:ie}},[z.data]),q=f.useMemo(()=>L.flat,[L]),N=L.descriptions||{},[S,U]=f.useState({}),W=f.useMemo(()=>({...N||{},...S}),[N,S]),F=f.useCallback((V,Q)=>{if(!V)return;const ie=(Q==null?void 0:Q.trim())||"";U(K=>{const ke={...K};return ie?ke[V]=ie:delete ke[V],ke})},[]),ee=L.modules,J=y?L.servicesByModule[y]||[]:L.allServices,te=y&&_?L.actionsByService[`${y}:${_}`]||[]:L.allActions,ce=f.useMemo(()=>{var Q;const V=((Q=O.data)==null?void 0:Q.companies)??O.data;return Array.isArray(V)?V:[]},[O.data]),Oe=f.useMemo(()=>{var Q,ie;const V=((Q=D.data)==null?void 0:Q.permission_sets)??((ie=D.data)==null?void 0:ie.permissionSets)??D.data;return Array.isArray(V)?V.map(K=>typeof K=="string"?{name:K}:K):[]},[D.data]),it=f.useMemo(()=>{const V=u.trim().toLowerCase();return V?ce.filter(Q=>`${Q.name||""} ${Q.code||""} ${Q.country||""} ${Q.currency||""} ${Q.timezone||""}`.toLowerCase().includes(V)):ce},[ce,u]),Ve=f.useMemo(()=>{const V=l.trim().toLowerCase();return V?A.filter(Q=>`${Q.display_name||""} ${Q.name||""} ${Q.description||""}`.toLowerCase().includes(V)):A},[A,l]),at=f.useMemo(()=>{const V=h.trim().toLowerCase();return V?Oe.filter(Q=>`${Q.display_name||""} ${Q.name||""} ${Q.description||""}`.toLowerCase().includes(V)):Oe},[Oe,h]),gt=f.useMemo(()=>{const V=x.trim().toLowerCase();let Q=q;return(y||_||E)&&(Q=Q.filter(ie=>{const K=df(ie);return!(y&&K.module!==y||_&&K.service!==_||E&&K.action!==E)})),V?Q.filter(ie=>{const K=W[ie]||"";return`${ie} ${K}`.toLowerCase().includes(V)}):Q},[q,x,W,y,_,E]),Zt=f.useMemo(()=>ce.map(V=>({value:V.code||V.id||"",label:V.name||V.code||V.id||""})).filter(V=>V.value),[ce]),vt=f.useMemo(()=>A.map(V=>({value:V.name||V.display_name||"",label:V.display_name||V.name||""})).filter(V=>V.value),[A]),G=f.useMemo(()=>Oe.map(V=>V.name||V.id).filter(Boolean),[Oe]),ae=f.useMemo(()=>A.map(V=>V.name||V.id).filter(Boolean),[A]),re=f.useMemo(()=>{const V=new Map;return ce.forEach(Q=>{const ie=Q.code||Q.id;ie&&V.set(ie,Q.name||Q.code||ie)}),V},[ce]);return o.jsxs("div",{className:"flex h-full min-h-0 flex-col gap-4 overflow-hidden",children:[o.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-1 px-1",children:[o.jsx(Z,{variant:t==="users"?"default":"ghost",onClick:()=>n("users"),className:"rounded-2xl shrink-0",children:"Users"}),o.jsx(Z,{variant:t==="companies"?"default":"ghost",onClick:()=>n("companies"),className:"rounded-2xl shrink-0",children:"Companies"}),o.jsx(Z,{variant:t==="profiles"?"default":"ghost",onClick:()=>n("profiles"),className:"rounded-2xl shrink-0",children:"Profiles"}),o.jsx(Z,{variant:t==="permission-sets"?"default":"ghost",onClick:()=>n("permission-sets"),className:"rounded-2xl shrink-0",children:"Permission Sets"}),o.jsx(Z,{variant:t==="permissions"?"default":"ghost",onClick:()=>n("permissions"),className:"rounded-2xl shrink-0",children:"Permissions"})]}),o.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto px-2 py-1 space-y-4",children:[t==="users"?o.jsx(LM,{q:r,setQ:s,usersQuery:I,users:B,user:e,companyLookup:re,userCompanyFilter:m,setUserCompanyFilter:b,userProfileFilter:v,setUserProfileFilter:g,companyFilterOptions:Zt,profileFilterOptions:vt,companyList:ce,profileOptions:A,profileValues:ae,permissionSetList:Oe,permissionSetValues:G,permissionList:q,permissionsQuery:z,page:i}):null,t==="companies"?o.jsx(BM,{companySearch:u,setCompanySearch:d,companiesQuery:O,filteredCompanyList:it,companyLookup:re,companyList:ce}):null,t==="profiles"?o.jsx(KM,{profileSearch:l,setProfileSearch:c,filteredProfileOptions:Ve,permissionList:q,permissionSetValues:G,permissionSetList:Oe,permissionSetsQuery:D,permissionsQuery:z}):null,t==="permission-sets"?o.jsx(JM,{permissionSetSearch:h,setPermissionSetSearch:p,permissionSetsQuery:D,filteredPermissionSetList:at,permissionList:q,permissionsQuery:z}):null,t==="permissions"?o.jsx(e5,{permissionSearch:x,setPermissionSearch:w,permissionModuleFilter:y,setPermissionModuleFilter:k,permissionServiceFilter:_,setPermissionServiceFilter:j,permissionActionFilter:E,setPermissionActionFilter:C,permissionModuleOptions:ee,permissionFilterServiceOptions:J,permissionFilterActionOptions:te,permissionsQuery:z,filteredPermissionList:gt,parsePermissionParts:df,mergedPermissionDescriptions:W,permissionTree:L,updateLocalPermissionDescription:F}):null]})]})}function s5({notification:e}){var t;return e?o.jsxs("div",{className:"space-y-3 text-sm text-black/70 dark:text-white/70",children:[e.message?o.jsx("div",{children:e.message}):o.jsx("div",{children:"No additional details."}),(t=e.meta)!=null&&t.details?o.jsx("div",{className:"rounded-xl bg-black/5 dark:bg-white/10 p-3 text-xs whitespace-pre-wrap",children:e.meta.details}):null]}):null}function i5(){const{notifications:e,loading:t,clearAll:n,dismissNotification:r,markRead:s,formatTime:i}=hm(),[a,l]=f.useState(null),c=f.useMemo(()=>e,[e]);return o.jsxs("div",{className:"h-full min-h-0",children:[o.jsxs(Ot,{className:"h-full flex flex-col",children:[o.jsxs(Qt,{className:"flex flex-wrap items-center justify-between gap-2",children:[o.jsxs("div",{children:[o.jsx(hn,{children:"Notifications"}),o.jsx("div",{className:"text-xs text-black/50 dark:text-white/55",children:c.length?`${c.length} total`:"No alerts yet"})]}),o.jsx(Z,{variant:"secondary",className:"rounded-2xl",onClick:n,disabled:!c.length,children:"Clear all"})]}),o.jsx(Jt,{className:"flex-1 min-h-0 overflow-y-auto pt-2",children:t?o.jsx(Ee,{text:"Loading",className:"text-sm text-black/60 dark:text-white/65"}):c.length?o.jsx("div",{className:"space-y-2",children:c.map(u=>o.jsx(kt,{className:"p-3",children:o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"text-base font-semibold text-black/85 dark:text-white/85 truncate",children:u.title||"Notification"}),u.message?o.jsx("div",{className:"mt-1 text-sm text-black/60 dark:text-white/65 leading-5 mmg-line-clamp-2",children:u.message}):null,u.created_at?o.jsx("div",{className:"mt-1 text-xs text-black/45 dark:text-white/45",children:i(u.created_at)}):null]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ft,{variant:"ghost",className:"h-8 w-8",onClick:()=>{s(u.id),l(u)},"aria-label":"View notification",children:o.jsx(Dp,{size:14})}),o.jsx(Ft,{variant:"ghost",className:"h-8 w-8",onClick:()=>r(u.id),"aria-label":"Close notification",children:o.jsx(Lp,{size:14})})]})]})},u.id))}):o.jsx(kt,{className:"p-6 text-center text-sm text-black/60 dark:text-white/65",children:"You're all caught up."})})]}),o.jsx(Os,{open:!!a,onClose:()=>l(null),title:(a==null?void 0:a.title)||"Notification",maxWidth:"520px",children:o.jsx(s5,{notification:a})})]})}function a5({children:e}){const{user:t,authReady:n,session:r,pendingAccess:s,logout:i}=js(),a=La();return n?s?o.jsx(W0,{email:s.email,message:s.message,onSignOut:i}):r&&!t?o.jsx("div",{className:"min-h-screen grid place-items-center px-4",children:o.jsx("div",{className:"rounded-2xl bg-white/55 dark:bg-white/5 backdrop-blur-md shadow-soft ring-1 ring-black/5 dark:ring-white/10 px-5 py-4 text-sm",children:o.jsx(Ee,{text:"Finalizing sign-in"})})}):t?e:o.jsx(qh,{to:"/login",replace:!0,state:{from:a.pathname}}):o.jsx("div",{className:"min-h-screen grid place-items-center px-4",children:o.jsx("div",{className:"rounded-2xl bg-white/55 dark:bg-white/5 backdrop-blur-md shadow-soft ring-1 ring-black/5 dark:ring-white/10 px-5 py-4 text-sm",children:o.jsx(Ee,{text:"Loading"})})})}function o5(){const e="mmg-brand-theme",[t,n]=f.useState("none");f.useEffect(()=>{if(typeof window>"u")return;const i=window.localStorage.getItem(e)||"none";n(i),i==="none"?document.body.removeAttribute("data-brand-theme"):document.body.setAttribute("data-brand-theme",i)},[]);const r=s=>{n(s),typeof window<"u"&&window.localStorage.setItem(e,s),s==="none"?document.body.removeAttribute("data-brand-theme"):document.body.setAttribute("data-brand-theme",s)};return o.jsx("div",{className:"h-full min-h-0",children:o.jsxs(Ot,{className:"h-full",children:[o.jsx(Qt,{children:o.jsx(hn,{children:"Settings"})}),o.jsxs(Jt,{className:"text-sm text-black/60 dark:text-white/65 space-y-4",children:[o.jsxs(kt,{className:"flex items-center justify-between p-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold text-black/80 dark:text-white/85",children:"Theme"}),o.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"Toggle dark / light mode"})]}),o.jsx(V0,{})]}),o.jsxs(kt,{className:"space-y-3 p-4",children:[o.jsx("div",{className:"flex items-center justify-between gap-4",children:o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold text-black/80 dark:text-white/85",children:"Color theme"}),o.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"Choose a color palette that layers on top of light / dark mode."})]})}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 mt-2",children:[o.jsx("button",{type:"button",onClick:()=>r("none"),className:`flex items-center justify-between rounded-2xl border px-3 py-2 text-left text-sm transition-colors ${t==="none"?"border-black/60 dark:border-white/80 bg-black/5 dark:bg-white/10":"border-black/10 dark:border-white/15 hover:bg-black/3 dark:hover:bg-white/5"}`,children:o.jsx("span",{className:"font-medium",children:"System default"})}),o.jsxs("button",{type:"button",onClick:()=>r("blue"),className:`flex items-center justify-between rounded-2xl border px-3 py-2 text-left text-sm transition-colors ${t==="blue"?"border-blue-500/80 bg-blue-500/5":"border-black/10 dark:border-white/15 hover:bg-black/3 dark:hover:bg-white/5"}`,children:[o.jsx("span",{className:"font-medium",children:"Blue"}),o.jsx("span",{className:"flex h-5 w-5 rounded-full bg-[#007AFF]"})]}),o.jsxs("button",{type:"button",onClick:()=>r("green"),className:`flex items-center justify-between rounded-2xl border px-3 py-2 text-left text-sm transition-colors ${t==="green"?"border-emerald-500/80 bg-emerald-500/5":"border-black/10 dark:border-white/15 hover:bg-black/3 dark:hover:bg-white/5"}`,children:[o.jsx("span",{className:"font-medium",children:"Green"}),o.jsx("span",{className:"flex h-5 w-5 rounded-full bg-[#0F806B]"})]}),o.jsxs("button",{type:"button",onClick:()=>r("orange"),className:`flex items-center justify-between rounded-2xl border px-3 py-2 text-left text-sm transition-colors ${t==="orange"?"border-orange-500/80 bg-orange-500/5":"border-black/10 dark:border-white/15 hover:bg-black/3 dark:hover:bg-white/5"}`,children:[o.jsx("span",{className:"font-medium",children:"Orange"}),o.jsx("span",{className:"flex h-5 w-5 rounded-full bg-[#FF7900]"})]}),o.jsxs("button",{type:"button",onClick:()=>r("gold"),className:`flex items-center justify-between rounded-2xl border px-3 py-2 text-left text-sm transition-colors ${t==="gold"?"border-amber-500/80 bg-amber-500/5":"border-black/10 dark:border-white/15 hover:bg-black/3 dark:hover:bg-white/5"}`,children:[o.jsx("span",{className:"font-medium",children:"Gold"}),o.jsx("span",{className:"flex h-5 w-5 rounded-full bg-[#CA9E2C]"})]}),o.jsxs("button",{type:"button",onClick:()=>r("brand"),className:`flex items-center justify-between rounded-2xl border px-3 py-2 text-left text-sm transition-colors ${t==="brand"?"border-black/70 dark:border-white/80 bg-black/5 dark:bg-white/10":"border-black/10 dark:border-white/15 hover:bg-black/3 dark:hover:bg-white/5"}`,children:[o.jsx("span",{className:"font-medium",children:"Brand Theme"}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"h-4 w-4 rounded-full bg-[#000000]"}),o.jsx("span",{className:"h-4 w-4 rounded-full bg-[#007AFF]"}),o.jsx("span",{className:"h-4 w-4 rounded-full bg-[#CA9E2C]"})]})]})]})]})]})]})})}function l5(){return o.jsxs(Tj,{children:[o.jsx(vn,{path:"/",element:o.jsx(OC,{})}),o.jsx(vn,{path:"/login",element:o.jsx(vR,{})}),o.jsx(vn,{path:"/auth/callback",element:o.jsx(yR,{})}),o.jsxs(vn,{path:"/app",element:o.jsx(a5,{children:o.jsx(qI,{})}),children:[o.jsx(vn,{index:!0,element:o.jsx(qh,{to:"chat",replace:!0})}),o.jsx(vn,{path:"chat",element:o.jsx(GI,{})}),o.jsx(vn,{path:"mockup",element:o.jsx(vM,{})}),o.jsx(vn,{path:"proposals",element:o.jsx(OM,{})}),o.jsx(vn,{path:"notifications",element:o.jsx(i5,{})}),o.jsx(vn,{path:"admin",element:o.jsx(r5,{})}),o.jsx(vn,{path:"settings",element:o.jsx(o5,{})})]}),o.jsx(vn,{path:"*",element:o.jsx(qh,{to:"/",replace:!0})})]})}function c5(){if(!(typeof window>"u"))try{const e=window.AudioContext||window.webkitAudioContext;if(!e)return;const t=new e,n=t.createOscillator(),r=t.createGain();n.type="sine",n.frequency.value=740,r.gain.value=.15,n.connect(r),r.connect(t.destination),n.start(),r.gain.exponentialRampToValueAtTime(.001,t.currentTime+.25),n.stop(t.currentTime+.3),n.onended=()=>{t.close()}}catch{}}function u5(e){if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleString()}function d5({children:e}){const[t,n]=f.useState([]),[r,s]=f.useState(!0),[i,a]=f.useState([]),l=f.useRef(new Set),c=f.useRef(!1),u=f.useRef(new Map),d=f.useCallback(async()=>{s(!0);const y=await $I();n(Array.isArray(y)?y:[]),s(!1)},[]),h=f.useCallback(async()=>{await LI(),n([])},[]),p=f.useCallback(async y=>{y&&(await FI(y),n(k=>k.filter(_=>_.id!==y)))},[]),x=f.useCallback(async y=>{y&&(await UI(y),n(k=>k.map(_=>_.id===y?{..._,read:!0}:_)))},[]),w=f.useCallback(async y=>{const k=await DI(y);return n(_=>[k,..._]),k},[]),m=f.useCallback(y=>{a(_=>_.filter(j=>j.id!==y));const k=u.current.get(y);k&&(clearTimeout(k),u.current.delete(y))},[]),b=f.useCallback(y=>{if(!(y!=null&&y.id))return;a(_=>[..._,{id:y.id,notification:y}]);const k=setTimeout(()=>m(y.id),4200);u.current.set(y.id,k)},[m]);f.useEffect(()=>{d()},[d]),f.useEffect(()=>{if(!c.current){t.forEach(k=>l.current.add(k.id)),c.current=!0;return}const y=t.filter(k=>k.id&&!l.current.has(k.id));y.length&&(c5(),y.forEach(k=>{l.current.add(k.id),b(k)}))},[t,b]),f.useEffect(()=>{if(typeof window>"u")return;const y=k=>{k.key===zI&&d()};return window.addEventListener("storage",y),()=>window.removeEventListener("storage",y)},[d]),f.useEffect(()=>{if(!(typeof window>"u"))return window.mmgNotify=y=>w(y),window.mmgNotifications={add:y=>w(y),clear:h,dismiss:p,markRead:x},()=>{delete window.mmgNotify,delete window.mmgNotifications}},[w,h,p,x]);const v=f.useMemo(()=>t.filter(y=>!y.read).length,[t]),g=f.useMemo(()=>({notifications:t,loading:r,unreadCount:v,toasts:i,addNotification:w,clearAll:h,dismissNotification:p,markRead:x,dismissToast:m,formatTime:u5}),[t,r,v,i,w,h,p,x,m]);return o.jsx(xk.Provider,{value:g,children:e})}const h5="mmg-brand-theme";if(typeof window<"u"){const e=window.localStorage.getItem(h5);e&&e!=="none"?document.body.setAttribute("data-brand-theme",e):document.body.removeAttribute("data-brand-theme")}const f5=new dE({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1}}});Zd.createRoot(document.getElementById("root")).render(o.jsx(Dt.StrictMode,{children:o.jsx(Lj,{attribute:"class",defaultTheme:"light",enableSystem:!1,children:o.jsx(hE,{client:f5,children:o.jsx(mR,{children:o.jsx(d5,{children:o.jsx(Ij,{children:o.jsx(l5,{})})})})})})}));
