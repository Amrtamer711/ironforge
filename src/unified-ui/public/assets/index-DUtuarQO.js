var hP=Object.defineProperty;var G0=t=>{throw TypeError(t)};var fP=(t,e,n)=>e in t?hP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var $e=(t,e,n)=>fP(t,typeof e!="symbol"?e+"":e,n),rm=(t,e,n)=>e.has(t)||G0("Cannot "+n);var O=(t,e,n)=>(rm(t,e,"read from private field"),n?n.call(t):e.get(t)),we=(t,e,n)=>e.has(t)?G0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ue=(t,e,n,s)=>(rm(t,e,"write to private field"),s?s.call(t,n):e.set(t,n),n),Fe=(t,e,n)=>(rm(t,e,"access private method"),n);var Ld=(t,e,n,s)=>({set _(r){ue(t,e,r,n)},get _(){return O(t,e,s)}});function pP(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in t)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function BS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var US={exports:{}},up={},HS={exports:{}},Xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rd=Symbol.for("react.element"),mP=Symbol.for("react.portal"),gP=Symbol.for("react.fragment"),xP=Symbol.for("react.strict_mode"),yP=Symbol.for("react.profiler"),vP=Symbol.for("react.provider"),bP=Symbol.for("react.context"),wP=Symbol.for("react.forward_ref"),kP=Symbol.for("react.suspense"),_P=Symbol.for("react.memo"),SP=Symbol.for("react.lazy"),Y0=Symbol.iterator;function jP(t){return t===null||typeof t!="object"?null:(t=Y0&&t[Y0]||t["@@iterator"],typeof t=="function"?t:null)}var WS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},VS=Object.assign,qS={};function Gl(t,e,n){this.props=t,this.context=e,this.refs=qS,this.updater=n||WS}Gl.prototype.isReactComponent={};Gl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Gl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function KS(){}KS.prototype=Gl.prototype;function Ey(t,e,n){this.props=t,this.context=e,this.refs=qS,this.updater=n||WS}var Ty=Ey.prototype=new KS;Ty.constructor=Ey;VS(Ty,Gl.prototype);Ty.isPureReactComponent=!0;var Q0=Array.isArray,GS=Object.prototype.hasOwnProperty,Py={current:null},YS={key:!0,ref:!0,__self:!0,__source:!0};function QS(t,e,n){var s,r={},i=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)GS.call(e,s)&&!YS.hasOwnProperty(s)&&(r[s]=e[s]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(s in a=t.defaultProps,a)r[s]===void 0&&(r[s]=a[s]);return{$$typeof:rd,type:t,key:i,ref:o,props:r,_owner:Py.current}}function CP(t,e){return{$$typeof:rd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ry(t){return typeof t=="object"&&t!==null&&t.$$typeof===rd}function NP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var X0=/\/+/g;function im(t,e){return typeof t=="object"&&t!==null&&t.key!=null?NP(""+t.key):e.toString(36)}function Fh(t,e,n,s,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case rd:case mP:o=!0}}if(o)return o=t,r=r(o),t=s===""?"."+im(o,0):s,Q0(r)?(n="",t!=null&&(n=t.replace(X0,"$&/")+"/"),Fh(r,e,n,"",function(u){return u})):r!=null&&(Ry(r)&&(r=CP(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(X0,"$&/")+"/")+t)),e.push(r)),1;if(o=0,s=s===""?".":s+":",Q0(t))for(var a=0;a<t.length;a++){i=t[a];var l=s+im(i,a);o+=Fh(i,e,n,l,r)}else if(l=jP(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=s+im(i,a++),o+=Fh(i,e,n,l,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function $d(t,e,n){if(t==null)return t;var s=[],r=0;return Fh(t,s,"","",function(i){return e.call(n,i,r++)}),s}function EP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Fn={current:null},zh={transition:null},TP={ReactCurrentDispatcher:Fn,ReactCurrentBatchConfig:zh,ReactCurrentOwner:Py};function XS(){throw Error("act(...) is not supported in production builds of React.")}Xe.Children={map:$d,forEach:function(t,e,n){$d(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $d(t,function(){e++}),e},toArray:function(t){return $d(t,function(e){return e})||[]},only:function(t){if(!Ry(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Xe.Component=Gl;Xe.Fragment=gP;Xe.Profiler=yP;Xe.PureComponent=Ey;Xe.StrictMode=xP;Xe.Suspense=kP;Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TP;Xe.act=XS;Xe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=VS({},t.props),r=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Py.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)GS.call(e,l)&&!YS.hasOwnProperty(l)&&(s[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];s.children=a}return{$$typeof:rd,type:t.type,key:r,ref:i,props:s,_owner:o}};Xe.createContext=function(t){return t={$$typeof:bP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:vP,_context:t},t.Consumer=t};Xe.createElement=QS;Xe.createFactory=function(t){var e=QS.bind(null,t);return e.type=t,e};Xe.createRef=function(){return{current:null}};Xe.forwardRef=function(t){return{$$typeof:wP,render:t}};Xe.isValidElement=Ry;Xe.lazy=function(t){return{$$typeof:SP,_payload:{_status:-1,_result:t},_init:EP}};Xe.memo=function(t,e){return{$$typeof:_P,type:t,compare:e===void 0?null:e}};Xe.startTransition=function(t){var e=zh.transition;zh.transition={};try{t()}finally{zh.transition=e}};Xe.unstable_act=XS;Xe.useCallback=function(t,e){return Fn.current.useCallback(t,e)};Xe.useContext=function(t){return Fn.current.useContext(t)};Xe.useDebugValue=function(){};Xe.useDeferredValue=function(t){return Fn.current.useDeferredValue(t)};Xe.useEffect=function(t,e){return Fn.current.useEffect(t,e)};Xe.useId=function(){return Fn.current.useId()};Xe.useImperativeHandle=function(t,e,n){return Fn.current.useImperativeHandle(t,e,n)};Xe.useInsertionEffect=function(t,e){return Fn.current.useInsertionEffect(t,e)};Xe.useLayoutEffect=function(t,e){return Fn.current.useLayoutEffect(t,e)};Xe.useMemo=function(t,e){return Fn.current.useMemo(t,e)};Xe.useReducer=function(t,e,n){return Fn.current.useReducer(t,e,n)};Xe.useRef=function(t){return Fn.current.useRef(t)};Xe.useState=function(t){return Fn.current.useState(t)};Xe.useSyncExternalStore=function(t,e,n){return Fn.current.useSyncExternalStore(t,e,n)};Xe.useTransition=function(){return Fn.current.useTransition()};Xe.version="18.3.1";HS.exports=Xe;var b=HS.exports;const ge=BS(b),dp=pP({__proto__:null,default:ge},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PP=b,RP=Symbol.for("react.element"),AP=Symbol.for("react.fragment"),OP=Object.prototype.hasOwnProperty,MP=PP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,IP={key:!0,ref:!0,__self:!0,__source:!0};function JS(t,e,n){var s,r={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)OP.call(e,s)&&!IP.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:RP,type:t,key:i,ref:o,props:r,_owner:MP.current}}up.Fragment=AP;up.jsx=JS;up.jsxs=JS;US.exports=up;var c=US.exports,Cg={},ZS={exports:{}},Ss={},e1={exports:{}},t1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(E,T){var z=E.length;E.push(T);e:for(;0<z;){var q=z-1>>>1,W=E[q];if(0<r(W,T))E[q]=T,E[z]=W,z=q;else break e}}function n(E){return E.length===0?null:E[0]}function s(E){if(E.length===0)return null;var T=E[0],z=E.pop();if(z!==T){E[0]=z;e:for(var q=0,W=E.length,he=W>>>1;q<he;){var ee=2*(q+1)-1,B=E[ee],Q=ee+1,de=E[Q];if(0>r(B,z))Q<W&&0>r(de,B)?(E[q]=de,E[Q]=z,q=Q):(E[q]=B,E[ee]=z,q=ee);else if(Q<W&&0>r(de,z))E[q]=de,E[Q]=z,q=Q;else break e}}return T}function r(E,T){var z=E.sortIndex-T.sortIndex;return z!==0?z:E.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,f=3,p=!1,w=!1,x=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(E){for(var T=n(u);T!==null;){if(T.callback===null)s(u);else if(T.startTime<=E)s(u),T.sortIndex=T.expirationTime,e(l,T);else break;T=n(u)}}function k(E){if(x=!1,v(E),!w)if(n(l)!==null)w=!0,$(S);else{var T=n(u);T!==null&&U(k,T.startTime-E)}}function S(E,T){w=!1,x&&(x=!1,g(j),j=-1),p=!0;var z=f;try{for(v(T),h=n(l);h!==null&&(!(h.expirationTime>T)||E&&!D());){var q=h.callback;if(typeof q=="function"){h.callback=null,f=h.priorityLevel;var W=q(h.expirationTime<=T);T=t.unstable_now(),typeof W=="function"?h.callback=W:h===n(l)&&s(l),v(T)}else s(l);h=n(l)}if(h!==null)var he=!0;else{var ee=n(u);ee!==null&&U(k,ee.startTime-T),he=!1}return he}finally{h=null,f=z,p=!1}}var C=!1,_=null,j=-1,N=5,P=-1;function D(){return!(t.unstable_now()-P<N)}function M(){if(_!==null){var E=t.unstable_now();P=E;var T=!0;try{T=_(!0,E)}finally{T?I():(C=!1,_=null)}}else C=!1}var I;if(typeof m=="function")I=function(){m(M)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,R=L.port2;L.port1.onmessage=M,I=function(){R.postMessage(null)}}else I=function(){y(M,0)};function $(E){_=E,C||(C=!0,I())}function U(E,T){j=y(function(){E(t.unstable_now())},T)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(E){E.callback=null},t.unstable_continueExecution=function(){w||p||(w=!0,$(S))},t.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<E?Math.floor(1e3/E):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(E){switch(f){case 1:case 2:case 3:var T=3;break;default:T=f}var z=f;f=T;try{return E()}finally{f=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(E,T){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var z=f;f=E;try{return T()}finally{f=z}},t.unstable_scheduleCallback=function(E,T,z){var q=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?q+z:q):z=q,E){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=z+W,E={id:d++,callback:T,priorityLevel:E,startTime:z,expirationTime:W,sortIndex:-1},z>q?(E.sortIndex=z,e(u,E),n(l)===null&&E===n(u)&&(x?(g(j),j=-1):x=!0,U(k,z-q))):(E.sortIndex=W,e(l,E),w||p||(w=!0,$(S))),E},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(E){var T=f;return function(){var z=f;f=T;try{return E.apply(this,arguments)}finally{f=z}}}})(t1);e1.exports=t1;var DP=e1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LP=b,_s=DP;function se(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n1=new Set,ou={};function pa(t,e){Fl(t,e),Fl(t+"Capture",e)}function Fl(t,e){for(ou[t]=e,t=0;t<e.length;t++)n1.add(e[t])}var ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ng=Object.prototype.hasOwnProperty,$P=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,J0={},Z0={};function FP(t){return Ng.call(Z0,t)?!0:Ng.call(J0,t)?!1:$P.test(t)?Z0[t]=!0:(J0[t]=!0,!1)}function zP(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function BP(t,e,n,s){if(e===null||typeof e>"u"||zP(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function zn(t,e,n,s,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var wn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){wn[t]=new zn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];wn[e]=new zn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){wn[t]=new zn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){wn[t]=new zn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){wn[t]=new zn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){wn[t]=new zn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){wn[t]=new zn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){wn[t]=new zn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){wn[t]=new zn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ay=/[\-:]([a-z])/g;function Oy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ay,Oy);wn[e]=new zn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ay,Oy);wn[e]=new zn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ay,Oy);wn[e]=new zn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){wn[t]=new zn(t,1,!1,t.toLowerCase(),null,!1,!1)});wn.xlinkHref=new zn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){wn[t]=new zn(t,1,!1,t.toLowerCase(),null,!0,!0)});function My(t,e,n,s){var r=wn.hasOwnProperty(e)?wn[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(BP(e,n,r,s)&&(n=null),s||r===null?FP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,s=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var ci=LP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fd=Symbol.for("react.element"),Ka=Symbol.for("react.portal"),Ga=Symbol.for("react.fragment"),Iy=Symbol.for("react.strict_mode"),Eg=Symbol.for("react.profiler"),s1=Symbol.for("react.provider"),r1=Symbol.for("react.context"),Dy=Symbol.for("react.forward_ref"),Tg=Symbol.for("react.suspense"),Pg=Symbol.for("react.suspense_list"),Ly=Symbol.for("react.memo"),yi=Symbol.for("react.lazy"),i1=Symbol.for("react.offscreen"),eb=Symbol.iterator;function fc(t){return t===null||typeof t!="object"?null:(t=eb&&t[eb]||t["@@iterator"],typeof t=="function"?t:null)}var Wt=Object.assign,om;function Rc(t){if(om===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);om=e&&e[1]||""}return`
`+om+t}var am=!1;function lm(t,e){if(!t||am)return"";am=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var s=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){s=u}t.call(e.prototype)}else{try{throw Error()}catch(u){s=u}t()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),i=s.stack.split(`
`),o=r.length-1,a=i.length-1;1<=o&&0<=a&&r[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==i[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{am=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Rc(t):""}function UP(t){switch(t.tag){case 5:return Rc(t.type);case 16:return Rc("Lazy");case 13:return Rc("Suspense");case 19:return Rc("SuspenseList");case 0:case 2:case 15:return t=lm(t.type,!1),t;case 11:return t=lm(t.type.render,!1),t;case 1:return t=lm(t.type,!0),t;default:return""}}function Rg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ga:return"Fragment";case Ka:return"Portal";case Eg:return"Profiler";case Iy:return"StrictMode";case Tg:return"Suspense";case Pg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case r1:return(t.displayName||"Context")+".Consumer";case s1:return(t._context.displayName||"Context")+".Provider";case Dy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ly:return e=t.displayName||null,e!==null?e:Rg(t.type)||"Memo";case yi:e=t._payload,t=t._init;try{return Rg(t(e))}catch{}}return null}function HP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rg(e);case 8:return e===Iy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function eo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function o1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function WP(t){var e=o1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function zd(t){t._valueTracker||(t._valueTracker=WP(t))}function a1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=o1(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function ff(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ag(t,e){var n=e.checked;return Wt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function tb(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=eo(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function l1(t,e){e=e.checked,e!=null&&My(t,"checked",e,!1)}function Og(t,e){l1(t,e);var n=eo(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Mg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Mg(t,e.type,eo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function nb(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Mg(t,e,n){(e!=="number"||ff(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ac=Array.isArray;function al(t,e,n,s){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&s&&(t[n].defaultSelected=!0)}else{for(n=""+eo(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Ig(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(se(91));return Wt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function sb(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(se(92));if(Ac(n)){if(1<n.length)throw Error(se(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:eo(n)}}function c1(t,e){var n=eo(e.value),s=eo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function rb(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function u1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Dg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?u1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Bd,d1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Bd=Bd||document.createElement("div"),Bd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Bd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function au(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Wc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},VP=["Webkit","ms","Moz","O"];Object.keys(Wc).forEach(function(t){VP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Wc[e]=Wc[t]})});function h1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Wc.hasOwnProperty(t)&&Wc[t]?(""+e).trim():e+"px"}function f1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=h1(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,r):t[n]=r}}var qP=Wt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lg(t,e){if(e){if(qP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(se(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(se(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(se(61))}if(e.style!=null&&typeof e.style!="object")throw Error(se(62))}}function $g(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fg=null;function $y(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zg=null,ll=null,cl=null;function ib(t){if(t=ad(t)){if(typeof zg!="function")throw Error(se(280));var e=t.stateNode;e&&(e=gp(e),zg(t.stateNode,t.type,e))}}function p1(t){ll?cl?cl.push(t):cl=[t]:ll=t}function m1(){if(ll){var t=ll,e=cl;if(cl=ll=null,ib(t),e)for(t=0;t<e.length;t++)ib(e[t])}}function g1(t,e){return t(e)}function x1(){}var cm=!1;function y1(t,e,n){if(cm)return t(e,n);cm=!0;try{return g1(t,e,n)}finally{cm=!1,(ll!==null||cl!==null)&&(x1(),m1())}}function lu(t,e){var n=t.stateNode;if(n===null)return null;var s=gp(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(se(231,e,typeof n));return n}var Bg=!1;if(ti)try{var pc={};Object.defineProperty(pc,"passive",{get:function(){Bg=!0}}),window.addEventListener("test",pc,pc),window.removeEventListener("test",pc,pc)}catch{Bg=!1}function KP(t,e,n,s,r,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Vc=!1,pf=null,mf=!1,Ug=null,GP={onError:function(t){Vc=!0,pf=t}};function YP(t,e,n,s,r,i,o,a,l){Vc=!1,pf=null,KP.apply(GP,arguments)}function QP(t,e,n,s,r,i,o,a,l){if(YP.apply(this,arguments),Vc){if(Vc){var u=pf;Vc=!1,pf=null}else throw Error(se(198));mf||(mf=!0,Ug=u)}}function ma(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function v1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ob(t){if(ma(t)!==t)throw Error(se(188))}function XP(t){var e=t.alternate;if(!e){if(e=ma(t),e===null)throw Error(se(188));return e!==t?null:t}for(var n=t,s=e;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return ob(r),t;if(i===s)return ob(r),e;i=i.sibling}throw Error(se(188))}if(n.return!==s.return)n=r,s=i;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,s=i;break}if(a===s){o=!0,s=r,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,s=r;break}if(a===s){o=!0,s=i,n=r;break}a=a.sibling}if(!o)throw Error(se(189))}}if(n.alternate!==s)throw Error(se(190))}if(n.tag!==3)throw Error(se(188));return n.stateNode.current===n?t:e}function b1(t){return t=XP(t),t!==null?w1(t):null}function w1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=w1(t);if(e!==null)return e;t=t.sibling}return null}var k1=_s.unstable_scheduleCallback,ab=_s.unstable_cancelCallback,JP=_s.unstable_shouldYield,ZP=_s.unstable_requestPaint,Qt=_s.unstable_now,eR=_s.unstable_getCurrentPriorityLevel,Fy=_s.unstable_ImmediatePriority,_1=_s.unstable_UserBlockingPriority,gf=_s.unstable_NormalPriority,tR=_s.unstable_LowPriority,S1=_s.unstable_IdlePriority,hp=null,Nr=null;function nR(t){if(Nr&&typeof Nr.onCommitFiberRoot=="function")try{Nr.onCommitFiberRoot(hp,t,void 0,(t.current.flags&128)===128)}catch{}}var er=Math.clz32?Math.clz32:iR,sR=Math.log,rR=Math.LN2;function iR(t){return t>>>=0,t===0?32:31-(sR(t)/rR|0)|0}var Ud=64,Hd=4194304;function Oc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function xf(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,r=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?s=Oc(a):(i&=o,i!==0&&(s=Oc(i)))}else o=n&~r,o!==0?s=Oc(o):i!==0&&(s=Oc(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-er(e),r=1<<n,s|=t[n],e&=~r;return s}function oR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function aR(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-er(i),a=1<<o,l=r[o];l===-1?(!(a&n)||a&s)&&(r[o]=oR(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Hg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function j1(){var t=Ud;return Ud<<=1,!(Ud&4194240)&&(Ud=64),t}function um(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function id(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-er(e),t[e]=n}function lR(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-er(n),i=1<<r;e[r]=0,s[r]=-1,t[r]=-1,n&=~i}}function zy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-er(n),r=1<<s;r&e|t[s]&e&&(t[s]|=e),n&=~r}}var mt=0;function C1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var N1,By,E1,T1,P1,Wg=!1,Wd=[],Ui=null,Hi=null,Wi=null,cu=new Map,uu=new Map,wi=[],cR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lb(t,e){switch(t){case"focusin":case"focusout":Ui=null;break;case"dragenter":case"dragleave":Hi=null;break;case"mouseover":case"mouseout":Wi=null;break;case"pointerover":case"pointerout":cu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":uu.delete(e.pointerId)}}function mc(t,e,n,s,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=ad(e),e!==null&&By(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function uR(t,e,n,s,r){switch(e){case"focusin":return Ui=mc(Ui,t,e,n,s,r),!0;case"dragenter":return Hi=mc(Hi,t,e,n,s,r),!0;case"mouseover":return Wi=mc(Wi,t,e,n,s,r),!0;case"pointerover":var i=r.pointerId;return cu.set(i,mc(cu.get(i)||null,t,e,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,uu.set(i,mc(uu.get(i)||null,t,e,n,s,r)),!0}return!1}function R1(t){var e=Mo(t.target);if(e!==null){var n=ma(e);if(n!==null){if(e=n.tag,e===13){if(e=v1(n),e!==null){t.blockedOn=e,P1(t.priority,function(){E1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Vg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);Fg=s,n.target.dispatchEvent(s),Fg=null}else return e=ad(n),e!==null&&By(e),t.blockedOn=n,!1;e.shift()}return!0}function cb(t,e,n){Bh(t)&&n.delete(e)}function dR(){Wg=!1,Ui!==null&&Bh(Ui)&&(Ui=null),Hi!==null&&Bh(Hi)&&(Hi=null),Wi!==null&&Bh(Wi)&&(Wi=null),cu.forEach(cb),uu.forEach(cb)}function gc(t,e){t.blockedOn===e&&(t.blockedOn=null,Wg||(Wg=!0,_s.unstable_scheduleCallback(_s.unstable_NormalPriority,dR)))}function du(t){function e(r){return gc(r,t)}if(0<Wd.length){gc(Wd[0],t);for(var n=1;n<Wd.length;n++){var s=Wd[n];s.blockedOn===t&&(s.blockedOn=null)}}for(Ui!==null&&gc(Ui,t),Hi!==null&&gc(Hi,t),Wi!==null&&gc(Wi,t),cu.forEach(e),uu.forEach(e),n=0;n<wi.length;n++)s=wi[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<wi.length&&(n=wi[0],n.blockedOn===null);)R1(n),n.blockedOn===null&&wi.shift()}var ul=ci.ReactCurrentBatchConfig,yf=!0;function hR(t,e,n,s){var r=mt,i=ul.transition;ul.transition=null;try{mt=1,Uy(t,e,n,s)}finally{mt=r,ul.transition=i}}function fR(t,e,n,s){var r=mt,i=ul.transition;ul.transition=null;try{mt=4,Uy(t,e,n,s)}finally{mt=r,ul.transition=i}}function Uy(t,e,n,s){if(yf){var r=Vg(t,e,n,s);if(r===null)bm(t,e,s,vf,n),lb(t,s);else if(uR(r,t,e,n,s))s.stopPropagation();else if(lb(t,s),e&4&&-1<cR.indexOf(t)){for(;r!==null;){var i=ad(r);if(i!==null&&N1(i),i=Vg(t,e,n,s),i===null&&bm(t,e,s,vf,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else bm(t,e,s,null,n)}}var vf=null;function Vg(t,e,n,s){if(vf=null,t=$y(s),t=Mo(t),t!==null)if(e=ma(t),e===null)t=null;else if(n=e.tag,n===13){if(t=v1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return vf=t,null}function A1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eR()){case Fy:return 1;case _1:return 4;case gf:case tR:return 16;case S1:return 536870912;default:return 16}default:return 16}}var Ii=null,Hy=null,Uh=null;function O1(){if(Uh)return Uh;var t,e=Hy,n=e.length,s,r="value"in Ii?Ii.value:Ii.textContent,i=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===r[i-s];s++);return Uh=r.slice(t,1<s?1-s:void 0)}function Hh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Vd(){return!0}function ub(){return!1}function js(t){function e(n,s,r,i,o){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Vd:ub,this.isPropagationStopped=ub,this}return Wt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Vd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Vd)},persist:function(){},isPersistent:Vd}),e}var Yl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wy=js(Yl),od=Wt({},Yl,{view:0,detail:0}),pR=js(od),dm,hm,xc,fp=Wt({},od,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xc&&(xc&&t.type==="mousemove"?(dm=t.screenX-xc.screenX,hm=t.screenY-xc.screenY):hm=dm=0,xc=t),dm)},movementY:function(t){return"movementY"in t?t.movementY:hm}}),db=js(fp),mR=Wt({},fp,{dataTransfer:0}),gR=js(mR),xR=Wt({},od,{relatedTarget:0}),fm=js(xR),yR=Wt({},Yl,{animationName:0,elapsedTime:0,pseudoElement:0}),vR=js(yR),bR=Wt({},Yl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wR=js(bR),kR=Wt({},Yl,{data:0}),hb=js(kR),_R={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},SR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=jR[t])?!!e[t]:!1}function Vy(){return CR}var NR=Wt({},od,{key:function(t){if(t.key){var e=_R[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Hh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?SR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vy,charCode:function(t){return t.type==="keypress"?Hh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Hh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ER=js(NR),TR=Wt({},fp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fb=js(TR),PR=Wt({},od,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vy}),RR=js(PR),AR=Wt({},Yl,{propertyName:0,elapsedTime:0,pseudoElement:0}),OR=js(AR),MR=Wt({},fp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),IR=js(MR),DR=[9,13,27,32],qy=ti&&"CompositionEvent"in window,qc=null;ti&&"documentMode"in document&&(qc=document.documentMode);var LR=ti&&"TextEvent"in window&&!qc,M1=ti&&(!qy||qc&&8<qc&&11>=qc),pb=" ",mb=!1;function I1(t,e){switch(t){case"keyup":return DR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function D1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ya=!1;function $R(t,e){switch(t){case"compositionend":return D1(e);case"keypress":return e.which!==32?null:(mb=!0,pb);case"textInput":return t=e.data,t===pb&&mb?null:t;default:return null}}function FR(t,e){if(Ya)return t==="compositionend"||!qy&&I1(t,e)?(t=O1(),Uh=Hy=Ii=null,Ya=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return M1&&e.locale!=="ko"?null:e.data;default:return null}}var zR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!zR[t.type]:e==="textarea"}function L1(t,e,n,s){p1(s),e=bf(e,"onChange"),0<e.length&&(n=new Wy("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var Kc=null,hu=null;function BR(t){G1(t,0)}function pp(t){var e=Ja(t);if(a1(e))return t}function UR(t,e){if(t==="change")return e}var $1=!1;if(ti){var pm;if(ti){var mm="oninput"in document;if(!mm){var xb=document.createElement("div");xb.setAttribute("oninput","return;"),mm=typeof xb.oninput=="function"}pm=mm}else pm=!1;$1=pm&&(!document.documentMode||9<document.documentMode)}function yb(){Kc&&(Kc.detachEvent("onpropertychange",F1),hu=Kc=null)}function F1(t){if(t.propertyName==="value"&&pp(hu)){var e=[];L1(e,hu,t,$y(t)),y1(BR,e)}}function HR(t,e,n){t==="focusin"?(yb(),Kc=e,hu=n,Kc.attachEvent("onpropertychange",F1)):t==="focusout"&&yb()}function WR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pp(hu)}function VR(t,e){if(t==="click")return pp(e)}function qR(t,e){if(t==="input"||t==="change")return pp(e)}function KR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sr=typeof Object.is=="function"?Object.is:KR;function fu(t,e){if(sr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!Ng.call(e,r)||!sr(t[r],e[r]))return!1}return!0}function vb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function bb(t,e){var n=vb(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vb(n)}}function z1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?z1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function B1(){for(var t=window,e=ff();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ff(t.document)}return e}function Ky(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function GR(t){var e=B1(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&z1(n.ownerDocument.documentElement,n)){if(s!==null&&Ky(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!t.extend&&i>s&&(r=s,s=i,i=r),r=bb(n,i);var o=bb(n,s);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var YR=ti&&"documentMode"in document&&11>=document.documentMode,Qa=null,qg=null,Gc=null,Kg=!1;function wb(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kg||Qa==null||Qa!==ff(s)||(s=Qa,"selectionStart"in s&&Ky(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Gc&&fu(Gc,s)||(Gc=s,s=bf(qg,"onSelect"),0<s.length&&(e=new Wy("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=Qa)))}function qd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Xa={animationend:qd("Animation","AnimationEnd"),animationiteration:qd("Animation","AnimationIteration"),animationstart:qd("Animation","AnimationStart"),transitionend:qd("Transition","TransitionEnd")},gm={},U1={};ti&&(U1=document.createElement("div").style,"AnimationEvent"in window||(delete Xa.animationend.animation,delete Xa.animationiteration.animation,delete Xa.animationstart.animation),"TransitionEvent"in window||delete Xa.transitionend.transition);function mp(t){if(gm[t])return gm[t];if(!Xa[t])return t;var e=Xa[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in U1)return gm[t]=e[n];return t}var H1=mp("animationend"),W1=mp("animationiteration"),V1=mp("animationstart"),q1=mp("transitionend"),K1=new Map,kb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function lo(t,e){K1.set(t,e),pa(e,[t])}for(var xm=0;xm<kb.length;xm++){var ym=kb[xm],QR=ym.toLowerCase(),XR=ym[0].toUpperCase()+ym.slice(1);lo(QR,"on"+XR)}lo(H1,"onAnimationEnd");lo(W1,"onAnimationIteration");lo(V1,"onAnimationStart");lo("dblclick","onDoubleClick");lo("focusin","onFocus");lo("focusout","onBlur");lo(q1,"onTransitionEnd");Fl("onMouseEnter",["mouseout","mouseover"]);Fl("onMouseLeave",["mouseout","mouseover"]);Fl("onPointerEnter",["pointerout","pointerover"]);Fl("onPointerLeave",["pointerout","pointerover"]);pa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));pa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));pa("onBeforeInput",["compositionend","keypress","textInput","paste"]);pa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));pa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));pa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mc));function _b(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,QP(s,e,void 0,t),t.currentTarget=null}function G1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&r.isPropagationStopped())break e;_b(r,a,u),i=l}else for(o=0;o<s.length;o++){if(a=s[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&r.isPropagationStopped())break e;_b(r,a,u),i=l}}}if(mf)throw t=Ug,mf=!1,Ug=null,t}function Ct(t,e){var n=e[Jg];n===void 0&&(n=e[Jg]=new Set);var s=t+"__bubble";n.has(s)||(Y1(e,t,2,!1),n.add(s))}function vm(t,e,n){var s=0;e&&(s|=4),Y1(n,t,s,e)}var Kd="_reactListening"+Math.random().toString(36).slice(2);function pu(t){if(!t[Kd]){t[Kd]=!0,n1.forEach(function(n){n!=="selectionchange"&&(JR.has(n)||vm(n,!1,t),vm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Kd]||(e[Kd]=!0,vm("selectionchange",!1,e))}}function Y1(t,e,n,s){switch(A1(e)){case 1:var r=hR;break;case 4:r=fR;break;default:r=Uy}n=r.bind(null,e,n,t),r=void 0,!Bg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function bm(t,e,n,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var a=s.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Mo(a),o===null)return;if(l=o.tag,l===5||l===6){s=i=o;continue e}a=a.parentNode}}s=s.return}y1(function(){var u=i,d=$y(n),h=[];e:{var f=K1.get(t);if(f!==void 0){var p=Wy,w=t;switch(t){case"keypress":if(Hh(n)===0)break e;case"keydown":case"keyup":p=ER;break;case"focusin":w="focus",p=fm;break;case"focusout":w="blur",p=fm;break;case"beforeblur":case"afterblur":p=fm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=db;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=gR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=RR;break;case H1:case W1:case V1:p=vR;break;case q1:p=OR;break;case"scroll":p=pR;break;case"wheel":p=IR;break;case"copy":case"cut":case"paste":p=wR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=fb}var x=(e&4)!==0,y=!x&&t==="scroll",g=x?f!==null?f+"Capture":null:f;x=[];for(var m=u,v;m!==null;){v=m;var k=v.stateNode;if(v.tag===5&&k!==null&&(v=k,g!==null&&(k=lu(m,g),k!=null&&x.push(mu(m,k,v)))),y)break;m=m.return}0<x.length&&(f=new p(f,w,null,n,d),h.push({event:f,listeners:x}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==Fg&&(w=n.relatedTarget||n.fromElement)&&(Mo(w)||w[ni]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(w=n.relatedTarget||n.toElement,p=u,w=w?Mo(w):null,w!==null&&(y=ma(w),w!==y||w.tag!==5&&w.tag!==6)&&(w=null)):(p=null,w=u),p!==w)){if(x=db,k="onMouseLeave",g="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(x=fb,k="onPointerLeave",g="onPointerEnter",m="pointer"),y=p==null?f:Ja(p),v=w==null?f:Ja(w),f=new x(k,m+"leave",p,n,d),f.target=y,f.relatedTarget=v,k=null,Mo(d)===u&&(x=new x(g,m+"enter",w,n,d),x.target=v,x.relatedTarget=y,k=x),y=k,p&&w)t:{for(x=p,g=w,m=0,v=x;v;v=Pa(v))m++;for(v=0,k=g;k;k=Pa(k))v++;for(;0<m-v;)x=Pa(x),m--;for(;0<v-m;)g=Pa(g),v--;for(;m--;){if(x===g||g!==null&&x===g.alternate)break t;x=Pa(x),g=Pa(g)}x=null}else x=null;p!==null&&Sb(h,f,p,x,!1),w!==null&&y!==null&&Sb(h,y,w,x,!0)}}e:{if(f=u?Ja(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var S=UR;else if(gb(f))if($1)S=qR;else{S=WR;var C=HR}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=VR);if(S&&(S=S(t,u))){L1(h,S,n,d);break e}C&&C(t,f,u),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&Mg(f,"number",f.value)}switch(C=u?Ja(u):window,t){case"focusin":(gb(C)||C.contentEditable==="true")&&(Qa=C,qg=u,Gc=null);break;case"focusout":Gc=qg=Qa=null;break;case"mousedown":Kg=!0;break;case"contextmenu":case"mouseup":case"dragend":Kg=!1,wb(h,n,d);break;case"selectionchange":if(YR)break;case"keydown":case"keyup":wb(h,n,d)}var _;if(qy)e:{switch(t){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Ya?I1(t,n)&&(j="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(M1&&n.locale!=="ko"&&(Ya||j!=="onCompositionStart"?j==="onCompositionEnd"&&Ya&&(_=O1()):(Ii=d,Hy="value"in Ii?Ii.value:Ii.textContent,Ya=!0)),C=bf(u,j),0<C.length&&(j=new hb(j,t,null,n,d),h.push({event:j,listeners:C}),_?j.data=_:(_=D1(n),_!==null&&(j.data=_)))),(_=LR?$R(t,n):FR(t,n))&&(u=bf(u,"onBeforeInput"),0<u.length&&(d=new hb("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=_))}G1(h,e)})}function mu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function bf(t,e){for(var n=e+"Capture",s=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=lu(t,n),i!=null&&s.unshift(mu(t,i,r)),i=lu(t,e),i!=null&&s.push(mu(t,i,r))),t=t.return}return s}function Pa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Sb(t,e,n,s,r){for(var i=e._reactName,o=[];n!==null&&n!==s;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===s)break;a.tag===5&&u!==null&&(a=u,r?(l=lu(n,i),l!=null&&o.unshift(mu(n,l,a))):r||(l=lu(n,i),l!=null&&o.push(mu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var ZR=/\r\n?/g,eA=/\u0000|\uFFFD/g;function jb(t){return(typeof t=="string"?t:""+t).replace(ZR,`
`).replace(eA,"")}function Gd(t,e,n){if(e=jb(e),jb(t)!==e&&n)throw Error(se(425))}function wf(){}var Gg=null,Yg=null;function Qg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xg=typeof setTimeout=="function"?setTimeout:void 0,tA=typeof clearTimeout=="function"?clearTimeout:void 0,Cb=typeof Promise=="function"?Promise:void 0,nA=typeof queueMicrotask=="function"?queueMicrotask:typeof Cb<"u"?function(t){return Cb.resolve(null).then(t).catch(sA)}:Xg;function sA(t){setTimeout(function(){throw t})}function wm(t,e){var n=e,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){t.removeChild(r),du(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);du(e)}function Vi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Nb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ql=Math.random().toString(36).slice(2),_r="__reactFiber$"+Ql,gu="__reactProps$"+Ql,ni="__reactContainer$"+Ql,Jg="__reactEvents$"+Ql,rA="__reactListeners$"+Ql,iA="__reactHandles$"+Ql;function Mo(t){var e=t[_r];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ni]||n[_r]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Nb(t);t!==null;){if(n=t[_r])return n;t=Nb(t)}return e}t=n,n=t.parentNode}return null}function ad(t){return t=t[_r]||t[ni],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ja(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(se(33))}function gp(t){return t[gu]||null}var Zg=[],Za=-1;function co(t){return{current:t}}function Pt(t){0>Za||(t.current=Zg[Za],Zg[Za]=null,Za--)}function _t(t,e){Za++,Zg[Za]=t.current,t.current=e}var to={},Pn=co(to),ns=co(!1),na=to;function zl(t,e){var n=t.type.contextTypes;if(!n)return to;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=e[i];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function ss(t){return t=t.childContextTypes,t!=null}function kf(){Pt(ns),Pt(Pn)}function Eb(t,e,n){if(Pn.current!==to)throw Error(se(168));_t(Pn,e),_t(ns,n)}function Q1(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(se(108,HP(t)||"Unknown",r));return Wt({},n,s)}function _f(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||to,na=Pn.current,_t(Pn,t),_t(ns,ns.current),!0}function Tb(t,e,n){var s=t.stateNode;if(!s)throw Error(se(169));n?(t=Q1(t,e,na),s.__reactInternalMemoizedMergedChildContext=t,Pt(ns),Pt(Pn),_t(Pn,t)):Pt(ns),_t(ns,n)}var Hr=null,xp=!1,km=!1;function X1(t){Hr===null?Hr=[t]:Hr.push(t)}function oA(t){xp=!0,X1(t)}function uo(){if(!km&&Hr!==null){km=!0;var t=0,e=mt;try{var n=Hr;for(mt=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}Hr=null,xp=!1}catch(r){throw Hr!==null&&(Hr=Hr.slice(t+1)),k1(Fy,uo),r}finally{mt=e,km=!1}}return null}var el=[],tl=0,Sf=null,jf=0,Rs=[],As=0,sa=null,Yr=1,Qr="";function No(t,e){el[tl++]=jf,el[tl++]=Sf,Sf=t,jf=e}function J1(t,e,n){Rs[As++]=Yr,Rs[As++]=Qr,Rs[As++]=sa,sa=t;var s=Yr;t=Qr;var r=32-er(s)-1;s&=~(1<<r),n+=1;var i=32-er(e)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,Yr=1<<32-er(e)+r|n<<r|s,Qr=i+t}else Yr=1<<i|n<<r|s,Qr=t}function Gy(t){t.return!==null&&(No(t,1),J1(t,1,0))}function Yy(t){for(;t===Sf;)Sf=el[--tl],el[tl]=null,jf=el[--tl],el[tl]=null;for(;t===sa;)sa=Rs[--As],Rs[As]=null,Qr=Rs[--As],Rs[As]=null,Yr=Rs[--As],Rs[As]=null}var vs=null,ys=null,It=!1,Zs=null;function Z1(t,e){var n=Os(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Pb(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,vs=t,ys=Vi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,vs=t,ys=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=sa!==null?{id:Yr,overflow:Qr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Os(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,vs=t,ys=null,!0):!1;default:return!1}}function ex(t){return(t.mode&1)!==0&&(t.flags&128)===0}function tx(t){if(It){var e=ys;if(e){var n=e;if(!Pb(t,e)){if(ex(t))throw Error(se(418));e=Vi(n.nextSibling);var s=vs;e&&Pb(t,e)?Z1(s,n):(t.flags=t.flags&-4097|2,It=!1,vs=t)}}else{if(ex(t))throw Error(se(418));t.flags=t.flags&-4097|2,It=!1,vs=t}}}function Rb(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vs=t}function Yd(t){if(t!==vs)return!1;if(!It)return Rb(t),It=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Qg(t.type,t.memoizedProps)),e&&(e=ys)){if(ex(t))throw ej(),Error(se(418));for(;e;)Z1(t,e),e=Vi(e.nextSibling)}if(Rb(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(se(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ys=Vi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ys=null}}else ys=vs?Vi(t.stateNode.nextSibling):null;return!0}function ej(){for(var t=ys;t;)t=Vi(t.nextSibling)}function Bl(){ys=vs=null,It=!1}function Qy(t){Zs===null?Zs=[t]:Zs.push(t)}var aA=ci.ReactCurrentBatchConfig;function yc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(se(309));var s=n.stateNode}if(!s)throw Error(se(147,t));var r=s,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=r.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(se(284));if(!n._owner)throw Error(se(290,t))}return t}function Qd(t,e){throw t=Object.prototype.toString.call(e),Error(se(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ab(t){var e=t._init;return e(t._payload)}function tj(t){function e(g,m){if(t){var v=g.deletions;v===null?(g.deletions=[m],g.flags|=16):v.push(m)}}function n(g,m){if(!t)return null;for(;m!==null;)e(g,m),m=m.sibling;return null}function s(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function r(g,m){return g=Yi(g,m),g.index=0,g.sibling=null,g}function i(g,m,v){return g.index=v,t?(v=g.alternate,v!==null?(v=v.index,v<m?(g.flags|=2,m):v):(g.flags|=2,m)):(g.flags|=1048576,m)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,m,v,k){return m===null||m.tag!==6?(m=Tm(v,g.mode,k),m.return=g,m):(m=r(m,v),m.return=g,m)}function l(g,m,v,k){var S=v.type;return S===Ga?d(g,m,v.props.children,k,v.key):m!==null&&(m.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===yi&&Ab(S)===m.type)?(k=r(m,v.props),k.ref=yc(g,m,v),k.return=g,k):(k=Qh(v.type,v.key,v.props,null,g.mode,k),k.ref=yc(g,m,v),k.return=g,k)}function u(g,m,v,k){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=Pm(v,g.mode,k),m.return=g,m):(m=r(m,v.children||[]),m.return=g,m)}function d(g,m,v,k,S){return m===null||m.tag!==7?(m=Xo(v,g.mode,k,S),m.return=g,m):(m=r(m,v),m.return=g,m)}function h(g,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Tm(""+m,g.mode,v),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Fd:return v=Qh(m.type,m.key,m.props,null,g.mode,v),v.ref=yc(g,null,m),v.return=g,v;case Ka:return m=Pm(m,g.mode,v),m.return=g,m;case yi:var k=m._init;return h(g,k(m._payload),v)}if(Ac(m)||fc(m))return m=Xo(m,g.mode,v,null),m.return=g,m;Qd(g,m)}return null}function f(g,m,v,k){var S=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return S!==null?null:a(g,m,""+v,k);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Fd:return v.key===S?l(g,m,v,k):null;case Ka:return v.key===S?u(g,m,v,k):null;case yi:return S=v._init,f(g,m,S(v._payload),k)}if(Ac(v)||fc(v))return S!==null?null:d(g,m,v,k,null);Qd(g,v)}return null}function p(g,m,v,k,S){if(typeof k=="string"&&k!==""||typeof k=="number")return g=g.get(v)||null,a(m,g,""+k,S);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Fd:return g=g.get(k.key===null?v:k.key)||null,l(m,g,k,S);case Ka:return g=g.get(k.key===null?v:k.key)||null,u(m,g,k,S);case yi:var C=k._init;return p(g,m,v,C(k._payload),S)}if(Ac(k)||fc(k))return g=g.get(v)||null,d(m,g,k,S,null);Qd(m,k)}return null}function w(g,m,v,k){for(var S=null,C=null,_=m,j=m=0,N=null;_!==null&&j<v.length;j++){_.index>j?(N=_,_=null):N=_.sibling;var P=f(g,_,v[j],k);if(P===null){_===null&&(_=N);break}t&&_&&P.alternate===null&&e(g,_),m=i(P,m,j),C===null?S=P:C.sibling=P,C=P,_=N}if(j===v.length)return n(g,_),It&&No(g,j),S;if(_===null){for(;j<v.length;j++)_=h(g,v[j],k),_!==null&&(m=i(_,m,j),C===null?S=_:C.sibling=_,C=_);return It&&No(g,j),S}for(_=s(g,_);j<v.length;j++)N=p(_,g,j,v[j],k),N!==null&&(t&&N.alternate!==null&&_.delete(N.key===null?j:N.key),m=i(N,m,j),C===null?S=N:C.sibling=N,C=N);return t&&_.forEach(function(D){return e(g,D)}),It&&No(g,j),S}function x(g,m,v,k){var S=fc(v);if(typeof S!="function")throw Error(se(150));if(v=S.call(v),v==null)throw Error(se(151));for(var C=S=null,_=m,j=m=0,N=null,P=v.next();_!==null&&!P.done;j++,P=v.next()){_.index>j?(N=_,_=null):N=_.sibling;var D=f(g,_,P.value,k);if(D===null){_===null&&(_=N);break}t&&_&&D.alternate===null&&e(g,_),m=i(D,m,j),C===null?S=D:C.sibling=D,C=D,_=N}if(P.done)return n(g,_),It&&No(g,j),S;if(_===null){for(;!P.done;j++,P=v.next())P=h(g,P.value,k),P!==null&&(m=i(P,m,j),C===null?S=P:C.sibling=P,C=P);return It&&No(g,j),S}for(_=s(g,_);!P.done;j++,P=v.next())P=p(_,g,j,P.value,k),P!==null&&(t&&P.alternate!==null&&_.delete(P.key===null?j:P.key),m=i(P,m,j),C===null?S=P:C.sibling=P,C=P);return t&&_.forEach(function(M){return e(g,M)}),It&&No(g,j),S}function y(g,m,v,k){if(typeof v=="object"&&v!==null&&v.type===Ga&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Fd:e:{for(var S=v.key,C=m;C!==null;){if(C.key===S){if(S=v.type,S===Ga){if(C.tag===7){n(g,C.sibling),m=r(C,v.props.children),m.return=g,g=m;break e}}else if(C.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===yi&&Ab(S)===C.type){n(g,C.sibling),m=r(C,v.props),m.ref=yc(g,C,v),m.return=g,g=m;break e}n(g,C);break}else e(g,C);C=C.sibling}v.type===Ga?(m=Xo(v.props.children,g.mode,k,v.key),m.return=g,g=m):(k=Qh(v.type,v.key,v.props,null,g.mode,k),k.ref=yc(g,m,v),k.return=g,g=k)}return o(g);case Ka:e:{for(C=v.key;m!==null;){if(m.key===C)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){n(g,m.sibling),m=r(m,v.children||[]),m.return=g,g=m;break e}else{n(g,m);break}else e(g,m);m=m.sibling}m=Pm(v,g.mode,k),m.return=g,g=m}return o(g);case yi:return C=v._init,y(g,m,C(v._payload),k)}if(Ac(v))return w(g,m,v,k);if(fc(v))return x(g,m,v,k);Qd(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(n(g,m.sibling),m=r(m,v),m.return=g,g=m):(n(g,m),m=Tm(v,g.mode,k),m.return=g,g=m),o(g)):n(g,m)}return y}var Ul=tj(!0),nj=tj(!1),Cf=co(null),Nf=null,nl=null,Xy=null;function Jy(){Xy=nl=Nf=null}function Zy(t){var e=Cf.current;Pt(Cf),t._currentValue=e}function nx(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function dl(t,e){Nf=t,Xy=nl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Jn=!0),t.firstContext=null)}function $s(t){var e=t._currentValue;if(Xy!==t)if(t={context:t,memoizedValue:e,next:null},nl===null){if(Nf===null)throw Error(se(308));nl=t,Nf.dependencies={lanes:0,firstContext:t}}else nl=nl.next=t;return e}var Io=null;function ev(t){Io===null?Io=[t]:Io.push(t)}function sj(t,e,n,s){var r=e.interleaved;return r===null?(n.next=n,ev(e)):(n.next=r.next,r.next=n),e.interleaved=n,si(t,s)}function si(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var vi=!1;function tv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rj(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function qi(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,st&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,si(t,n)}return r=s.interleaved,r===null?(e.next=e,ev(s)):(e.next=r.next,r.next=e),s.interleaved=e,si(t,n)}function Wh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,zy(t,n)}}function Ob(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?r=i=e:i=i.next=e}else r=i=e;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ef(t,e,n,s){var r=t.updateQueue;vi=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(i!==null){var h=r.baseState;o=0,d=u=l=null,a=i;do{var f=a.lane,p=a.eventTime;if((s&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,x=a;switch(f=e,p=n,x.tag){case 1:if(w=x.payload,typeof w=="function"){h=w.call(p,h,f);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=x.payload,f=typeof w=="function"?w.call(p,h,f):w,f==null)break e;h=Wt({},h,f);break e;case 2:vi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=p,l=h):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(d===null&&(l=h),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=d,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);ia|=o,t.lanes=o,t.memoizedState=h}}function Mb(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(se(191,r));r.call(s)}}}var ld={},Er=co(ld),xu=co(ld),yu=co(ld);function Do(t){if(t===ld)throw Error(se(174));return t}function nv(t,e){switch(_t(yu,e),_t(xu,t),_t(Er,ld),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Dg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Dg(e,t)}Pt(Er),_t(Er,e)}function Hl(){Pt(Er),Pt(xu),Pt(yu)}function ij(t){Do(yu.current);var e=Do(Er.current),n=Dg(e,t.type);e!==n&&(_t(xu,t),_t(Er,n))}function sv(t){xu.current===t&&(Pt(Er),Pt(xu))}var zt=co(0);function Tf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var _m=[];function rv(){for(var t=0;t<_m.length;t++)_m[t]._workInProgressVersionPrimary=null;_m.length=0}var Vh=ci.ReactCurrentDispatcher,Sm=ci.ReactCurrentBatchConfig,ra=0,Ht=null,on=null,dn=null,Pf=!1,Yc=!1,vu=0,lA=0;function _n(){throw Error(se(321))}function iv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sr(t[n],e[n]))return!1;return!0}function ov(t,e,n,s,r,i){if(ra=i,Ht=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vh.current=t===null||t.memoizedState===null?hA:fA,t=n(s,r),Yc){i=0;do{if(Yc=!1,vu=0,25<=i)throw Error(se(301));i+=1,dn=on=null,e.updateQueue=null,Vh.current=pA,t=n(s,r)}while(Yc)}if(Vh.current=Rf,e=on!==null&&on.next!==null,ra=0,dn=on=Ht=null,Pf=!1,e)throw Error(se(300));return t}function av(){var t=vu!==0;return vu=0,t}function mr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?Ht.memoizedState=dn=t:dn=dn.next=t,dn}function Fs(){if(on===null){var t=Ht.alternate;t=t!==null?t.memoizedState:null}else t=on.next;var e=dn===null?Ht.memoizedState:dn.next;if(e!==null)dn=e,on=t;else{if(t===null)throw Error(se(310));on=t,t={memoizedState:on.memoizedState,baseState:on.baseState,baseQueue:on.baseQueue,queue:on.queue,next:null},dn===null?Ht.memoizedState=dn=t:dn=dn.next=t}return dn}function bu(t,e){return typeof e=="function"?e(t):e}function jm(t){var e=Fs(),n=e.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=t;var s=on,r=s.baseQueue,i=n.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}s.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,s=s.baseState;var a=o=null,l=null,u=i;do{var d=u.lane;if((ra&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:t(s,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=s):l=l.next=h,Ht.lanes|=d,ia|=d}u=u.next}while(u!==null&&u!==i);l===null?o=s:l.next=a,sr(s,e.memoizedState)||(Jn=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=l,n.lastRenderedState=s}if(t=n.interleaved,t!==null){r=t;do i=r.lane,Ht.lanes|=i,ia|=i,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Cm(t){var e=Fs(),n=e.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=t;var s=n.dispatch,r=n.pending,i=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do i=t(i,o.action),o=o.next;while(o!==r);sr(i,e.memoizedState)||(Jn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,s]}function oj(){}function aj(t,e){var n=Ht,s=Fs(),r=e(),i=!sr(s.memoizedState,r);if(i&&(s.memoizedState=r,Jn=!0),s=s.queue,lv(uj.bind(null,n,s,t),[t]),s.getSnapshot!==e||i||dn!==null&&dn.memoizedState.tag&1){if(n.flags|=2048,wu(9,cj.bind(null,n,s,r,e),void 0,null),fn===null)throw Error(se(349));ra&30||lj(n,e,r)}return r}function lj(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ht.updateQueue,e===null?(e={lastEffect:null,stores:null},Ht.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function cj(t,e,n,s){e.value=n,e.getSnapshot=s,dj(e)&&hj(t)}function uj(t,e,n){return n(function(){dj(e)&&hj(t)})}function dj(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sr(t,n)}catch{return!0}}function hj(t){var e=si(t,1);e!==null&&tr(e,t,1,-1)}function Ib(t){var e=mr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bu,lastRenderedState:t},e.queue=t,t=t.dispatch=dA.bind(null,Ht,t),[e.memoizedState,t]}function wu(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=Ht.updateQueue,e===null?(e={lastEffect:null,stores:null},Ht.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function fj(){return Fs().memoizedState}function qh(t,e,n,s){var r=mr();Ht.flags|=t,r.memoizedState=wu(1|e,n,void 0,s===void 0?null:s)}function yp(t,e,n,s){var r=Fs();s=s===void 0?null:s;var i=void 0;if(on!==null){var o=on.memoizedState;if(i=o.destroy,s!==null&&iv(s,o.deps)){r.memoizedState=wu(e,n,i,s);return}}Ht.flags|=t,r.memoizedState=wu(1|e,n,i,s)}function Db(t,e){return qh(8390656,8,t,e)}function lv(t,e){return yp(2048,8,t,e)}function pj(t,e){return yp(4,2,t,e)}function mj(t,e){return yp(4,4,t,e)}function gj(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function xj(t,e,n){return n=n!=null?n.concat([t]):null,yp(4,4,gj.bind(null,e,t),n)}function cv(){}function yj(t,e){var n=Fs();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&iv(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function vj(t,e){var n=Fs();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&iv(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function bj(t,e,n){return ra&21?(sr(n,e)||(n=j1(),Ht.lanes|=n,ia|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Jn=!0),t.memoizedState=n)}function cA(t,e){var n=mt;mt=n!==0&&4>n?n:4,t(!0);var s=Sm.transition;Sm.transition={};try{t(!1),e()}finally{mt=n,Sm.transition=s}}function wj(){return Fs().memoizedState}function uA(t,e,n){var s=Gi(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},kj(t))_j(e,n);else if(n=sj(t,e,n,s),n!==null){var r=$n();tr(n,t,s,r),Sj(n,e,s)}}function dA(t,e,n){var s=Gi(t),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(kj(t))_j(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(r.hasEagerState=!0,r.eagerState=a,sr(a,o)){var l=e.interleaved;l===null?(r.next=r,ev(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=sj(t,e,r,s),n!==null&&(r=$n(),tr(n,t,s,r),Sj(n,e,s))}}function kj(t){var e=t.alternate;return t===Ht||e!==null&&e===Ht}function _j(t,e){Yc=Pf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Sj(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,zy(t,n)}}var Rf={readContext:$s,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useInsertionEffect:_n,useLayoutEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useMutableSource:_n,useSyncExternalStore:_n,useId:_n,unstable_isNewReconciler:!1},hA={readContext:$s,useCallback:function(t,e){return mr().memoizedState=[t,e===void 0?null:e],t},useContext:$s,useEffect:Db,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,qh(4194308,4,gj.bind(null,e,t),n)},useLayoutEffect:function(t,e){return qh(4194308,4,t,e)},useInsertionEffect:function(t,e){return qh(4,2,t,e)},useMemo:function(t,e){var n=mr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=mr();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=uA.bind(null,Ht,t),[s.memoizedState,t]},useRef:function(t){var e=mr();return t={current:t},e.memoizedState=t},useState:Ib,useDebugValue:cv,useDeferredValue:function(t){return mr().memoizedState=t},useTransition:function(){var t=Ib(!1),e=t[0];return t=cA.bind(null,t[1]),mr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=Ht,r=mr();if(It){if(n===void 0)throw Error(se(407));n=n()}else{if(n=e(),fn===null)throw Error(se(349));ra&30||lj(s,e,n)}r.memoizedState=n;var i={value:n,getSnapshot:e};return r.queue=i,Db(uj.bind(null,s,i,t),[t]),s.flags|=2048,wu(9,cj.bind(null,s,i,n,e),void 0,null),n},useId:function(){var t=mr(),e=fn.identifierPrefix;if(It){var n=Qr,s=Yr;n=(s&~(1<<32-er(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=vu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=lA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},fA={readContext:$s,useCallback:yj,useContext:$s,useEffect:lv,useImperativeHandle:xj,useInsertionEffect:pj,useLayoutEffect:mj,useMemo:vj,useReducer:jm,useRef:fj,useState:function(){return jm(bu)},useDebugValue:cv,useDeferredValue:function(t){var e=Fs();return bj(e,on.memoizedState,t)},useTransition:function(){var t=jm(bu)[0],e=Fs().memoizedState;return[t,e]},useMutableSource:oj,useSyncExternalStore:aj,useId:wj,unstable_isNewReconciler:!1},pA={readContext:$s,useCallback:yj,useContext:$s,useEffect:lv,useImperativeHandle:xj,useInsertionEffect:pj,useLayoutEffect:mj,useMemo:vj,useReducer:Cm,useRef:fj,useState:function(){return Cm(bu)},useDebugValue:cv,useDeferredValue:function(t){var e=Fs();return on===null?e.memoizedState=t:bj(e,on.memoizedState,t)},useTransition:function(){var t=Cm(bu)[0],e=Fs().memoizedState;return[t,e]},useMutableSource:oj,useSyncExternalStore:aj,useId:wj,unstable_isNewReconciler:!1};function Ks(t,e){if(t&&t.defaultProps){e=Wt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function sx(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:Wt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var vp={isMounted:function(t){return(t=t._reactInternals)?ma(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=$n(),r=Gi(t),i=Zr(s,r);i.payload=e,n!=null&&(i.callback=n),e=qi(t,i,r),e!==null&&(tr(e,t,r,s),Wh(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=$n(),r=Gi(t),i=Zr(s,r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=qi(t,i,r),e!==null&&(tr(e,t,r,s),Wh(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$n(),s=Gi(t),r=Zr(n,s);r.tag=2,e!=null&&(r.callback=e),e=qi(t,r,s),e!==null&&(tr(e,t,s,n),Wh(e,t,s))}};function Lb(t,e,n,s,r,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!fu(n,s)||!fu(r,i):!0}function jj(t,e,n){var s=!1,r=to,i=e.contextType;return typeof i=="object"&&i!==null?i=$s(i):(r=ss(e)?na:Pn.current,s=e.contextTypes,i=(s=s!=null)?zl(t,r):to),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=vp,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function $b(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&vp.enqueueReplaceState(e,e.state,null)}function rx(t,e,n,s){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},tv(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=$s(i):(i=ss(e)?na:Pn.current,r.context=zl(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(sx(t,e,i,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&vp.enqueueReplaceState(r,r.state,null),Ef(t,n,r,s),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Wl(t,e){try{var n="",s=e;do n+=UP(s),s=s.return;while(s);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function Nm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ix(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var mA=typeof WeakMap=="function"?WeakMap:Map;function Cj(t,e,n){n=Zr(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){Of||(Of=!0,mx=s),ix(t,e)},n}function Nj(t,e,n){n=Zr(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;n.payload=function(){return s(r)},n.callback=function(){ix(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ix(t,e),typeof s!="function"&&(Ki===null?Ki=new Set([this]):Ki.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Fb(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new mA;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(n)||(r.add(n),t=TA.bind(null,t,e,n),e.then(t,t))}function zb(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Bb(t,e,n,s,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zr(-1,1),e.tag=2,qi(n,e,1))),n.lanes|=1),t)}var gA=ci.ReactCurrentOwner,Jn=!1;function Ln(t,e,n,s){e.child=t===null?nj(e,null,n,s):Ul(e,t.child,n,s)}function Ub(t,e,n,s,r){n=n.render;var i=e.ref;return dl(e,r),s=ov(t,e,n,s,i,r),n=av(),t!==null&&!Jn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ri(t,e,r)):(It&&n&&Gy(e),e.flags|=1,Ln(t,e,s,r),e.child)}function Hb(t,e,n,s,r){if(t===null){var i=n.type;return typeof i=="function"&&!xv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Ej(t,e,i,s,r)):(t=Qh(n.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:fu,n(o,s)&&t.ref===e.ref)return ri(t,e,r)}return e.flags|=1,t=Yi(i,s),t.ref=e.ref,t.return=e,e.child=t}function Ej(t,e,n,s,r){if(t!==null){var i=t.memoizedProps;if(fu(i,s)&&t.ref===e.ref)if(Jn=!1,e.pendingProps=s=i,(t.lanes&r)!==0)t.flags&131072&&(Jn=!0);else return e.lanes=t.lanes,ri(t,e,r)}return ox(t,e,n,s,r)}function Tj(t,e,n){var s=e.pendingProps,r=s.children,i=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_t(rl,fs),fs|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_t(rl,fs),fs|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,_t(rl,fs),fs|=s}else i!==null?(s=i.baseLanes|n,e.memoizedState=null):s=n,_t(rl,fs),fs|=s;return Ln(t,e,r,n),e.child}function Pj(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ox(t,e,n,s,r){var i=ss(n)?na:Pn.current;return i=zl(e,i),dl(e,r),n=ov(t,e,n,s,i,r),s=av(),t!==null&&!Jn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ri(t,e,r)):(It&&s&&Gy(e),e.flags|=1,Ln(t,e,n,r),e.child)}function Wb(t,e,n,s,r){if(ss(n)){var i=!0;_f(e)}else i=!1;if(dl(e,r),e.stateNode===null)Kh(t,e),jj(e,n,s),rx(e,n,s,r),s=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=$s(u):(u=ss(n)?na:Pn.current,u=zl(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==s||l!==u)&&$b(e,o,s,u),vi=!1;var f=e.memoizedState;o.state=f,Ef(e,s,o,r),l=e.memoizedState,a!==s||f!==l||ns.current||vi?(typeof d=="function"&&(sx(e,n,d,s),l=e.memoizedState),(a=vi||Lb(e,n,a,s,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=l),o.props=s,o.state=l,o.context=u,s=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,rj(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Ks(e.type,a),o.props=u,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=$s(l):(l=ss(n)?na:Pn.current,l=zl(e,l));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&$b(e,o,s,l),vi=!1,f=e.memoizedState,o.state=f,Ef(e,s,o,r);var w=e.memoizedState;a!==h||f!==w||ns.current||vi?(typeof p=="function"&&(sx(e,n,p,s),w=e.memoizedState),(u=vi||Lb(e,n,u,s,f,w,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=w),o.props=s,o.state=w,o.context=l,s=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),s=!1)}return ax(t,e,n,s,i,r)}function ax(t,e,n,s,r,i){Pj(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return r&&Tb(e,n,!1),ri(t,e,i);s=e.stateNode,gA.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=Ul(e,t.child,null,i),e.child=Ul(e,null,a,i)):Ln(t,e,a,i),e.memoizedState=s.state,r&&Tb(e,n,!0),e.child}function Rj(t){var e=t.stateNode;e.pendingContext?Eb(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Eb(t,e.context,!1),nv(t,e.containerInfo)}function Vb(t,e,n,s,r){return Bl(),Qy(r),e.flags|=256,Ln(t,e,n,s),e.child}var lx={dehydrated:null,treeContext:null,retryLane:0};function cx(t){return{baseLanes:t,cachePool:null,transitions:null}}function Aj(t,e,n){var s=e.pendingProps,r=zt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),_t(zt,r&1),t===null)return tx(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,i?(s=e.mode,i=e.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=kp(o,s,0,null),t=Xo(t,s,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=cx(n),e.memoizedState=lx,t):uv(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return xA(t,e,o,s,a,r,n);if(i){i=s.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:s.children};return!(o&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=l,e.deletions=null):(s=Yi(r,l),s.subtreeFlags=r.subtreeFlags&14680064),a!==null?i=Yi(a,i):(i=Xo(i,o,n,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=t.child.memoizedState,o=o===null?cx(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=lx,s}return i=t.child,t=i.sibling,s=Yi(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function uv(t,e){return e=kp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Xd(t,e,n,s){return s!==null&&Qy(s),Ul(e,t.child,null,n),t=uv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function xA(t,e,n,s,r,i,o){if(n)return e.flags&256?(e.flags&=-257,s=Nm(Error(se(422))),Xd(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=kp({mode:"visible",children:s.children},r,0,null),i=Xo(i,r,o,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&Ul(e,t.child,null,o),e.child.memoizedState=cx(o),e.memoizedState=lx,i);if(!(e.mode&1))return Xd(t,e,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var a=s.dgst;return s=a,i=Error(se(419)),s=Nm(i,s,void 0),Xd(t,e,o,s)}if(a=(o&t.childLanes)!==0,Jn||a){if(s=fn,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,si(t,r),tr(s,t,r,-1))}return gv(),s=Nm(Error(se(421))),Xd(t,e,o,s)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=PA.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,ys=Vi(r.nextSibling),vs=e,It=!0,Zs=null,t!==null&&(Rs[As++]=Yr,Rs[As++]=Qr,Rs[As++]=sa,Yr=t.id,Qr=t.overflow,sa=e),e=uv(e,s.children),e.flags|=4096,e)}function qb(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),nx(t.return,e,n)}function Em(t,e,n,s,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function Oj(t,e,n){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if(Ln(t,e,s.children,n),s=zt.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qb(t,n,e);else if(t.tag===19)qb(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(_t(zt,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Tf(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Em(e,!1,r,n,i);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Tf(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Em(e,!0,n,null,i);break;case"together":Em(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Kh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ri(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ia|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(se(153));if(e.child!==null){for(t=e.child,n=Yi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Yi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function yA(t,e,n){switch(e.tag){case 3:Rj(e),Bl();break;case 5:ij(e);break;case 1:ss(e.type)&&_f(e);break;case 4:nv(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;_t(Cf,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(_t(zt,zt.current&1),e.flags|=128,null):n&e.child.childLanes?Aj(t,e,n):(_t(zt,zt.current&1),t=ri(t,e,n),t!==null?t.sibling:null);_t(zt,zt.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return Oj(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),_t(zt,zt.current),s)break;return null;case 22:case 23:return e.lanes=0,Tj(t,e,n)}return ri(t,e,n)}var Mj,ux,Ij,Dj;Mj=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ux=function(){};Ij=function(t,e,n,s){var r=t.memoizedProps;if(r!==s){t=e.stateNode,Do(Er.current);var i=null;switch(n){case"input":r=Ag(t,r),s=Ag(t,s),i=[];break;case"select":r=Wt({},r,{value:void 0}),s=Wt({},s,{value:void 0}),i=[];break;case"textarea":r=Ig(t,r),s=Ig(t,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=wf)}Lg(n,s);var o;n=null;for(u in r)if(!s.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ou.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in s){var l=s[u];if(a=r!=null?r[u]:void 0,s.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ou.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ct("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Dj=function(t,e,n,s){n!==s&&(e.flags|=4)};function vc(t,e){if(!It)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Sn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function vA(t,e,n){var s=e.pendingProps;switch(Yy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sn(e),null;case 1:return ss(e.type)&&kf(),Sn(e),null;case 3:return s=e.stateNode,Hl(),Pt(ns),Pt(Pn),rv(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Yd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Zs!==null&&(yx(Zs),Zs=null))),ux(t,e),Sn(e),null;case 5:sv(e);var r=Do(yu.current);if(n=e.type,t!==null&&e.stateNode!=null)Ij(t,e,n,s,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(se(166));return Sn(e),null}if(t=Do(Er.current),Yd(e)){s=e.stateNode,n=e.type;var i=e.memoizedProps;switch(s[_r]=e,s[gu]=i,t=(e.mode&1)!==0,n){case"dialog":Ct("cancel",s),Ct("close",s);break;case"iframe":case"object":case"embed":Ct("load",s);break;case"video":case"audio":for(r=0;r<Mc.length;r++)Ct(Mc[r],s);break;case"source":Ct("error",s);break;case"img":case"image":case"link":Ct("error",s),Ct("load",s);break;case"details":Ct("toggle",s);break;case"input":tb(s,i),Ct("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Ct("invalid",s);break;case"textarea":sb(s,i),Ct("invalid",s)}Lg(n,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?s.textContent!==a&&(i.suppressHydrationWarning!==!0&&Gd(s.textContent,a,t),r=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Gd(s.textContent,a,t),r=["children",""+a]):ou.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ct("scroll",s)}switch(n){case"input":zd(s),nb(s,i,!0);break;case"textarea":zd(s),rb(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=wf)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=u1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(n,{is:s.is}):(t=o.createElement(n),n==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,n),t[_r]=e,t[gu]=s,Mj(t,e,!1,!1),e.stateNode=t;e:{switch(o=$g(n,s),n){case"dialog":Ct("cancel",t),Ct("close",t),r=s;break;case"iframe":case"object":case"embed":Ct("load",t),r=s;break;case"video":case"audio":for(r=0;r<Mc.length;r++)Ct(Mc[r],t);r=s;break;case"source":Ct("error",t),r=s;break;case"img":case"image":case"link":Ct("error",t),Ct("load",t),r=s;break;case"details":Ct("toggle",t),r=s;break;case"input":tb(t,s),r=Ag(t,s),Ct("invalid",t);break;case"option":r=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},r=Wt({},s,{value:void 0}),Ct("invalid",t);break;case"textarea":sb(t,s),r=Ig(t,s),Ct("invalid",t);break;default:r=s}Lg(n,r),a=r;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?f1(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&d1(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&au(t,l):typeof l=="number"&&au(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ou.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Ct("scroll",t):l!=null&&My(t,i,l,o))}switch(n){case"input":zd(t),nb(t,s,!1);break;case"textarea":zd(t),rb(t);break;case"option":s.value!=null&&t.setAttribute("value",""+eo(s.value));break;case"select":t.multiple=!!s.multiple,i=s.value,i!=null?al(t,!!s.multiple,i,!1):s.defaultValue!=null&&al(t,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=wf)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Sn(e),null;case 6:if(t&&e.stateNode!=null)Dj(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(se(166));if(n=Do(yu.current),Do(Er.current),Yd(e)){if(s=e.stateNode,n=e.memoizedProps,s[_r]=e,(i=s.nodeValue!==n)&&(t=vs,t!==null))switch(t.tag){case 3:Gd(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Gd(s.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[_r]=e,e.stateNode=s}return Sn(e),null;case 13:if(Pt(zt),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(It&&ys!==null&&e.mode&1&&!(e.flags&128))ej(),Bl(),e.flags|=98560,i=!1;else if(i=Yd(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(se(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(se(317));i[_r]=e}else Bl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Sn(e),i=!1}else Zs!==null&&(yx(Zs),Zs=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||zt.current&1?ln===0&&(ln=3):gv())),e.updateQueue!==null&&(e.flags|=4),Sn(e),null);case 4:return Hl(),ux(t,e),t===null&&pu(e.stateNode.containerInfo),Sn(e),null;case 10:return Zy(e.type._context),Sn(e),null;case 17:return ss(e.type)&&kf(),Sn(e),null;case 19:if(Pt(zt),i=e.memoizedState,i===null)return Sn(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)vc(i,!1);else{if(ln!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Tf(t),o!==null){for(e.flags|=128,vc(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)i=n,t=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _t(zt,zt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Qt()>Vl&&(e.flags|=128,s=!0,vc(i,!1),e.lanes=4194304)}else{if(!s)if(t=Tf(o),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),vc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!It)return Sn(e),null}else 2*Qt()-i.renderingStartTime>Vl&&n!==1073741824&&(e.flags|=128,s=!0,vc(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Qt(),e.sibling=null,n=zt.current,_t(zt,s?n&1|2:n&1),e):(Sn(e),null);case 22:case 23:return mv(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?fs&1073741824&&(Sn(e),e.subtreeFlags&6&&(e.flags|=8192)):Sn(e),null;case 24:return null;case 25:return null}throw Error(se(156,e.tag))}function bA(t,e){switch(Yy(e),e.tag){case 1:return ss(e.type)&&kf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Hl(),Pt(ns),Pt(Pn),rv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return sv(e),null;case 13:if(Pt(zt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(se(340));Bl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Pt(zt),null;case 4:return Hl(),null;case 10:return Zy(e.type._context),null;case 22:case 23:return mv(),null;case 24:return null;default:return null}}var Jd=!1,Cn=!1,wA=typeof WeakSet=="function"?WeakSet:Set,ke=null;function sl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Kt(t,e,s)}else n.current=null}function dx(t,e,n){try{n()}catch(s){Kt(t,e,s)}}var Kb=!1;function kA(t,e){if(Gg=yf,t=B1(),Ky(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==n||r!==0&&h.nodeType!==3||(a=o+r),h!==i||s!==0&&h.nodeType!==3||(l=o+s),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++u===r&&(a=o),f===i&&++d===s&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yg={focusedElem:t,selectionRange:n},yf=!1,ke=e;ke!==null;)if(e=ke,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ke=t;else for(;ke!==null;){e=ke;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var x=w.memoizedProps,y=w.memoizedState,g=e.stateNode,m=g.getSnapshotBeforeUpdate(e.elementType===e.type?x:Ks(e.type,x),y);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(k){Kt(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,ke=t;break}ke=e.return}return w=Kb,Kb=!1,w}function Qc(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&dx(e,n,i)}r=r.next}while(r!==s)}}function bp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function hx(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Lj(t){var e=t.alternate;e!==null&&(t.alternate=null,Lj(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_r],delete e[gu],delete e[Jg],delete e[rA],delete e[iA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $j(t){return t.tag===5||t.tag===3||t.tag===4}function Gb(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$j(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fx(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=wf));else if(s!==4&&(t=t.child,t!==null))for(fx(t,e,n),t=t.sibling;t!==null;)fx(t,e,n),t=t.sibling}function px(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(px(t,e,n),t=t.sibling;t!==null;)px(t,e,n),t=t.sibling}var yn=null,Xs=!1;function fi(t,e,n){for(n=n.child;n!==null;)Fj(t,e,n),n=n.sibling}function Fj(t,e,n){if(Nr&&typeof Nr.onCommitFiberUnmount=="function")try{Nr.onCommitFiberUnmount(hp,n)}catch{}switch(n.tag){case 5:Cn||sl(n,e);case 6:var s=yn,r=Xs;yn=null,fi(t,e,n),yn=s,Xs=r,yn!==null&&(Xs?(t=yn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):yn.removeChild(n.stateNode));break;case 18:yn!==null&&(Xs?(t=yn,n=n.stateNode,t.nodeType===8?wm(t.parentNode,n):t.nodeType===1&&wm(t,n),du(t)):wm(yn,n.stateNode));break;case 4:s=yn,r=Xs,yn=n.stateNode.containerInfo,Xs=!0,fi(t,e,n),yn=s,Xs=r;break;case 0:case 11:case 14:case 15:if(!Cn&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&dx(n,e,o),r=r.next}while(r!==s)}fi(t,e,n);break;case 1:if(!Cn&&(sl(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(a){Kt(n,e,a)}fi(t,e,n);break;case 21:fi(t,e,n);break;case 22:n.mode&1?(Cn=(s=Cn)||n.memoizedState!==null,fi(t,e,n),Cn=s):fi(t,e,n);break;default:fi(t,e,n)}}function Yb(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new wA),e.forEach(function(s){var r=RA.bind(null,t,s);n.has(s)||(n.add(s),s.then(r,r))})}}function Vs(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:yn=a.stateNode,Xs=!1;break e;case 3:yn=a.stateNode.containerInfo,Xs=!0;break e;case 4:yn=a.stateNode.containerInfo,Xs=!0;break e}a=a.return}if(yn===null)throw Error(se(160));Fj(i,o,r),yn=null,Xs=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){Kt(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)zj(e,t),e=e.sibling}function zj(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Vs(e,t),dr(t),s&4){try{Qc(3,t,t.return),bp(3,t)}catch(x){Kt(t,t.return,x)}try{Qc(5,t,t.return)}catch(x){Kt(t,t.return,x)}}break;case 1:Vs(e,t),dr(t),s&512&&n!==null&&sl(n,n.return);break;case 5:if(Vs(e,t),dr(t),s&512&&n!==null&&sl(n,n.return),t.flags&32){var r=t.stateNode;try{au(r,"")}catch(x){Kt(t,t.return,x)}}if(s&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&l1(r,i),$g(a,o);var u=$g(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?f1(r,h):d==="dangerouslySetInnerHTML"?d1(r,h):d==="children"?au(r,h):My(r,d,h,u)}switch(a){case"input":Og(r,i);break;case"textarea":c1(r,i);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?al(r,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?al(r,!!i.multiple,i.defaultValue,!0):al(r,!!i.multiple,i.multiple?[]:"",!1))}r[gu]=i}catch(x){Kt(t,t.return,x)}}break;case 6:if(Vs(e,t),dr(t),s&4){if(t.stateNode===null)throw Error(se(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(x){Kt(t,t.return,x)}}break;case 3:if(Vs(e,t),dr(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{du(e.containerInfo)}catch(x){Kt(t,t.return,x)}break;case 4:Vs(e,t),dr(t);break;case 13:Vs(e,t),dr(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(fv=Qt())),s&4&&Yb(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Cn=(u=Cn)||d,Vs(e,t),Cn=u):Vs(e,t),dr(t),s&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(ke=t,d=t.child;d!==null;){for(h=ke=d;ke!==null;){switch(f=ke,p=f.child,f.tag){case 0:case 11:case 14:case 15:Qc(4,f,f.return);break;case 1:sl(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){s=f,n=f.return;try{e=s,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(x){Kt(s,n,x)}}break;case 5:sl(f,f.return);break;case 22:if(f.memoizedState!==null){Xb(h);continue}}p!==null?(p.return=f,ke=p):Xb(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{r=h.stateNode,u?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=h1("display",o))}catch(x){Kt(t,t.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(x){Kt(t,t.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Vs(e,t),dr(t),s&4&&Yb(t);break;case 21:break;default:Vs(e,t),dr(t)}}function dr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if($j(n)){var s=n;break e}n=n.return}throw Error(se(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(au(r,""),s.flags&=-33);var i=Gb(t);px(t,i,r);break;case 3:case 4:var o=s.stateNode.containerInfo,a=Gb(t);fx(t,a,o);break;default:throw Error(se(161))}}catch(l){Kt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _A(t,e,n){ke=t,Bj(t)}function Bj(t,e,n){for(var s=(t.mode&1)!==0;ke!==null;){var r=ke,i=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||Jd;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Cn;a=Jd;var u=Cn;if(Jd=o,(Cn=l)&&!u)for(ke=r;ke!==null;)o=ke,l=o.child,o.tag===22&&o.memoizedState!==null?Jb(r):l!==null?(l.return=o,ke=l):Jb(r);for(;i!==null;)ke=i,Bj(i),i=i.sibling;ke=r,Jd=a,Cn=u}Qb(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,ke=i):Qb(t)}}function Qb(t){for(;ke!==null;){var e=ke;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Cn||bp(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Cn)if(n===null)s.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Ks(e.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Mb(e,i,s);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Mb(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&du(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}Cn||e.flags&512&&hx(e)}catch(f){Kt(e,e.return,f)}}if(e===t){ke=null;break}if(n=e.sibling,n!==null){n.return=e.return,ke=n;break}ke=e.return}}function Xb(t){for(;ke!==null;){var e=ke;if(e===t){ke=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ke=n;break}ke=e.return}}function Jb(t){for(;ke!==null;){var e=ke;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{bp(4,e)}catch(l){Kt(e,n,l)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(l){Kt(e,r,l)}}var i=e.return;try{hx(e)}catch(l){Kt(e,i,l)}break;case 5:var o=e.return;try{hx(e)}catch(l){Kt(e,o,l)}}}catch(l){Kt(e,e.return,l)}if(e===t){ke=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ke=a;break}ke=e.return}}var SA=Math.ceil,Af=ci.ReactCurrentDispatcher,dv=ci.ReactCurrentOwner,Ds=ci.ReactCurrentBatchConfig,st=0,fn=null,Zt=null,bn=0,fs=0,rl=co(0),ln=0,ku=null,ia=0,wp=0,hv=0,Xc=null,Qn=null,fv=0,Vl=1/0,Br=null,Of=!1,mx=null,Ki=null,Zd=!1,Di=null,Mf=0,Jc=0,gx=null,Gh=-1,Yh=0;function $n(){return st&6?Qt():Gh!==-1?Gh:Gh=Qt()}function Gi(t){return t.mode&1?st&2&&bn!==0?bn&-bn:aA.transition!==null?(Yh===0&&(Yh=j1()),Yh):(t=mt,t!==0||(t=window.event,t=t===void 0?16:A1(t.type)),t):1}function tr(t,e,n,s){if(50<Jc)throw Jc=0,gx=null,Error(se(185));id(t,n,s),(!(st&2)||t!==fn)&&(t===fn&&(!(st&2)&&(wp|=n),ln===4&&ki(t,bn)),rs(t,s),n===1&&st===0&&!(e.mode&1)&&(Vl=Qt()+500,xp&&uo()))}function rs(t,e){var n=t.callbackNode;aR(t,e);var s=xf(t,t===fn?bn:0);if(s===0)n!==null&&ab(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&ab(n),e===1)t.tag===0?oA(Zb.bind(null,t)):X1(Zb.bind(null,t)),nA(function(){!(st&6)&&uo()}),n=null;else{switch(C1(s)){case 1:n=Fy;break;case 4:n=_1;break;case 16:n=gf;break;case 536870912:n=S1;break;default:n=gf}n=Yj(n,Uj.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Uj(t,e){if(Gh=-1,Yh=0,st&6)throw Error(se(327));var n=t.callbackNode;if(hl()&&t.callbackNode!==n)return null;var s=xf(t,t===fn?bn:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=If(t,s);else{e=s;var r=st;st|=2;var i=Wj();(fn!==t||bn!==e)&&(Br=null,Vl=Qt()+500,Qo(t,e));do try{NA();break}catch(a){Hj(t,a)}while(!0);Jy(),Af.current=i,st=r,Zt!==null?e=0:(fn=null,bn=0,e=ln)}if(e!==0){if(e===2&&(r=Hg(t),r!==0&&(s=r,e=xx(t,r))),e===1)throw n=ku,Qo(t,0),ki(t,s),rs(t,Qt()),n;if(e===6)ki(t,s);else{if(r=t.current.alternate,!(s&30)&&!jA(r)&&(e=If(t,s),e===2&&(i=Hg(t),i!==0&&(s=i,e=xx(t,i))),e===1))throw n=ku,Qo(t,0),ki(t,s),rs(t,Qt()),n;switch(t.finishedWork=r,t.finishedLanes=s,e){case 0:case 1:throw Error(se(345));case 2:Eo(t,Qn,Br);break;case 3:if(ki(t,s),(s&130023424)===s&&(e=fv+500-Qt(),10<e)){if(xf(t,0)!==0)break;if(r=t.suspendedLanes,(r&s)!==s){$n(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Xg(Eo.bind(null,t,Qn,Br),e);break}Eo(t,Qn,Br);break;case 4:if(ki(t,s),(s&4194240)===s)break;for(e=t.eventTimes,r=-1;0<s;){var o=31-er(s);i=1<<o,o=e[o],o>r&&(r=o),s&=~i}if(s=r,s=Qt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*SA(s/1960))-s,10<s){t.timeoutHandle=Xg(Eo.bind(null,t,Qn,Br),s);break}Eo(t,Qn,Br);break;case 5:Eo(t,Qn,Br);break;default:throw Error(se(329))}}}return rs(t,Qt()),t.callbackNode===n?Uj.bind(null,t):null}function xx(t,e){var n=Xc;return t.current.memoizedState.isDehydrated&&(Qo(t,e).flags|=256),t=If(t,e),t!==2&&(e=Qn,Qn=n,e!==null&&yx(e)),t}function yx(t){Qn===null?Qn=t:Qn.push.apply(Qn,t)}function jA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!sr(i(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ki(t,e){for(e&=~hv,e&=~wp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-er(e),s=1<<n;t[n]=-1,e&=~s}}function Zb(t){if(st&6)throw Error(se(327));hl();var e=xf(t,0);if(!(e&1))return rs(t,Qt()),null;var n=If(t,e);if(t.tag!==0&&n===2){var s=Hg(t);s!==0&&(e=s,n=xx(t,s))}if(n===1)throw n=ku,Qo(t,0),ki(t,e),rs(t,Qt()),n;if(n===6)throw Error(se(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Eo(t,Qn,Br),rs(t,Qt()),null}function pv(t,e){var n=st;st|=1;try{return t(e)}finally{st=n,st===0&&(Vl=Qt()+500,xp&&uo())}}function oa(t){Di!==null&&Di.tag===0&&!(st&6)&&hl();var e=st;st|=1;var n=Ds.transition,s=mt;try{if(Ds.transition=null,mt=1,t)return t()}finally{mt=s,Ds.transition=n,st=e,!(st&6)&&uo()}}function mv(){fs=rl.current,Pt(rl)}function Qo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,tA(n)),Zt!==null)for(n=Zt.return;n!==null;){var s=n;switch(Yy(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&kf();break;case 3:Hl(),Pt(ns),Pt(Pn),rv();break;case 5:sv(s);break;case 4:Hl();break;case 13:Pt(zt);break;case 19:Pt(zt);break;case 10:Zy(s.type._context);break;case 22:case 23:mv()}n=n.return}if(fn=t,Zt=t=Yi(t.current,null),bn=fs=e,ln=0,ku=null,hv=wp=ia=0,Qn=Xc=null,Io!==null){for(e=0;e<Io.length;e++)if(n=Io[e],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,i=n.pending;if(i!==null){var o=i.next;i.next=r,s.next=o}n.pending=s}Io=null}return t}function Hj(t,e){do{var n=Zt;try{if(Jy(),Vh.current=Rf,Pf){for(var s=Ht.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Pf=!1}if(ra=0,dn=on=Ht=null,Yc=!1,vu=0,dv.current=null,n===null||n.return===null){ln=1,ku=e,Zt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=bn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=zb(o);if(p!==null){p.flags&=-257,Bb(p,o,a,i,e),p.mode&1&&Fb(i,u,e),e=p,l=u;var w=e.updateQueue;if(w===null){var x=new Set;x.add(l),e.updateQueue=x}else w.add(l);break e}else{if(!(e&1)){Fb(i,u,e),gv();break e}l=Error(se(426))}}else if(It&&a.mode&1){var y=zb(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Bb(y,o,a,i,e),Qy(Wl(l,a));break e}}i=l=Wl(l,a),ln!==4&&(ln=2),Xc===null?Xc=[i]:Xc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=Cj(i,l,e);Ob(i,g);break e;case 1:a=l;var m=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ki===null||!Ki.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=Nj(i,a,e);Ob(i,k);break e}}i=i.return}while(i!==null)}qj(n)}catch(S){e=S,Zt===n&&n!==null&&(Zt=n=n.return);continue}break}while(!0)}function Wj(){var t=Af.current;return Af.current=Rf,t===null?Rf:t}function gv(){(ln===0||ln===3||ln===2)&&(ln=4),fn===null||!(ia&268435455)&&!(wp&268435455)||ki(fn,bn)}function If(t,e){var n=st;st|=2;var s=Wj();(fn!==t||bn!==e)&&(Br=null,Qo(t,e));do try{CA();break}catch(r){Hj(t,r)}while(!0);if(Jy(),st=n,Af.current=s,Zt!==null)throw Error(se(261));return fn=null,bn=0,ln}function CA(){for(;Zt!==null;)Vj(Zt)}function NA(){for(;Zt!==null&&!JP();)Vj(Zt)}function Vj(t){var e=Gj(t.alternate,t,fs);t.memoizedProps=t.pendingProps,e===null?qj(t):Zt=e,dv.current=null}function qj(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=bA(n,e),n!==null){n.flags&=32767,Zt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ln=6,Zt=null;return}}else if(n=vA(n,e,fs),n!==null){Zt=n;return}if(e=e.sibling,e!==null){Zt=e;return}Zt=e=t}while(e!==null);ln===0&&(ln=5)}function Eo(t,e,n){var s=mt,r=Ds.transition;try{Ds.transition=null,mt=1,EA(t,e,n,s)}finally{Ds.transition=r,mt=s}return null}function EA(t,e,n,s){do hl();while(Di!==null);if(st&6)throw Error(se(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(se(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(lR(t,i),t===fn&&(Zt=fn=null,bn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Zd||(Zd=!0,Yj(gf,function(){return hl(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ds.transition,Ds.transition=null;var o=mt;mt=1;var a=st;st|=4,dv.current=null,kA(t,n),zj(n,t),GR(Yg),yf=!!Gg,Yg=Gg=null,t.current=n,_A(n),ZP(),st=a,mt=o,Ds.transition=i}else t.current=n;if(Zd&&(Zd=!1,Di=t,Mf=r),i=t.pendingLanes,i===0&&(Ki=null),nR(n.stateNode),rs(t,Qt()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(Of)throw Of=!1,t=mx,mx=null,t;return Mf&1&&t.tag!==0&&hl(),i=t.pendingLanes,i&1?t===gx?Jc++:(Jc=0,gx=t):Jc=0,uo(),null}function hl(){if(Di!==null){var t=C1(Mf),e=Ds.transition,n=mt;try{if(Ds.transition=null,mt=16>t?16:t,Di===null)var s=!1;else{if(t=Di,Di=null,Mf=0,st&6)throw Error(se(331));var r=st;for(st|=4,ke=t.current;ke!==null;){var i=ke,o=i.child;if(ke.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ke=u;ke!==null;){var d=ke;switch(d.tag){case 0:case 11:case 15:Qc(8,d,i)}var h=d.child;if(h!==null)h.return=d,ke=h;else for(;ke!==null;){d=ke;var f=d.sibling,p=d.return;if(Lj(d),d===u){ke=null;break}if(f!==null){f.return=p,ke=f;break}ke=p}}}var w=i.alternate;if(w!==null){var x=w.child;if(x!==null){w.child=null;do{var y=x.sibling;x.sibling=null,x=y}while(x!==null)}}ke=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ke=o;else e:for(;ke!==null;){if(i=ke,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Qc(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,ke=g;break e}ke=i.return}}var m=t.current;for(ke=m;ke!==null;){o=ke;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,ke=v;else e:for(o=m;ke!==null;){if(a=ke,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:bp(9,a)}}catch(S){Kt(a,a.return,S)}if(a===o){ke=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,ke=k;break e}ke=a.return}}if(st=r,uo(),Nr&&typeof Nr.onPostCommitFiberRoot=="function")try{Nr.onPostCommitFiberRoot(hp,t)}catch{}s=!0}return s}finally{mt=n,Ds.transition=e}}return!1}function ew(t,e,n){e=Wl(n,e),e=Cj(t,e,1),t=qi(t,e,1),e=$n(),t!==null&&(id(t,1,e),rs(t,e))}function Kt(t,e,n){if(t.tag===3)ew(t,t,n);else for(;e!==null;){if(e.tag===3){ew(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Ki===null||!Ki.has(s))){t=Wl(n,t),t=Nj(e,t,1),e=qi(e,t,1),t=$n(),e!==null&&(id(e,1,t),rs(e,t));break}}e=e.return}}function TA(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=$n(),t.pingedLanes|=t.suspendedLanes&n,fn===t&&(bn&n)===n&&(ln===4||ln===3&&(bn&130023424)===bn&&500>Qt()-fv?Qo(t,0):hv|=n),rs(t,e)}function Kj(t,e){e===0&&(t.mode&1?(e=Hd,Hd<<=1,!(Hd&130023424)&&(Hd=4194304)):e=1);var n=$n();t=si(t,e),t!==null&&(id(t,e,n),rs(t,n))}function PA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Kj(t,n)}function RA(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(se(314))}s!==null&&s.delete(e),Kj(t,n)}var Gj;Gj=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ns.current)Jn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Jn=!1,yA(t,e,n);Jn=!!(t.flags&131072)}else Jn=!1,It&&e.flags&1048576&&J1(e,jf,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Kh(t,e),t=e.pendingProps;var r=zl(e,Pn.current);dl(e,n),r=ov(null,e,s,t,r,n);var i=av();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ss(s)?(i=!0,_f(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,tv(e),r.updater=vp,e.stateNode=r,r._reactInternals=e,rx(e,s,t,n),e=ax(null,e,s,!0,i,n)):(e.tag=0,It&&i&&Gy(e),Ln(null,e,r,n),e=e.child),e;case 16:s=e.elementType;e:{switch(Kh(t,e),t=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=OA(s),t=Ks(s,t),r){case 0:e=ox(null,e,s,t,n);break e;case 1:e=Wb(null,e,s,t,n);break e;case 11:e=Ub(null,e,s,t,n);break e;case 14:e=Hb(null,e,s,Ks(s.type,t),n);break e}throw Error(se(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Ks(s,r),ox(t,e,s,r,n);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Ks(s,r),Wb(t,e,s,r,n);case 3:e:{if(Rj(e),t===null)throw Error(se(387));s=e.pendingProps,i=e.memoizedState,r=i.element,rj(t,e),Ef(e,s,null,n);var o=e.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=Wl(Error(se(423)),e),e=Vb(t,e,s,n,r);break e}else if(s!==r){r=Wl(Error(se(424)),e),e=Vb(t,e,s,n,r);break e}else for(ys=Vi(e.stateNode.containerInfo.firstChild),vs=e,It=!0,Zs=null,n=nj(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Bl(),s===r){e=ri(t,e,n);break e}Ln(t,e,s,n)}e=e.child}return e;case 5:return ij(e),t===null&&tx(e),s=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,o=r.children,Qg(s,r)?o=null:i!==null&&Qg(s,i)&&(e.flags|=32),Pj(t,e),Ln(t,e,o,n),e.child;case 6:return t===null&&tx(e),null;case 13:return Aj(t,e,n);case 4:return nv(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Ul(e,null,s,n):Ln(t,e,s,n),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Ks(s,r),Ub(t,e,s,r,n);case 7:return Ln(t,e,e.pendingProps,n),e.child;case 8:return Ln(t,e,e.pendingProps.children,n),e.child;case 12:return Ln(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,_t(Cf,s._currentValue),s._currentValue=o,i!==null)if(sr(i.value,o)){if(i.children===r.children&&!ns.current){e=ri(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===s){if(i.tag===1){l=Zr(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),nx(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(se(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),nx(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ln(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,dl(e,n),r=$s(r),s=s(r),e.flags|=1,Ln(t,e,s,n),e.child;case 14:return s=e.type,r=Ks(s,e.pendingProps),r=Ks(s.type,r),Hb(t,e,s,r,n);case 15:return Ej(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Ks(s,r),Kh(t,e),e.tag=1,ss(s)?(t=!0,_f(e)):t=!1,dl(e,n),jj(e,s,r),rx(e,s,r,n),ax(null,e,s,!0,t,n);case 19:return Oj(t,e,n);case 22:return Tj(t,e,n)}throw Error(se(156,e.tag))};function Yj(t,e){return k1(t,e)}function AA(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Os(t,e,n,s){return new AA(t,e,n,s)}function xv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function OA(t){if(typeof t=="function")return xv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Dy)return 11;if(t===Ly)return 14}return 2}function Yi(t,e){var n=t.alternate;return n===null?(n=Os(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Qh(t,e,n,s,r,i){var o=2;if(s=t,typeof t=="function")xv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ga:return Xo(n.children,r,i,e);case Iy:o=8,r|=8;break;case Eg:return t=Os(12,n,e,r|2),t.elementType=Eg,t.lanes=i,t;case Tg:return t=Os(13,n,e,r),t.elementType=Tg,t.lanes=i,t;case Pg:return t=Os(19,n,e,r),t.elementType=Pg,t.lanes=i,t;case i1:return kp(n,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case s1:o=10;break e;case r1:o=9;break e;case Dy:o=11;break e;case Ly:o=14;break e;case yi:o=16,s=null;break e}throw Error(se(130,t==null?t:typeof t,""))}return e=Os(o,n,e,r),e.elementType=t,e.type=s,e.lanes=i,e}function Xo(t,e,n,s){return t=Os(7,t,s,e),t.lanes=n,t}function kp(t,e,n,s){return t=Os(22,t,s,e),t.elementType=i1,t.lanes=n,t.stateNode={isHidden:!1},t}function Tm(t,e,n){return t=Os(6,t,null,e),t.lanes=n,t}function Pm(t,e,n){return e=Os(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function MA(t,e,n,s,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=um(0),this.expirationTimes=um(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=um(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function yv(t,e,n,s,r,i,o,a,l){return t=new MA(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Os(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},tv(i),t}function IA(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ka,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function Qj(t){if(!t)return to;t=t._reactInternals;e:{if(ma(t)!==t||t.tag!==1)throw Error(se(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ss(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(se(171))}if(t.tag===1){var n=t.type;if(ss(n))return Q1(t,n,e)}return e}function Xj(t,e,n,s,r,i,o,a,l){return t=yv(n,s,!0,t,r,i,o,a,l),t.context=Qj(null),n=t.current,s=$n(),r=Gi(n),i=Zr(s,r),i.callback=e??null,qi(n,i,r),t.current.lanes=r,id(t,r,s),rs(t,s),t}function _p(t,e,n,s){var r=e.current,i=$n(),o=Gi(r);return n=Qj(n),e.context===null?e.context=n:e.pendingContext=n,e=Zr(i,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=qi(r,e,o),t!==null&&(tr(t,r,o,i),Wh(t,r,o)),o}function Df(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function tw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function vv(t,e){tw(t,e),(t=t.alternate)&&tw(t,e)}function DA(){return null}var Jj=typeof reportError=="function"?reportError:function(t){console.error(t)};function bv(t){this._internalRoot=t}Sp.prototype.render=bv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(se(409));_p(t,e,null,null)};Sp.prototype.unmount=bv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;oa(function(){_p(null,t,null,null)}),e[ni]=null}};function Sp(t){this._internalRoot=t}Sp.prototype.unstable_scheduleHydration=function(t){if(t){var e=T1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<wi.length&&e!==0&&e<wi[n].priority;n++);wi.splice(n,0,t),n===0&&R1(t)}};function wv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function jp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function nw(){}function LA(t,e,n,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var u=Df(o);i.call(u)}}var o=Xj(e,s,t,0,null,!1,!1,"",nw);return t._reactRootContainer=o,t[ni]=o.current,pu(t.nodeType===8?t.parentNode:t),oa(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof s=="function"){var a=s;s=function(){var u=Df(l);a.call(u)}}var l=yv(t,0,!1,null,null,!1,!1,"",nw);return t._reactRootContainer=l,t[ni]=l.current,pu(t.nodeType===8?t.parentNode:t),oa(function(){_p(e,l,n,s)}),l}function Cp(t,e,n,s,r){var i=n._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var a=r;r=function(){var l=Df(o);a.call(l)}}_p(e,o,t,r)}else o=LA(n,e,t,r,s);return Df(o)}N1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Oc(e.pendingLanes);n!==0&&(zy(e,n|1),rs(e,Qt()),!(st&6)&&(Vl=Qt()+500,uo()))}break;case 13:oa(function(){var s=si(t,1);if(s!==null){var r=$n();tr(s,t,1,r)}}),vv(t,1)}};By=function(t){if(t.tag===13){var e=si(t,134217728);if(e!==null){var n=$n();tr(e,t,134217728,n)}vv(t,134217728)}};E1=function(t){if(t.tag===13){var e=Gi(t),n=si(t,e);if(n!==null){var s=$n();tr(n,t,e,s)}vv(t,e)}};T1=function(){return mt};P1=function(t,e){var n=mt;try{return mt=t,e()}finally{mt=n}};zg=function(t,e,n){switch(e){case"input":if(Og(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var r=gp(s);if(!r)throw Error(se(90));a1(s),Og(s,r)}}}break;case"textarea":c1(t,n);break;case"select":e=n.value,e!=null&&al(t,!!n.multiple,e,!1)}};g1=pv;x1=oa;var $A={usingClientEntryPoint:!1,Events:[ad,Ja,gp,p1,m1,pv]},bc={findFiberByHostInstance:Mo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},FA={bundleType:bc.bundleType,version:bc.version,rendererPackageName:bc.rendererPackageName,rendererConfig:bc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ci.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=b1(t),t===null?null:t.stateNode},findFiberByHostInstance:bc.findFiberByHostInstance||DA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eh.isDisabled&&eh.supportsFiber)try{hp=eh.inject(FA),Nr=eh}catch{}}Ss.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$A;Ss.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wv(e))throw Error(se(200));return IA(t,e,null,n)};Ss.createRoot=function(t,e){if(!wv(t))throw Error(se(299));var n=!1,s="",r=Jj;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=yv(t,1,!1,null,null,n,!1,s,r),t[ni]=e.current,pu(t.nodeType===8?t.parentNode:t),new bv(e)};Ss.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(se(188)):(t=Object.keys(t).join(","),Error(se(268,t)));return t=b1(e),t=t===null?null:t.stateNode,t};Ss.flushSync=function(t){return oa(t)};Ss.hydrate=function(t,e,n){if(!jp(e))throw Error(se(200));return Cp(null,t,e,!0,n)};Ss.hydrateRoot=function(t,e,n){if(!wv(t))throw Error(se(405));var s=n!=null&&n.hydratedSources||null,r=!1,i="",o=Jj;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Xj(e,null,t,1,n??null,r,!1,i,o),t[ni]=e.current,pu(t),s)for(t=0;t<s.length;t++)n=s[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Sp(e)};Ss.render=function(t,e,n){if(!jp(e))throw Error(se(200));return Cp(null,t,e,!1,n)};Ss.unmountComponentAtNode=function(t){if(!jp(t))throw Error(se(40));return t._reactRootContainer?(oa(function(){Cp(null,null,t,!1,function(){t._reactRootContainer=null,t[ni]=null})}),!0):!1};Ss.unstable_batchedUpdates=pv;Ss.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!jp(n))throw Error(se(200));if(t==null||t._reactInternals===void 0)throw Error(se(38));return Cp(t,e,n,!1,s)};Ss.version="18.3.1-next-f1338f8080-20240426";function Zj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Zj)}catch(t){console.error(t)}}Zj(),ZS.exports=Ss;var cd=ZS.exports;const eC=BS(cd);var sw=cd;Cg.createRoot=sw.createRoot,Cg.hydrateRoot=sw.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _u(){return _u=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},_u.apply(this,arguments)}var Li;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Li||(Li={}));const rw="popstate";function zA(t){t===void 0&&(t={});function e(s,r){let{pathname:i,search:o,hash:a}=s.location;return vx("",{pathname:i,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:tC(r)}return UA(e,n,null,t)}function sn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function kv(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function BA(){return Math.random().toString(36).substr(2,8)}function iw(t,e){return{usr:t.state,key:t.key,idx:e}}function vx(t,e,n,s){return n===void 0&&(n=null),_u({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Xl(e):e,{state:n,key:e&&e.key||s||BA()})}function tC(t){let{pathname:e="/",search:n="",hash:s=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Xl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function UA(t,e,n,s){s===void 0&&(s={});let{window:r=document.defaultView,v5Compat:i=!1}=s,o=r.history,a=Li.Pop,l=null,u=d();u==null&&(u=0,o.replaceState(_u({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Li.Pop;let y=d(),g=y==null?null:y-u;u=y,l&&l({action:a,location:x.location,delta:g})}function f(y,g){a=Li.Push;let m=vx(x.location,y,g);u=d()+1;let v=iw(m,u),k=x.createHref(m);try{o.pushState(v,"",k)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;r.location.assign(k)}i&&l&&l({action:a,location:x.location,delta:1})}function p(y,g){a=Li.Replace;let m=vx(x.location,y,g);u=d();let v=iw(m,u),k=x.createHref(m);o.replaceState(v,"",k),i&&l&&l({action:a,location:x.location,delta:0})}function w(y){let g=r.location.origin!=="null"?r.location.origin:r.location.href,m=typeof y=="string"?y:tC(y);return m=m.replace(/ $/,"%20"),sn(g,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,g)}let x={get action(){return a},get location(){return t(r,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(rw,h),l=y,()=>{r.removeEventListener(rw,h),l=null}},createHref(y){return e(r,y)},createURL:w,encodeLocation(y){let g=w(y);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:p,go(y){return o.go(y)}};return x}var ow;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ow||(ow={}));function HA(t,e,n){return n===void 0&&(n="/"),WA(t,e,n)}function WA(t,e,n,s){let r=typeof e=="string"?Xl(e):e,i=rC(r.pathname||"/",n);if(i==null)return null;let o=nC(t);VA(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=sO(i);a=eO(o[l],u)}return a}function nC(t,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let r=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(sn(l.relativePath.startsWith(s),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(s.length));let u=Jo([s,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(sn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),nC(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:JA(u,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))r(i,o);else for(let l of sC(i.path))r(i,o,l)}),e}function sC(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let o=sC(s.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function VA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:ZA(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const qA=/^:[\w-]+$/,KA=3,GA=2,YA=1,QA=10,XA=-2,aw=t=>t==="*";function JA(t,e){let n=t.split("/"),s=n.length;return n.some(aw)&&(s+=XA),e&&(s+=GA),n.filter(r=>!aw(r)).reduce((r,i)=>r+(qA.test(i)?KA:i===""?YA:QA),s)}function ZA(t,e){return t.length===e.length&&t.slice(0,-1).every((s,r)=>s===e[r])?t[t.length-1]-e[e.length-1]:0}function eO(t,e,n){let{routesMeta:s}=t,r={},i="/",o=[];for(let a=0;a<s.length;++a){let l=s[a],u=a===s.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=tO({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),f=l.route;if(!h)return null;Object.assign(r,h.params),o.push({params:r,pathname:Jo([i,h.pathname]),pathnameBase:lO(Jo([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Jo([i,h.pathnameBase]))}return o}function tO(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=nO(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:s.reduce((u,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let x=a[h]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const w=a[h];return p&&!w?u[f]=void 0:u[f]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function nO(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),kv(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(s.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function sO(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return kv(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function rC(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}const rO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,iO=t=>rO.test(t);function oO(t,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:r=""}=typeof t=="string"?Xl(t):t,i;if(n)if(iO(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),kv(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=lw(n.substring(1),"/"):i=lw(n,e)}else i=e;return{pathname:i,search:cO(s),hash:uO(r)}}function lw(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Rm(t,e,n,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function aO(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function iC(t,e){let n=aO(t);return e?n.map((s,r)=>r===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function oC(t,e,n,s){s===void 0&&(s=!1);let r;typeof t=="string"?r=Xl(t):(r=_u({},t),sn(!r.pathname||!r.pathname.includes("?"),Rm("?","pathname","search",r)),sn(!r.pathname||!r.pathname.includes("#"),Rm("#","pathname","hash",r)),sn(!r.search||!r.search.includes("#"),Rm("#","search","hash",r)));let i=t===""||r.pathname==="",o=i?"/":r.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!s&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;r.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=oO(r,a),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const Jo=t=>t.join("/").replace(/\/\/+/g,"/"),lO=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),cO=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,uO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function dO(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const aC=["post","put","patch","delete"];new Set(aC);const hO=["get",...aC];new Set(hO);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Su(){return Su=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Su.apply(this,arguments)}const _v=b.createContext(null),fO=b.createContext(null),ud=b.createContext(null),Np=b.createContext(null),ho=b.createContext({outlet:null,matches:[],isDataRoute:!1}),lC=b.createContext(null);function dd(){return b.useContext(Np)!=null}function Jl(){return dd()||sn(!1),b.useContext(Np).location}function cC(t){b.useContext(ud).static||b.useLayoutEffect(t)}function hd(){let{isDataRoute:t}=b.useContext(ho);return t?EO():pO()}function pO(){dd()||sn(!1);let t=b.useContext(_v),{basename:e,future:n,navigator:s}=b.useContext(ud),{matches:r}=b.useContext(ho),{pathname:i}=Jl(),o=JSON.stringify(iC(r,n.v7_relativeSplatPath)),a=b.useRef(!1);return cC(()=>{a.current=!0}),b.useCallback(function(u,d){if(d===void 0&&(d={}),!a.current)return;if(typeof u=="number"){s.go(u);return}let h=oC(u,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Jo([e,h.pathname])),(d.replace?s.replace:s.push)(h,d.state,d)},[e,s,o,i,t])}const mO=b.createContext(null);function gO(t){let e=b.useContext(ho).outlet;return e&&b.createElement(mO.Provider,{value:t},e)}function xO(t,e){return yO(t,e)}function yO(t,e,n,s){dd()||sn(!1);let{navigator:r}=b.useContext(ud),{matches:i}=b.useContext(ho),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Jl(),d;if(e){var h;let y=typeof e=="string"?Xl(e):e;l==="/"||(h=y.pathname)!=null&&h.startsWith(l)||sn(!1),d=y}else d=u;let f=d.pathname||"/",p=f;if(l!=="/"){let y=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let w=HA(t,{pathname:p}),x=_O(w&&w.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:Jo([l,r.encodeLocation?r.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:Jo([l,r.encodeLocation?r.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,s);return e&&x?b.createElement(Np.Provider,{value:{location:Su({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Li.Pop}},x):x}function vO(){let t=NO(),e=dO(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:r},n):null,null)}const bO=b.createElement(vO,null);class wO extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(ho.Provider,{value:this.props.routeContext},b.createElement(lC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function kO(t){let{routeContext:e,match:n,children:s}=t,r=b.useContext(_v);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(ho.Provider,{value:e},s)}function _O(t,e,n,s){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=s)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||sn(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,u=-1;if(n&&s&&s.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:p}=n,w=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||w){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,w=!1,x=null,y=null;n&&(p=a&&h.route.id?a[h.route.id]:void 0,x=h.route.errorElement||bO,l&&(u<0&&f===0?(TO("route-fallback"),w=!0,y=null):u===f&&(w=!0,y=h.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,f+1)),m=()=>{let v;return p?v=x:w?v=y:h.route.Component?v=b.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=d,b.createElement(kO,{match:h,routeContext:{outlet:d,matches:g,isDataRoute:n!=null},children:v})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?b.createElement(wO,{location:n.location,revalidation:n.revalidation,component:x,error:p,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var uC=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(uC||{}),dC=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(dC||{});function SO(t){let e=b.useContext(_v);return e||sn(!1),e}function jO(t){let e=b.useContext(fO);return e||sn(!1),e}function CO(t){let e=b.useContext(ho);return e||sn(!1),e}function hC(t){let e=CO(),n=e.matches[e.matches.length-1];return n.route.id||sn(!1),n.route.id}function NO(){var t;let e=b.useContext(lC),n=jO(),s=hC();return e!==void 0?e:(t=n.errors)==null?void 0:t[s]}function EO(){let{router:t}=SO(uC.UseNavigateStable),e=hC(dC.UseNavigateStable),n=b.useRef(!1);return cC(()=>{n.current=!0}),b.useCallback(function(r,i){i===void 0&&(i={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Su({fromRouteId:e},i)))},[t,e])}const cw={};function TO(t,e,n){cw[t]||(cw[t]=!0)}function PO(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Xh(t){let{to:e,replace:n,state:s,relative:r}=t;dd()||sn(!1);let{future:i,static:o}=b.useContext(ud),{matches:a}=b.useContext(ho),{pathname:l}=Jl(),u=hd(),d=oC(e,iC(a,i.v7_relativeSplatPath),l,r==="path"),h=JSON.stringify(d);return b.useEffect(()=>u(JSON.parse(h),{replace:n,state:s,relative:r}),[u,h,r,n,s]),null}function RO(t){return gO(t.context)}function On(t){sn(!1)}function AO(t){let{basename:e="/",children:n=null,location:s,navigationType:r=Li.Pop,navigator:i,static:o=!1,future:a}=t;dd()&&sn(!1);let l=e.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:l,navigator:i,static:o,future:Su({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof s=="string"&&(s=Xl(s));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:w="default"}=s,x=b.useMemo(()=>{let y=rC(d,l);return y==null?null:{location:{pathname:y,search:h,hash:f,state:p,key:w},navigationType:r}},[l,d,h,f,p,w,r]);return x==null?null:b.createElement(ud.Provider,{value:u},b.createElement(Np.Provider,{children:n,value:x}))}function OO(t){let{children:e,location:n}=t;return xO(bx(e),n)}new Promise(()=>{});function bx(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(s,r)=>{if(!b.isValidElement(s))return;let i=[...e,r];if(s.type===b.Fragment){n.push.apply(n,bx(s.props.children,i));return}s.type!==On&&sn(!1),!s.props.index||!s.props.children||sn(!1);let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=bx(s.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const MO="6";try{window.__reactRouterVersion=MO}catch{}const IO="startTransition",uw=dp[IO];function DO(t){let{basename:e,children:n,future:s,window:r}=t,i=b.useRef();i.current==null&&(i.current=zA({window:r,v5Compat:!0}));let o=i.current,[a,l]=b.useState({action:o.action,location:o.location}),{v7_startTransition:u}=s||{},d=b.useCallback(h=>{u&&uw?uw(()=>l(h)):l(h)},[l,u]);return b.useLayoutEffect(()=>o.listen(d),[o,d]),b.useEffect(()=>PO(s),[s]),b.createElement(AO,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:s})}var dw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(dw||(dw={}));var hw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(hw||(hw={}));var Lf=["light","dark"],Sv="(prefers-color-scheme: dark)",LO=typeof window>"u",jv=b.createContext(void 0),$O={setTheme:t=>{},themes:[]},FO=()=>{var t;return(t=b.useContext(jv))!=null?t:$O},zO=t=>b.useContext(jv)?t.children:b.createElement(UO,{...t}),BO=["light","dark"],UO=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:s=!0,storageKey:r="theme",themes:i=BO,defaultTheme:o=n?"system":"light",attribute:a="data-theme",value:l,children:u,nonce:d})=>{let[h,f]=b.useState(()=>fw(r,o)),[p,w]=b.useState(()=>fw(r)),x=l?Object.values(l):i,y=b.useCallback(k=>{let S=k;if(!S)return;k==="system"&&n&&(S=pw());let C=l?l[S]:S,_=e?WO():null,j=document.documentElement;if(a==="class"?(j.classList.remove(...x),C&&j.classList.add(C)):C?j.setAttribute(a,C):j.removeAttribute(a),s){let N=Lf.includes(o)?o:null,P=Lf.includes(S)?S:N;j.style.colorScheme=P}_==null||_()},[]),g=b.useCallback(k=>{let S=typeof k=="function"?k(k):k;f(S);try{localStorage.setItem(r,S)}catch{}},[t]),m=b.useCallback(k=>{let S=pw(k);w(S),h==="system"&&n&&!t&&y("system")},[h,t]);b.useEffect(()=>{let k=window.matchMedia(Sv);return k.addListener(m),m(k),()=>k.removeListener(m)},[m]),b.useEffect(()=>{let k=S=>{if(S.key!==r)return;let C=S.newValue||o;g(C)};return window.addEventListener("storage",k),()=>window.removeEventListener("storage",k)},[g]),b.useEffect(()=>{y(t??h)},[t,h]);let v=b.useMemo(()=>({theme:h,setTheme:g,forcedTheme:t,resolvedTheme:h==="system"?p:h,themes:n?[...i,"system"]:i,systemTheme:n?p:void 0}),[h,g,t,p,n,i]);return b.createElement(jv.Provider,{value:v},b.createElement(HO,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:s,storageKey:r,themes:i,defaultTheme:o,attribute:a,value:l,children:u,attrs:x,nonce:d}),u)},HO=b.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:s,enableColorScheme:r,defaultTheme:i,value:o,attrs:a,nonce:l})=>{let u=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(w=>`'${w}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=r?Lf.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(w,x=!1,y=!0)=>{let g=o?o[w]:w,m=x?w+"|| ''":`'${g}'`,v="";return r&&y&&!x&&Lf.includes(w)&&(v+=`d.style.colorScheme = '${w}';`),n==="class"?x||g?v+=`c.add(${m})`:v+="null":g&&(v+=`d[s](n,${m})`),v},p=t?`!function(){${d}${f(t)}}()`:s?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${Sv}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${u?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return b.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:p}})}),fw=(t,e)=>{if(LO)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},WO=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},pw=t=>(t||(t=window.matchMedia(Sv)),t.matches?"dark":"light"),ga=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},VO={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},ji,Ny,TS,qO=(TS=class{constructor(){we(this,ji,VO);we(this,Ny,!1)}setTimeoutProvider(t){ue(this,ji,t)}setTimeout(t,e){return O(this,ji).setTimeout(t,e)}clearTimeout(t){O(this,ji).clearTimeout(t)}setInterval(t,e){return O(this,ji).setInterval(t,e)}clearInterval(t){O(this,ji).clearInterval(t)}},ji=new WeakMap,Ny=new WeakMap,TS),Lo=new qO;function KO(t){setTimeout(t,0)}var aa=typeof window>"u"||"Deno"in globalThis;function jn(){}function GO(t,e){return typeof t=="function"?t(e):t}function wx(t){return typeof t=="number"&&t>=0&&t!==1/0}function fC(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Qi(t,e){return typeof t=="function"?t(e):t}function Ps(t,e){return typeof t=="function"?t(e):t}function mw(t,e){const{type:n="all",exact:s,fetchStatus:r,predicate:i,queryKey:o,stale:a}=t;if(o){if(s){if(e.queryHash!==Cv(o,e.options))return!1}else if(!ju(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||r&&r!==e.state.fetchStatus||i&&!i(e))}function gw(t,e){const{exact:n,status:s,predicate:r,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(la(e.options.mutationKey)!==la(i))return!1}else if(!ju(e.options.mutationKey,i))return!1}return!(s&&e.state.status!==s||r&&!r(e))}function Cv(t,e){return((e==null?void 0:e.queryKeyHashFn)||la)(t)}function la(t){return JSON.stringify(t,(e,n)=>kx(n)?Object.keys(n).sort().reduce((s,r)=>(s[r]=n[r],s),{}):n)}function ju(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>ju(t[n],e[n])):!1}var YO=Object.prototype.hasOwnProperty;function Nv(t,e){if(t===e)return t;const n=xw(t)&&xw(e);if(!n&&!(kx(t)&&kx(e)))return e;const r=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),o=i.length,a=n?new Array(o):{};let l=0;for(let u=0;u<o;u++){const d=n?u:i[u],h=t[d],f=e[d];if(h===f){a[d]=h,(n?u<r:YO.call(t,d))&&l++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){a[d]=f;continue}const p=Nv(h,f);a[d]=p,p===h&&l++}return r===o&&l===r?t:a}function Cu(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function xw(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function kx(t){if(!yw(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!yw(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function yw(t){return Object.prototype.toString.call(t)==="[object Object]"}function QO(t){return new Promise(e=>{Lo.setTimeout(e,t)})}function _x(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?Nv(t,e):e}function XO(t,e,n=0){const s=[...t,e];return n&&s.length>n?s.slice(1):s}function JO(t,e,n=0){const s=[e,...t];return n&&s.length>n?s.slice(0,-1):s}var Ev=Symbol();function pC(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Ev?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function mC(t,e){return typeof t=="function"?t(...e):!!t}var Bo,Ci,Sl,PS,ZO=(PS=class extends ga{constructor(){super();we(this,Bo);we(this,Ci);we(this,Sl);ue(this,Sl,e=>{if(!aa&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){O(this,Ci)||this.setEventListener(O(this,Sl))}onUnsubscribe(){var e;this.hasListeners()||((e=O(this,Ci))==null||e.call(this),ue(this,Ci,void 0))}setEventListener(e){var n;ue(this,Sl,e),(n=O(this,Ci))==null||n.call(this),ue(this,Ci,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){O(this,Bo)!==e&&(ue(this,Bo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof O(this,Bo)=="boolean"?O(this,Bo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Bo=new WeakMap,Ci=new WeakMap,Sl=new WeakMap,PS),Tv=new ZO;function Sx(){let t,e;const n=new Promise((r,i)=>{t=r,e=i});n.status="pending",n.catch(()=>{});function s(r){Object.assign(n,r),delete n.resolve,delete n.reject}return n.resolve=r=>{s({status:"fulfilled",value:r}),t(r)},n.reject=r=>{s({status:"rejected",reason:r}),e(r)},n}var eM=KO;function tM(){let t=[],e=0,n=a=>{a()},s=a=>{a()},r=eM;const i=a=>{e?t.push(a):r(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&r(()=>{s(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{s=a},setScheduler:a=>{r=a}}}var Gt=tM(),jl,Ni,Cl,RS,nM=(RS=class extends ga{constructor(){super();we(this,jl,!0);we(this,Ni);we(this,Cl);ue(this,Cl,e=>{if(!aa&&window.addEventListener){const n=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}}})}onSubscribe(){O(this,Ni)||this.setEventListener(O(this,Cl))}onUnsubscribe(){var e;this.hasListeners()||((e=O(this,Ni))==null||e.call(this),ue(this,Ni,void 0))}setEventListener(e){var n;ue(this,Cl,e),(n=O(this,Ni))==null||n.call(this),ue(this,Ni,e(this.setOnline.bind(this)))}setOnline(e){O(this,jl)!==e&&(ue(this,jl,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return O(this,jl)}},jl=new WeakMap,Ni=new WeakMap,Cl=new WeakMap,RS),$f=new nM;function sM(t){return Math.min(1e3*2**t,3e4)}function gC(t){return(t??"online")==="online"?$f.isOnline():!0}var jx=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function xC(t){let e=!1,n=0,s;const r=Sx(),i=()=>r.status!=="pending",o=x=>{var y;if(!i()){const g=new jx(x);f(g),(y=t.onCancel)==null||y.call(t,g)}},a=()=>{e=!0},l=()=>{e=!1},u=()=>Tv.isFocused()&&(t.networkMode==="always"||$f.isOnline())&&t.canRun(),d=()=>gC(t.networkMode)&&t.canRun(),h=x=>{i()||(s==null||s(),r.resolve(x))},f=x=>{i()||(s==null||s(),r.reject(x))},p=()=>new Promise(x=>{var y;s=g=>{(i()||u())&&x(g)},(y=t.onPause)==null||y.call(t)}).then(()=>{var x;s=void 0,i()||(x=t.onContinue)==null||x.call(t)}),w=()=>{if(i())return;let x;const y=n===0?t.initialPromise:void 0;try{x=y??t.fn()}catch(g){x=Promise.reject(g)}Promise.resolve(x).then(h).catch(g=>{var C;if(i())return;const m=t.retry??(aa?0:3),v=t.retryDelay??sM,k=typeof v=="function"?v(n,g):v,S=m===!0||typeof m=="number"&&n<m||typeof m=="function"&&m(n,g);if(e||!S){f(g);return}n++,(C=t.onFail)==null||C.call(t,n,g),QO(k).then(()=>u()?void 0:p()).then(()=>{e?f(g):w()})})};return{promise:r,status:()=>r.status,cancel:o,continue:()=>(s==null||s(),r),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?w():p().then(w),r)}}var Uo,AS,yC=(AS=class{constructor(){we(this,Uo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),wx(this.gcTime)&&ue(this,Uo,Lo.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(aa?1/0:5*60*1e3))}clearGcTimeout(){O(this,Uo)&&(Lo.clearTimeout(O(this,Uo)),ue(this,Uo,void 0))}},Uo=new WeakMap,AS),Ho,Nl,Es,Wo,un,Qu,Vo,Ys,$r,OS,rM=(OS=class extends yC{constructor(e){super();we(this,Ys);we(this,Ho);we(this,Nl);we(this,Es);we(this,Wo);we(this,un);we(this,Qu);we(this,Vo);ue(this,Vo,!1),ue(this,Qu,e.defaultOptions),this.setOptions(e.options),this.observers=[],ue(this,Wo,e.client),ue(this,Es,O(this,Wo).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,ue(this,Ho,bw(this.options)),this.state=e.state??O(this,Ho),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=O(this,un))==null?void 0:e.promise}setOptions(e){if(this.options={...O(this,Qu),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=bw(this.options);n.data!==void 0&&(this.setState(vw(n.data,n.dataUpdatedAt)),ue(this,Ho,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&O(this,Es).remove(this)}setData(e,n){const s=_x(this.state.data,e,this.options);return Fe(this,Ys,$r).call(this,{data:s,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(e,n){Fe(this,Ys,$r).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var s,r;const n=(s=O(this,un))==null?void 0:s.promise;return(r=O(this,un))==null||r.cancel(e),n?n.then(jn).catch(jn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(O(this,Ho))}isActive(){return this.observers.some(e=>Ps(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ev||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Qi(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!fC(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=O(this,un))==null||n.continue()}onOnline(){var n;const e=this.observers.find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=O(this,un))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),O(this,Es).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(O(this,un)&&(O(this,Vo)?O(this,un).cancel({revert:!0}):O(this,un).cancelRetry()),this.scheduleGc()),O(this,Es).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Fe(this,Ys,$r).call(this,{type:"invalidate"})}async fetch(e,n){var l,u,d,h,f,p,w,x,y,g,m,v;if(this.state.fetchStatus!=="idle"&&((l=O(this,un))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(O(this,un))return O(this,un).continueRetry(),O(this,un).promise}if(e&&this.setOptions(e),!this.options.queryFn){const k=this.observers.find(S=>S.options.queryFn);k&&this.setOptions(k.options)}const s=new AbortController,r=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(ue(this,Vo,!0),s.signal)})},i=()=>{const k=pC(this.options,n),C=(()=>{const _={client:O(this,Wo),queryKey:this.queryKey,meta:this.meta};return r(_),_})();return ue(this,Vo,!1),this.options.persister?this.options.persister(k,C,this):k(C)},a=(()=>{const k={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:O(this,Wo),state:this.state,fetchFn:i};return r(k),k})();(u=this.options.behavior)==null||u.onFetch(a,this),ue(this,Nl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=a.fetchOptions)==null?void 0:d.meta))&&Fe(this,Ys,$r).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta}),ue(this,un,xC({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,onCancel:k=>{k instanceof jx&&k.revert&&this.setState({...O(this,Nl),fetchStatus:"idle"}),s.abort()},onFail:(k,S)=>{Fe(this,Ys,$r).call(this,{type:"failed",failureCount:k,error:S})},onPause:()=>{Fe(this,Ys,$r).call(this,{type:"pause"})},onContinue:()=>{Fe(this,Ys,$r).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const k=await O(this,un).start();if(k===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(k),(p=(f=O(this,Es).config).onSuccess)==null||p.call(f,k,this),(x=(w=O(this,Es).config).onSettled)==null||x.call(w,k,this.state.error,this),k}catch(k){if(k instanceof jx){if(k.silent)return O(this,un).promise;if(k.revert){if(this.state.data===void 0)throw k;return this.state.data}}throw Fe(this,Ys,$r).call(this,{type:"error",error:k}),(g=(y=O(this,Es).config).onError)==null||g.call(y,k,this),(v=(m=O(this,Es).config).onSettled)==null||v.call(m,this.state.data,k,this),k}finally{this.scheduleGc()}}},Ho=new WeakMap,Nl=new WeakMap,Es=new WeakMap,Wo=new WeakMap,un=new WeakMap,Qu=new WeakMap,Vo=new WeakMap,Ys=new WeakSet,$r=function(e){const n=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...vC(s.data,this.options),fetchMeta:e.meta??null};case"success":const r={...s,...vw(e.data,e.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ue(this,Nl,e.manual?r:void 0),r;case"error":const i=e.error;return{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=n(this.state),Gt.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),O(this,Es).notify({query:this,type:"updated",action:e})})},OS);function vC(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:gC(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function vw(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function bw(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,s=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Gn,Je,Xu,Mn,qo,El,Vr,Ei,Ju,Tl,Pl,Ko,Go,Ti,Rl,dt,Ic,Cx,Nx,Ex,Tx,Px,Rx,Ax,bC,MS,Pv=(MS=class extends ga{constructor(e,n){super();we(this,dt);we(this,Gn);we(this,Je);we(this,Xu);we(this,Mn);we(this,qo);we(this,El);we(this,Vr);we(this,Ei);we(this,Ju);we(this,Tl);we(this,Pl);we(this,Ko);we(this,Go);we(this,Ti);we(this,Rl,new Set);this.options=n,ue(this,Gn,e),ue(this,Ei,null),ue(this,Vr,Sx()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(O(this,Je).addObserver(this),ww(O(this,Je),this.options)?Fe(this,dt,Ic).call(this):this.updateResult(),Fe(this,dt,Tx).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ox(O(this,Je),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ox(O(this,Je),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Fe(this,dt,Px).call(this),Fe(this,dt,Rx).call(this),O(this,Je).removeObserver(this)}setOptions(e){const n=this.options,s=O(this,Je);if(this.options=O(this,Gn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ps(this.options.enabled,O(this,Je))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Fe(this,dt,Ax).call(this),O(this,Je).setOptions(this.options),n._defaulted&&!Cu(this.options,n)&&O(this,Gn).getQueryCache().notify({type:"observerOptionsUpdated",query:O(this,Je),observer:this});const r=this.hasListeners();r&&kw(O(this,Je),s,this.options,n)&&Fe(this,dt,Ic).call(this),this.updateResult(),r&&(O(this,Je)!==s||Ps(this.options.enabled,O(this,Je))!==Ps(n.enabled,O(this,Je))||Qi(this.options.staleTime,O(this,Je))!==Qi(n.staleTime,O(this,Je)))&&Fe(this,dt,Cx).call(this);const i=Fe(this,dt,Nx).call(this);r&&(O(this,Je)!==s||Ps(this.options.enabled,O(this,Je))!==Ps(n.enabled,O(this,Je))||i!==O(this,Ti))&&Fe(this,dt,Ex).call(this,i)}getOptimisticResult(e){const n=O(this,Gn).getQueryCache().build(O(this,Gn),e),s=this.createResult(n,e);return oM(this,s)&&(ue(this,Mn,s),ue(this,El,this.options),ue(this,qo,O(this,Je).state)),s}getCurrentResult(){return O(this,Mn)}trackResult(e,n){return new Proxy(e,{get:(s,r)=>(this.trackProp(r),n==null||n(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&O(this,Vr).status==="pending"&&O(this,Vr).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(s,r))})}trackProp(e){O(this,Rl).add(e)}getCurrentQuery(){return O(this,Je)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=O(this,Gn).defaultQueryOptions(e),s=O(this,Gn).getQueryCache().build(O(this,Gn),n);return s.fetch().then(()=>this.createResult(s,n))}fetch(e){return Fe(this,dt,Ic).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),O(this,Mn)))}createResult(e,n){var N;const s=O(this,Je),r=this.options,i=O(this,Mn),o=O(this,qo),a=O(this,El),u=e!==s?e.state:O(this,Xu),{state:d}=e;let h={...d},f=!1,p;if(n._optimisticResults){const P=this.hasListeners(),D=!P&&ww(e,n),M=P&&kw(e,s,n,r);(D||M)&&(h={...h,...vC(d.data,e.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:w,errorUpdatedAt:x,status:y}=h;p=h.data;let g=!1;if(n.placeholderData!==void 0&&p===void 0&&y==="pending"){let P;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(P=i.data,g=!0):P=typeof n.placeholderData=="function"?n.placeholderData((N=O(this,Pl))==null?void 0:N.state.data,O(this,Pl)):n.placeholderData,P!==void 0&&(y="success",p=_x(i==null?void 0:i.data,P,n),f=!0)}if(n.select&&p!==void 0&&!g)if(i&&p===(o==null?void 0:o.data)&&n.select===O(this,Ju))p=O(this,Tl);else try{ue(this,Ju,n.select),p=n.select(p),p=_x(i==null?void 0:i.data,p,n),ue(this,Tl,p),ue(this,Ei,null)}catch(P){ue(this,Ei,P)}O(this,Ei)&&(w=O(this,Ei),p=O(this,Tl),x=Date.now(),y="error");const m=h.fetchStatus==="fetching",v=y==="pending",k=y==="error",S=v&&m,C=p!==void 0,j={status:y,fetchStatus:h.fetchStatus,isPending:v,isSuccess:y==="success",isError:k,isInitialLoading:S,isLoading:S,data:p,dataUpdatedAt:h.dataUpdatedAt,error:w,errorUpdatedAt:x,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:m,isRefetching:m&&!v,isLoadingError:k&&!C,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:k&&C,isStale:Rv(e,n),refetch:this.refetch,promise:O(this,Vr),isEnabled:Ps(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const P=I=>{j.status==="error"?I.reject(j.error):j.data!==void 0&&I.resolve(j.data)},D=()=>{const I=ue(this,Vr,j.promise=Sx());P(I)},M=O(this,Vr);switch(M.status){case"pending":e.queryHash===s.queryHash&&P(M);break;case"fulfilled":(j.status==="error"||j.data!==M.value)&&D();break;case"rejected":(j.status!=="error"||j.error!==M.reason)&&D();break}}return j}updateResult(){const e=O(this,Mn),n=this.createResult(O(this,Je),this.options);if(ue(this,qo,O(this,Je).state),ue(this,El,this.options),O(this,qo).data!==void 0&&ue(this,Pl,O(this,Je)),Cu(n,e))return;ue(this,Mn,n);const s=()=>{if(!e)return!0;const{notifyOnChangeProps:r}=this.options,i=typeof r=="function"?r():r;if(i==="all"||!i&&!O(this,Rl).size)return!0;const o=new Set(i??O(this,Rl));return this.options.throwOnError&&o.add("error"),Object.keys(O(this,Mn)).some(a=>{const l=a;return O(this,Mn)[l]!==e[l]&&o.has(l)})};Fe(this,dt,bC).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Fe(this,dt,Tx).call(this)}},Gn=new WeakMap,Je=new WeakMap,Xu=new WeakMap,Mn=new WeakMap,qo=new WeakMap,El=new WeakMap,Vr=new WeakMap,Ei=new WeakMap,Ju=new WeakMap,Tl=new WeakMap,Pl=new WeakMap,Ko=new WeakMap,Go=new WeakMap,Ti=new WeakMap,Rl=new WeakMap,dt=new WeakSet,Ic=function(e){Fe(this,dt,Ax).call(this);let n=O(this,Je).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(jn)),n},Cx=function(){Fe(this,dt,Px).call(this);const e=Qi(this.options.staleTime,O(this,Je));if(aa||O(this,Mn).isStale||!wx(e))return;const s=fC(O(this,Mn).dataUpdatedAt,e)+1;ue(this,Ko,Lo.setTimeout(()=>{O(this,Mn).isStale||this.updateResult()},s))},Nx=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(O(this,Je)):this.options.refetchInterval)??!1},Ex=function(e){Fe(this,dt,Rx).call(this),ue(this,Ti,e),!(aa||Ps(this.options.enabled,O(this,Je))===!1||!wx(O(this,Ti))||O(this,Ti)===0)&&ue(this,Go,Lo.setInterval(()=>{(this.options.refetchIntervalInBackground||Tv.isFocused())&&Fe(this,dt,Ic).call(this)},O(this,Ti)))},Tx=function(){Fe(this,dt,Cx).call(this),Fe(this,dt,Ex).call(this,Fe(this,dt,Nx).call(this))},Px=function(){O(this,Ko)&&(Lo.clearTimeout(O(this,Ko)),ue(this,Ko,void 0))},Rx=function(){O(this,Go)&&(Lo.clearInterval(O(this,Go)),ue(this,Go,void 0))},Ax=function(){const e=O(this,Gn).getQueryCache().build(O(this,Gn),this.options);if(e===O(this,Je))return;const n=O(this,Je);ue(this,Je,e),ue(this,Xu,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},bC=function(e){Gt.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(O(this,Mn))}),O(this,Gn).getQueryCache().notify({query:O(this,Je),type:"observerResultsUpdated"})})},MS);function iM(t,e){return Ps(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function ww(t,e){return iM(t,e)||t.state.data!==void 0&&Ox(t,e,e.refetchOnMount)}function Ox(t,e,n){if(Ps(e.enabled,t)!==!1&&Qi(e.staleTime,t)!=="static"){const s=typeof n=="function"?n(t):n;return s==="always"||s!==!1&&Rv(t,e)}return!1}function kw(t,e,n,s){return(t!==e||Ps(s.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Rv(t,n)}function Rv(t,e){return Ps(e.enabled,t)!==!1&&t.isStaleByTime(Qi(e.staleTime,t))}function oM(t,e){return!Cu(t.getCurrentResult(),e)}function _w(t){return{onFetch:(e,n)=>{var d,h,f,p,w;const s=e.options,r=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((p=e.state.data)==null?void 0:p.pages)||[],o=((w=e.state.data)==null?void 0:w.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let x=!1;const y=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?x=!0:e.signal.addEventListener("abort",()=>{x=!0}),e.signal)})},g=pC(e.options,e.fetchOptions),m=async(v,k,S)=>{if(x)return Promise.reject();if(k==null&&v.pages.length)return Promise.resolve(v);const _=(()=>{const D={client:e.client,queryKey:e.queryKey,pageParam:k,direction:S?"backward":"forward",meta:e.options.meta};return y(D),D})(),j=await g(_),{maxPages:N}=e.options,P=S?JO:XO;return{pages:P(v.pages,j,N),pageParams:P(v.pageParams,k,N)}};if(r&&i.length){const v=r==="backward",k=v?aM:Sw,S={pages:i,pageParams:o},C=k(s,S);a=await m(S,C,v)}else{const v=t??i.length;do{const k=l===0?o[0]??s.initialPageParam:Sw(s,a);if(l>0&&k==null)break;a=await m(a,k),l++}while(l<v)}return a};e.options.persister?e.fetchFn=()=>{var x,y;return(y=(x=e.options).persister)==null?void 0:y.call(x,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function Sw(t,{pages:e,pageParams:n}){const s=e.length-1;return e.length>0?t.getNextPageParam(e[s],e,n[s],n):void 0}function aM(t,{pages:e,pageParams:n}){var s;return e.length>0?(s=t.getPreviousPageParam)==null?void 0:s.call(t,e[0],e,n[0],n):void 0}var Zu,yr,In,Yo,vr,gi,IS,lM=(IS=class extends yC{constructor(e){super();we(this,vr);we(this,Zu);we(this,yr);we(this,In);we(this,Yo);ue(this,Zu,e.client),this.mutationId=e.mutationId,ue(this,In,e.mutationCache),ue(this,yr,[]),this.state=e.state||wC(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){O(this,yr).includes(e)||(O(this,yr).push(e),this.clearGcTimeout(),O(this,In).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){ue(this,yr,O(this,yr).filter(n=>n!==e)),this.scheduleGc(),O(this,In).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){O(this,yr).length||(this.state.status==="pending"?this.scheduleGc():O(this,In).remove(this))}continue(){var e;return((e=O(this,Yo))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,l,u,d,h,f,p,w,x,y,g,m,v,k,S,C,_,j,N;const n=()=>{Fe(this,vr,gi).call(this,{type:"continue"})},s={client:O(this,Zu),meta:this.options.meta,mutationKey:this.options.mutationKey};ue(this,Yo,xC({fn:()=>this.options.mutationFn?this.options.mutationFn(e,s):Promise.reject(new Error("No mutationFn found")),onFail:(P,D)=>{Fe(this,vr,gi).call(this,{type:"failed",failureCount:P,error:D})},onPause:()=>{Fe(this,vr,gi).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>O(this,In).canRun(this)}));const r=this.state.status==="pending",i=!O(this,Yo).canStart();try{if(r)n();else{Fe(this,vr,gi).call(this,{type:"pending",variables:e,isPaused:i}),await((a=(o=O(this,In).config).onMutate)==null?void 0:a.call(o,e,this,s));const D=await((u=(l=this.options).onMutate)==null?void 0:u.call(l,e,s));D!==this.state.context&&Fe(this,vr,gi).call(this,{type:"pending",context:D,variables:e,isPaused:i})}const P=await O(this,Yo).start();return await((h=(d=O(this,In).config).onSuccess)==null?void 0:h.call(d,P,e,this.state.context,this,s)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,P,e,this.state.context,s)),await((x=(w=O(this,In).config).onSettled)==null?void 0:x.call(w,P,null,this.state.variables,this.state.context,this,s)),await((g=(y=this.options).onSettled)==null?void 0:g.call(y,P,null,e,this.state.context,s)),Fe(this,vr,gi).call(this,{type:"success",data:P}),P}catch(P){try{throw await((v=(m=O(this,In).config).onError)==null?void 0:v.call(m,P,e,this.state.context,this,s)),await((S=(k=this.options).onError)==null?void 0:S.call(k,P,e,this.state.context,s)),await((_=(C=O(this,In).config).onSettled)==null?void 0:_.call(C,void 0,P,this.state.variables,this.state.context,this,s)),await((N=(j=this.options).onSettled)==null?void 0:N.call(j,void 0,P,e,this.state.context,s)),P}finally{Fe(this,vr,gi).call(this,{type:"error",error:P})}}finally{O(this,In).runNext(this)}}},Zu=new WeakMap,yr=new WeakMap,In=new WeakMap,Yo=new WeakMap,vr=new WeakSet,gi=function(e){const n=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Gt.batch(()=>{O(this,yr).forEach(s=>{s.onMutationUpdate(e)}),O(this,In).notify({mutation:this,type:"updated",action:e})})},IS);function wC(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var qr,Qs,ed,DS,cM=(DS=class extends ga{constructor(e={}){super();we(this,qr);we(this,Qs);we(this,ed);this.config=e,ue(this,qr,new Set),ue(this,Qs,new Map),ue(this,ed,0)}build(e,n,s){const r=new lM({client:e,mutationCache:this,mutationId:++Ld(this,ed)._,options:e.defaultMutationOptions(n),state:s});return this.add(r),r}add(e){O(this,qr).add(e);const n=th(e);if(typeof n=="string"){const s=O(this,Qs).get(n);s?s.push(e):O(this,Qs).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(O(this,qr).delete(e)){const n=th(e);if(typeof n=="string"){const s=O(this,Qs).get(n);if(s)if(s.length>1){const r=s.indexOf(e);r!==-1&&s.splice(r,1)}else s[0]===e&&O(this,Qs).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=th(e);if(typeof n=="string"){const s=O(this,Qs).get(n),r=s==null?void 0:s.find(i=>i.state.status==="pending");return!r||r===e}else return!0}runNext(e){var s;const n=th(e);if(typeof n=="string"){const r=(s=O(this,Qs).get(n))==null?void 0:s.find(i=>i!==e&&i.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Gt.batch(()=>{O(this,qr).forEach(e=>{this.notify({type:"removed",mutation:e})}),O(this,qr).clear(),O(this,Qs).clear()})}getAll(){return Array.from(O(this,qr))}find(e){const n={exact:!0,...e};return this.getAll().find(s=>gw(n,s))}findAll(e={}){return this.getAll().filter(n=>gw(e,n))}notify(e){Gt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Gt.batch(()=>Promise.all(e.map(n=>n.continue().catch(jn))))}},qr=new WeakMap,Qs=new WeakMap,ed=new WeakMap,DS);function th(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Kr,Pi,Yn,Gr,ei,Jh,Mx,LS,uM=(LS=class extends ga{constructor(n,s){super();we(this,ei);we(this,Kr);we(this,Pi);we(this,Yn);we(this,Gr);ue(this,Kr,n),this.setOptions(s),this.bindMethods(),Fe(this,ei,Jh).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var r;const s=this.options;this.options=O(this,Kr).defaultMutationOptions(n),Cu(this.options,s)||O(this,Kr).getMutationCache().notify({type:"observerOptionsUpdated",mutation:O(this,Yn),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&la(s.mutationKey)!==la(this.options.mutationKey)?this.reset():((r=O(this,Yn))==null?void 0:r.state.status)==="pending"&&O(this,Yn).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=O(this,Yn))==null||n.removeObserver(this)}onMutationUpdate(n){Fe(this,ei,Jh).call(this),Fe(this,ei,Mx).call(this,n)}getCurrentResult(){return O(this,Pi)}reset(){var n;(n=O(this,Yn))==null||n.removeObserver(this),ue(this,Yn,void 0),Fe(this,ei,Jh).call(this),Fe(this,ei,Mx).call(this)}mutate(n,s){var r;return ue(this,Gr,s),(r=O(this,Yn))==null||r.removeObserver(this),ue(this,Yn,O(this,Kr).getMutationCache().build(O(this,Kr),this.options)),O(this,Yn).addObserver(this),O(this,Yn).execute(n)}},Kr=new WeakMap,Pi=new WeakMap,Yn=new WeakMap,Gr=new WeakMap,ei=new WeakSet,Jh=function(){var s;const n=((s=O(this,Yn))==null?void 0:s.state)??wC();ue(this,Pi,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Mx=function(n){Gt.batch(()=>{var s,r,i,o,a,l,u,d;if(O(this,Gr)&&this.hasListeners()){const h=O(this,Pi).variables,f=O(this,Pi).context,p={client:O(this,Kr),meta:this.options.meta,mutationKey:this.options.mutationKey};(n==null?void 0:n.type)==="success"?((r=(s=O(this,Gr)).onSuccess)==null||r.call(s,n.data,h,f,p),(o=(i=O(this,Gr)).onSettled)==null||o.call(i,n.data,null,h,f,p)):(n==null?void 0:n.type)==="error"&&((l=(a=O(this,Gr)).onError)==null||l.call(a,n.error,h,f,p),(d=(u=O(this,Gr)).onSettled)==null||d.call(u,void 0,n.error,h,f,p))}this.listeners.forEach(h=>{h(O(this,Pi))})})},LS);function jw(t,e){const n=new Set(e);return t.filter(s=>!n.has(s))}function dM(t,e,n){const s=t.slice(0);return s[e]=n,s}var Al,hs,Ol,Ml,Ts,Ri,td,nd,sd,kn,Ix,Dx,Lx,$x,Fx,$S,hM=($S=class extends ga{constructor(e,n,s){super();we(this,kn);we(this,Al);we(this,hs);we(this,Ol);we(this,Ml);we(this,Ts);we(this,Ri);we(this,td);we(this,nd);we(this,sd,[]);ue(this,Al,e),ue(this,Ml,s),ue(this,Ol,[]),ue(this,Ts,[]),ue(this,hs,[]),this.setQueries(n)}onSubscribe(){this.listeners.size===1&&O(this,Ts).forEach(e=>{e.subscribe(n=>{Fe(this,kn,$x).call(this,e,n)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,O(this,Ts).forEach(e=>{e.destroy()})}setQueries(e,n){ue(this,Ol,e),ue(this,Ml,n),Gt.batch(()=>{const s=O(this,Ts),r=Fe(this,kn,Lx).call(this,O(this,Ol));ue(this,sd,r),r.forEach(h=>h.observer.setOptions(h.defaultedQueryOptions));const i=r.map(h=>h.observer),o=i.map(h=>h.getCurrentResult()),a=s.length!==i.length,l=i.some((h,f)=>h!==s[f]),u=a||l,d=u?!0:o.some((h,f)=>{const p=O(this,hs)[f];return!p||!Cu(h,p)});!u&&!d||(u&&ue(this,Ts,i),ue(this,hs,o),this.hasListeners()&&(u&&(jw(s,i).forEach(h=>{h.destroy()}),jw(i,s).forEach(h=>{h.subscribe(f=>{Fe(this,kn,$x).call(this,h,f)})})),Fe(this,kn,Fx).call(this)))})}getCurrentResult(){return O(this,hs)}getQueries(){return O(this,Ts).map(e=>e.getCurrentQuery())}getObservers(){return O(this,Ts)}getOptimisticResult(e,n){const s=Fe(this,kn,Lx).call(this,e),r=s.map(i=>i.observer.getOptimisticResult(i.defaultedQueryOptions));return[r,i=>Fe(this,kn,Dx).call(this,i??r,n),()=>Fe(this,kn,Ix).call(this,r,s)]}},Al=new WeakMap,hs=new WeakMap,Ol=new WeakMap,Ml=new WeakMap,Ts=new WeakMap,Ri=new WeakMap,td=new WeakMap,nd=new WeakMap,sd=new WeakMap,kn=new WeakSet,Ix=function(e,n){return n.map((s,r)=>{const i=e[r];return s.defaultedQueryOptions.notifyOnChangeProps?i:s.observer.trackResult(i,o=>{n.forEach(a=>{a.observer.trackProp(o)})})})},Dx=function(e,n){return n?((!O(this,Ri)||O(this,hs)!==O(this,nd)||n!==O(this,td))&&(ue(this,td,n),ue(this,nd,O(this,hs)),ue(this,Ri,Nv(O(this,Ri),n(e)))),O(this,Ri)):e},Lx=function(e){const n=new Map;O(this,Ts).forEach(r=>{const i=r.options.queryHash;if(!i)return;const o=n.get(i);o?o.push(r):n.set(i,[r])});const s=[];return e.forEach(r=>{var l;const i=O(this,Al).defaultQueryOptions(r),a=((l=n.get(i.queryHash))==null?void 0:l.shift())??new Pv(O(this,Al),i);s.push({defaultedQueryOptions:i,observer:a})}),s},$x=function(e,n){const s=O(this,Ts).indexOf(e);s!==-1&&(ue(this,hs,dM(O(this,hs),s,n)),Fe(this,kn,Fx).call(this))},Fx=function(){var e;if(this.hasListeners()){const n=O(this,Ri),s=Fe(this,kn,Ix).call(this,O(this,hs),O(this,sd)),r=Fe(this,kn,Dx).call(this,s,(e=O(this,Ml))==null?void 0:e.combine);n!==r&&Gt.batch(()=>{this.listeners.forEach(i=>{i(O(this,hs))})})}},$S),br,FS,fM=(FS=class extends ga{constructor(e={}){super();we(this,br);this.config=e,ue(this,br,new Map)}build(e,n,s){const r=n.queryKey,i=n.queryHash??Cv(r,n);let o=this.get(i);return o||(o=new rM({client:e,queryKey:r,queryHash:i,options:e.defaultQueryOptions(n),state:s,defaultOptions:e.getQueryDefaults(r)}),this.add(o)),o}add(e){O(this,br).has(e.queryHash)||(O(this,br).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=O(this,br).get(e.queryHash);n&&(e.destroy(),n===e&&O(this,br).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Gt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return O(this,br).get(e)}getAll(){return[...O(this,br).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(s=>mw(n,s))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(s=>mw(e,s)):n}notify(e){Gt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Gt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Gt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},br=new WeakMap,FS),Vt,Ai,Oi,Il,Dl,Mi,Ll,$l,zS,pM=(zS=class{constructor(t={}){we(this,Vt);we(this,Ai);we(this,Oi);we(this,Il);we(this,Dl);we(this,Mi);we(this,Ll);we(this,$l);ue(this,Vt,t.queryCache||new fM),ue(this,Ai,t.mutationCache||new cM),ue(this,Oi,t.defaultOptions||{}),ue(this,Il,new Map),ue(this,Dl,new Map),ue(this,Mi,0)}mount(){Ld(this,Mi)._++,O(this,Mi)===1&&(ue(this,Ll,Tv.subscribe(async t=>{t&&(await this.resumePausedMutations(),O(this,Vt).onFocus())})),ue(this,$l,$f.subscribe(async t=>{t&&(await this.resumePausedMutations(),O(this,Vt).onOnline())})))}unmount(){var t,e;Ld(this,Mi)._--,O(this,Mi)===0&&((t=O(this,Ll))==null||t.call(this),ue(this,Ll,void 0),(e=O(this,$l))==null||e.call(this),ue(this,$l,void 0))}isFetching(t){return O(this,Vt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return O(this,Ai).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=O(this,Vt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=O(this,Vt).build(this,e),s=n.state.data;return s===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Qi(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(t){return O(this,Vt).findAll(t).map(({queryKey:e,state:n})=>{const s=n.data;return[e,s]})}setQueryData(t,e,n){const s=this.defaultQueryOptions({queryKey:t}),r=O(this,Vt).get(s.queryHash),i=r==null?void 0:r.state.data,o=GO(e,i);if(o!==void 0)return O(this,Vt).build(this,s).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Gt.batch(()=>O(this,Vt).findAll(t).map(({queryKey:s})=>[s,this.setQueryData(s,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=O(this,Vt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=O(this,Vt);Gt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=O(this,Vt);return Gt.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},s=Gt.batch(()=>O(this,Vt).findAll(t).map(r=>r.cancel(n)));return Promise.all(s).then(jn).catch(jn)}invalidateQueries(t,e={}){return Gt.batch(()=>(O(this,Vt).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},s=Gt.batch(()=>O(this,Vt).findAll(t).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let i=r.fetch(void 0,n);return n.throwOnError||(i=i.catch(jn)),r.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(jn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=O(this,Vt).build(this,e);return n.isStaleByTime(Qi(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(jn).catch(jn)}fetchInfiniteQuery(t){return t.behavior=_w(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(jn).catch(jn)}ensureInfiniteQueryData(t){return t.behavior=_w(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return $f.isOnline()?O(this,Ai).resumePausedMutations():Promise.resolve()}getQueryCache(){return O(this,Vt)}getMutationCache(){return O(this,Ai)}getDefaultOptions(){return O(this,Oi)}setDefaultOptions(t){ue(this,Oi,t)}setQueryDefaults(t,e){O(this,Il).set(la(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...O(this,Il).values()],n={};return e.forEach(s=>{ju(t,s.queryKey)&&Object.assign(n,s.defaultOptions)}),n}setMutationDefaults(t,e){O(this,Dl).set(la(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...O(this,Dl).values()],n={};return e.forEach(s=>{ju(t,s.mutationKey)&&Object.assign(n,s.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...O(this,Oi).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Cv(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Ev&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...O(this,Oi).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){O(this,Vt).clear(),O(this,Ai).clear()}},Vt=new WeakMap,Ai=new WeakMap,Oi=new WeakMap,Il=new WeakMap,Dl=new WeakMap,Mi=new WeakMap,Ll=new WeakMap,$l=new WeakMap,zS),kC=b.createContext(void 0),Rr=t=>{const e=b.useContext(kC);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},mM=({client:t,children:e})=>(b.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),c.jsx(kC.Provider,{value:t,children:e})),_C=b.createContext(!1),SC=()=>b.useContext(_C);_C.Provider;function gM(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var xM=b.createContext(gM()),jC=()=>b.useContext(xM),CC=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},NC=t=>{b.useEffect(()=>{t.clearReset()},[t])},EC=({result:t,errorResetBoundary:e,throwOnError:n,query:s,suspense:r})=>t.isError&&!e.isReset()&&!t.isFetching&&s&&(r&&t.data===void 0||mC(n,[t.error,s])),TC=t=>{if(t.suspense){const n=r=>r==="static"?r:Math.max(r??1e3,1e3),s=t.staleTime;t.staleTime=typeof s=="function"?(...r)=>n(s(...r)):n(s),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},PC=(t,e)=>t.isLoading&&t.isFetching&&!e,zx=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Ff=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function yM({queries:t,...e},n){const s=Rr(),r=SC(),i=jC(),o=b.useMemo(()=>t.map(x=>{const y=s.defaultQueryOptions(x);return y._optimisticResults=r?"isRestoring":"optimistic",y}),[t,s,r]);o.forEach(x=>{TC(x),CC(x,i)}),NC(i);const[a]=b.useState(()=>new hM(s,o,e)),[l,u,d]=a.getOptimisticResult(o,e.combine),h=!r&&e.subscribed!==!1;b.useSyncExternalStore(b.useCallback(x=>h?a.subscribe(Gt.batchCalls(x)):jn,[a,h]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),b.useEffect(()=>{a.setQueries(o,e)},[o,e,a]);const p=l.some((x,y)=>zx(o[y],x))?l.flatMap((x,y)=>{const g=o[y];if(g){const m=new Pv(s,g);if(zx(g,x))return Ff(g,m,i);PC(x,r)&&Ff(g,m,i)}return[]}):[];if(p.length>0)throw Promise.all(p);const w=l.find((x,y)=>{const g=o[y];return g&&EC({result:x,errorResetBoundary:i,throwOnError:g.throwOnError,query:s.getQueryCache().get(g.queryHash),suspense:g.suspense})});if(w!=null&&w.error)throw w.error;return u(d())}function vM(t,e,n){var h,f,p,w,x;const s=SC(),r=jC(),i=Rr(),o=i.defaultQueryOptions(t);(f=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,o),o._optimisticResults=s?"isRestoring":"optimistic",TC(o),CC(o,r),NC(r);const a=!i.getQueryCache().get(o.queryHash),[l]=b.useState(()=>new e(i,o)),u=l.getOptimisticResult(o),d=!s&&t.subscribed!==!1;if(b.useSyncExternalStore(b.useCallback(y=>{const g=d?l.subscribe(Gt.batchCalls(y)):jn;return l.updateResult(),g},[l,d]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),b.useEffect(()=>{l.setOptions(o)},[o,l]),zx(o,u))throw Ff(o,l,r);if(EC({result:u,errorResetBoundary:r,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((w=(p=i.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||w.call(p,o,u),o.experimental_prefetchInRender&&!aa&&PC(u,s)){const y=a?Ff(o,l,r):(x=i.getQueryCache().get(o.queryHash))==null?void 0:x.promise;y==null||y.catch(jn).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?u:l.trackResult(u)}function en(t,e){return vM(t,Pv)}function bM(t,e){const n=Rr(),[s]=b.useState(()=>new uM(n,t));b.useEffect(()=>{s.setOptions(t)},[s,t]);const r=b.useSyncExternalStore(b.useCallback(o=>s.subscribe(Gt.batchCalls(o)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),i=b.useCallback((o,a)=>{s.mutate(o,a).catch(jn)},[s]);if(r.error&&mC(s.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:i,mutateAsync:r.mutate}}const wM="modulepreload",kM=function(t){return"/"+t},Cw={},_M=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=kM(l),l in Cw)return;Cw[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":wM,u||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),RC=(...t)=>t.filter((e,n,s)=>!!e&&s.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var jM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=b.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:i,iconNode:o,...a},l)=>b.createElement("svg",{ref:l,...jM,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:RC("lucide",r),...a},[...o.map(([u,d])=>b.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=(t,e)=>{const n=b.forwardRef(({className:s,...r},i)=>b.createElement(CM,{ref:i,iconNode:e,className:RC(`lucide-${SM(t)}`,s),...r}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=it("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=it("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=it("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=it("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nh=it("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sh=it("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=it("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=it("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=it("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=it("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=it("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=it("Grid2x2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nw=it("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=it("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=it("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Am=it("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=it("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=it("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=it("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=it("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=it("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fd=it("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=it("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=it("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DC=it("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=it("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=it("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=it("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rh=it("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=it("UserRoundCheck",[["path",{d:"M2 21a8 8 0 0 1 13.292-6",key:"bjp14o"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=it("UserRoundX",[["path",{d:"M2 21a8 8 0 0 1 11.873-7",key:"74fkxq"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"m17 17 5 5",key:"p7ous7"}],["path",{d:"m22 17-5 5",key:"gqnmv0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=it("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=it("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function LC(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=LC(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function $C(){for(var t,e,n=0,s="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=LC(t))&&(s&&(s+=" "),s+=e);return s}const Mv="-",BM=t=>{const e=HM(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=t;return{getClassGroupId:o=>{const a=o.split(Mv);return a[0]===""&&a.length!==1&&a.shift(),FC(a,e)||UM(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&s[o]?[...l,...s[o]]:l}}},FC=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],s=e.nextPart.get(n),r=s?FC(t.slice(1),s):void 0;if(r)return r;if(e.validators.length===0)return;const i=t.join(Mv);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},Ew=/^\[(.+)\]$/,UM=t=>{if(Ew.test(t)){const e=Ew.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},HM=t=>{const{theme:e,prefix:n}=t,s={nextPart:new Map,validators:[]};return VM(Object.entries(t.classGroups),n).forEach(([i,o])=>{Bx(o,s,i,e)}),s},Bx=(t,e,n,s)=>{t.forEach(r=>{if(typeof r=="string"){const i=r===""?e:Tw(e,r);i.classGroupId=n;return}if(typeof r=="function"){if(WM(r)){Bx(r(s),e,n,s);return}e.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(([i,o])=>{Bx(o,Tw(e,i),n,s)})})},Tw=(t,e)=>{let n=t;return e.split(Mv).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},WM=t=>t.isThemeGetter,VM=(t,e)=>e?t.map(([n,s])=>{const r=s.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,r]}):t,qM=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,s=new Map;const r=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,s=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=s.get(i))!==void 0)return r(i,o),o},set(i,o){n.has(i)?n.set(i,o):r(i,o)}}},zC="!",KM=t=>{const{separator:e,experimentalParseClassName:n}=t,s=e.length===1,r=e[0],i=e.length,o=a=>{const l=[];let u=0,d=0,h;for(let y=0;y<a.length;y++){let g=a[y];if(u===0){if(g===r&&(s||a.slice(y,y+i)===e)){l.push(a.slice(d,y)),d=y+i;continue}if(g==="/"){h=y;continue}}g==="["?u++:g==="]"&&u--}const f=l.length===0?a:a.substring(d),p=f.startsWith(zC),w=p?f.substring(1):f,x=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:w,maybePostfixModifierPosition:x}};return n?a=>n({className:a,parseClassName:o}):o},GM=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(s=>{s[0]==="["?(e.push(...n.sort(),s),n=[]):n.push(s)}),e.push(...n.sort()),e},YM=t=>({cache:qM(t.cacheSize),parseClassName:KM(t),...BM(t)}),QM=/\s+/,XM=(t,e)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:r}=e,i=[],o=t.trim().split(QM);let a="";for(let l=o.length-1;l>=0;l-=1){const u=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=n(u);let w=!!p,x=s(w?f.substring(0,p):f);if(!x){if(!w){a=u+(a.length>0?" "+a:a);continue}if(x=s(f),!x){a=u+(a.length>0?" "+a:a);continue}w=!1}const y=GM(d).join(":"),g=h?y+zC:y,m=g+x;if(i.includes(m))continue;i.push(m);const v=r(x,w);for(let k=0;k<v.length;++k){const S=v[k];i.push(g+S)}a=u+(a.length>0?" "+a:a)}return a};function JM(){let t=0,e,n,s="";for(;t<arguments.length;)(e=arguments[t++])&&(n=BC(e))&&(s&&(s+=" "),s+=n);return s}const BC=t=>{if(typeof t=="string")return t;let e,n="";for(let s=0;s<t.length;s++)t[s]&&(e=BC(t[s]))&&(n&&(n+=" "),n+=e);return n};function ZM(t,...e){let n,s,r,i=o;function o(l){const u=e.reduce((d,h)=>h(d),t());return n=YM(u),s=n.cache.get,r=n.cache.set,i=a,a(l)}function a(l){const u=s(l);if(u)return u;const d=XM(l,n);return r(l,d),d}return function(){return i(JM.apply(null,arguments))}}const jt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},UC=/^\[(?:([a-z-]+):)?(.+)\]$/i,eI=/^\d+\/\d+$/,tI=new Set(["px","full","screen"]),nI=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,sI=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,rI=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,iI=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,oI=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ir=t=>fl(t)||tI.has(t)||eI.test(t),pi=t=>Zl(t,"length",pI),fl=t=>!!t&&!Number.isNaN(Number(t)),Om=t=>Zl(t,"number",fl),wc=t=>!!t&&Number.isInteger(Number(t)),aI=t=>t.endsWith("%")&&fl(t.slice(0,-1)),Ke=t=>UC.test(t),mi=t=>nI.test(t),lI=new Set(["length","size","percentage"]),cI=t=>Zl(t,lI,HC),uI=t=>Zl(t,"position",HC),dI=new Set(["image","url"]),hI=t=>Zl(t,dI,gI),fI=t=>Zl(t,"",mI),kc=()=>!0,Zl=(t,e,n)=>{const s=UC.exec(t);return s?s[1]?typeof e=="string"?s[1]===e:e.has(s[1]):n(s[2]):!1},pI=t=>sI.test(t)&&!rI.test(t),HC=()=>!1,mI=t=>iI.test(t),gI=t=>oI.test(t),xI=()=>{const t=jt("colors"),e=jt("spacing"),n=jt("blur"),s=jt("brightness"),r=jt("borderColor"),i=jt("borderRadius"),o=jt("borderSpacing"),a=jt("borderWidth"),l=jt("contrast"),u=jt("grayscale"),d=jt("hueRotate"),h=jt("invert"),f=jt("gap"),p=jt("gradientColorStops"),w=jt("gradientColorStopPositions"),x=jt("inset"),y=jt("margin"),g=jt("opacity"),m=jt("padding"),v=jt("saturate"),k=jt("scale"),S=jt("sepia"),C=jt("skew"),_=jt("space"),j=jt("translate"),N=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",Ke,e],M=()=>[Ke,e],I=()=>["",Ir,pi],L=()=>["auto",fl,Ke],R=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],$=()=>["solid","dashed","dotted","double","none"],U=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],E=()=>["start","end","center","between","around","evenly","stretch"],T=()=>["","0",Ke],z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],q=()=>[fl,Ke];return{cacheSize:500,separator:":",theme:{colors:[kc],spacing:[Ir,pi],blur:["none","",mi,Ke],brightness:q(),borderColor:[t],borderRadius:["none","","full",mi,Ke],borderSpacing:M(),borderWidth:I(),contrast:q(),grayscale:T(),hueRotate:q(),invert:T(),gap:M(),gradientColorStops:[t],gradientColorStopPositions:[aI,pi],inset:D(),margin:D(),opacity:q(),padding:M(),saturate:q(),scale:q(),sepia:T(),skew:q(),space:M(),translate:M()},classGroups:{aspect:[{aspect:["auto","square","video",Ke]}],container:["container"],columns:[{columns:[mi]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...R(),Ke]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",wc,Ke]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ke]}],grow:[{grow:T()}],shrink:[{shrink:T()}],order:[{order:["first","last","none",wc,Ke]}],"grid-cols":[{"grid-cols":[kc]}],"col-start-end":[{col:["auto",{span:["full",wc,Ke]},Ke]}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":[kc]}],"row-start-end":[{row:["auto",{span:[wc,Ke]},Ke]}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ke]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ke]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...E()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...E(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...E(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[m]}],px:[{px:[m]}],py:[{py:[m]}],ps:[{ps:[m]}],pe:[{pe:[m]}],pt:[{pt:[m]}],pr:[{pr:[m]}],pb:[{pb:[m]}],pl:[{pl:[m]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[_]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[_]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ke,e]}],"min-w":[{"min-w":[Ke,e,"min","max","fit"]}],"max-w":[{"max-w":[Ke,e,"none","full","min","max","fit","prose",{screen:[mi]},mi]}],h:[{h:[Ke,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ke,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ke,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ke,e,"auto","min","max","fit"]}],"font-size":[{text:["base",mi,pi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Om]}],"font-family":[{font:[kc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ke]}],"line-clamp":[{"line-clamp":["none",fl,Om]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ir,Ke]}],"list-image":[{"list-image":["none",Ke]}],"list-style-type":[{list:["none","disc","decimal",Ke]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...$(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ir,pi]}],"underline-offset":[{"underline-offset":["auto",Ir,Ke]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ke]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ke]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...R(),uI]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",cI]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},hI]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...$(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:$()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...$()]}],"outline-offset":[{"outline-offset":[Ir,Ke]}],"outline-w":[{outline:[Ir,pi]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:I()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[Ir,pi]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",mi,fI]}],"shadow-color":[{shadow:[kc]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...U(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":U()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[s]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",mi,Ke]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[v]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ke]}],duration:[{duration:q()}],ease:[{ease:["linear","in","out","in-out",Ke]}],delay:[{delay:q()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ke]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[wc,Ke]}],"translate-x":[{"translate-x":[j]}],"translate-y":[{"translate-y":[j]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ke]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ke]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ke]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ir,pi,Om]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},yI=ZM(xI);function Ee(...t){return yI($C(t))}function vn(t){return t.split(/\n|,/).map(e=>e.trim()).filter(Boolean)}function Ux(t){if(!t)return{module:"",service:"",action:""};const[e,n,s]=t.split(":");return{module:(e==null?void 0:e.trim())||"",service:(n==null?void 0:n.trim())||"",action:(s==null?void 0:s.trim())||""}}function Pw({module:t,service:e,action:n}){return!t||!e||!n?"":`${t}:${e}:${n}`}function pl(t,e,n=`${e}s`){return t?`${t} ${t===1?e:n} selected`:`No ${n} selected`}function ef(t,e={}){return{...e,...t||{}}}function vt({className:t,...e}){return c.jsx("div",{className:Ee("mmg-card rounded-2xl bg-white/70 dark:bg-white/5 backdrop-blur-xs shadow-soft","ring-1 ring-black/5 dark:ring-white/10",t),...e})}function Bt({className:t,...e}){return c.jsx("div",{className:Ee("p-5 pb-3",t),...e})}function Yt({className:t,...e}){return c.jsx("h3",{className:Ee("text-base font-semibold",t),...e})}function Ut({className:t,...e}){return c.jsx("div",{className:Ee("p-5 pt-0",t),...e})}function Rw(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function xa(...t){return e=>{let n=!1;const s=t.map(r=>{const i=Rw(r,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let r=0;r<s.length;r++){const i=s[r];typeof i=="function"?i():Rw(t[r],null)}}}}function os(...t){return b.useCallback(xa(...t),t)}var vI=Symbol.for("react.lazy"),zf=dp[" use ".trim().toString()];function bI(t){return typeof t=="object"&&t!==null&&"then"in t}function WC(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===vI&&"_payload"in t&&bI(t._payload)}function wI(t){const e=_I(t),n=b.forwardRef((s,r)=>{let{children:i,...o}=s;WC(i)&&typeof zf=="function"&&(i=zf(i._payload));const a=b.Children.toArray(i),l=a.find(jI);if(l){const u=l.props.children,d=a.map(h=>h===l?b.Children.count(u)>1?b.Children.only(null):b.isValidElement(u)?u.props.children:null:h);return c.jsx(e,{...o,ref:r,children:b.isValidElement(u)?b.cloneElement(u,void 0,d):null})}return c.jsx(e,{...o,ref:r,children:i})});return n.displayName=`${t}.Slot`,n}var kI=wI("Slot");function _I(t){const e=b.forwardRef((n,s)=>{let{children:r,...i}=n;if(WC(r)&&typeof zf=="function"&&(r=zf(r._payload)),b.isValidElement(r)){const o=NI(r),a=CI(i,r.props);return r.type!==b.Fragment&&(a.ref=s?xa(s,o):o),b.cloneElement(r,a)}return b.Children.count(r)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var SI=Symbol("radix.slottable");function jI(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===SI}function CI(t,e){const n={...e};for(const s in e){const r=t[s],i=e[s];/^on[A-Z]/.test(s)?r&&i?n[s]=(...a)=>{const l=i(...a);return r(...a),l}:r&&(n[s]=r):s==="style"?n[s]={...r,...i}:s==="className"&&(n[s]=[r,i].filter(Boolean).join(" "))}return{...t,...n}}function NI(t){var s,r;let e=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}const Aw=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Ow=$C,EI=(t,e)=>n=>{var s;if((e==null?void 0:e.variants)==null)return Ow(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:r,defaultVariants:i}=e,o=Object.keys(r).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const f=Aw(d)||Aw(h);return r[u][f]}),a=n&&Object.entries(n).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),l=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((u,d)=>{let{class:h,className:f,...p}=d;return Object.entries(p).every(w=>{let[x,y]=w;return Array.isArray(y)?y.includes({...i,...a}[x]):{...i,...a}[x]===y})?[...u,h,f]:u},[]);return Ow(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},TI=EI("inline-flex items-center justify-center whitespace-nowrap rounded-xl text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-black/10 dark:focus-visible:ring-white/15 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"mmg-btn-primary bg-black text-white hover:bg-black/90 dark:bg-white dark:text-black dark:hover:bg-white/90 shadow-soft",secondary:"bg-black/5 text-black hover:bg-black/8 dark:bg-white/10 dark:text-white dark:hover:bg-white/15 shadow-soft",ghost:"bg-transparent hover:bg-black/5 text-black dark:text-white dark:hover:bg-white/10 shadow-soft"},size:{default:"h-10 px-4",sm:"h-9 px-3",lg:"h-11 px-5",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),te=ge.forwardRef(({className:t,variant:e,size:n,asChild:s=!1,...r},i)=>{const o=s?kI:"button";return c.jsx(o,{className:Ee(TI({variant:e,size:n,className:t})),ref:i,...r})});te.displayName="Button";function Ye({text:t="Loading",className:e=""}){return c.jsxs("span",{className:["inline-flex items-center gap-2",e].filter(Boolean).join(" "),children:[c.jsx("span",{children:t}),c.jsxs("span",{className:"mmg-ellipsis","aria-hidden":"true",children:[c.jsx("span",{className:"mmg-ellipsis-dot",style:{animationDelay:"0ms"}}),c.jsx("span",{className:"mmg-ellipsis-dot",style:{animationDelay:"120ms"}}),c.jsx("span",{className:"mmg-ellipsis-dot",style:{animationDelay:"240ms"}})]})]})}function VC({size:t=128}){return c.jsxs("div",{className:"flex items-end gap-2",children:[c.jsx("img",{src:"/logo.svg",width:t,height:t,alt:"",className:"shrink-0 filter invert dark:invert-0"}),c.jsx("span",{className:"mmg-brand-gold font-semibold text-lg leading-none tracking-tight hidden sm:inline-flex",children:"Nova"})]})}var Sr=function(){return Sr=Object.assign||function(e){for(var n,s=1,r=arguments.length;s<r;s++){n=arguments[s];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Sr.apply(this,arguments)};function ec(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n}function PI(t,e,n,s){function r(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(s.next(d))}catch(h){o(h)}}function l(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,l)}u((s=s.apply(t,e||[])).next())})}function RI(t,e,n){if(n||arguments.length===2)for(var s=0,r=e.length,i;s<r;s++)(i||!(s in e))&&(i||(i=Array.prototype.slice.call(e,0,s)),i[s]=e[s]);return t.concat(i||Array.prototype.slice.call(e))}const AI=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Iv extends Error{constructor(e,n="FunctionsError",s){super(e),this.name=n,this.context=s}}class OI extends Iv{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Mw extends Iv{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Iw extends Iv{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Hx;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Hx||(Hx={}));class MI{constructor(e,{headers:n={},customFetch:s,region:r=Hx.Any}={}){this.url=e,this.headers=n,this.region=r,this.fetch=AI(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return PI(this,arguments,void 0,function*(n,s={}){var r;let i,o;try{const{headers:a,method:l,body:u,signal:d,timeout:h}=s;let f={},{region:p}=s;p||(p=this.region);const w=new URL(`${this.url}/${n}`);p&&p!=="any"&&(f["x-region"]=p,w.searchParams.set("forceFunctionRegion",p));let x;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",x=u):typeof u=="string"?(f["Content-Type"]="text/plain",x=u):typeof FormData<"u"&&u instanceof FormData?x=u:(f["Content-Type"]="application/json",x=JSON.stringify(u)):x=u;let y=d;h&&(o=new AbortController,i=setTimeout(()=>o.abort(),h),d?(y=o.signal,d.addEventListener("abort",()=>o.abort())):y=o.signal);const g=yield this.fetch(w.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:x,signal:y}).catch(S=>{throw new OI(S)}),m=g.headers.get("x-relay-error");if(m&&m==="true")throw new Mw(g);if(!g.ok)throw new Iw(g);let v=((r=g.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),k;return v==="application/json"?k=yield g.json():v==="application/octet-stream"||v==="application/pdf"?k=yield g.blob():v==="text/event-stream"?k=g:v==="multipart/form-data"?k=yield g.formData():k=yield g.text(),{data:k,error:null,response:g}}catch(a){return{data:null,error:a,response:a instanceof Iw||a instanceof Mw?a.context:void 0}}finally{i&&clearTimeout(i)}})}}var II=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},DI=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let r=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,a=null,l=null,u=i.status,d=i.statusText;if(i.ok){var h,f;if(n.method!=="HEAD"){var p;const g=await i.text();g===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((p=n.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?a=g:a=JSON.parse(g))}const x=(h=n.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),y=(f=i.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");x&&y&&y.length>1&&(l=parseInt(y[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,u=406,d="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var w;const x=await i.text();try{o=JSON.parse(x),Array.isArray(o)&&i.status===404&&(a=[],o=null,u=200,d="OK")}catch{i.status===404&&x===""?(u=204,d="No Content"):o={message:x}}if(o&&n.isMaybeSingle&&(!(o==null||(w=o.details)===null||w===void 0)&&w.includes("0 rows"))&&(o=null,u=200,d="OK"),o&&n.shouldThrowOnError)throw new II(o)}return{error:o,data:a,count:l,status:u,statusText:d}});return this.shouldThrowOnError||(r=r.catch(i=>{var o;let a="";const l=i==null?void 0:i.cause;if(l){var u,d,h,f;const w=(u=l==null?void 0:l.message)!==null&&u!==void 0?u:"",x=(d=l==null?void 0:l.code)!==null&&d!==void 0?d:"";a=`${(h=i==null?void 0:i.name)!==null&&h!==void 0?h:"FetchError"}: ${i==null?void 0:i.message}`,a+=`

Caused by: ${(f=l==null?void 0:l.name)!==null&&f!==void 0?f:"Error"}: ${w}`,x&&(a+=` (${x})`),l!=null&&l.stack&&(a+=`
${l.stack}`)}else{var p;a=(p=i==null?void 0:i.stack)!==null&&p!==void 0?p:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),r.then(t,e)}returns(){return this}overrideTypes(){return this}},LI=class extends DI{select(t){let e=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!e?"":(s==='"'&&(e=!e),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:s,referencedTable:r=s}={}){const i=r?`${r}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:s=n}={}){const r=typeof s>"u"?"offset":`${s}.offset`,i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${t}`),this.url.searchParams.set(i,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:s=!1,wal:r=!1,format:i="text"}={}){var o;const a=[t?"analyze":null,e?"verbose":null,n?"settings":null,s?"buffers":null,r?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${a};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const Dw=new RegExp("[,()]");var Wa=class extends LI{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(s=>typeof s=="string"&&Dw.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(s=>typeof s=="string"&&Dw.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:s}={}){let r="";s==="plain"?r="pl":s==="phrase"?r="ph":s==="websearch"&&(r="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${r}fts${i}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},$I=class{constructor(t,{headers:e={},schema:n,fetch:s}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=s}select(t,e){const{head:n=!1,count:s}=e??{},r=n?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),s&&this.headers.append("Prefer",`count=${s}`),new Wa({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var s;const r="POST";if(e&&this.headers.append("Prefer",`count=${e}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const i=t.reduce((o,a)=>o.concat(Object.keys(a)),[]);if(i.length>0){const o=[...new Set(i)].map(a=>`"${a}"`);this.url.searchParams.set("columns",o.join(","))}}return new Wa({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:s,defaultToNull:r=!0}={}){var i;const o="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),s&&this.headers.append("Prefer",`count=${s}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(a.length>0){const l=[...new Set(a)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new Wa({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(t,{count:e}={}){var n;const s="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new Wa({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Wa({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},FI=class qC{constructor(e,{headers:n={},schema:s,fetch:r}={}){this.url=e,this.headers=new Headers(n),this.schemaName=s,this.fetch=r}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new $I(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new qC(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:s=!1,get:r=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let u;s||r?(a=s?"HEAD":"GET",Object.entries(n).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{l.searchParams.append(h,f)})):(a="POST",u=n);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new Wa({method:a,url:l,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class zI{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const s=n.node,r=parseInt(s.replace(/^v/,"").split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const s=this.getWebSocketConstructor();return new s(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const BI="2.88.0",UI=`realtime-js/${BI}`,KC="1.0.0",HI="2.0.0",Lw=KC,Wx=1e4,WI=1e3,VI=100;var bi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(bi||(bi={}));var rn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(rn||(rn={}));var Js;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Js||(Js={}));var Vx;(function(t){t.websocket="websocket"})(Vx||(Vx={}));var Ao;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ao||(Ao={}));class qI{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,s;const r=(s=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,r)}_encodeJsonUserBroadcastPush(e){var n,s;const r=(s=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&s!==void 0?s:{},o=new TextEncoder().encode(JSON.stringify(r)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,n,s){var r,i;const o=e.topic,a=(r=e.ref)!==null&&r!==void 0?r:"",l=(i=e.join_ref)!==null&&i!==void 0?i:"",u=e.payload.event,d=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},h=Object.keys(d).length===0?"":JSON.stringify(d);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+u.length+h.length,p=new ArrayBuffer(this.HEADER_LENGTH+f);let w=new DataView(p),x=0;w.setUint8(x++,this.KINDS.userBroadcastPush),w.setUint8(x++,l.length),w.setUint8(x++,a.length),w.setUint8(x++,o.length),w.setUint8(x++,u.length),w.setUint8(x++,h.length),w.setUint8(x++,n),Array.from(l,g=>w.setUint8(x++,g.charCodeAt(0))),Array.from(a,g=>w.setUint8(x++,g.charCodeAt(0))),Array.from(o,g=>w.setUint8(x++,g.charCodeAt(0))),Array.from(u,g=>w.setUint8(x++,g.charCodeAt(0))),Array.from(h,g=>w.setUint8(x++,g.charCodeAt(0)));var y=new Uint8Array(p.byteLength+s.byteLength);return y.set(new Uint8Array(p),0),y.set(new Uint8Array(s),p.byteLength),y.buffer}decode(e,n){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return n(s)}if(typeof e=="string"){const s=JSON.parse(e),[r,i,o,a,l]=s;return n({join_ref:r,ref:i,topic:o,event:a,payload:l})}return n({})}_binaryDecode(e){const n=new DataView(e),s=n.getUint8(0),r=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,r)}}_decodeUserBroadcast(e,n,s){const r=n.getUint8(1),i=n.getUint8(2),o=n.getUint8(3),a=n.getUint8(4);let l=this.HEADER_LENGTH+4;const u=s.decode(e.slice(l,l+r));l=l+r;const d=s.decode(e.slice(l,l+i));l=l+i;const h=s.decode(e.slice(l,l+o));l=l+o;const f=e.slice(l,e.byteLength),p=a===this.JSON_ENCODING?JSON.parse(s.decode(f)):f,w={type:this.BROADCAST_EVENT,event:d,payload:p};return o>0&&(w.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:w}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([s])=>n.includes(s)))}}class GC{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var kt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(kt||(kt={}));const $w=(t,e,n={})=>{var s;const r=(s=n.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=KI(o,t,e,r),i),{}):{}},KI=(t,e,n,s)=>{const r=e.find(a=>a.name===t),i=r==null?void 0:r.type,o=n[t];return i&&!s.includes(i)?YC(i,o):qx(o)},YC=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return XI(e,n)}switch(t){case kt.bool:return GI(e);case kt.float4:case kt.float8:case kt.int2:case kt.int4:case kt.int8:case kt.numeric:case kt.oid:return YI(e);case kt.json:case kt.jsonb:return QI(e);case kt.timestamp:return JI(e);case kt.abstime:case kt.date:case kt.daterange:case kt.int4range:case kt.int8range:case kt.money:case kt.reltime:case kt.text:case kt.time:case kt.timestamptz:case kt.timetz:case kt.tsrange:case kt.tstzrange:return qx(e);default:return qx(e)}},qx=t=>t,GI=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},YI=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},QI=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},XI=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,s=t[n];if(t[0]==="{"&&s==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>YC(e,a))}return t},JI=t=>typeof t=="string"?t.replace(" ","T"):t,QC=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Mm{constructor(e,n,s={},r=Wx){this.channel=e,this.event=n,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var s;return this._hasReceived(e)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Fw;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Fw||(Fw={}));class Zc{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Zc.syncState(this.state,r,i,o),this.pendingDiffs.forEach(l=>{this.state=Zc.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(s.diff,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Zc.syncDiff(this.state,r,i,o),a())}),this.onJoin((r,i,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:o})}),this.onLeave((r,i,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,s,r){const i=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(i,(u,d)=>{o[u]||(l[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const f=d.map(y=>y.presence_ref),p=h.map(y=>y.presence_ref),w=d.filter(y=>p.indexOf(y.presence_ref)<0),x=h.filter(y=>f.indexOf(y.presence_ref)<0);w.length>0&&(a[u]=w),x.length>0&&(l[u]=x)}else a[u]=d}),this.syncDiff(i,{joins:a,leaves:l},s,r)}static syncDiff(e,n,s,r){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(i,(a,l)=>{var u;const d=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),d.length>0){const h=e[a].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);e[a].unshift(...f)}s(a,d,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const d=l.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[a]=u,r(a,u,l),u.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(s=>n(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,s)=>{const r=e[s];return"metas"in r?n[s]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[s]=r,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var zw;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(zw||(zw={}));var eu;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(eu||(eu={}));var Ur;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ur||(Ur={}));class il{constructor(e,n={config:{}},s){var r,i;if(this.topic=e,this.params=n,this.socket=s,this.bindings={},this.state=rn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Mm(this,Js.join,this.params,this.timeout),this.rejoinTimer=new GC(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=rn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=rn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=rn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=rn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=rn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Js.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Zc(this),this.broadcastEndpointURL=QC(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(r=this.params.config)===null||r===void 0?void 0:r.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var s,r,i;if(this.socket.isConnected()||this.socket.connect(),this.state==rn.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,u=(r=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(p=>p.filter))!==null&&r!==void 0?r:[],d=!!this.bindings[eu.PRESENCE]&&this.bindings[eu.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(Ur.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(Ur.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var w;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){e==null||e(Ur.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,y=(w=x==null?void 0:x.length)!==null&&w!==void 0?w:0,g=[];for(let m=0;m<y;m++){const v=x[m],{filter:{event:k,schema:S,table:C,filter:_}}=v,j=p&&p[m];if(j&&j.event===k&&il.isFilterValueEqual(j.schema,S)&&il.isFilterValueEqual(j.table,C)&&il.isFilterValueEqual(j.filter,_))g.push(Object.assign(Object.assign({},v),{id:j.id}));else{this.unsubscribe(),this.state=rn.errored,e==null||e(Ur.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(Ur.SUBSCRIBED);return}}).receive("error",p=>{this.state=rn.errored,e==null||e(Ur.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ur.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,s){return this.state===rn.joined&&e===eu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,s)}async httpSend(e,n,s={}){var r;if(n==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const u=await a.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var s,r;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((r=u.body)===null||r===void 0?void 0:r.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=rn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Js.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(r=>{s=new Mm(this,Js.leave,{},e),s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=rn.closed,this.bindings={}}async _fetchWithTimeout(e,n,s){const r=new AbortController,i=setTimeout(()=>r.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:r.signal}));return clearTimeout(i),o}_push(e,n,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Mm(this,e,n,s);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>VI){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,s){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,s){var r,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:d}=Js;if(s&&[a,l,u,d].indexOf(o)>=0&&s!==this._joinRef())return;let f=this._onMessage(o,n,s);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(p=>{var w,x,y;return((w=p.filter)===null||w===void 0?void 0:w.event)==="*"||((y=(x=p.filter)===null||x===void 0?void 0:x.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(p=>p.callback(f,s)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var w,x,y,g,m,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const k=p.id,S=(w=p.filter)===null||w===void 0?void 0:w.event;return k&&((x=n.ids)===null||x===void 0?void 0:x.includes(k))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((y=n.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const k=(m=(g=p==null?void 0:p.filter)===null||g===void 0?void 0:g.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return k==="*"||k===((v=n==null?void 0:n.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const w=f.data,{schema:x,table:y,commit_timestamp:g,type:m,errors:v}=w;f=Object.assign(Object.assign({},{schema:x,table:y,commit_timestamp:g,eventType:m,new:{},old:{},errors:v}),this._getPayloadRecords(w))}p.callback(f,s)})}_isClosed(){return this.state===rn.closed}_isJoined(){return this.state===rn.joined}_isJoining(){return this.state===rn.joining}_isLeaving(){return this.state===rn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,s){const r=e.toLocaleLowerCase(),i={type:r,filter:n,callback:s};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,n){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&il.isEqual(r.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const s in e)if(e[s]!==n[s])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Js.close,{},e)}_onError(e){this._on(Js.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=rn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=$w(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=$w(e.columns,e.old_record)),n}}const Im=()=>{},ih={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},ZI=[1e3,2e3,5e3,1e4],eD=1e4,tD=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class nD{constructor(e,n){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Wx,this.transport=null,this.heartbeatIntervalMs=ih.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Im,this.ref=0,this.reconnectTimer=null,this.vsn=Lw,this.logger=Im,this.conn=null,this.sendBuffer=[],this.serializer=new qI,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=r=>r?(...i)=>r(...i):(...i)=>fetch(...i),!(!((s=n==null?void 0:n.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Vx.websocket}`,this.httpEndpoint=QC(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=zI.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,s){this.logger(e,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case bi.connecting:return Ao.Connecting;case bi.open:return Ao.Open;case bi.closing:return Ao.Closing;default:return Ao.Closed}}isConnected(){return this.connectionState()===Ao.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const s=`realtime:${e}`,r=this.getChannels().find(i=>i.topic===s);if(r)return r;{const i=new il(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:s,payload:r,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${s} (${i})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(WI,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},ih.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:r,payload:i,ref:o}=n,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${s} ${r} ${a}`.trim(),i),this.channels.filter(u=>u._isMember(s)).forEach(u=>u._trigger(r,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===bi.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===bi.open||this.conn.readyState===bi.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Js.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const s=e.match(/\?/)?"&":"?",r=new URLSearchParams(n);return`${e}${s}${r}`}_workerObjectUrl(e){let n;if(e)n=e;else{const s=new Blob([tD],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,s=!1;if(e)n=e,s=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(r){this.log("error","Error fetching access token from callback",r),n=this.accessTokenValue}else n=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:UI};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Js.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(n)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new GC(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ih.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,s,r,i,o,a,l,u,d,h,f,p;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:Wx,this.heartbeatIntervalMs=(r=e==null?void 0:e.heartbeatIntervalMs)!==null&&r!==void 0?r:ih.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:Im,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:Lw,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:w=>ZI[w-1]||eD,this.vsn){case KC:this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(w,x)=>x(JSON.stringify(w)),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:(w,x)=>x(JSON.parse(w));break;case HI:this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(p=e==null?void 0:e.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var Nu=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function sD(t,e,n){const s=new URL(e,t);if(n)for(const[r,i]of Object.entries(n))i!==void 0&&s.searchParams.set(r,i);return s.toString()}async function rD(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function iD(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:s,query:r,body:i,headers:o}){const a=sD(t.baseUrl,s,r),l=await rD(t.auth),u=await e(a,{method:n,headers:{...i?{"Content-Type":"application/json"}:{},...l,...o},body:i?JSON.stringify(i):void 0}),d=await u.text(),h=(u.headers.get("content-type")||"").includes("application/json"),f=h&&d?JSON.parse(d):d;if(!u.ok){const p=h?f:void 0,w=p==null?void 0:p.error;throw new Nu((w==null?void 0:w.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:w==null?void 0:w.type,icebergCode:w==null?void 0:w.code,details:p})}return{status:u.status,headers:u.headers,data:f}}}}function oh(t){return t.join("")}var oD=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:oh(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${oh(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${oh(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${oh(t.namespace)}`}),!0}catch(e){if(e instanceof Nu&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof Nu&&n.status===409)return;throw n}}};function Ra(t){return t.join("")}var aD=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ra(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ra(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ra(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ra(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ra(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ra(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof Nu&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof Nu&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},lD=class{constructor(t){var s;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=iD({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(s=t.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new oD(this.client,e),this.tableOps=new aD(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},Ep=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function Ft(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var cD=class extends Ep{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Kx=class extends Ep{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const Dv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),uD=()=>Response,Gx=t=>{if(Array.isArray(t))return t.map(n=>Gx(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,s])=>{const r=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[r]=Gx(s)}),e},dD=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},hD=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Eu(t){"@babel/helpers - typeof";return Eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eu(t)}function fD(t,e){if(Eu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(Eu(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pD(t){var e=fD(t,"string");return Eu(e)=="symbol"?e:e+""}function mD(t,e,n){return(e=pD(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Be(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Bw(Object(n),!0).forEach(function(s){mD(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bw(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}const Dm=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},gD=async(t,e,n)=>{t instanceof await uD()&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const r=t.status||500,i=(s==null?void 0:s.statusCode)||r+"";e(new cD(Dm(s),r,i))}).catch(s=>{e(new Kx(Dm(s),s))}):e(new Kx(Dm(t),t))},xD=(t,e,n,s)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!s?r:(dD(s)?(r.headers=Be({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(s)):r.body=s,e!=null&&e.duplex&&(r.duplex=e.duplex),Be(Be({},r),n))};async function pd(t,e,n,s,r,i){return new Promise((o,a)=>{t(n,xD(e,s,r,i)).then(l=>{if(!l.ok)throw l;return s!=null&&s.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>gD(l,a,s))})}async function Tu(t,e,n,s){return pd(t,"GET",e,n,s)}async function Gs(t,e,n,s,r){return pd(t,"POST",e,s,r,n)}async function Yx(t,e,n,s,r){return pd(t,"PUT",e,s,r,n)}async function yD(t,e,n,s){return pd(t,"HEAD",e,Be(Be({},n),{},{noResolveJson:!0}),s)}async function Lv(t,e,n,s,r){return pd(t,"DELETE",e,s,r,n)}var vD=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Ft(e))return{data:null,error:e};throw e}}};let XC;XC=Symbol.toStringTag;var bD=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[XC]="BlobDownloadBuilder",this.promise=null}asStream(){return new vD(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Ft(e))return{data:null,error:e};throw e}}};const wD={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Uw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var kD=class{constructor(t,e={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=Dv(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,s){var r=this;try{let i;const o=Be(Be({},Uw),s);let a=Be(Be({},r.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",r.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),l&&!i.has("metadata")&&i.append("metadata",r.encodeMetadata(l))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=r.toBase64(r.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),s!=null&&s.headers&&(a=Be(Be({},a),s.headers));const u=r._removeEmptyFolders(e),d=r._getFinalPath(u),h=await(t=="PUT"?Yx:Gs)(r.fetch,`${r.url}/object/${d}`,i,Be({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Ft(i))return{data:null,error:i};throw i}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,s){var r=this;const i=r._removeEmptyFolders(t),o=r._getFinalPath(i),a=new URL(r.url+`/object/upload/sign/${o}`);a.searchParams.set("token",e);try{let l;const u=Be({upsert:Uw.upsert},s),d=Be(Be({},r.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{data:{path:i,fullPath:(await Yx(r.fetch,a.toString(),l,{headers:d})).Key},error:null}}catch(l){if(r.shouldThrowOnError)throw l;if(Ft(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(t,e){var n=this;try{let s=n._getFinalPath(t);const r=Be({},n.headers);e!=null&&e.upsert&&(r["x-upsert"]="true");const i=await Gs(n.fetch,`${n.url}/object/upload/sign/${s}`,{},{headers:r}),o=new URL(n.url+i.url),a=o.searchParams.get("token");if(!a)throw new Ep("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Ft(s))return{data:null,error:s};throw s}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var s=this;try{return{data:await Gs(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:s.headers}),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(Ft(r))return{data:null,error:r};throw r}}async copy(t,e,n){var s=this;try{return{data:{path:(await Gs(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:s.headers})).Key},error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(Ft(r))return{data:null,error:r};throw r}}async createSignedUrl(t,e,n){var s=this;try{let r=s._getFinalPath(t),i=await Gs(s.fetch,`${s.url}/object/sign/${r}`,Be({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:s.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${s.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(Ft(r))return{data:null,error:r};throw r}}async createSignedUrls(t,e,n){var s=this;try{const r=await Gs(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:e,paths:t},{headers:s.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:r.map(o=>Be(Be({},o),{},{signedUrl:o.signedURL?encodeURI(`${s.url}${o.signedURL}${i}`):null})),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(Ft(r))return{data:null,error:r};throw r}}download(t,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),r=s?`?${s}`:"",i=this._getFinalPath(t),o=()=>Tu(this.fetch,`${this.url}/${n}/${i}${r}`,{headers:this.headers,noResolveJson:!0});return new bD(o,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:Gx(await Tu(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Ft(s))return{data:null,error:s};throw s}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await yD(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Ft(s)&&s instanceof Kx){const r=s.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:s}}throw s}}getPublicUrl(t,e){const n=this._getFinalPath(t),s=[],r=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";r!==""&&s.push(r);const i=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});o!==""&&s.push(o);let a=s.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${a}`)}}}async remove(t){var e=this;try{return{data:await Lv(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ft(n))return{data:null,error:n};throw n}}async list(t,e,n){var s=this;try{const r=Be(Be(Be({},wD),e),{},{prefix:t||""});return{data:await Gs(s.fetch,`${s.url}/object/list/${s.bucketId}`,r,{headers:s.headers},n),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(Ft(r))return{data:null,error:r};throw r}}async listV2(t,e){var n=this;try{const s=Be({},t);return{data:await Gs(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,s,{headers:n.headers},e),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Ft(s))return{data:null,error:s};throw s}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const JC="2.88.0",ZC={"X-Client-Info":`storage-js/${JC}`};var _D=class{constructor(t,e={},n,s){this.shouldThrowOnError=!1;const r=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(r.hostname)&&!r.hostname.includes("storage.supabase.")&&(r.hostname=r.hostname.replace("supabase.","storage.supabase.")),this.url=r.href.replace(/\/$/,""),this.headers=Be(Be({},ZC),e),this.fetch=Dv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await Tu(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ft(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await Tu(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ft(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await Gs(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Ft(s))return{data:null,error:s};throw s}}async updateBucket(t,e){var n=this;try{return{data:await Yx(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Ft(s))return{data:null,error:s};throw s}}async emptyBucket(t){var e=this;try{return{data:await Gs(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ft(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await Lv(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ft(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},SD=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Be(Be({},ZC),e),this.fetch=Dv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Gs(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ft(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const s=n.toString(),r=s?`${e.url}/bucket?${s}`:`${e.url}/bucket`;return{data:await Tu(e.fetch,r,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ft(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await Lv(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ft(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!hD(t))throw new Ep("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new lD({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(n,{get(r,i){const o=r[i];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(r,a),error:null}}catch(l){if(s)throw l;return{data:null,error:l}}}}})}};const $v={"X-Client-Info":`storage-js/${JC}`,"Content-Type":"application/json"};var eN=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function ms(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var Lm=class extends eN{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},jD=class extends eN{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const Fv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),CD=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Hw=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),ND=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const s=t.status||500,r=t;if(typeof r.json=="function")r.json().then(i=>{const o=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||s+"";e(new Lm(Hw(i),s,o))}).catch(()=>{const i=s+"";e(new Lm(r.statusText||`HTTP ${s} error`,s,i))});else{const i=s+"";e(new Lm(r.statusText||`HTTP ${s} error`,s,i))}}else e(new jD(Hw(t),t))},ED=(t,e,n,s)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return s?(CD(s)?(r.headers=Be({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(s)):r.body=s,Be(Be({},r),n)):r};async function TD(t,e,n,s,r,i){return new Promise((o,a)=>{t(n,ED(e,s,r,i)).then(l=>{if(!l.ok)throw l;if(s!=null&&s.noResolveJson)return l;const u=l.headers.get("content-type");return!u||!u.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>ND(l,a,s))})}async function gs(t,e,n,s,r){return TD(t,"POST",e,s,r,n)}var PD=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Be(Be({},$v),e),this.fetch=Fv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await gs(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await gs(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(ms(s))return{data:null,error:s};throw s}}async listIndexes(t){var e=this;try{return{data:await gs(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await gs(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(ms(s))return{data:null,error:s};throw s}}},RD=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Be(Be({},$v),e),this.fetch=Fv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await gs(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await gs(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await gs(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await gs(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await gs(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}}},AD=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Be(Be({},$v),e),this.fetch=Fv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await gs(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await gs(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await gs(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await gs(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}}},OD=class extends AD{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new MD(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},MD=class extends PD{constructor(t,e,n,s){super(t,e,s),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,Be(Be({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,Be(Be({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new ID(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},ID=class extends RD{constructor(t,e,n,s,r){super(t,e,r),this.vectorBucketName=n,this.indexName=s}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,Be(Be({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,Be(Be({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,Be(Be({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,Be(Be({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,Be(Be({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},DD=class extends _D{constructor(t,e={},n,s){super(t,e,n,s)}from(t){return new kD(this.url,this.headers,t,this.fetch)}get vectors(){return new OD(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new SD(this.url+"/iceberg",this.headers,this.fetch)}};const tN="2.88.0",Va=30*1e3,Qx=3,$m=Qx*Va,LD="http://localhost:9999",$D="supabase.auth.token",FD={"X-Client-Info":`gotrue-js/${tN}`},Xx="X-Supabase-Api-Version",nN={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},zD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,BD=10*60*1e3;class Pu extends Error{constructor(e,n,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}}function Re(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class UD extends Pu{constructor(e,n,s){super(e,n,s),this.name="AuthApiError",this.status=n,this.code=s}}function HD(t){return Re(t)&&t.name==="AuthApiError"}class Oo extends Pu{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class ui extends Pu{constructor(e,n,s,r){super(e,s,r),this.name=n,this.status=s}}class us extends ui{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function WD(t){return Re(t)&&t.name==="AuthSessionMissingError"}class Aa extends ui{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ah extends ui{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class lh extends ui{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function VD(t){return Re(t)&&t.name==="AuthImplicitGrantRedirectError"}class Ww extends ui{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class qD extends ui{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Jx extends ui{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Fm(t){return Re(t)&&t.name==="AuthRetryableFetchError"}class Vw extends ui{constructor(e,n,s){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}}class Zx extends ui{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Bf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),qw=` 	
\r=`.split(""),KD=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<qw.length;e+=1)t[qw[e].charCodeAt(0)]=-2;for(let e=0;e<Bf.length;e+=1)t[Bf[e].charCodeAt(0)]=e;return t})();function Kw(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(Bf[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(Bf[s]),e.queuedBits-=6}}function sN(t,e,n){const s=KD[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Gw(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},i=o=>{QD(o,s,n)};for(let o=0;o<t.length;o+=1)sN(t.charCodeAt(o),r,i);return e.join("")}function GD(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function YD(t,e){for(let n=0;n<t.length;n+=1){let s=t.charCodeAt(n);if(s>55295&&s<=56319){const r=(s-55296)*1024&65535;s=(t.charCodeAt(n+1)-56320&65535|r)+65536,n+=1}GD(s,e)}}function QD(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let s=1;s<6;s+=1)if(!(t>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function ml(t){const e=[],n={queue:0,queuedBits:0},s=r=>{e.push(r)};for(let r=0;r<t.length;r+=1)sN(t.charCodeAt(r),n,s);return new Uint8Array(e)}function XD(t){const e=[];return YD(t,n=>e.push(n)),new Uint8Array(e)}function $o(t){const e=[],n={queue:0,queuedBits:0},s=r=>{e.push(r)};return t.forEach(r=>Kw(r,n,s)),Kw(null,n,s),e.join("")}function JD(t){return Math.round(Date.now()/1e3)+t}function ZD(){return Symbol("auth-callback")}const xn=()=>typeof window<"u"&&typeof document<"u",ko={tested:!1,writable:!1},rN=()=>{if(!xn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ko.tested)return ko.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ko.tested=!0,ko.writable=!0}catch{ko.tested=!0,ko.writable=!1}return ko.writable};function eL(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((r,i)=>{e[i]=r})}catch{}return n.searchParams.forEach((s,r)=>{e[r]=s}),e}const iN=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),tL=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",qa=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},_o=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},gn=async(t,e)=>{await t.removeItem(e)};class Tp{constructor(){this.promise=new Tp.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Tp.promiseConstructor=Promise;function zm(t){const e=t.split(".");if(e.length!==3)throw new Zx("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!zD.test(e[s]))throw new Zx("JWT not in base64url format");return{header:JSON.parse(Gw(e[0])),payload:JSON.parse(Gw(e[1])),signature:ml(e[2]),raw:{header:e[0],payload:e[1]}}}async function nL(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function sL(t,e){return new Promise((s,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){s(o);return}}catch(o){if(!e(i,o)){r(o);return}}})()})}function rL(t){return("0"+t.toString(16)).substr(-2)}function iL(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let r="";for(let i=0;i<56;i++)r+=n.charAt(Math.floor(Math.random()*s));return r}return crypto.getRandomValues(e),Array.from(e,rL).join("")}async function oL(t){const n=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",n),r=new Uint8Array(s);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}async function aL(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await oL(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Oa(t,e,n=!1){const s=iL();let r=s;n&&(r+="/PASSWORD_RECOVERY"),await qa(t,`${e}-code-verifier`,r);const i=await aL(s);return[i,s===i?"plain":"s256"]}const lL=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function cL(t){const e=t.headers.get(Xx);if(!e||!e.match(lL))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function uL(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function dL(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const hL=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ma(t){if(!hL.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Bm(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function fL(t,e){return new Proxy(t,{get:(n,s,r)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const i=s.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,s,r)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,s,r)}})}function Yw(t){return JSON.parse(JSON.stringify(t))}const To=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),pL=[502,503,504];async function Qw(t){var e;if(!tL(t))throw new Jx(To(t),0);if(pL.includes(t.status))throw new Jx(To(t),t.status);let n;try{n=await t.json()}catch(i){throw new Oo(To(i),i)}let s;const r=cL(t);if(r&&r.getTime()>=nN["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new Vw(To(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new us}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Vw(To(n),t.status,n.weak_password.reasons);throw new UD(To(n),t.status||500,s)}const mL=(t,e,n,s)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),n))};async function ze(t,e,n,s){var r;const i=Object.assign({},s==null?void 0:s.headers);i[Xx]||(i[Xx]=nN["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(r=s==null?void 0:s.query)!==null&&r!==void 0?r:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await gL(t,e,n+a,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(l):{data:Object.assign({},l),error:null}}async function gL(t,e,n,s,r,i){const o=mL(e,s,r,i);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new Jx(To(l),0)}if(a.ok||await Qw(a),s!=null&&s.noResolveJson)return a;try{return await a.json()}catch(l){await Qw(l)}}function qs(t){var e;let n=null;vL(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=JD(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:s},error:null}}function Xw(t){const e=qs(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function _i(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function xL(t){return{data:t,error:null}}function yL(t){const{action_link:e,email_otp:n,hashed_token:s,redirect_to:r,verification_type:i}=t,o=ec(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:s,redirect_to:r,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Jw(t){return t}function vL(t){return t.access_token&&t.refresh_token&&t.expires_in}const Um=["global","local","others"];class bL{constructor({url:e="",headers:n={},fetch:s}){this.url=e,this.headers=n,this.fetch=iN(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Um[0]){if(Um.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Um.join(", ")}`);try{return await ze(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Re(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,n={}){try{return await ze(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:_i})}catch(s){if(Re(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:n}=e,s=ec(e,["options"]),r=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(r.new_email=s==null?void 0:s.newEmail,delete r.newEmail),await ze(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:yL,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Re(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ze(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:_i})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,s,r,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},d=await ze(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:Jw});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(w=>{const x=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(w.split(";")[1].split("=")[1]);u[`${y}Page`]=x}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Re(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Ma(e);try{return await ze(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:_i})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Ma(e);try{return await ze(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:_i})}catch(s){if(Re(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,n=!1){Ma(e);try{return await ze(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:_i})}catch(s){if(Re(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Ma(e.userId);try{const{data:n,error:s}=await ze(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:n,error:s}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Ma(e.userId),Ma(e.id);try{return{data:await ze(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,s,r,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},d=await ze(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:Jw});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(w=>{const x=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(w.split(";")[1].split("=")[1]);u[`${y}Page`]=x}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Re(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await ze(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await ze(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await ze(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Re(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await ze(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await ze(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}}function Zw(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Ia={debug:!!(globalThis&&rN()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class oN extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class wL extends oN{}async function kL(t,e,n){Ia.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Ia.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async r=>{if(r){Ia.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,r.name);try{return await n()}finally{Ia.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,r.name)}}else{if(e===0)throw Ia.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new wL(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ia.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function _L(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function aN(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function SL(t){return parseInt(t,16)}function jL(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function CL(t){var e;const{chainId:n,domain:s,expirationTime:r,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:u,scheme:d,uri:h,version:f}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const p=aN(t.address),w=d?`${d}://${s}`:s,x=t.statement?`${t.statement}
`:"",y=`${w} wants you to sign in with your Ethereum account:
${p}

${x}`;let g=`URI: ${h}
Version: ${f}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(r&&(g+=`
Expiration Time: ${r.toISOString()}`),a&&(g+=`
Not Before: ${a.toISOString()}`),l&&(g+=`
Request ID: ${l}`),u){let m=`
Resources:`;for(const v of u){if(!v||typeof v!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${v}`);m+=`
- ${v}`}g+=m}return`${y}
${g}`}class Jt extends Error{constructor({message:e,code:n,cause:s,name:r}){var i;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(i=r??(s instanceof Error?s.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class Uf extends Jt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function NL({error:t,options:e}){var n,s,r;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Jt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Jt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Jt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Jt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Jt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Jt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Jt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Jt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(lN(o)){if(i.rp.id!==o)return new Jt({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Jt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Jt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Jt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Jt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function EL({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Jt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Jt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(lN(s)){if(n.rpId!==s)return new Jt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Jt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Jt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Jt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class TL{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const PL=new TL;function RL(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:s}=t,r=ec(t,["challenge","user","excludeCredentials"]),i=ml(e).buffer,o=Object.assign(Object.assign({},n),{id:ml(n.id).buffer}),a=Object.assign(Object.assign({},r),{challenge:i,user:o});if(s&&s.length>0){a.excludeCredentials=new Array(s.length);for(let l=0;l<s.length;l++){const u=s[l];a.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:ml(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function AL(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,s=ec(t,["challenge","allowCredentials"]),r=ml(e).buffer,i=Object.assign(Object.assign({},s),{challenge:r});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:ml(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function OL(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:$o(new Uint8Array(t.response.attestationObject)),clientDataJSON:$o(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function ML(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,s=t.getClientExtensionResults(),r=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:$o(new Uint8Array(r.authenticatorData)),clientDataJSON:$o(new Uint8Array(r.clientDataJSON)),signature:$o(new Uint8Array(r.signature)),userHandle:r.userHandle?$o(new Uint8Array(r.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function lN(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function ek(){var t,e;return!!(xn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function IL(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Uf("Browser returned unexpected credential type",e)}:{data:null,error:new Uf("Empty credential response",e)}}catch(e){return{data:null,error:NL({error:e,options:t})}}}async function DL(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Uf("Browser returned unexpected credential type",e)}:{data:null,error:new Uf("Empty credential response",e)}}catch(e){return{data:null,error:EL({error:e,options:t})}}}const LL={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},$L={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Hf(...t){const e=r=>r!==null&&typeof r=="object"&&!Array.isArray(r),n=r=>r instanceof ArrayBuffer||ArrayBuffer.isView(r),s={};for(const r of t)if(r)for(const i in r){const o=r[i];if(o!==void 0)if(Array.isArray(o))s[i]=o;else if(n(o))s[i]=o;else if(e(o)){const a=s[i];e(a)?s[i]=Hf(a,o):s[i]=Hf(o)}else s[i]=o}return s}function FL(t,e){return Hf(LL,t,e||{})}function zL(t,e){return Hf($L,t,e||{})}class BL{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:s,signal:r},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!o)return{data:null,error:a};const l=r??PL.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${s}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=FL(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:h}=await IL({publicKey:u,signal:l});return d?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=zL(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:h}=await DL(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:l}));return d?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(o){return Re(o)?{data:null,error:o}:{data:null,error:new Oo("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:n,webauthn:s}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},i){if(!n)return{data:null,error:new Pu("rpId is required for WebAuthn authentication")};try{if(!ek())return{data:null,error:new Oo("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:s},signal:r},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:s,credential_response:l.credential_response}})}catch(o){return Re(o)?{data:null,error:o}:{data:null,error:new Oo("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},i){if(!n)return{data:null,error:new Pu("rpId is required for WebAuthn registration")};try{if(!ek())return{data:null,error:new Oo("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:a};const{data:l,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:s},signal:r},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:s,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(o){return Re(o)?{data:null,error:o}:{data:null,error:new Oo("Unexpected error in register",o)}}}}_L();const UL={url:LD,storageKey:$D,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:FD,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function tk(t,e,n){return await n()}const Da={};class Ru{get jwks(){var e,n;return(n=(e=Da[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Da[this.storageKey]=Object.assign(Object.assign({},Da[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Da[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Da[this.storageKey]=Object.assign(Object.assign({},Da[this.storageKey]),{cachedAt:e})}constructor(e){var n,s,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},UL),e);if(this.storageKey=i.storageKey,this.instanceID=(n=Ru.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Ru.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&xn()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new bL({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=iN(i.fetch),this.lock=i.lock||tk,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&xn()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=kL:this.lock=tk,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new BL(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:rN()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Zw(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Zw(this.memoryStorage)),xn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${tN}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},s="none";if(xn()&&(n=eL(window.location.href),this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce")),xn()&&this.detectSessionInUrl&&s!=="none"){const{data:r,error:i}=await this._getSessionFromURL(n,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),VD(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Re(n)?this._returnResult({error:n}):this._returnResult({error:new Oo("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,s,r;try{const i=await ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:qs}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(Re(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var n,s,r;try{let i;if("email"in e){const{email:d,password:h,options:f}=e;let p=null,w=null;this.flowType==="pkce"&&([p,w]=await Oa(this.storage,this.storageKey)),i=await ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:w},xform:qs})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},channel:(r=f==null?void 0:f.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:qs})}else throw new ah("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return await gn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(await gn(this.storage,`${this.storageKey}-code-verifier`),Re(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Xw})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Xw})}else throw new ah("You must provide either an email or phone number and a password");const{data:s,error:r}=n;if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!s||!s.session||!s.user){const i=new Aa;return this._returnResult({data:{user:null,session:null},error:i})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r})}catch(n){if(Re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,s,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,s,r,i,o,a,l,u,d,h,f;let p,w;if("message"in e)p=e.message,w=e.signature;else{const{chain:x,wallet:y,statement:g,options:m}=e;let v;if(xn())if(typeof y=="object")v=y;else{const N=window;if("ethereum"in N&&typeof N.ethereum=="object"&&"request"in N.ethereum&&typeof N.ethereum.request=="function")v=N.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=y}const k=new URL((n=m==null?void 0:m.url)!==null&&n!==void 0?n:window.location.href),S=await v.request({method:"eth_requestAccounts"}).then(N=>N).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const C=aN(S[0]);let _=(s=m==null?void 0:m.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!_){const N=await v.request({method:"eth_chainId"});_=SL(N)}const j={domain:k.host,address:C,statement:g,uri:k.href,version:"1",chainId:_,nonce:(r=m==null?void 0:m.signInWithEthereum)===null||r===void 0?void 0:r.nonce,issuedAt:(o=(i=m==null?void 0:m.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=m==null?void 0:m.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=m==null?void 0:m.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=m==null?void 0:m.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=m==null?void 0:m.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=CL(j),w=await v.request({method:"personal_sign",params:[jL(p),C]})}try{const{data:x,error:y}=await ze(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:w},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:qs});if(y)throw y;if(!x||!x.session||!x.user){const g=new Aa;return this._returnResult({data:{user:null,session:null},error:g})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:y})}catch(x){if(Re(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(e){var n,s,r,i,o,a,l,u,d,h,f,p;let w,x;if("message"in e)w=e.message,x=e.signature;else{const{chain:y,wallet:g,statement:m,options:v}=e;let k;if(xn())if(typeof g=="object")k=g;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))k=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=g}const S=new URL((n=v==null?void 0:v.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in k&&k.signIn){const C=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),m?{statement:m}:null));let _;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")_=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)_=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in _&&"signature"in _&&(typeof _.signedMessage=="string"||_.signedMessage instanceof Uint8Array)&&_.signature instanceof Uint8Array)w=typeof _.signedMessage=="string"?_.signedMessage:new TextDecoder().decode(_.signedMessage),x=_.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${S.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(r=(s=v==null?void 0:v.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((u=v==null?void 0:v.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((h=(d=v==null?void 0:v.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...v.signInWithSolana.resources.map(_=>`- ${_}`)]:[]].join(`
`);const C=await k.signMessage(new TextEncoder().encode(w),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=C}}try{const{data:y,error:g}=await ze(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:$o(x)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:qs});if(g)throw g;if(!y||!y.session||!y.user){const m=new Aa;return this._returnResult({data:{user:null,session:null},error:m})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:g})}catch(y){if(Re(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async _exchangeCodeForSession(e){const n=await _o(this.storage,`${this.storageKey}-code-verifier`),[s,r]=(n??"").split("/");try{if(!s&&this.flowType==="pkce")throw new qD;const{data:i,error:o}=await ze(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:qs});if(await gn(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new Aa;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:r??null}),error:o})}catch(i){if(await gn(this.storage,`${this.storageKey}-code-verifier`),Re(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:n,provider:s,token:r,access_token:i,nonce:o}=e,a=await ze(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:qs}),{data:l,error:u}=a;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const d=new Aa;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(n){if(Re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,s,r,i,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Oa(this.storage,this.storageKey));const{error:h}=await ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:d}=await ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new ah("You must provide either an email or phone number.")}catch(a){if(await gn(this.storage,`${this.storageKey}-code-verifier`),Re(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var n,s;try{let r,i;"options"in e&&(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:a}=await ze(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:qs});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(r){if(Re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithSSO(e){var n,s,r,i,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await Oa(this.storage,this.storageKey));const u=await ze(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:xL});return!((i=u.data)===null||i===void 0)&&i.url&&xn()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(a){if(await gn(this.storage,`${this.storageKey}-code-verifier`),Re(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;if(s)throw s;if(!n)throw new us;const{error:r}=await ze(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:r})})}catch(e){if(Re(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:i}=e,{error:o}=await ze(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:s,type:r,options:i}=e,{data:o,error:a}=await ze(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new ah("You must provide either an email or phone number and a type")}catch(n){if(Re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await _o(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<$m:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const o=await _o(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Bm()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=fL(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:r},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:_i}):await this._useSession(async n=>{var s,r,i;const{data:o,error:a}=n;if(a)throw a;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new us}:await ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:_i})})}catch(n){if(Re(n))return WD(n)&&(await this._removeSession(),await gn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async s=>{const{data:r,error:i}=s;if(i)throw i;if(!r.session)throw new us;const o=r.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Oa(this.storage,this.storageKey));const{data:u,error:d}=await ze(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:_i});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(s){if(await gn(this.storage,`${this.storageKey}-code-verifier`),Re(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new us;const n=Date.now()/1e3;let s=n,r=!0,i=null;const{payload:o}=zm(e.access_token);if(o.exp&&(s=o.exp,r=s<=n),r){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(n){if(Re(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var s;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new us;const{data:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):r?this._returnResult({data:{user:r.user,session:r},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!xn())throw new lh("No browser detected.");if(e.error||e.error_description||e.error_code)throw new lh(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Ww("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new lh("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ww("No code detected.");const{data:m,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:r,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!i||!a||!o||!u)throw new lh("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(a);let f=d+h;l&&(f=parseInt(l));const p=f-d;p*1e3<=Va&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const w=f-h;d-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,f,d):d-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,f,d);const{data:x,error:y}=await this._getUser(i);if(y)throw y;const g={provider_token:s,provider_refresh_token:r,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:e.type},error:null})}catch(s){if(Re(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await _o(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:r,error:i}=n;if(i)return this._returnResult({error:i});const o=(s=r.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(HD(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await gn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=ZD(),s={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async n=>{var s,r;try{const{data:{session:i},error:o}=n;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let s=null,r=null;this.flowType==="pkce"&&([s,r]=await Oa(this.storage,this.storageKey,!0));try{return await ze(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(await gn(this.storage,`${this.storageKey}-code-verifier`),Re(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:s,error:r}=await this._useSession(async i=>{var o,a,l,u,d;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ze(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(r)throw r;return xn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:e.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(Re(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var s;try{const{error:r,data:{session:i}}=n;if(r)throw r;const{options:o,provider:a,token:l,access_token:u,nonce:d}=e,h=await ze(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=i==null?void 0:i.access_token)!==null&&s!==void 0?s:void 0,body:{provider:a,id_token:l,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:qs}),{data:f,error:p}=h;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Aa}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(r){if(await gn(this.storage,`${this.storageKey}-code-verifier`),Re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var s,r;const{data:i,error:o}=n;if(o)throw o;return await ze(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:void 0})})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const s=Date.now();return await sL(async r=>(r>0&&await nL(200*Math.pow(2,r-1)),this._debug(n,"refreshing attempt",r),await ze(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:qs})),(r,i)=>{const o=200*Math.pow(2,r);return i&&Fm(i)&&Date.now()+o-s<Va})}catch(s){if(this._debug(n,"error",s),Re(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",s),xn()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,n;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const r=await _o(this.storage,this.storageKey);if(r&&this.userStorage){let o=await _o(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:r.user},await qa(this.userStorage,this.storageKey+"-user",o)),r.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Bm()}else if(r&&!r.user&&!r.user){const o=await _o(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(r.user=o.user,await gn(this.storage,this.storageKey+"-user"),await qa(this.storage,this.storageKey,r)):r.user=Bm()}if(this._debug(s,"session from storage",r),!this._isValidSession(r)){this._debug(s,"session is not valid"),r!==null&&await this._removeSession();return}const i=((n=r.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<$m;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${$m}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),Fm(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(r.access_token);!a&&(o!=null&&o.user)?(r.user=o.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(s,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(s,"error",r),console.error(r);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var n,s;if(!e)throw new us;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Tp;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new us;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(r,"error",i),Re(i)){const o={data:null,error:i};return Fm(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,n,s=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",n,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await gn(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),s=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&n.user&&await qa(this.userStorage,this.storageKey+"-user",{user:n.user});const r=Object.assign({},n);delete r.user;const i=Yw(r);await qa(this.storage,this.storageKey,i)}else{const r=Yw(n);await qa(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await gn(this.storage,this.storageKey),await gn(this.storage,this.storageKey+"-code-verifier"),await gn(this.storage,this.storageKey+"-user"),this.userStorage&&await gn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&xn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Va);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((s.expires_at*1e3-e)/Va);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Va}ms, refresh threshold is ${Qx} ticks`),r<=Qx&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof oN)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!xn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,s){const r=[`provider=${encodeURIComponent(n)}`];if(s!=null&&s.redirectTo&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await Oa(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(a.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);r.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&r.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var s;const{data:r,error:i}=n;return i?this._returnResult({data:null,error:i}):await ze(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var s,r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:u}=await ze(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&l.type==="totp"&&(!((r=l==null?void 0:l.totp)===null||r===void 0)&&r.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:r,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?OL(e.webauthn.credential_response):ML(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await ze(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:r,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=await ze(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:RL(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:AL(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:s}=await this.getUser();if(s)return{data:null,error:s};const r={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])r.all.push(i),i.status==="verified"&&r[i.factor_type].push(i);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:s},error:r}=await this.getSession();if(r)return this._returnResult({data:null,error:r});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=zm(s.access_token);let o=null;i.aal&&(o=i.aal);let a=o;((n=(e=s.user.factors)===null||e===void 0?void 0:e.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(a="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:s},error:r}=n;return r?this._returnResult({data:null,error:r}):s?await ze(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new us})})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async s=>{const{data:{session:r},error:i}=s;if(i)return this._returnResult({data:null,error:i});if(!r)return this._returnResult({data:null,error:new us});const o=await ze(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&xn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(s){if(Re(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,n){try{return await this._useSession(async s=>{const{data:{session:r},error:i}=s;if(i)return this._returnResult({data:null,error:i});if(!r)return this._returnResult({data:null,error:new us});const o=await ze(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&xn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(s){if(Re(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;return s?this._returnResult({data:null,error:s}):n?await ze(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:r=>({data:r,error:null})}):this._returnResult({data:null,error:new us})})}catch(e){if(Re(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:s},error:r}=n;return r?this._returnResult({data:null,error:r}):s?(await ze(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new us})})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let s=n.keys.find(a=>a.kid===e);if(s)return s;const r=Date.now();if(s=this.jwks.keys.find(a=>a.kid===e),s&&this.jwks_cached_at+BD>r)return s;const{data:i,error:o}=await ze(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=r,s=i.keys.find(a=>a.kid===e),!s)?null:s}async getClaims(e,n={}){try{let s=e;if(!s){const{data:p,error:w}=await this.getSession();if(w||!p.session)return this._returnResult({data:null,error:w});s=p.session.access_token}const{header:r,payload:i,signature:o,raw:{header:a,payload:l}}=zm(s);n!=null&&n.allowExpired||uL(i.exp);const u=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:p}=await this.getUser(s);if(p)throw p;return{data:{claims:i,header:r,signature:o},error:null}}const d=dL(r.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,XD(`${a}.${l}`)))throw new Zx("Invalid JWT signature");return{data:{claims:i,header:r,signature:o},error:null}}catch(s){if(Re(s))return this._returnResult({data:null,error:s});throw s}}}Ru.nextInstanceID={};const HL=Ru,WL="2.88.0";let Dc="";typeof Deno<"u"?Dc="deno":typeof document<"u"?Dc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Dc="react-native":Dc="node";const VL={"X-Client-Info":`supabase-js-${Dc}/${WL}`},qL={headers:VL},KL={schema:"public"},GL={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},YL={};function Au(t){"@babel/helpers - typeof";return Au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Au(t)}function QL(t,e){if(Au(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(Au(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XL(t){var e=QL(t,"string");return Au(e)=="symbol"?e:e+""}function JL(t,e,n){return(e=XL(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function qt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nk(Object(n),!0).forEach(function(s){JL(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nk(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}const ZL=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),e5=()=>Headers,t5=(t,e,n)=>{const s=ZL(n),r=e5();return async(i,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let u=new r(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),s(i,qt(qt({},o),{},{headers:u}))}};function n5(t){return t.endsWith("/")?t:t+"/"}function s5(t,e){var n,s;const{db:r,auth:i,realtime:o,global:a}=t,{db:l,auth:u,realtime:d,global:h}=e,f={db:qt(qt({},l),r),auth:qt(qt({},u),i),realtime:qt(qt({},d),o),storage:{},global:qt(qt(qt({},h),a),{},{headers:qt(qt({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(s=a==null?void 0:a.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function r5(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(n5(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var i5=class extends HL{constructor(t){super(t)}},o5=class{constructor(t,e,n){var s,r;this.supabaseUrl=t,this.supabaseKey=e;const i=r5(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,a={db:KL,realtime:YL,auth:qt(qt({},GL),{},{storageKey:o}),global:qL},l=s5(n??{},a);if(this.storageKey=(s=l.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(r=l.global.headers)!==null&&r!==void 0?r:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=l.auth)!==null&&u!==void 0?u:{},this.headers,l.global.fetch)}this.fetch=t5(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(qt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new FI(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new DD(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new MI(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:s}=await t.auth.getSession();return(e=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:s,userStorage:r,storageKey:i,flowType:o,lock:a,debug:l,throwOnError:u},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new i5({url:this.authUrl.href,headers:qt(qt({},f),d),storageKey:i,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:s,userStorage:r,flowType:o,lock:a,debug:l,throwOnError:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new nD(this.realtimeUrl.href,qt(qt({},t),{},{params:qt(qt({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const a5=(t,e,n)=>new o5(t,e,n);function l5(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}l5()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const tc={SUPABASE_URL:window.SUPABASE_URL||void 0||"",SUPABASE_ANON_KEY:window.SUPABASE_ANON_KEY||void 0||"",API_BASE_URL:window.API_BASE_URL||void 0||""};let ch=null;function cN(){if(ch)return ch;const{SUPABASE_URL:t,SUPABASE_ANON_KEY:e}=tc;return!t||!e?null:(ch=a5(t,e),ch)}const zv="authToken";function Pp(){return localStorage.getItem(zv)}function Lc(t){t&&localStorage.setItem(zv,t)}function gl(){localStorage.removeItem(zv)}async function uN(){var r;const t=Pp();if(t)return t;const e=cN();if(!e)return null;const{data:n}=await e.auth.getSession(),s=((r=n==null?void 0:n.session)==null?void 0:r.access_token)||null;return s&&Lc(s),s}async function Me(t,e={}){const{baseUrl:n,...s}=e,r=`${n??tc.API_BASE_URL}${t}`,i=new Headers(s.headers||{});!(s.body instanceof FormData)&&!i.has("Content-Type")&&i.set("Content-Type","application/json");const a=await uN();a&&!i.has("Authorization")&&i.set("Authorization",`Bearer ${a}`);const l=await fetch(r,{...s,headers:i});if(l.status===401)return gl(),window.dispatchEvent(new CustomEvent("auth:logout")),null;if(!l.ok){const d=await l.json().catch(()=>({detail:"Request failed"})),h=new Error(d.detail||d.error||`Request failed: ${l.status}`);throw h.status=l.status,h.data=d,h}return l.status===204?null:(l.headers.get("content-type")||"").includes("application/json")?l.json():l}async function dN(t,e={}){const{baseUrl:n,...s}=e,r=`${n??tc.API_BASE_URL}${t}`,i=new Headers(s.headers||{}),o=await uN();o&&!i.has("Authorization")&&i.set("Authorization",`Bearer ${o}`);const a=await fetch(r,{...s,headers:i});if(a.status===401)return gl(),window.dispatchEvent(new CustomEvent("auth:logout")),null;if(!a.ok){const l=await a.json().catch(()=>({detail:"Request failed"})),u=new Error(l.detail||l.error||`Request failed: ${a.status}`);throw u.status=a.status,u.data=l,u}return a.blob()}const hN=b.createContext(null),Hm={system_admin:["admin","hos","sales_person"],sales_manager:["hos","sales_person"],sales_user:["sales_person"],coordinator:["coordinator"],finance:["finance"],viewer:["viewer"]},c5={"admin@mmg.com":{password:"admin123",id:"dev-admin-1",name:"Sales Admin",email:"admin@mmg.com",roles:["admin","hos","sales_person"]},"hos@mmg.com":{password:"hos123",id:"dev-hos-1",name:"Head of Sales",email:"hos@mmg.com",roles:["hos","sales_person"]},"sales@mmg.com":{password:"sales123",id:"dev-sales-1",name:"Sales Person",email:"sales@mmg.com",roles:["sales_person"]}};function Wm(t){return Array.from(new Set((t||[]).filter(Boolean).map(e=>String(e).toLowerCase())))}function sk(t=[]){return t.map(e=>String(e||"").replaceAll(".",":"))}function u5(t){return(t||"sales_user").toLowerCase()}function rk(t,e){var n,s,r,i,o,a,l,u,d;return((n=t==null?void 0:t.user_metadata)==null?void 0:n.full_name)||((s=t==null?void 0:t.user_metadata)==null?void 0:s.name)||((o=(i=(r=t==null?void 0:t.identities)==null?void 0:r[0])==null?void 0:i.identity_data)==null?void 0:o.full_name)||((u=(l=(a=t==null?void 0:t.identities)==null?void 0:a[0])==null?void 0:l.identity_data)==null?void 0:u.name)||((d=t==null?void 0:t.email)==null?void 0:d.split("@")[0])||e||"User"}function tf(t,e){const n=(t==null?void 0:t.permissions)||[];if(!n.length)return!1;const s=u=>String(u||"").trim().replaceAll(".",":"),r=n.map(s),i=s(e);if(r.includes("*:*:*"))return!0;const[o,a,l]=i.split(":");return r.some(u=>{const[d,h,f]=u.split(":");return u===i?!0:(d==="*"||d===o)&&(h==="*"||h===a)&&(f==="*"||f===l||f==="manage")})}function md(t){var e,n,s;return((e=t==null?void 0:t.roles)==null?void 0:e.includes("admin"))||((s=(n=t==null?void 0:t.profile)==null?void 0:n.toLowerCase)==null?void 0:s.call(n))==="system_admin"||tf(t,"*:*:*")||tf(t,"core:*:*")||tf(t,"core:system:admin")}function d5({children:t}){const e=cN(),n=!e&&window.location.hostname==="localhost",[s,r]=b.useState(null),[i,o]=b.useState(()=>{const m=localStorage.getItem("mmg_user")||localStorage.getItem("userData");return m?JSON.parse(m):null}),[a,l]=b.useState(!1),[u,d]=b.useState(null);b.useEffect(()=>{const m=window.location.hash;if(!m||!m.includes("error="))return;const v=new URLSearchParams(m.substring(1)),k=v.get("error"),S=v.get("error_code"),C=v.get("error_description");if(k){let _=C?decodeURIComponent(C.replace(/\+/g," ")):"Authentication failed";S==="otp_expired"?_="Email link has expired. Please sign up again to receive a new confirmation email.":S==="access_denied"&&(_="Access denied. The link may have expired or already been used."),setTimeout(()=>alert(_),300),window.history.replaceState(null,"",window.location.pathname+window.location.search)}},[]),b.useEffect(()=>{let m=null;async function v(){console.log("[Auth] init() starting");try{if(!e){console.log("[Auth] No supabase client - dev mode");const C=localStorage.getItem("mmg_user")||localStorage.getItem("userData");C&&o(JSON.parse(C)),l(!0),console.log("[Auth] Dev mode ready");return}console.log("[Auth] Getting supabase session...");const{data:k}=await e.auth.getSession(),S=(k==null?void 0:k.session)||null;console.log("[Auth] Session retrieved",{hasSession:!!S,hasToken:!!(S!=null&&S.access_token)}),r(S||null),l(!0),console.log("[Auth] authReady set to true"),S||(console.log("[Auth] No session - clearing auth"),gl(),o(null),localStorage.removeItem("mmg_user"),localStorage.removeItem("userData")),S!=null&&S.access_token&&Lc(S.access_token),S!=null&&S.access_token&&(console.log("[Auth] Starting background profile refresh"),h(S.access_token,S.user).catch(console.error)),m=e.auth.onAuthStateChange(async(C,_)=>{if(console.log("[Auth] onAuthStateChange",{event:C,hasSession:!!_}),C==="INITIAL_SESSION"){console.log("[Auth] Skipping INITIAL_SESSION (already handled)");return}r(_||null),_!=null&&_.access_token?(Lc(_.access_token),u||(console.log("[Auth] Auth state change - refreshing profile"),h(_.access_token,_.user).catch(console.error))):(console.log("[Auth] Auth state change - no session, clearing"),gl(),o(null),localStorage.removeItem("mmg_user"),localStorage.removeItem("userData"))}).data.subscription}catch(k){console.log("[Auth] init() error",k),l(!0)}}return v(),()=>{var k;return(k=m==null?void 0:m.unsubscribe)==null?void 0:k.call(m)}},[e,u]),b.useEffect(()=>{const m=()=>{d(null),y()};return window.addEventListener("auth:logout",m),()=>window.removeEventListener("auth:logout",m)},[]);async function h(m,v=null){var k,S,C,_;console.log("[Auth] refreshProfile() starting");try{console.log("[Auth] Fetching /api/base/auth/me...");const j=await Me("/api/base/auth/me",{headers:{Authorization:`Bearer ${m}`}});if(console.log("[Auth] /api/base/auth/me response received",{hasProfile:!!j}),!j)return console.log("[Auth] No profile returned"),null;const N=u5((j==null?void 0:j.profile_name)||(j==null?void 0:j.profile)||(j==null?void 0:j.profileName)),P=Hm[N]||["sales_person"],D=(j==null?void 0:j.roles)||(j==null?void 0:j.rbac_roles)||(j==null?void 0:j.user_roles)||[],M={id:(j==null?void 0:j.id)||(v==null?void 0:v.id),email:(j==null?void 0:j.email)||(v==null?void 0:v.email),name:(j==null?void 0:j.name)||rk(v,N),profile:N,profile_name:N,roles:Wm([...P,...D]),permissions:sk((j==null?void 0:j.permissions)||[]),raw:j};return console.log("[Auth] Profile loaded, setting user",{email:M.email,roles:M.roles}),o(M),localStorage.setItem("mmg_user",JSON.stringify(M)),localStorage.setItem("userData",JSON.stringify(M)),d(null),M}catch(j){if(console.log("[Auth] refreshProfile error",j),(j==null?void 0:j.status)===403&&((k=j==null?void 0:j.data)!=null&&k.requiresLogout)){const N=(v==null?void 0:v.email)||(i==null?void 0:i.email)||"";return((S=j==null?void 0:j.data)==null?void 0:S.code)==="USER_PENDING_APPROVAL"?(d({pending:!0,email:N,message:((C=j==null?void 0:j.data)==null?void 0:C.error)||"Your account is pending administrator approval."}),null):(await y(),null)}if(v){console.log("[Auth] Using fallback session user data");const N=((_=v.user_metadata)==null?void 0:_.profile)||"sales_user",P=Hm[N]||["sales_person"],D={id:v.id,email:v.email,name:rk(v,N),profile:N,profile_name:N,roles:Wm(P),permissions:[],raw:v};return console.log("[Auth] Fallback user set",{email:D.email}),o(D),localStorage.setItem("mmg_user",JSON.stringify(D)),localStorage.setItem("userData",JSON.stringify(D)),d(null),D}return console.log("[Auth] No fallback available, returning null"),null}}async function f(){return s!=null&&s.access_token?s.access_token:localStorage.getItem("authToken")}async function p({email:m,password:v}){var C;if(d(null),!e){if(!n)throw new Error("Supabase not configured");const _=c5[m.toLowerCase()];if(!_||_.password!==v)throw new Error("Invalid email or password");const j=_.profile||((C=_.roles)!=null&&C.includes("admin")?"system_admin":"sales_user"),N=Wm(_.roles||Hm[j]||["sales_person"]),P={id:_.id,email:_.email,name:_.name,profile:j,profile_name:j,roles:N,permissions:sk(_.permissions||[]),raw:_},D=`dev-token-${Date.now()}`;return Lc(D),o(P),localStorage.setItem("mmg_user",JSON.stringify(P)),localStorage.setItem("userData",JSON.stringify(P)),P}const{data:k,error:S}=await e.auth.signInWithPassword({email:m,password:v});if(S)throw S;return Lc(k.session.access_token),await h(k.session.access_token,k.session.user),k}async function w(){if(!e)throw new Error("Supabase not configured. Please contact your administrator.");const m=h5(),{data:v,error:k}=await e.auth.signInWithOAuth({provider:"azure",options:{scopes:"email profile openid",redirectTo:m}});if(k)throw k;return v}async function x({token:m,email:v,password:k,fullName:S}){var N;if(!e)throw new Error("Supabase not configured");const C=await Me("/api/base/auth/validate-invite",{method:"POST",body:JSON.stringify({token:m,email:v})}),{data:_,error:j}=await e.auth.signUp({email:v,password:k,options:{data:{full_name:S,profile:(C==null?void 0:C.profile_name)||"sales_user"}}});if(j)throw j;return await Me("/api/base/auth/consume-invite",{method:"POST",body:JSON.stringify({token:m,email:v,supabase_user_id:(N=_==null?void 0:_.user)==null?void 0:N.id,profile_name:C==null?void 0:C.profile_name,name:S})}),_}async function y(){try{e&&await e.auth.signOut()}finally{gl(),r(null),o(null),d(null),localStorage.removeItem("mmg_user"),localStorage.removeItem("userData"),sessionStorage.removeItem("msSsoPending")}}const g=b.useMemo(()=>({authReady:a,user:i,session:s,pendingAccess:u,getAccessToken:f,signInWithPassword:p,signInWithMicrosoft:w,signUpWithInvite:x,refreshProfile:h,logout:y}),[a,i,s,u]);return c.jsx(hN.Provider,{value:g,children:t})}function ii(){const t=b.useContext(hN);if(!t)throw new Error("useAuth must be used within AuthProvider");return t}function h5(){const t=`${window.location.protocol}//${window.location.host}`,e=window.SUPABASE_REDIRECT_URL||void 0||"";return window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?`${t}/auth/callback`:`${(e||t).replace(/\/$/,"")}/auth/callback`}function f5(){const{signInWithMicrosoft:t}=ii(),e=hd(),n=Jl(),s=b.useMemo(()=>{var h;return((h=n.state)==null?void 0:h.from)||"/app/chat"},[n.state]),[r,i]=b.useState(""),[o,a]=b.useState(!1),{user:l,authReady:u}=ii();b.useEffect(()=>{u&&l&&e(s,{replace:!0})},[u,l,s,e]);async function d(){if(!o){i("");try{a(!0),sessionStorage.setItem("postAuthRedirect",s||"/app/chat"),await new Promise(h=>requestAnimationFrame(h)),await t()}catch(h){i((h==null?void 0:h.message)||"SSO failed"),a(!1)}}}return c.jsxs("div",{className:"min-h-screen px-4 py-8 flex items-center justify-center",children:[c.jsx("div",{className:"mmg-particle one"}),c.jsx("div",{className:"mmg-particle two"}),c.jsx("div",{className:"mmg-particle three"}),c.jsxs("div",{className:"w-full max-w-5xl grid grid-cols-1 lg:grid-cols-[420px_1fr] gap-6 items-stretch",children:[c.jsxs(vt,{className:"self-center",children:[c.jsxs(Bt,{className:"text-center",children:[c.jsx("div",{className:"flex items-center justify-center mb-5",children:c.jsx(VC,{size:96})}),c.jsx("p",{className:"text-sm text-black/60 dark:text-white/65",children:"Sign in to continue to your workspace"})]}),c.jsx(Ut,{children:c.jsxs("div",{className:"space-y-3",children:[r?c.jsx("div",{className:"text-sm text-red-700 rounded-2xl px-4 py-2 bg-black/5 dark:bg-white/10",children:r}):null,c.jsx(te,{variant:"secondary",size:"lg",className:"w-full justify-center gap-2",onClick:d,disabled:o,children:o?c.jsx(Ye,{text:"Signing you in"}):c.jsxs(c.Fragment,{children:[c.jsx(TM,{size:18}),"Sign in with Microsoft"]})})]})})]}),c.jsx("div",{className:"rounded-3xl min-h-[240px] lg:min-h-[520px]","aria-hidden":"true"})]})]})}function fN({email:t,message:e,onSignOut:n}){return c.jsx("div",{className:"min-h-screen grid place-items-center px-4",children:c.jsxs("div",{className:"w-full max-w-[520px] space-y-4 rounded-2xl bg-white/60 dark:bg-white/5 backdrop-blur-md shadow-soft ring-1 ring-black/5 dark:ring-white/10 p-6 text-center",children:[c.jsx("div",{className:"text-2xl font-semibold",children:"Access Pending"}),c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:e||"Your account is pending administrator approval."}),t?c.jsxs("div",{className:"text-xs text-black/55 dark:text-white/60",children:["Signed in as ",c.jsx("strong",{children:t})]}):null,c.jsx("div",{className:"flex justify-center pt-2",children:c.jsx(te,{variant:"secondary",onClick:n,children:"Sign Out"})})]})})}function p5(){const t=hd(),{authReady:e,session:n,user:s,pendingAccess:r,logout:i}=ii();return b.useEffect(()=>{if(e&&!n){t("/login",{replace:!0});return}if(e&&n&&s){const o=sessionStorage.getItem("postAuthRedirect")||"/app/chat";sessionStorage.removeItem("postAuthRedirect"),t(o,{replace:!0})}},[e,n,s,t]),e&&r?c.jsx(fN,{email:r.email,message:r.message,onSignOut:i}):c.jsx("div",{className:"min-h-screen grid place-items-center px-4",children:c.jsx("div",{className:"rounded-2xl bg-white/55 dark:bg-white/5 backdrop-blur-md shadow-soft ring-1 ring-black/5 dark:ring-white/10 px-5 py-4 text-sm",children:c.jsx(Ye,{text:"Loading"})})})}function pN(){const{theme:t,setTheme:e}=FO(),n=t==="dark";return c.jsx(te,{variant:"ghost",size:"icon","aria-label":"Toggle theme",onClick:()=>e(n?"light":"dark"),title:"Toggle theme",className:"rounded-2xl",children:n?c.jsx($M,{size:18}):c.jsx(OM,{size:18})})}function tt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function gd(t,e=[]){let n=[];function s(i,o){const a=b.createContext(o),l=n.length;n=[...n,o];const u=h=>{var g;const{scope:f,children:p,...w}=h,x=((g=f==null?void 0:f[t])==null?void 0:g[l])||a,y=b.useMemo(()=>w,Object.values(w));return c.jsx(x.Provider,{value:y,children:p})};u.displayName=i+"Provider";function d(h,f){var x;const p=((x=f==null?void 0:f[t])==null?void 0:x[l])||a,w=b.useContext(p);if(w)return w;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const r=()=>{const i=n.map(o=>b.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return b.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return r.scopeName=t,[s,m5(r,...e)]}function m5(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const s=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const o=s.reduce((a,{useScope:l,scopeName:u})=>{const h=l(i)[`__scope${u}`];return{...a,...h}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var so=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},g5=dp[" useInsertionEffect ".trim().toString()]||so;function mN({prop:t,defaultProp:e,onChange:n=()=>{},caller:s}){const[r,i,o]=x5({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:r;{const d=b.useRef(t!==void 0);b.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${s} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,s])}const u=b.useCallback(d=>{var h;if(a){const f=y5(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else i(d)},[a,t,i,o]);return[l,u]}function x5({defaultProp:t,onChange:e}){const[n,s]=b.useState(t),r=b.useRef(n),i=b.useRef(e);return g5(()=>{i.current=e},[e]),b.useEffect(()=>{var o;r.current!==n&&((o=i.current)==null||o.call(i,n),r.current=n)},[n,r]),[n,s,i]}function y5(t){return typeof t=="function"}function v5(t){const e=b5(t),n=b.forwardRef((s,r)=>{const{children:i,...o}=s,a=b.Children.toArray(i),l=a.find(k5);if(l){const u=l.props.children,d=a.map(h=>h===l?b.Children.count(u)>1?b.Children.only(null):b.isValidElement(u)?u.props.children:null:h);return c.jsx(e,{...o,ref:r,children:b.isValidElement(u)?b.cloneElement(u,void 0,d):null})}return c.jsx(e,{...o,ref:r,children:i})});return n.displayName=`${t}.Slot`,n}function b5(t){const e=b.forwardRef((n,s)=>{const{children:r,...i}=n;if(b.isValidElement(r)){const o=S5(r),a=_5(i,r.props);return r.type!==b.Fragment&&(a.ref=s?xa(s,o):o),b.cloneElement(r,a)}return b.Children.count(r)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var w5=Symbol("radix.slottable");function k5(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===w5}function _5(t,e){const n={...e};for(const s in e){const r=t[s],i=e[s];/^on[A-Z]/.test(s)?r&&i?n[s]=(...a)=>{const l=i(...a);return r(...a),l}:r&&(n[s]=r):s==="style"?n[s]={...r,...i}:s==="className"&&(n[s]=[r,i].filter(Boolean).join(" "))}return{...t,...n}}function S5(t){var s,r;let e=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var j5=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Bn=j5.reduce((t,e)=>{const n=v5(`Primitive.${e}`),s=b.forwardRef((r,i)=>{const{asChild:o,...a}=r,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(l,{...a,ref:i})});return s.displayName=`Primitive.${e}`,{...t,[e]:s}},{});function gN(t,e){t&&cd.flushSync(()=>t.dispatchEvent(e))}function ik(t){const e=C5(t),n=b.forwardRef((s,r)=>{const{children:i,...o}=s,a=b.Children.toArray(i),l=a.find(E5);if(l){const u=l.props.children,d=a.map(h=>h===l?b.Children.count(u)>1?b.Children.only(null):b.isValidElement(u)?u.props.children:null:h);return c.jsx(e,{...o,ref:r,children:b.isValidElement(u)?b.cloneElement(u,void 0,d):null})}return c.jsx(e,{...o,ref:r,children:i})});return n.displayName=`${t}.Slot`,n}function C5(t){const e=b.forwardRef((n,s)=>{const{children:r,...i}=n;if(b.isValidElement(r)){const o=P5(r),a=T5(i,r.props);return r.type!==b.Fragment&&(a.ref=s?xa(s,o):o),b.cloneElement(r,a)}return b.Children.count(r)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var N5=Symbol("radix.slottable");function E5(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===N5}function T5(t,e){const n={...e};for(const s in e){const r=t[s],i=e[s];/^on[A-Z]/.test(s)?r&&i?n[s]=(...a)=>{const l=i(...a);return r(...a),l}:r&&(n[s]=r):s==="style"?n[s]={...r,...i}:s==="className"&&(n[s]=[r,i].filter(Boolean).join(" "))}return{...t,...n}}function P5(t){var s,r;let e=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function xN(t){const e=t+"CollectionProvider",[n,s]=gd(e),[r,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=x=>{const{scope:y,children:g}=x,m=ge.useRef(null),v=ge.useRef(new Map).current;return c.jsx(r,{scope:y,itemMap:v,collectionRef:m,children:g})};o.displayName=e;const a=t+"CollectionSlot",l=ik(a),u=ge.forwardRef((x,y)=>{const{scope:g,children:m}=x,v=i(a,g),k=os(y,v.collectionRef);return c.jsx(l,{ref:k,children:m})});u.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=ik(d),p=ge.forwardRef((x,y)=>{const{scope:g,children:m,...v}=x,k=ge.useRef(null),S=os(y,k),C=i(d,g);return ge.useEffect(()=>(C.itemMap.set(k,{ref:k,...v}),()=>void C.itemMap.delete(k))),c.jsx(f,{[h]:"",ref:S,children:m})});p.displayName=d;function w(x){const y=i(t+"CollectionConsumer",x);return ge.useCallback(()=>{const m=y.collectionRef.current;if(!m)return[];const v=Array.from(m.querySelectorAll(`[${h}]`));return Array.from(y.itemMap.values()).sort((C,_)=>v.indexOf(C.ref.current)-v.indexOf(_.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:u,ItemSlot:p},w,s]}var R5=b.createContext(void 0);function yN(t){const e=b.useContext(R5);return t||e||"ltr"}function oi(t){const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),b.useMemo(()=>(...n)=>{var s;return(s=e.current)==null?void 0:s.call(e,...n)},[])}function A5(t,e=globalThis==null?void 0:globalThis.document){const n=oi(t);b.useEffect(()=>{const s=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[n,e])}var O5="DismissableLayer",ey="dismissableLayer.update",M5="dismissableLayer.pointerDownOutside",I5="dismissableLayer.focusOutside",ok,vN=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),bN=b.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,u=b.useContext(vN),[d,h]=b.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=b.useState({}),w=os(e,_=>h(_)),x=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),g=x.indexOf(y),m=d?x.indexOf(d):-1,v=u.layersWithOutsidePointerEventsDisabled.size>0,k=m>=g,S=$5(_=>{const j=_.target,N=[...u.branches].some(P=>P.contains(j));!k||N||(r==null||r(_),o==null||o(_),_.defaultPrevented||a==null||a())},f),C=F5(_=>{const j=_.target;[...u.branches].some(P=>P.contains(j))||(i==null||i(_),o==null||o(_),_.defaultPrevented||a==null||a())},f);return A5(_=>{m===u.layers.size-1&&(s==null||s(_),!_.defaultPrevented&&a&&(_.preventDefault(),a()))},f),b.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(ok=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),ak(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=ok)}},[d,f,n,u]),b.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),ak())},[d,u]),b.useEffect(()=>{const _=()=>p({});return document.addEventListener(ey,_),()=>document.removeEventListener(ey,_)},[]),c.jsx(Bn.div,{...l,ref:w,style:{pointerEvents:v?k?"auto":"none":void 0,...t.style},onFocusCapture:tt(t.onFocusCapture,C.onFocusCapture),onBlurCapture:tt(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:tt(t.onPointerDownCapture,S.onPointerDownCapture)})});bN.displayName=O5;var D5="DismissableLayerBranch",L5=b.forwardRef((t,e)=>{const n=b.useContext(vN),s=b.useRef(null),r=os(e,s);return b.useEffect(()=>{const i=s.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),c.jsx(Bn.div,{...t,ref:r})});L5.displayName=D5;function $5(t,e=globalThis==null?void 0:globalThis.document){const n=oi(t),s=b.useRef(!1),r=b.useRef(()=>{});return b.useEffect(()=>{const i=a=>{if(a.target&&!s.current){let l=function(){wN(M5,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=l,e.addEventListener("click",r.current,{once:!0})):l()}else e.removeEventListener("click",r.current);s.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>s.current=!0}}function F5(t,e=globalThis==null?void 0:globalThis.document){const n=oi(t),s=b.useRef(!1);return b.useEffect(()=>{const r=i=>{i.target&&!s.current&&wN(I5,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function ak(){const t=new CustomEvent(ey);document.dispatchEvent(t)}function wN(t,e,n,{discrete:s}){const r=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),s?gN(r,i):r.dispatchEvent(i)}var Vm=0;function z5(){b.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??lk()),document.body.insertAdjacentElement("beforeend",t[1]??lk()),Vm++,()=>{Vm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Vm--}},[])}function lk(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var qm="focusScope.autoFocusOnMount",Km="focusScope.autoFocusOnUnmount",ck={bubbles:!1,cancelable:!0},B5="FocusScope",kN=b.forwardRef((t,e)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:r,onUnmountAutoFocus:i,...o}=t,[a,l]=b.useState(null),u=oi(r),d=oi(i),h=b.useRef(null),f=os(e,x=>l(x)),p=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(s){let x=function(v){if(p.paused||!a)return;const k=v.target;a.contains(k)?h.current=k:xi(h.current,{select:!0})},y=function(v){if(p.paused||!a)return;const k=v.relatedTarget;k!==null&&(a.contains(k)||xi(h.current,{select:!0}))},g=function(v){if(document.activeElement===document.body)for(const S of v)S.removedNodes.length>0&&xi(a)};document.addEventListener("focusin",x),document.addEventListener("focusout",y);const m=new MutationObserver(g);return a&&m.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",y),m.disconnect()}}},[s,a,p.paused]),b.useEffect(()=>{if(a){dk.add(p);const x=document.activeElement;if(!a.contains(x)){const g=new CustomEvent(qm,ck);a.addEventListener(qm,u),a.dispatchEvent(g),g.defaultPrevented||(U5(K5(_N(a)),{select:!0}),document.activeElement===x&&xi(a))}return()=>{a.removeEventListener(qm,u),setTimeout(()=>{const g=new CustomEvent(Km,ck);a.addEventListener(Km,d),a.dispatchEvent(g),g.defaultPrevented||xi(x??document.body,{select:!0}),a.removeEventListener(Km,d),dk.remove(p)},0)}}},[a,u,d,p]);const w=b.useCallback(x=>{if(!n&&!s||p.paused)return;const y=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,g=document.activeElement;if(y&&g){const m=x.currentTarget,[v,k]=H5(m);v&&k?!x.shiftKey&&g===k?(x.preventDefault(),n&&xi(v,{select:!0})):x.shiftKey&&g===v&&(x.preventDefault(),n&&xi(k,{select:!0})):g===m&&x.preventDefault()}},[n,s,p.paused]);return c.jsx(Bn.div,{tabIndex:-1,...o,ref:f,onKeyDown:w})});kN.displayName=B5;function U5(t,{select:e=!1}={}){const n=document.activeElement;for(const s of t)if(xi(s,{select:e}),document.activeElement!==n)return}function H5(t){const e=_N(t),n=uk(e,t),s=uk(e.reverse(),t);return[n,s]}function _N(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function uk(t,e){for(const n of t)if(!W5(n,{upTo:e}))return n}function W5(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function V5(t){return t instanceof HTMLInputElement&&"select"in t}function xi(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&V5(t)&&e&&t.select()}}var dk=q5();function q5(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=hk(t,e),t.unshift(e)},remove(e){var n;t=hk(t,e),(n=t[0])==null||n.resume()}}}function hk(t,e){const n=[...t],s=n.indexOf(e);return s!==-1&&n.splice(s,1),n}function K5(t){return t.filter(e=>e.tagName!=="A")}var G5=dp[" useId ".trim().toString()]||(()=>{}),Y5=0;function ty(t){const[e,n]=b.useState(G5());return so(()=>{n(s=>s??String(Y5++))},[t]),e?`radix-${e}`:""}const Q5=["top","right","bottom","left"],ro=Math.min,ps=Math.max,Wf=Math.round,uh=Math.floor,Tr=t=>({x:t,y:t}),X5={left:"right",right:"left",bottom:"top",top:"bottom"},J5={start:"end",end:"start"};function ny(t,e,n){return ps(t,ro(e,n))}function ai(t,e){return typeof t=="function"?t(e):t}function li(t){return t.split("-")[0]}function nc(t){return t.split("-")[1]}function Bv(t){return t==="x"?"y":"x"}function Uv(t){return t==="y"?"height":"width"}const Z5=new Set(["top","bottom"]);function jr(t){return Z5.has(li(t))?"y":"x"}function Hv(t){return Bv(jr(t))}function e$(t,e,n){n===void 0&&(n=!1);const s=nc(t),r=Hv(t),i=Uv(r);let o=r==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Vf(o)),[o,Vf(o)]}function t$(t){const e=Vf(t);return[sy(t),e,sy(e)]}function sy(t){return t.replace(/start|end/g,e=>J5[e])}const fk=["left","right"],pk=["right","left"],n$=["top","bottom"],s$=["bottom","top"];function r$(t,e,n){switch(t){case"top":case"bottom":return n?e?pk:fk:e?fk:pk;case"left":case"right":return e?n$:s$;default:return[]}}function i$(t,e,n,s){const r=nc(t);let i=r$(li(t),n==="start",s);return r&&(i=i.map(o=>o+"-"+r),e&&(i=i.concat(i.map(sy)))),i}function Vf(t){return t.replace(/left|right|bottom|top/g,e=>X5[e])}function o$(t){return{top:0,right:0,bottom:0,left:0,...t}}function SN(t){return typeof t!="number"?o$(t):{top:t,right:t,bottom:t,left:t}}function qf(t){const{x:e,y:n,width:s,height:r}=t;return{width:s,height:r,top:n,left:e,right:e+s,bottom:n+r,x:e,y:n}}function mk(t,e,n){let{reference:s,floating:r}=t;const i=jr(e),o=Hv(e),a=Uv(o),l=li(e),u=i==="y",d=s.x+s.width/2-r.width/2,h=s.y+s.height/2-r.height/2,f=s[a]/2-r[a]/2;let p;switch(l){case"top":p={x:d,y:s.y-r.height};break;case"bottom":p={x:d,y:s.y+s.height};break;case"right":p={x:s.x+s.width,y:h};break;case"left":p={x:s.x-r.width,y:h};break;default:p={x:s.x,y:s.y}}switch(nc(e)){case"start":p[o]-=f*(n&&u?-1:1);break;case"end":p[o]+=f*(n&&u?-1:1);break}return p}const a$=async(t,e,n)=>{const{placement:s="bottom",strategy:r="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:d,y:h}=mk(u,s,l),f=s,p={},w=0;for(let x=0;x<a.length;x++){const{name:y,fn:g}=a[x],{x:m,y:v,data:k,reset:S}=await g({x:d,y:h,initialPlacement:s,placement:f,strategy:r,middlewareData:p,rects:u,platform:o,elements:{reference:t,floating:e}});d=m??d,h=v??h,p={...p,[y]:{...p[y],...k}},S&&w<=50&&(w++,typeof S=="object"&&(S.placement&&(f=S.placement),S.rects&&(u=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:r}):S.rects),{x:d,y:h}=mk(u,f,l)),x=-1)}return{x:d,y:h,placement:f,strategy:r,middlewareData:p}};async function Ou(t,e){var n;e===void 0&&(e={});const{x:s,y:r,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=ai(e,t),w=SN(p),y=a[f?h==="floating"?"reference":"floating":h],g=qf(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(y)))==null||n?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:l})),m=h==="floating"?{x:s,y:r,width:o.floating.width,height:o.floating.height}:o.reference,v=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),k=await(i.isElement==null?void 0:i.isElement(v))?await(i.getScale==null?void 0:i.getScale(v))||{x:1,y:1}:{x:1,y:1},S=qf(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:m,offsetParent:v,strategy:l}):m);return{top:(g.top-S.top+w.top)/k.y,bottom:(S.bottom-g.bottom+w.bottom)/k.y,left:(g.left-S.left+w.left)/k.x,right:(S.right-g.right+w.right)/k.x}}const l$=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:s,placement:r,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:u,padding:d=0}=ai(t,e)||{};if(u==null)return{};const h=SN(d),f={x:n,y:s},p=Hv(r),w=Uv(p),x=await o.getDimensions(u),y=p==="y",g=y?"top":"left",m=y?"bottom":"right",v=y?"clientHeight":"clientWidth",k=i.reference[w]+i.reference[p]-f[p]-i.floating[w],S=f[p]-i.reference[p],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let _=C?C[v]:0;(!_||!await(o.isElement==null?void 0:o.isElement(C)))&&(_=a.floating[v]||i.floating[w]);const j=k/2-S/2,N=_/2-x[w]/2-1,P=ro(h[g],N),D=ro(h[m],N),M=P,I=_-x[w]-D,L=_/2-x[w]/2+j,R=ny(M,L,I),$=!l.arrow&&nc(r)!=null&&L!==R&&i.reference[w]/2-(L<M?P:D)-x[w]/2<0,U=$?L<M?L-M:L-I:0;return{[p]:f[p]+U,data:{[p]:R,centerOffset:L-R-U,...$&&{alignmentOffset:U}},reset:$}}}),c$=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,s;const{placement:r,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:x=!0,...y}=ai(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const g=li(r),m=jr(a),v=li(a)===a,k=await(l.isRTL==null?void 0:l.isRTL(u.floating)),S=f||(v||!x?[Vf(a)]:t$(a)),C=w!=="none";!f&&C&&S.push(...i$(a,x,w,k));const _=[a,...S],j=await Ou(e,y),N=[];let P=((s=i.flip)==null?void 0:s.overflows)||[];if(d&&N.push(j[g]),h){const L=e$(r,o,k);N.push(j[L[0]],j[L[1]])}if(P=[...P,{placement:r,overflows:N}],!N.every(L=>L<=0)){var D,M;const L=(((D=i.flip)==null?void 0:D.index)||0)+1,R=_[L];if(R&&(!(h==="alignment"?m!==jr(R):!1)||P.every(E=>jr(E.placement)===m?E.overflows[0]>0:!0)))return{data:{index:L,overflows:P},reset:{placement:R}};let $=(M=P.filter(U=>U.overflows[0]<=0).sort((U,E)=>U.overflows[1]-E.overflows[1])[0])==null?void 0:M.placement;if(!$)switch(p){case"bestFit":{var I;const U=(I=P.filter(E=>{if(C){const T=jr(E.placement);return T===m||T==="y"}return!0}).map(E=>[E.placement,E.overflows.filter(T=>T>0).reduce((T,z)=>T+z,0)]).sort((E,T)=>E[1]-T[1])[0])==null?void 0:I[0];U&&($=U);break}case"initialPlacement":$=a;break}if(r!==$)return{reset:{placement:$}}}return{}}}};function gk(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function xk(t){return Q5.some(e=>t[e]>=0)}const u$=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:s="referenceHidden",...r}=ai(t,e);switch(s){case"referenceHidden":{const i=await Ou(e,{...r,elementContext:"reference"}),o=gk(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:xk(o)}}}case"escaped":{const i=await Ou(e,{...r,altBoundary:!0}),o=gk(i,n.floating);return{data:{escapedOffsets:o,escaped:xk(o)}}}default:return{}}}}},jN=new Set(["left","top"]);async function d$(t,e){const{placement:n,platform:s,elements:r}=t,i=await(s.isRTL==null?void 0:s.isRTL(r.floating)),o=li(n),a=nc(n),l=jr(n)==="y",u=jN.has(o)?-1:1,d=i&&l?-1:1,h=ai(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:w}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof w=="number"&&(p=a==="end"?w*-1:w),l?{x:p*d,y:f*u}:{x:f*u,y:p*d}}const h$=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,s;const{x:r,y:i,placement:o,middlewareData:a}=e,l=await d$(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(s=a.arrow)!=null&&s.alignmentOffset?{}:{x:r+l.x,y:i+l.y,data:{...l,placement:o}}}}},f$=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:s,placement:r}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:g,y:m}=y;return{x:g,y:m}}},...l}=ai(t,e),u={x:n,y:s},d=await Ou(e,l),h=jr(li(r)),f=Bv(h);let p=u[f],w=u[h];if(i){const y=f==="y"?"top":"left",g=f==="y"?"bottom":"right",m=p+d[y],v=p-d[g];p=ny(m,p,v)}if(o){const y=h==="y"?"top":"left",g=h==="y"?"bottom":"right",m=w+d[y],v=w-d[g];w=ny(m,w,v)}const x=a.fn({...e,[f]:p,[h]:w});return{...x,data:{x:x.x-n,y:x.y-s,enabled:{[f]:i,[h]:o}}}}}},p$=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:s,placement:r,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=ai(t,e),d={x:n,y:s},h=jr(r),f=Bv(h);let p=d[f],w=d[h];const x=ai(a,e),y=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(l){const v=f==="y"?"height":"width",k=i.reference[f]-i.floating[v]+y.mainAxis,S=i.reference[f]+i.reference[v]-y.mainAxis;p<k?p=k:p>S&&(p=S)}if(u){var g,m;const v=f==="y"?"width":"height",k=jN.has(li(r)),S=i.reference[h]-i.floating[v]+(k&&((g=o.offset)==null?void 0:g[h])||0)+(k?0:y.crossAxis),C=i.reference[h]+i.reference[v]+(k?0:((m=o.offset)==null?void 0:m[h])||0)-(k?y.crossAxis:0);w<S?w=S:w>C&&(w=C)}return{[f]:p,[h]:w}}}},m$=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,s;const{placement:r,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...u}=ai(t,e),d=await Ou(e,u),h=li(r),f=nc(r),p=jr(r)==="y",{width:w,height:x}=i.floating;let y,g;h==="top"||h==="bottom"?(y=h,g=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(g=h,y=f==="end"?"top":"bottom");const m=x-d.top-d.bottom,v=w-d.left-d.right,k=ro(x-d[y],m),S=ro(w-d[g],v),C=!e.middlewareData.shift;let _=k,j=S;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(j=v),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(_=m),C&&!f){const P=ps(d.left,0),D=ps(d.right,0),M=ps(d.top,0),I=ps(d.bottom,0);p?j=w-2*(P!==0||D!==0?P+D:ps(d.left,d.right)):_=x-2*(M!==0||I!==0?M+I:ps(d.top,d.bottom))}await l({...e,availableWidth:j,availableHeight:_});const N=await o.getDimensions(a.floating);return w!==N.width||x!==N.height?{reset:{rects:!0}}:{}}}};function Rp(){return typeof window<"u"}function sc(t){return CN(t)?(t.nodeName||"").toLowerCase():"#document"}function bs(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ar(t){var e;return(e=(CN(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function CN(t){return Rp()?t instanceof Node||t instanceof bs(t).Node:!1}function rr(t){return Rp()?t instanceof Element||t instanceof bs(t).Element:!1}function Pr(t){return Rp()?t instanceof HTMLElement||t instanceof bs(t).HTMLElement:!1}function yk(t){return!Rp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof bs(t).ShadowRoot}const g$=new Set(["inline","contents"]);function xd(t){const{overflow:e,overflowX:n,overflowY:s,display:r}=ir(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+n)&&!g$.has(r)}const x$=new Set(["table","td","th"]);function y$(t){return x$.has(sc(t))}const v$=[":popover-open",":modal"];function Ap(t){return v$.some(e=>{try{return t.matches(e)}catch{return!1}})}const b$=["transform","translate","scale","rotate","perspective"],w$=["transform","translate","scale","rotate","perspective","filter"],k$=["paint","layout","strict","content"];function Wv(t){const e=Vv(),n=rr(t)?ir(t):t;return b$.some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||w$.some(s=>(n.willChange||"").includes(s))||k$.some(s=>(n.contain||"").includes(s))}function _$(t){let e=io(t);for(;Pr(e)&&!ql(e);){if(Wv(e))return e;if(Ap(e))return null;e=io(e)}return null}function Vv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const S$=new Set(["html","body","#document"]);function ql(t){return S$.has(sc(t))}function ir(t){return bs(t).getComputedStyle(t)}function Op(t){return rr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function io(t){if(sc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||yk(t)&&t.host||Ar(t);return yk(e)?e.host:e}function NN(t){const e=io(t);return ql(e)?t.ownerDocument?t.ownerDocument.body:t.body:Pr(e)&&xd(e)?e:NN(e)}function Mu(t,e,n){var s;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=NN(t),i=r===((s=t.ownerDocument)==null?void 0:s.body),o=bs(r);if(i){const a=ry(o);return e.concat(o,o.visualViewport||[],xd(r)?r:[],a&&n?Mu(a):[])}return e.concat(r,Mu(r,[],n))}function ry(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function EN(t){const e=ir(t);let n=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const r=Pr(t),i=r?t.offsetWidth:n,o=r?t.offsetHeight:s,a=Wf(n)!==i||Wf(s)!==o;return a&&(n=i,s=o),{width:n,height:s,$:a}}function qv(t){return rr(t)?t:t.contextElement}function xl(t){const e=qv(t);if(!Pr(e))return Tr(1);const n=e.getBoundingClientRect(),{width:s,height:r,$:i}=EN(e);let o=(i?Wf(n.width):n.width)/s,a=(i?Wf(n.height):n.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const j$=Tr(0);function TN(t){const e=bs(t);return!Vv()||!e.visualViewport?j$:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function C$(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==bs(t)?!1:e}function ua(t,e,n,s){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=qv(t);let o=Tr(1);e&&(s?rr(s)&&(o=xl(s)):o=xl(t));const a=C$(i,n,s)?TN(i):Tr(0);let l=(r.left+a.x)/o.x,u=(r.top+a.y)/o.y,d=r.width/o.x,h=r.height/o.y;if(i){const f=bs(i),p=s&&rr(s)?bs(s):s;let w=f,x=ry(w);for(;x&&s&&p!==w;){const y=xl(x),g=x.getBoundingClientRect(),m=ir(x),v=g.left+(x.clientLeft+parseFloat(m.paddingLeft))*y.x,k=g.top+(x.clientTop+parseFloat(m.paddingTop))*y.y;l*=y.x,u*=y.y,d*=y.x,h*=y.y,l+=v,u+=k,w=bs(x),x=ry(w)}}return qf({width:d,height:h,x:l,y:u})}function Mp(t,e){const n=Op(t).scrollLeft;return e?e.left+n:ua(Ar(t)).left+n}function PN(t,e){const n=t.getBoundingClientRect(),s=n.left+e.scrollLeft-Mp(t,n),r=n.top+e.scrollTop;return{x:s,y:r}}function N$(t){let{elements:e,rect:n,offsetParent:s,strategy:r}=t;const i=r==="fixed",o=Ar(s),a=e?Ap(e.floating):!1;if(s===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},u=Tr(1);const d=Tr(0),h=Pr(s);if((h||!h&&!i)&&((sc(s)!=="body"||xd(o))&&(l=Op(s)),Pr(s))){const p=ua(s);u=xl(s),d.x=p.x+s.clientLeft,d.y=p.y+s.clientTop}const f=o&&!h&&!i?PN(o,l):Tr(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+d.x+f.x,y:n.y*u.y-l.scrollTop*u.y+d.y+f.y}}function E$(t){return Array.from(t.getClientRects())}function T$(t){const e=Ar(t),n=Op(t),s=t.ownerDocument.body,r=ps(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),i=ps(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let o=-n.scrollLeft+Mp(t);const a=-n.scrollTop;return ir(s).direction==="rtl"&&(o+=ps(e.clientWidth,s.clientWidth)-r),{width:r,height:i,x:o,y:a}}const vk=25;function P$(t,e){const n=bs(t),s=Ar(t),r=n.visualViewport;let i=s.clientWidth,o=s.clientHeight,a=0,l=0;if(r){i=r.width,o=r.height;const d=Vv();(!d||d&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}const u=Mp(s);if(u<=0){const d=s.ownerDocument,h=d.body,f=getComputedStyle(h),p=d.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,w=Math.abs(s.clientWidth-h.clientWidth-p);w<=vk&&(i-=w)}else u<=vk&&(i+=u);return{width:i,height:o,x:a,y:l}}const R$=new Set(["absolute","fixed"]);function A$(t,e){const n=ua(t,!0,e==="fixed"),s=n.top+t.clientTop,r=n.left+t.clientLeft,i=Pr(t)?xl(t):Tr(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=r*i.x,u=s*i.y;return{width:o,height:a,x:l,y:u}}function bk(t,e,n){let s;if(e==="viewport")s=P$(t,n);else if(e==="document")s=T$(Ar(t));else if(rr(e))s=A$(e,n);else{const r=TN(t);s={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return qf(s)}function RN(t,e){const n=io(t);return n===e||!rr(n)||ql(n)?!1:ir(n).position==="fixed"||RN(n,e)}function O$(t,e){const n=e.get(t);if(n)return n;let s=Mu(t,[],!1).filter(a=>rr(a)&&sc(a)!=="body"),r=null;const i=ir(t).position==="fixed";let o=i?io(t):t;for(;rr(o)&&!ql(o);){const a=ir(o),l=Wv(o);!l&&a.position==="fixed"&&(r=null),(i?!l&&!r:!l&&a.position==="static"&&!!r&&R$.has(r.position)||xd(o)&&!l&&RN(t,o))?s=s.filter(d=>d!==o):r=a,o=io(o)}return e.set(t,s),s}function M$(t){let{element:e,boundary:n,rootBoundary:s,strategy:r}=t;const o=[...n==="clippingAncestors"?Ap(e)?[]:O$(e,this._c):[].concat(n),s],a=o[0],l=o.reduce((u,d)=>{const h=bk(e,d,r);return u.top=ps(h.top,u.top),u.right=ro(h.right,u.right),u.bottom=ro(h.bottom,u.bottom),u.left=ps(h.left,u.left),u},bk(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function I$(t){const{width:e,height:n}=EN(t);return{width:e,height:n}}function D$(t,e,n){const s=Pr(e),r=Ar(e),i=n==="fixed",o=ua(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Tr(0);function u(){l.x=Mp(r)}if(s||!s&&!i)if((sc(e)!=="body"||xd(r))&&(a=Op(e)),s){const p=ua(e,!0,i,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else r&&u();i&&!s&&r&&u();const d=r&&!s&&!i?PN(r,a):Tr(0),h=o.left+a.scrollLeft-l.x-d.x,f=o.top+a.scrollTop-l.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function Gm(t){return ir(t).position==="static"}function wk(t,e){if(!Pr(t)||ir(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ar(t)===n&&(n=n.ownerDocument.body),n}function AN(t,e){const n=bs(t);if(Ap(t))return n;if(!Pr(t)){let r=io(t);for(;r&&!ql(r);){if(rr(r)&&!Gm(r))return r;r=io(r)}return n}let s=wk(t,e);for(;s&&y$(s)&&Gm(s);)s=wk(s,e);return s&&ql(s)&&Gm(s)&&!Wv(s)?n:s||_$(t)||n}const L$=async function(t){const e=this.getOffsetParent||AN,n=this.getDimensions,s=await n(t.floating);return{reference:D$(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function $$(t){return ir(t).direction==="rtl"}const F$={convertOffsetParentRelativeRectToViewportRelativeRect:N$,getDocumentElement:Ar,getClippingRect:M$,getOffsetParent:AN,getElementRects:L$,getClientRects:E$,getDimensions:I$,getScale:xl,isElement:rr,isRTL:$$};function ON(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function z$(t,e){let n=null,s;const r=Ar(t);function i(){var a;clearTimeout(s),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const u=t.getBoundingClientRect(),{left:d,top:h,width:f,height:p}=u;if(a||e(),!f||!p)return;const w=uh(h),x=uh(r.clientWidth-(d+f)),y=uh(r.clientHeight-(h+p)),g=uh(d),v={rootMargin:-w+"px "+-x+"px "+-y+"px "+-g+"px",threshold:ps(0,ro(1,l))||1};let k=!0;function S(C){const _=C[0].intersectionRatio;if(_!==l){if(!k)return o();_?o(!1,_):s=setTimeout(()=>{o(!1,1e-7)},1e3)}_===1&&!ON(u,t.getBoundingClientRect())&&o(),k=!1}try{n=new IntersectionObserver(S,{...v,root:r.ownerDocument})}catch{n=new IntersectionObserver(S,v)}n.observe(t)}return o(!0),i}function B$(t,e,n,s){s===void 0&&(s={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=s,u=qv(t),d=r||i?[...u?Mu(u):[],...Mu(e)]:[];d.forEach(g=>{r&&g.addEventListener("scroll",n,{passive:!0}),i&&g.addEventListener("resize",n)});const h=u&&a?z$(u,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(g=>{let[m]=g;m&&m.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var v;(v=p)==null||v.observe(e)})),n()}),u&&!l&&p.observe(u),p.observe(e));let w,x=l?ua(t):null;l&&y();function y(){const g=ua(t);x&&!ON(x,g)&&n(),x=g,w=requestAnimationFrame(y)}return n(),()=>{var g;d.forEach(m=>{r&&m.removeEventListener("scroll",n),i&&m.removeEventListener("resize",n)}),h==null||h(),(g=p)==null||g.disconnect(),p=null,l&&cancelAnimationFrame(w)}}const U$=h$,H$=f$,W$=c$,V$=m$,q$=u$,kk=l$,K$=p$,G$=(t,e,n)=>{const s=new Map,r={platform:F$,...n},i={...r.platform,_c:s};return a$(t,e,{...r,platform:i})};var Y$=typeof document<"u",Q$=function(){},nf=Y$?b.useLayoutEffect:Q$;function Kf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,s,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(!Kf(t[s],e[s]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(e,r[s]))return!1;for(s=n;s--!==0;){const i=r[s];if(!(i==="_owner"&&t.$$typeof)&&!Kf(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function MN(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function _k(t,e){const n=MN(t);return Math.round(e*n)/n}function Ym(t){const e=b.useRef(t);return nf(()=>{e.current=t}),e}function X$(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:s=[],platform:r,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=t,[d,h]=b.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=b.useState(s);Kf(f,s)||p(s);const[w,x]=b.useState(null),[y,g]=b.useState(null),m=b.useCallback(E=>{E!==C.current&&(C.current=E,x(E))},[]),v=b.useCallback(E=>{E!==_.current&&(_.current=E,g(E))},[]),k=i||w,S=o||y,C=b.useRef(null),_=b.useRef(null),j=b.useRef(d),N=l!=null,P=Ym(l),D=Ym(r),M=Ym(u),I=b.useCallback(()=>{if(!C.current||!_.current)return;const E={placement:e,strategy:n,middleware:f};D.current&&(E.platform=D.current),G$(C.current,_.current,E).then(T=>{const z={...T,isPositioned:M.current!==!1};L.current&&!Kf(j.current,z)&&(j.current=z,cd.flushSync(()=>{h(z)}))})},[f,e,n,D,M]);nf(()=>{u===!1&&j.current.isPositioned&&(j.current.isPositioned=!1,h(E=>({...E,isPositioned:!1})))},[u]);const L=b.useRef(!1);nf(()=>(L.current=!0,()=>{L.current=!1}),[]),nf(()=>{if(k&&(C.current=k),S&&(_.current=S),k&&S){if(P.current)return P.current(k,S,I);I()}},[k,S,I,P,N]);const R=b.useMemo(()=>({reference:C,floating:_,setReference:m,setFloating:v}),[m,v]),$=b.useMemo(()=>({reference:k,floating:S}),[k,S]),U=b.useMemo(()=>{const E={position:n,left:0,top:0};if(!$.floating)return E;const T=_k($.floating,d.x),z=_k($.floating,d.y);return a?{...E,transform:"translate("+T+"px, "+z+"px)",...MN($.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:T,top:z}},[n,a,$.floating,d.x,d.y]);return b.useMemo(()=>({...d,update:I,refs:R,elements:$,floatingStyles:U}),[d,I,R,$,U])}const J$=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:s,padding:r}=typeof t=="function"?t(n):t;return s&&e(s)?s.current!=null?kk({element:s.current,padding:r}).fn(n):{}:s?kk({element:s,padding:r}).fn(n):{}}}},Z$=(t,e)=>({...U$(t),options:[t,e]}),eF=(t,e)=>({...H$(t),options:[t,e]}),tF=(t,e)=>({...K$(t),options:[t,e]}),nF=(t,e)=>({...W$(t),options:[t,e]}),sF=(t,e)=>({...V$(t),options:[t,e]}),rF=(t,e)=>({...q$(t),options:[t,e]}),iF=(t,e)=>({...J$(t),options:[t,e]});var oF="Arrow",IN=b.forwardRef((t,e)=>{const{children:n,width:s=10,height:r=5,...i}=t;return c.jsx(Bn.svg,{...i,ref:e,width:s,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:c.jsx("polygon",{points:"0,0 30,0 15,10"})})});IN.displayName=oF;var aF=IN;function lF(t){const[e,n]=b.useState(void 0);return so(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const s=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const i=r[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return s.observe(t,{box:"border-box"}),()=>s.unobserve(t)}else n(void 0)},[t]),e}var Kv="Popper",[DN,LN]=gd(Kv),[cF,$N]=DN(Kv),FN=t=>{const{__scopePopper:e,children:n}=t,[s,r]=b.useState(null);return c.jsx(cF,{scope:e,anchor:s,onAnchorChange:r,children:n})};FN.displayName=Kv;var zN="PopperAnchor",BN=b.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:s,...r}=t,i=$N(zN,n),o=b.useRef(null),a=os(e,o),l=b.useRef(null);return b.useEffect(()=>{const u=l.current;l.current=(s==null?void 0:s.current)||o.current,u!==l.current&&i.onAnchorChange(l.current)}),s?null:c.jsx(Bn.div,{...r,ref:a})});BN.displayName=zN;var Gv="PopperContent",[uF,dF]=DN(Gv),UN=b.forwardRef((t,e)=>{var de,J,ve,Ae,me,fe;const{__scopePopper:n,side:s="bottom",sideOffset:r=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:w,...x}=t,y=$N(Gv,n),[g,m]=b.useState(null),v=os(e,Ie=>m(Ie)),[k,S]=b.useState(null),C=lF(k),_=(C==null?void 0:C.width)??0,j=(C==null?void 0:C.height)??0,N=s+(i!=="center"?"-"+i:""),P=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},D=Array.isArray(u)?u:[u],M=D.length>0,I={padding:P,boundary:D.filter(fF),altBoundary:M},{refs:L,floatingStyles:R,placement:$,isPositioned:U,middlewareData:E}=X$({strategy:"fixed",placement:N,whileElementsMounted:(...Ie)=>B$(...Ie,{animationFrame:p==="always"}),elements:{reference:y.anchor},middleware:[Z$({mainAxis:r+j,alignmentAxis:o}),l&&eF({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?tF():void 0,...I}),l&&nF({...I}),sF({...I,apply:({elements:Ie,rects:X,availableWidth:pe,availableHeight:re})=>{const{width:K,height:G}=X.reference,ae=Ie.floating.style;ae.setProperty("--radix-popper-available-width",`${pe}px`),ae.setProperty("--radix-popper-available-height",`${re}px`),ae.setProperty("--radix-popper-anchor-width",`${K}px`),ae.setProperty("--radix-popper-anchor-height",`${G}px`)}}),k&&iF({element:k,padding:a}),pF({arrowWidth:_,arrowHeight:j}),f&&rF({strategy:"referenceHidden",...I})]}),[T,z]=VN($),q=oi(w);so(()=>{U&&(q==null||q())},[U,q]);const W=(de=E.arrow)==null?void 0:de.x,he=(J=E.arrow)==null?void 0:J.y,ee=((ve=E.arrow)==null?void 0:ve.centerOffset)!==0,[B,Q]=b.useState();return so(()=>{g&&Q(window.getComputedStyle(g).zIndex)},[g]),c.jsx("div",{ref:L.setFloating,"data-radix-popper-content-wrapper":"",style:{...R,transform:U?R.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:B,"--radix-popper-transform-origin":[(Ae=E.transformOrigin)==null?void 0:Ae.x,(me=E.transformOrigin)==null?void 0:me.y].join(" "),...((fe=E.hide)==null?void 0:fe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:c.jsx(uF,{scope:n,placedSide:T,onArrowChange:S,arrowX:W,arrowY:he,shouldHideArrow:ee,children:c.jsx(Bn.div,{"data-side":T,"data-align":z,...x,ref:v,style:{...x.style,animation:U?void 0:"none"}})})})});UN.displayName=Gv;var HN="PopperArrow",hF={top:"bottom",right:"left",bottom:"top",left:"right"},WN=b.forwardRef(function(e,n){const{__scopePopper:s,...r}=e,i=dF(HN,s),o=hF[i.placedSide];return c.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:c.jsx(aF,{...r,ref:n,style:{...r.style,display:"block"}})})});WN.displayName=HN;function fF(t){return t!==null}var pF=t=>({name:"transformOrigin",options:t,fn(e){var y,g,m;const{placement:n,rects:s,middlewareData:r}=e,o=((y=r.arrow)==null?void 0:y.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[u,d]=VN(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((g=r.arrow)==null?void 0:g.x)??0)+a/2,p=(((m=r.arrow)==null?void 0:m.y)??0)+l/2;let w="",x="";return u==="bottom"?(w=o?h:`${f}px`,x=`${-l}px`):u==="top"?(w=o?h:`${f}px`,x=`${s.floating.height+l}px`):u==="right"?(w=`${-l}px`,x=o?h:`${p}px`):u==="left"&&(w=`${s.floating.width+l}px`,x=o?h:`${p}px`),{data:{x:w,y:x}}}});function VN(t){const[e,n="center"]=t.split("-");return[e,n]}var mF=FN,gF=BN,xF=UN,yF=WN,vF="Portal",qN=b.forwardRef((t,e)=>{var a;const{container:n,...s}=t,[r,i]=b.useState(!1);so(()=>i(!0),[]);const o=n||r&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?eC.createPortal(c.jsx(Bn.div,{...s,ref:e}),o):null});qN.displayName=vF;function bF(t,e){return b.useReducer((n,s)=>e[n][s]??n,t)}var yd=t=>{const{present:e,children:n}=t,s=wF(e),r=typeof n=="function"?n({present:s.isPresent}):b.Children.only(n),i=os(s.ref,kF(r));return typeof n=="function"||s.isPresent?b.cloneElement(r,{ref:i}):null};yd.displayName="Presence";function wF(t){const[e,n]=b.useState(),s=b.useRef(null),r=b.useRef(t),i=b.useRef("none"),o=t?"mounted":"unmounted",[a,l]=bF(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const u=dh(s.current);i.current=a==="mounted"?u:"none"},[a]),so(()=>{const u=s.current,d=r.current;if(d!==t){const f=i.current,p=dh(u);t?l("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&f!==p?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,l]),so(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=p=>{const x=dh(s.current).includes(CSS.escape(p.animationName));if(p.target===e&&x&&(l("ANIMATION_END"),!r.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},f=p=>{p.target===e&&(i.current=dh(s.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:b.useCallback(u=>{s.current=u?getComputedStyle(u):null,n(u)},[])}}function dh(t){return(t==null?void 0:t.animationName)||"none"}function kF(t){var s,r;let e=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Qm="rovingFocusGroup.onEntryFocus",_F={bubbles:!1,cancelable:!0},vd="RovingFocusGroup",[iy,KN,SF]=xN(vd),[jF,GN]=gd(vd,[SF]),[CF,NF]=jF(vd),YN=b.forwardRef((t,e)=>c.jsx(iy.Provider,{scope:t.__scopeRovingFocusGroup,children:c.jsx(iy.Slot,{scope:t.__scopeRovingFocusGroup,children:c.jsx(EF,{...t,ref:e})})}));YN.displayName=vd;var EF=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:r=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=t,f=b.useRef(null),p=os(e,f),w=yN(i),[x,y]=mN({prop:o,defaultProp:a??null,onChange:l,caller:vd}),[g,m]=b.useState(!1),v=oi(u),k=KN(n),S=b.useRef(!1),[C,_]=b.useState(0);return b.useEffect(()=>{const j=f.current;if(j)return j.addEventListener(Qm,v),()=>j.removeEventListener(Qm,v)},[v]),c.jsx(CF,{scope:n,orientation:s,dir:w,loop:r,currentTabStopId:x,onItemFocus:b.useCallback(j=>y(j),[y]),onItemShiftTab:b.useCallback(()=>m(!0),[]),onFocusableItemAdd:b.useCallback(()=>_(j=>j+1),[]),onFocusableItemRemove:b.useCallback(()=>_(j=>j-1),[]),children:c.jsx(Bn.div,{tabIndex:g||C===0?-1:0,"data-orientation":s,...h,ref:p,style:{outline:"none",...t.style},onMouseDown:tt(t.onMouseDown,()=>{S.current=!0}),onFocus:tt(t.onFocus,j=>{const N=!S.current;if(j.target===j.currentTarget&&N&&!g){const P=new CustomEvent(Qm,_F);if(j.currentTarget.dispatchEvent(P),!P.defaultPrevented){const D=k().filter($=>$.focusable),M=D.find($=>$.active),I=D.find($=>$.id===x),R=[M,I,...D].filter(Boolean).map($=>$.ref.current);JN(R,d)}}S.current=!1}),onBlur:tt(t.onBlur,()=>m(!1))})})}),QN="RovingFocusGroupItem",XN=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:r=!1,tabStopId:i,children:o,...a}=t,l=ty(),u=i||l,d=NF(QN,n),h=d.currentTabStopId===u,f=KN(n),{onFocusableItemAdd:p,onFocusableItemRemove:w,currentTabStopId:x}=d;return b.useEffect(()=>{if(s)return p(),()=>w()},[s,p,w]),c.jsx(iy.ItemSlot,{scope:n,id:u,focusable:s,active:r,children:c.jsx(Bn.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...a,ref:e,onMouseDown:tt(t.onMouseDown,y=>{s?d.onItemFocus(u):y.preventDefault()}),onFocus:tt(t.onFocus,()=>d.onItemFocus(u)),onKeyDown:tt(t.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){d.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const g=RF(y,d.orientation,d.dir);if(g!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let v=f().filter(k=>k.focusable).map(k=>k.ref.current);if(g==="last")v.reverse();else if(g==="prev"||g==="next"){g==="prev"&&v.reverse();const k=v.indexOf(y.currentTarget);v=d.loop?AF(v,k+1):v.slice(k+1)}setTimeout(()=>JN(v))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:x!=null}):o})})});XN.displayName=QN;var TF={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function PF(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function RF(t,e,n){const s=PF(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return TF[s]}function JN(t,e=!1){const n=document.activeElement;for(const s of t)if(s===n||(s.focus({preventScroll:e}),document.activeElement!==n))return}function AF(t,e){return t.map((n,s)=>t[(e+s)%t.length])}var OF=YN,MF=XN;function IF(t){const e=DF(t),n=b.forwardRef((s,r)=>{const{children:i,...o}=s,a=b.Children.toArray(i),l=a.find($F);if(l){const u=l.props.children,d=a.map(h=>h===l?b.Children.count(u)>1?b.Children.only(null):b.isValidElement(u)?u.props.children:null:h);return c.jsx(e,{...o,ref:r,children:b.isValidElement(u)?b.cloneElement(u,void 0,d):null})}return c.jsx(e,{...o,ref:r,children:i})});return n.displayName=`${t}.Slot`,n}function DF(t){const e=b.forwardRef((n,s)=>{const{children:r,...i}=n;if(b.isValidElement(r)){const o=zF(r),a=FF(i,r.props);return r.type!==b.Fragment&&(a.ref=s?xa(s,o):o),b.cloneElement(r,a)}return b.Children.count(r)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var LF=Symbol("radix.slottable");function $F(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===LF}function FF(t,e){const n={...e};for(const s in e){const r=t[s],i=e[s];/^on[A-Z]/.test(s)?r&&i?n[s]=(...a)=>{const l=i(...a);return r(...a),l}:r&&(n[s]=r):s==="style"?n[s]={...r,...i}:s==="className"&&(n[s]=[r,i].filter(Boolean).join(" "))}return{...t,...n}}function zF(t){var s,r;let e=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var BF=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},La=new WeakMap,hh=new WeakMap,fh={},Xm=0,ZN=function(t){return t&&(t.host||ZN(t.parentNode))},UF=function(t,e){return e.map(function(n){if(t.contains(n))return n;var s=ZN(n);return s&&t.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},HF=function(t,e,n,s){var r=UF(e,Array.isArray(t)?t:[t]);fh[n]||(fh[n]=new WeakMap);var i=fh[n],o=[],a=new Set,l=new Set(r),u=function(h){!h||a.has(h)||(a.add(h),u(h.parentNode))};r.forEach(u);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))d(f);else try{var p=f.getAttribute(s),w=p!==null&&p!=="false",x=(La.get(f)||0)+1,y=(i.get(f)||0)+1;La.set(f,x),i.set(f,y),o.push(f),x===1&&w&&hh.set(f,!0),y===1&&f.setAttribute(n,"true"),w||f.setAttribute(s,"true")}catch(g){console.error("aria-hidden: cannot operate on ",f,g)}})};return d(e),a.clear(),Xm++,function(){o.forEach(function(h){var f=La.get(h)-1,p=i.get(h)-1;La.set(h,f),i.set(h,p),f||(hh.has(h)||h.removeAttribute(s),hh.delete(h)),p||h.removeAttribute(n)}),Xm--,Xm||(La=new WeakMap,La=new WeakMap,hh=new WeakMap,fh={})}},WF=function(t,e,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(t)?t:[t]),r=BF(t);return r?(s.push.apply(s,Array.from(r.querySelectorAll("[aria-live], script"))),HF(s,r,n,"aria-hidden")):function(){return null}},sf="right-scroll-bar-position",rf="width-before-scroll-bar",VF="with-scroll-bars-hidden",qF="--removed-body-scroll-bar-size";function Jm(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function KF(t,e){var n=b.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(s){var r=n.value;r!==s&&(n.value=s,n.callback(s,r))}}}})[0];return n.callback=e,n.facade}var GF=typeof window<"u"?b.useLayoutEffect:b.useEffect,Sk=new WeakMap;function YF(t,e){var n=KF(null,function(s){return t.forEach(function(r){return Jm(r,s)})});return GF(function(){var s=Sk.get(n);if(s){var r=new Set(s),i=new Set(t),o=n.current;r.forEach(function(a){i.has(a)||Jm(a,null)}),i.forEach(function(a){r.has(a)||Jm(a,o)})}Sk.set(n,t)},[t]),n}function QF(t){return t}function XF(t,e){e===void 0&&(e=QF);var n=[],s=!1,r={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,s);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(s=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){s=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return r}function JF(t){t===void 0&&(t={});var e=XF(null);return e.options=Sr({async:!0,ssr:!1},t),e}var eE=function(t){var e=t.sideCar,n=ec(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=e.read();if(!s)throw new Error("Sidecar medium not found");return b.createElement(s,Sr({},n))};eE.isSideCarExport=!0;function ZF(t,e){return t.useMedium(e),eE}var tE=JF(),Zm=function(){},Ip=b.forwardRef(function(t,e){var n=b.useRef(null),s=b.useState({onScrollCapture:Zm,onWheelCapture:Zm,onTouchMoveCapture:Zm}),r=s[0],i=s[1],o=t.forwardProps,a=t.children,l=t.className,u=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,p=t.noRelative,w=t.noIsolation,x=t.inert,y=t.allowPinchZoom,g=t.as,m=g===void 0?"div":g,v=t.gapMode,k=ec(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=f,C=YF([n,e]),_=Sr(Sr({},k),r);return b.createElement(b.Fragment,null,d&&b.createElement(S,{sideCar:tE,removeScrollBar:u,shards:h,noRelative:p,noIsolation:w,inert:x,setCallbacks:i,allowPinchZoom:!!y,lockRef:n,gapMode:v}),o?b.cloneElement(b.Children.only(a),Sr(Sr({},_),{ref:C})):b.createElement(m,Sr({},_,{className:l,ref:C}),a))});Ip.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ip.classNames={fullWidth:rf,zeroRight:sf};var ez=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function tz(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=ez();return e&&t.setAttribute("nonce",e),t}function nz(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function sz(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var rz=function(){var t=0,e=null;return{add:function(n){t==0&&(e=tz())&&(nz(e,n),sz(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},iz=function(){var t=rz();return function(e,n){b.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},nE=function(){var t=iz(),e=function(n){var s=n.styles,r=n.dynamic;return t(s,r),null};return e},oz={left:0,top:0,right:0,gap:0},eg=function(t){return parseInt(t||"",10)||0},az=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],s=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[eg(n),eg(s),eg(r)]},lz=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return oz;var e=az(t),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,s-n+e[2]-e[0])}},cz=nE(),yl="data-scroll-locked",uz=function(t,e,n,s){var r=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(VF,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(a,"px ").concat(s,`;
  }
  body[`).concat(yl,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(sf,` {
    right: `).concat(a,"px ").concat(s,`;
  }
  
  .`).concat(rf,` {
    margin-right: `).concat(a,"px ").concat(s,`;
  }
  
  .`).concat(sf," .").concat(sf,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(rf," .").concat(rf,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(yl,`] {
    `).concat(qF,": ").concat(a,`px;
  }
`)},jk=function(){var t=parseInt(document.body.getAttribute(yl)||"0",10);return isFinite(t)?t:0},dz=function(){b.useEffect(function(){return document.body.setAttribute(yl,(jk()+1).toString()),function(){var t=jk()-1;t<=0?document.body.removeAttribute(yl):document.body.setAttribute(yl,t.toString())}},[])},hz=function(t){var e=t.noRelative,n=t.noImportant,s=t.gapMode,r=s===void 0?"margin":s;dz();var i=b.useMemo(function(){return lz(r)},[r]);return b.createElement(cz,{styles:uz(i,!e,r,n?"":"!important")})},oy=!1;if(typeof window<"u")try{var ph=Object.defineProperty({},"passive",{get:function(){return oy=!0,!0}});window.addEventListener("test",ph,ph),window.removeEventListener("test",ph,ph)}catch{oy=!1}var $a=oy?{passive:!1}:!1,fz=function(t){return t.tagName==="TEXTAREA"},sE=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!fz(t)&&n[e]==="visible")},pz=function(t){return sE(t,"overflowY")},mz=function(t){return sE(t,"overflowX")},Ck=function(t,e){var n=e.ownerDocument,s=e;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var r=rE(t,s);if(r){var i=iE(t,s),o=i[1],a=i[2];if(o>a)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},gz=function(t){var e=t.scrollTop,n=t.scrollHeight,s=t.clientHeight;return[e,n,s]},xz=function(t){var e=t.scrollLeft,n=t.scrollWidth,s=t.clientWidth;return[e,n,s]},rE=function(t,e){return t==="v"?pz(e):mz(e)},iE=function(t,e){return t==="v"?gz(e):xz(e)},yz=function(t,e){return t==="h"&&e==="rtl"?-1:1},vz=function(t,e,n,s,r){var i=yz(t,window.getComputedStyle(e).direction),o=i*s,a=n.target,l=e.contains(a),u=!1,d=o>0,h=0,f=0;do{if(!a)break;var p=iE(t,a),w=p[0],x=p[1],y=p[2],g=x-y-i*w;(w||g)&&rE(t,a)&&(h+=g,f+=w);var m=a.parentNode;a=m&&m.nodeType===Node.DOCUMENT_FRAGMENT_NODE?m.host:m}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&Math.abs(h)<1||!d&&Math.abs(f)<1)&&(u=!0),u},mh=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Nk=function(t){return[t.deltaX,t.deltaY]},Ek=function(t){return t&&"current"in t?t.current:t},bz=function(t,e){return t[0]===e[0]&&t[1]===e[1]},wz=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},kz=0,Fa=[];function _z(t){var e=b.useRef([]),n=b.useRef([0,0]),s=b.useRef(),r=b.useState(kz++)[0],i=b.useState(nE)[0],o=b.useRef(t);b.useEffect(function(){o.current=t},[t]),b.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var x=RI([t.lockRef.current],(t.shards||[]).map(Ek),!0).filter(Boolean);return x.forEach(function(y){return y.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),x.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var a=b.useCallback(function(x,y){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!o.current.allowPinchZoom;var g=mh(x),m=n.current,v="deltaX"in x?x.deltaX:m[0]-g[0],k="deltaY"in x?x.deltaY:m[1]-g[1],S,C=x.target,_=Math.abs(v)>Math.abs(k)?"h":"v";if("touches"in x&&_==="h"&&C.type==="range")return!1;var j=window.getSelection(),N=j&&j.anchorNode,P=N?N===C||N.contains(C):!1;if(P)return!1;var D=Ck(_,C);if(!D)return!0;if(D?S=_:(S=_==="v"?"h":"v",D=Ck(_,C)),!D)return!1;if(!s.current&&"changedTouches"in x&&(v||k)&&(s.current=S),!S)return!0;var M=s.current||S;return vz(M,y,x,M==="h"?v:k)},[]),l=b.useCallback(function(x){var y=x;if(!(!Fa.length||Fa[Fa.length-1]!==i)){var g="deltaY"in y?Nk(y):mh(y),m=e.current.filter(function(S){return S.name===y.type&&(S.target===y.target||y.target===S.shadowParent)&&bz(S.delta,g)})[0];if(m&&m.should){y.cancelable&&y.preventDefault();return}if(!m){var v=(o.current.shards||[]).map(Ek).filter(Boolean).filter(function(S){return S.contains(y.target)}),k=v.length>0?a(y,v[0]):!o.current.noIsolation;k&&y.cancelable&&y.preventDefault()}}},[]),u=b.useCallback(function(x,y,g,m){var v={name:x,delta:y,target:g,should:m,shadowParent:Sz(g)};e.current.push(v),setTimeout(function(){e.current=e.current.filter(function(k){return k!==v})},1)},[]),d=b.useCallback(function(x){n.current=mh(x),s.current=void 0},[]),h=b.useCallback(function(x){u(x.type,Nk(x),x.target,a(x,t.lockRef.current))},[]),f=b.useCallback(function(x){u(x.type,mh(x),x.target,a(x,t.lockRef.current))},[]);b.useEffect(function(){return Fa.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,$a),document.addEventListener("touchmove",l,$a),document.addEventListener("touchstart",d,$a),function(){Fa=Fa.filter(function(x){return x!==i}),document.removeEventListener("wheel",l,$a),document.removeEventListener("touchmove",l,$a),document.removeEventListener("touchstart",d,$a)}},[]);var p=t.removeScrollBar,w=t.inert;return b.createElement(b.Fragment,null,w?b.createElement(i,{styles:wz(r)}):null,p?b.createElement(hz,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Sz(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const jz=ZF(tE,_z);var oE=b.forwardRef(function(t,e){return b.createElement(Ip,Sr({},t,{ref:e,sideCar:jz}))});oE.classNames=Ip.classNames;var ay=["Enter"," "],Cz=["ArrowDown","PageUp","Home"],aE=["ArrowUp","PageDown","End"],Nz=[...Cz,...aE],Ez={ltr:[...ay,"ArrowRight"],rtl:[...ay,"ArrowLeft"]},Tz={ltr:["ArrowLeft"],rtl:["ArrowRight"]},bd="Menu",[Iu,Pz,Rz]=xN(bd),[ya,lE]=gd(bd,[Rz,LN,GN]),Dp=LN(),cE=GN(),[Az,va]=ya(bd),[Oz,wd]=ya(bd),uE=t=>{const{__scopeMenu:e,open:n=!1,children:s,dir:r,onOpenChange:i,modal:o=!0}=t,a=Dp(e),[l,u]=b.useState(null),d=b.useRef(!1),h=oi(i),f=yN(r);return b.useEffect(()=>{const p=()=>{d.current=!0,document.addEventListener("pointerdown",w,{capture:!0,once:!0}),document.addEventListener("pointermove",w,{capture:!0,once:!0})},w=()=>d.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",w,{capture:!0}),document.removeEventListener("pointermove",w,{capture:!0})}},[]),c.jsx(mF,{...a,children:c.jsx(Az,{scope:e,open:n,onOpenChange:h,content:l,onContentChange:u,children:c.jsx(Oz,{scope:e,onClose:b.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:f,modal:o,children:s})})})};uE.displayName=bd;var Mz="MenuAnchor",Yv=b.forwardRef((t,e)=>{const{__scopeMenu:n,...s}=t,r=Dp(n);return c.jsx(gF,{...r,...s,ref:e})});Yv.displayName=Mz;var Qv="MenuPortal",[Iz,dE]=ya(Qv,{forceMount:void 0}),hE=t=>{const{__scopeMenu:e,forceMount:n,children:s,container:r}=t,i=va(Qv,e);return c.jsx(Iz,{scope:e,forceMount:n,children:c.jsx(yd,{present:n||i.open,children:c.jsx(qN,{asChild:!0,container:r,children:s})})})};hE.displayName=Qv;var Ls="MenuContent",[Dz,Xv]=ya(Ls),fE=b.forwardRef((t,e)=>{const n=dE(Ls,t.__scopeMenu),{forceMount:s=n.forceMount,...r}=t,i=va(Ls,t.__scopeMenu),o=wd(Ls,t.__scopeMenu);return c.jsx(Iu.Provider,{scope:t.__scopeMenu,children:c.jsx(yd,{present:s||i.open,children:c.jsx(Iu.Slot,{scope:t.__scopeMenu,children:o.modal?c.jsx(Lz,{...r,ref:e}):c.jsx($z,{...r,ref:e})})})})}),Lz=b.forwardRef((t,e)=>{const n=va(Ls,t.__scopeMenu),s=b.useRef(null),r=os(e,s);return b.useEffect(()=>{const i=s.current;if(i)return WF(i)},[]),c.jsx(Jv,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:tt(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),$z=b.forwardRef((t,e)=>{const n=va(Ls,t.__scopeMenu);return c.jsx(Jv,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Fz=IF("MenuContent.ScrollLock"),Jv=b.forwardRef((t,e)=>{const{__scopeMenu:n,loop:s=!1,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:p,disableOutsideScroll:w,...x}=t,y=va(Ls,n),g=wd(Ls,n),m=Dp(n),v=cE(n),k=Pz(n),[S,C]=b.useState(null),_=b.useRef(null),j=os(e,_,y.onContentChange),N=b.useRef(0),P=b.useRef(""),D=b.useRef(0),M=b.useRef(null),I=b.useRef("right"),L=b.useRef(0),R=w?oE:b.Fragment,$=w?{as:Fz,allowPinchZoom:!0}:void 0,U=T=>{var de,J;const z=P.current+T,q=k().filter(ve=>!ve.disabled),W=document.activeElement,he=(de=q.find(ve=>ve.ref.current===W))==null?void 0:de.textValue,ee=q.map(ve=>ve.textValue),B=Xz(ee,z,he),Q=(J=q.find(ve=>ve.textValue===B))==null?void 0:J.ref.current;(function ve(Ae){P.current=Ae,window.clearTimeout(N.current),Ae!==""&&(N.current=window.setTimeout(()=>ve(""),1e3))})(z),Q&&setTimeout(()=>Q.focus())};b.useEffect(()=>()=>window.clearTimeout(N.current),[]),z5();const E=b.useCallback(T=>{var q,W;return I.current===((q=M.current)==null?void 0:q.side)&&Zz(T,(W=M.current)==null?void 0:W.area)},[]);return c.jsx(Dz,{scope:n,searchRef:P,onItemEnter:b.useCallback(T=>{E(T)&&T.preventDefault()},[E]),onItemLeave:b.useCallback(T=>{var z;E(T)||((z=_.current)==null||z.focus(),C(null))},[E]),onTriggerLeave:b.useCallback(T=>{E(T)&&T.preventDefault()},[E]),pointerGraceTimerRef:D,onPointerGraceIntentChange:b.useCallback(T=>{M.current=T},[]),children:c.jsx(R,{...$,children:c.jsx(kN,{asChild:!0,trapped:r,onMountAutoFocus:tt(i,T=>{var z;T.preventDefault(),(z=_.current)==null||z.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:c.jsx(bN,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:p,children:c.jsx(OF,{asChild:!0,...v,dir:g.dir,orientation:"vertical",loop:s,currentTabStopId:S,onCurrentTabStopIdChange:C,onEntryFocus:tt(l,T=>{g.isUsingKeyboardRef.current||T.preventDefault()}),preventScrollOnEntryFocus:!0,children:c.jsx(xF,{role:"menu","aria-orientation":"vertical","data-state":TE(y.open),"data-radix-menu-content":"",dir:g.dir,...m,...x,ref:j,style:{outline:"none",...x.style},onKeyDown:tt(x.onKeyDown,T=>{const q=T.target.closest("[data-radix-menu-content]")===T.currentTarget,W=T.ctrlKey||T.altKey||T.metaKey,he=T.key.length===1;q&&(T.key==="Tab"&&T.preventDefault(),!W&&he&&U(T.key));const ee=_.current;if(T.target!==ee||!Nz.includes(T.key))return;T.preventDefault();const Q=k().filter(de=>!de.disabled).map(de=>de.ref.current);aE.includes(T.key)&&Q.reverse(),Yz(Q)}),onBlur:tt(t.onBlur,T=>{T.currentTarget.contains(T.target)||(window.clearTimeout(N.current),P.current="")}),onPointerMove:tt(t.onPointerMove,Du(T=>{const z=T.target,q=L.current!==T.clientX;if(T.currentTarget.contains(z)&&q){const W=T.clientX>L.current?"right":"left";I.current=W,L.current=T.clientX}}))})})})})})})});fE.displayName=Ls;var zz="MenuGroup",Zv=b.forwardRef((t,e)=>{const{__scopeMenu:n,...s}=t;return c.jsx(Bn.div,{role:"group",...s,ref:e})});Zv.displayName=zz;var Bz="MenuLabel",pE=b.forwardRef((t,e)=>{const{__scopeMenu:n,...s}=t;return c.jsx(Bn.div,{...s,ref:e})});pE.displayName=Bz;var Gf="MenuItem",Tk="menu.itemSelect",Lp=b.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:s,...r}=t,i=b.useRef(null),o=wd(Gf,t.__scopeMenu),a=Xv(Gf,t.__scopeMenu),l=os(e,i),u=b.useRef(!1),d=()=>{const h=i.current;if(!n&&h){const f=new CustomEvent(Tk,{bubbles:!0,cancelable:!0});h.addEventListener(Tk,p=>s==null?void 0:s(p),{once:!0}),gN(h,f),f.defaultPrevented?u.current=!1:o.onClose()}};return c.jsx(mE,{...r,ref:l,disabled:n,onClick:tt(t.onClick,d),onPointerDown:h=>{var f;(f=t.onPointerDown)==null||f.call(t,h),u.current=!0},onPointerUp:tt(t.onPointerUp,h=>{var f;u.current||(f=h.currentTarget)==null||f.click()}),onKeyDown:tt(t.onKeyDown,h=>{const f=a.searchRef.current!=="";n||f&&h.key===" "||ay.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});Lp.displayName=Gf;var mE=b.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:s=!1,textValue:r,...i}=t,o=Xv(Gf,n),a=cE(n),l=b.useRef(null),u=os(e,l),[d,h]=b.useState(!1),[f,p]=b.useState("");return b.useEffect(()=>{const w=l.current;w&&p((w.textContent??"").trim())},[i.children]),c.jsx(Iu.ItemSlot,{scope:n,disabled:s,textValue:r??f,children:c.jsx(MF,{asChild:!0,...a,focusable:!s,children:c.jsx(Bn.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...i,ref:u,onPointerMove:tt(t.onPointerMove,Du(w=>{s?o.onItemLeave(w):(o.onItemEnter(w),w.defaultPrevented||w.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:tt(t.onPointerLeave,Du(w=>o.onItemLeave(w))),onFocus:tt(t.onFocus,()=>h(!0)),onBlur:tt(t.onBlur,()=>h(!1))})})})}),Uz="MenuCheckboxItem",gE=b.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:s,...r}=t;return c.jsx(wE,{scope:t.__scopeMenu,checked:n,children:c.jsx(Lp,{role:"menuitemcheckbox","aria-checked":Yf(n)?"mixed":n,...r,ref:e,"data-state":t0(n),onSelect:tt(r.onSelect,()=>s==null?void 0:s(Yf(n)?!0:!n),{checkForDefaultPrevented:!1})})})});gE.displayName=Uz;var xE="MenuRadioGroup",[Hz,Wz]=ya(xE,{value:void 0,onValueChange:()=>{}}),yE=b.forwardRef((t,e)=>{const{value:n,onValueChange:s,...r}=t,i=oi(s);return c.jsx(Hz,{scope:t.__scopeMenu,value:n,onValueChange:i,children:c.jsx(Zv,{...r,ref:e})})});yE.displayName=xE;var vE="MenuRadioItem",bE=b.forwardRef((t,e)=>{const{value:n,...s}=t,r=Wz(vE,t.__scopeMenu),i=n===r.value;return c.jsx(wE,{scope:t.__scopeMenu,checked:i,children:c.jsx(Lp,{role:"menuitemradio","aria-checked":i,...s,ref:e,"data-state":t0(i),onSelect:tt(s.onSelect,()=>{var o;return(o=r.onValueChange)==null?void 0:o.call(r,n)},{checkForDefaultPrevented:!1})})})});bE.displayName=vE;var e0="MenuItemIndicator",[wE,Vz]=ya(e0,{checked:!1}),kE=b.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:s,...r}=t,i=Vz(e0,n);return c.jsx(yd,{present:s||Yf(i.checked)||i.checked===!0,children:c.jsx(Bn.span,{...r,ref:e,"data-state":t0(i.checked)})})});kE.displayName=e0;var qz="MenuSeparator",_E=b.forwardRef((t,e)=>{const{__scopeMenu:n,...s}=t;return c.jsx(Bn.div,{role:"separator","aria-orientation":"horizontal",...s,ref:e})});_E.displayName=qz;var Kz="MenuArrow",SE=b.forwardRef((t,e)=>{const{__scopeMenu:n,...s}=t,r=Dp(n);return c.jsx(yF,{...r,...s,ref:e})});SE.displayName=Kz;var Gz="MenuSub",[q7,jE]=ya(Gz),$c="MenuSubTrigger",CE=b.forwardRef((t,e)=>{const n=va($c,t.__scopeMenu),s=wd($c,t.__scopeMenu),r=jE($c,t.__scopeMenu),i=Xv($c,t.__scopeMenu),o=b.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=i,u={__scopeMenu:t.__scopeMenu},d=b.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return b.useEffect(()=>d,[d]),b.useEffect(()=>{const h=a.current;return()=>{window.clearTimeout(h),l(null)}},[a,l]),c.jsx(Yv,{asChild:!0,...u,children:c.jsx(mE,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":TE(n.open),...t,ref:xa(e,r.onTriggerChange),onClick:h=>{var f;(f=t.onClick)==null||f.call(t,h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:tt(t.onPointerMove,Du(h=>{i.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:tt(t.onPointerLeave,Du(h=>{var p,w;d();const f=(p=n.content)==null?void 0:p.getBoundingClientRect();if(f){const x=(w=n.content)==null?void 0:w.dataset.side,y=x==="right",g=y?-5:5,m=f[y?"left":"right"],v=f[y?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+g,y:h.clientY},{x:m,y:f.top},{x:v,y:f.top},{x:v,y:f.bottom},{x:m,y:f.bottom}],side:x}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:tt(t.onKeyDown,h=>{var p;const f=i.searchRef.current!=="";t.disabled||f&&h.key===" "||Ez[s.dir].includes(h.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),h.preventDefault())})})})});CE.displayName=$c;var NE="MenuSubContent",EE=b.forwardRef((t,e)=>{const n=dE(Ls,t.__scopeMenu),{forceMount:s=n.forceMount,...r}=t,i=va(Ls,t.__scopeMenu),o=wd(Ls,t.__scopeMenu),a=jE(NE,t.__scopeMenu),l=b.useRef(null),u=os(e,l);return c.jsx(Iu.Provider,{scope:t.__scopeMenu,children:c.jsx(yd,{present:s||i.open,children:c.jsx(Iu.Slot,{scope:t.__scopeMenu,children:c.jsx(Jv,{id:a.contentId,"aria-labelledby":a.triggerId,...r,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=l.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:tt(t.onFocusOutside,d=>{d.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:tt(t.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:tt(t.onKeyDown,d=>{var p;const h=d.currentTarget.contains(d.target),f=Tz[o.dir].includes(d.key);h&&f&&(i.onOpenChange(!1),(p=a.trigger)==null||p.focus(),d.preventDefault())})})})})})});EE.displayName=NE;function TE(t){return t?"open":"closed"}function Yf(t){return t==="indeterminate"}function t0(t){return Yf(t)?"indeterminate":t?"checked":"unchecked"}function Yz(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function Qz(t,e){return t.map((n,s)=>t[(e+s)%t.length])}function Xz(t,e,n){const r=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=Qz(t,Math.max(i,0));r.length===1&&(o=o.filter(u=>u!==n));const l=o.find(u=>u.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function Jz(t,e){const{x:n,y:s}=t;let r=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],u=a.x,d=a.y,h=l.x,f=l.y;d>s!=f>s&&n<(h-u)*(s-d)/(f-d)+u&&(r=!r)}return r}function Zz(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return Jz(n,e)}function Du(t){return e=>e.pointerType==="mouse"?t(e):void 0}var e3=uE,t3=Yv,n3=hE,s3=fE,r3=Zv,i3=pE,o3=Lp,a3=gE,l3=yE,c3=bE,u3=kE,d3=_E,h3=SE,f3=CE,p3=EE,$p="DropdownMenu",[m3]=gd($p,[lE]),Un=lE(),[g3,PE]=m3($p),RE=t=>{const{__scopeDropdownMenu:e,children:n,dir:s,open:r,defaultOpen:i,onOpenChange:o,modal:a=!0}=t,l=Un(e),u=b.useRef(null),[d,h]=mN({prop:r,defaultProp:i??!1,onChange:o,caller:$p});return c.jsx(g3,{scope:e,triggerId:ty(),triggerRef:u,contentId:ty(),open:d,onOpenChange:h,onOpenToggle:b.useCallback(()=>h(f=>!f),[h]),modal:a,children:c.jsx(e3,{...l,open:d,onOpenChange:h,dir:s,modal:a,children:n})})};RE.displayName=$p;var AE="DropdownMenuTrigger",OE=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:s=!1,...r}=t,i=PE(AE,n),o=Un(n);return c.jsx(t3,{asChild:!0,...o,children:c.jsx(Bn.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...r,ref:xa(e,i.triggerRef),onPointerDown:tt(t.onPointerDown,a=>{!s&&a.button===0&&a.ctrlKey===!1&&(i.onOpenToggle(),i.open||a.preventDefault())}),onKeyDown:tt(t.onKeyDown,a=>{s||(["Enter"," "].includes(a.key)&&i.onOpenToggle(),a.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});OE.displayName=AE;var x3="DropdownMenuPortal",ME=t=>{const{__scopeDropdownMenu:e,...n}=t,s=Un(e);return c.jsx(n3,{...s,...n})};ME.displayName=x3;var IE="DropdownMenuContent",DE=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=PE(IE,n),i=Un(n),o=b.useRef(!1);return c.jsx(s3,{id:r.contentId,"aria-labelledby":r.triggerId,...i,...s,ref:e,onCloseAutoFocus:tt(t.onCloseAutoFocus,a=>{var l;o.current||(l=r.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:tt(t.onInteractOutside,a=>{const l=a.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,d=l.button===2||u;(!r.modal||d)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});DE.displayName=IE;var y3="DropdownMenuGroup",v3=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=Un(n);return c.jsx(r3,{...r,...s,ref:e})});v3.displayName=y3;var b3="DropdownMenuLabel",LE=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=Un(n);return c.jsx(i3,{...r,...s,ref:e})});LE.displayName=b3;var w3="DropdownMenuItem",$E=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=Un(n);return c.jsx(o3,{...r,...s,ref:e})});$E.displayName=w3;var k3="DropdownMenuCheckboxItem",_3=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=Un(n);return c.jsx(a3,{...r,...s,ref:e})});_3.displayName=k3;var S3="DropdownMenuRadioGroup",j3=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=Un(n);return c.jsx(l3,{...r,...s,ref:e})});j3.displayName=S3;var C3="DropdownMenuRadioItem",N3=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=Un(n);return c.jsx(c3,{...r,...s,ref:e})});N3.displayName=C3;var E3="DropdownMenuItemIndicator",T3=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=Un(n);return c.jsx(u3,{...r,...s,ref:e})});T3.displayName=E3;var P3="DropdownMenuSeparator",FE=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=Un(n);return c.jsx(d3,{...r,...s,ref:e})});FE.displayName=P3;var R3="DropdownMenuArrow",A3=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=Un(n);return c.jsx(h3,{...r,...s,ref:e})});A3.displayName=R3;var O3="DropdownMenuSubTrigger",M3=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=Un(n);return c.jsx(f3,{...r,...s,ref:e})});M3.displayName=O3;var I3="DropdownMenuSubContent",D3=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,r=Un(n);return c.jsx(p3,{...r,...s,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});D3.displayName=I3;var L3=RE,$3=OE,F3=ME,z3=DE,B3=LE,U3=$E,H3=FE;const Fp=L3,zp=$3,kd=ge.forwardRef(({className:t,sideOffset:e=8,...n},s)=>c.jsx(F3,{children:c.jsx(z3,{ref:s,sideOffset:e,className:Ee("z-[90] min-w-[220px] overflow-hidden rounded-2xl p-1","bg-white/75 dark:bg-black/40 backdrop-blur-md shadow-soft2","ring-1 ring-black/5 dark:ring-white/10",t),...n})}));kd.displayName="DropdownMenuContent";const zE=ge.forwardRef(({className:t,...e},n)=>c.jsx(B3,{ref:n,className:Ee("px-3 py-2 text-xs text-black/60 dark:text-white/60",t),...e}));zE.displayName="DropdownMenuLabel";const Qf=ge.forwardRef(({className:t,...e},n)=>c.jsx(H3,{ref:n,className:Ee("my-1 h-px bg-black/5 dark:bg-white/10",t),...e}));Qf.displayName="DropdownMenuSeparator";const Lu=ge.forwardRef(({className:t,inset:e,...n},s)=>c.jsx(U3,{ref:s,className:Ee("relative flex cursor-default select-none items-center gap-2 rounded-xl px-3 py-2 text-sm outline-none","text-black/90 dark:text-white/90","focus:bg-black/5 dark:focus:bg-white/10",e&&"pl-8",t),...n}));Lu.displayName="DropdownMenuItem";function Tn({className:t,variant:e="secondary",...n}){return c.jsx(te,{variant:e,size:"icon",className:Ee("rounded-xl h-8 w-8",t),...n})}function ws({open:t,onClose:e,title:n,children:s,maxWidth:r="520px"}){if(!t)return null;const i=c.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/40 backdrop-blur-sm px-4 py-6 overflow-y-auto",children:c.jsx("div",{className:"w-full",style:{maxWidth:r},children:c.jsxs("div",{className:"rounded-2xl bg-white/90 dark:bg-neutral-900/95 shadow-2xl ring-1 ring-black/10 dark:ring-white/10 max-h-[85vh] flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-black/5 dark:border-white/10",children:[c.jsx("div",{className:"text-sm font-semibold",children:n}),c.jsx("button",{className:"text-black/60 dark:text-white/60 hover:opacity-100 opacity-70",onClick:e,children:""})]}),c.jsx("div",{className:"p-4 overflow-y-auto",children:s})]})})});return typeof document>"u"?i:cd.createPortal(i,document.body)}function _d({open:t,onClose:e,onConfirm:n,message:s}){return t?c.jsx(ws,{open:t,onClose:e,title:"Confirm",maxWidth:"420px",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"text-sm text-black/70 dark:text-white/70",children:s||"Are you sure?"}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx(te,{variant:"ghost",className:"rounded-2xl",onClick:e,children:"Cancel"}),c.jsx(te,{className:"rounded-2xl",onClick:n,children:"Confirm"})]})]})}):null}const BE=b.createContext(null);function n0(){const t=b.useContext(BE);if(!t)throw new Error("useNotifications must be used inside NotificationsProvider");return t}function W3({notification:t}){var e;return t?c.jsxs("div",{className:"space-y-3 text-sm text-black/70 dark:text-white/70",children:[t.message?c.jsx("div",{children:t.message}):c.jsx("div",{children:"No additional details."}),(e=t.meta)!=null&&e.details?c.jsx("div",{className:"rounded-xl bg-black/5 dark:bg-white/10 p-3 text-xs whitespace-pre-wrap",children:t.meta.details}):null]}):null}function V3(){const t=hd(),{notifications:e,unreadCount:n,clearAll:s,dismissNotification:r,markRead:i,formatTime:o}=n0(),[a,l]=b.useState(null),u=b.useMemo(()=>e.slice(0,6),[e]);return c.jsxs(c.Fragment,{children:[c.jsxs(Fp,{children:[c.jsx(zp,{asChild:!0,children:c.jsxs("button",{className:"relative flex h-9 w-9 items-center justify-center rounded-2xl bg-black/5 dark:bg-white/10 text-black/80 dark:text-white/80 shadow-soft","aria-label":"Notifications",children:[c.jsx(NM,{size:18}),n?c.jsx("span",{className:"absolute -right-1 -top-1 min-w-[18px] rounded-full bg-rose-500 px-1 text-[11px] font-semibold leading-4 text-white",children:n>99?"99+":n}):null]})}),c.jsxs(kd,{align:"end",className:"w-[320px] p-0 bg-white/90 dark:bg-neutral-900/85",children:[c.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold",children:"Notifications"}),c.jsx("div",{className:"text-xs text-black/50 dark:text-white/55",children:e.length?`${e.length} total`:"No alerts"})]}),c.jsx(te,{variant:"secondary",size:"sm",className:"rounded-xl",onClick:s,disabled:!e.length,children:"Clear all"})]}),c.jsx(Qf,{}),c.jsx("div",{className:"max-h-[320px] overflow-y-auto p-2 space-y-2",children:u.length?u.map(d=>c.jsx("div",{className:Ee("rounded-xl px-3 py-2 ring-1 transition-colors",d.read?"bg-white/50 dark:bg-white/5 ring-black/5 dark:ring-white/10":"bg-black/5 dark:bg-white/10 ring-black/10 dark:ring-white/20"),children:c.jsxs("div",{className:"flex items-start justify-between gap-2",children:[c.jsxs("div",{className:"min-w-0",children:[c.jsx("div",{className:"text-sm font-semibold text-black/85 dark:text-white/85 truncate",children:d.title||"Notification"}),d.message?c.jsx("div",{className:"mt-0.5 text-xs text-black/60 dark:text-white/65 leading-4 mmg-line-clamp-2",children:d.message}):null,d.created_at?c.jsx("div",{className:"mt-1 text-[11px] text-black/45 dark:text-white/45",children:o(d.created_at)}):null]}),c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx(Tn,{variant:"ghost",className:"h-7 w-7",onClick:()=>r(d.id),"aria-label":"Dismiss notification",children:c.jsx(Ov,{size:14})}),c.jsx(Tn,{variant:"ghost",className:"h-7 w-7",onClick:()=>{i(d.id),l(d)},"aria-label":"View notification",children:c.jsx(OC,{size:14})})]})]})},d.id)):c.jsx("div",{className:"rounded-xl border border-dashed border-black/10 dark:border-white/15 p-4 text-xs text-black/50 dark:text-white/60 text-center",children:"You're all caught up."})}),c.jsx(Qf,{}),c.jsx("div",{className:"px-3 py-2",children:c.jsx(te,{variant:"secondary",className:"w-full rounded-2xl",onClick:()=>t("/app/notifications"),children:"View all notifications"})})]})]}),c.jsx(ws,{open:!!a,onClose:()=>l(null),title:(a==null?void 0:a.title)||"Notification",maxWidth:"520px",children:c.jsx(W3,{notification:a})})]})}function Dt({className:t,...e}){return c.jsx("div",{className:Ee("rounded-2xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 shadow-soft",t),...e})}function q3(){const{toasts:t,dismissToast:e,formatTime:n}=n0();return t.length?c.jsx("div",{className:"fixed right-6 top-24 z-50 flex w-[320px] flex-col gap-2",children:t.map(s=>{const r=s.notification;return c.jsx(Dt,{className:"p-3 bg-white dark:bg-neutral-900 shadow-soft ring-1 ring-black/10 dark:ring-white/10",children:c.jsxs("div",{className:"flex items-start justify-between gap-2",children:[c.jsxs("div",{className:"min-w-0",children:[c.jsx("div",{className:"text-sm font-semibold text-black/85 dark:text-white/85 truncate",children:r.title||"Notification"}),r.message?c.jsx("div",{className:"mt-1 text-xs text-black/60 dark:text-white/65 leading-4 mmg-line-clamp-2",children:r.message}):null,r.created_at?c.jsx("div",{className:"mt-1 text-[11px] text-black/45 dark:text-white/45",children:n(r.created_at)}):null]}),c.jsx("button",{type:"button",className:"rounded-full p-1 text-black/50 hover:text-black/80 dark:text-white/50 dark:hover:text-white/80",onClick:()=>e(s.id),"aria-label":"Dismiss notification",children:c.jsx(Ov,{size:14})})]})},s.id)})}):null}async function K3(){return Me("/api/modules/accessible",{method:"GET"})}async function G3({limit:t,offset:e=0,newestFirst:n=!1,signal:s}={}){const r=new URLSearchParams;t!=null&&r.set("limit",t),e>0&&r.set("offset",e),n&&r.set("newest_first","true");const i=r.toString();return Me(`/api/sales/chat/history${i?`?${i}`:""}`,{signal:s})}async function Y3(t,e=[]){return Me("/api/sales/chat/attachments/refresh",{method:"POST",body:JSON.stringify({file_ids:t,prefetch_ids:e})})}async function Q3({conversationId:t,message:e,fileIds:n,onEvent:s,onChunk:r,onDone:i,onError:o,signal:a}){try{const l=Pp(),u=tc.API_BASE_URL||"",d=await fetch(`${u}/api/sales/chat/stream`,{method:"POST",headers:{"Content-Type":"application/json",...l?{Authorization:`Bearer ${l}`}:{}},body:JSON.stringify({message:e,conversation_id:t,...n!=null&&n.length?{file_ids:n}:{}}),signal:a});if(d.status===401){gl(),window.dispatchEvent(new CustomEvent("auth:logout")),o==null||o(new Error("Unauthorized"));return}if(!d.ok){const x=await d.json().catch(()=>({}));throw new Error(x.detail||`API error: ${d.status}`)}const h=d.body.getReader(),f=new TextDecoder;let p="",w=!1;for(;;){const{done:x,value:y}=await h.read();if(x)break;p+=f.decode(y,{stream:!0});const g=p.split(`
`);p=g.pop()||"";for(const m of g){const v=m.trim();if(!v.startsWith("data:"))continue;const k=v.replace(/^data:\s?/,"");if(!k||k==="[DONE]"){w=!0,i==null||i();continue}try{const S=JSON.parse(k);s==null||s(S),!s&&r&&(S.type==="chunk"||S.type==="content")&&r(S)}catch{const S={content:k};s==null||s(S),s||r==null||r(S)}}}w||i==null||i()}catch(l){throw o==null||o(l),l}}async function X3(t){const e=new FormData;return e.append("file",t),Me("/api/sales/files/upload",{method:"POST",body:e})}async function J3(){return Me("/api/assets/asset-types")}async function Pk(t,{timeOfDay:e,side:n,venueType:s}={}){const r=new URLSearchParams;e&&r.set("time_of_day",e),n&&r.set("side",n),s&&r.set("venue_type",s);const i=Array.isArray(t)?t[0]:t;return i?Me(`/api/sales/mockup/templates/${encodeURIComponent(i)}?${r.toString()}`):[]}async function Z3(t){return Me("/api/sales/mockup/save-frame",{method:"POST",body:t})}async function eB(t){return Me("/api/sales/mockup/update-frame",{method:"PUT",body:t})}async function tB(t,e){return Me(`/api/sales/mockup/photo/${t}?photo_filename=${encodeURIComponent(e)}`,{method:"DELETE"})}async function nB(t){return dN("/api/sales/mockup/test-preview",{method:"POST",body:t})}async function sB(t){return Me("/api/sales/mockup/generate",{method:"POST",body:t})}async function rB(){return Me("/api/sales/mockup/history")}async function UE(t,e,{timeOfDay:n,side:s,company:r,venueType:i}={}){if(!t||!e)return null;const o=new URLSearchParams;o.set("photo_filename",e),n&&o.set("time_of_day",n),s&&o.set("side",s),r&&o.set("company",r),i&&o.set("venue_type",i);const a=`/api/sales/mockup/photo/${t}?${o.toString()}`;return dN(a)}async function iB(t,e,{timeOfDay:n,side:s,company:r,venueType:i}={}){const o=await UE(t,e,{timeOfDay:n,side:s,company:r,venueType:i});return o?URL.createObjectURL(o):""}async function oB(){return Me("/api/sales/mockup/eligibility/setup")}async function aB(){return Me("/api/sales/mockup/eligibility/generate")}async function lB({service:t,displayType:e}={}){const n=new URLSearchParams;t&&n.set("service",t),e&&n.set("display_type",e);const s=n.toString();return Me(`/api/sales/locations${s?`?${s}`:""}`)}async function cB(t){return t?Me(`/api/sales/locations/${encodeURIComponent(t)}`):null}async function uB(t){return Me("/api/sales/proposals",{method:"POST",body:JSON.stringify(t)})}async function dB(){return Me("/api/sales/proposals/history")}async function hB({limit:t=100,offset:e=0}={}){return Me("/api/rbac/users")}async function fB(t){return Me(`/api/rbac/user/${t}`)}async function pB(t){return Me(`/api/rbac/users/${t}/permissions`)}async function mB(t){return Me("/api/admin/users",{method:"POST",body:JSON.stringify(t)})}async function gB(t,e){return Me(`/api/admin/users/${t}`,{method:"PATCH",body:JSON.stringify(e)})}async function xB(t){return Me(`/api/rbac/users/${encodeURIComponent(t)}/deactivate`,{method:"POST"})}async function yB(t){return Me(`/api/rbac/users/${encodeURIComponent(t)}/reactivate`,{method:"POST"})}async function vB(){return Me("/api/rbac/profiles")}async function bB(t){return Me("/api/rbac/profiles",{method:"POST",body:JSON.stringify(t)})}async function wB(t,e){return Me(`/api/rbac/profiles/${encodeURIComponent(t)}`,{method:"PUT",body:JSON.stringify(e)})}async function kB(t){return Me(`/api/rbac/profiles/${encodeURIComponent(t)}`,{method:"DELETE"})}async function Rk(t,e){return Me(`/api/admin/users/${t}/permissions`,{method:"PUT",body:JSON.stringify({permissions:e})})}async function _B(){return await Me("/api/rbac/permissions")}async function tg(t,e){return Me("/api/dev/permissions/add",{method:"POST",body:JSON.stringify({name:t,description:e})})}async function Ak(t){return Me(`/api/dev/permissions/${encodeURIComponent(t)}`,{method:"DELETE"})}async function SB(){return Me("/api/dev/companies")}async function jB(t){return Me("/api/dev/companies/add",{method:"POST",body:JSON.stringify(t)})}async function CB(t,e){return Me(`/api/admin/company/${encodeURIComponent(t)}`,{method:"PUT",body:JSON.stringify(e)})}async function NB(t){return Me(`/api/dev/companies/${encodeURIComponent(t)}`,{method:"DELETE"})}async function EB(){return Me("/api/rbac/permission-sets")}async function TB(t){return Me("/api/rbac/permission-sets",{method:"POST",body:JSON.stringify(t)})}async function PB(t,e){return Me(`/api/rbac/permission-sets/${encodeURIComponent(t)}`,{method:"PUT",body:JSON.stringify(e)})}async function RB(t){return Me(`/api/rbac/permission-sets/${encodeURIComponent(t)}`,{method:"DELETE"})}const s0="mmg-notifications",Sd="/api/notifications";function AB(t,e){if(!t)return e;try{return JSON.parse(t)}catch{return e}}function Xi(){if(typeof window>"u")return[];const t=window.localStorage.getItem(s0),e=AB(t,[]);return Array.isArray(e)?e:[]}function Bp(t){typeof window>"u"||window.localStorage.setItem(s0,JSON.stringify(t))}function Ok(t){const e=new Date().toISOString();return{id:(t==null?void 0:t.id)||(typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`ntf_${Date.now()}_${Math.random().toString(16).slice(2,8)}`),title:(t==null?void 0:t.title)||"Notification",message:(t==null?void 0:t.message)||"",created_at:(t==null?void 0:t.created_at)||e,read:!!(t!=null&&t.read),level:(t==null?void 0:t.level)||"info",meta:(t==null?void 0:t.meta)||{}}}function OB(t){return Array.isArray(t)?t:Array.isArray(t==null?void 0:t.notifications)?t.notifications:Array.isArray(t==null?void 0:t.data)?t.data:[]}function MB(){return Me(Sd).then(t=>OB(t)).catch(()=>Xi())}function IB(t){return Me(Sd,{method:"POST",body:JSON.stringify(t||{})}).then(e=>(e==null?void 0:e.notification)||(e==null?void 0:e.data)||e||Ok(t)).catch(()=>{const e=Xi(),n=Ok(t),s=[n,...e];return Bp(s),n})}function DB(){return Me(Sd,{method:"DELETE"}).then(()=>[]).catch(()=>(Bp([]),[]))}function LB(t){return t?Me(`${Sd}/${encodeURIComponent(t)}`,{method:"DELETE"}).then(()=>Xi()).catch(()=>{const e=Xi().filter(n=>n.id!==t);return Bp(e),e}):Promise.resolve(Xi())}function $B(t){return t?Me(`${Sd}/${encodeURIComponent(t)}`,{method:"PATCH",body:JSON.stringify({read:!0})}).then(()=>Xi()).catch(()=>{const e=Xi().map(n=>n.id===t?{...n,read:!0}:n);return Bp(e),e}):Promise.resolve(Xi())}const FB=s0;function zs(t){if(!t||t==="NA")return null;if(t.includes("T")){const i=new Date(t);if(!Number.isNaN(i.getTime()))return i}const e=t.split(" "),n=e[0],s=e[1],r=n.split("-");if(r.length===3){const i=Number(r[0]),o=Number(r[1])-1,a=Number(r[2]);if(Number.isNaN(i)||Number.isNaN(o)||Number.isNaN(a))return null;if(s){const u=s.split(":"),d=Number(u[0]||0),h=Number(u[1]||0),f=Number(u[2]||0),p=new Date(a,o,i,d,h,f);return Number.isNaN(p.getTime())?null:p}const l=new Date(a,o,i);return l.setHours(0,0,0,0),Number.isNaN(l.getTime())?null:l}return null}function HE(t){var n;if(!((n=t==null?void 0:t.lifecycle)!=null&&n.length))return"";const e=t.lifecycle[t.lifecycle.length-1];return((e==null?void 0:e.stage)||"").toLowerCase()}function WE(t){const e={};return t.forEach(n=>{const s=n.videographer||n.Videographer||"Unassigned";e[s]||(e[s]=[]),e[s].push(n)}),e}function Si(t){const e={pending:0,rejected:0,returned:0,submitted:0,accepted:0};return t.forEach(n=>{(n.versions||[]).forEach(s=>{const r=HE(s);r==="pending"||r==="critique"?e.pending+=1:r==="rejected"||r==="editing"?e.rejected+=1:r==="returned"?e.returned+=1:r==="submitted"||r==="submitted to sales"?e.submitted+=1:(r==="accepted"||r==="done")&&(e.accepted+=1)})}),e}function VE(t){const e=t.length,n=t.filter(a=>{const l=a.videographer||a.Videographer||"Unassigned";return l&&l!=="Unassigned"&&a.status!=="Not assigned yet"}).length;let s=0;t.forEach(a=>{s+=(a.versions||[]).length});const r=Si(t),i=r.accepted+r.submitted+r.rejected+r.returned,o=i>0?Math.round((r.accepted+r.submitted)/i*100):0;return{total:e,assigned:n,uploads:s,pending:r.pending,rejected:r.rejected,returned:r.returned,submitted_to_sales:r.submitted,accepted_videos:r.accepted,accepted_pct:o}}function qE(t){const e=t.filter(n=>n.status==="Accepted"||n.status==="Done").length;return{completed:e,not_completed:t.length-e}}function zB(t){let e=0,n=0,s=0,r=0,i=0;t.forEach(d=>{(d.versions||[]).forEach(h=>{const f=h.lifecycle||[];if(f.length<2)return;let p=null;for(const g of f){const m=(g.stage||"").toLowerCase();if(m==="pending"||m==="critique"){p=zs(g.at);break}}let w=null,x=null;for(const g of f){const m=(g.stage||"").toLowerCase();if(m==="rejected"||m==="editing"||m==="accepted"||m==="submitted"||m==="submitted to sales"){w=zs(g.at),x=m;break}}if(!p||!w||!x)return;s+=1;const y=Math.round((w-p)/(1e3*60*60));if(e+=y,n+=1,x==="accepted"||x==="submitted"||x==="submitted to sales"){let g=!1,m=!1;f.forEach(v=>{const k=(v.stage||"").toLowerCase();(k==="accepted"||k==="done")&&(g=!0),k==="returned"&&(m=!0)}),g&&(r+=1),m&&(i+=1)}})});const o=n>0?Math.round(e/n):0,a=o>0?`${o} hrs`:"0 hrs",l=r+i,u=l>0?Math.round(r/l*100):0;return{avg_response_display:a,handled:s,accepted:r,handled_percent:u}}function KE(t){const e=WE(t),n={},s=new Date;return s.setHours(0,0,0,0),Object.entries(e).forEach(([r,i])=>{let o=0,a=0,l=0,u=0;i.forEach(p=>{(p.status==="Accepted"||p.status==="Done")&&(o+=1),a+=(p.versions||[]).length;const w=zs(p.filming_deadline||p.filming_date||"");w&&w<=s&&(u+=1);const x=zs(p.submission_date||"");x&&x<=s&&p.status!=="Accepted"&&p.status!=="Done"&&(l+=1)});const d=Si(i),h=d.accepted+d.submitted+d.rejected+d.returned,f=h>0?Math.round((d.accepted+d.submitted)/h*100):0;n[r]={total:i.length,started:u,late:l,completed:o,uploads:a,accepted_pct:f}}),n}function $u(t,e){const n=[];return t.forEach(s=>{(s.versions||[]).forEach(r=>{const i=HE(r);(i==="submitted to sales"?"submitted":i)===e&&n.push({task:s,version:r,stage:i})})}),n}function ng(t,e){const n=[];return t.forEach(s=>{const r=[];(s.versions||[]).forEach(i=>{(i.lifecycle||[]).forEach(o=>{const a=(o.stage||"").toLowerCase();(e==="hod"&&(a==="rejected"||a==="editing")||e==="hos"&&a==="returned")&&r.push({version:i.version,event:o,stage:a})})}),r.length&&n.push({...s,rejectionEvents:r,rejectionCount:r.length})}),n}function GE(t){const e=$u(t,"pending"),n=[];return e.forEach(({task:s,version:r})=>{let i=null;(r.lifecycle||[]).forEach(a=>{const l=(a.stage||"").toLowerCase();(l==="pending"||l==="critique")&&(i=zs(a.at))});const o=i?Math.round((Date.now()-i.getTime())/(1e3*60*60)):null;n.push({task:s,version:r,uploadTime:i,waitingHours:o})}),{count:n.length,reviews:n}}function YE(t){const e=[];return t.forEach(n=>{(n.versions||[]).forEach(s=>{let r=null,i=null,o=null,a=null,l=null;if((s.lifecycle||[]).forEach(u=>{const d=(u.stage||"").toLowerCase();!r&&(d==="pending"||d==="critique")&&(r=zs(u.at)),!i&&(d==="rejected"||d==="editing"||d==="accepted"||d==="submitted"||d==="submitted to sales")&&(i=zs(u.at),o=d,a=u.rejection_class||null,l=u.rejection_comments||null)}),r&&i&&o){const u=Math.round((i-r)/36e5);e.push({task:n,version:s,responseHours:u,uploadTime:r,reviewTime:i,decision:o,rejectionClass:a,comments:l})}})}),e}function QE(t){const e=VE(t),n=qE(t),s=new Date;s.setHours(0,0,0,0);let r=0,i=0,o=0,a=0,l=0,u=0;t.forEach(p=>{const w=zs(p.filming_deadline||p.filming_date||"");w&&w<=s&&(r+=1);const x=zs(p.submission_date||"");x&&x<=s&&p.status!=="Accepted"&&p.status!=="Done"&&(i+=1),(p.status==="Accepted"||p.status==="Done")&&(a+=1,o+=(p.versions||[]).length),(p.versions||[]).forEach(y=>{(y.lifecycle||[]).forEach(g=>{const m=(g.stage||"").toLowerCase();(m==="rejected"||m==="editing")&&(l+=1),m==="returned"&&(u+=1)})})});const d=a>0?(o/a).toFixed(2):"0",h=$u(t,"pending"),f=$u(t,"submitted");return{summary:e,pie:n,tasksStarted:r,lateTasks:i,pendingHOD:h.length,pendingHOS:f.length,rejectionsByHOD:l,rejectionsByHOS:u,uploadRatio:d}}function sg(t){const e=zs(t.submission_date||"");if(!e)return!1;const n=new Date;return n.setHours(0,0,0,0),e<n&&t.status!=="Accepted"&&t.status!=="Done"}const hr=[{task_number:2217,brand:"City Brand Launch",filming_deadline:"17-02-2025",submission_date:"20-02-2025",status:"Critique",videographer:"Alyssa Reed",location:"Dubai",versions:[{version:1,lifecycle:[{stage:"pending",at:"18-02-2025 10:00:00"}]}]},{task_number:2216,brand:"Mall LED Loop",filming_deadline:"16-02-2025",submission_date:"19-02-2025",status:"Submitted to Sales",videographer:"Ravi Sharma",location:"Dubai",versions:[{version:1,lifecycle:[{stage:"pending",at:"17-02-2025 09:00:00"},{stage:"submitted to sales",at:"18-02-2025 11:30:00"}]}]},{task_number:2215,brand:"Festival Teaser",filming_deadline:"15-02-2025",submission_date:"18-02-2025",status:"Returned",videographer:"Alyssa Reed",location:"Abu Dhabi",versions:[{version:1,lifecycle:[{stage:"pending",at:"15-02-2025 10:00:00"},{stage:"submitted",at:"16-02-2025 12:00:00"},{stage:"returned",at:"17-02-2025 15:30:00",rejection_class:"Lighting",rejection_comments:"Exposure too dark",rejected_by:"Head of Sales"}]}]},{task_number:2214,brand:"Luxury Auto Montage",filming_deadline:"14-02-2025",submission_date:"17-02-2025",status:"Editing",videographer:"Noah Chen",location:"Sharjah",versions:[{version:1,lifecycle:[{stage:"pending",at:"14-02-2025 09:30:00"},{stage:"rejected",at:"15-02-2025 12:10:00",rejection_class:"Artwork Color",rejection_comments:"Incorrect color profile",rejected_by:"Reviewer"}]}]},{task_number:2213,brand:"Airport Arrival Hero",filming_deadline:"12-02-2025",submission_date:"15-02-2025",status:"Accepted",videographer:"Noah Chen",location:"Dubai",versions:[{version:1,lifecycle:[{stage:"pending",at:"12-02-2025 10:00:00"},{stage:"submitted to sales",at:"13-02-2025 15:00:00"},{stage:"accepted",at:"14-02-2025 12:00:00"}]}]},{task_number:2212,brand:"Retail Weekend Promo",filming_deadline:"10-02-2025",submission_date:"13-02-2025",status:"Done",videographer:"Ravi Sharma",location:"Ajman",versions:[{version:1,lifecycle:[{stage:"pending",at:"10-02-2025 10:00:00"},{stage:"submitted",at:"11-02-2025 14:00:00"},{stage:"done",at:"12-02-2025 10:00:00"}]}]},{task_number:2211,brand:"Harbor Night Loop",filming_deadline:"18-02-2025",submission_date:"21-02-2025",status:"Editing",videographer:"Alyssa Reed",location:"Dubai",versions:[{version:1,lifecycle:[{stage:"pending",at:"16-02-2025 11:00:00"},{stage:"editing",at:"17-02-2025 13:00:00",rejection_class:"Environment Too Dark",rejection_comments:"Please brighten the surrounding scene",rejected_by:"Reviewer"}]}]},{task_number:2210,brand:"City Center Countdown",filming_deadline:"22-02-2025",submission_date:"25-02-2025",status:"Assigned to Alyssa",videographer:"Alyssa Reed",location:"Dubai",versions:[]},{task_number:2209,brand:"Expo Walkthrough",filming_deadline:"24-02-2025",submission_date:"27-02-2025",status:"Not assigned yet",videographer:"Unassigned",location:"Abu Dhabi",versions:[]},{task_number:2208,brand:"Weekend Highlights",filming_deadline:"13-02-2025",submission_date:"16-02-2025",status:"Submitted to Sales",videographer:"Ravi Sharma",location:"Sharjah",versions:[{version:1,lifecycle:[{stage:"pending",at:"13-02-2025 09:00:00"},{stage:"rejected",at:"14-02-2025 10:30:00",rejection_class:"Lighting",rejection_comments:"Flicker in the panel",rejected_by:"Reviewer"}]},{version:2,lifecycle:[{stage:"pending",at:"15-02-2025 12:15:00"},{stage:"submitted",at:"16-02-2025 14:40:00"}]}]}],BB={session_id:"vc-session-01",messages:[{id:"vc-msg-1",role:"assistant",content:"Good morning. Upload a cut or describe the request, and I will log the critique, checklist, and next steps.",timestamp:"2025-02-18T08:40:12+04:00"}],message_count:1,last_updated:"2025-02-18T08:40:12+04:00"},UB=[{workflow_id:"workflow-2217",task_number:2217,folder_name:"City Brand Launch",status:"pending_reviewer",created_at:"2025-02-18T09:10:00+04:00",reviewer_approved:!1,hos_approved:!1}];function or(t){return new Promise(e=>setTimeout(e,t))}function HB(t,e){const n=[];let s=0;for(;s<t.length;)n.push(t.slice(s,s+e)),s+=e;return n}function r0(t,e){const n=(t||"").trim();return[`${n?`Thanks for the details on "${n}".`:"Thanks for the upload."} ${e?"I reviewed the file and captured the critique highlights below:":"Here is a quick critique outline to confirm before I log the request:"}`,"","- Narrative clarity: tighten the opening 3 seconds.","- Visual hierarchy: spotlight the primary CTA earlier.","- Audio mix: reduce music by about 3dB under VO.","- Export: keep 1080x1920, 29.97fps.","","Reply with any edits or confirm if I should submit to the reviewer."].join(`
`)}function WB(t){return[{action_id:"approve_reviewer",label:"Approve",workflow_id:t,variant:"secondary"},{action_id:"reject_reviewer",label:"Reject",workflow_id:t,variant:"ghost"}]}function VB(t){let e=!1;return t&&(t.aborted?e=!0:t.addEventListener("abort",()=>{e=!0},{once:!0})),()=>e}function qB(t){if(!t)return!1;if(t.type&&t.type.startsWith("video/"))return!0;const e=t.name||"";return/\.(mp4|mov|avi|mkv|webm)$/i.test(e)}function KB(){const t=VE(hr),e=qE(hr),n=zB(hr),s=KE(hr),r=WE(hr),i=QE(hr),o=Si(hr),a=GE(hr),l=YE(hr);return{mode:"month",period:"2025-02",tasks:hr,summary:t,pie:e,reviewer:n,summary_videographers:s,videographers:r,quick_stats:i,status_counts:o,pending_reviews:a,response_times:l}}async function GB({mode:t,period:e}={}){return await or(240),{...KB(),mode:t||"month",period:e||"2025-02"}}async function YB(){return await or(200),BB}async function QB({file:t,message:e,sessionId:n}){await or(200);const s=n||`vc-session-${Date.now()}`,r=`vc-file-${Date.now()}`;return qB(t)?{success:!0,file_id:r,filename:(t==null?void 0:t.name)||"upload",type:"video",message:"Video received. Which task number is this for?",session_id:s}:{success:!0,file_id:r,filename:(t==null?void 0:t.name)||"upload",file_url:URL.createObjectURL(t),type:"image",response:r0(e,!0),session_id:s,timestamp:new Date().toISOString()}}async function XB({file:t}){return await or(200),{file_id:`vc-asset-${Date.now()}`,filename:(t==null?void 0:t.name)||"attachment",file_url:URL.createObjectURL(t)}}async function JB({file:t,taskNumber:e}){return await or(260),{success:!0,file_id:`vc-video-${Date.now()}`,workflow_id:`workflow-${Date.now()}`,version:1,message:`Video uploaded successfully (v1) for task #${e}`}}async function ZB({command:t,args:e,sessionId:n}){await or(200);const s=n||`vc-session-${Date.now()}`,r=(t||"").toLowerCase(),i=(e||"").trim();return r?r==="help"?{success:!0,command:r,response:`**Video Critique Commands**

- /log or /design - Start a new design request
- /recent - Export recent task data
- /edit <task_number> - Edit an existing task
- /delete <task_number> - Delete a task

You can also paste briefs or upload images/videos.`,session_id:s}:r==="log"||r==="design"?{success:!0,command:r,response:r0(i||"I want to log a design request",!1),session_id:s}:r==="edit"?{success:!0,command:r,response:i?"Editing task "+i+". Which fields should I update?":"Please provide a task number: /edit <task_number>",session_id:s}:r==="delete"?{success:!0,command:r,response:i?"Delete request queued for task "+i+". Confirm to proceed.":"Please provide a task number: /delete <task_number>",session_id:s}:r==="recent"?{success:!0,command:r,response:"Preparing the latest export. I will send the download link shortly.",session_id:s}:{success:!1,command:r,error:"Unknown command: /"+r+". Use /help for available commands.",session_id:s}:{success:!1,command:"",error:"Unknown command: /. Use /help for available commands.",session_id:s}}async function e4({actionId:t,workflowId:e}){return await or(200),t==="reject_reviewer"||t==="return_hos"?{success:!0,message:"Please provide rejection details.",requires_form:!0,form_type:t==="return_hos"?"return":"rejection",workflow_id:e}:{success:!0,message:`Action ${t} applied for ${e}.`}}async function t4({formType:t,workflowId:e}){return await or(200),{success:!0,message:`${t} submitted for ${e}.`}}async function n4(t){return await or(120),t==="return"?{title:"Return for Revision",submit_text:"Submit",fields:[{id:"category",label:"Category",type:"select",required:!0,options:[{value:"technical",label:"Technical Issue"},{value:"content",label:"Content Issue"},{value:"quality",label:"Quality Issue"},{value:"missing",label:"Missing Elements"},{value:"other",label:"Other"}]},{id:"reason",label:"Details",type:"textarea",required:!0,placeholder:"Please describe what needs to be revised..."}]}:{title:"Reject Video",submit_text:"Submit",fields:[{id:"category",label:"Category",type:"select",required:!0,options:[{value:"technical",label:"Technical Issue"},{value:"content",label:"Content Issue"},{value:"quality",label:"Quality Issue"},{value:"missing",label:"Missing Elements"},{value:"other",label:"Other"}]},{id:"reason",label:"Details",type:"textarea",required:!0,placeholder:"Please describe what needs to be fixed..."}]}}function s4(t){return t!=null&&t.preview_url?t.preview_url:t!=null&&t.file_url?t.file_url:t!=null&&t.url?t.url:null}async function r4({sessionId:t,message:e,fileIds:n,onEvent:s,onDone:r,onError:i,signal:o}){const a=VB(o);try{const l=t||`vc-session-${Date.now()}`;if(a()||(await or(180),a()))return;const u=r0(e,!1),d=HB(u,48);for(const h of d){if(a())return;s==null||s({type:"delta",content:h}),await or(90)}if(a())return;s==null||s({type:"text_done",content:u}),n!=null&&n.length&&(s==null||s({type:"files",files:n.map((h,f)=>({file_id:h,filename:f===0?"Brief.pdf":`Attachment-${f+1}.pdf`,file_url:`https://example.com/mock-${h}.pdf`}))})),(e||"").toLowerCase().includes("approval")&&(s==null||s({type:"actions",actions:WB(UB[0].workflow_id)})),s==null||s({type:"done",session_id:l}),r==null||r()}catch(l){throw s==null||s({type:"error",message:(l==null?void 0:l.message)||"Stream failed"}),i==null||i(l),l}}async function i4(t){return GB(t)}async function o4(){return YB()}async function a4({file:t,message:e,sessionId:n}){return QB({file:t,message:e,sessionId:n})}async function l4({file:t}){return XB({file:t})}async function Mk({file:t,taskNumber:e}){return JB({file:t,taskNumber:e})}async function c4({command:t,args:e,sessionId:n}){return ZB({command:t,args:e,sessionId:n})}async function u4({actionId:t,workflowId:e}){return e4({actionId:t,workflowId:e})}async function d4({formType:t,workflowId:e,category:n,reason:s}){return t4({formType:t,workflowId:e})}async function h4(t){return n4(t)}function f4(t){return s4(t)}async function p4({sessionId:t,message:e,fileIds:n,onEvent:s,onDone:r,onError:i,signal:o}){return r4({sessionId:t,message:e,fileIds:n,onEvent:s,onDone:r,onError:i,signal:o})}function jd(t,e,n){Array.isArray(n)&&n.filter(Boolean).forEach(s=>t.append(e,s))}async function m4({companies:t,activeOnly:e=!0}={}){const n=new URLSearchParams;jd(n,"companies",t),e!==void 0&&n.set("active_only",String(e));const s=n.toString();return Me(`/api/assets/networks${s?`?${s}`:""}`)}async function g4({companies:t,networkId:e,activeOnly:n=!0}={}){const s=new URLSearchParams;jd(s,"companies",t),e!=null&&s.set("network_id",String(e)),n!==void 0&&s.set("active_only",String(n));const r=s.toString();return Me(`/api/assets/asset-types${r?`?${r}`:""}`)}async function x4({companies:t,networkId:e,typeId:n,activeOnly:s=!0}={}){const r=new URLSearchParams;jd(r,"companies",t),e!=null&&r.set("network_id",String(e)),n!=null&&r.set("type_id",String(n)),s!==void 0&&r.set("active_only",String(s));const i=r.toString();return Me(`/api/assets/network-assets${i?`?${i}`:""}`)}async function y4({companies:t,networkId:e,typeId:n,activeOnly:s=!0,includeEligibility:r=!1}={}){const i=new URLSearchParams;jd(i,"companies",t),e!=null&&i.set("network_id",String(e)),n!=null&&i.set("type_id",String(n)),s!==void 0&&i.set("active_only",String(s)),r!==void 0&&i.set("include_eligibility",String(r));const o=i.toString();return Me(`/api/assets/locations${o?`?${o}`:""}`)}async function v4({companies:t,activeOnly:e=!0}={}){const n=new URLSearchParams;jd(n,"companies",t),e!==void 0&&n.set("active_only",String(e));const s=n.toString();return Me(`/api/assets/packages${s?`?${s}`:""}`)}const b4={chat:{to:"/app/chat",label:"AI Chat Assistant",icon:AM},video_critique:{to:"/app/video-critique",label:"Video Critique",icon:Zh},mockup:{to:"/app/mockup",label:"Mockup Assistant",icon:PM},proposals:{to:"/app/proposals",label:"Proposal Assistant",icon:IM},admin:{to:"/app/admin",label:"Admin",icon:LM},asset_management:{to:"/app/asset-management",label:"Asset Management",icon:MM},settings:{to:"/app/settings",label:"Settings",icon:DC}},w4=["chat","mockup","proposals","video_critique","admin","asset_management","settings"];function k4(t){return t.includes("/app/video-critique")?"Video Critique":t.includes("/app/chat")?"AI Chat Assistant":t.includes("/app/mockup")?"Mockup Assistant":t.includes("/app/proposals")?"Proposal Assistant":t.includes("/app/notifications")?"Notifications":t.includes("/app/admin")?"Admin Panel":t.includes("/app/asset-management")?"Asset Management":t.includes("/app/settings")?"Settings":"Workspace"}function _4(t){const e=[{name:"sales",tools:["chat","video_critique","mockup","proposals"],sort_order:1}];return md(t)&&e.push({name:"core",tools:["admin"],sort_order:100}),e}function S4(t,e){var a;const s=[...((a=t==null?void 0:t.modules)!=null&&a.length?t.modules:_4(e))||[]].sort((l,u)=>(l.sort_order||0)-(u.sort_order||0)),r=new Set;s.forEach(l=>{(l.tools||[]).forEach(u=>{r.add(u==="ai_costs"?"costs":u)})}),r.has("chat")&&r.add("video_critique"),md(e)&&(r.add("admin"),r.add("asset_management")),r.add("settings");const i=[],o=new Set;return w4.forEach(l=>{if(!r.has(l))return;const u=b4[l];u&&!o.has(u.to)&&(o.add(u.to),i.push(u))}),i}function j4(){const{user:t,logout:e}=ii(),n=Jl(),s=hd(),[r,i]=b.useState(!1),[o,a]=b.useState(!1),l=en({queryKey:["modules","accessible"],queryFn:K3}),u=b.useMemo(()=>((t==null?void 0:t.name)||"User").split(" ").slice(0,2).map(f=>f[0]).join("").toUpperCase(),[t]),d=b.useMemo(()=>S4(l.data,t),[l.data,t]);return c.jsxs("div",{className:"h-screen flex flex-col overflow-hidden",children:[c.jsx("header",{className:"sticky top-0 z-40",children:c.jsx("div",{className:"w-full px-6 lg:px-10",children:c.jsx("div",{className:"mmg-header-card mt-4 rounded-2xl bg-white/65 dark:bg-white/5 backdrop-blur-md shadow-soft ring-1 ring-black/5 dark:ring-white/10",children:c.jsxs("div",{className:"flex items-center justify-between px-4 py-2 gap-3",children:[c.jsxs("div",{className:"flex items-end gap-3",children:[c.jsx(VC,{size:64}),c.jsx("div",{className:"hidden sm:block text-sm leading-none text-black/50 dark:text-white/60 relative -top-px",children:"|"}),c.jsx("div",{className:"hidden sm:block text-sm font-medium leading-none text-black/70 dark:text-white/70",children:k4(n.pathname)})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(te,{variant:"ghost",size:"icon",className:"rounded-2xl lg:hidden",onClick:()=>a(!0),title:"Open sidebar","aria-label":"Open sidebar",children:c.jsx(Am,{size:18})}),c.jsx(V3,{}),c.jsx(pN,{}),c.jsxs(Fp,{children:[c.jsx(zp,{asChild:!0,children:c.jsxs("button",{className:"flex items-center gap-2 rounded-2xl px-2.5 py-1.5 hover:bg-black/5 dark:hover:bg-white/10 transition-colors","aria-label":"User menu",children:[c.jsx("div",{className:"h-9 w-9 rounded-2xl bg-black/5 dark:bg-white/10 flex items-center justify-center shadow-soft",children:c.jsx("span",{className:"text-xs font-semibold",children:u})}),c.jsxs("div",{className:"hidden sm:flex flex-col items-start leading-tight",children:[c.jsx("span",{className:"mmg-brand-gold text-sm font-medium",children:t==null?void 0:t.name}),c.jsx("span",{className:"text-xs text-black/50 dark:text-white/60",children:t==null?void 0:t.email})]})]})}),c.jsxs(kd,{align:"end",children:[c.jsx(zE,{children:c.jsxs("div",{className:"flex items-center justify-between gap-3",children:[c.jsx("span",{className:"truncate",children:t==null?void 0:t.email}),c.jsx("span",{className:"text-xs rounded-full px-2 py-0.5 bg-black/5 dark:bg-white/10",children:((t==null?void 0:t.roles)||[]).join(" | ")})]})}),c.jsx(Qf,{}),c.jsxs(Lu,{onSelect:()=>s("/app/settings"),children:[c.jsx(DC,{size:16}),"Settings"]}),c.jsxs(Lu,{onSelect:()=>{e(),s("/")},children:[c.jsx(RM,{size:16}),"Logout"]})]})]})]})]})})})}),c.jsx(q3,{}),c.jsx("div",{className:"w-full px-6 lg:px-10 pb-4 flex-1 flex overflow-hidden min-w-0",children:c.jsxs("div",{className:Ee("mt-4 grid grid-cols-1 gap-4 lg:grid-cols-[280px_1fr] flex-1 min-h-0 min-w-0","transition-[grid-template-columns] duration-500",r&&"lg:grid-cols-[64px_1fr] 2xl:grid-cols-[72px_1fr]"),children:[c.jsxs("aside",{className:Ee("hidden lg:block rounded-2xl bg-white/55 dark:bg-white/5 backdrop-blur-md shadow-soft ring-1 ring-black/5 dark:ring-white/10","overflow-hidden"),children:[c.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[c.jsx("div",{className:Ee("text-s ms-3 font-semibold tracking-wide text-black/50 dark:text-white/60",r&&"hidden lg:block lg:sr-only"),children:"Tools"}),c.jsx(te,{variant:"ghost",size:"icon",className:"rounded-2xl",onClick:()=>i(h=>!h),title:"Toggle sidebar","aria-label":"Toggle sidebar",children:c.jsx(Am,{size:18})})]}),c.jsx("nav",{className:"px-2 pb-2",children:d.map(h=>{const f=n.pathname===h.to||n.pathname.startsWith(`${h.to}/`),p=h.icon;return c.jsxs("button",{onClick:()=>s(h.to),className:Ee("mmg-nav-btn w-full flex items-center gap-3 rounded-2xl p-2 text-sm transition-colors mb-1.5 shadow-soft",f?"mmg-nav-btn-active":"","text-base",r&&"lg:justify-center lg:gap-0"),children:[c.jsx("span",{className:"mmg-nav-icon h-8 w-8 shrink-0 rounded-2xl bg-black/4 dark:bg-white/8 flex items-center justify-center shadow-soft",children:c.jsx(p,{size:22})}),c.jsx("span",{className:Ee("min-w-0 truncate",r&&"hidden"),children:h.label})]},h.to)})}),c.jsx("div",{className:"px-3 pb-3 pt-1",children:c.jsx("div",{className:Ee("h-px bg-black/5 dark:bg-white/10",r&&"lg:mx-auto lg:w-10")})})]}),c.jsx("main",{className:"min-h-0 min-w-0 h-full",children:c.jsx(RO,{})})]})}),c.jsxs("div",{className:Ee("fixed inset-0 z-50 lg:hidden",o?"pointer-events-auto":"pointer-events-none"),children:[c.jsx("div",{className:Ee("absolute inset-0 bg-black/40 transition-opacity",o?"opacity-100":"opacity-0"),onClick:()=>a(!1)}),c.jsxs("aside",{className:Ee("absolute inset-y-0 left-0 w-72 max-w-full rounded-r-2xl bg-white/90 dark:bg-neutral-900/95","backdrop-blur-xl shadow-2xl ring-1 ring-black/10 dark:ring-white/10","transition-transform duration-200",o?"translate-x-0":"-translate-x-full"),children:[c.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[c.jsx("div",{className:"text-sm font-semibold tracking-wide text-black/60 dark:text-white/70",children:"Tools"}),c.jsx(te,{variant:"ghost",size:"icon",className:"rounded-2xl",onClick:()=>a(!1),title:"Close sidebar","aria-label":"Close sidebar",children:c.jsx(Am,{size:18})})]}),c.jsx("nav",{className:"px-2 pb-3",children:d.map(h=>{const f=n.pathname===h.to||n.pathname.startsWith(`${h.to}/`),p=h.icon;return c.jsxs("button",{onClick:()=>{s(h.to),a(!1)},className:Ee("mmg-nav-btn w-full flex items-center gap-2.5 rounded-2xl p-2.5 text-sm transition-colors mb-1.5 shadow-soft",f?"mmg-nav-btn-active":"","text-sm"),children:[c.jsx("span",{className:"mmg-nav-icon h-9 w-9 shrink-0 rounded-2xl bg-black/4 dark:bg-white/8 flex items-center justify-center shadow-soft",children:c.jsx(p,{size:20})}),c.jsx("span",{className:"min-w-0 truncate",children:h.label})]},h.to)})})]})]})]})}const Up=0,fo=1,rc=2,XE=4;function Ik(t){return()=>t}function C4(t){t()}function JE(t,e){return n=>t(e(n))}function Dk(t,e){return()=>t(e)}function N4(t,e){return n=>t(e,n)}function i0(t){return t!==void 0}function E4(...t){return()=>{t.map(C4)}}function ic(){}function Hp(t,e){return e(t),t}function T4(t,e){return e(t)}function Rt(...t){return t}function ut(t,e){return t(fo,e)}function Ge(t,e){t(Up,e)}function o0(t){t(rc)}function Mt(t){return t(XE)}function Pe(t,e){return ut(t,N4(e,Up))}function nr(t,e){const n=t(fo,s=>{n(),e(s)});return n}function Lk(t){let e,n;return s=>r=>{e=r,n&&clearTimeout(n),n=setTimeout(()=>{s(e)},t)}}function ZE(t,e){return t===e}function Tt(t=ZE){let e;return n=>s=>{t(e,s)||(e=s,n(s))}}function He(t){return e=>n=>{t(n)&&e(n)}}function ye(t){return e=>JE(e,t)}function wr(t){return e=>()=>{e(t)}}function ne(t,...e){const n=P4(...e);return(s,r)=>{switch(s){case rc:o0(t);return;case fo:return ut(t,n(r))}}}function Cr(t,e){return n=>s=>{n(e=t(e,s))}}function da(t){return e=>n=>{t>0?t--:e(n)}}function Xr(t){let e=null,n;return s=>r=>{e=r,!n&&(n=setTimeout(()=>{n=void 0,s(e)},t))}}function Qe(...t){const e=new Array(t.length);let n=0,s=null;const r=Math.pow(2,t.length)-1;return t.forEach((i,o)=>{const a=Math.pow(2,o);ut(i,l=>{const u=n;n=n|a,e[o]=l,u!==r&&n===r&&s&&(s(),s=null)})}),i=>o=>{const a=()=>{i([o].concat(e))};n===r?a():s=a}}function P4(...t){return e=>t.reduceRight(T4,e)}function R4(t){let e,n;const s=()=>e==null?void 0:e();return function(r,i){switch(r){case fo:return i?n===i?void 0:(s(),n=i,e=ut(t,i),e):(s(),ic);case rc:s(),n=null;return}}}function le(t){let e=t;const n=Ze();return(s,r)=>{switch(s){case Up:e=r;break;case fo:{r(e);break}case XE:return e}return n(s,r)}}function En(t,e){return Hp(le(e),n=>Pe(t,n))}function Ze(){const t=[];return(e,n)=>{switch(e){case Up:t.slice().forEach(s=>{s(n)});return;case rc:t.splice(0,t.length);return;case fo:return t.push(n),()=>{const s=t.indexOf(n);s>-1&&t.splice(s,1)}}}}function ks(t){return Hp(Ze(),e=>Pe(t,e))}function at(t,e=[],{singleton:n}={singleton:!0}){return{constructor:t,dependencies:e,id:A4(),singleton:n}}const A4=()=>Symbol();function O4(t){const e=new Map,n=({constructor:s,dependencies:r,id:i,singleton:o})=>{if(o&&e.has(i))return e.get(i);const a=s(r.map(l=>n(l)));return o&&e.set(i,a),a};return n(t)}function tn(...t){const e=Ze(),n=new Array(t.length);let s=0;const r=Math.pow(2,t.length)-1;return t.forEach((i,o)=>{const a=Math.pow(2,o);ut(i,l=>{n[o]=l,s=s|a,s===r&&Ge(e,n)})}),function(i,o){switch(i){case rc:{o0(e);return}case fo:return s===r&&o(n),ut(e,o)}}}function Ue(t,e=ZE){return ne(t,Tt(e))}function ly(...t){return function(e,n){switch(e){case rc:return;case fo:return E4(...t.map(s=>ut(s,n)))}}}var is=(t=>(t[t.DEBUG=0]="DEBUG",t[t.INFO=1]="INFO",t[t.WARN=2]="WARN",t[t.ERROR=3]="ERROR",t))(is||{});const M4={0:"debug",3:"error",1:"log",2:"warn"},I4=()=>typeof globalThis>"u"?window:globalThis,po=at(()=>{const t=le(3);return{log:le((e,n,s=1)=>{var r;const i=(r=I4().VIRTUOSO_LOG_LEVEL)!=null?r:Mt(t);s>=i&&console[M4[s]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",e,n)}),logLevel:t}},[],{singleton:!0});function ba(t,e,n){return a0(t,e,n).callbackRef}function a0(t,e,n){const s=ge.useRef(null);let r=o=>{};const i=ge.useMemo(()=>typeof ResizeObserver<"u"?new ResizeObserver(o=>{const a=()=>{const l=o[0].target;l.offsetParent!==null&&t(l)};n?a():requestAnimationFrame(a)}):null,[t,n]);return r=o=>{o&&e?(i==null||i.observe(o),s.current=o):(s.current&&(i==null||i.unobserve(s.current)),s.current=null)},{callbackRef:r,ref:s}}function D4(t,e,n,s,r,i,o,a,l){const u=ge.useCallback(d=>{const h=L4(d.children,e,a?"offsetWidth":"offsetHeight",r);let f=d.parentElement;for(;!f.dataset.virtuosoScroller;)f=f.parentElement;const p=f.lastElementChild.dataset.viewportType==="window";let w;p&&(w=f.ownerDocument.defaultView);const x=o?a?o.scrollLeft:o.scrollTop:p?a?w.scrollX||w.document.documentElement.scrollLeft:w.scrollY||w.document.documentElement.scrollTop:a?f.scrollLeft:f.scrollTop,y=o?a?o.scrollWidth:o.scrollHeight:p?a?w.document.documentElement.scrollWidth:w.document.documentElement.scrollHeight:a?f.scrollWidth:f.scrollHeight,g=o?a?o.offsetWidth:o.offsetHeight:p?a?w.innerWidth:w.innerHeight:a?f.offsetWidth:f.offsetHeight;s({scrollHeight:y,scrollTop:Math.max(x,0),viewportHeight:g}),i==null||i(a?$k("column-gap",getComputedStyle(d).columnGap,r):$k("row-gap",getComputedStyle(d).rowGap,r)),h!==null&&t(h)},[t,e,r,i,o,s,a]);return a0(u,n,l)}function L4(t,e,n,s){const r=t.length;if(r===0)return null;const i=[];for(let o=0;o<r;o++){const a=t.item(o);if(a.dataset.index===void 0)continue;const l=parseInt(a.dataset.index),u=parseFloat(a.dataset.knownSize),d=e(a,n);if(d===0&&s("Zero-sized element, this should not happen",{child:a},is.ERROR),d===u)continue;const h=i[i.length-1];i.length===0||h.size!==d||h.endIndex!==l-1?i.push({endIndex:l,size:d,startIndex:l}):i[i.length-1].endIndex++}return i}function $k(t,e,n){return e!=="normal"&&!(e!=null&&e.endsWith("px"))&&n(`${t} was not resolved to pixel value correctly`,e,is.WARN),e==="normal"?0:parseInt(e??"0",10)}function eT(t,e,n){const s=ge.useRef(null),r=ge.useCallback(l=>{if(!(l!=null&&l.offsetParent))return;const u=l.getBoundingClientRect(),d=u.width;let h,f;if(e){const p=e.getBoundingClientRect(),w=u.top-p.top;f=p.height-Math.max(0,w),h=w+e.scrollTop}else{const p=o.current.ownerDocument.defaultView;f=p.innerHeight-Math.max(0,u.top),h=u.top+p.scrollY}s.current={offsetTop:h,visibleHeight:f,visibleWidth:d},t(s.current)},[t,e]),{callbackRef:i,ref:o}=a0(r,!0,n),a=ge.useCallback(()=>{r(o.current)},[r,o]);return ge.useEffect(()=>{var l;if(e){e.addEventListener("scroll",a);const u=new ResizeObserver(()=>{requestAnimationFrame(a)});return u.observe(e),()=>{e.removeEventListener("scroll",a),u.unobserve(e)}}else{const u=(l=o.current)==null?void 0:l.ownerDocument.defaultView;return u==null||u.addEventListener("scroll",a),u==null||u.addEventListener("resize",a),()=>{u==null||u.removeEventListener("scroll",a),u==null||u.removeEventListener("resize",a)}}},[a,e,o]),i}const Hn=at(()=>{const t=Ze(),e=Ze(),n=le(0),s=Ze(),r=le(0),i=Ze(),o=Ze(),a=le(0),l=le(0),u=le(0),d=le(0),h=Ze(),f=Ze(),p=le(!1),w=le(!1),x=le(!1);return Pe(ne(t,ye(({scrollTop:y})=>y)),e),Pe(ne(t,ye(({scrollHeight:y})=>y)),o),Pe(e,r),{deviation:n,fixedFooterHeight:u,fixedHeaderHeight:l,footerHeight:d,headerHeight:a,horizontalDirection:w,scrollBy:f,scrollContainerState:t,scrollHeight:o,scrollingInProgress:p,scrollTo:h,scrollTop:e,skipAnimationFrameInResizeObserver:x,smoothScrollTargetReached:s,statefulScrollTop:r,viewportHeight:i}},[],{singleton:!0}),Fu={lvl:0};function tT(t,e){const n=t.length;if(n===0)return[];let{index:s,value:r}=e(t[0]);const i=[];for(let o=1;o<n;o++){const{index:a,value:l}=e(t[o]);i.push({end:a-1,start:s,value:r}),s=a,r=l}return i.push({end:1/0,start:s,value:r}),i}function yt(t){return t===Fu}function zu(t,e){if(!yt(t))return e===t.k?t.v:e<t.k?zu(t.l,e):zu(t.r,e)}function ar(t,e,n="k"){if(yt(t))return[-1/0,void 0];if(Number(t[n])===e)return[t.k,t.v];if(Number(t[n])<e){const s=ar(t.r,e,n);return s[0]===-1/0?[t.k,t.v]:s}return ar(t.l,e,n)}function xs(t,e,n){return yt(t)?rT(e,n,1):e===t.k?an(t,{k:e,v:n}):e<t.k?Fk(an(t,{l:xs(t.l,e,n)})):Fk(an(t,{r:xs(t.r,e,n)}))}function vl(){return Fu}function bl(t,e,n){if(yt(t))return[];const s=ar(t,e)[0];return $4(uy(t,s,n))}function cy(t,e){if(yt(t))return Fu;const{k:n,l:s,r}=t;if(e===n){if(yt(s))return r;if(yt(r))return s;{const[i,o]=sT(s);return of(an(t,{k:i,l:nT(s),v:o}))}}else return e<n?of(an(t,{l:cy(s,e)})):of(an(t,{r:cy(r,e)}))}function Fo(t){return yt(t)?[]:[...Fo(t.l),{k:t.k,v:t.v},...Fo(t.r)]}function uy(t,e,n){if(yt(t))return[];const{k:s,l:r,r:i,v:o}=t;let a=[];return s>e&&(a=a.concat(uy(r,e,n))),s>=e&&s<=n&&a.push({k:s,v:o}),s<=n&&(a=a.concat(uy(i,e,n))),a}function of(t){const{l:e,lvl:n,r:s}=t;if(s.lvl>=n-1&&e.lvl>=n-1)return t;if(n>s.lvl+1){if(rg(e))return iT(an(t,{lvl:n-1}));if(!yt(e)&&!yt(e.r))return an(e.r,{l:an(e,{r:e.r.l}),lvl:n,r:an(t,{l:e.r.r,lvl:n-1})});throw new Error("Unexpected empty nodes")}else{if(rg(t))return dy(an(t,{lvl:n-1}));if(!yt(s)&&!yt(s.l)){const r=s.l,i=rg(r)?s.lvl-1:s.lvl;return an(r,{l:an(t,{lvl:n-1,r:r.l}),lvl:r.lvl+1,r:dy(an(s,{l:r.r,lvl:i}))})}else throw new Error("Unexpected empty nodes")}}function an(t,e){return rT(e.k!==void 0?e.k:t.k,e.v!==void 0?e.v:t.v,e.lvl!==void 0?e.lvl:t.lvl,e.l!==void 0?e.l:t.l,e.r!==void 0?e.r:t.r)}function nT(t){return yt(t.r)?t.l:of(an(t,{r:nT(t.r)}))}function rg(t){return yt(t)||t.lvl>t.r.lvl}function sT(t){return yt(t.r)?[t.k,t.v]:sT(t.r)}function rT(t,e,n,s=Fu,r=Fu){return{k:t,l:s,lvl:n,r,v:e}}function Fk(t){return dy(iT(t))}function iT(t){const{l:e}=t;return!yt(e)&&e.lvl===t.lvl?an(e,{r:an(t,{l:e.r})}):t}function dy(t){const{lvl:e,r:n}=t;return!yt(n)&&!yt(n.r)&&n.lvl===e&&n.r.lvl===e?an(n,{l:an(t,{r:n.l}),lvl:e+1}):t}function $4(t){return tT(t,({k:e,v:n})=>({index:e,value:n}))}function oT(t,e){return!!(t&&t.startIndex===e.startIndex&&t.endIndex===e.endIndex)}function Bu(t,e){return!!(t&&t[0]===e[0]&&t[1]===e[1])}const l0=at(()=>({recalcInProgress:le(!1)}),[],{singleton:!0});function aT(t,e,n){return t[Xf(t,e,n)]}function Xf(t,e,n,s=0){let r=t.length-1;for(;s<=r;){const i=Math.floor((s+r)/2),o=t[i],a=n(o,e);if(a===0)return i;if(a===-1){if(r-s<2)return i-1;r=i-1}else{if(r===s)return i;s=i+1}}throw new Error(`Failed binary finding record in array - ${t.join(",")}, searched for ${e}`)}function F4(t,e,n,s){const r=Xf(t,e,s),i=Xf(t,n,s,r);return t.slice(r,i+1)}function oo(t,e){return Math.round(t.getBoundingClientRect()[e])}function Wp(t){return!yt(t.groupOffsetTree)}function c0({index:t},e){return e===t?0:e<t?-1:1}function z4(){return{groupIndices:[],groupOffsetTree:vl(),lastIndex:0,lastOffset:0,lastSize:0,offsetTree:[],sizeTree:vl()}}function B4(t,e){let n=yt(t)?0:1/0;for(const s of e){const{endIndex:r,size:i,startIndex:o}=s;if(n=Math.min(n,o),yt(t)){t=xs(t,0,i);continue}const a=bl(t,o-1,r+1);if(a.some(G4(s)))continue;let l=!1,u=!1;for(const{end:d,start:h,value:f}of a)l?(r>=h||i===f)&&(t=cy(t,h)):(u=f!==i,l=!0),d>r&&r>=h&&f!==i&&(t=xs(t,r+1,f));u&&(t=xs(t,o,i))}return[t,n]}function U4(t){return typeof t.groupIndex<"u"}function H4({offset:t},e){return e===t?0:e<t?-1:1}function Uu(t,e,n){if(e.length===0)return 0;const{index:s,offset:r,size:i}=aT(e,t,c0),o=t-s,a=i*o+(o-1)*n+r;return a>0?a+n:a}function lT(t,e){if(!Wp(e))return t;let n=0;for(;e.groupIndices[n]<=t+n;)n++;return t+n}function cT(t,e,n){if(U4(t))return e.groupIndices[t.groupIndex]+1;{const s=t.index==="LAST"?n:t.index;let r=lT(s,e);return r=Math.max(0,r,Math.min(n,r)),r}}function W4(t,e,n,s=0){return s>0&&(e=Math.max(e,aT(t,s,c0).offset)),tT(F4(t,e,n,H4),K4)}function V4(t,[e,n,s,r]){e.length>0&&s("received item sizes",e,is.DEBUG);const i=t.sizeTree;let o=i,a=0;if(n.length>0&&yt(i)&&e.length===2){const f=e[0].size,p=e[1].size;o=n.reduce((w,x)=>xs(xs(w,x,f),x+1,p),o)}else[o,a]=B4(o,e);if(o===i)return t;const{lastIndex:l,lastOffset:u,lastSize:d,offsetTree:h}=hy(t.offsetTree,a,o,r);return{groupIndices:n,groupOffsetTree:n.reduce((f,p)=>xs(f,p,Uu(p,h,r)),vl()),lastIndex:l,lastOffset:u,lastSize:d,offsetTree:h,sizeTree:o}}function q4(t){return Fo(t).map(({k:e,v:n},s,r)=>{const i=r[s+1];return{endIndex:i?i.k-1:1/0,size:n,startIndex:e}})}function zk(t,e){let n=0,s=0;for(;n<t;)n+=e[s+1]-e[s]-1,s++;return s-(n===t?0:1)}function hy(t,e,n,s){let r=t,i=0,o=0,a=0,l=0;if(e!==0){l=Xf(r,e-1,c0),a=r[l].offset;const u=ar(n,e-1);i=u[0],o=u[1],r.length&&r[l].size===ar(n,e)[1]&&(l-=1),r=r.slice(0,l+1)}else r=[];for(const{start:u,value:d}of bl(n,e,1/0)){const h=u-i,f=h*o+a+h*s;r.push({index:u,offset:f,size:d}),i=u,a=f,o=d}return{lastIndex:i,lastOffset:a,lastSize:o,offsetTree:r}}function K4(t){return{index:t.index,value:t}}function G4(t){const{endIndex:e,size:n,startIndex:s}=t;return r=>r.start===s&&(r.end===e||r.end===1/0)&&r.value===n}const Y4={offsetHeight:"height",offsetWidth:"width"},Or=at(([{log:t},{recalcInProgress:e}])=>{const n=Ze(),s=Ze(),r=En(s,0),i=Ze(),o=Ze(),a=le(0),l=le([]),u=le(void 0),d=le(void 0),h=le(void 0),f=le(void 0),p=le((_,j)=>oo(_,Y4[j])),w=le(void 0),x=le(0),y=z4(),g=En(ne(n,Qe(l,t,x),Cr(V4,y),Tt()),y),m=En(ne(l,Tt(),Cr((_,j)=>({current:j,prev:_.current}),{current:[],prev:[]}),ye(({prev:_})=>_)),[]);Pe(ne(l,He(_=>_.length>0),Qe(g,x),ye(([_,j,N])=>{const P=_.reduce((D,M,I)=>xs(D,M,Uu(M,j.offsetTree,N)||I),vl());return{...j,groupIndices:_,groupOffsetTree:P}})),g),Pe(ne(s,Qe(g),He(([_,{lastIndex:j}])=>_<j),ye(([_,{lastIndex:j,lastSize:N}])=>[{endIndex:j,size:N,startIndex:_}])),n),Pe(u,d);const v=En(ne(u,ye(_=>_===void 0)),!0);Pe(ne(d,He(_=>_!==void 0&&yt(Mt(g).sizeTree)),ye(_=>{const j=Mt(h),N=Mt(l).length>0;return j?N?[{endIndex:0,size:j,startIndex:0},{endIndex:1,size:_,startIndex:1}]:[]:[{endIndex:0,size:_,startIndex:0}]})),n),Pe(ne(f,He(_=>_!==void 0&&_.length>0&&yt(Mt(g).sizeTree)),ye(_=>{const j=[];let N=_[0],P=0;for(let D=1;D<_.length;D++){const M=_[D];M!==N&&(j.push({endIndex:D-1,size:N,startIndex:P}),N=M,P=D)}return j.push({endIndex:_.length-1,size:N,startIndex:P}),j})),n),Pe(ne(l,Qe(h,d),He(([,_,j])=>_!==void 0&&j!==void 0),ye(([_,j,N])=>{const P=[];for(let D=0;D<_.length;D++){const M=_[D],I=_[D+1];P.push({startIndex:M,endIndex:M,size:j}),I!==void 0&&P.push({startIndex:M+1,endIndex:I-1,size:N})}return P})),n);const k=ks(ne(n,Qe(g),Cr(({sizes:_},[j,N])=>({changed:N!==_,sizes:N}),{changed:!1,sizes:y}),ye(_=>_.changed)));ut(ne(a,Cr((_,j)=>({diff:_.prev-j,prev:j}),{diff:0,prev:0}),ye(_=>_.diff)),_=>{const{groupIndices:j}=Mt(g);if(_>0)Ge(e,!0),Ge(i,_+zk(_,j));else if(_<0){const N=Mt(m);N.length>0&&(_-=zk(-_,N)),Ge(o,_)}}),ut(ne(a,Qe(t)),([_,j])=>{_<0&&j("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:a},is.ERROR)});const S=ks(i);Pe(ne(i,Qe(g),ye(([_,j])=>{const N=j.groupIndices.length>0,P=[],D=j.lastSize;if(N){const M=zu(j.sizeTree,0);let I=0,L=0;for(;I<_;){const $=j.groupIndices[L],U=j.groupIndices.length===L+1?1/0:j.groupIndices[L+1]-$-1;P.push({endIndex:$,size:M,startIndex:$}),P.push({endIndex:$+1+U-1,size:D,startIndex:$+1}),L++,I+=U+1}const R=Fo(j.sizeTree);return I!==_&&R.shift(),R.reduce(($,{k:U,v:E})=>{let T=$.ranges;return $.prevSize!==0&&(T=[...$.ranges,{endIndex:U+_-1,size:$.prevSize,startIndex:$.prevIndex}]),{prevIndex:U+_,prevSize:E,ranges:T}},{prevIndex:_,prevSize:0,ranges:P}).ranges}return Fo(j.sizeTree).reduce((M,{k:I,v:L})=>({prevIndex:I+_,prevSize:L,ranges:[...M.ranges,{endIndex:I+_-1,size:M.prevSize,startIndex:M.prevIndex}]}),{prevIndex:0,prevSize:D,ranges:[]}).ranges})),n);const C=ks(ne(o,Qe(g,x),ye(([_,{offsetTree:j},N])=>{const P=-_;return Uu(P,j,N)})));return Pe(ne(o,Qe(g,x),ye(([_,j,N])=>{if(j.groupIndices.length>0){if(yt(j.sizeTree))return j;let P=vl();const D=Mt(m);let M=0,I=0,L=0;for(;M<-_;){L=D[I];const R=D[I+1]-L-1;I++,M+=R+1}if(P=Fo(j.sizeTree).reduce((R,{k:$,v:U})=>xs(R,Math.max(0,$+_),U),P),M!==-_){const R=zu(j.sizeTree,L);P=xs(P,0,R);const $=ar(j.sizeTree,-_+1)[1];P=xs(P,1,$)}return{...j,sizeTree:P,...hy(j.offsetTree,0,P,N)}}else{const P=Fo(j.sizeTree).reduce((D,{k:M,v:I})=>xs(D,Math.max(0,M+_),I),vl());return{...j,sizeTree:P,...hy(j.offsetTree,0,P,N)}}})),g),{beforeUnshiftWith:S,data:w,defaultItemSize:d,firstItemIndex:a,fixedItemSize:u,fixedGroupSize:h,gap:x,groupIndices:l,heightEstimates:f,itemSize:p,listRefresh:k,shiftWith:o,shiftWithOffset:C,sizeRanges:n,sizes:g,statefulTotalCount:r,totalCount:s,trackItemSizes:v,unshiftWith:i}},Rt(po,l0),{singleton:!0});function Q4(t){return t.reduce((e,n)=>(e.groupIndices.push(e.totalCount),e.totalCount+=n+1,e),{groupIndices:[],totalCount:0})}const uT=at(([{groupIndices:t,sizes:e,totalCount:n},{headerHeight:s,scrollTop:r}])=>{const i=Ze(),o=Ze(),a=ks(ne(i,ye(Q4)));return Pe(ne(a,ye(l=>l.totalCount)),n),Pe(ne(a,ye(l=>l.groupIndices)),t),Pe(ne(tn(r,e,s),He(([l,u])=>Wp(u)),ye(([l,u,d])=>ar(u.groupOffsetTree,Math.max(l-d,0),"v")[0]),Tt(),ye(l=>[l])),o),{groupCounts:i,topItemsIndexes:o}},Rt(Or,Hn)),mo=at(([{log:t}])=>{const e=le(!1),n=ks(ne(e,He(s=>s),Tt()));return ut(e,s=>{s&&Mt(t)("props updated",{},is.DEBUG)}),{didMount:n,propsReady:e}},Rt(po),{singleton:!0}),X4=typeof document<"u"&&"scrollBehavior"in document.documentElement.style;function dT(t){const e=typeof t=="number"?{index:t}:t;return e.align||(e.align="start"),(!e.behavior||!X4)&&(e.behavior="auto"),e.offset||(e.offset=0),e}const Cd=at(([{gap:t,listRefresh:e,sizes:n,totalCount:s},{fixedFooterHeight:r,fixedHeaderHeight:i,footerHeight:o,headerHeight:a,scrollingInProgress:l,scrollTo:u,smoothScrollTargetReached:d,viewportHeight:h},{log:f}])=>{const p=Ze(),w=Ze(),x=le(0);let y=null,g=null,m=null;function v(){y&&(y(),y=null),m&&(m(),m=null),g&&(clearTimeout(g),g=null),Ge(l,!1)}return Pe(ne(p,Qe(n,h,s,x,a,o,f),Qe(t,i,r),ye(([[k,S,C,_,j,N,P,D],M,I,L])=>{const R=dT(k),{align:$,behavior:U,offset:E}=R,T=_-1,z=cT(R,S,T);let q=Uu(z,S.offsetTree,M)+N;$==="end"?(q+=I+ar(S.sizeTree,z)[1]-C+L,z===T&&(q+=P)):$==="center"?q+=(I+ar(S.sizeTree,z)[1]-C+L)/2:q-=j,E&&(q+=E);const W=he=>{v(),he?(D("retrying to scroll to",{location:k},is.DEBUG),Ge(p,k)):(Ge(w,!0),D("list did not change, scroll successful",{},is.DEBUG))};if(v(),U==="smooth"){let he=!1;m=ut(e,ee=>{he=he||ee}),y=nr(d,()=>{W(he)})}else y=nr(ne(e,J4(150)),W);return g=setTimeout(()=>{v()},1200),Ge(l,!0),D("scrolling from index to",{behavior:U,index:z,top:q},is.DEBUG),{behavior:U,top:q}})),u),{scrollTargetReached:w,scrollToIndex:p,topListHeight:x}},Rt(Or,Hn,po),{singleton:!0});function J4(t){return e=>{const n=setTimeout(()=>{e(!1)},t);return s=>{s&&(e(!0),clearTimeout(n))}}}function u0(t,e){t==0?e():requestAnimationFrame(()=>{u0(t-1,e)})}function d0(t,e){const n=e-1;return typeof t=="number"?t:t.index==="LAST"?n:t.index}const Nd=at(([{defaultItemSize:t,listRefresh:e,sizes:n},{scrollTop:s},{scrollTargetReached:r,scrollToIndex:i},{didMount:o}])=>{const a=le(!0),l=le(0),u=le(!0);return Pe(ne(o,Qe(l),He(([d,h])=>!!h),wr(!1)),a),Pe(ne(o,Qe(l),He(([d,h])=>!!h),wr(!1)),u),ut(ne(tn(e,o),Qe(a,n,t,u),He(([[,d],h,{sizeTree:f},p,w])=>d&&(!yt(f)||i0(p))&&!h&&!w),Qe(l)),([,d])=>{nr(r,()=>{Ge(u,!0)}),u0(4,()=>{nr(s,()=>{Ge(a,!0)}),Ge(i,d)})}),{initialItemFinalLocationReached:u,initialTopMostItemIndex:l,scrolledToInitialItem:a}},Rt(Or,Hn,Cd,mo),{singleton:!0});function hT(t,e){return Math.abs(t-e)<1.01}const Hu="up",tu="down",Z4="none",e6={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollHeight:0,scrollTop:0,viewportHeight:0}},t6=0,Ed=at(([{footerHeight:t,headerHeight:e,scrollBy:n,scrollContainerState:s,scrollTop:r,viewportHeight:i}])=>{const o=le(!1),a=le(!0),l=Ze(),u=Ze(),d=le(4),h=le(t6),f=En(ne(ly(ne(Ue(r),da(1),wr(!0)),ne(Ue(r),da(1),wr(!1),Lk(100))),Tt()),!1),p=En(ne(ly(ne(n,wr(!0)),ne(n,wr(!1),Lk(200))),Tt()),!1);Pe(ne(tn(Ue(r),Ue(h)),ye(([m,v])=>m<=v),Tt()),a),Pe(ne(a,Xr(50)),u);const w=ks(ne(tn(s,Ue(i),Ue(e),Ue(t),Ue(d)),Cr((m,[{scrollHeight:v,scrollTop:k},S,C,_,j])=>{const N=k+S-v>-j,P={scrollHeight:v,scrollTop:k,viewportHeight:S};if(N){let M,I;return k>m.state.scrollTop?(M="SCROLLED_DOWN",I=m.state.scrollTop-k):(M="SIZE_DECREASED",I=m.state.scrollTop-k||m.scrollTopDelta),{atBottom:!0,atBottomBecause:M,scrollTopDelta:I,state:P}}let D;return P.scrollHeight>m.state.scrollHeight?D="SIZE_INCREASED":S<m.state.viewportHeight?D="VIEWPORT_HEIGHT_DECREASING":k<m.state.scrollTop?D="SCROLLING_UPWARDS":D="NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:D,state:P}},e6),Tt((m,v)=>m&&m.atBottom===v.atBottom))),x=En(ne(s,Cr((m,{scrollHeight:v,scrollTop:k,viewportHeight:S})=>{if(hT(m.scrollHeight,v))return{changed:!1,jump:0,scrollHeight:v,scrollTop:k};{const C=v-(k+S)<1;return m.scrollTop!==k&&C?{changed:!0,jump:m.scrollTop-k,scrollHeight:v,scrollTop:k}:{changed:!0,jump:0,scrollHeight:v,scrollTop:k}}},{changed:!1,jump:0,scrollHeight:0,scrollTop:0}),He(m=>m.changed),ye(m=>m.jump)),0);Pe(ne(w,ye(m=>m.atBottom)),o),Pe(ne(o,Xr(50)),l);const y=le(tu);Pe(ne(s,ye(({scrollTop:m})=>m),Tt(),Cr((m,v)=>Mt(p)?{direction:m.direction,prevScrollTop:v}:{direction:v<m.prevScrollTop?Hu:tu,prevScrollTop:v},{direction:tu,prevScrollTop:0}),ye(m=>m.direction)),y),Pe(ne(s,Xr(50),wr(Z4)),y);const g=le(0);return Pe(ne(f,He(m=>!m),wr(0)),g),Pe(ne(r,Xr(100),Qe(f),He(([m,v])=>v),Cr(([m,v],[k])=>[v,k],[0,0]),ye(([m,v])=>v-m)),g),{atBottomState:w,atBottomStateChange:l,atBottomThreshold:d,atTopStateChange:u,atTopThreshold:h,isAtBottom:o,isAtTop:a,isScrolling:f,lastJumpDueToItemResize:x,scrollDirection:y,scrollVelocity:g}},Rt(Hn)),Wu="top",Vu="bottom",Bk="none";function Uk(t,e,n){return typeof t=="number"?n===Hu&&e===Wu||n===tu&&e===Vu?t:0:n===Hu?e===Wu?t.main:t.reverse:e===Vu?t.main:t.reverse}function Hk(t,e){var n;return typeof t=="number"?t:(n=t[e])!=null?n:0}const h0=at(([{deviation:t,fixedHeaderHeight:e,headerHeight:n,scrollTop:s,viewportHeight:r}])=>{const i=Ze(),o=le(0),a=le(0),l=le(0),u=En(ne(tn(Ue(s),Ue(r),Ue(n),Ue(i,Bu),Ue(l),Ue(o),Ue(e),Ue(t),Ue(a)),ye(([d,h,f,[p,w],x,y,g,m,v])=>{const k=d-m,S=y+g,C=Math.max(f-k,0);let _=Bk;const j=Hk(v,Wu),N=Hk(v,Vu);return p-=m,p+=f+g,w+=f+g,w-=m,p>d+S-j&&(_=Hu),w<d-C+h+N&&(_=tu),_!==Bk?[Math.max(k-f-Uk(x,Wu,_)-j,0),k-C-g+h+Uk(x,Vu,_)+N]:null}),He(d=>d!=null),Tt(Bu)),[0,0]);return{increaseViewportBy:a,listBoundary:i,overscan:l,topListHeight:o,visibleRange:u}},Rt(Hn),{singleton:!0});function n6(t,e,n){if(Wp(e)){const s=lT(t,e);return[{index:ar(e.groupOffsetTree,s)[0],offset:0,size:0},{data:n==null?void 0:n[0],index:s,offset:0,size:0}]}return[{data:n==null?void 0:n[0],index:t,offset:0,size:0}]}const ig={bottom:0,firstItemIndex:0,items:[],offsetBottom:0,offsetTop:0,top:0,topItems:[],topListHeight:0,totalCount:0};function af(t,e,n,s,r,i){const{lastIndex:o,lastOffset:a,lastSize:l}=r;let u=0,d=0;if(t.length>0){u=t[0].offset;const x=t[t.length-1];d=x.offset+x.size}const h=n-o,f=a+h*l+(h-1)*s,p=u,w=f-d;return{bottom:d,firstItemIndex:i,items:Wk(t,r,i),offsetBottom:w,offsetTop:u,top:p,topItems:Wk(e,r,i),topListHeight:e.reduce((x,y)=>y.size+x,0),totalCount:n}}function fT(t,e,n,s,r,i){let o=0;if(n.groupIndices.length>0)for(const d of n.groupIndices){if(d-o>=t)break;o++}const a=t+o,l=d0(e,a),u=Array.from({length:a}).map((d,h)=>({data:i[h+l],index:h+l,offset:0,size:0}));return af(u,[],a,r,n,s)}function Wk(t,e,n){if(t.length===0)return[];if(!Wp(e))return t.map(u=>({...u,index:u.index+n,originalIndex:u.index}));const s=t[0].index,r=t[t.length-1].index,i=[],o=bl(e.groupOffsetTree,s,r);let a,l=0;for(const u of t){(!a||a.end<u.index)&&(a=o.shift(),l=e.groupIndices.indexOf(a.start));let d;u.index===a.start?d={index:l,type:"group"}:d={groupIndex:l,index:u.index-(l+1)+n},i.push({...d,data:u.data,offset:u.offset,originalIndex:u.index,size:u.size})}return i}function Vk(t,e){var n;return t===void 0?0:typeof t=="number"?t:(n=t[e])!=null?n:0}const wa=at(([{data:t,firstItemIndex:e,gap:n,sizes:s,totalCount:r},i,{listBoundary:o,topListHeight:a,visibleRange:l},{initialTopMostItemIndex:u,scrolledToInitialItem:d},{topListHeight:h},f,{didMount:p},{recalcInProgress:w}])=>{const x=le([]),y=le(0),g=Ze(),m=le(0);Pe(i.topItemsIndexes,x);const v=En(ne(tn(p,w,Ue(l,Bu),Ue(r),Ue(s),Ue(u),d,Ue(x),Ue(e),Ue(n),Ue(m),t),He(([_,j,,N,,,,,,,,P])=>{const D=P&&P.length!==N;return _&&!j&&!D}),ye(([,,[_,j],N,P,D,M,I,L,R,$,U])=>{var E,T,z,q;const W=P,{offsetTree:he,sizeTree:ee}=W,B=Mt(y);if(N===0)return{...ig,totalCount:N};if(_===0&&j===0)return B===0?{...ig,totalCount:N}:fT(B,D,P,L,R,U||[]);if(yt(ee))return B>0?null:af(n6(d0(D,N),W,U),[],N,R,W,L);const Q=[];if(I.length>0){const Ie=I[0],X=I[I.length-1];let pe=0;for(const re of bl(ee,Ie,X)){const K=re.value,G=Math.max(re.start,Ie),ae=Math.min(re.end,X);for(let Y=G;Y<=ae;Y++)Q.push({data:U==null?void 0:U[Y],index:Y,offset:pe,size:K}),pe+=K}}if(!M)return af([],Q,N,R,W,L);const de=I.length>0?I[I.length-1]+1:0,J=W4(he,_,j,de);if(J.length===0)return null;const ve=N-1,Ae=Hp([],Ie=>{for(const X of J){const pe=X.value;let re=pe.offset,K=X.start;const G=pe.size;if(pe.offset<_){K+=Math.floor((_-pe.offset+R)/(G+R));const Y=K-X.start;re+=Y*G+Y*R}K<de&&(re+=(de-K)*G,K=de);const ae=Math.min(X.end,ve);for(let Y=K;Y<=ae&&!(re>=j);Y++)Ie.push({data:U==null?void 0:U[Y],index:Y,offset:re,size:G}),re+=G+R}}),me=Vk($,Wu),fe=Vk($,Vu);if(Ae.length>0&&(me>0||fe>0)){const Ie=Ae[0],X=Ae[Ae.length-1];if(me>0&&Ie.index>de){const pe=Math.min(me,Ie.index-de),re=[];let K=Ie.offset;for(let G=Ie.index-1;G>=Ie.index-pe;G--){const ae=(T=(E=bl(ee,G,G)[0])==null?void 0:E.value)!=null?T:Ie.size;K-=ae+R,re.unshift({data:U==null?void 0:U[G],index:G,offset:K,size:ae})}Ae.unshift(...re)}if(fe>0&&X.index<ve){const pe=Math.min(fe,ve-X.index);let re=X.offset+X.size+R;for(let K=X.index+1;K<=X.index+pe;K++){const G=(q=(z=bl(ee,K,K)[0])==null?void 0:z.value)!=null?q:X.size;Ae.push({data:U==null?void 0:U[K],index:K,offset:re,size:G}),re+=G+R}}}return af(Ae,Q,N,R,W,L)}),He(_=>_!==null),Tt()),ig);Pe(ne(t,He(i0),ye(_=>_==null?void 0:_.length)),r),Pe(ne(v,ye(_=>_.topListHeight)),h),Pe(h,a),Pe(ne(v,ye(_=>[_.top,_.bottom])),o),Pe(ne(v,ye(_=>_.items)),g);const k=ks(ne(v,He(({items:_})=>_.length>0),Qe(r,t),He(([{items:_},j])=>_[_.length-1].originalIndex===j-1),ye(([,_,j])=>[_-1,j]),Tt(Bu),ye(([_])=>_))),S=ks(ne(v,Xr(200),He(({items:_,topItems:j})=>_.length>0&&_[0].originalIndex===j.length),ye(({items:_})=>_[0].index),Tt())),C=ks(ne(v,He(({items:_})=>_.length>0),ye(({items:_})=>{let j=0,N=_.length-1;for(;_[j].type==="group"&&j<N;)j++;for(;_[N].type==="group"&&N>j;)N--;return{endIndex:_[N].index,startIndex:_[j].index}}),Tt(oT)));return{endReached:k,initialItemCount:y,itemsRendered:g,listState:v,minOverscanItemCount:m,rangeChanged:C,startReached:S,topItemsIndexes:x,...f}},Rt(Or,uT,h0,Nd,Cd,Ed,mo,l0),{singleton:!0}),pT=at(([{fixedFooterHeight:t,fixedHeaderHeight:e,footerHeight:n,headerHeight:s},{listState:r}])=>{const i=Ze(),o=En(ne(tn(n,t,s,e,r),ye(([a,l,u,d,h])=>a+l+u+d+h.offsetBottom+h.bottom)),0);return Pe(Ue(o),i),{totalListHeight:o,totalListHeightChanged:i}},Rt(Hn,wa),{singleton:!0}),s6=at(([{viewportHeight:t},{totalListHeight:e}])=>{const n=le(!1),s=En(ne(tn(n,t,e),He(([r])=>r),ye(([,r,i])=>Math.max(0,r-i)),Xr(0),Tt()),0);return{alignToBottom:n,paddingTopAddition:s}},Rt(Hn,pT),{singleton:!0}),mT=at(()=>({context:le(null)})),r6=({itemBottom:t,itemTop:e,locationParams:{align:n,behavior:s,...r},viewportBottom:i,viewportTop:o})=>e<o?{...r,align:n??"start",behavior:s}:t>i?{...r,align:n??"end",behavior:s}:null,gT=at(([{gap:t,sizes:e,totalCount:n},{fixedFooterHeight:s,fixedHeaderHeight:r,headerHeight:i,scrollingInProgress:o,scrollTop:a,viewportHeight:l},{scrollToIndex:u}])=>{const d=Ze();return Pe(ne(d,Qe(e,l,n,i,r,s,a),Qe(t),ye(([[h,f,p,w,x,y,g,m],v])=>{const{align:k,behavior:S,calculateViewLocation:C=r6,done:_,...j}=h,N=cT(h,f,w-1),P=Uu(N,f.offsetTree,v)+x+y,D=P+ar(f.sizeTree,N)[1],M=m+y,I=m+p-g,L=C({itemBottom:D,itemTop:P,locationParams:{align:k,behavior:S,...j},viewportBottom:I,viewportTop:M});return L?_&&nr(ne(o,He(R=>!R),da(Mt(o)?1:2)),_):_==null||_(),L}),He(h=>h!==null)),u),{scrollIntoView:d}},Rt(Or,Hn,Cd,wa,po),{singleton:!0});function qk(t){return t?t==="smooth"?"smooth":"auto":!1}const i6=(t,e)=>typeof t=="function"?qk(t(e)):e&&qk(t),o6=at(([{listRefresh:t,totalCount:e,fixedItemSize:n,data:s},{atBottomState:r,isAtBottom:i},{scrollToIndex:o},{scrolledToInitialItem:a},{didMount:l,propsReady:u},{log:d},{scrollingInProgress:h},{context:f},{scrollIntoView:p}])=>{const w=le(!1),x=Ze();let y=null;function g(S){Ge(o,{align:"end",behavior:S,index:"LAST"})}ut(ne(tn(ne(Ue(e),da(1)),l),Qe(Ue(w),i,a,h),ye(([[S,C],_,j,N,P])=>{let D=C&&N,M="auto";return D&&(M=i6(_,j||P),D=D&&!!M),{followOutputBehavior:M,shouldFollow:D,totalCount:S}}),He(({shouldFollow:S})=>S)),({followOutputBehavior:S,totalCount:C})=>{y&&(y(),y=null),Mt(n)?requestAnimationFrame(()=>{Mt(d)("following output to ",{totalCount:C},is.DEBUG),g(S)}):y=nr(t,()=>{Mt(d)("following output to ",{totalCount:C},is.DEBUG),g(S),y=null})});function m(S){const C=nr(r,_=>{S&&!_.atBottom&&_.notAtBottomBecause==="SIZE_INCREASED"&&!y&&(Mt(d)("scrolling to bottom due to increased size",{},is.DEBUG),g("auto"))});setTimeout(C,100)}ut(ne(tn(Ue(w),e,u),He(([S,,C])=>S&&C),Cr(({value:S},[,C])=>({refreshed:S===C,value:C}),{refreshed:!1,value:0}),He(({refreshed:S})=>S),Qe(w,e)),([,S])=>{Mt(a)&&m(S!==!1)}),ut(x,()=>{m(Mt(w)!==!1)}),ut(tn(Ue(w),r),([S,C])=>{S&&!C.atBottom&&C.notAtBottomBecause==="VIEWPORT_HEIGHT_DECREASING"&&g("auto")});const v=le(null),k=Ze();return Pe(ly(ne(Ue(s),ye(S=>{var C;return(C=S==null?void 0:S.length)!=null?C:0})),ne(Ue(e))),k),ut(ne(tn(ne(k,da(1)),l),Qe(Ue(v),a,h,f),ye(([[S,C],_,j,N,P])=>C&&j&&(_==null?void 0:_({context:P,totalCount:S,scrollingInProgress:N}))),He(S=>!!S),Xr(0)),S=>{y&&(y(),y=null),Mt(n)?requestAnimationFrame(()=>{Mt(d)("scrolling into view",{}),Ge(p,S)}):y=nr(t,()=>{Mt(d)("scrolling into view",{}),Ge(p,S),y=null})}),{autoscrollToBottom:x,followOutput:w,scrollIntoViewOnChange:v}},Rt(Or,Ed,Cd,Nd,mo,po,Hn,mT,gT)),a6=at(([{data:t,firstItemIndex:e,gap:n,sizes:s},{initialTopMostItemIndex:r},{initialItemCount:i,listState:o},{didMount:a}])=>(Pe(ne(a,Qe(i),He(([,l])=>l!==0),Qe(r,s,e,n,t),ye(([[,l],u,d,h,f,p=[]])=>fT(l,u,d,h,f,p))),o),{}),Rt(Or,Nd,wa,mo),{singleton:!0}),l6=at(([{didMount:t},{scrollTo:e},{listState:n}])=>{const s=le(0);return ut(ne(t,Qe(s),He(([,r])=>r!==0),ye(([,r])=>({top:r}))),r=>{nr(ne(n,da(1),He(i=>i.items.length>1)),()=>{requestAnimationFrame(()=>{Ge(e,r)})})}),{initialScrollTop:s}},Rt(mo,Hn,wa),{singleton:!0}),xT=at(([{scrollVelocity:t}])=>{const e=le(!1),n=Ze(),s=le(!1);return Pe(ne(t,Qe(s,e,n),He(([r,i])=>!!i),ye(([r,i,o,a])=>{const{enter:l,exit:u}=i;if(o){if(u(r,a))return!1}else if(l(r,a))return!0;return o}),Tt()),e),ut(ne(tn(e,t,n),Qe(s)),([[r,i,o],a])=>{r&&a&&a.change&&a.change(i,o)}),{isSeeking:e,scrollSeekConfiguration:s,scrollSeekRangeChanged:n,scrollVelocity:t}},Rt(Ed),{singleton:!0}),f0=at(([{scrollContainerState:t,scrollTo:e}])=>{const n=Ze(),s=Ze(),r=Ze(),i=le(!1),o=le(void 0);return Pe(ne(tn(n,s),ye(([{scrollHeight:a,scrollTop:l,viewportHeight:u},{offsetTop:d}])=>({scrollHeight:a,scrollTop:Math.max(0,l-d),viewportHeight:u}))),t),Pe(ne(e,Qe(s),ye(([a,{offsetTop:l}])=>({...a,top:a.top+l}))),r),{customScrollParent:o,useWindowScroll:i,windowScrollContainerState:n,windowScrollTo:r,windowViewportRect:s}},Rt(Hn)),c6=at(([{sizeRanges:t,sizes:e},{headerHeight:n,scrollTop:s},{initialTopMostItemIndex:r},{didMount:i},{useWindowScroll:o,windowScrollContainerState:a,windowViewportRect:l}])=>{const u=Ze(),d=le(void 0),h=le(null),f=le(null);return Pe(a,h),Pe(l,f),ut(ne(u,Qe(e,s,o,h,f,n)),([p,w,x,y,g,m,v])=>{const k=q4(w.sizeTree);y&&g!==null&&m!==null&&(x=g.scrollTop-m.offsetTop),x-=v,p({ranges:k,scrollTop:x})}),Pe(ne(d,He(i0),ye(u6)),r),Pe(ne(i,Qe(d),He(([,p])=>p!==void 0),Tt(),ye(([,p])=>p.ranges)),t),{getState:u,restoreStateFrom:d}},Rt(Or,Hn,Nd,mo,f0));function u6(t){return{align:"start",index:0,offset:t.scrollTop}}const d6=at(([{topItemsIndexes:t}])=>{const e=le(0);return Pe(ne(e,He(n=>n>=0),ye(n=>Array.from({length:n}).map((s,r)=>r))),t),{topItemCount:e}},Rt(wa));function yT(t){let e=!1,n;return()=>(e||(e=!0,n=t()),n)}const h6=yT(()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent)),f6=at(([{deviation:t,scrollBy:e,scrollingInProgress:n,scrollTop:s},{isAtBottom:r,isScrolling:i,lastJumpDueToItemResize:o,scrollDirection:a},{listState:l},{beforeUnshiftWith:u,gap:d,shiftWithOffset:h,sizes:f},{log:p},{recalcInProgress:w}])=>{const x=ks(ne(l,Qe(o),Cr(([,g,m,v],[{bottom:k,items:S,offsetBottom:C,totalCount:_},j])=>{const N=k+C;let P=0;return m===_&&g.length>0&&S.length>0&&(S[0].originalIndex===0&&g[0].originalIndex===0||(P=N-v,P!==0&&(P+=j))),[P,S,_,N]},[0,[],0,0]),He(([g])=>g!==0),Qe(s,a,n,r,p,w),He(([,g,m,v,,,k])=>!k&&!v&&g!==0&&m===Hu),ye(([[g],,,,,m])=>(m("Upward scrolling compensation",{amount:g},is.DEBUG),g))));function y(g){g>0?(Ge(e,{behavior:"auto",top:-g}),Ge(t,0)):(Ge(t,0),Ge(e,{behavior:"auto",top:-g}))}return ut(ne(x,Qe(t,i)),([g,m,v])=>{v&&h6()?Ge(t,m-g):y(-g)}),ut(ne(tn(En(i,!1),t,w),He(([g,m,v])=>!g&&!v&&m!==0),ye(([g,m])=>m),Xr(1)),y),Pe(ne(h,ye(g=>({top:-g}))),e),ut(ne(u,Qe(f,d),ye(([g,{groupIndices:m,lastSize:v,sizeTree:k},S])=>{function C(_){return _*(v+S)}if(m.length===0)return C(g);{let _=0;const j=zu(k,0);let N=0,P=0;for(;N<g;){N++,_+=j;let D=m.length===P+1?1/0:m[P+1]-m[P]-1;N+D>g&&(_-=j,D=g-N+1),N+=D,_+=C(D),P++}return _}})),g=>{Ge(t,g),requestAnimationFrame(()=>{Ge(e,{top:g}),requestAnimationFrame(()=>{Ge(t,0),Ge(w,!1)})})}),{deviation:t}},Rt(Hn,Ed,wa,Or,po,l0)),p6=at(([t,e,n,s,r,i,o,a,l,u,d])=>({...t,...e,...n,...s,...r,...i,...o,...a,...l,...u,...d}),Rt(h0,a6,mo,xT,pT,l6,s6,f0,gT,po,mT)),vT=at(([{data:t,defaultItemSize:e,firstItemIndex:n,fixedItemSize:s,fixedGroupSize:r,gap:i,groupIndices:o,heightEstimates:a,itemSize:l,sizeRanges:u,sizes:d,statefulTotalCount:h,totalCount:f,trackItemSizes:p},{initialItemFinalLocationReached:w,initialTopMostItemIndex:x,scrolledToInitialItem:y},g,m,v,k,{scrollToIndex:S},C,{topItemCount:_},{groupCounts:j},N])=>{const{listState:P,minOverscanItemCount:D,topItemsIndexes:M,rangeChanged:I,...L}=k;return Pe(I,N.scrollSeekRangeChanged),Pe(ne(N.windowViewportRect,ye(R=>R.visibleHeight)),g.viewportHeight),{data:t,defaultItemHeight:e,firstItemIndex:n,fixedItemHeight:s,fixedGroupHeight:r,gap:i,groupCounts:j,heightEstimates:a,initialItemFinalLocationReached:w,initialTopMostItemIndex:x,scrolledToInitialItem:y,sizeRanges:u,topItemCount:_,topItemsIndexes:M,totalCount:f,...v,groupIndices:o,itemSize:l,listState:P,minOverscanItemCount:D,scrollToIndex:S,statefulTotalCount:h,trackItemSizes:p,rangeChanged:I,...L,...N,...g,sizes:d,...m}},Rt(Or,Nd,Hn,c6,o6,wa,Cd,f6,d6,uT,p6));function m6(t,e){const n={},s={};let r=0;const i=t.length;for(;r<i;)s[t[r]]=1,r+=1;for(const o in e)Object.hasOwn(s,o)||(n[o]=e[o]);return n}const gh=typeof document<"u"?ge.useLayoutEffect:ge.useEffect;function bT(t,e,n){const s=Object.keys(e.required||{}),r=Object.keys(e.optional||{}),i=Object.keys(e.methods||{}),o=Object.keys(e.events||{}),a=ge.createContext({});function l(y,g){y.propsReady&&Ge(y.propsReady,!1);for(const m of s){const v=y[e.required[m]];Ge(v,g[m])}for(const m of r)if(m in g){const v=y[e.optional[m]];Ge(v,g[m])}y.propsReady&&Ge(y.propsReady,!0)}function u(y){return i.reduce((g,m)=>(g[m]=v=>{const k=y[e.methods[m]];Ge(k,v)},g),{})}function d(y){return o.reduce((g,m)=>(g[m]=R4(y[e.events[m]]),g),{})}const h=ge.forwardRef((y,g)=>{const{children:m,...v}=y,[k]=ge.useState(()=>Hp(O4(t),_=>{l(_,v)})),[S]=ge.useState(Dk(d,k));gh(()=>{for(const _ of o)_ in v&&ut(S[_],v[_]);return()=>{Object.values(S).map(o0)}},[v,S,k]),gh(()=>{l(k,v)}),ge.useImperativeHandle(g,Ik(u(k)));const C=n;return c.jsx(a.Provider,{value:k,children:n?c.jsx(C,{...m6([...s,...r,...o],v),children:m}):m})}),f=y=>{const g=ge.useContext(a);return ge.useCallback(m=>{Ge(g[y],m)},[g,y])},p=y=>{const g=ge.useContext(a)[y],m=ge.useCallback(v=>ut(g,v),[g]);return ge.useSyncExternalStore(m,()=>Mt(g),()=>Mt(g))},w=y=>{const g=ge.useContext(a)[y],[m,v]=ge.useState(Dk(Mt,g));return gh(()=>ut(g,k=>{k!==m&&v(Ik(k))}),[g,m]),m},x=ge.version.startsWith("18")?p:w;return{Component:h,useEmitter:(y,g)=>{const m=ge.useContext(a)[y];gh(()=>ut(m,g),[g,m])},useEmitterValue:x,usePublisher:f}}const wT=ge.createContext(void 0),kT=ge.createContext(void 0),_T=typeof document<"u"?ge.useLayoutEffect:ge.useEffect;function og(t){return"self"in t}function g6(t){return"body"in t}function ST(t,e,n,s=ic,r,i){const o=ge.useRef(null),a=ge.useRef(null),l=ge.useRef(null),u=ge.useCallback(f=>{let p,w,x;const y=f.target;if(g6(y)||og(y)){const m=og(y)?y:y.defaultView;x=i?m.scrollX:m.scrollY,p=i?m.document.documentElement.scrollWidth:m.document.documentElement.scrollHeight,w=i?m.innerWidth:m.innerHeight}else x=i?y.scrollLeft:y.scrollTop,p=i?y.scrollWidth:y.scrollHeight,w=i?y.offsetWidth:y.offsetHeight;const g=()=>{t({scrollHeight:p,scrollTop:Math.max(x,0),viewportHeight:w})};f.suppressFlushSync?g():eC.flushSync(g),a.current!==null&&(x===a.current||x<=0||x===p-w)&&(a.current=null,e(!0),l.current&&(clearTimeout(l.current),l.current=null))},[t,e,i]);ge.useEffect(()=>{const f=r||o.current;return s(r||o.current),u({suppressFlushSync:!0,target:f}),f.addEventListener("scroll",u,{passive:!0}),()=>{s(null),f.removeEventListener("scroll",u)}},[o,u,n,s,r]);function d(f){const p=o.current;if(!p||(i?"offsetWidth"in p&&p.offsetWidth===0:"offsetHeight"in p&&p.offsetHeight===0))return;const w=f.behavior==="smooth";let x,y,g;og(p)?(y=Math.max(oo(p.document.documentElement,i?"width":"height"),i?p.document.documentElement.scrollWidth:p.document.documentElement.scrollHeight),x=i?p.innerWidth:p.innerHeight,g=i?window.scrollX:window.scrollY):(y=p[i?"scrollWidth":"scrollHeight"],x=oo(p,i?"width":"height"),g=p[i?"scrollLeft":"scrollTop"]);const m=y-x;if(f.top=Math.ceil(Math.max(Math.min(m,f.top),0)),hT(x,y)||f.top===g){t({scrollHeight:y,scrollTop:g,viewportHeight:x}),w&&e(!0);return}w?(a.current=f.top,l.current&&clearTimeout(l.current),l.current=setTimeout(()=>{l.current=null,a.current=null,e(!0)},1e3)):a.current=null,i&&(f={behavior:f.behavior,left:f.top}),p.scrollTo(f)}function h(f){i&&(f={behavior:f.behavior,left:f.top}),o.current.scrollBy(f)}return{scrollByCallback:h,scrollerRef:o,scrollToCallback:d}}const ag="-webkit-sticky",Kk="sticky",p0=yT(()=>{if(typeof document>"u")return Kk;const t=document.createElement("div");return t.style.position=ag,t.style.position===ag?ag:Kk});function m0(t){return t}const x6=at(()=>{const t=le(a=>`Item ${a}`),e=le(a=>`Group ${a}`),n=le({}),s=le(m0),r=le("div"),i=le(ic),o=(a,l=null)=>En(ne(n,ye(u=>u[a]),Tt()),l);return{components:n,computeItemKey:s,EmptyPlaceholder:o("EmptyPlaceholder"),FooterComponent:o("Footer"),GroupComponent:o("Group","div"),groupContent:e,HeaderComponent:o("Header"),HeaderFooterTag:r,ItemComponent:o("Item","div"),itemContent:t,ListComponent:o("List","div"),ScrollerComponent:o("Scroller","div"),scrollerRef:i,ScrollSeekPlaceholder:o("ScrollSeekPlaceholder"),TopItemListComponent:o("TopItemList")}}),y6=at(([t,e])=>({...t,...e}),Rt(vT,x6)),v6=({height:t})=>c.jsx("div",{style:{height:t}}),b6={overflowAnchor:"none",position:p0(),zIndex:1},jT={overflowAnchor:"none"},w6={...jT,display:"inline-block",height:"100%"},Gk=ge.memo(function({showTopList:t=!1}){const e=We("listState"),n=Ms("sizeRanges"),s=We("useWindowScroll"),r=We("customScrollParent"),i=Ms("windowScrollContainerState"),o=Ms("scrollContainerState"),a=r||s?i:o,l=We("itemContent"),u=We("context"),d=We("groupContent"),h=We("trackItemSizes"),f=We("itemSize"),p=We("log"),w=Ms("gap"),x=We("horizontalDirection"),{callbackRef:y}=D4(n,f,h,t?ic:a,p,w,r,x,We("skipAnimationFrameInResizeObserver")),[g,m]=ge.useState(0);g0("deviation",L=>{g!==L&&m(L)});const v=We("EmptyPlaceholder"),k=We("ScrollSeekPlaceholder")||v6,S=We("ListComponent"),C=We("ItemComponent"),_=We("GroupComponent"),j=We("computeItemKey"),N=We("isSeeking"),P=We("groupIndices").length>0,D=We("alignToBottom"),M=We("initialItemFinalLocationReached"),I=t?{}:{boxSizing:"border-box",...x?{display:"inline-block",height:"100%",marginLeft:g!==0?g:D?"auto":0,paddingLeft:e.offsetTop,paddingRight:e.offsetBottom,whiteSpace:"nowrap"}:{marginTop:g!==0?g:D?"auto":0,paddingBottom:e.offsetBottom,paddingTop:e.offsetTop},...M?{}:{visibility:"hidden"}};return!t&&e.totalCount===0&&v?c.jsx(v,{...Nn(v,u)}):c.jsx(S,{...Nn(S,u),"data-testid":t?"virtuoso-top-item-list":"virtuoso-item-list",ref:y,style:I,children:(t?e.topItems:e.items).map(L=>{const R=L.originalIndex,$=j(R+e.firstItemIndex,L.data,u);return N?b.createElement(k,{...Nn(k,u),height:L.size,index:L.index,key:$,type:L.type||"item",...L.type==="group"?{}:{groupIndex:L.groupIndex}}):L.type==="group"?b.createElement(_,{...Nn(_,u),"data-index":R,"data-item-index":L.index,"data-known-size":L.size,key:$,style:b6},d(L.index,u)):b.createElement(C,{...Nn(C,u),...j6(C,L.data),"data-index":R,"data-item-group-index":L.groupIndex,"data-item-index":L.index,"data-known-size":L.size,key:$,style:x?w6:jT},P?l(L.index,L.groupIndex,L.data,u):l(L.index,L.data,u))})})}),k6={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},_6={outline:"none",overflowX:"auto",position:"relative"},Vp=t=>({height:"100%",position:"absolute",top:0,width:"100%",...t?{display:"flex",flexDirection:"column"}:{}}),S6={position:p0(),top:0,width:"100%",zIndex:1};function Nn(t,e){if(typeof t!="string")return{context:e}}function j6(t,e){return{item:typeof t=="string"?void 0:e}}const C6=ge.memo(function(){const t=We("HeaderComponent"),e=Ms("headerHeight"),n=We("HeaderFooterTag"),s=ba(ge.useMemo(()=>i=>{e(oo(i,"height"))},[e]),!0,We("skipAnimationFrameInResizeObserver")),r=We("context");return t?c.jsx(n,{ref:s,children:c.jsx(t,{...Nn(t,r)})}):null}),N6=ge.memo(function(){const t=We("FooterComponent"),e=Ms("footerHeight"),n=We("HeaderFooterTag"),s=ba(ge.useMemo(()=>i=>{e(oo(i,"height"))},[e]),!0,We("skipAnimationFrameInResizeObserver")),r=We("context");return t?c.jsx(n,{ref:s,children:c.jsx(t,{...Nn(t,r)})}):null});function CT({useEmitter:t,useEmitterValue:e,usePublisher:n}){return ge.memo(function({children:s,style:r,context:i,...o}){const a=n("scrollContainerState"),l=e("ScrollerComponent"),u=n("smoothScrollTargetReached"),d=e("scrollerRef"),h=e("horizontalDirection")||!1,{scrollByCallback:f,scrollerRef:p,scrollToCallback:w}=ST(a,u,l,d,void 0,h);return t("scrollTo",w),t("scrollBy",f),c.jsx(l,{"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,ref:p,style:{...h?_6:k6,...r},tabIndex:0,...o,...Nn(l,i),children:s})})}function NT({useEmitter:t,useEmitterValue:e,usePublisher:n}){return ge.memo(function({children:s,style:r,context:i,...o}){const a=n("windowScrollContainerState"),l=e("ScrollerComponent"),u=n("smoothScrollTargetReached"),d=e("totalListHeight"),h=e("deviation"),f=e("customScrollParent"),p=ge.useRef(null),w=e("scrollerRef"),{scrollByCallback:x,scrollerRef:y,scrollToCallback:g}=ST(a,u,l,w,f);return _T(()=>{var m;return y.current=f||((m=p.current)==null?void 0:m.ownerDocument.defaultView),()=>{y.current=null}},[y,f]),t("windowScrollTo",g),t("scrollBy",x),c.jsx(l,{ref:p,"data-virtuoso-scroller":!0,style:{position:"relative",...r,...d!==0?{height:d+h}:{}},...o,...Nn(l,i),children:s})})}const E6=({children:t})=>{const e=ge.useContext(wT),n=Ms("viewportHeight"),s=Ms("fixedItemHeight"),r=We("alignToBottom"),i=We("horizontalDirection"),o=ge.useMemo(()=>JE(n,l=>oo(l,i?"width":"height")),[n,i]),a=ba(o,!0,We("skipAnimationFrameInResizeObserver"));return ge.useEffect(()=>{e&&(n(e.viewportHeight),s(e.itemHeight))},[e,n,s]),c.jsx("div",{"data-viewport-type":"element",ref:a,style:Vp(r),children:t})},T6=({children:t})=>{const e=ge.useContext(wT),n=Ms("windowViewportRect"),s=Ms("fixedItemHeight"),r=We("customScrollParent"),i=eT(n,r,We("skipAnimationFrameInResizeObserver")),o=We("alignToBottom");return ge.useEffect(()=>{e&&(s(e.itemHeight),n({offsetTop:0,visibleHeight:e.viewportHeight,visibleWidth:100}))},[e,n,s]),c.jsx("div",{"data-viewport-type":"window",ref:i,style:Vp(o),children:t})},P6=({children:t})=>{const e=We("TopItemListComponent")||"div",n=We("headerHeight"),s={...S6,marginTop:`${n}px`},r=We("context");return c.jsx(e,{style:s,...Nn(e,r),children:t})},R6=ge.memo(function(t){const e=We("useWindowScroll"),n=We("topItemsIndexes").length>0,s=We("customScrollParent"),r=We("context");return c.jsxs(s||e?M6:O6,{...t,context:r,children:[n&&c.jsx(P6,{children:c.jsx(Gk,{showTopList:!0})}),c.jsxs(s||e?T6:E6,{children:[c.jsx(C6,{}),c.jsx(Gk,{}),c.jsx(N6,{})]})]})}),{Component:A6,useEmitter:g0,useEmitterValue:We,usePublisher:Ms}=bT(y6,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",scrollIntoViewOnChange:"scrollIntoViewOnChange",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",minOverscanItemCount:"minOverscanItemCount",totalCount:"totalCount",groupCounts:"groupCounts",topItemCount:"topItemCount",firstItemIndex:"firstItemIndex",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedGroupHeight:"fixedGroupHeight",fixedItemHeight:"fixedItemHeight",heightEstimates:"heightEstimates",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"HeaderFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",horizontalDirection:"horizontalDirection",skipAnimationFrameInResizeObserver:"skipAnimationFrameInResizeObserver"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",autoscrollToBottom:"autoscrollToBottom",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},R6),O6=CT({useEmitter:g0,useEmitterValue:We,usePublisher:Ms}),M6=NT({useEmitter:g0,useEmitterValue:We,usePublisher:Ms}),I6=A6,D6=at(()=>{const t=le(u=>c.jsxs("td",{children:["Item $",u]})),e=le(null),n=le(u=>c.jsxs("td",{colSpan:1e3,children:["Group ",u]})),s=le(null),r=le(null),i=le({}),o=le(m0),a=le(ic),l=(u,d=null)=>En(ne(i,ye(h=>h[u]),Tt()),d);return{components:i,computeItemKey:o,context:e,EmptyPlaceholder:l("EmptyPlaceholder"),FillerRow:l("FillerRow"),fixedFooterContent:r,fixedHeaderContent:s,itemContent:t,groupContent:n,ScrollerComponent:l("Scroller","div"),scrollerRef:a,ScrollSeekPlaceholder:l("ScrollSeekPlaceholder"),TableBodyComponent:l("TableBody","tbody"),TableComponent:l("Table","table"),TableFooterComponent:l("TableFoot","tfoot"),TableHeadComponent:l("TableHead","thead"),TableRowComponent:l("TableRow","tr"),GroupComponent:l("Group","tr")}});Rt(vT,D6);p0();const Yk={bottom:0,itemHeight:0,items:[],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},L6={bottom:0,itemHeight:0,items:[{index:0}],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},{ceil:Qk,floor:Jf,max:nu,min:lg,round:Xk}=Math;function Jk(t,e,n){return Array.from({length:e-t+1}).map((s,r)=>({data:n===null?null:n[r+t],index:r+t}))}function $6(t){return{...L6,items:t}}function xh(t,e){return t&&t.width===e.width&&t.height===e.height}function F6(t,e){return t&&t.column===e.column&&t.row===e.row}const z6=at(([{increaseViewportBy:t,listBoundary:e,overscan:n,visibleRange:s},{footerHeight:r,headerHeight:i,scrollBy:o,scrollContainerState:a,scrollTo:l,scrollTop:u,smoothScrollTargetReached:d,viewportHeight:h},f,p,{didMount:w,propsReady:x},{customScrollParent:y,useWindowScroll:g,windowScrollContainerState:m,windowScrollTo:v,windowViewportRect:k},S])=>{const C=le(0),_=le(0),j=le(Yk),N=le({height:0,width:0}),P=le({height:0,width:0}),D=Ze(),M=Ze(),I=le(0),L=le(null),R=le({column:0,row:0}),$=Ze(),U=Ze(),E=le(!1),T=le(0),z=le(!0),q=le(!1),W=le(!1);ut(ne(w,Qe(T),He(([J,ve])=>!!ve)),()=>{Ge(z,!1)}),ut(ne(tn(w,z,P,N,T,q),He(([J,ve,Ae,me,,fe])=>J&&!ve&&Ae.height!==0&&me.height!==0&&!fe)),([,,,,J])=>{Ge(q,!0),u0(1,()=>{Ge(D,J)}),nr(ne(u),()=>{Ge(e,[0,0]),Ge(z,!0)})}),Pe(ne(U,He(J=>J!=null&&J.scrollTop>0),wr(0)),_),ut(ne(w,Qe(U),He(([,J])=>J!=null)),([,J])=>{J&&(Ge(N,J.viewport),Ge(P,J.item),Ge(R,J.gap),J.scrollTop>0&&(Ge(E,!0),nr(ne(u,da(1)),ve=>{Ge(E,!1)}),Ge(l,{top:J.scrollTop})))}),Pe(ne(N,ye(({height:J})=>J)),h),Pe(ne(tn(Ue(N,xh),Ue(P,xh),Ue(R,(J,ve)=>J&&J.column===ve.column&&J.row===ve.row),Ue(u)),ye(([J,ve,Ae,me])=>({gap:Ae,item:ve,scrollTop:me,viewport:J}))),$),Pe(ne(tn(Ue(C),s,Ue(R,F6),Ue(P,xh),Ue(N,xh),Ue(L),Ue(_),Ue(E),Ue(z),Ue(T)),He(([,,,,,,,J])=>!J),ye(([J,[ve,Ae],me,fe,Ie,X,pe,,re,K])=>{const{column:G,row:ae}=me,{height:Y,width:F}=fe,{width:xe}=Ie;if(pe===0&&(J===0||xe===0))return Yk;if(F===0){const Lt=d0(K,J),cr=Lt+Math.max(pe-1,0);return $6(Jk(Lt,cr,X))}const Se=ET(xe,F,G);let je,Le;re?ve===0&&Ae===0&&pe>0?(je=0,Le=pe-1):(je=Se*Jf((ve+ae)/(Y+ae)),Le=Se*Qk((Ae+ae)/(Y+ae))-1,Le=lg(J-1,nu(Le,Se-1)),je=lg(Le,nu(0,je))):(je=0,Le=-1);const be=Jk(je,Le,X),{bottom:ie,top:Ne}=Zk(Ie,me,fe,be),et=Qk(J/Se),ht=et*Y+(et-1)*ae-ie;return{bottom:ie,itemHeight:Y,items:be,itemWidth:F,offsetBottom:ht,offsetTop:Ne,top:Ne}})),j),Pe(ne(L,He(J=>J!==null),ye(J=>J.length)),C),Pe(ne(tn(N,P,j,R),He(([J,ve,{items:Ae}])=>Ae.length>0&&ve.height!==0&&J.height!==0),ye(([J,ve,{items:Ae},me])=>{const{bottom:fe,top:Ie}=Zk(J,me,ve,Ae);return[Ie,fe]}),Tt(Bu)),e);const he=le(!1);Pe(ne(u,Qe(he),ye(([J,ve])=>ve||J!==0)),he);const ee=ks(ne(tn(j,C),He(([{items:J}])=>J.length>0),Qe(he),He(([[J,ve],Ae])=>{const me=J.items[J.items.length-1].index===ve-1;return(Ae||J.bottom>0&&J.itemHeight>0&&J.offsetBottom===0&&J.items.length===ve)&&me}),ye(([[,J]])=>J-1),Tt())),B=ks(ne(Ue(j),He(({items:J})=>J.length>0&&J[0].index===0),wr(0),Tt())),Q=ks(ne(Ue(j),Qe(E),He(([{items:J},ve])=>J.length>0&&!ve),ye(([{items:J}])=>({endIndex:J[J.length-1].index,startIndex:J[0].index})),Tt(oT),Xr(0)));Pe(Q,p.scrollSeekRangeChanged),Pe(ne(D,Qe(N,P,C,R),ye(([J,ve,Ae,me,fe])=>{const Ie=dT(J),{align:X,behavior:pe,offset:re}=Ie;let K=Ie.index;K==="LAST"&&(K=me-1),K=nu(0,K,lg(me-1,K));let G=fy(ve,fe,Ae,K);return X==="end"?G=Xk(G-ve.height+Ae.height):X==="center"&&(G=Xk(G-ve.height/2+Ae.height/2)),re&&(G+=re),{behavior:pe,top:G}})),l);const de=En(ne(j,ye(J=>J.offsetBottom+J.bottom)),0);return Pe(ne(k,ye(J=>({height:J.visibleHeight,width:J.visibleWidth}))),N),{customScrollParent:y,data:L,deviation:I,footerHeight:r,gap:R,headerHeight:i,increaseViewportBy:t,initialItemCount:_,itemDimensions:P,overscan:n,restoreStateFrom:U,scrollBy:o,scrollContainerState:a,scrollHeight:M,scrollTo:l,scrollToIndex:D,scrollTop:u,smoothScrollTargetReached:d,totalCount:C,useWindowScroll:g,viewportDimensions:N,windowScrollContainerState:m,windowScrollTo:v,windowViewportRect:k,...p,gridState:j,horizontalDirection:W,initialTopMostItemIndex:T,totalListHeight:de,...f,endReached:ee,propsReady:x,rangeChanged:Q,startReached:B,stateChanged:$,stateRestoreInProgress:E,...S}},Rt(h0,Hn,Ed,xT,mo,f0,po));function ET(t,e,n){return nu(1,Jf((t+n)/(Jf(e)+n)))}function Zk(t,e,n,s){const{height:r}=n;if(r===void 0||s.length===0)return{bottom:0,top:0};const i=fy(t,e,n,s[0].index);return{bottom:fy(t,e,n,s[s.length-1].index)+r,top:i}}function fy(t,e,n,s){const r=ET(t.width,n.width,e.column),i=Jf(s/r),o=i*n.height+nu(0,i-1)*e.row;return o>0?o+e.row:o}const B6=at(()=>{const t=le(h=>`Item ${h}`),e=le({}),n=le(null),s=le("virtuoso-grid-item"),r=le("virtuoso-grid-list"),i=le(m0),o=le("div"),a=le(ic),l=(h,f=null)=>En(ne(e,ye(p=>p[h]),Tt()),f),u=le(!1),d=le(!1);return Pe(Ue(d),u),{components:e,computeItemKey:i,context:n,FooterComponent:l("Footer"),HeaderComponent:l("Header"),headerFooterTag:o,itemClassName:s,ItemComponent:l("Item","div"),itemContent:t,listClassName:r,ListComponent:l("List","div"),readyStateChanged:u,reportReadyState:d,ScrollerComponent:l("Scroller","div"),scrollerRef:a,ScrollSeekPlaceholder:l("ScrollSeekPlaceholder","div")}}),U6=at(([t,e])=>({...t,...e}),Rt(z6,B6)),H6=ge.memo(function(){const t=Ot("gridState"),e=Ot("listClassName"),n=Ot("itemClassName"),s=Ot("itemContent"),r=Ot("computeItemKey"),i=Ot("isSeeking"),o=Is("scrollHeight"),a=Ot("ItemComponent"),l=Ot("ListComponent"),u=Ot("ScrollSeekPlaceholder"),d=Ot("context"),h=Is("itemDimensions"),f=Is("gap"),p=Ot("log"),w=Ot("stateRestoreInProgress"),x=Is("reportReadyState"),y=ba(ge.useMemo(()=>g=>{const m=g.parentElement.parentElement.scrollHeight;o(m);const v=g.firstChild;if(v){const{height:k,width:S}=v.getBoundingClientRect();h({height:k,width:S})}f({column:e_("column-gap",getComputedStyle(g).columnGap,p),row:e_("row-gap",getComputedStyle(g).rowGap,p)})},[o,h,f,p]),!0,!1);return _T(()=>{t.itemHeight>0&&t.itemWidth>0&&x(!0)},[t]),w?null:c.jsx(l,{className:e,ref:y,...Nn(l,d),"data-testid":"virtuoso-item-list",style:{paddingBottom:t.offsetBottom,paddingTop:t.offsetTop},children:t.items.map(g=>{const m=r(g.index,g.data,d);return i?c.jsx(u,{...Nn(u,d),height:t.itemHeight,index:g.index,width:t.itemWidth},m):b.createElement(a,{...Nn(a,d),className:n,"data-index":g.index,key:m},s(g.index,g.data,d))})})}),W6=ge.memo(function(){const t=Ot("HeaderComponent"),e=Is("headerHeight"),n=Ot("headerFooterTag"),s=ba(ge.useMemo(()=>i=>{e(oo(i,"height"))},[e]),!0,!1),r=Ot("context");return t?c.jsx(n,{ref:s,children:c.jsx(t,{...Nn(t,r)})}):null}),V6=ge.memo(function(){const t=Ot("FooterComponent"),e=Is("footerHeight"),n=Ot("headerFooterTag"),s=ba(ge.useMemo(()=>i=>{e(oo(i,"height"))},[e]),!0,!1),r=Ot("context");return t?c.jsx(n,{ref:s,children:c.jsx(t,{...Nn(t,r)})}):null}),q6=({children:t})=>{const e=ge.useContext(kT),n=Is("itemDimensions"),s=Is("viewportDimensions"),r=ba(ge.useMemo(()=>i=>{s(i.getBoundingClientRect())},[s]),!0,!1);return ge.useEffect(()=>{e&&(s({height:e.viewportHeight,width:e.viewportWidth}),n({height:e.itemHeight,width:e.itemWidth}))},[e,s,n]),c.jsx("div",{ref:r,style:Vp(!1),children:t})},K6=({children:t})=>{const e=ge.useContext(kT),n=Is("windowViewportRect"),s=Is("itemDimensions"),r=Ot("customScrollParent"),i=eT(n,r,!1);return ge.useEffect(()=>{e&&(s({height:e.itemHeight,width:e.itemWidth}),n({offsetTop:0,visibleHeight:e.viewportHeight,visibleWidth:e.viewportWidth}))},[e,n,s]),c.jsx("div",{ref:i,style:Vp(!1),children:t})},G6=ge.memo(function({...t}){const e=Ot("useWindowScroll"),n=Ot("customScrollParent"),s=n||e?Q6:Y6,r=n||e?K6:q6,i=Ot("context");return c.jsx(s,{...t,...Nn(s,i),children:c.jsxs(r,{children:[c.jsx(W6,{}),c.jsx(H6,{}),c.jsx(V6,{})]})})}),{useEmitter:TT,useEmitterValue:Ot,usePublisher:Is}=bT(U6,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex",increaseViewportBy:"increaseViewportBy"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged",readyStateChanged:"readyStateChanged"}},G6),Y6=CT({useEmitter:TT,useEmitterValue:Ot,usePublisher:Is}),Q6=NT({useEmitter:TT,useEmitterValue:Ot,usePublisher:Is});function e_(t,e,n){return e!=="normal"&&!(e!=null&&e.endsWith("px"))&&n(`${t} was not resolved to pixel value correctly`,e,is.WARN),e==="normal"?0:parseInt(e??"0",10)}const cg=new Set;function X6(){const[t,e]=b.useState([]),[n,s]=b.useState(""),[r,i]=b.useState(null),[o,a]=b.useState(!0),[l,u]=b.useState(!1),[d,h]=b.useState(null),f=b.useRef(null),p=b.useRef(null),w=b.useRef(null);b.useEffect(()=>{console.log("[ChatPage] Mount - starting loadHistory, showing loading spinner");async function v(){var k,S;try{console.log("[ChatPage] Fetching history from API...");const C=await G3({limit:500,newestFirst:!0});if(console.log("[ChatPage] History received:",{messageCount:((k=C==null?void 0:C.messages)==null?void 0:k.length)||0}),(S=C==null?void 0:C.messages)!=null&&S.length){const _=C.messages.map(aU);e(_),h(C.session_id||null),a(!1),console.log("[ChatPage] Loading complete - hiding spinner, showing messages"),setTimeout(()=>{var N;(N=w.current)==null||N.scrollToIndex({index:"LAST",behavior:"auto"})},50);const j=_.flatMap(N=>N.files||[]).filter(N=>N==null?void 0:N.file_id).map(N=>N.file_id);j.length>0&&(console.log("[ChatPage] Loading URLs for",j.length,"attachments in background..."),Y3(j).then(N=>{console.log("[ChatPage] Attachment URLs loaded:",Object.keys((N==null?void 0:N.urls)||{}).length),N!=null&&N.urls&&e(P=>P.map(D=>({...D,files:(D.files||[]).map(M=>{const I=N.urls[M.file_id];return I?{...M,url:I.full,thumbnail_url:I.thumbnail,width:I.width||M.width,height:I.height||M.height}:M})})))}).catch(N=>{console.warn("[ChatPage] Failed to load attachment URLs:",N)}))}else console.log("[ChatPage] No history - showing greeting"),e([t_()]),a(!1),setTimeout(()=>{var _;(_=w.current)==null||_.scrollToIndex({index:"LAST",behavior:"auto"})},50)}catch(C){console.error("[ChatPage] Failed to load history:",C),e([t_()]),a(!1),setTimeout(()=>{var _;(_=w.current)==null||_.scrollToIndex({index:"LAST",behavior:"auto"})},50)}}v()},[]);const x=b.useMemo(()=>(n.trim().length>0||!!r)&&!l,[n,r,l]),y=b.useCallback((v=!1)=>{var k,S;v?(k=w.current)==null||k.scrollToIndex({index:"LAST",behavior:"auto"}):(S=w.current)==null||S.scrollToIndex({index:"LAST",behavior:"smooth",align:"end"})},[]),g=b.useCallback((v,k)=>c.jsx("div",{className:"px-2 py-1.5",style:{contain:"layout"},children:c.jsx(J6,{msg:k})}),[]);async function m(){var P,D;if(!x)return;const v=n.trim(),k=v||(r?`Please process this file: ${r.name}`:""),S=crypto.randomUUID(),C={id:S,role:"user",content:v,files:r?[{filename:r.name,preview_url:URL.createObjectURL(r)}]:[],status:null},_=crypto.randomUUID(),j={id:_,role:"assistant",content:"",files:[],status:"Thinking"};e(M=>[...M,C,j]),s("");const N=r;i(null),requestAnimationFrame(()=>y(!0));try{u(!0),(D=(P=p.current)==null?void 0:P.abort)==null||D.call(P);const M=new AbortController;p.current=M;let I=[],L="";if(N){const R=await X3(N);if(!(R!=null&&R.file_id))throw new Error("Upload failed");I=[R.file_id],e($=>$.map(U=>{var E,T;return U.id===S?{...U,files:[{file_id:R.file_id,filename:N.name,url:R.url,width:R.image_width,height:R.image_height,preview_url:(T=(E=U.files)==null?void 0:E[0])==null?void 0:T.preview_url}]}:U}))}await Q3({conversationId:d,message:k,fileIds:I,signal:M.signal,onEvent:R=>{var $;if(!M.signal.aborted){if(R!=null&&R.conversation_id&&h(U=>U||R.conversation_id),R!=null&&R.error){e(U=>U.map(E=>E.id===_?{...E,status:null,content:`Error: ${R.error}`}:E));return}if((R==null?void 0:R.type)==="status"){e(U=>U.map(E=>E.id===_?{...E,status:R.content||"Processing"}:E));return}if((R==null?void 0:R.type)==="delete"){L="",e(U=>U.map(E=>E.id===_?{...E,status:"Thinking",content:""}:E));return}if((R==null?void 0:R.type)==="tool_call"){const U=(($=R.tool)==null?void 0:$.name)||"processing";e(E=>E.map(T=>T.id===_?{...T,status:`Processing ${U}`}:T));return}if(((R==null?void 0:R.type)==="chunk"||(R==null?void 0:R.type)==="content")&&R.content){L=R.type==="content"?R.content:L+R.content,e(U=>U.map(E=>E.id===_?{...E,status:null,content:L}:E));return}if(R!=null&&R.content&&!R.type){L+=R.content,e(U=>U.map(E=>E.id===_?{...E,status:null,content:L}:E));return}if(((R==null?void 0:R.type)==="files"||(R==null?void 0:R.type)==="file")&&(R.files||R.file)){const U=R.files||[R.file||R];e(E=>E.map(T=>T.id===_?{...T,files:[...T.files||[],...U]}:T));return}}},onDone:()=>{L||e(R=>R.map($=>{var U;return $.id===_&&!$.content&&!((U=$.files)!=null&&U.length)?{...$,status:null,content:"I'm ready to help. What would you like to do?"}:$.id===_?{...$,status:null}:$}))}})}catch(M){e(I=>I.map(L=>L.id===_?{...L,status:null,content:(M==null?void 0:M.message)||"Failed to get response"}:L))}finally{u(!1)}}return c.jsxs("div",{className:"h-full flex flex-col gap-4 min-h-0",children:[c.jsx(vt,{className:"p-4 overflow-hidden flex-1 min-h-0",children:o?c.jsx("div",{className:"h-full flex items-center justify-center",children:c.jsx("div",{className:"rounded-2xl bg-white/55 dark:bg-white/5 backdrop-blur-md shadow-soft ring-1 ring-black/5 dark:ring-white/10 px-5 py-4 text-sm",children:c.jsx(Ye,{text:"Loading conversation"})})}):c.jsx(I6,{ref:w,className:"h-full scrollbar-thin",data:t,initialTopMostItemIndex:t.length-1,followOutput:"smooth",overscan:200,increaseViewportBy:{top:200,bottom:200},computeItemKey:(v,k)=>k.id,itemContent:g,skipAnimationFrameInResizeObserver:!0})}),c.jsxs(vt,{className:"p-3",children:[r&&c.jsxs("div",{className:"mb-2 flex items-center justify-between rounded-2xl bg-black/5 dark:bg-white/10 px-3 py-2 text-sm",children:[c.jsx("div",{className:"truncate",children:r.name}),c.jsx("button",{className:"opacity-70 hover:opacity-100",onClick:()=>i(null),children:""})]}),c.jsxs("div",{className:"flex items-end gap-2",children:[c.jsx("input",{ref:f,type:"file",className:"hidden",onChange:v=>{var k;return i(((k=v.target.files)==null?void 0:k[0])||null)},accept:"image/*,.pdf,.xlsx,.xls,.csv,.docx,.doc"}),c.jsx(te,{variant:"ghost",size:"icon",className:"rounded-2xl",title:"Attach file",onClick:()=>{var v;return(v=f.current)==null?void 0:v.click()},children:c.jsx(MC,{size:18})}),c.jsx(iU,{value:n,onChange:s,placeholder:"Type your message...",onEnter:m}),c.jsx(te,{size:"icon",className:"w-12 rounded-2xl",title:"Send",disabled:!x,onClick:m,children:c.jsx(IC,{size:18})})]}),c.jsx("div",{className:"mt-2 text-xs text-black/45 dark:text-white/55",children:"AI can make mistakes. Verify important information."})]})]})}const J6=ge.memo(function({msg:e}){var i;const n=e.role==="user",s=b.useMemo(()=>cU(e.content||""),[e.content]),r=!!e.status;return c.jsx("div",{className:n?"flex justify-end":"flex justify-start",children:c.jsxs("div",{className:["max-w-[85%] rounded-2xl px-3 py-2 text-sm shadow-soft break-words","ring-1 ring-black/5 dark:ring-white/10 backdrop-blur-xs",n?"bg-black text-white dark:bg-white dark:text-black":"bg-white/70 dark:bg-white/10"].join(" "),children:[r?c.jsx(oU,{text:e.status}):c.jsx("div",{dangerouslySetInnerHTML:{__html:s}}),((i=e.files)==null?void 0:i.length)>0&&c.jsx("div",{className:"mt-2 space-y-1",children:e.files.map((o,a)=>c.jsx(Z6,{file:o,isUser:n},o.file_id||`file-${a}`))})]})})}),Z6=ge.memo(function({file:e,isUser:n}){const s=lU(e.filename||e.url||""),r=["jpg","jpeg","png","gif","webp","bmp"].includes(s),i=e.filename||"Attachment",o=d=>d&&!d.startsWith("/api/"),a=e.preview_url||e.thumbnail_url||(o(e.url)?e.url:null),l=(o(e.url)?e.url:null)||e.preview_url;if(r)return c.jsxs("div",{className:"rounded-xl border border-black/5 dark:border-white/10 bg-white/70 dark:bg-white/5 p-2",children:[c.jsx(rU,{src:a,fullUrl:l,alt:i,width:e.width,height:e.height,isUser:n}),!n&&l&&o(l)&&c.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[c.jsx(te,{asChild:!0,size:"sm",variant:"ghost",className:"rounded-xl",children:c.jsxs("a",{href:l,target:"_blank",rel:"noopener noreferrer",children:[c.jsx(no,{size:14,className:"mr-1"})," Open"]})}),c.jsxs(te,{size:"sm",variant:"secondary",className:"rounded-xl",onClick:()=>n_(l,i),children:[c.jsx(ca,{size:14,className:"mr-1"})," Download"]})]})]});const u=s==="pdf";return c.jsx("div",{className:"rounded-xl border border-black/5 dark:border-white/10 bg-white/70 dark:bg-white/5 p-3",children:c.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[c.jsxs("div",{className:"min-w-0",children:[c.jsx("div",{className:"flex items-center gap-2 text-xs uppercase tracking-wide text-black/50 dark:text-white/60",children:u?c.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-red-500/10 text-red-700 dark:text-red-300 px-2 py-0.5",children:[c.jsx(Av,{size:12})," PDF"]}):c.jsx("span",{className:"inline-flex items-center gap-1 rounded-full bg-black/5 dark:bg-white/10 px-2 py-0.5",children:s?s.toUpperCase():"FILE"})}),!n&&c.jsx("div",{className:"mt-1 text-xs font-semibold text-black/80 dark:text-white/85 truncate",children:i})]}),!n&&l&&c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(te,{asChild:!0,size:"sm",variant:"ghost",className:"rounded-xl",children:c.jsxs("a",{href:l,target:"_blank",rel:"noopener noreferrer",children:[c.jsx(no,{size:14,className:"mr-1"})," Open"]})}),c.jsxs(te,{size:"sm",variant:"secondary",className:"rounded-xl",onClick:()=>n_(l,i),children:[c.jsx(ca,{size:14,className:"mr-1"})," Download"]})]})]})})}),eU=400,tU=400,nU=300,sU=200,rU=ge.memo(function({src:e,fullUrl:n,alt:s,width:r,height:i,isUser:o}){const a=e&&cg.has(e),[l,u]=b.useState(a),[d,h]=b.useState(!1);b.useEffect(()=>{e&&cg.has(e)?u(!0):e&&(u(!1),h(!1))},[e]);const f=b.useCallback(()=>{e&&cg.add(e),u(!0)},[e]),p=b.useCallback(()=>{h(!0)},[]),w=b.useMemo(()=>{let y,g;if(r&&i&&r>0&&i>0){const m=r/i;m>=1?(y=Math.min(r,eU),g=Math.round(y/m)):(g=Math.min(i,tU),y=Math.round(g*m))}else y=nU,g=sU;return{width:y,height:g,minWidth:y,minHeight:g,maxWidth:y,maxHeight:g}},[r,i]);if(!e)return c.jsx("div",{className:"flex items-center justify-center bg-black/5 dark:bg-white/5 rounded-lg animate-pulse",style:w,children:c.jsx(Nw,{className:"text-black/20 dark:text-white/20",size:24})});if(d)return c.jsx("div",{className:"flex items-center justify-center bg-black/5 dark:bg-white/5 rounded-lg",style:w,children:c.jsx(Nw,{className:"text-red-400",size:24})});const x=c.jsx("div",{className:"overflow-hidden rounded-lg bg-black/5 dark:bg-white/5",style:{...w,contain:"layout"},children:c.jsx("img",{src:e,alt:s,className:`w-full h-full object-contain transition-opacity duration-150 ${l?"opacity-100":"opacity-0"}`,onLoad:f,onError:p})});return!o&&n?c.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"block",children:x}):x});function iU({value:t,onChange:e,placeholder:n,onEnter:s}){const r=b.useRef(null);return b.useEffect(()=>{const i=r.current;i&&(i.style.height="0px",i.style.height=Math.min(i.scrollHeight,132)+"px")},[t]),c.jsx("textarea",{ref:r,rows:1,value:t,onChange:i=>e(i.target.value),onKeyDown:i=>{i.key==="Enter"&&!i.shiftKey&&(i.preventDefault(),s==null||s())},placeholder:n,className:"w-full resize-none rounded-2xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-4 py-2 text-sm outline-none focus:ring-2 focus:ring-black/10 dark:focus:ring-white/15 overflow-auto",style:{maxHeight:"132px"}})}function oU({text:t}){const e=(t||"Thinking").replace(/\s*\.{3,}$/,"");return c.jsxs("span",{className:"inline-flex items-center gap-2 opacity-80",children:[c.jsx("span",{children:e}),c.jsxs("span",{className:"mmg-ellipsis","aria-hidden":"true",children:[c.jsx("span",{className:"mmg-ellipsis-dot",style:{animationDelay:"0ms"}}),c.jsx("span",{className:"mmg-ellipsis-dot",style:{animationDelay:"120ms"}}),c.jsx("span",{className:"mmg-ellipsis-dot",style:{animationDelay:"240ms"}})]})]})}function aU(t){return{id:t.id||t.message_id||crypto.randomUUID(),role:t.role||"assistant",content:t.content||"",files:t.files||t.attachments||[],status:null}}function t_(){const t=new Date().getHours(),e=t>=5&&t<12?"morning":t<17?"afternoon":t<21?"evening":"night";return{id:crypto.randomUUID(),role:"assistant",content:`Good ${e}, how can I help?`,files:[],status:null}}function lU(t){if(!t)return"";const n=String(t).split("?")[0].split("#")[0].split(".");return n.length>1?n.pop().toLowerCase():""}async function n_(t,e){try{const n=Pp(),s=await fetch(t,{headers:n?{Authorization:`Bearer ${n}`}:void 0});if(!s.ok)throw new Error("Download failed");const r=await s.blob(),i=URL.createObjectURL(r),o=document.createElement("a");o.href=i,o.download=e,document.body.appendChild(o),o.click(),o.remove(),setTimeout(()=>URL.revokeObjectURL(i),1e3)}catch{window.open(t,"_blank")}}function py(t){return String(t||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function cU(t){if(!t)return"";const e=[];let n=t.replace(/```(\w*)\n?([\s\S]*?)```/g,(u,d,h)=>(e.push({lang:d,code:h.trim()}),`__CODE_BLOCK_${e.length-1}__`));const s=[];n=n.replace(/`([^`]+)`/g,(u,d)=>(s.push(d),`__INLINE_CODE_${s.length-1}__`));const r=n.split(`
`),i=[];let o=!1,a=null;for(const u of r){const d=u.match(/^__CODE_BLOCK_(\d+)__$/);if(d){o&&(i.push(a==="ul"?"</ul>":"</ol>"),o=!1);const w=e[parseInt(d[1])];i.push(`<pre class="chat-code-block"><code>${py(w.code)}</code></pre>`);continue}const h=u.match(/^(#{1,6})\s+(.*)$/);if(h){o&&(i.push(a==="ul"?"</ul>":"</ol>"),o=!1);const w=h[1].length;i.push(`<h${w} class="chat-header">${yh(h[2])}</h${w}>`);continue}const f=u.match(/^[-*]\s+(.*)$/);if(f){(!o||a!=="ul")&&(o&&i.push("</ol>"),i.push('<ul class="chat-list">'),o=!0,a="ul"),i.push(`<li>${yh(f[1])}</li>`);continue}const p=u.match(/^\d+\.\s+(.*)$/);if(p){(!o||a!=="ol")&&(o&&i.push("</ul>"),i.push('<ol class="chat-numbered-list">'),o=!0,a="ol"),i.push(`<li>${yh(p[1])}</li>`);continue}o&&(i.push(a==="ul"?"</ul>":"</ol>"),o=!1),u.trim()===""?i.push("<br>"):i.push(yh(u)+"<br>")}o&&i.push(a==="ul"?"</ul>":"</ol>");let l=i.join("");return s.forEach((u,d)=>{l=l.replace(`__INLINE_CODE_${d}__`,`<code class="chat-inline-code">${py(u)}</code>`)}),l}function yh(t){return t?py(t).replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer" class="chat-link">$1</a>').replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/\*(.+?)\*/g,"<em>$1</em>"):""}function _e({label:t,children:e,className:n,labelClassName:s,withGap:r=!0}){return c.jsxs("label",{className:Ee("block",r&&"space-y-1",n),children:[c.jsx("div",{className:Ee("text-xs font-semibold text-black/60 dark:text-white/65",s),children:t}),e]})}function ot({value:t="",options:e=[],onChange:n,placeholder:s="Select...",disabled:r=!1,className:i,contentClassName:o,useNativeSelect:a=!1}){const l=b.useMemo(()=>e.find(u=>u.value===t),[e,t]);return a?c.jsxs("select",{className:Ee("w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none","disabled:opacity-60 disabled:cursor-not-allowed",i),value:t,onChange:u=>n==null?void 0:n(u.target.value),disabled:r,children:[s?c.jsx("option",{value:"",disabled:!0,children:s}):null,e.map(u=>c.jsx("option",{value:u.value,disabled:u.disabled,children:u.label},u.value))]}):r?c.jsxs("button",{type:"button",disabled:!0,className:Ee("w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none","flex items-center justify-between gap-2 text-left","disabled:opacity-60 disabled:cursor-not-allowed",i),children:[c.jsx("span",{className:Ee("truncate",!l&&"text-black/50 dark:text-white/55"),children:l?l.label:s}),c.jsx(Zn,{size:16,className:"text-black/50 dark:text-white/60"})]}):c.jsxs(Fp,{children:[c.jsx(zp,{asChild:!0,children:c.jsxs("button",{type:"button",disabled:r,className:Ee("w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none","flex items-center justify-between gap-2 text-left","disabled:opacity-60 disabled:cursor-not-allowed",i),children:[c.jsx("span",{className:Ee("truncate",!l&&"text-black/50 dark:text-white/55"),children:l?l.label:s}),c.jsx(Zn,{size:16,className:"text-black/50 dark:text-white/60"})]})}),c.jsx(kd,{align:"start",className:Ee("min-w-[220px]",o),children:c.jsx("div",{className:"max-h-[240px] overflow-y-auto space-y-1",children:e.length?e.map(u=>{const d=u.value===t;return c.jsx(Lu,{disabled:u.disabled,onSelect:()=>{u.disabled||n==null||n(u.value)},className:Ee("cursor-pointer gap-0 py-1",d&&"bg-black/5 dark:bg-white/10 font-semibold"),children:c.jsx("span",{className:"min-w-0 truncate",children:u.label})},u.value)}):c.jsx("div",{className:"px-3 py-2 text-sm text-black/60 dark:text-white/65",children:"No options available."})})})]})}function uU({locations:t,timeOfDay:e,side:n,templateOptions:s,getTemplateKey:r,defaultFrameConfig:i,templateKey:o,setTemplateKey:a,venueType:l,timeOfDayDisabled:u,locationOptions:d}){const[h,f]=b.useState(""),p=o??h,w=a??f,[x,y]=b.useState(null),[g,m]=b.useState(i),[v,k]=b.useState(""),[S,C]=b.useState(null),[_,j]=b.useState([]),[N,P]=b.useState(!1),[D,M]=b.useState(""),I=ge.useRef([]),L=b.useMemo(()=>{const T=new Map;return s.forEach(z=>{T.set(r(z),z)}),T},[r,s]),R=b.useMemo(()=>{const T=new Map;return(d||[]).forEach(z=>{const q=(z==null?void 0:z.location_key)??(z==null?void 0:z.key)??(z==null?void 0:z.id)??(z==null?void 0:z.value)??z;if(!q)return;const W=(z==null?void 0:z.display_name)??(z==null?void 0:z.name)??(z==null?void 0:z.label)??q;T.set(String(q),W)}),T},[d]),$=b.useMemo(()=>t.length?t.map(T=>R.get(String(T))||T).filter(Boolean).join(", "):"",[R,t]),U=t.length&&(S||v.trim())&&!N;b.useEffect(()=>{if(!p){y(null),m(i);return}const T=L.get(p);if(!T){y(null),m(i);return}y(T),m(ef(T.config,i))},[i,p,L]),b.useEffect(()=>{p&&w("")},[n,e,t,l,u]),b.useEffect(()=>{I.current=_},[_]),b.useEffect(()=>()=>{i_(I.current)},[]);async function E(){if(U){M("");try{P(!0);const T=new FormData,z=u?"all":e;T.append("location_key",t[0]||""),T.append("location_keys",JSON.stringify(t)),T.append("venue_type",l),x?(T.append("time_of_day",x.time_of_day||z||"all"),T.append("side",x.side||n||"all"),T.append("specific_photo",x.photo),T.append("frame_config",JSON.stringify(g))):(T.append("time_of_day",z||"all"),T.append("side",n||"all")),v.trim()?T.append("ai_prompt",v.trim()):S&&T.append("creative",S);const q=await sB(T),W=await fU(q,$),he={id:crypto.randomUUID(),location:$,images:W};j(ee=>{const B=[he,...ee];if(B.length>3){const Q=B.pop();i_([Q])}return B})}catch(T){M((T==null?void 0:T.message)||"Unable to generate mockup.")}finally{P(!1)}}}return{templateKey:p,setTemplateKey:w,aiPrompt:v,setAiPrompt:k,creativeFile:S,setCreativeFile:C,lastResults:_,generating:N,generateError:D,setGenerateError:M,onGenerate:E,canGenerate:U}}function dU(t){const e=uU(t);return c.jsx(hU,{...t,...e})}function hU({locations:t,setLocations:e,venueType:n,setVenueType:s,setTemplateKey:r,locationOptions:i,locationsQuery:o,timeOfDay:a,setTimeOfDay:l,timeOfDayDisabled:u,sideDisabled:d,side:h,setSide:f,timeOfDayOptions:p,sideOptions:w,venueTypeOptions:x,templateKey:y,templateOptions:g,templatesQuery:m,templateThumbs:v,getTemplateKey:k,creativeFile:S,setCreativeFile:C,creativeDragActive:_,handleCreativeDragOver:j,handleCreativeDragLeave:N,handleCreativeDrop:P,aiPrompt:D,setAiPrompt:M,generateError:I,setGenerateError:L,generating:R,onGenerate:$,canGenerate:U,lastResults:E,useNativeSelects:T}){const z=b.useMemo(()=>i.map(W=>{const he=(W==null?void 0:W.key)??(W==null?void 0:W.id)??(W==null?void 0:W.value)??W,ee=(W==null?void 0:W.name)??(W==null?void 0:W.label)??he;return{value:he,label:ee}}),[i]);function q(){e([]),s("all"),l("all"),f("all"),r(""),C(null),M(""),L("")}return c.jsxs(vt,{className:"h-full flex flex-col",children:[c.jsx(Bt,{children:c.jsx(Yt,{children:"Mockup Generator"})}),c.jsxs(Ut,{className:"flex-1 min-h-0 overflow-y-auto space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[c.jsxs(_e,{label:"Location",children:[c.jsx(ot,{value:t[0]||"",options:z,placeholder:"Select a location",onChange:W=>{e(W?[W]:[]),r("")},useNativeSelect:T}),o.isLoading?c.jsx("div",{className:"mt-1 text-xs text-black/50 dark:text-white/60",children:c.jsx(Ye,{text:"Loading locations"})}):null]}),c.jsx(_e,{label:"Venue Type",children:c.jsx(ot,{value:n,options:x,onChange:W=>s(W),useNativeSelect:T})}),!u&&c.jsx(_e,{label:"Time of Day",children:c.jsx(ot,{value:a,options:p,onChange:W=>l(W),useNativeSelect:T})}),!d&&c.jsx(_e,{label:"Billboard Side",children:c.jsx(ot,{value:h,options:w,onChange:W=>f(W),useNativeSelect:T})})]}),t.length?c.jsxs("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white/40 dark:bg-white/5 p-4 shadow-soft space-y-3",children:[c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Templates (optional)"}),c.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:"Select a template or keep random."})]}),y?c.jsx(te,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:()=>r(""),children:"Use random"}):null]}),m.isLoading?c.jsx(Ye,{text:"Loading templates",className:"text-sm text-black/60 dark:text-white/65"}):null,!m.isLoading&&!g.length?c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No templates for this selection."}):null,c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-2",children:g.map(W=>{const he=k(W),ee=he===y,B=v[he],Q=W.environment||n||"all",de=W.time_of_day||(u?"all":a)||"all",J=W.side||(d?"all":h)||"all";return c.jsxs("div",{className:Ee("rounded-xl border border-black/5 dark:border-white/10 bg-white/60 dark:bg-white/5 p-3 text-left text-sm transition flex flex-col",ee?"border-2":"hover:bg-black/5 dark:hover:bg-white/10"),style:ee?{borderColor:"rgb(var(--brand-accent) / 0.6)",boxShadow:"0 0 0 1px rgb(var(--brand-accent) / 0.25)"}:void 0,children:[c.jsxs("button",{type:"button",onClick:()=>r(he),className:"text-left flex flex-col flex-1",children:[c.jsx("div",{className:"overflow-hidden rounded-lg border border-black/5 dark:border-white/10 bg-black/5",children:B?c.jsx("img",{src:B,alt:W.photo,className:"w-full h-40 object-cover",loading:"lazy"}):c.jsx("div",{className:"h-40 grid place-items-center text-xs text-black/50 dark:text-white/60",children:c.jsx(Ye,{text:"Loading",className:"text-xs text-black/50 dark:text-white/60"})})}),c.jsxs("div",{className:"mt-auto pt-2 space-y-1",children:[c.jsx("div",{className:"font-semibold truncate",children:W.photo}),c.jsxs("div",{className:"text-xs text-black/55 dark:text-white/60",children:[Q,"/",de,"/",J," - ",W.frame_count," frame",W.frame_count>1?"s":""]})]})]}),c.jsx("div",{className:"pt-2",children:B?c.jsx(te,{variant:"secondary",size:"sm",className:"w-full rounded-xl",asChild:!0,children:c.jsxs("a",{href:B,target:"_blank",rel:"noreferrer",children:[c.jsx(no,{size:16,className:"mr-2"}),"Open"]})}):c.jsx(te,{variant:"secondary",size:"sm",className:"w-full rounded-xl",disabled:!0,children:"Open"})})]},he)})})]}):null,c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsx(_e,{label:"Upload Creative/Ad Image",children:S?c.jsxs("div",{className:`flex items-center justify-between rounded-xl bg-black/5 dark:bg-white/10 px-3 py-2 text-sm min-h-[120px] ${_?"ring-2 ring-black/20 dark:ring-white/30":""}`,onDragOver:j,onDragLeave:N,onDrop:P,children:[c.jsx("div",{className:"truncate",children:S.name}),c.jsx("button",{className:"opacity-70 hover:opacity-100",onClick:()=>C(null),children:"x"})]}):c.jsxs("label",{className:`block cursor-pointer rounded-xl border border-dashed border-black/10 dark:border-white/15 px-4 py-5 text-center text-sm bg-white/50 dark:bg-white/5 min-h-[120px] ${_?"ring-2 ring-black/20 dark:ring-white/30":""}`,onDragOver:j,onDragLeave:N,onDrop:P,children:[c.jsx("input",{type:"file",className:"hidden",accept:"image/jpeg,image/png,image/webp,image/gif",onChange:W=>{var he;return C(((he=W.target.files)==null?void 0:he[0])||null)}}),c.jsx("div",{className:"font-semibold mb-1",children:"Click to upload/ Drag and Drop an Image"}),c.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:"JPG, PNG, WEBP, GIF up to 10MB"})]})}),c.jsx(_e,{label:"Or use AI prompt",children:c.jsx("textarea",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-black/10 dark:focus:ring-white/15 min-h-[120px]",value:D,onChange:W=>M(W.target.value),placeholder:"Describe what you want to generate..."})})]}),I?c.jsx("div",{className:"rounded-xl bg-red-50/70 text-red-700 px-4 py-2 text-sm dark:bg-red-500/10 dark:text-red-300",children:I}):null,c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(te,{className:"rounded-2xl",onClick:$,disabled:!U,children:R?c.jsx(Ye,{text:"Generating Mockup"}):"Generate Mockup"}),c.jsx(te,{variant:"secondary",className:"rounded-2xl",onClick:q,disabled:R,children:"Reset"})]}),c.jsxs("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white/40 dark:bg-white/5 p-4",children:[!E.length&&!R?c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"Result will appear here"}):null,R?c.jsx(Ye,{text:"Processing mockup",className:"text-sm text-black/60 dark:text-white/65"}):null,E.length?c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Last 3 Generated Mockups"}),E.map(W=>{var he;return c.jsxs("div",{className:"space-y-3",children:[W.location?c.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:W.location}):null,(he=W.images)!=null&&he.length?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-2",children:W.images.map((ee,B)=>c.jsxs("div",{className:"rounded-xl border border-black/5 dark:border-white/10 bg-white/60 dark:bg-white/5 p-3 text-sm transition flex flex-col",children:[c.jsx("a",{href:ee.url,target:"_blank",rel:"noopener noreferrer",className:"overflow-hidden rounded-lg border border-black/5 dark:border-white/10 bg-black/5",children:c.jsx("img",{src:ee.url,alt:ee.label||"Generated mockup",className:"w-full h-40 object-cover",loading:"lazy"})}),c.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[c.jsx(te,{asChild:!0,size:"sm",variant:"ghost",className:"rounded-xl",children:c.jsxs("a",{href:ee.url,target:"_blank",rel:"noopener noreferrer",children:[c.jsx(no,{size:14,className:"mr-1"}),"Open"]})}),c.jsx(te,{size:"sm",variant:"secondary",className:"rounded-xl",children:c.jsxs("span",{role:"link",tabIndex:0,onClick:Q=>{Q.preventDefault(),o_(ee.url,ee.filename)},onKeyDown:Q=>{(Q.key==="Enter"||Q.key===" ")&&(Q.preventDefault(),o_(ee.url,ee.filename))},className:"inline-flex items-center",children:[c.jsx(ca,{size:14,className:"mr-1"}),"Download"]})})]})]},`${W.id}-img-${B}`))}):c.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:"No images returned yet."})]},W.id)})]}):null]})]})]})}function s_(t){return typeof Blob<"u"&&t instanceof Blob}async function fU(t,e){if(!t)return[];if(t instanceof Response){const i=await t.blob();return i?[ug(i,e,1)]:[]}if(s_(t))return[ug(t,e,1)];const n=t,s=(n==null?void 0:n.images)||(n==null?void 0:n.image_urls)||(n==null?void 0:n.urls)||(n==null?void 0:n.results)||(n==null?void 0:n.files)||(n==null?void 0:n.data)||null,r=Array.isArray(s)?s:n!=null&&n.url?[n.url]:[];return r.length?r.map((i,o)=>{if(typeof i=="string")return r_(i,e,o+1);if(s_(i))return ug(i,e,o+1);const a=(i==null?void 0:i.url)||(i==null?void 0:i.image_url)||(i==null?void 0:i.file_url)||"";return r_(a,e,o+1)}):[]}function ug(t,e,n){const s=URL.createObjectURL(t),r=my(s,e,n);return{url:s,filename:r}}function r_(t,e,n){return t?{url:t,filename:my(t,e,n)}:{url:"",filename:my("",e,n)}}function my(t,e,n){const s=pU(t);if(s)return s;const r=(e||"result").toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,""),i=n?`_${n}`:"";return`mockup_${r||"result"}${i}.jpg`}function pU(t){if(!t)return"";try{const n=new URL(t,window.location.href).pathname.split("/").filter(Boolean);return n.length?decodeURIComponent(n[n.length-1]):""}catch{const n=t.split("?")[0].split("#")[0].split("/").filter(Boolean);return n.length?decodeURIComponent(n[n.length-1]):""}}function i_(t){(Array.isArray(t)?t:[]).forEach(n=>{((n==null?void 0:n.images)||[]).forEach(s=>{var r;(r=s==null?void 0:s.url)!=null&&r.startsWith("blob:")&&URL.revokeObjectURL(s.url)})})}async function o_(t,e){const s=await(await fetch(t)).blob(),r=document.createElement("a");r.href=URL.createObjectURL(s),r.download=e||"download",document.body.appendChild(r),r.click(),r.remove(),setTimeout(()=>URL.revokeObjectURL(r.href),1e3)}function mU(t,e,n){return t.length?t.length<=n?t.join(", "):`${t.slice(0,n).join(", ")} +${t.length-n}`:e}function gU({value:t=[],options:e=[],onChange:n,placeholder:s="Select...",disabled:r=!1,maxLabelCount:i=2,className:o,contentClassName:a}){const l=b.useMemo(()=>new Set(t),[t]),u=b.useMemo(()=>e.filter(f=>l.has(f.value)).map(f=>f.label),[e,l]);function d(f){r||n&&(l.has(f)?n(t.filter(p=>p!==f)):n([...t,f]))}const h=mU(u,s,i);return c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Fp,{children:[c.jsx(zp,{asChild:!0,children:c.jsxs("button",{type:"button",disabled:r,className:Ee("w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none","flex items-center justify-between gap-2 text-left","disabled:opacity-60 disabled:cursor-not-allowed",o),children:[c.jsx("span",{className:Ee("truncate",!u.length&&"text-black/50 dark:text-white/55"),children:h}),c.jsx(Zn,{size:16,className:"text-black/50 dark:text-white/60"})]})}),c.jsx(kd,{align:"start",className:Ee("min-w-[220px]",a),children:c.jsx("div",{className:"max-h-[240px] overflow-y-auto space-y-1",children:e.length?e.map(f=>{const p=l.has(f.value);return c.jsxs(Lu,{onSelect:w=>{w.preventDefault(),d(f.value)},className:"cursor-pointer py-1",children:[c.jsx("span",{className:Ee("h-4 w-4 rounded-full flex items-center justify-center transition-colors",p?"bg-black text-white dark:bg-white dark:text-black shadow-soft":"bg-black/5 dark:bg-white/10 text-black/40 dark:text-white/40"),children:c.jsx(Zo,{size:10,className:p?"opacity-100":"opacity-0"})}),c.jsx("span",{className:"min-w-0 truncate",children:f.label})]},f.value)}):c.jsx("div",{className:"px-3 py-2 text-sm text-black/60 dark:text-white/65",children:"No options available."})})})]}),u.length?c.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(f=>c.jsx("span",{className:"text-[11px] rounded-md bg-black/5 dark:bg-white/10 text-black/70 dark:text-white/70 px-2",children:f},f))}):null]})}function xU({locations:t,setLocations:e,venueType:n,setVenueType:s,assetType:r,setAssetType:i,setTemplateKey:o,locationOptions:a,locationsQuery:l,assetTypeOptions:u,assetTypesQuery:d,timeOfDay:h,setTimeOfDay:f,timeOfDayDisabled:p,sideDisabled:w,side:x,setSide:y,timeOfDayOptions:g,sideOptions:m,venueTypeOptions:v,editingTemplate:k,editingTemplateLoading:S,stopEditTemplate:C,templatesOpen:_,setTemplatesOpen:j,templateOptions:N,templatesQuery:P,templateThumbs:D,getTemplateKey:M,startEditTemplate:I,deleteTemplate:L,setupPhoto:R,setSetupPhoto:$,handleSetupPhoto:U,handleSetupDragOver:E,handleSetupDragLeave:T,handleSetupDrop:z,setupDragActive:q,handleSetupPhotoClear:W,framesJson:he,setFramesJson:ee,setFramesJsonDirty:B,applyFramesJsonToCanvas:Q,buildFramesPayload:de,setupImageReady:J,greenscreenOpen:ve,setGreenscreenOpen:Ae,greenscreenColor:me,setGreenscreenColor:fe,greenscreenDetecting:Ie,colorTolerance:X,setColorTolerance:pe,RangeField:re,handleGreenscreenDetect:K,canDetectGreenscreen:G,hasActiveFrame:ae,frameSettingsOpen:Y,setFrameSettingsOpen:F,setupFrameConfig:xe,handleSetupFrameConfigChange:Se,FrameConfigControls:je,previewOpen:Le,setPreviewOpen:be,testPreviewMode:ie,setTestPreviewMode:Ne,testPreviewImgRef:et,testPreviewUrlRef:ht,previewImgRef:Lt,drawPreview:cr,activeTestCreativeFile:ka,updateTestCreativeForActive:Qp,generateTestPreview:Xp,testPreviewing:Mr,activeFrameIndex:Pd,canvasRef:Jp,canvasWidth:xo,canvasHeight:_a,handleCanvasPointerDown:Sa,handleCanvasPointerMove:ja,handleCanvasPointerUp:cc,handleCanvasWheel:Rd,setupHint:At,handleZoomOut:ft,handleZoomIn:Us,handleFitToScreen:Hs,zoomPercent:as,pixelUpscale:Ad,setPixelUpscale:Ca,setupError:Na,setupMessage:Wn,addFrame:lt,resetCurrentFrame:gt,saveSetup:Ea,setupSaving:pn,clearAllFrames:Rn,currentPoints:uc,frameCount:yo,useNativeSelects:di}){return c.jsxs(vt,{className:"h-full flex flex-col",children:[c.jsx(Bt,{children:c.jsx(Yt,{children:"Mockup Setup"})}),c.jsxs(Ut,{className:"flex-1 min-h-0 overflow-y-auto space-y-4",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3",children:[c.jsxs(_e,{label:"Location",children:[c.jsx(gU,{value:t,onChange:oe=>{e(oe),o("")},options:a.map(oe=>{const mn=(oe==null?void 0:oe.key)??(oe==null?void 0:oe.id)??(oe==null?void 0:oe.value)??oe,hi=(oe==null?void 0:oe.name)??(oe==null?void 0:oe.label)??mn;return{value:mn,label:hi}}),placeholder:"Select locations"}),l.isLoading?c.jsx("div",{className:"mt-1 text-xs text-black/50 dark:text-white/60",children:c.jsx(Ye,{text:"Loading locations"})}):null]}),c.jsxs(_e,{label:"Asset Type",children:[c.jsx(ot,{value:r,options:[{value:"",label:"All asset types"},...u.map(oe=>typeof oe=="string"?{value:oe,label:oe}:{value:(oe==null?void 0:oe.type_key)??(oe==null?void 0:oe.key)??(oe==null?void 0:oe.id)??(oe==null?void 0:oe.value)??"",label:(oe==null?void 0:oe.name)??(oe==null?void 0:oe.label)??(oe==null?void 0:oe.type_key)??"Unknown"})],placeholder:"Select asset type",onChange:oe=>i(oe),useNativeSelect:di}),d!=null&&d.isLoading?c.jsx("div",{className:"mt-1 text-xs text-black/50 dark:text-white/60",children:c.jsx(Ye,{text:"Loading asset types"})}):null]}),c.jsx(_e,{label:"Venue Type",children:c.jsx(ot,{value:n,options:v,placeholder:"Select venue type",onChange:oe=>s(oe),useNativeSelect:di})}),!p&&c.jsx(_e,{label:"Time of Day",children:c.jsx(ot,{value:h,options:g,placeholder:"Select time of day",onChange:oe=>f(oe),useNativeSelect:di})}),!w&&c.jsx(_e,{label:"Billboard Side",children:c.jsx(ot,{value:x,options:m,placeholder:"Select side",onChange:oe=>y(oe),useNativeSelect:di})})]}),k?c.jsxs("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white/50 dark:bg-white/5 px-4 py-3 flex flex-wrap items-center justify-between gap-2",children:[c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-semibold",children:"Editing template:"})," ",k.photo," (",k.time_of_day,"/",k.side,")"]}),c.jsxs("div",{className:"flex items-center gap-2",children:[S?c.jsx(Ye,{text:"Loading",className:"text-xs text-black/50 dark:text-white/60"}):null,c.jsx(te,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:C,children:"Stop editing"})]})]}):null,k?null:c.jsxs("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white/40 dark:bg-white/5 p-4 shadow-soft",children:[c.jsxs("button",{type:"button",className:"flex w-full items-center justify-between gap-3 text-left",onClick:()=>j(oe=>!oe),"aria-expanded":_,children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Existing templates"}),c.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:t.length?`${N.length} template${N.length===1?"":"s"}`:"Select at least one location to load templates."})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-black/50 dark:text-white/55",children:[c.jsx("span",{children:_?"Hide":"Show"}),c.jsx(Zn,{size:16,className:Ee("transition-transform",_&&"rotate-180")})]})]}),_?c.jsxs("div",{className:"mt-3 space-y-2",children:[P.isLoading?c.jsx(Ye,{text:"Loading templates",className:"text-sm text-black/60 dark:text-white/65"}):null,!P.isLoading&&(!N.length||!t.length)?c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No templates for this selection."}):null,c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-2",children:N.map(oe=>{const mn=M(oe);return c.jsxs("div",{className:"rounded-xl border border-black/5 dark:border-white/10 bg-white/60 dark:bg-white/5 p-3 text-sm transition flex flex-col",children:[c.jsx("div",{className:"overflow-hidden rounded-lg border border-black/5 dark:border-white/10 bg-black/5",children:D[mn]?c.jsx("img",{src:D[mn],alt:oe.photo,className:"w-full h-40 object-cover",loading:"lazy"}):c.jsx("div",{className:"h-40 grid place-items-center text-xs text-black/50 dark:text-white/60",children:c.jsx(Ye,{text:"Loading",className:"text-xs text-black/50 dark:text-white/60"})})}),c.jsxs("div",{className:"mt-auto pt-2 space-y-2",children:[c.jsx("div",{className:"font-semibold truncate",children:oe.photo}),c.jsxs("div",{className:"text-xs text-black/55 dark:text-white/60",children:[oe.time_of_day,"/",oe.side," - ",oe.frame_count," frame",oe.frame_count>1?"s":""]}),null]})]},mn)})})]}):null]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsx(_e,{label:"Upload Billboard Photo",children:R?c.jsxs("div",{className:`flex items-center justify-between rounded-xl bg-black/5 dark:bg-white/10 px-3 py-2 text-sm min-h-[120px] ${q?"ring-2 ring-black/20 dark:ring-white/30":""}`,onDragOver:E,onDragLeave:T,onDrop:z,children:[c.jsx("div",{className:"truncate",children:R.name}),c.jsx("button",{className:"opacity-70 hover:opacity-100",onClick:W,children:"x"})]}):c.jsxs("label",{className:`block cursor-pointer rounded-xl border border-dashed border-black/10 dark:border-white/15 px-4 py-5 text-center text-sm bg-white/50 dark:bg-white/5 min-h-[120px] ${q?"ring-2 ring-black/20 dark:ring-white/30":""}`,onDragOver:E,onDragLeave:T,onDrop:z,children:[c.jsx("input",{type:"file",className:"hidden",accept:"image/jpeg,image/png,image/webp",onChange:oe=>{var hi;const mn=(hi=oe.target.files)==null?void 0:hi[0];mn&&($(mn),U(mn))}}),c.jsx("div",{className:"font-semibold mb-1",children:"Click to upload/ Drag and Drop an Image"}),c.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:"JPG, PNG, WEBP up to 20MB"})]})}),c.jsxs(_e,{label:"Frames Data",children:[c.jsx("textarea",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-black/10 dark:focus:ring-white/15 min-h-[120px] font-mono",value:he,onChange:oe=>{ee(oe.target.value),B(!0)},placeholder:'[{"points":[0,0,0,0],"config":{"brightness":100}}]'}),c.jsxs("div",{className:"flex items-center justify-between text-xs text-black/50 dark:text-white/60",children:[c.jsx("span",{children:"Auto-filled from canvas. Edit to override."}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{type:"button",className:"text-xs underline",onClick:Q,children:"Apply to canvas"}),c.jsx("button",{type:"button",className:"text-xs underline",onClick:()=>{B(!1);const oe=de();ee(oe.length?JSON.stringify(oe,null,2):"[]")},children:"Sync from canvas"})]})]})]})]}),J?c.jsxs(c.Fragment,{children:[c.jsxs(Dt,{className:"bg-white/50 dark:bg-white/5 p-4",children:[c.jsxs("button",{type:"button",className:"flex w-full items-center justify-between gap-3 text-left",onClick:()=>Ae(oe=>!oe),"aria-expanded":ve,children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Green Screen Detection"}),c.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:"Detect billboard frame using chroma key."})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-black/50 dark:text-white/55",children:[c.jsx("span",{children:ve?"Hide":"Edit"}),c.jsx(Zn,{size:16,className:Ee("transition-transform",ve&&"rotate-180")})]})]}),ve?c.jsxs("div",{className:"mt-3 space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("input",{type:"color",value:me,onChange:oe=>fe(oe.target.value.toUpperCase()),className:"h-10 w-16 rounded-lg border border-black/10 dark:border-white/20"}),c.jsx("input",{type:"text",value:me,onChange:oe=>fe(oe.target.value.toUpperCase()),className:"flex-1 rounded-xl bg-white/70 dark:bg-white/10 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none font-mono"})]}),c.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:"Tip: Shift+click to pick a color. Shift+drag or middle mouse pans."}),c.jsx(re,{label:"Color Tolerance",value:X,min:10,max:100,onChange:oe=>pe(oe),helper:"Lower is stricter, higher is more forgiving."}),c.jsx(te,{className:"rounded-2xl w-full",onClick:K,disabled:!G||Ie,children:Ie?c.jsx(Ye,{text:"Detecting"}):"Detect Green Screen Now"})]}):null]}),ae?c.jsxs("div",{className:"rounded-2xl bg-blue-50/70 dark:bg-blue-500/10 ring-1 ring-blue-500/20 p-4 shadow-soft",children:[c.jsxs("button",{type:"button",className:"flex w-full items-center justify-between gap-3 text-left",onClick:()=>F(oe=>!oe),"aria-expanded":Y,children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100",children:"Current Frame Settings"}),c.jsx("div",{className:"text-xs text-blue-800 dark:text-blue-200",children:"Adjust the current frame appearance."})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-800 dark:text-blue-200",children:[c.jsx("span",{children:Y?"Hide":"Edit"}),c.jsx(Zn,{size:16,className:Ee("transition-transform",Y&&"rotate-180")})]})]}),Y?c.jsxs("div",{className:"mt-3 space-y-3",children:[c.jsx(je,{config:xe,onChange:Se}),c.jsx("div",{className:"text-xs text-blue-800 dark:text-blue-200",children:"Settings apply to the current frame only."})]}):null]}):null,ae?c.jsxs("div",{className:"rounded-2xl bg-blue-50/70 dark:bg-blue-500/10 ring-1 ring-blue-500/20 p-4 shadow-soft",children:[c.jsxs("button",{type:"button",className:"flex w-full items-center justify-between gap-3 text-left",onClick:()=>be(oe=>!oe),"aria-expanded":Le,children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100",children:"Test Preview Mode"}),c.jsx("div",{className:"text-xs text-blue-800 dark:text-blue-200",children:"Preview creative on the current frame before saving."})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-800 dark:text-blue-200",children:[c.jsx("span",{children:Le?"Hide":"Edit"}),c.jsx(Zn,{size:16,className:Ee("transition-transform",Le&&"rotate-180")})]})]}),Le?c.jsxs("div",{className:"mt-3 space-y-2",children:[c.jsxs("label",{className:"flex items-center gap-3 text-sm",children:[c.jsx("input",{type:"checkbox",checked:ie,onChange:oe=>{Ne(oe.target.checked),oe.target.checked||(et.current=null,ht.current="",cr())}}),c.jsx("span",{className:"font-semibold text-blue-900 dark:text-blue-100",children:"Enable preview"})]}),ie?c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-xs font-semibold text-blue-900 dark:text-blue-100",children:"Upload Test Creative"}),c.jsx("input",{type:"file",accept:"image/*",onChange:oe=>{var mn;return Qp(((mn=oe.target.files)==null?void 0:mn[0])||null)},className:"w-full text-sm"}),ka?c.jsxs("div",{className:"text-xs text-blue-800 dark:text-blue-200",children:["Selected: ",ka.name]}):null,c.jsx(te,{className:"rounded-2xl w-full",onClick:Xp,disabled:!ka||!R||!ae||Mr,children:Mr?c.jsx(Ye,{text:"Generating"}):"Generate Test Preview"}),Pd>=0?c.jsxs("div",{className:"text-xs text-blue-800 dark:text-blue-200",children:["Preview applies to frame ",Pd+1,"."]}):null]}):null]}):null]}):null]}):null]}),J?c.jsxs("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white/40 dark:bg-white/5 p-3 space-y-2",children:[c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(te,{variant:"secondary",size:"sm",className:"h-8 px-3",onClick:ft,disabled:!Lt.current,children:"-"}),c.jsx(te,{variant:"secondary",size:"sm",className:"h-8 px-3",onClick:Us,disabled:!Lt.current,children:"+"}),c.jsx(te,{variant:"ghost",size:"sm",onClick:Hs,disabled:!Lt.current,children:"Fit"}),c.jsxs("span",{className:"text-xs text-black/60 dark:text-white/60",children:[as,"%"]})]}),c.jsxs("label",{className:"flex items-center gap-2 text-xs text-black/70 dark:text-white/70",children:[c.jsx("input",{type:"checkbox",checked:Ad,onChange:oe=>Ca(oe.target.checked)}),"Pixel Upscale"]})]}),c.jsx("canvas",{ref:Jp,width:xo,height:_a,className:"w-full h-auto rounded-xl border border-black/10 dark:border-white/10 bg-white",onPointerDown:Sa,onPointerMove:ja,onPointerUp:cc,onPointerLeave:cc,onWheel:Rd,style:{touchAction:"none"}}),c.jsx("div",{className:"text-xs text-black/60 dark:text-white/60",children:At})]}):c.jsx("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-black/5 dark:bg-white/10 px-4 py-3 text-sm text-black/60 dark:text-white/65",children:"Upload a billboard photo or pick an existing template to enable the canvas tools."})]}),Na?c.jsx("div",{className:"rounded-xl bg-red-50/70 text-red-700 px-4 py-2 text-sm dark:bg-red-500/10 dark:text-red-300",children:Na}):null,Wn?c.jsx("div",{className:"rounded-xl bg-green-50/70 text-green-700 px-4 py-2 text-sm dark:bg-green-500/10 dark:text-green-200",children:Wn}):null,c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx(te,{className:"rounded-2xl",onClick:lt,disabled:uc.length!==4,children:"Add Frame"}),c.jsx(te,{variant:"secondary",className:"rounded-2xl",onClick:gt,children:"Reset Current Frame"}),c.jsx(te,{className:"rounded-2xl",onClick:Ea,disabled:pn||!t.length||!R,children:pn?c.jsx(Ye,{text:"Saving"}):k?"Save Changes":"Save All Frames"}),c.jsx(te,{variant:"ghost",className:"rounded-2xl",onClick:()=>Rn(!1),children:"Clear All Frames"})]}),yo?c.jsxs("div",{className:"rounded-xl bg-blue-50/70 text-blue-900 px-3 py-2 text-sm dark:bg-blue-500/10 dark:text-blue-100",children:["Frames configured: ",yo]}):null]})]})}function yU({enabled:t}){const e=en({queryKey:["mockup","history"],queryFn:rB,enabled:t}),n=b.useMemo(()=>{var s,r,i;return Array.isArray(e.data)?e.data:(s=e.data)!=null&&s.history?e.data.history:(r=e.data)!=null&&r.mockups?e.data.mockups:(i=e.data)!=null&&i.items?e.data.items:e.data||[]},[e.data]);return{historyQuery:e,historyItems:n}}function vU(t){const e=yU(t);return c.jsx(bU,{...e})}function bU({historyQuery:t,historyItems:e}){return c.jsxs(vt,{className:"h-full flex flex-col",children:[c.jsx(Bt,{children:c.jsx(Yt,{children:"History"})}),c.jsx(Ut,{className:"flex-1 min-h-0 overflow-y-auto",children:t.isLoading?c.jsx(Ye,{text:"Loading",className:"text-sm text-black/60 dark:text-white/65"}):t.isError?c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"Unable to load history right now."}):c.jsxs("div",{className:"space-y-2",children:[(e||[]).map((n,s)=>{const r=n.image_url||n.mockup_url||n.result_url||n.file_url||n.url||n.image||"",i=n.location_name||n.location||n.location_key||n.location_id||"Mockup",o=n.time_of_day||n.timeOfDay||"",a=n.side||n.billboard_side||"",l=n.created_at||n.generated_at||n.date_generated||"",u=["mockup",i,o||"all",a||"all"].filter(Boolean).join("_");return c.jsxs(Dt,{className:"p-3 space-y-2",children:[r?c.jsx("div",{className:"overflow-hidden rounded-xl border border-black/5 dark:border-white/10 bg-black/5",children:c.jsx("img",{src:r,alt:i,className:"w-full h-40 object-cover",loading:"lazy"})}):c.jsx("div",{className:"rounded-xl border border-dashed border-black/10 dark:border-white/15 px-3 py-6 text-sm text-black/60 dark:text-white/65 text-center",children:"Preview not available"}),c.jsx("div",{className:"text-base font-semibold",children:i}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1.5 text-xs text-black/65 dark:text-white/65",children:[l?c.jsxs("div",{className:"flex flex-wrap items-baseline gap-1",children:[c.jsx("span",{className:"uppercase tracking-wide text-xs text-black/45 dark:text-white/50",children:"Generated"}),c.jsx("span",{className:"font-semibold text-black/80 dark:text-white/85",children:new Date(l).toLocaleString()})]}):null,o?c.jsxs("div",{className:"flex flex-wrap items-baseline gap-1",children:[c.jsx("span",{className:"uppercase tracking-wide text-xs text-black/45 dark:text-white/50",children:"Time of Day"}),c.jsx("span",{className:"font-semibold text-black/80 dark:text-white/85",children:o})]}):null,a?c.jsxs("div",{className:"flex flex-wrap items-baseline gap-1",children:[c.jsx("span",{className:"uppercase tracking-wide text-xs text-black/45 dark:text-white/50",children:"Side"}),c.jsx("span",{className:"font-semibold text-black/80 dark:text-white/85",children:a})]}):null]}),r?c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx(te,{asChild:!0,size:"sm",variant:"ghost",className:"rounded-xl",children:c.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",children:"Open"})}),c.jsx(te,{asChild:!0,size:"sm",variant:"secondary",className:"rounded-xl",children:c.jsx("a",{href:r,download:u,children:"Download"})})]}):null]},n.id||n.file_id||r||s)}),e!=null&&e.length?null:c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No mockups yet."})]})})]})}const PT=[{value:"all",label:"All (Default)"},{value:"day",label:"Day"},{value:"night",label:"Night"}],wU=PT.filter(t=>t.value!=="all"),RT=[{value:"all",label:"All (Default)"},{value:"gold",label:"Gold"},{value:"silver",label:"Silver"},{value:"single_side",label:"Single Side"}],kU=RT.filter(t=>t.value!=="all"),AT=[{value:"all",label:"All (Default)"},{value:"outdoor",label:"Outdoor"},{value:"indoor",label:"Indoor"}],_U=AT.filter(t=>t.value!=="all"),a_=!1,vh=1200,bh=800,SU=.5,jU=4,l_=.1,CU=4,Po={brightness:100,contrast:100,saturation:100,depthMultiplier:15,lightDirection:"top",imageBlur:0,edgeBlur:1,overlayOpacity:0,shadowIntensity:0,lightingAdjustment:0,colorTemperature:0,vignette:0,edgeSmoother:3,sharpening:0},OT=[{value:"top-left",label:"Top Left",glyph:""},{value:"top",label:"Top",glyph:""},{value:"top-right",label:"Top Right",glyph:""},{value:"left",label:"Left",glyph:""},{value:"center",label:"Center",glyph:""},{value:"right",label:"Right",glyph:""},{value:"bottom-left",label:"Bottom Left",glyph:""},{value:"bottom",label:"Bottom",glyph:""},{value:"bottom-right",label:"Bottom Right",glyph:""}],NU=OT.reduce((t,e)=>(t[e.value]=e.label,t),{});function EU(t,e,n){const s=(t-e)/(n-e)*100;return`linear-gradient(to right, rgb(var(--brand-accent, 102 126 234)) ${s}%, rgba(0, 0, 0, 0.1) ${s}%)`}function TU(){const t=Rr(),{user:e}=ii(),n=tf(e,"sales:mockups:setup"),[s,r]=b.useState("generate"),[i,o]=b.useState([]),[a,l]=b.useState("all"),[u,d]=b.useState(""),[h,f]=b.useState("all"),[p,w]=b.useState("all"),[x,y]=b.useState(""),g=i[0]||"",m=a==="indoor",v=m,k=m,S=v?"all":h;b.useEffect(()=>{a==="indoor"&&(h&&f(""),p&&w(""))},[a]);const C=b.useRef(s),[_,j]=b.useState(null),[N,P]=b.useState(!1),[D,M]=b.useState(""),[I,L]=b.useState(""),[R,$]=b.useState("[]"),[U,E]=b.useState(!1),[T,z]=b.useState({}),[q,W]=b.useState(null),[he,ee]=b.useState(!1),[B,Q]=b.useState(!1),[de,J]=b.useState(!1),[ve,Ae]=b.useState("Select one or more locations, upload a billboard photo, then click four corners to define the frame."),[me,fe]=b.useState(Po),[Ie,X]=b.useState("#1CFF1C"),[pe,re]=b.useState(40),[K,G]=b.useState(!1),[ae,Y]=b.useState([]),[F,xe]=b.useState(0),[Se,je]=b.useState(1),[Le,be]=b.useState(!1),[ie,Ne]=b.useState(-1),[et,ht]=b.useState(!1),[Lt,cr]=b.useState(!0),[ka,Qp]=b.useState(!0),[Xp,Mr]=b.useState(!0),[Pd,Jp]=b.useState(!0),[xo,_a]=b.useState(!1),[Sa,ja]=b.useState({}),[cc,Rd]=b.useState(!1),At=b.useRef(null),ft=b.useRef(null),Us=b.useRef(null),Hs=b.useRef(""),as=b.useRef(new Map),Ad=b.useRef({}),Ca=b.useRef({}),Na=b.useRef([]),Wn=b.useRef(!1),lt=b.useRef([]),gt=b.useRef([]),Ea=b.useRef(-1),pn=b.useRef({zoom:1,panX:0,panY:0}),Rn=b.useRef({isDrawing:!1,isDraggingCorner:!1,isDraggingFrame:!1,dragFrameIndex:-1,dragPointIndex:-1,startX:0,startY:0,isPanning:!1,shiftPanPending:!1,hasPanned:!1,panStartX:0,panStartY:0,panOriginX:0,panOriginY:0}),uc=b.useRef({pointers:new Map,isPinching:!1,startDistance:0,startZoom:1,startPanX:0,startPanY:0,startCenterX:0,startCenterY:0}),yo=b.useRef({drawX:0,drawY:0,drawW:0,drawH:0,scale:1,imgNaturalW:0,imgNaturalH:0}),di=en({queryKey:["mockup","eligibility","setup"],queryFn:oB,enabled:s==="setup"}),oe=en({queryKey:["mockup","eligibility","generate"],queryFn:aB,enabled:s==="generate"}),mn=en({queryKey:["mockup","asset-types"],queryFn:J3,enabled:s==="setup"}),hi=en({queryKey:["mockup","templates",g,S,p,a],queryFn:()=>Pk(g,{timeOfDay:S,side:p,venueType:a}),enabled:s==="generate"&&!!g}),dc=yM({queries:s==="setup"?i.map(A=>({queryKey:["mockup","templates",A,S,p,a],queryFn:()=>Pk(A,{timeOfDay:S,side:p,venueType:a}),enabled:!!A,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,retry:!1,staleTime:1/0})):[]}),Zp=b.useMemo(()=>{var H;return{data:dc.flatMap((V,ce)=>{const Z=V.data,Ce=Array.isArray(Z)?Z:(Z==null?void 0:Z.templates)||[],Te=i[ce];return Ce.map(De=>({...De,storage_key:De.storage_key||Te}))}),isLoading:dc.some(V=>V.isLoading),isFetching:dc.some(V=>V.isFetching),error:((H=dc.find(V=>V.error))==null?void 0:H.error)||null}},[i,dc]);b.useEffect(()=>()=>{as.current.forEach(A=>{A!=null&&A.url&&URL.revokeObjectURL(A.url)}),as.current.clear(),Hs.current&&URL.revokeObjectURL(Hs.current)},[]),b.useEffect(()=>{Ad.current=Sa},[Sa]),b.useEffect(()=>{Ca.current=T},[T]);const w2=b.useMemo(()=>{const A=di.data;return Array.isArray(A)?A:(A==null?void 0:A.locations)||[]},[di.data]),k2=b.useMemo(()=>{const A=oe.data;return Array.isArray(A)?A:(A==null?void 0:A.locations)||[]},[oe.data]),A0=s==="setup"?w2:k2,O0=s==="setup"?di:oe,_2=b.useMemo(()=>{const A=mn.data;return Array.isArray(A)?A:(A==null?void 0:A.asset_types)||(A==null?void 0:A.types)||[]},[mn.data]),M0=b.useMemo(()=>{const A=hi.data;return Array.isArray(A)?A:(A==null?void 0:A.templates)||[]},[hi.data]),I0=b.useMemo(()=>{const A=Zp.data;return Array.isArray(A)?A:(A==null?void 0:A.templates)||[]},[Zp.data]),Od=s==="setup"?I0:M0,D0=b.useMemo(()=>Od.map(A=>Dr(A)).join("|"),[Od,Dr]);b.useEffect(()=>{Na.current=Od},[Od]);const S2=s==="history";b.useEffect(()=>{C.current!==s&&(C.current==="setup"&&q&&F0(),o([]),s==="setup"?(l(""),d(""),f(""),w("")):(l("all"),d(""),f("all"),w("all")),y("")),C.current=s},[q,s]),b.useEffect(()=>{a==="indoor"&&h&&f("")},[h,a]),b.useEffect(()=>{z(A=>{const H=new Set(Na.current.map(Z=>Dr(Z))),V={};let ce=!1;return Object.entries(A).forEach(([Z,Ce])=>{H.has(Z)?V[Z]=Ce:Ce&&(ce=!0,URL.revokeObjectURL(Ce))}),ce?V:A})},[D0,Dr]),b.useEffect(()=>{let A=!0;const H=Na.current;if(!g||!H.length)return()=>{};const V=H.filter(ce=>!Ca.current[Dr(ce)]);return V.length?((async()=>{const ce=await Promise.all(V.map(async Ce=>{const Te=Dr(Ce);let De="";try{De=await iB(Ce.storage_key||g,Ce.photo,{timeOfDay:Ce.time_of_day||S,side:Ce.side||p,company:Ce.company,venueType:Ce.venue_type||Ce.environment||a})}catch{De=""}return{key:Te,url:De}}));if(!A){ce.forEach(({url:Ce})=>{Ce&&URL.revokeObjectURL(Ce)});return}const Z={};ce.forEach(({key:Ce,url:Te})=>{Te&&!Ca.current[Ce]?Z[Ce]=Te:Te&&URL.revokeObjectURL(Te)}),Object.keys(Z).length>0&&z(Ce=>({...Ce,...Z}))})(),()=>{A=!1}):()=>{}},[g,D0,S,p,a,Dr]),b.useEffect(()=>()=>{Object.values(Ca.current).forEach(A=>{A&&URL.revokeObjectURL(A)})},[]);const j2=!!ft.current,C2=ae.length===4||ie>=0,Ws=ie>=0?`frame-${ie}`:ae.length===4?"current":null,L0=Ws?Sa[Ws]:null,N2=Math.round(Se*100);b.useEffect(()=>{if(!Ws){Us.current=null,Hs.current="";return}const A=as.current.get(Ws);Us.current=(A==null?void 0:A.img)||null,Hs.current=(A==null?void 0:A.url)||"",xo&&xt()},[Ws,Sa,xo]),b.useEffect(()=>{ft.current&&hc(),xt()},[xo]),b.useEffect(()=>{xt()},[Le]),b.useEffect(()=>{et&&ft.current&&xt()},[et]),b.useEffect(()=>{if(U)return;const A=Ta();$(A.length?JSON.stringify(A,null,2):"[]")},[ae,F,me,U]);async function E2(){if(M(""),L(""),!i.length){L("Select at least one location first");return}if(!_){L("Upload a billboard photo first");return}let A=Ta();if(R.trim())try{A=JSON.parse(R)}catch(H){L((H==null?void 0:H.message)||"Frames JSON is invalid");return}if(!Array.isArray(A)||!A.length){L("Add at least one frame before saving");return}try{P(!0);const H=new FormData;q?(H.append("location_key",g),H.append("photo_filename",q.photo),H.append("venue_type",a),u&&H.append("asset_type_key",u),H.append("time_of_day",S||"all"),H.append("side",p||"all"),H.append("frames_data",JSON.stringify(A)),_&&_.name!==q.photo&&H.append("photo",_),await eB(H),M("Updated frames successfully")):(H.append("location_keys",JSON.stringify(i)),H.append("venue_type",a),u&&H.append("asset_type_key",u),H.append("time_of_day",S||"all"),H.append("side",p||"all"),H.append("frames_data",JSON.stringify(A)),H.append("photo",_),await Z3(H),M("Saved frames successfully")),K0(!0),W(null),ee(!1),j(null),ft.current=null,ht(!1),t.invalidateQueries({queryKey:["mockup","templates"]}),t.refetchQueries({queryKey:["mockup","templates"],type:"active"}),xt()}catch(H){L((H==null?void 0:H.message)||"Failed to save template")}finally{P(!1)}}async function T2(A){if(g)try{await tB(g,A),t.invalidateQueries({queryKey:["mockup","templates"]})}catch(H){L((H==null?void 0:H.message)||"Failed to delete template")}}function $0(A,{resetFrames:H=!0}={}){ft.current=A,ht(!0);const V=F2(A.naturalWidth,A.naturalHeight);yo.current={drawX:V.x,drawY:V.y,drawW:V.w,drawH:V.h,scale:V.scale,imgNaturalW:A.naturalWidth,imgNaturalH:A.naturalHeight},nm(!1),H&&(lt.current=[],gt.current=[],Cs(),Wn.current=!1,G2(),Md(),ls(),bo(),$("[]"),E(!1)),hc(),xt()}function P2(A,H){return new Promise((V,ce)=>{const Z=new Image;Z.onload=()=>{$0(Z,H),V()},Z.onerror=()=>ce(new Error("Failed to load image")),Z.src=A})}function R2(A,H){return new Promise((V,ce)=>{const Z=new FileReader;Z.onload=Ce=>{const Te=new Image;Te.onload=()=>{$0(Te,H),V()},Te.onerror=()=>ce(new Error("Failed to load image")),Te.src=Ce.target.result},Z.onerror=()=>ce(new Error("Failed to read image")),Z.readAsDataURL(A)})}function em(A){return A?Array.isArray(A)&&A.length===4&&Array.isArray(A[0])?A:Array.isArray(A)&&A.length>=8&&typeof A[0]=="number"?[[A[0],A[1]],[A[2],A[3]],[A[4],A[5]],[A[6],A[7]]]:null:null}function A2(A){if(!A)return[];let H=A.frames||A.frames_data||A.framesData||A.frame_data||A.frame_points;if(typeof H=="string")try{H=JSON.parse(H)}catch{H=[]}return Array.isArray(H)?H.map(V=>{const ce=em((V==null?void 0:V.points)||(V==null?void 0:V.frame_points)||V)||em(V==null?void 0:V.points);if(!ce)return null;let Z=(V==null?void 0:V.config)||(A==null?void 0:A.config);if(typeof Z=="string")try{Z=JSON.parse(Z)}catch{Z=null}const Ce=ef(Z,Po);return{points:ce,config:Ce,source:"existing"}}).filter(Boolean):[]}async function O2(A){if(!(!g||!(A!=null&&A.photo))){W(A),ee(!0),L(""),M(""),j(null);try{A.time_of_day&&A.time_of_day!=="all"?f(A.time_of_day):f(""),A.side&&A.side!=="all"?w(A.side):w("");const H=await UE(A.storage_key||g,A.photo,{timeOfDay:A.time_of_day||S,side:A.side||p,company:A.company,venueType:A.venue_type||A.environment||a});if(!H)throw new Error("Failed to load template image");const V=URL.createObjectURL(H);try{await P2(V,{resetFrames:!1})}finally{URL.revokeObjectURL(V)}const ce=A2(A);gt.current=ce,lt.current=[],Cs(),Wn.current=!1,ls(),bo(),$(ce.length?JSON.stringify(Ta(),null,2):"[]"),E(!1),xt();const Z=new File([H],A.photo,{type:H.type||"image/jpeg"});j(Z)}catch(H){L((H==null?void 0:H.message)||"Failed to load template for editing")}finally{ee(!1)}}}function F0(){W(null),ee(!1),M(""),L(""),f(""),w(""),j(null),ft.current=null,ht(!1),lt.current=[],gt.current=[],Cs(),Wn.current=!1,ls(),bo(),$("[]"),E(!1),hc(),xt()}function tm(A){const H=At.current;if(!H)return null;const V=H.getBoundingClientRect(),ce=H.width/V.width,Z=H.height/V.height;return{x:(A.clientX-V.left)*ce,y:(A.clientY-V.top)*Z}}function z0(A){return Math.min(jU,Math.max(SU,A))}function vo(){const{drawX:A,drawY:H,drawW:V,drawH:ce,scale:Z}=yo.current,{zoom:Ce,panX:Te,panY:De}=pn.current;return{drawX:A+Te,drawY:H+De,drawW:V*Ce,drawH:ce*Ce,scale:Z*Ce}}function nm(A=!0){pn.current={zoom:1,panX:0,panY:0},je(1),A&&xt()}function B0(){const A=At.current;return A?{x:A.width/2,y:A.height/2}:{x:vh/2,y:bh/2}}function U0(A,H,V){const{drawX:ce,drawY:Z,scale:Ce}=yo.current,{zoom:Te,panX:De,panY:wt}=pn.current,ct=z0(A),Oe=Ce*Te,Ve=Ce*ct;if(!Oe||!Ve)return;const qe=(H-(ce+De))/Oe,$t=(V-(Z+wt))/Oe,St=H-ce-qe*Ve,Vn=V-Z-$t*Ve;pn.current={zoom:ct,panX:St,panY:Vn},je(ct),xt()}function M2(A,H){if(!ft.current)return;const{drawX:V,drawY:ce,drawW:Z,drawH:Ce,scale:Te}=vo();if(A<V||H<ce||A>V+Z||H>ce+Ce)return;const De=Math.floor((A-V)/Te),wt=Math.floor((H-ce)/Te),ct=document.createElement("canvas");ct.width=ft.current.naturalWidth,ct.height=ft.current.naturalHeight;const Oe=ct.getContext("2d");Oe.drawImage(ft.current,0,0);const Ve=Oe.getImageData(De,wt,1,1),[qe,$t,St]=Ve.data,Vn=`#${[qe,$t,St].map(ur=>ur.toString(16).padStart(2,"0")).join("").toUpperCase()}`;X(Vn)}function I2(A){}function D2(){if(!ft.current)return;const A=B0();U0(pn.current.zoom+l_,A.x,A.y)}function L2(){if(!ft.current)return;const A=B0();U0(pn.current.zoom-l_,A.x,A.y)}function $2(){ft.current&&nm()}function F2(A,H){const V=Math.min(vh/A,bh/H),ce=Math.round(A*V),Z=Math.round(H*V),Ce=Math.round((vh-ce)/2),Te=Math.round((bh-Z)/2);return{x:Ce,y:Te,w:ce,h:Z,scale:V}}function z2(){const A=At.current;if(!A)return;const H=A.getContext("2d");H.clearRect(0,0,A.width,A.height),H.fillStyle="#f8f9fa",H.fillRect(0,0,A.width,A.height)}function xt(){const A=At.current;if(!A)return;const H=A.getContext("2d");z2();const V=ft.current;if(!V)return;const{drawX:ce,drawY:Z,drawW:Ce,drawH:Te,scale:De}=vo();if(H.imageSmoothingEnabled=!Le,Le||(H.imageSmoothingQuality="high"),xo&&Us.current){H.drawImage(Us.current,ce,Z,Ce,Te);return}H.drawImage(V,ce,Z,Ce,Te),gt.current.forEach((Oe,Ve)=>{const qe=Oe.points,$t=Ea.current===Ve,St=1;H.fillStyle="rgba(128, 128, 128, 0.3)",H.strokeStyle=$t?"#667eea":"#333",H.lineWidth=St,H.setLineDash([8,4]),H.lineCap="butt",H.lineJoin="miter",H.beginPath(),qe.forEach((Vn,ur)=>{const wo=ce+Vn[0]*De,cs=Z+Vn[1]*De;ur===0?H.moveTo(wo,cs):H.lineTo(wo,cs)}),H.closePath(),H.fill(),H.stroke(),H.setLineDash([]),qe.forEach(Vn=>{const ur=ce+Vn[0]*De,wo=Z+Vn[1]*De,cs=4;H.fillStyle=$t?"#667eea":"#333",H.fillRect(ur-cs/2,wo-cs/2,cs,cs)})});const ct=lt.current;ct.length>0&&(H.fillStyle="rgba(128, 128, 128, 0.3)",H.strokeStyle="#667eea",H.lineWidth=1,H.setLineDash([8,4]),H.lineCap="butt",H.lineJoin="miter",H.beginPath(),ct.forEach((Ve,qe)=>{const $t=ce+Ve[0]*De,St=Z+Ve[1]*De;qe===0?H.moveTo($t,St):H.lineTo($t,St)}),ct.length===4&&(H.closePath(),H.fill()),H.stroke(),H.setLineDash([]),ct.forEach(Ve=>{const qe=ce+Ve[0]*De,$t=Z+Ve[1]*De;H.fillStyle="#667eea",H.fillRect(qe-4/2,$t-4/2,4,4)}))}function ls(){Y([...lt.current])}function bo(){xe(gt.current.length)}function Cs(){Ea.current=-1,Ne(-1)}function B2(){if(ie>=0){const A=gt.current[ie];return A?{key:`frame-${ie}`,points:A.points,config:A.config}:null}return lt.current.length===4?{key:"current",points:lt.current,config:me}:null}function U2(){as.current.forEach(A=>{A!=null&&A.url&&URL.revokeObjectURL(A.url)}),as.current.clear(),Hs.current&&URL.revokeObjectURL(Hs.current),Hs.current="",Us.current=null}function Md(){U2(),_a(!1),ja({})}function H2(A){Ws&&ja(H=>{const V={...H};return A?V[Ws]=A:delete V[Ws],V})}function Id(A){lt.current=[],ls(),Ea.current=A,Ne(A);const H=gt.current[A];H!=null&&H.config&&fe(ef(H.config,Po)),Mr(!0),E(!1);const V=Ta();$(V.length?JSON.stringify(V,null,2):"[]")}function W2(A,H){fe(V=>{const ce={...V,[A]:H},Z=Ea.current;return Z>=0&&gt.current[Z]&&(gt.current[Z].config=ce),ce})}function H0(A,H,V){const{drawX:ce,drawY:Z,scale:Ce}=vo(),Te=(A-ce)/Ce,De=(H-Z)/Ce;let wt=!1;for(let ct=0,Oe=V.length-1;ct<V.length;Oe=ct++){const Ve=V[ct][0],qe=V[ct][1],$t=V[Oe][0],St=V[Oe][1];qe>De!=St>De&&Te<($t-Ve)*(De-qe)/(St-qe)+Ve&&(wt=!wt)}return wt}function W0(A,H){if(lt.current.length===4&&H0(A,H,lt.current))return-1;for(let V=gt.current.length-1;V>=0;V-=1)if(H0(A,H,gt.current[V].points))return V;return null}function V0(A,H){const{drawX:ce,drawY:Z,scale:Ce}=vo();if(lt.current.length>0)for(let Te=0;Te<lt.current.length;Te+=1){const De=ce+lt.current[Te][0]*Ce,wt=Z+lt.current[Te][1]*Ce;if(Math.hypot(A-De,H-wt)<15)return{frame:-1,point:Te}}for(let Te=0;Te<gt.current.length;Te+=1){const De=gt.current[Te].points;for(let wt=0;wt<De.length;wt+=1){const ct=ce+De[wt][0]*Ce,Oe=Z+De[wt][1]*Ce;if(Math.hypot(A-ct,H-Oe)<15)return{frame:Te,point:wt}}}return null}function hc(){if(!ft.current){Ae("Select one or more locations, upload a billboard photo, then click four corners to define the frame.");return}Ae("Click and drag to draw a box. Use +/Fit to zoom; Shift+drag or middle mouse pans; pinch to zoom.")}function q0(A){A&&R2(A,{resetFrames:!0}).catch(H=>{L((H==null?void 0:H.message)||"Failed to load image")})}function V2(A){if(s!=="setup"||!ft.current)return;const H=tm(A);if(!H)return;const{x:V,y:ce}=H,Z=Rn.current;if(A.pointerType==="touch"){const qe=uc.current;if(qe.pointers.set(A.pointerId,{x:V,y:ce}),qe.pointers.size===2){const[$t,St]=Array.from(qe.pointers.values()),Vn=($t.x+St.x)/2,ur=($t.y+St.y)/2;qe.isPinching=!0,qe.startDistance=Math.hypot($t.x-St.x,$t.y-St.y),qe.startZoom=pn.current.zoom,qe.startPanX=pn.current.panX,qe.startPanY=pn.current.panY,qe.startCenterX=Vn,qe.startCenterY=ur,Z.isDrawing=!1,Z.isDraggingCorner=!1,Z.isDraggingFrame=!1,Z.isPanning=!1,At.current&&(At.current.style.cursor="grabbing");return}}if(A.button===1||A.shiftKey){A.preventDefault(),Z.isPanning=!0,Z.shiftPanPending=A.shiftKey&&A.button===0,Z.hasPanned=!1,Z.panStartX=V,Z.panStartY=ce,Z.panOriginX=pn.current.panX,Z.panOriginY=pn.current.panY,At.current&&(At.current.style.cursor="grabbing");return}Z.shiftPanPending=!1,Z.hasPanned=!1;const{drawX:Te,drawY:De,drawW:wt,drawH:ct}=vo(),Oe=V0(V,ce);if(Oe){Rn.current.isDraggingCorner=!0,Rn.current.dragFrameIndex=Oe.frame,Rn.current.dragPointIndex=Oe.point,Oe.frame>=0?Id(Oe.frame):(Cs(),Mr(!0)),xt();return}const Ve=W0(V,ce);if(Ve!==null){Rn.current.isDraggingFrame=!0,Rn.current.dragFrameIndex=Ve,Rn.current.startX=V,Rn.current.startY=ce,Ve>=0?Id(Ve):(Cs(),Mr(!0)),At.current&&(At.current.style.cursor="move"),xt();return}V<Te||ce<De||V>Te+wt||ce>De+ct||(Wn.current=!1,Rn.current.isDrawing=!0,Rn.current.startX=V,Rn.current.startY=ce,Cs())}function q2(A){if(s!=="setup"||!ft.current)return;const H=tm(A);if(!H)return;const{x:V,y:ce}=H,Z=Rn.current;if(A.pointerType==="touch"){const Oe=uc.current;if(Oe.pointers.has(A.pointerId)&&Oe.pointers.set(A.pointerId,{x:V,y:ce}),Oe.isPinching&&Oe.pointers.size>=2){const[Ve,qe]=Array.from(Oe.pointers.values()),$t=(Ve.x+qe.x)/2,St=(Ve.y+qe.y)/2,Vn=Math.hypot(Ve.x-qe.x,Ve.y-qe.y),{drawX:ur,drawY:wo,scale:cs}=yo.current,sm=Oe.startZoom;if(Oe.startDistance>0&&cs){const Dd=z0(sm*(Vn/Oe.startDistance)),lP=(Oe.startCenterX-(ur+Oe.startPanX))/(cs*sm),cP=(Oe.startCenterY-(wo+Oe.startPanY))/(cs*sm),uP=$t-ur-lP*cs*Dd,dP=St-wo-cP*cs*Dd;pn.current={zoom:Dd,panX:uP,panY:dP},je(Dd),xt()}return}}if(Z.isPanning){A.preventDefault();const Oe=V-Z.panStartX,Ve=ce-Z.panStartY;if(Z.shiftPanPending&&!Z.hasPanned){if(Math.hypot(Oe,Ve)<CU)return;Z.hasPanned=!0}pn.current.panX=Z.panOriginX+Oe,pn.current.panY=Z.panOriginY+Ve,xt();return}const{drawX:Ce,drawY:Te,scale:De}=vo();if(Z.isDraggingCorner){const Oe=(V-Ce)/De,Ve=(ce-Te)/De;Z.dragFrameIndex===-1?lt.current[Z.dragPointIndex]=[Math.round(Oe),Math.round(Ve)]:gt.current[Z.dragFrameIndex].points[Z.dragPointIndex]=[Math.round(Oe),Math.round(Ve)],xt();return}if(Z.isDraggingFrame){const Oe=(V-Z.startX)/De,Ve=(ce-Z.startY)/De;Z.dragFrameIndex===-1?lt.current=lt.current.map(qe=>[Math.round(qe[0]+Oe),Math.round(qe[1]+Ve)]):gt.current[Z.dragFrameIndex].points=gt.current[Z.dragFrameIndex].points.map(qe=>[Math.round(qe[0]+Oe),Math.round(qe[1]+Ve)]),Z.startX=V,Z.startY=ce,xt();return}if(Z.isDrawing){xt();const Oe=At.current.getContext("2d");Oe.fillStyle="rgba(128, 128, 128, 0.3)";const Ve=V-Z.startX,qe=ce-Z.startY;Oe.fillRect(Z.startX,Z.startY,Ve,qe),Oe.strokeStyle="#667eea",Oe.lineWidth=1,Oe.setLineDash([8,4]),Oe.lineCap="butt",Oe.lineJoin="miter",Oe.strokeRect(Z.startX,Z.startY,Ve,qe),Oe.setLineDash([]);return}const wt=V0(V,ce),ct=W0(V,ce);At.current&&(wt?At.current.style.cursor="pointer":ct!==null?At.current.style.cursor="move":At.current.style.cursor="crosshair")}function K2(A){if(s!=="setup"||!ft.current)return;const H=tm(A),V=Rn.current;if(A.pointerType==="touch"){const St=uc.current;if(St.pointers.has(A.pointerId)&&St.pointers.delete(A.pointerId),St.isPinching&&St.pointers.size<2&&(St.isPinching=!1),St.isPinching)return}if(V.isPanning){V.isPanning=!1,At.current&&(At.current.style.cursor="crosshair"),V.shiftPanPending&&!V.hasPanned&&ka&&H&&M2(H.x,H.y),V.shiftPanPending=!1,V.hasPanned=!1;return}if(V.isDraggingCorner){V.isDraggingCorner=!1,V.dragFrameIndex=-1,V.dragPointIndex=-1,At.current&&(At.current.style.cursor="crosshair"),ls(),xt();return}if(V.isDraggingFrame){V.isDraggingFrame=!1,V.dragFrameIndex=-1,At.current&&(At.current.style.cursor="crosshair"),ls(),xt();return}if(!V.isDrawing||!H)return;const{x:ce,y:Z}=H,{drawX:Ce,drawY:Te,scale:De}=vo(),wt=V.startX,ct=V.startY,Oe=(Math.min(wt,ce)-Ce)/De,Ve=(Math.min(ct,Z)-Te)/De,qe=(Math.max(wt,ce)-Ce)/De,$t=(Math.max(ct,Z)-Te)/De;lt.current=[[Math.round(Oe),Math.round(Ve)],[Math.round(qe),Math.round(Ve)],[Math.round(qe),Math.round($t)],[Math.round(Oe),Math.round($t)]],V.isDrawing=!1,ls(),Cs(),Mr(!0),Ae("Frame drawn. Drag corners to adjust, or drag inside to move. Click Add Frame to save."),xt()}function G2(){fe(Po)}function Y2(){if(lt.current.length!==4){L("Select 4 corner points first");return}const A={...me},H=Wn.current?"greenscreen":"manual";gt.current.push({points:[...lt.current],config:A,source:H});const V="current";lt.current=[];const ce=gt.current.length-1;Id(ce),Wn.current=!1,ls(),bo(),Ae(`Frame ${gt.current.length} added. Draw another box or save when done.`);const Z=as.current.get(V);Z&&(as.current.set(`frame-${ce}`,Z),as.current.delete(V));const Ce=Ad.current[V];Ce&&ja(Te=>{const De={...Te};return De[`frame-${ce}`]=Ce,delete De[V],De}),_a(!1),Us.current=null,xt()}function Q2(){lt.current=[],Cs(),Wn.current=!1,ls(),as.current.delete("current"),ja(A=>{if(!A.current)return A;const H={...A};return delete H.current,H}),_a(!1),Us.current=null,gt.current.length?Ae(`Frames saved: ${gt.current.length}. Draw another box or save all frames.`):hc(),xt()}function K0(A=!1){!A&&!window.confirm("Clear all frames? This will reset your work.")||(gt.current=[],lt.current=[],Cs(),Wn.current=!1,Md(),ls(),bo(),$("[]"),E(!1),hc(),xt())}function Ta(){const A=[...gt.current];return lt.current.length===4&&A.push({points:[...lt.current],config:{...me}}),A.map(H=>({points:H.points.map(V=>[V[0],V[1]]),config:H.config}))}function X2(A){if(!A.trim())return[];let H=[];try{H=JSON.parse(A)}catch(V){throw new Error((V==null?void 0:V.message)||"Frames JSON is invalid")}if(!Array.isArray(H))throw new Error("Frames JSON must be an array of frames.");return H.map((V,ce)=>{const Z=em((V==null?void 0:V.points)||(V==null?void 0:V.frame_points)||V);if(!Z||Z.length!==4)throw new Error(`Frame ${ce+1} must include 4 points.`);const Ce=Z.map(De=>{const wt=Number(De[0]),ct=Number(De[1]);if(!Number.isFinite(wt)||!Number.isFinite(ct))throw new Error(`Frame ${ce+1} has invalid point values.`);return[wt,ct]});let Te=V==null?void 0:V.config;if(typeof Te=="string")try{Te=JSON.parse(Te)}catch{Te=null}return{points:Ce,config:ef(Te,Po),source:"json"}})}function J2(){L("");try{const A=X2(R);gt.current=A,lt.current=[],Wn.current=!1,Md(),A.length?Id(0):Cs(),ls(),bo(),E(!1),$(A.length?JSON.stringify(Ta(),null,2):"[]"),xt()}catch(A){L((A==null?void 0:A.message)||"Frames JSON is invalid")}}function Z2(){!ft.current||K||(G(!0),setTimeout(()=>{if(!ft.current){G(!1);return}try{const A=document.createElement("canvas");A.width=ft.current.width,A.height=ft.current.height;const H=A.getContext("2d");H.drawImage(ft.current,0,0);const V=H.getImageData(0,0,ft.current.width,ft.current.height),ce=AU(V,{color:Ie,tolerance:pe,depthMultiplier:me.depthMultiplier,existingFrames:gt.current});ce?(lt.current=ce,Cs(),Wn.current=!0,ls(),Mr(!0),Ae("Green screen detected. Adjust points or click Add Frame to save."),xt()):Ae("No green screen detected. Adjust tolerance or draw frame manually.")}finally{G(!1)}},0))}async function eP(){const A=B2();if(!_||!A||!Ws){L("Upload a photo and select or draw a frame first.");return}const H=L0;if(!H){L("Upload a test creative for the active frame first.");return}if(!cc){L(""),Rd(!0);try{const V=new FormData;V.append("billboard_photo",_),V.append("creative",H),V.append("frame_points",JSON.stringify(A.points)),V.append("config",JSON.stringify(A.config)),V.append("time_of_day",h||"day");const ce=await nB(V),Z=as.current.get(Ws);Z!=null&&Z.url&&URL.revokeObjectURL(Z.url);const Ce=URL.createObjectURL(ce),Te=new Image;Te.onload=()=>{as.current.set(Ws,{url:Ce,img:Te}),Hs.current=Ce,Us.current=Te,xt()},Te.src=Ce}catch(V){L((V==null?void 0:V.message)||"Failed to generate preview")}finally{Rd(!1)}}}function tP(){j(null),ft.current=null,lt.current=[],gt.current=[],Cs(),Wn.current=!1,ht(!1),Md(),nm(!1),ls(),bo(),$("[]"),E(!1),Ae("Select one or more locations, upload a billboard photo, then click four corners to define the frame."),xt()}function nP(A){A.preventDefault(),Q(!0)}function sP(A){A.preventDefault(),Q(!1)}function rP(A){var V,ce;A.preventDefault(),Q(!1);const H=(ce=(V=A.dataTransfer)==null?void 0:V.files)==null?void 0:ce[0];H&&(j(H),q0(H))}function iP(A){A.preventDefault(),J(!0)}function oP(A){A.preventDefault(),J(!1)}function aP(A){var V,ce;A.preventDefault(),J(!1);const H=(ce=(V=A.dataTransfer)==null?void 0:V.files)==null?void 0:ce[0];H&&setCreativeFile(H)}return c.jsx("div",{className:"h-full min-h-0 flex flex-col",children:c.jsxs("div",{className:"flex-1 min-h-0 flex flex-col gap-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(te,{variant:s==="generate"?"default":"ghost",onClick:()=>r("generate"),className:"rounded-2xl",children:"Generate"}),n?c.jsx(te,{variant:s==="setup"?"default":"ghost",onClick:()=>r("setup"),className:"rounded-2xl",children:"Setup"}):null,c.jsx(te,{variant:s==="history"?"default":"ghost",onClick:()=>r("history"),className:"rounded-2xl",children:"History"})]}),c.jsxs("div",{className:"flex-1 min-h-0",children:[c.jsx("div",{className:s==="generate"?"h-full":"hidden","aria-hidden":s!=="generate",children:c.jsx(dU,{locations:i,setLocations:o,venueType:a,setVenueType:l,templateKey:x,setTemplateKey:y,locationOptions:A0,locationsQuery:O0,timeOfDay:h,setTimeOfDay:f,timeOfDayDisabled:v,sideDisabled:k,side:p,setSide:w,timeOfDayOptions:PT,sideOptions:RT,venueTypeOptions:AT,templateOptions:M0,templatesQuery:hi,templateThumbs:T,getTemplateKey:Dr,defaultFrameConfig:Po,creativeDragActive:de,handleCreativeDragOver:iP,handleCreativeDragLeave:oP,handleCreativeDrop:aP,useNativeSelects:a_})}),s==="setup"?c.jsx("div",{className:"h-full",children:c.jsx(xU,{locations:i,setLocations:o,venueType:a,setVenueType:l,assetType:u,setAssetType:d,setTemplateKey:y,locationOptions:A0,locationsQuery:O0,assetTypeOptions:_2,assetTypesQuery:mn,timeOfDay:h,setTimeOfDay:f,timeOfDayDisabled:v,sideDisabled:k,side:p,setSide:w,timeOfDayOptions:wU,sideOptions:kU,venueTypeOptions:_U,editingTemplate:q,editingTemplateLoading:he,stopEditTemplate:F0,templatesOpen:Lt,setTemplatesOpen:cr,templateOptions:I0,templatesQuery:Zp,templateThumbs:T,getTemplateKey:Dr,startEditTemplate:O2,deleteTemplate:T2,setupPhoto:_,setSetupPhoto:j,handleSetupPhoto:q0,handleSetupDragOver:nP,handleSetupDragLeave:sP,handleSetupDrop:rP,setupDragActive:B,handleSetupPhotoClear:tP,framesJson:R,setFramesJson:$,setFramesJsonDirty:E,applyFramesJsonToCanvas:J2,buildFramesPayload:Ta,setupImageReady:et,greenscreenOpen:ka,setGreenscreenOpen:Qp,greenscreenColor:Ie,setGreenscreenColor:X,greenscreenDetecting:K,colorTolerance:pe,setColorTolerance:re,RangeField:Kn,handleGreenscreenDetect:Z2,canDetectGreenscreen:j2,hasActiveFrame:C2,frameSettingsOpen:Xp,setFrameSettingsOpen:Mr,setupFrameConfig:me,handleSetupFrameConfigChange:W2,FrameConfigControls:PU,previewOpen:Pd,setPreviewOpen:Jp,testPreviewMode:xo,setTestPreviewMode:_a,testPreviewImgRef:Us,testPreviewUrlRef:Hs,previewImgRef:ft,drawPreview:xt,activeTestCreativeFile:L0,updateTestCreativeForActive:H2,generateTestPreview:eP,testPreviewing:cc,activeFrameIndex:ie,canvasRef:At,canvasWidth:vh,canvasHeight:bh,handleCanvasPointerDown:V2,handleCanvasPointerMove:q2,handleCanvasPointerUp:K2,handleCanvasWheel:I2,setupHint:ve,handleZoomOut:L2,handleZoomIn:D2,handleFitToScreen:$2,zoomPercent:N2,pixelUpscale:Le,setPixelUpscale:be,setupError:I,setupMessage:D,addFrame:Y2,resetCurrentFrame:Q2,saveSetup:E2,setupSaving:N,clearAllFrames:K0,currentPoints:ae,frameCount:F,useNativeSelects:a_})}):null,c.jsx("div",{className:s==="history"?"h-full":"hidden","aria-hidden":s!=="history",children:c.jsx(vU,{enabled:S2})})]})]})})}function PU({config:t,onChange:e}){return c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsx(Kn,{label:"Brightness",value:t.brightness,min:50,max:200,suffix:"%",onChange:n=>e("brightness",n)}),c.jsx(Kn,{label:"Contrast",value:t.contrast,min:50,max:200,suffix:"%",onChange:n=>e("contrast",n)}),c.jsx(Kn,{label:"Saturation",value:t.saturation,min:0,max:200,suffix:"%",onChange:n=>e("saturation",n)}),c.jsx(Kn,{label:"Image Blur",value:t.imageBlur,min:0,max:20,onChange:n=>e("imageBlur",n),helper:"Blur entire creative (0 = off)."}),c.jsx(Kn,{label:"Edge Blur",value:t.edgeBlur,min:1,max:20,suffix:"px",onChange:n=>e("edgeBlur",n),helper:"Edge blur amount (1 = off)."}),c.jsx(Kn,{label:"Overlay Opacity",value:t.overlayOpacity,min:0,max:50,suffix:"%",onChange:n=>e("overlayOpacity",n),helper:"Billboard overlay strength."}),c.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[c.jsx(RU,{value:t.lightDirection,onChange:n=>e("lightDirection",n)}),c.jsx(Kn,{label:"Depth Perception",value:t.depthMultiplier,min:5,max:30,suffix:"x",onChange:n=>e("depthMultiplier",n),helper:"Perspective compensation."})]}),c.jsx(Kn,{label:"Shadow Intensity",value:t.shadowIntensity,min:0,max:100,suffix:"%",onChange:n=>e("shadowIntensity",n),helper:"Edge darkening."}),c.jsx(Kn,{label:"Lighting Match",value:t.lightingAdjustment,min:-50,max:50,suffix:"%",onChange:n=>e("lightingAdjustment",n),helper:"Brightness matching."}),c.jsx(Kn,{label:"Color Temperature",value:t.colorTemperature,min:-50,max:50,onChange:n=>e("colorTemperature",n),helper:"Warm/cool shift."}),c.jsx(Kn,{label:"Vignette",value:t.vignette,min:0,max:100,suffix:"%",onChange:n=>e("vignette",n),helper:"Corner darkening."}),c.jsx(Kn,{label:"Edge Smoother",value:t.edgeSmoother,min:1,max:20,suffix:"x",onChange:n=>e("edgeSmoother",n),helper:"Higher = softer edges."}),c.jsx(Kn,{label:"Sharpening",value:t.sharpening,min:0,max:100,suffix:"%",onChange:n=>e("sharpening",n),helper:"Unsharp mask strength (0 = off)."})]})}function RU({value:t,onChange:e}){return c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"text-xs font-semibold text-black/70 dark:text-white/70",children:["Light Direction: ",NU[t]||"Top"]}),c.jsx("div",{className:"grid grid-cols-3 gap-2 w-[150px]",children:OT.map(n=>c.jsx("button",{type:"button",onClick:()=>e(n.value),className:`rounded-lg border px-2 py-2 text-sm font-semibold ${t===n.value?"border-black/40 dark:border-white/50 bg-black/5 dark:bg-white/15 text-black dark:text-white":"border-black/10 dark:border-white/20 bg-white/80 dark:bg-black/40 text-black/70 dark:text-white/80"}`,title:n.label,children:n.glyph},n.value))})]})}function Kn({label:t,value:e,min:n,max:s,step:r=1,suffix:i="",helper:o,onChange:a}){return c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"text-xs font-semibold text-black/70 dark:text-white/70",children:[t,": ",e,i]}),c.jsx("input",{type:"range",min:n,max:s,step:r,value:e,onChange:l=>a(Number(l.target.value)),style:{background:EU(e,n,s)},className:"w-full accent-black"}),o?c.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:o}):null]})}function Dr(t){return`${t.storage_key||""}::${t.photo}::${t.time_of_day||"all"}::${t.side||"all"}`}function AU(t,{color:e,tolerance:n,depthMultiplier:s,existingFrames:r}){const i=t.data,o=t.width,a=t.height,l=parseInt(e.slice(1,3),16),u=parseInt(e.slice(3,5),16),d=parseInt(e.slice(5,7),16),h=n,f=new Uint8Array(o*a);r.forEach(I=>{const L=I.points;for(let R=0;R<a;R+=1)for(let $=0;$<o;$+=1)OU($,R,L)&&(f[R*o+$]=1)});const p=new Uint8Array(o*a);let w=0;for(let I=0;I<a;I+=1)for(let L=0;L<o;L+=1){const R=I*o+L;if(f[R]===1)continue;const $=R*4,U=i[$],E=i[$+1],T=i[$+2];Math.sqrt((U-l)**2+(E-u)**2+(T-d)**2)<=h&&(p[R]=255,w+=1)}if(w<1e3)return null;const x=new Uint8Array(o*a),y=3;for(let I=0;I<a;I+=1)for(let L=0;L<o;L+=1){const R=I*o+L;let $=!1;for(let U=-y;U<=y;U+=1){for(let E=-y;E<=y;E+=1){const T=I+U,z=L+E;if(T>=0&&T<a&&z>=0&&z<o&&p[T*o+z]===255){$=!0;break}}if($)break}x[R]=$?255:0}const g=[];for(let I=1;I<a-1;I+=1)for(let L=1;L<o-1;L+=1){const R=I*o+L;x[R]===0&&(x[R-1]===255||x[R+1]===255||x[R-o]===255||x[R+o]===255||x[R-o-1]===255||x[R-o+1]===255||x[R+o-1]===255||x[R+o+1]===255)&&g.push([L,I])}if(g.length<4)return null;let m=g[0],v=g[0],k=g[0],S=g[0];g.forEach(I=>{const[L,R]=I;L+R<m[0]+m[1]&&(m=I),L-R>v[0]-v[1]&&(v=I),L+R>k[0]+k[1]&&(k=I),L-R<S[0]-S[1]&&(S=I)});const C=Math.abs(v[0]-m[0]),_=Math.abs(k[0]-S[0]),j=Math.abs(S[1]-m[1]),N=Math.abs(k[1]-v[1]),P=C/_,D=j/N,M=s||Po.depthMultiplier;if(P>1.1){const I=Math.floor((P-1)*M);S=[S[0],Math.min(a-1,S[1]+I)],k=[k[0],Math.min(a-1,k[1]+I)]}else if(P<.9){const I=Math.floor((1/P-1)*M);m=[m[0],Math.max(0,m[1]-I)],v=[v[0],Math.max(0,v[1]-I)]}if(D>1.1){const I=Math.floor((D-1)*M);v=[Math.min(o-1,v[0]+I),v[1]],k=[Math.min(o-1,k[0]+I),k[1]]}else if(D<.9){const I=Math.floor((1/D-1)*M);m=[Math.max(0,m[0]-I),m[1]],S=[Math.max(0,S[0]-I),S[1]]}return[m,v,k,S]}function OU(t,e,n){let s=!1;for(let r=0,i=n.length-1;r<n.length;i=r++){const o=n[r][0],a=n[r][1],l=n[i][0],u=n[i][1];a>e!=u>e&&t<(l-o)*(e-a)/(u-a)+o&&(s=!s)}return s}function MU(t){if(!t)return"";const e=String(t).trim();if(!e)return"";if(e.includes("/"))return e;const n=e.split("-");if(n.length===3){const[s,r,i]=n;if(s&&r&&i)return`${i}/${r}/${s}`}return e}function c_(t){const e=Number.parseInt(t,10),n=Number.isFinite(e)&&e>0?e:1;return`${n} ${n===1?"Week":"Weeks"}`}function wh(t,e){const n=e;if(t==null||t==="")return`${n} 0`;const s=typeof t=="string"?t.trim():t;if(typeof s=="string"&&s.toUpperCase().startsWith(n))return s;const r=typeof s=="number"?s:Number.parseFloat(String(s).replace(/,/g,""));return Number.isFinite(r)?`${n} ${r.toLocaleString()}`:`${n} 0`}function u_(t){if(t==null)return 0;const e=Number.parseFloat(String(t).replace(/[^\d.-]/g,""));return Number.isFinite(e)?e:0}function IU(){const t=Rr(),[e,n]=b.useState(""),s=()=>({id:crypto.randomUUID(),startDate:"",duration:"",netRate:""}),r=()=>({id:crypto.randomUUID(),location:"",spots:"1",productionFee:"",periods:[s()]}),[i,o]=b.useState(()=>[r()]),[a,l]=b.useState("separate"),[u,d]=b.useState(""),[h,f]=b.useState("AED"),[p,w]=b.useState("100% upfront"),[x,y]=b.useState([]),[g,m]=b.useState({}),v=en({queryKey:["locations","proposals"],queryFn:()=>lB({service:"proposals"})}),k=b.useMemo(()=>{const R=v.data;return Array.isArray(R)?R:(R==null?void 0:R.locations)||(R==null?void 0:R.data)||[]},[v.data]),S=b.useMemo(()=>Array.from(new Set(i.map(R=>R.location).filter(Boolean))),[i]);b.useEffect(()=>{if(!S.length)return;const R=S.filter(U=>!g[U]);if(!R.length)return;let $=!0;return(async()=>{const U=await Promise.all(R.map(async E=>{try{const T=await cB(E);return[E,T]}catch{return[E,null]}}));$&&m(E=>{const T={...E};return U.forEach(([z,q])=>{q&&(T[z]=q)}),T})})(),()=>{$=!1}},[S,g]);const C=bM({mutationFn:R=>uB(R),onSuccess:()=>{t.invalidateQueries({queryKey:["proposals","history"]})}});function _(R,$,U){o(E=>E.map(T=>T.id===R?{...T,[$]:U}:T))}function j(R,$,U,E){o(T=>T.map(z=>z.id!==R?z:{...z,periods:z.periods.map(q=>q.id===$?{...q,[U]:E}:q)}))}function N(){o(R=>[...R,r()])}function P(R){o($=>$.length>1?$.filter(U=>U.id!==R):$)}function D(R){o($=>$.map(U=>U.id===R?{...U,periods:[...U.periods,s()]}:U))}function M(R,$){o(U=>U.map(E=>E.id!==R||E.periods.length<=1?E:{...E,periods:E.periods.filter(T=>T.id!==$)}))}function I(){const R=h||"AED",$=wh(u,R),U=i.filter(W=>W.location),E=U.map(W=>{const he=W.periods.filter(K=>K.startDate||K.duration||K.netRate),ee=a==="combined"?[he[0]||W.periods[0]]:he,B=ee.map(K=>MU((K==null?void 0:K.startDate)||"")),Q=ee.map(K=>c_(K==null?void 0:K.duration)),de=ee.map(K=>wh(K==null?void 0:K.netRate,R)),J=Number.parseInt(W.spots,10),ve=Number.isFinite(J)&&J>0?J:1,Ae=g[W.location]||{},me=Ae.location||Ae,fe=(me.display_type||me.displayType||"").toLowerCase()==="static",Ie=me.upload_fee??me.uploadFee??0,X=me.production_fee??me.productionFee??0,pe=W.productionFee,re={location:W.location||"",upload_fee:wh(Ie,R),spots:ve};return fe&&(re.production_fee=wh(pe!==""&&pe!==null&&pe!==void 0?pe:X,R)),a==="combined"?(re.start_date=B[0]||"",re.duration=Q[0]||c_(1)):(re.start_dates=B,re.durations=Q,re.net_rates=de),re}),T=U.map(W=>{const he=k.find(ee=>(ee.location_key||ee.key||ee.id)===W.location);return(he==null?void 0:he.display_name)||(he==null?void 0:he.name)||(he==null?void 0:he.label)||W.location}).filter(Boolean).join(", "),z={proposals:E,client_name:e,proposal_type:a,payment_terms:p||"100% upfront",currency:R};a==="combined"&&(z.combined_net_rate=$);const q={client:e,packageType:a,items:E.map(W=>({location:W.location,netRatesValue:Array.isArray(W.net_rates)?W.net_rates.map(u_):[]})),combinedNetRateValue:a==="combined"?u_($):0,locationsLabel:T,currency:R,paymentTerms:p||"100% upfront"};C.mutate(z,{onSuccess:W=>{y(he=>[{data:W,meta:q},...he].slice(0,3))}})}function L(){n(""),o([r()]),l("separate"),d(""),f("AED"),w("100% upfront")}return{client:e,setClient:n,items:i,updateItem:_,addItem:N,removeItem:P,addPeriod:D,removePeriod:M,updatePeriod:j,packageType:a,setPackageType:l,combinedNetRate:u,setCombinedNetRate:d,currency:h,setCurrency:f,paymentTerms:p,setPaymentTerms:w,lastResults:x,locationsQuery:v,locationOptions:k,generateMutation:C,handleGenerate:I,resetForm:L}}function DU(){const t=IU();return c.jsx(LU,{...t})}function LU({client:t,setClient:e,items:n,updateItem:s,addItem:r,removeItem:i,addPeriod:o,removePeriod:a,updatePeriod:l,packageType:u,setPackageType:d,combinedNetRate:h,setCombinedNetRate:f,currency:p,setCurrency:w,paymentTerms:x,setPaymentTerms:y,lastResults:g,locationsQuery:m,locationOptions:v,generateMutation:k,handleGenerate:S,resetForm:C}){var M;const _=Array.isArray(g)?g:[],j=k.isPending,N=b.useMemo(()=>{const I=v.map(L=>{const R=L.location_key||L.key||L.id||"",$=L.display_name||L.name||L.label||R||"";return{value:R,label:$}}).filter(L=>L.value);return[{value:"",label:"Select a location"},...I]},[v]),P=b.useMemo(()=>[{value:"separate",label:"Separate"},{value:"combined",label:"Combined"}],[]),D=b.useMemo(()=>[{value:"AED",label:"AED"},{value:"EUR",label:"EUR"},{value:"USD",label:"USD"},{value:"GBP",label:"GBP"}],[]);return c.jsxs(vt,{className:"h-full flex flex-col",children:[c.jsx(Bt,{className:"flex flex-row items-center justify-between",children:c.jsx(Yt,{children:"Generate Proposal"})}),c.jsxs(Ut,{className:"flex-1 min-h-0 overflow-y-auto space-y-3",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsx(_e,{label:"Client",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:t,onChange:I=>e(I.target.value),placeholder:"Client name"})}),c.jsx(_e,{label:"Package Type",children:c.jsx(ot,{value:u,options:P,onChange:d})})]}),u==="combined"?c.jsx(_e,{label:"Combined Net Rate",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:h,onChange:I=>f(I.target.value),type:"number",min:"0",step:"0.01",placeholder:"0"})}):null,c.jsxs("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white/40 dark:bg-white/5 p-3 space-y-3",children:[c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Locations"}),m.isLoading?c.jsx("div",{className:"mt-1 text-xs text-black/50 dark:text-white/60",children:c.jsx(Ye,{text:"Loading locations"})}):null]}),c.jsx(te,{variant:"secondary",size:"sm",className:"rounded-xl",onClick:r,children:"Add Location"})]}),c.jsx("div",{className:"space-y-3",children:n.map(I=>{var $,U;const L=v.find(E=>(E.location_key||E.key||E.id)===I.location),R=((L==null?void 0:L.display_type)||"").toLowerCase()==="static";return c.jsxs("div",{className:"rounded-xl border border-black/5 dark:border-white/10 bg-white/60 dark:bg-white/5 p-3 space-y-3",children:[u==="combined"?c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[1.4fr_0.6fr_0.9fr_0.7fr_auto] gap-2 items-end",children:[c.jsx(_e,{label:"Location",children:c.jsx(ot,{value:I.location,options:N,onChange:E=>s(I.id,"location",E)})}),c.jsx(_e,{label:"Spots",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:I.spots,onChange:E=>s(I.id,"spots",E.target.value),type:"number",min:"1",step:"1",placeholder:"1"})}),c.jsx(_e,{label:"Start Date",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:(($=I.periods[0])==null?void 0:$.startDate)||"",onChange:E=>{var T;return l(I.id,(T=I.periods[0])==null?void 0:T.id,"startDate",E.target.value)},type:"date"})}),c.jsx(_e,{label:"Duration (weeks)",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:((U=I.periods[0])==null?void 0:U.duration)||"",onChange:E=>{var T;return l(I.id,(T=I.periods[0])==null?void 0:T.id,"duration",E.target.value)},type:"number",min:"1",step:"1",placeholder:"1"})}),c.jsx(te,{variant:"ghost",size:"icon",className:"rounded-xl h-10 w-10",onClick:()=>i(I.id),disabled:n.length===1,title:"Remove location",children:c.jsx(ea,{size:16})})]}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 items-end",children:[c.jsx(_e,{label:"Location",children:c.jsx(ot,{value:I.location,options:N,onChange:E=>s(I.id,"location",E)})}),c.jsxs("div",{className:"flex items-end justify-between gap-2",children:[c.jsx(_e,{label:"Spots",className:"flex-1",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:I.spots,onChange:E=>s(I.id,"spots",E.target.value),type:"number",min:"1",step:"1",placeholder:"1"})}),c.jsx(te,{variant:"ghost",size:"icon",className:"rounded-xl h-10 w-10",onClick:()=>i(I.id),disabled:n.length===1,title:"Remove location",children:c.jsx(ea,{size:16})})]})]}),R?c.jsx(_e,{label:"Production Fee",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:I.productionFee,onChange:E=>s(I.id,"productionFee",E.target.value),type:"number",min:"0",step:"0.01",placeholder:"0"})}):null,u!=="combined"?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[c.jsx("div",{className:"text-xs font-semibold text-black/60 dark:text-white/60",children:"Line Items"}),c.jsx(te,{variant:"secondary",size:"sm",className:"rounded-xl",onClick:()=>o(I.id),children:"Add Line Item"})]}),c.jsx("div",{className:"space-y-2",children:I.periods.map(E=>c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[1fr_1fr_1fr_1fr_auto] gap-2 items-end",children:[c.jsx(_e,{label:"Start Date",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:E.startDate,onChange:T=>l(I.id,E.id,"startDate",T.target.value),type:"date"})}),c.jsx(_e,{label:"Duration (weeks)",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:E.duration,onChange:T=>l(I.id,E.id,"duration",T.target.value),type:"number",min:"1",step:"1",placeholder:"1"})}),c.jsx(_e,{label:"Net Rate",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:E.netRate,onChange:T=>l(I.id,E.id,"netRate",T.target.value),type:"number",min:"0",step:"0.01",placeholder:"0"})}),c.jsx(te,{variant:"ghost",size:"icon",className:"rounded-xl h-10 w-10",onClick:()=>a(I.id,E.id),disabled:I.periods.length===1,title:"Remove dates",children:c.jsx(ea,{size:16})})]},E.id))})]}):null]},I.id)})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsx(_e,{label:"Currency",children:c.jsx(ot,{value:p,options:D,onChange:w})}),c.jsx(_e,{label:"Payment Terms",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:x,onChange:I=>y(I.target.value),placeholder:"Payment terms"})})]}),k.isError?c.jsx("div",{className:"rounded-xl bg-red-50/70 text-red-700 px-4 py-2 text-sm dark:bg-red-500/10 dark:text-red-300",children:((M=k.error)==null?void 0:M.message)||"Generation failed"}):null,c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(te,{className:"rounded-2xl",onClick:S,disabled:j,children:j?c.jsx(Ye,{text:"Generating Proposal"}):"Generate Proposal"}),c.jsx(te,{variant:"secondary",className:"rounded-2xl",onClick:C,disabled:j,children:"Reset"})]}),c.jsxs("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white/40 dark:bg-white/5 p-4 space-y-3",children:[!_.length&&!j?c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"Result will appear here"}):null,j?c.jsx(Ye,{text:"Processing proposal",className:"text-sm text-black/60 dark:text-white/65"}):null,_.length?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Last 3 Generated Proposals"}),c.jsx("div",{className:"space-y-4",children:_.map((I,L)=>{const R=(I==null?void 0:I.data)||null,$=(I==null?void 0:I.meta)||null,U=[];R!=null&&R.pptx_url&&U.push({url:R.pptx_url,type:"pptx"}),R!=null&&R.pdf_url&&U.push({url:R.pdf_url,type:"pdf"});const E=(R==null?void 0:R.locations)||($==null?void 0:$.locationsLabel)||"",T=($==null?void 0:$.packageType)==="combined"?$==null?void 0:$.combinedNetRateValue:(($==null?void 0:$.items)||[]).reduce((q,W)=>{const he=Array.isArray(W.netRatesValue)?W.netRatesValue:[];return q+he.reduce((ee,B)=>ee+(B||0),0)},0),z=Number.isFinite(T)?`${($==null?void 0:$.currency)||"AED"} ${Number(T).toLocaleString()}`:"";return c.jsxs("div",{className:"rounded-xl border border-black/5 dark:border-white/10 bg-white/60 dark:bg-white/5 p-3 space-y-3",children:[c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1.5 text-xs text-black/65 dark:text-white/65",children:[c.jsxs("div",{className:"flex flex-wrap items-baseline gap-1",children:[c.jsx("span",{className:"uppercase tracking-wide text-black/45 dark:text-white/50",children:"Client"}),c.jsx("span",{className:"font-semibold text-black/80 dark:text-white/85",children:($==null?void 0:$.client)||""})]}),c.jsxs("div",{className:"flex flex-wrap items-baseline gap-1",children:[c.jsx("span",{className:"uppercase tracking-wide text-black/45 dark:text-white/50",children:"Package"}),c.jsx("span",{className:"font-semibold text-black/80 dark:text-white/85",children:($==null?void 0:$.packageType)||""})]}),c.jsxs("div",{className:"flex flex-wrap items-baseline gap-1 sm:col-span-2",children:[c.jsx("span",{className:"uppercase tracking-wide text-black/45 dark:text-white/50",children:"Locations"}),c.jsx("span",{className:"font-semibold text-black/80 dark:text-white/85",children:E})]}),c.jsxs("div",{className:"flex flex-wrap items-baseline gap-1",children:[c.jsx("span",{className:"uppercase tracking-wide text-black/45 dark:text-white/50",children:"Total Amount"}),c.jsx("span",{className:"font-semibold text-black/80 dark:text-white/85",children:z})]})]}),U.length?c.jsx("div",{className:"space-y-2",children:U.map(q=>{const W=$U(q.url),he=FU(W),ee=q.type==="pdf"?"proposal.pdf":"proposal.pptx",B=he||ee,Q=q.type==="pdf";return c.jsx("div",{className:"rounded-xl border border-black/5 dark:border-white/10 bg-white/70 dark:bg-white/5 p-3",children:c.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[c.jsxs("div",{className:"min-w-0",children:[c.jsx("div",{className:"flex items-center gap-2 text-xs uppercase tracking-wide text-black/50 dark:text-white/60",children:Q?c.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-red-500/10 text-red-700 dark:text-red-300 px-2 py-0.5",children:[c.jsx(Av,{size:12}),"PDF"]}):c.jsx("span",{className:"inline-flex items-center gap-1 rounded-full bg-black/5 dark:bg-white/10 px-2 py-0.5",children:"PPTX"})}),c.jsx("div",{className:"mt-1 text-xs font-semibold text-black/80 dark:text-white/85 truncate",children:B})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(te,{asChild:!0,size:"sm",variant:"ghost",className:"rounded-xl",children:c.jsxs("a",{href:W,target:"_blank",rel:"noopener noreferrer",children:[c.jsx(no,{size:14,className:"mr-1"}),"Open"]})}),c.jsx(te,{size:"sm",variant:"secondary",className:"rounded-xl",children:c.jsxs("span",{role:"link",tabIndex:0,onClick:de=>{de.preventDefault(),d_(W,B)},onKeyDown:de=>{(de.key==="Enter"||de.key===" ")&&(de.preventDefault(),d_(W,B))},className:"inline-flex items-center",children:[c.jsx(ca,{size:14,className:"mr-1"}),"Download"]})})]})]})},`${q.type}-${q.url}`)})}):c.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:"No files returned yet."})]},`proposal-output-${L}`)})})]}):null]})]})]})}function $U(t){return t?t.startsWith("http")?t:`${tc.API_BASE_URL}${t}`:""}function FU(t){if(!t)return"";try{const n=new URL(t,window.location.href).pathname.split("/").filter(Boolean);return n.length?decodeURIComponent(n[n.length-1]):""}catch{const n=t.split("?")[0].split("#")[0].split("/").filter(Boolean);return n.length?decodeURIComponent(n[n.length-1]):""}}async function d_(t,e){const s=await(await fetch(t)).blob(),r=document.createElement("a");r.href=URL.createObjectURL(s),r.download=e,document.body.appendChild(r),r.click(),r.remove(),setTimeout(()=>URL.revokeObjectURL(r.href),1e3)}function go({className:t,placeholder:e="Search...",...n}){return c.jsx("input",{type:"text",placeholder:e,className:Ee("rounded-2xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",t),...n})}function zU(){const{user:t}=ii(),[e,n]=b.useState({}),[s,r]=b.useState(!1),i=en({queryKey:["proposals","history"],queryFn:dB}),o=b.useMemo(()=>{var h;return Array.isArray(i.data)?i.data:(h=i.data)!=null&&h.proposals?i.data.proposals:i.data||[]},[i.data]),a=b.useMemo(()=>md(t),[t]),l=b.useMemo(()=>{const h=o||[];if(a)return h;const f=(t==null?void 0:t.id)||(t==null?void 0:t.user_id)||(t==null?void 0:t.email)||"";return f?h.filter(p=>(p.submitted_by||p.user_id||"")===f):h},[o,a,t==null?void 0:t.id,t==null?void 0:t.user_id,t==null?void 0:t.email]),u=b.useMemo(()=>{const h=new Set;return(l||[]).forEach(f=>{const p=f.submitted_by||f.user_id;p&&h.add(p)}),Array.from(h)},[l]),d=b.useMemo(()=>u.filter(h=>!e[h]),[u,e]);return b.useEffect(()=>{if(!d.length)return;r(!0);let h=!0;return(async()=>{const f=await Promise.all(d.map(async p=>{var w,x;try{const y=await fB(p),g=(y==null?void 0:y.name)||((w=y==null?void 0:y.user)==null?void 0:w.name)||((x=y==null?void 0:y.profile)==null?void 0:x.name)||p;return[p,g]}catch{return[p,p]}}));h&&(n(p=>{const w={...p};return f.forEach(([x,y])=>{w[x]||(w[x]=y)}),w}),r(!1))})(),()=>{h=!1}},[d]),b.useEffect(()=>{d.length||r(!1)},[d.length]),{historyQuery:i,userNamesLoading:s,visibleProposals:l,userNameById:e}}function BU(){const t=zU();return c.jsx(UU,{...t})}function UU({historyQuery:t,userNamesLoading:e,visibleProposals:n,userNameById:s}){const[r,i]=b.useState(""),[o,a]=b.useState(""),[l,u]=b.useState(""),d=b.useMemo(()=>(n||[]).map((y,g)=>{var P;const m=y.client_name||y.client||"Proposal",v=y.submitted_by||y.user_id||"",k=v?s[v]||v:"",S=y.date_generated||y.created_at,C=y.package_type||"",_=y.locations||((P=y.proposal_data)==null?void 0:P.locations_text)||y.location||"",j=y.total_amount||(y.total_amount_value!=null?`${y.currency||""} ${Number(y.total_amount_value).toLocaleString()}`:""),N=[];return y.pptx_url&&N.push({url:y.pptx_url,type:"pptx"}),y.pdf_url&&N.push({url:y.pdf_url,type:"pdf"}),!N.length&&y.file_url&&N.push({url:y.file_url,type:"pdf"}),{id:y.id||y.file_url||g,clientName:m,userName:k,generatedAt:S,packageType:C,locationText:_,totalAmount:j,fileEntries:N}}),[n,s]),h=b.useMemo(()=>{const y=new Set;return d.forEach(g=>{g.packageType&&g.packageType!==""&&y.add(g.packageType)}),Array.from(y)},[d]),f=b.useMemo(()=>{const y=new Set;return d.forEach(g=>{!g.locationText||g.locationText===""||g.locationText.split(",").forEach(m=>{const v=m.trim();v&&y.add(v)})}),Array.from(y)},[d]),p=b.useMemo(()=>[{value:"",label:"All packages"},...h.map(y=>({value:y,label:y}))],[h]),w=b.useMemo(()=>[{value:"",label:"All locations"},...f.map(y=>({value:y,label:y}))],[f]),x=b.useMemo(()=>{const y=l.trim().toLowerCase();return d.filter(g=>!(r&&g.packageType!==r||o&&!(g.locationText||"").split(",").map(v=>v.trim()).filter(Boolean).includes(o)||y&&!`${g.clientName} ${g.locationText}`.toLowerCase().includes(y)))},[d,r,o,l]);return c.jsxs(vt,{className:"h-full flex flex-col",children:[c.jsx(Bt,{className:"space-y-2",children:c.jsx(Yt,{children:"History"})}),c.jsx(Ut,{className:"flex-1 min-h-0 flex flex-col",children:t.isLoading||e?c.jsx(Ye,{text:"Loading",className:"text-sm text-black/60 dark:text-white/65"}):n!=null&&n.length?c.jsxs("div",{className:"flex-1 min-h-0 flex flex-col gap-3",children:[c.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[c.jsx(go,{value:l,onChange:y=>u(y.target.value),className:"w-full sm:w-[260px]",placeholder:"Search..."}),c.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-end",children:[c.jsx(ot,{value:r,options:p,onChange:i,className:"sm:w-[200px]"}),c.jsx(ot,{value:o,options:w,onChange:a,className:"sm:w-[220px]"})]})]}),c.jsx("div",{className:"flex-1 min-h-0 rounded-2xl border border-black/5 dark:border-white/10 bg-white/40 dark:bg-white/5 w-full min-w-0 overflow-hidden",children:c.jsx("div",{className:"h-full w-full min-w-0 overflow-auto",children:c.jsxs("table",{className:"min-w-[760px] w-full text-sm",children:[c.jsx("thead",{className:"bg-white dark:bg-neutral-900 text-xs uppercase tracking-wide text-black/45 dark:text-white/50 sticky top-0 z-10",children:c.jsxs("tr",{children:[c.jsx("th",{className:"sticky top-0 z-10 px-4 py-3 text-left font-semibold bg-white dark:bg-neutral-900",children:"Client"}),c.jsx("th",{className:"sticky top-0 z-10 px-4 py-3 text-left font-semibold bg-white dark:bg-neutral-900",children:"Locations"}),c.jsx("th",{className:"sticky top-0 z-10 px-4 py-3 text-left font-semibold bg-white dark:bg-neutral-900",children:"Amount"}),c.jsx("th",{className:"sticky top-0 z-10 px-4 py-3 text-left font-semibold bg-white dark:bg-neutral-900",children:"User"}),c.jsx("th",{className:"sticky top-0 z-10 px-4 py-3 text-left font-semibold bg-white dark:bg-neutral-900",children:"Generated"}),c.jsx("th",{className:"sticky top-0 right-0 z-20 px-4 py-3 text-left font-semibold bg-white dark:bg-neutral-900",children:"Actions"})]})}),c.jsx("tbody",{className:"divide-y divide-black/5 dark:divide-white/10",children:(x||[]).map(y=>c.jsxs("tr",{className:"text-black/80 dark:text-white/85",children:[c.jsx("td",{className:"px-4 py-3 font-semibold",children:y.clientName}),c.jsx("td",{className:"px-4 py-3",children:y.locationText}),c.jsx("td",{className:"px-4 py-3",children:y.totalAmount}),c.jsx("td",{className:"px-4 py-3",children:y.userName}),c.jsx("td",{className:"px-4 py-3",children:y.generatedAt?new Date(y.generatedAt).toLocaleString():""}),c.jsx("td",{className:"sticky right-0 z-10 px-4 py-3 bg-white/90 dark:bg-neutral-900/95",children:y.fileEntries.length?c.jsx("div",{className:"flex flex-col gap-2",children:y.fileEntries.map(g=>{const m=HU(g.url),v=WU(m),k=g.type==="pdf"?"proposal.pdf":"proposal.pptx",S=v||k;return c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsx("span",{className:"text-[11px] uppercase tracking-wide text-black/50 dark:text-white/60",children:g.type}),c.jsx(te,{asChild:!0,size:"sm",variant:"ghost",className:"rounded-xl",children:c.jsxs("a",{href:m,target:"_blank",rel:"noopener noreferrer",children:[c.jsx(no,{size:14,className:"mr-1"}),"Open"]})}),c.jsx(te,{size:"sm",variant:"secondary",className:"rounded-xl",children:c.jsxs("span",{role:"link",tabIndex:0,onClick:C=>{C.preventDefault(),h_(m,S)},onKeyDown:C=>{(C.key==="Enter"||C.key===" ")&&(C.preventDefault(),h_(m,S))},className:"inline-flex items-center",children:[c.jsx(ca,{size:14,className:"mr-1"}),"Download"]})})]},`${g.type}-${g.url}`)})}):c.jsx("span",{className:"text-xs text-black/50 dark:text-white/55",children:""})})]},y.id))})]})})}),x.length?null:c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No matching proposals."})]}):c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No proposals yet."})})]})}function HU(t){return t?t.startsWith("http")?t:`${tc.API_BASE_URL}${t}`:""}function WU(t){if(!t)return"";try{const n=new URL(t,window.location.href).pathname.split("/").filter(Boolean);return n.length?decodeURIComponent(n[n.length-1]):""}catch{const n=t.split("?")[0].split("#")[0].split("/").filter(Boolean);return n.length?decodeURIComponent(n[n.length-1]):""}}async function h_(t,e){const s=await(await fetch(t)).blob(),r=document.createElement("a");r.href=URL.createObjectURL(s),r.download=e,document.body.appendChild(r),r.click(),r.remove(),setTimeout(()=>URL.revokeObjectURL(r.href),1e3)}function VU(){const[t,e]=b.useState("generate");return c.jsx("div",{className:"h-full min-h-0 flex flex-col",children:c.jsxs("div",{className:"flex-1 min-h-0 flex flex-col gap-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(te,{variant:t==="generate"?"default":"ghost",onClick:()=>e("generate"),className:"rounded-2xl",children:"Generate"}),c.jsx(te,{variant:t==="history"?"default":"ghost",onClick:()=>e("history"),className:"rounded-2xl",children:"History"})]}),c.jsxs("div",{className:"flex-1 min-h-0",children:[c.jsx("div",{className:t==="generate"?"h-full":"hidden","aria-hidden":t!=="generate",children:c.jsx(DU,{})}),c.jsx("div",{className:t==="history"?"h-full":"hidden","aria-hidden":t!=="history",children:c.jsx(BU,{})})]})]})})}function MT(t){return t?typeof t=="string"?t:t.name||t.id||t.value||"":""}function IT(t){return t?typeof t=="string"?t:t.name||t.value||t.permission||"":""}function dg(t,e){if(!t||!e)return!0;for(const n of t)if(!e.has(n))return!1;return!0}function qU(t){const e=new Map;return(t||[]).forEach(n=>{const s=MT(n);if(!s)return;const r=(n.permissions||n.permission_list||n.permissionList||[]).map(IT).filter(Boolean);e.set(s,new Set(r))}),e}function KU(t){const e=new Map;return(t||[]).forEach(n=>{const s=n.name||n.id;if(!s)return;const r=(n.permission_sets||n.permissionSets||n.permission_set_names||[]).map(MT).filter(Boolean);e.set(s,new Set(r))}),e}function GU(t){const e=new Map;return(t||[]).forEach(n=>{const s=n.name||n.id;if(!s)return;const r=(n.permissions||[]).map(IT).filter(Boolean);e.set(s,new Set(r))}),e}function YU({q:t,setQ:e,openNewUserModal:n,usersQuery:s,users:r,user:i,selectUser:o,setConfirmDelete:a,companyLookup:l,userCompanyFilter:u,setUserCompanyFilter:d,userProfileFilter:h,setUserProfileFilter:f,companyFilterOptions:p,profileFilterOptions:w}){const x=b.useMemo(()=>[{value:"",label:"All companies"},...p.map(m=>({...m}))],[p]),y=b.useMemo(()=>[{value:"",label:"All profiles"},...w.map(m=>({...m}))],[w]),g=c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[c.jsx(Yt,{children:"Users"}),c.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-end",children:[c.jsx(go,{value:t,onChange:m=>e(m.target.value),className:"w-full sm:w-[220px]"}),c.jsx(te,{variant:"secondary",className:"rounded-2xl self-start sm:self-auto",onClick:n,children:"Add user"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[c.jsx(ot,{value:u,options:x,onChange:d}),c.jsx(ot,{value:h,options:y,onChange:f})]})]});return c.jsxs(vt,{className:"h-full min-h-0 flex flex-col",children:[c.jsx(Bt,{className:"hidden md:block space-y-2",children:g}),c.jsxs(Ut,{className:"flex-1 min-h-0 overflow-y-auto p-0",children:[c.jsx("div",{className:"space-y-2 p-5 pb-3 md:hidden",children:g}),c.jsx("div",{className:"space-y-4 p-5 pt-1",children:s.isLoading?c.jsx(Ye,{text:"Loading",className:"text-sm text-black/60 dark:text-white/65"}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:r.map(m=>{var P,D,M,I;const v=Array.isArray(m.profiles)?m.profiles.map(L=>(L==null?void 0:L.display_name)||(L==null?void 0:L.name)||L).filter(Boolean):[((P=m.profiles)==null?void 0:P.display_name)||((D=m.profiles)==null?void 0:D.name)||m.profile||m.profile_name].filter(Boolean),k=v.length?v.length>2?`${v[0]}, +${v.length-1}`:v.join(", "):"",S=!!(m.id&&(i!=null&&i.id)&&m.id===i.id||m.user_id&&(i!=null&&i.user_id)&&m.user_id===i.user_id||m.email&&(i!=null&&i.email)&&m.email===i.email),C=m.is_active??m.isActive??m.active,_=typeof C=="boolean",j=_?C:!0,N=j?"Deactivate":"Reactivate";return c.jsxs(Dt,{className:"p-4 space-y-2",children:[c.jsxs("div",{className:"flex items-start justify-between gap-2",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsx("div",{className:"text-base font-semibold",children:m.name||""}),_&&!j?c.jsx("span",{className:"rounded-full bg-red-100 px-2 py-0.5 text-xs font-semibold text-red-700 dark:bg-red-500/20 dark:text-red-200",children:"Inactive"}):null]}),c.jsx("div",{className:"text-sm text-black/55 dark:text-white/60",children:m.email})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Tn,{onClick:()=>o(m),title:"Edit user","aria-label":"Edit user",children:c.jsx(fd,{size:16})}),c.jsx(Tn,{variant:"ghost",onClick:()=>a({open:!0,type:"user",payload:{id:m.id||m.user_id,isActive:j},label:`${N} user "${m.email}"?`}),disabled:S,title:S?"You cannot deactivate yourself":`${N} user`,"aria-label":`${N} user`,className:j?void 0:"text-emerald-600 hover:text-emerald-700 dark:text-emerald-300",children:j?c.jsx(zM,{size:16}):c.jsx(FM,{size:16})})]})]}),c.jsxs("div",{className:"text-sm text-black/55 dark:text-white/60",children:["Profiles: ",c.jsx("span",{className:"font-semibold",children:k})]}),c.jsxs("div",{className:"text-sm text-black/55 dark:text-white/60",children:["Company:"," ",c.jsx("span",{className:"font-semibold",children:((M=m.company)==null?void 0:M.name)||l.get(((I=m.company)==null?void 0:I.code)||m.company_code||m.company_id)||""})]})]},m.id||m.user_id||m.email)})})})]})]})}function QU({q:t,setQ:e,usersQuery:n,users:s,user:r,companyLookup:i,userCompanyFilter:o,setUserCompanyFilter:a,userProfileFilter:l,setUserProfileFilter:u,companyFilterOptions:d,profileFilterOptions:h,companyList:f,profileOptions:p,profileValues:w,permissionSetList:x,permissionSetValues:y,permissionList:g,permissionsQuery:m,page:v}){const{selectedUser:k,setSelectedUser:S,userForm:C,setUserForm:_,userModalOpen:j,setUserModalOpen:N,userModalLoading:P,setUserModalLoading:D,userModalMode:M,setUserModalMode:I,userProfilesOpen:L,setUserProfilesOpen:R,userPermissionSetsOpen:$,setUserPermissionSetsOpen:U,userPermissionsOpen:E,setUserPermissionsOpen:T,savingUser:z,setPermissionsMessage:q,selectUser:W,openNewUserModal:he,saveUser:ee,deleteUser:B,selectedUserProfiles:Q,selectedUserPermissionSets:de,selectedUserPermissions:J,selectedUserPermissionSet:ve,customUserPermissions:Ae,toggleUserPermission:me,selectAllUserPermissions:fe,clearUserPermissions:Ie,toggleUserProfile:X,selectAllUserProfiles:pe,clearUserProfiles:re,toggleUserPermissionSet:K,selectAllUserPermissionSets:G,clearUserPermissionSets:ae}=XU({permissionList:g,profileValues:w,permissionSetValues:y,profileOptions:p,permissionSetList:x}),[Y,F]=b.useState({open:!1,type:"",payload:null,label:""}),xe=!!(k&&(k.id&&(r!=null&&r.id)&&k.id===(r==null?void 0:r.id)||k.user_id&&(r!=null&&r.user_id)&&k.user_id===(r==null?void 0:r.user_id)||k.email&&(r!=null&&r.email)&&k.email===(r==null?void 0:r.email)));b.useEffect(()=>{S(null)},[v,S]);async function Se(){if(!(!Y.open||!Y.payload))try{const je=Y.payload,Le=(je==null?void 0:je.id)??je;if(!Le||r!=null&&r.id&&Le===r.id||r!=null&&r.user_id&&Le===r.user_id)return;await B(je)}finally{F({open:!1,type:"",payload:null,label:""})}}return c.jsxs(c.Fragment,{children:[c.jsx(YU,{q:t,setQ:e,openNewUserModal:he,usersQuery:n,users:s,user:r,selectUser:W,setConfirmDelete:F,companyLookup:i,userCompanyFilter:o,setUserCompanyFilter:a,userProfileFilter:l,setUserProfileFilter:u,companyFilterOptions:d,profileFilterOptions:h}),c.jsx(JU,{open:j,onClose:()=>{N(!1),S(null),q(""),D(!1),I("edit"),R(!1),U(!1),T(!1)},userModalLoading:P,userModalMode:M,selectedUser:k,userForm:C,setUserForm:_,companyList:f,profileOptions:p,profileValues:w,userProfilesOpen:L,setUserProfilesOpen:R,selectAllUserProfiles:pe,clearUserProfiles:re,selectedUserProfiles:Q,toggleUserProfile:X,permissionSetList:x,permissionSetValues:y,userPermissionSetsOpen:$,setUserPermissionSetsOpen:U,selectAllUserPermissionSets:G,clearUserPermissionSets:ae,selectedUserPermissionSets:de,toggleUserPermissionSet:K,userPermissionsOpen:E,setUserPermissionsOpen:T,selectedUserPermissions:J,permissionList:g,permissionsQuery:m,selectedUserPermissionSet:ve,toggleUserPermission:me,selectAllUserPermissions:fe,clearUserPermissions:Ie,customUserPermissions:Ae,isSelfUser:xe,setConfirmDelete:F,saveUser:ee,savingUser:z}),c.jsx(_d,{open:Y.open,message:Y.label,onClose:()=>F({open:!1,type:"",payload:null,label:""}),onConfirm:Se})]})}function XU({permissionList:t,profileValues:e,permissionSetValues:n,profileOptions:s,permissionSetList:r}){const i=Rr(),[o,a]=b.useState(null),[l,u]=b.useState({name:"",email:"",profiles:[],permissionSets:[],company:"",is_active:!0,permissionsText:""}),[d,h]=b.useState(!1),[f,p]=b.useState(!1),[w,x]=b.useState("edit"),[y,g]=b.useState(!1),[m,v]=b.useState(!1),[k,S]=b.useState(!1),[C,_]=b.useState(!1),[j,N]=b.useState(""),P=b.useMemo(()=>new Set(l.profiles||[]),[l.profiles]),D=b.useMemo(()=>new Set(l.permissionSets||[]),[l.permissionSets]),M=b.useMemo(()=>vn(l.permissionsText),[l.permissionsText]),I=b.useMemo(()=>new Set(M),[M]),L=b.useMemo(()=>{if(!t.length)return M;const X=new Set(t);return M.filter(pe=>!X.has(pe))},[t,M]),R=b.useMemo(()=>qU(r),[r]),$=b.useMemo(()=>KU(s),[s]),U=b.useMemo(()=>GU(s),[s]);function E(X,pe,re){return(X||[]).filter(K=>{const G=pe.get(K);return G?dg(G,re):!0})}function T(X,pe,re){const K=new Set(re||[]);return(X||[]).filter(G=>{const ae=U.get(G),Y=$.get(G);if(!ae&&!Y)return!0;if(Y&&!dg(Y,K))return!1;const F=new Set;return ae&&ae.forEach(xe=>F.add(xe)),Y&&Y.forEach(xe=>{const Se=R.get(xe);Se&&Se.forEach(je=>F.add(je))}),dg(F,pe)})}function z(X,pe){const re=new Set(X.profiles||[]),K=new Set(X.permissionSets||[]),G=new Set(vn(X.permissionsText));return re.forEach(ae=>{const Y=$.get(ae);Y&&Y.forEach(xe=>K.add(xe));const F=U.get(ae);F&&F.forEach(xe=>G.add(xe)),Y&&Y.forEach(xe=>{const Se=R.get(xe);Se&&Se.forEach(je=>G.add(je))})}),{...X,permissionSets:Array.from(K),permissionsText:Array.from(G).join(`
`)}}async function q(X){var G,ae;a(X),N(""),x("edit"),h(!0),p(!0),g(!1),v(!1),S(!1);const pe=Array.isArray(X.profiles)?X.profiles.map(Y=>(Y==null?void 0:Y.name)||(Y==null?void 0:Y.id)||Y).filter(Boolean):[((G=X.profiles)==null?void 0:G.name)||X.profile||X.profile_name].filter(Boolean),re=(X.permission_sets||X.permissionSets||X.permission_set_names||[]).map(Y=>typeof Y=="string"?Y:(Y==null?void 0:Y.name)||(Y==null?void 0:Y.id)).filter(Boolean);u({name:X.name||"",email:X.email||"",profiles:pe,permissionSets:re,company:((ae=X.company)==null?void 0:ae.code)||X.company_code||X.company_id||"",is_active:X.is_active!==!1,permissionsText:""});const K=X.id||X.user_id;if(K)try{const Y=await pB(K),F=(Y==null?void 0:Y.permissions)??Y,xe=Array.isArray(F)?F.map(Se=>typeof Se=="string"?Se:Se==null?void 0:Se.name).filter(Boolean):[];u(Se=>z({...Se,permissionsText:xe.join(`
`)}))}catch{}p(!1)}function W(){a(null),N(""),x("add"),p(!1),g(!1),v(!1),S(!1),u({name:"",email:"",profiles:[],permissionSets:[],company:"",is_active:!0,permissionsText:""}),h(!0)}async function he(){var G,ae;if(w==="edit"&&!o)return;_(!0),N("");const X=(o==null?void 0:o.id)||(o==null?void 0:o.user_id);if(w==="edit"&&!X){_(!1),N("Missing user id");return}const pe=vn(l.permissionsText),re=l.profiles||[],K={name:l.name,is_active:!!l.is_active,profile_names:re,profile_name:re[0]||null,permission_sets:l.permissionSets||[],company_code:l.company||null,...w==="add"?{email:l.email}:{}};try{if(w==="add"){const Y=await mB(K),F=(Y==null?void 0:Y.id)||(Y==null?void 0:Y.user_id)||((G=Y==null?void 0:Y.user)==null?void 0:G.id)||((ae=Y==null?void 0:Y.user)==null?void 0:ae.user_id);F!=null&&await Rk(F,pe),N("User created")}else await gB(X,K),await Rk(X,pe),N("User updated");i.invalidateQueries({queryKey:["admin","users"]}),h(!1),a(null)}catch(Y){N((Y==null?void 0:Y.message)||"Failed to save user")}finally{_(!1)}}async function ee(X){const pe=(X==null?void 0:X.id)??X;if(pe)try{const re=(X==null?void 0:X.isActive)??(X==null?void 0:X.is_active);(typeof re=="boolean"?re:!0)?await xB(pe):await yB(pe),i.invalidateQueries({queryKey:["admin","users"]}),h(!1),a(null)}catch{}}function B(X){u(pe=>{const re=new Set(vn(pe.permissionsText)),K=re.has(X);K?re.delete(X):re.add(X);let G=pe.permissionSets||[],ae=pe.profiles||[];return K&&(G=E(G,R,re),ae=T(ae,re,G)),{...pe,permissionsText:Array.from(re).join(`
`),permissionSets:G,profiles:ae}})}function Q(){const X=new Set([...M,...t]);u(pe=>({...pe,permissionsText:Array.from(X).join(`
`)}))}function de(){u(X=>({...X,permissionsText:"",permissionSets:[],profiles:[]}))}function J(X){u(pe=>{const re=new Set(pe.profiles||[]),K=new Set(pe.permissionSets||[]),G=new Set(vn(pe.permissionsText));if(re.has(X)){re.delete(X);const xe=E(Array.from(K),R,G),Se=T(Array.from(re),G,xe);return{...pe,profiles:Se,permissionSets:xe,permissionsText:Array.from(G).join(`
`)}}re.add(X);const Y=$.get(X);Y&&Y.forEach(xe=>K.add(xe));const F=U.get(X);return F&&F.forEach(xe=>G.add(xe)),Y&&Y.forEach(xe=>{const Se=R.get(xe);Se&&Se.forEach(je=>G.add(je))}),{...pe,profiles:Array.from(re),permissionSets:Array.from(K),permissionsText:Array.from(G).join(`
`)}})}function ve(){u(X=>{const pe=new Set([...X.profiles||[],...e]),re=new Set(X.permissionSets||[]),K=new Set(vn(X.permissionsText));return pe.forEach(G=>{const ae=$.get(G);ae&&ae.forEach(F=>re.add(F));const Y=U.get(G);Y&&Y.forEach(F=>K.add(F)),ae&&ae.forEach(F=>{const xe=R.get(F);xe&&xe.forEach(Se=>K.add(Se))})}),{...X,profiles:Array.from(pe),permissionSets:Array.from(re),permissionsText:Array.from(K).join(`
`)}})}function Ae(){u(X=>({...X,profiles:[]}))}function me(X){u(pe=>{const re=new Set(pe.permissionSets||[]),K=new Set(vn(pe.permissionsText));if(re.has(X)){re.delete(X);const Y=T(pe.profiles||[],K,Array.from(re));return{...pe,permissionSets:Array.from(re),profiles:Y,permissionsText:Array.from(K).join(`
`)}}re.add(X);const ae=R.get(X);return ae&&ae.forEach(Y=>K.add(Y)),{...pe,permissionSets:Array.from(re),permissionsText:Array.from(K).join(`
`)}})}function fe(){u(X=>{const pe=new Set([...X.permissionSets||[],...n]),re=new Set(vn(X.permissionsText));return pe.forEach(K=>{const G=R.get(K);G&&G.forEach(ae=>re.add(ae))}),{...X,permissionSets:Array.from(pe),permissionsText:Array.from(re).join(`
`)}})}function Ie(){u(X=>{const pe=new Set(vn(X.permissionsText)),re=T(X.profiles||[],pe,[]);return{...X,permissionSets:[],profiles:re,permissionsText:Array.from(pe).join(`
`)}})}return{selectedUser:o,setSelectedUser:a,userForm:l,setUserForm:u,userModalOpen:d,setUserModalOpen:h,userModalLoading:f,setUserModalLoading:p,userModalMode:w,setUserModalMode:x,userProfilesOpen:y,setUserProfilesOpen:g,userPermissionSetsOpen:m,setUserPermissionSetsOpen:v,userPermissionsOpen:k,setUserPermissionsOpen:S,savingUser:C,permissionsMessage:j,setPermissionsMessage:N,selectUser:q,openNewUserModal:W,saveUser:he,selectedUserProfiles:P,selectedUserPermissionSets:D,selectedUserPermissions:M,selectedUserPermissionSet:I,customUserPermissions:L,toggleUserPermission:B,selectAllUserPermissions:Q,clearUserPermissions:de,toggleUserProfile:J,selectAllUserProfiles:ve,clearUserProfiles:Ae,toggleUserPermissionSet:me,selectAllUserPermissionSets:fe,clearUserPermissionSets:Ie,deleteUser:ee}}function JU({open:t,onClose:e,userModalLoading:n,userModalMode:s,selectedUser:r,userForm:i,setUserForm:o,companyList:a,profileOptions:l,profileValues:u,userProfilesOpen:d,setUserProfilesOpen:h,selectAllUserProfiles:f,clearUserProfiles:p,selectedUserProfiles:w,toggleUserProfile:x,permissionSetList:y,permissionSetValues:g,userPermissionSetsOpen:m,setUserPermissionSetsOpen:v,selectAllUserPermissionSets:k,clearUserPermissionSets:S,selectedUserPermissionSets:C,toggleUserPermissionSet:_,userPermissionsOpen:j,setUserPermissionsOpen:N,selectedUserPermissions:P,permissionList:D,permissionsQuery:M,selectedUserPermissionSet:I,toggleUserPermission:L,selectAllUserPermissions:R,clearUserPermissions:$,customUserPermissions:U,isSelfUser:E,setConfirmDelete:T,saveUser:z,savingUser:q}){const W=b.useMemo(()=>{const ee=a.map(B=>{const Q=B.code||B.id||"";return{value:Q,label:B.name||B.code||Q||""}}).filter(B=>B.value);return[{value:"",label:"Select company"},...ee]},[a]),he=b.useMemo(()=>[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],[]);return c.jsx(ws,{open:t,onClose:e,title:s==="add"?"Add user":"Edit user",maxWidth:"560px",children:n?c.jsx(Ye,{text:"Loading user",className:"text-sm text-black/60 dark:text-white/65"}):s==="add"||r?c.jsxs("div",{className:"space-y-3",children:[s==="edit"?c.jsxs("div",{className:"text-xs text-black/50 dark:text-white/55",children:["Editing ",r==null?void 0:r.email]}):null,c.jsx(_e,{label:"Name",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:i.name,onChange:ee=>o(B=>({...B,name:ee.target.value}))})}),c.jsx(_e,{label:"Email",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:i.email,onChange:ee=>o(B=>({...B,email:ee.target.value})),type:"email",disabled:s==="edit"})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsx(_e,{label:"Company",children:c.jsx(ot,{value:i.company||"",options:W,onChange:ee=>o(B=>({...B,company:ee}))})}),c.jsx(_e,{label:"Status",children:c.jsx(ot,{value:i.is_active?"active":"inactive",options:he,onChange:ee=>o(B=>({...B,is_active:ee==="active"}))})})]}),c.jsx(_e,{label:"Profiles",children:c.jsxs(Dt,{className:"p-4",children:[c.jsxs("button",{type:"button",className:"flex w-full items-center justify-between gap-3 text-left",onClick:()=>h(ee=>!ee),"aria-expanded":d,children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Profiles"}),c.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:pl(i.profiles.length,"profile")})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-black/50 dark:text-white/55",children:[c.jsx("span",{children:d?"Hide":"Edit"}),c.jsx(Zn,{size:16,className:Ee("transition-transform",d&&"rotate-180")})]})]}),d?c.jsxs("div",{className:"mt-0 space-y-0",children:[c.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx(te,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:f,disabled:!u.length,children:"Select all"}),c.jsx(te,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:p,disabled:!i.profiles.length,children:"Clear"})]})}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-[168px] overflow-y-auto p-1",children:[l.map(ee=>{const B=ee.name||ee.id;if(!B)return null;const Q=w.has(B);return c.jsxs("button",{type:"button",onClick:()=>x(B),className:Ee("mmg-profile-option flex items-center justify-between gap-3 rounded-xl px-3 py-1.5 text-xs ring-1 transition-colors",Q?"bg-black/5 dark:bg-white/10 ring-black/20 dark:ring-white/20 text-black dark:text-white":"bg-white/60 dark:bg-white/5 ring-black/5 dark:ring-white/10 text-black/70 dark:text-white/70 hover:bg-black/5 dark:hover:bg-white/10"),children:[c.jsx("span",{className:"min-w-0 truncate",children:ee.display_name||ee.name||B}),c.jsx("span",{className:Ee("h-4 w-4 rounded-full flex items-center justify-center transition-colors",Q?"bg-black text-white dark:bg-white dark:text-black shadow-soft":"bg-black/5 dark:bg-white/10 text-black/40 dark:text-white/40"),children:c.jsx(Zo,{size:14,className:Q?"opacity-100":"opacity-0"})})]},B)}),l.length?null:c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No profiles available."})]})]}):null]})}),c.jsx(_e,{label:"Permission Sets",children:c.jsxs(Dt,{className:"p-4",children:[c.jsxs("button",{type:"button",className:"flex w-full items-center justify-between gap-3 text-left",onClick:()=>v(ee=>!ee),"aria-expanded":m,children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Permission sets"}),c.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:pl(i.permissionSets.length,"permission set","permission sets")})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-black/50 dark:text-white/55",children:[c.jsx("span",{children:m?"Hide":"Edit"}),c.jsx(Zn,{size:16,className:Ee("transition-transform",m&&"rotate-180")})]})]}),m?c.jsxs("div",{className:"mt-0 space-y-0",children:[c.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx(te,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:k,disabled:!g.length,children:"Select all"}),c.jsx(te,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:S,disabled:!i.permissionSets.length,children:"Clear"})]})}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-[168px] overflow-y-auto p-1",children:[y.map(ee=>{const B=ee.name||ee.id;if(!B)return null;const Q=C.has(B);return c.jsxs("button",{type:"button",onClick:()=>_(B),className:Ee("flex items-center justify-between gap-3 rounded-xl px-3 py-1.5 text-xs ring-1 transition-colors",Q?"bg-black/5 dark:bg-white/10 ring-black/20 dark:ring-white/20 text-black dark:text-white":"bg-white/60 dark:bg-white/5 ring-black/5 dark:ring-white/10 text-black/70 dark:text-white/70 hover:bg-black/5 dark:hover:bg-white/10"),children:[c.jsx("span",{className:"min-w-0 truncate",children:ee.display_name||ee.name||B}),c.jsx("span",{className:Ee("h-4 w-4 rounded-full flex items-center justify-center transition-colors",Q?"bg-black text-white dark:bg-white dark:text-black shadow-soft":"bg-black/5 dark:bg-white/10 text-black/40 dark:text-white/40"),children:c.jsx(Zo,{size:14,className:Q?"opacity-100":"opacity-0"})})]},B)}),y.length?null:c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No permission sets available."})]})]}):null]})}),c.jsx(_e,{label:"Permissions",children:c.jsxs(Dt,{className:"p-4",children:[c.jsxs("button",{type:"button",className:"flex w-full items-center justify-between gap-3 text-left",onClick:()=>N(ee=>!ee),"aria-expanded":j,children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Permissions"}),c.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:pl(P.length,"permission")})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-black/50 dark:text-white/55",children:[c.jsx("span",{children:j?"Hide":"Edit"}),c.jsx(Zn,{size:16,className:Ee("transition-transform",j&&"rotate-180")})]})]}),j?c.jsxs("div",{className:"mt-0 space-y-0",children:[c.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx(te,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:R,disabled:!D.length,children:"Select all"}),c.jsx(te,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:$,disabled:!P.length,children:"Clear"})]})}),M.isLoading?c.jsx(Ye,{text:"Loading permissions",className:"text-sm text-black/60 dark:text-white/65"}):D.length?c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-[168px] overflow-y-auto p-1",children:D.map(ee=>{const B=I.has(ee);return c.jsxs("button",{type:"button",onClick:()=>L(ee),className:Ee("flex items-center justify-between gap-3 rounded-xl px-3 py-1.5 text-xs ring-1 transition-colors",B?"bg-black/5 dark:bg-white/10 ring-black/20 dark:ring-white/20 text-black dark:text-white":"bg-white/60 dark:bg-white/5 ring-black/5 dark:ring-white/10 text-black/70 dark:text-white/70 hover:bg-black/5 dark:hover:bg-white/10"),children:[c.jsx("span",{className:"min-w-0 truncate",children:ee}),c.jsx("span",{className:Ee("h-4 w-4 rounded-full flex items-center justify-center transition-colors",B?"bg-black text-white dark:bg-white dark:text-black shadow-soft":"bg-black/5 dark:bg-white/10 text-black/40 dark:text-white/40"),children:c.jsx(Zo,{size:14,className:B?"opacity-100":"opacity-0"})})]},ee)})}):c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No permissions available."}),U.length?c.jsxs("div",{className:"rounded-2xl bg-white/50 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 p-3",children:[c.jsx("div",{className:"text-xs font-semibold text-black/60 dark:text-white/65",children:"Custom permissions"}),c.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:U.map(ee=>c.jsxs("button",{type:"button",onClick:()=>L(ee),className:"flex items-center gap-2 rounded-full bg-black/5 dark:bg-white/10 px-3 py-1 text-xs text-black/70 dark:text-white/70 hover:bg-black/8 dark:hover:bg-white/15",title:"Remove permission",children:[c.jsx("span",{className:"max-w-[220px] truncate",children:ee}),c.jsx("span",{className:"text-black/40 dark:text-white/40",children:"x"})]},ee))})]}):null]}):null]})}),c.jsxs("div",{className:"flex gap-2 justify-end",children:[s==="edit"?c.jsx(te,{variant:"ghost",className:Ee("rounded-2xl",typeof((r==null?void 0:r.is_active)??(r==null?void 0:r.isActive)??(r==null?void 0:r.active))=="boolean"&&!((r==null?void 0:r.is_active)??(r==null?void 0:r.isActive)??(r==null?void 0:r.active))?"text-emerald-600 hover:text-emerald-700 dark:text-emerald-300":"text-red-600 hover:text-red-700 dark:text-red-300"),onClick:()=>T({open:!0,type:"user",payload:{id:(r==null?void 0:r.id)||(r==null?void 0:r.user_id),isActive:typeof((r==null?void 0:r.is_active)??(r==null?void 0:r.isActive)??(r==null?void 0:r.active))=="boolean"?(r==null?void 0:r.is_active)??(r==null?void 0:r.isActive)??(r==null?void 0:r.active):!0},label:`${typeof((r==null?void 0:r.is_active)??(r==null?void 0:r.isActive)??(r==null?void 0:r.active))=="boolean"?(r==null?void 0:r.is_active)??(r==null?void 0:r.isActive)??(r==null?void 0:r.active)?"Deactivate":"Reactivate":"Deactivate"} user "${r==null?void 0:r.email}"?`}),disabled:E,children:typeof((r==null?void 0:r.is_active)??(r==null?void 0:r.isActive)??(r==null?void 0:r.active))=="boolean"?(r==null?void 0:r.is_active)??(r==null?void 0:r.isActive)??(r==null?void 0:r.active)?"Deactivate":"Reactivate":"Deactivate"}):c.jsx("span",{}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(te,{variant:"ghost",className:"rounded-2xl",onClick:e,children:"Cancel"}),c.jsx(te,{className:"rounded-2xl",onClick:z,disabled:q,children:q?c.jsx(Ye,{text:"Saving"}):"Save"})]})]})]}):c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"Select a user to edit."})})}function ZU({companySearch:t,setCompanySearch:e,openCompanyModal:n,companiesQuery:s,filteredCompanyList:r,companyLookup:i,setConfirmDelete:o}){const a=c.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[c.jsx(Yt,{children:"Companies"}),c.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-end",children:[c.jsx(go,{value:t,onChange:l=>e(l.target.value),className:"w-full sm:w-[220px]"}),c.jsx(te,{variant:"secondary",className:"rounded-2xl self-start sm:self-auto",onClick:()=>n(null),children:"Add company"})]})]});return c.jsxs(vt,{className:"h-full min-h-0 flex flex-col",children:[c.jsx(Bt,{className:"hidden md:block space-y-2",children:a}),c.jsxs(Ut,{className:"flex-1 min-h-0 overflow-y-auto p-0",children:[c.jsx("div",{className:"space-y-2 p-5 pb-3 md:hidden",children:a}),c.jsx("div",{className:"space-y-4 p-5 pt-1",children:s.isLoading?c.jsx(Ye,{text:"Loading",className:"text-sm text-black/60 dark:text-white/65"}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.map(l=>c.jsxs(Dt,{className:"p-4 space-y-2",children:[c.jsxs("div",{className:"flex items-start justify-between gap-2",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-base font-semibold",children:l.name||l.code}),c.jsx("div",{className:"text-sm text-black/55 dark:text-white/60",children:l.code||""})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Tn,{onClick:()=>n(l),title:"Edit company","aria-label":"Edit company",children:c.jsx(fd,{size:16})}),c.jsx(Tn,{variant:"ghost",onClick:()=>o({open:!0,type:"company",payload:l.code||l.id,label:`Delete company "${l.name||l.code}"?`}),title:"Delete company","aria-label":"Delete company",children:c.jsx(ea,{size:16})})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-2 text-sm text-black/55 dark:text-white/60",children:[l.country?c.jsx("span",{children:l.country}):null,l.currency?c.jsxs("span",{children:[" ",l.currency]}):null,l.timezone?c.jsxs("span",{children:[" ",l.timezone]}):null]}),c.jsxs("div",{className:"flex flex-wrap gap-2 text-sm text-black/55 dark:text-white/60",children:[c.jsxs("span",{children:["Parent: ",i.get(l.parent_id)||""]}),c.jsxs("span",{children:[" ",l.isgroup?"Group":"Company"]}),c.jsxs("span",{children:[" ",l.is_active===!1?"Inactive":"Active"]})]})]},l.code||l.id)),r.length?null:c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:t.trim()?"No matching companies.":"No companies available."})]})})]})]})}function eH({companySearch:t,setCompanySearch:e,companiesQuery:n,filteredCompanyList:s,companyLookup:r,companyList:i}){const{companyForm:o,setCompanyForm:a,editingCompany:l,setEditingCompany:u,companyModalOpen:d,setCompanyModalOpen:h,savingCompany:f,openCompanyModal:p,saveCompany:w,deleteCompany:x}=tH(),[y,g]=b.useState({open:!1,type:"",payload:null,label:""});async function m(){if(!(!y.open||!y.payload))try{await x(y.payload)}finally{g({open:!1,type:"",payload:null,label:""})}}return c.jsxs(c.Fragment,{children:[c.jsx(ZU,{companySearch:t,setCompanySearch:e,openCompanyModal:p,companiesQuery:n,filteredCompanyList:s,companyLookup:r,setConfirmDelete:g}),c.jsx(nH,{open:d,onClose:()=>{h(!1),u(null),a({code:"",name:"",parent_id:"",country:"",currency:"",timezone:"",isgroup:!1,is_active:!0})},editingCompany:l,companyForm:o,setCompanyForm:a,companyList:i,setConfirmDelete:g,saveCompany:w,savingCompany:f}),c.jsx(_d,{open:y.open,message:y.label,onClose:()=>g({open:!1,type:"",payload:null,label:""}),onConfirm:m})]})}function tH(){const t=Rr(),[e,n]=b.useState({code:"",name:"",parent_id:"",country:"",currency:"",timezone:"",isgroup:!1,is_active:!0}),[s,r]=b.useState(null),[i,o]=b.useState(!1),[a,l]=b.useState(!1);function u(f){f?(r(f.code||f.id),n({code:f.code||"",name:f.name||"",parent_id:f.parent_id??"",country:f.country??"",currency:f.currency??"",timezone:f.timezone??"",isgroup:!!f.isgroup,is_active:f.is_active!==!1})):(r(null),n({code:"",name:"",parent_id:"",country:"",currency:"",timezone:"",isgroup:!1,is_active:!0})),o(!0)}async function d(){if(!e.code.trim()||!e.name.trim())return;l(!0);const f={code:e.code.trim(),name:e.name.trim(),parent_id:e.parent_id||null,country:e.country||null,currency:e.currency||null,timezone:e.timezone||null,isgroup:!!e.isgroup,is_active:!!e.is_active};try{s?await CB(s,f):await jB(f),t.invalidateQueries({queryKey:["admin","companies"]}),o(!1),r(null)}catch{}finally{l(!1)}}async function h(f){if(f)try{await NB(f),t.invalidateQueries({queryKey:["admin","companies"]}),o(!1),r(null)}catch{}}return{companyForm:e,setCompanyForm:n,editingCompany:s,setEditingCompany:r,companyModalOpen:i,setCompanyModalOpen:o,savingCompany:a,openCompanyModal:u,saveCompany:d,deleteCompany:h}}function nH({open:t,onClose:e,editingCompany:n,companyForm:s,setCompanyForm:r,companyList:i,setConfirmDelete:o,saveCompany:a,savingCompany:l}){const u=[{value:"",label:"None"},...i.filter(f=>(f.code||f.id)!==s.code).map(f=>{const p=f.code||f.id||"";return{value:p,label:f.name||f.code||p||""}}).filter(f=>f.value)],d=[{value:"company",label:"Company"},{value:"group",label:"Group"}],h=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}];return c.jsx(ws,{open:t,onClose:e,title:n?`Edit company: ${s.name||s.code}`:"Add company",maxWidth:"640px",children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsx(_e,{label:"Code",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:s.code,onChange:f=>r(p=>({...p,code:f.target.value})),placeholder:"MMG-001",disabled:!!n})}),c.jsx(_e,{label:"Name",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:s.name,onChange:f=>r(p=>({...p,name:f.target.value})),placeholder:"MMG Global"})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsx(_e,{label:"Parent company",children:c.jsx(ot,{value:s.parent_id||"",options:u,onChange:f=>r(p=>({...p,parent_id:f}))})}),c.jsx(_e,{label:"Country",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:s.country,onChange:f=>r(p=>({...p,country:f.target.value})),placeholder:"US"})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsx(_e,{label:"Currency",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:s.currency,onChange:f=>r(p=>({...p,currency:f.target.value})),placeholder:"USD"})}),c.jsx(_e,{label:"Timezone",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:s.timezone,onChange:f=>r(p=>({...p,timezone:f.target.value})),placeholder:"America/New_York"})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsx(_e,{label:"Type",children:c.jsx(ot,{value:s.isgroup?"group":"company",options:d,onChange:f=>r(p=>({...p,isgroup:f==="group"}))})}),c.jsx(_e,{label:"Status",children:c.jsx(ot,{value:s.is_active?"active":"inactive",options:h,onChange:f=>r(p=>({...p,is_active:f==="active"}))})})]}),c.jsxs("div",{className:"flex items-center justify-between gap-2 pt-1",children:[n?c.jsx(te,{variant:"ghost",className:"rounded-2xl text-red-600 hover:text-red-700 dark:text-red-300",onClick:()=>o({open:!0,type:"company",payload:n,label:`Delete company "${s.name||s.code}"?`}),children:"Delete"}):c.jsx("span",{}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(te,{variant:"ghost",className:"rounded-2xl",onClick:e,children:"Cancel"}),c.jsx(te,{className:"rounded-2xl",onClick:a,disabled:l,children:l?c.jsx(Ye,{text:"Saving"}):"Save"})]})]})]})})}function sH({profileSearch:t,setProfileSearch:e,openProfileModal:n,filteredProfileOptions:s,duplicateProfile:r,setConfirmDelete:i}){const o=c.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[c.jsx(Yt,{children:"Profiles"}),c.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-end",children:[c.jsx(go,{value:t,onChange:a=>e(a.target.value),className:"w-full sm:w-[220px]"}),c.jsx(te,{variant:"secondary",className:"rounded-2xl self-start sm:self-auto",onClick:()=>n(null),children:"Add profile"})]})]});return c.jsxs(vt,{className:"h-full min-h-0 flex flex-col",children:[c.jsx(Bt,{className:"hidden md:block space-y-2",children:o}),c.jsxs(Ut,{className:"flex-1 min-h-0 overflow-y-auto p-0",children:[c.jsx("div",{className:"space-y-2 p-5 pb-3 md:hidden",children:o}),c.jsxs("div",{className:"space-y-4 p-5 pt-1",children:[c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:s.map(a=>c.jsxs(Dt,{className:"p-4 space-y-1",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-base font-semibold",children:a.display_name||a.name}),c.jsx("div",{className:"text-sm text-black/55 dark:text-white/60",children:a.name})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Tn,{onClick:()=>r(a),title:"Duplicate profile","aria-label":"Duplicate profile",children:c.jsx(AC,{size:16})}),a.is_system?c.jsx("span",{className:"text-xs rounded-full px-2 py-0.5 bg-black/5 dark:bg-white/10",children:"System"}):c.jsxs(c.Fragment,{children:[c.jsx(Tn,{onClick:()=>n(a),title:"Edit profile","aria-label":"Edit profile",children:c.jsx(fd,{size:16})}),c.jsx(Tn,{variant:"ghost",onClick:()=>i({open:!0,type:"profile",payload:a.id||a.name,label:`Delete profile "${a.display_name||a.name}"?`}),title:"Delete profile","aria-label":"Delete profile",children:c.jsx(ea,{size:16})})]})]})]}),c.jsxs("div",{className:"text-sm text-black/55 dark:text-white/60",children:[(a.permissions||[]).length," permission",(a.permissions||[]).length===1?"":"s"]}),a.description?c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65 truncate",children:a.description}):null]},a.id||a.name))}),s.length?null:c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:t.trim()?"No matching profiles.":"No profiles available."})]})]})]})}function rH({profileSearch:t,setProfileSearch:e,filteredProfileOptions:n,permissionList:s,permissionSetValues:r,permissionSetList:i,permissionSetsQuery:o,permissionsQuery:a}){const{profileForm:l,setProfileForm:u,editingProfile:d,setEditingProfile:h,profileModalOpen:f,setProfileModalOpen:p,profileIsSystem:w,setProfileIsSystem:x,profilePermissionSetsOpen:y,setProfilePermissionSetsOpen:g,profilePermissionsOpen:m,setProfilePermissionsOpen:v,savingProfile:k,openProfileModal:S,duplicateProfile:C,saveProfile:_,deleteProfile:j,selectedProfilePermissions:N,selectedProfilePermissionSet:P,selectedProfilePermissionSets:D,customProfilePermissions:M,toggleProfilePermission:I,selectAllProfilePermissions:L,clearProfilePermissions:R,toggleProfilePermissionSet:$,selectAllProfilePermissionSets:U,clearProfilePermissionSets:E}=iH({permissionList:s,permissionSetValues:r,permissionSetList:i}),[T,z]=b.useState({open:!1,type:"",payload:null,label:""});async function q(){if(!(!T.open||!T.payload))try{await j(T.payload)}finally{z({open:!1,type:"",payload:null,label:""})}}return c.jsxs(c.Fragment,{children:[c.jsx(sH,{profileSearch:t,setProfileSearch:e,openProfileModal:S,filteredProfileOptions:n,duplicateProfile:C,setConfirmDelete:z}),c.jsx(oH,{open:f,onClose:()=>{p(!1),h(null),u({name:"",display_name:"",description:"",permissionsText:"",permissionSets:[]}),x(!1),g(!1),v(!1)},editingProfile:d,profileForm:l,setProfileForm:u,profileIsSystem:w,profilePermissionSetsOpen:y,setProfilePermissionSetsOpen:g,profilePermissionsOpen:m,setProfilePermissionsOpen:v,permissionSetValues:r,permissionSetsQuery:o,permissionSetList:i,selectedProfilePermissionSets:D,toggleProfilePermissionSet:$,selectAllProfilePermissionSets:U,clearProfilePermissionSets:E,selectedProfilePermissions:N,permissionList:s,permissionsQuery:a,selectedProfilePermissionSet:P,toggleProfilePermission:I,selectAllProfilePermissions:L,clearProfilePermissions:R,customProfilePermissions:M,setConfirmDelete:z,saveProfile:_,savingProfile:k}),c.jsx(_d,{open:T.open,message:T.label,onClose:()=>z({open:!1,type:"",payload:null,label:""}),onConfirm:q})]})}function iH({permissionList:t,permissionSetValues:e,permissionSetList:n}){const s=Rr(),[r,i]=b.useState({name:"",display_name:"",description:"",permissionsText:"",permissionSets:[]}),[o,a]=b.useState(null),[l,u]=b.useState(!1),[d,h]=b.useState(!1),[f,p]=b.useState(!1),[w,x]=b.useState(!1),[y,g]=b.useState(!1),m=b.useMemo(()=>vn(r.permissionsText),[r.permissionsText]),v=b.useMemo(()=>new Set(m),[m]),k=b.useMemo(()=>new Set(r.permissionSets||[]),[r.permissionSets]),S=b.useMemo(()=>{if(!t.length)return m;const E=new Set(t);return m.filter(T=>!E.has(T))},[t,m]),C=b.useMemo(()=>{const E=new Map;return(n||[]).forEach(T=>{const z=T.name||T.id;if(!z)return;const q=(T.permissions||T.permission_list||T.permissionList||[]).map(W=>typeof W=="string"?W:(W==null?void 0:W.name)||(W==null?void 0:W.value)||(W==null?void 0:W.permission)).filter(Boolean);E.set(z,new Set(q))}),E},[n]);function _(E,T){return(E||[]).filter(z=>{const q=C.get(z);if(!q)return!0;for(const W of q)if(!T.has(W))return!1;return!0})}function j(E){h(!!(E!=null&&E.is_system)),!(E!=null&&E.is_system)&&(p(!1),x(!1),E?(a(E.id||E.name),i({name:E.name,display_name:E.display_name||E.name,description:E.description||"",permissionsText:(E.permissions||[]).map(T=>typeof T=="string"?T:T==null?void 0:T.name).filter(Boolean).join(`
`),permissionSets:(E.permission_sets||E.permissionSets||E.permission_set_names||[]).map(T=>typeof T=="string"?T:(T==null?void 0:T.name)||(T==null?void 0:T.id)).filter(Boolean)})):(a(null),i({name:"",display_name:"",description:"",permissionsText:"",permissionSets:[]})),u(!0))}function N(E){if(!E)return;const T=E.name||E.display_name||"profile",z=E.display_name||E.name||T;h(!1),a(null),p(!1),x(!1),i({name:`${T}_new`,display_name:`${z}_new`,description:E.description||"",permissionsText:(E.permissions||[]).map(q=>typeof q=="string"?q:q==null?void 0:q.name).filter(Boolean).join(`
`),permissionSets:(E.permission_sets||E.permissionSets||E.permission_set_names||[]).map(q=>typeof q=="string"?q:(q==null?void 0:q.name)||(q==null?void 0:q.id)).filter(Boolean)}),u(!0)}async function P(){if(r.name.trim()){g(!0);try{const E={name:r.name.trim(),display_name:r.display_name||r.name,description:r.description,permissions:vn(r.permissionsText),permission_sets:r.permissionSets||[]};o?await wB(o,E):await bB(E),s.invalidateQueries({queryKey:["admin","profiles"]}),i({name:"",display_name:"",description:"",permissionsText:"",permissionSets:[]}),a(null),u(!1)}catch{}finally{g(!1)}}}async function D(E){try{await kB(E),s.invalidateQueries({queryKey:["admin","profiles"]}),o===E&&(a(null),i({name:"",display_name:"",description:"",permissionsText:"",permissionSets:[]})),u(!1)}catch{}}function M(E){i(T=>{const z=new Set(vn(T.permissionsText)),q=z.has(E);q?z.delete(E):z.add(E);let W=T.permissionSets||[];return q&&(W=_(W,z)),{...T,permissionsText:Array.from(z).join(`
`),permissionSets:W}})}function I(){const E=new Set([...m,...t]);i(T=>({...T,permissionsText:Array.from(E).join(`
`)}))}function L(){i(E=>({...E,permissionsText:""}))}function R(E){i(T=>{const z=new Set(T.permissionSets||[]),q=new Set(vn(T.permissionsText));if(z.has(E))return z.delete(E),{...T,permissionSets:Array.from(z),permissionsText:Array.from(q).join(`
`)};z.add(E);const he=C.get(E);return he&&he.forEach(ee=>q.add(ee)),{...T,permissionSets:Array.from(z),permissionsText:Array.from(q).join(`
`)}})}function $(){i(E=>{const T=new Set([...E.permissionSets||[],...e]),z=new Set(vn(E.permissionsText));return T.forEach(q=>{const W=C.get(q);W&&W.forEach(he=>z.add(he))}),{...E,permissionSets:Array.from(T),permissionsText:Array.from(z).join(`
`)}})}function U(){i(E=>({...E,permissionSets:[]}))}return{profileForm:r,setProfileForm:i,editingProfile:o,setEditingProfile:a,profileModalOpen:l,setProfileModalOpen:u,profileIsSystem:d,setProfileIsSystem:h,profilePermissionSetsOpen:f,setProfilePermissionSetsOpen:p,profilePermissionsOpen:w,setProfilePermissionsOpen:x,savingProfile:y,openProfileModal:j,duplicateProfile:N,saveProfile:P,deleteProfile:D,selectedProfilePermissions:m,selectedProfilePermissionSet:v,selectedProfilePermissionSets:k,customProfilePermissions:S,toggleProfilePermission:M,selectAllProfilePermissions:I,clearProfilePermissions:L,toggleProfilePermissionSet:R,selectAllProfilePermissionSets:$,clearProfilePermissionSets:U}}function oH({open:t,onClose:e,editingProfile:n,profileForm:s,setProfileForm:r,profileIsSystem:i,profilePermissionSetsOpen:o,setProfilePermissionSetsOpen:a,profilePermissionsOpen:l,setProfilePermissionsOpen:u,permissionSetValues:d,permissionSetsQuery:h,permissionSetList:f,selectedProfilePermissionSets:p,toggleProfilePermissionSet:w,selectAllProfilePermissionSets:x,clearProfilePermissionSets:y,selectedProfilePermissions:g,permissionList:m,permissionsQuery:v,selectedProfilePermissionSet:k,toggleProfilePermission:S,selectAllProfilePermissions:C,clearProfilePermissions:_,customProfilePermissions:j,setConfirmDelete:N,saveProfile:P,savingProfile:D}){return c.jsx(ws,{open:t,onClose:e,title:n?`Edit profile: ${n}`:"Add profile",maxWidth:"640px",children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsx(_e,{label:"Name",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:s.name,onChange:M=>r(I=>({...I,name:M.target.value})),placeholder:"system_admin",disabled:!!n})}),c.jsx(_e,{label:"Display Name",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:s.display_name,onChange:M=>r(I=>({...I,display_name:M.target.value})),placeholder:"System Admin"})})]}),c.jsx(_e,{label:"Description",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:s.description,onChange:M=>r(I=>({...I,description:M.target.value})),placeholder:"What this profile can do"})}),c.jsx(_e,{label:"Permission Sets",children:c.jsxs(Dt,{className:"p-4",children:[c.jsxs("button",{type:"button",className:"flex w-full items-center justify-between gap-3 text-left",onClick:()=>a(M=>!M),"aria-expanded":o,children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Permission sets"}),c.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:pl(s.permissionSets.length,"permission set","permission sets")})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-black/50 dark:text-white/55",children:[c.jsx("span",{children:o?"Hide":"Edit"}),c.jsx(Zn,{size:16,className:Ee("transition-transform",o&&"rotate-180")})]})]}),o?c.jsxs("div",{className:"mt-0 space-y-0",children:[c.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx(te,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:x,disabled:!d.length,children:"Select all"}),c.jsx(te,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:y,disabled:!s.permissionSets.length,children:"Clear"})]})}),h.isLoading?c.jsx(Ye,{text:"Loading permission sets",className:"text-sm text-black/60 dark:text-white/65"}):f.length?c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-[168px] overflow-y-auto p-1",children:f.map(M=>{const I=M.name||M.id;if(!I)return null;const L=p.has(I);return c.jsxs("button",{type:"button",onClick:()=>w(I),className:Ee("flex items-center justify-between gap-3 rounded-xl px-3 py-1.5 text-xs ring-1 transition-colors",L?"bg-black/5 dark:bg-white/10 ring-black/20 dark:ring-white/20 text-black dark:text-white":"bg-white/60 dark:bg-white/5 ring-black/5 dark:ring-white/10 text-black/70 dark:text-white/70 hover:bg-black/5 dark:hover:bg-white/10"),children:[c.jsx("span",{className:"min-w-0 truncate text-xs font-medium",children:M.display_name||M.name||I}),c.jsx("span",{className:Ee("h-4 w-4 rounded-full flex items-center justify-center transition-colors",L?"bg-black text-white dark:bg-white dark:text-black shadow-soft":"bg-black/5 dark:bg-white/10 text-black/40 dark:text-white/40"),children:c.jsx(Zo,{size:14,className:L?"opacity-100":"opacity-0"})})]},I)})}):c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No permission sets available."})]}):null]})}),c.jsx(_e,{label:"Permissions",children:c.jsxs(Dt,{className:"p-4",children:[c.jsxs("button",{type:"button",className:"flex w-full items-center justify-between gap-3 text-left",onClick:()=>u(M=>!M),"aria-expanded":l,children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Permissions"}),c.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:pl(g.length,"permission")})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-black/50 dark:text-white/55",children:[c.jsx("span",{children:l?"Hide":"Edit"}),c.jsx(Zn,{size:16,className:Ee("transition-transform",l&&"rotate-180")})]})]}),l?c.jsxs("div",{className:"mt-0 space-y-0",children:[c.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx(te,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:C,disabled:!m.length,children:"Select all"}),c.jsx(te,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:_,disabled:!g.length,children:"Clear"})]})}),v.isLoading?c.jsx(Ye,{text:"Loading permissions",className:"text-sm text-black/60 dark:text-white/65"}):m.length?c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-[110px] overflow-y-auto p-1",children:m.map(M=>{const I=k.has(M);return c.jsxs("button",{type:"button",onClick:()=>S(M),className:Ee("flex items-center justify-between gap-3 rounded-xl px-3 py-1.5 text-xs ring-1 transition-colors",I?"bg-black/5 dark:bg-white/10 ring-black/20 dark:ring-white/20 text-black dark:text-white":"bg-white/60 dark:bg-white/5 ring-black/5 dark:ring-white/10 text-black/70 dark:text-white/70 hover:bg-black/5 dark:hover:bg-white/10"),children:[c.jsx("span",{className:"min-w-0 truncate",children:M}),c.jsx("span",{className:Ee("h-4 w-4 rounded-full flex items-center justify-center transition-colors",I?"bg-black text-white dark:bg-white dark:text-black shadow-soft":"bg-black/5 dark:bg-white/10 text-black/40 dark:text-white/40"),children:c.jsx(Zo,{size:14,className:I?"opacity-100":"opacity-0"})})]},M)})}):c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No permissions available."}),j.length?c.jsxs("div",{className:"rounded-2xl bg-white/50 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 p-3",children:[c.jsx("div",{className:"text-xs font-semibold text-black/60 dark:text-white/65",children:"Custom permissions"}),c.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:j.map(M=>c.jsxs("button",{type:"button",onClick:()=>S(M),className:"flex items-center gap-2 rounded-full bg-black/5 dark:bg-white/10 px-3 py-1 text-xs text-black/70 dark:text-white/70 hover:bg-black/8 dark:hover:bg-white/15",title:"Remove permission",children:[c.jsx("span",{className:"max-w-[220px] truncate",children:M}),c.jsx("span",{className:"text-black/40 dark:text-white/40",children:"x"})]},M))})]}):null]}):null]})}),c.jsxs("div",{className:"flex items-center justify-between gap-2 pt-1",children:[n?c.jsx(te,{variant:"ghost",className:"rounded-2xl text-red-600 hover:text-red-700 dark:text-red-300",onClick:()=>N({open:!0,type:"profile",payload:n,label:`Delete profile "${s.display_name||s.name}"?`}),disabled:i,children:"Delete"}):c.jsx("span",{}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(te,{variant:"ghost",className:"rounded-2xl",onClick:e,children:"Cancel"}),c.jsx(te,{className:"rounded-2xl",onClick:P,disabled:D||i,children:D?c.jsx(Ye,{text:"Saving"}):"Save"})]})]})]})})}function aH({permissionSetSearch:t,setPermissionSetSearch:e,openPermissionSetModal:n,permissionSetsQuery:s,filteredPermissionSetList:r,duplicatePermissionSet:i,setConfirmDelete:o}){const a=c.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[c.jsx(Yt,{children:"Permission Sets"}),c.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-end",children:[c.jsx(go,{value:t,onChange:l=>e(l.target.value),className:"w-full sm:w-[220px]"}),c.jsx(te,{variant:"secondary",className:"rounded-2xl self-start sm:self-auto",onClick:()=>n(null),children:"Add permission set"})]})]});return c.jsxs(vt,{className:"h-full min-h-0 flex flex-col",children:[c.jsx(Bt,{className:"hidden md:block space-y-2",children:a}),c.jsxs(Ut,{className:"flex-1 min-h-0 overflow-y-auto p-0",children:[c.jsx("div",{className:"space-y-2 p-5 pb-3 md:hidden",children:a}),c.jsx("div",{className:"space-y-4 p-5 pt-1",children:s.isLoading?c.jsx(Ye,{text:"Loading",className:"text-sm text-black/60 dark:text-white/65"}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.map(l=>c.jsxs(Dt,{className:"p-4 space-y-1",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-base font-semibold",children:l.display_name||l.name}),c.jsx("div",{className:"text-sm text-black/55 dark:text-white/60",children:l.name})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Tn,{onClick:()=>i(l),title:"Duplicate permission set","aria-label":"Duplicate permission set",children:c.jsx(AC,{size:16})}),c.jsx(Tn,{onClick:()=>n(l),title:"Edit permission set","aria-label":"Edit permission set",children:c.jsx(fd,{size:16})}),c.jsx(Tn,{variant:"ghost",onClick:()=>o({open:!0,type:"permission-set",payload:l.name,label:`Delete permission set "${l.display_name||l.name}"?`}),title:"Delete permission set","aria-label":"Delete permission set",children:c.jsx(ea,{size:16})})]})]}),c.jsxs("div",{className:"text-sm text-black/55 dark:text-white/60",children:[(l.permissions||[]).length," permission",(l.permissions||[]).length===1?"":"s"]}),l.description?c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65 truncate",children:l.description}):null]},l.name)),r.length?null:c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:t.trim()?"No matching permission sets.":"No permission sets available."})]})})]})]})}function lH({permissionSetSearch:t,setPermissionSetSearch:e,permissionSetsQuery:n,filteredPermissionSetList:s,permissionList:r,permissionsQuery:i}){const{permissionSetForm:o,setPermissionSetForm:a,editingPermissionSet:l,setEditingPermissionSet:u,permissionSetModalOpen:d,setPermissionSetModalOpen:h,savingPermissionSet:f,permissionSetPermissionsOpen:p,setPermissionSetPermissionsOpen:w,openPermissionSetModal:x,duplicatePermissionSet:y,savePermissionSet:g,deletePermissionSet:m,selectedPermissionSetPermissions:v,selectedPermissionSetPermissionSet:k,customPermissionSetPermissions:S,togglePermissionSetPermission:C,selectAllPermissionSetPermissions:_,clearPermissionSetPermissions:j}=cH({permissionList:r}),[N,P]=b.useState({open:!1,type:"",payload:null,label:""});async function D(){if(!(!N.open||!N.payload))try{await m(N.payload)}finally{P({open:!1,type:"",payload:null,label:""})}}return c.jsxs(c.Fragment,{children:[c.jsx(aH,{permissionSetSearch:t,setPermissionSetSearch:e,openPermissionSetModal:x,permissionSetsQuery:n,filteredPermissionSetList:s,duplicatePermissionSet:y,setConfirmDelete:P}),c.jsx(uH,{open:d,onClose:()=>{h(!1),u(null),a({name:"",display_name:"",description:"",permissionsText:""}),w(!1)},editingPermissionSet:l,permissionSetForm:o,setPermissionSetForm:a,permissionSetPermissionsOpen:p,setPermissionSetPermissionsOpen:w,selectedPermissionSetPermissions:v,permissionList:r,permissionsQuery:i,selectedPermissionSetPermissionSet:k,togglePermissionSetPermission:C,selectAllPermissionSetPermissions:_,clearPermissionSetPermissions:j,customPermissionSetPermissions:S,setConfirmDelete:P,savePermissionSet:g,savingPermissionSet:f}),c.jsx(_d,{open:N.open,message:N.label,onClose:()=>P({open:!1,type:"",payload:null,label:""}),onConfirm:D})]})}function cH({permissionList:t}){const e=Rr(),[n,s]=b.useState({name:"",display_name:"",description:"",permissionsText:""}),[r,i]=b.useState(null),[o,a]=b.useState(!1),[l,u]=b.useState(!1),[d,h]=b.useState(!1),f=b.useMemo(()=>vn(n.permissionsText),[n.permissionsText]),p=b.useMemo(()=>new Set(f),[f]),w=b.useMemo(()=>{if(!t.length)return f;const C=new Set(t);return f.filter(_=>!C.has(_))},[t,f]);function x(C){h(!1),C?(i(C.name),s({name:C.name||"",display_name:C.display_name||C.name||"",description:C.description||"",permissionsText:(C.permissions||[]).map(_=>typeof _=="string"?_:_==null?void 0:_.name).filter(Boolean).join(`
`)})):(i(null),s({name:"",display_name:"",description:"",permissionsText:""})),a(!0)}function y(C){if(!C)return;const _=C.name||C.display_name||"permission_set",j=C.display_name||C.name||_;i(null),h(!1),s({name:`${_}_new`,display_name:`${j}_new`,description:C.description||"",permissionsText:(C.permissions||[]).map(N=>typeof N=="string"?N:N==null?void 0:N.name).filter(Boolean).join(`
`)}),a(!0)}async function g(){if(!n.name.trim())return;u(!0);const C={name:n.name.trim(),display_name:n.display_name||n.name.trim(),description:n.description,permissions:vn(n.permissionsText)};try{r?await PB(r,C):await TB(C),e.invalidateQueries({queryKey:["admin","permission-sets"]}),a(!1),i(null)}catch{}finally{u(!1)}}async function m(C){if(C)try{await RB(C),e.invalidateQueries({queryKey:["admin","permission-sets"]}),a(!1),i(null)}catch{}}function v(C){s(_=>{const j=new Set(vn(_.permissionsText));return j.has(C)?j.delete(C):j.add(C),{..._,permissionsText:Array.from(j).join(`
`)}})}function k(){const C=new Set([...f,...t]);s(_=>({..._,permissionsText:Array.from(C).join(`
`)}))}function S(){s(C=>({...C,permissionsText:""}))}return{permissionSetForm:n,setPermissionSetForm:s,editingPermissionSet:r,setEditingPermissionSet:i,permissionSetModalOpen:o,setPermissionSetModalOpen:a,savingPermissionSet:l,permissionSetPermissionsOpen:d,setPermissionSetPermissionsOpen:h,openPermissionSetModal:x,duplicatePermissionSet:y,savePermissionSet:g,deletePermissionSet:m,selectedPermissionSetPermissions:f,selectedPermissionSetPermissionSet:p,customPermissionSetPermissions:w,togglePermissionSetPermission:v,selectAllPermissionSetPermissions:k,clearPermissionSetPermissions:S}}function uH({open:t,onClose:e,editingPermissionSet:n,permissionSetForm:s,setPermissionSetForm:r,permissionSetPermissionsOpen:i,setPermissionSetPermissionsOpen:o,selectedPermissionSetPermissions:a,permissionList:l,permissionsQuery:u,selectedPermissionSetPermissionSet:d,togglePermissionSetPermission:h,selectAllPermissionSetPermissions:f,clearPermissionSetPermissions:p,customPermissionSetPermissions:w,setConfirmDelete:x,savePermissionSet:y,savingPermissionSet:g}){return c.jsx(ws,{open:t,onClose:e,title:n?`Edit permission set: ${n}`:"Add permission set",maxWidth:"640px",children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsx(_e,{label:"Name",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:s.name,onChange:m=>r(v=>({...v,name:m.target.value})),placeholder:"sales_ops",disabled:!!n})}),c.jsx(_e,{label:"Display Name",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:s.display_name,onChange:m=>r(v=>({...v,display_name:m.target.value})),placeholder:"Sales Ops"})})]}),c.jsx(_e,{label:"Description",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:s.description,onChange:m=>r(v=>({...v,description:m.target.value})),placeholder:"What this permission set grants"})}),c.jsx(_e,{label:"Permissions",children:c.jsxs(Dt,{className:"p-4",children:[c.jsxs("button",{type:"button",className:"flex w-full items-center justify-between gap-3 text-left",onClick:()=>o(m=>!m),"aria-expanded":i,children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Permissions"}),c.jsx("div",{className:"text-xs text-black/55 dark:text-white/60",children:pl(a.length,"permission")})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-black/50 dark:text-white/55",children:[c.jsx("span",{children:i?"Hide":"Edit"}),c.jsx(Zn,{size:16,className:Ee("transition-transform",i&&"rotate-180")})]})]}),i?c.jsxs("div",{className:"mt-0 space-y-0",children:[c.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx(te,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:f,disabled:!l.length,children:"Select all"}),c.jsx(te,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:p,disabled:!a.length,children:"Clear"})]})}),u.isLoading?c.jsx(Ye,{text:"Loading permissions",className:"text-sm text-black/60 dark:text-white/65"}):l.length?c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-[168px] overflow-y-auto p-1",children:l.map(m=>{const v=d.has(m);return c.jsxs("button",{type:"button",onClick:()=>h(m),className:Ee("flex items-center justify-between gap-3 rounded-xl px-3 py-1.5 text-xs ring-1 transition-colors",v?"bg-black/5 dark:bg-white/10 ring-black/20 dark:ring-white/20 text-black dark:text-white":"bg-white/60 dark:bg-white/5 ring-black/5 dark:ring-white/10 text-black/70 dark:text-white/70 hover:bg-black/5 dark:hover:bg-white/10"),children:[c.jsx("span",{className:"min-w-0 truncate",children:m}),c.jsx("span",{className:Ee("h-4 w-4 rounded-full flex items-center justify-center transition-colors",v?"bg-black text-white dark:bg-white dark:text-black shadow-soft":"bg-black/5 dark:bg-white/10 text-black/40 dark:text-white/40"),children:c.jsx(Zo,{size:14,className:v?"opacity-100":"opacity-0"})})]},m)})}):c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No permissions available."}),w.length?c.jsxs("div",{className:"rounded-2xl bg-white/50 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 p-3",children:[c.jsx("div",{className:"text-xs font-semibold text-black/60 dark:text-white/65",children:"Custom permissions"}),c.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:w.map(m=>c.jsxs("button",{type:"button",onClick:()=>h(m),className:"flex items-center gap-2 rounded-full bg-black/5 dark:bg-white/10 px-3 py-1 text-xs text-black/70 dark:text-white/70 hover:bg-black/8 dark:hover:bg-white/15",title:"Remove permission",children:[c.jsx("span",{className:"max-w-[220px] truncate",children:m}),c.jsx("span",{className:"text-black/40 dark:text-white/40",children:"x"})]},m))})]}):null]}):null]})}),c.jsxs("div",{className:"flex items-center justify-between gap-2 pt-1",children:[n?c.jsx(te,{variant:"ghost",className:"rounded-2xl text-red-600 hover:text-red-700 dark:text-red-300",onClick:()=>x({open:!0,type:"permission-set",payload:n,label:`Delete permission set "${s.display_name||s.name}"?`}),children:"Delete"}):c.jsx("span",{}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(te,{variant:"ghost",className:"rounded-2xl",onClick:e,children:"Cancel"}),c.jsx(te,{className:"rounded-2xl",onClick:y,disabled:g,children:g?c.jsx(Ye,{text:"Saving"}):"Save"})]})]})]})})}function dH({permissionSearch:t,setPermissionSearch:e,openPermissionModal:n,permissionModuleFilter:s,setPermissionModuleFilter:r,permissionServiceFilter:i,setPermissionServiceFilter:o,permissionActionFilter:a,setPermissionActionFilter:l,permissionModuleOptions:u,permissionFilterServiceOptions:d,permissionFilterActionOptions:h,permissionsQuery:f,filteredPermissionList:p,parsePermissionParts:w,mergedPermissionDescriptions:x,setConfirmDelete:y}){const g=[{value:"",label:"All modules"},...u.map(S=>({value:S,label:S}))],m=[{value:"",label:"All services"},...d.map(S=>({value:S,label:S}))],v=[{value:"",label:"All permissions"},...h.map(S=>({value:S,label:S}))],k=c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[c.jsx(Yt,{children:"Permissions"}),c.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-end",children:[c.jsx(go,{value:t,onChange:S=>e(S.target.value),className:"w-full sm:w-[220px]"}),c.jsx(te,{className:"rounded-2xl self-start sm:self-auto",variant:"secondary",onClick:()=>n("add",""),children:"Add permission"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:[c.jsx(ot,{value:s,options:g,onChange:r}),c.jsx(ot,{value:i,options:m,onChange:o}),c.jsx(ot,{value:a,options:v,onChange:l,className:"col-span-2 sm:col-span-1"})]})]});return c.jsxs(vt,{className:"h-full min-h-0 flex flex-col",children:[c.jsx(Bt,{className:"hidden md:block space-y-2",children:k}),c.jsxs(Ut,{className:"flex-1 min-h-0 overflow-y-auto p-0",children:[c.jsx("div",{className:"space-y-2 p-5 pb-3 md:hidden",children:k}),c.jsx("div",{className:"space-y-3 p-5 pt-1",children:f.isLoading?c.jsx(Ye,{text:"Loading",className:"text-sm text-black/60 dark:text-white/65"}):p.length?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-3",children:p.map(S=>{const C=w(S),_=x[S];return c.jsxs(Dt,{className:"p-3",children:[c.jsxs("div",{className:"flex items-start justify-between gap-2",children:[c.jsxs("div",{className:"grid grid-cols-1 gap-1 text-sm",children:[c.jsxs("div",{className:"flex flex-wrap items-baseline gap-1",children:[c.jsx("span",{className:"text-xs uppercase tracking-wide text-black/50 dark:text-white/60",children:"Module"}),c.jsx("span",{className:"font-semibold text-black/85 dark:text-white/85",children:C.module})]}),c.jsxs("div",{className:"flex flex-wrap items-baseline gap-1",children:[c.jsx("span",{className:"text-xs uppercase tracking-wide text-black/50 dark:text-white/60",children:"Service"}),c.jsx("span",{className:"font-semibold text-black/85 dark:text-white/85",children:C.service})]}),c.jsxs("div",{className:"flex flex-wrap items-baseline gap-1",children:[c.jsx("span",{className:"text-xs uppercase tracking-wide text-black/50 dark:text-white/60",children:"Permission"}),c.jsx("span",{className:"font-semibold text-black/85 dark:text-white/85",children:C.action})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Tn,{onClick:()=>n("edit",S),title:"Edit permission","aria-label":"Edit permission",children:c.jsx(fd,{size:16})}),c.jsx(Tn,{variant:"ghost",onClick:()=>y({open:!0,type:"permission",payload:S,label:`Delete permission "${S}"?`}),title:"Delete permission","aria-label":"Delete permission",children:c.jsx(ea,{size:16})})]})]}),_?c.jsxs("div",{className:"mt-2 flex items-baseline gap-1 text-sm min-w-0",children:[c.jsx("span",{className:"text-xs uppercase tracking-wide text-black/50 dark:text-white/60",children:"Description"}),c.jsx("span",{className:"text-black/60 dark:text-white/65 truncate",children:_})]}):null]},S)})}):c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:t.trim()?"No matching permissions.":"No permissions available."})})]})]})}function hH({permissionSearch:t,setPermissionSearch:e,openPermissionModal:n,permissionModuleFilter:s,setPermissionModuleFilter:r,permissionServiceFilter:i,setPermissionServiceFilter:o,permissionActionFilter:a,setPermissionActionFilter:l,permissionModuleOptions:u,permissionFilterServiceOptions:d,permissionFilterActionOptions:h,permissionsQuery:f,filteredPermissionList:p,parsePermissionParts:w,mergedPermissionDescriptions:x,permissionTree:y,updateLocalPermissionDescription:g}){const{permissionModal:m,setPermissionModal:v,permissionModalError:k,savingPermission:S,openPermissionModal:C,updatePermissionModalField:_,savePermissionModal:j,deletePermissionFromModal:N,setPermissionModalError:P}=fH({mergedPermissionDescriptions:x,updateLocalPermissionDescription:g}),[D,M]=b.useState({open:!1,type:"",payload:null,label:""}),I=m.module?y.servicesByModule[m.module]||[]:y.allServices,L=m.module&&m.service?y.actionsByService[`${m.module}:${m.service}`]||[]:y.allActions;async function R(){if(!(!D.open||!D.payload))try{await N(D.payload)}finally{M({open:!1,type:"",payload:null,label:""})}}return c.jsxs(c.Fragment,{children:[c.jsx(dH,{permissionSearch:t,setPermissionSearch:e,openPermissionModal:n||C,permissionModuleFilter:s,setPermissionModuleFilter:r,permissionServiceFilter:i,setPermissionServiceFilter:o,permissionActionFilter:a,setPermissionActionFilter:l,permissionModuleOptions:u,permissionFilterServiceOptions:d,permissionFilterActionOptions:h,permissionsQuery:f,filteredPermissionList:p,parsePermissionParts:w,mergedPermissionDescriptions:x,setConfirmDelete:M}),c.jsx(pH,{open:m.open,onClose:()=>{v({open:!1,mode:"add",value:"",original:"",module:"",service:"",action:"",description:"",originalDescription:""}),P("")},permissionModal:m,permissionModuleOptions:u,permissionServiceOptions:I,permissionActionOptions:L,updatePermissionModalField:_,permissionModalError:k,savePermissionModal:j,savingPermission:S}),c.jsx(_d,{open:D.open,message:D.label,onClose:()=>M({open:!1,type:"",payload:null,label:""}),onConfirm:R})]})}const kh={open:!1,mode:"add",value:"",original:"",module:"",service:"",action:"",description:"",originalDescription:""};function fH({mergedPermissionDescriptions:t,updateLocalPermissionDescription:e}){const n=Rr(),[s,r]=b.useState(kh),[i,o]=b.useState(""),[a,l]=b.useState(!1);function u(p="add",w=""){const x=Ux(w),y=w&&t[w]||"";o(""),r({open:!0,mode:p,value:w,original:w,module:x.module,service:x.service,action:x.action,description:y,originalDescription:y})}function d(p,w){r(x=>{const y={...x,[p]:w};return{...y,value:Pw(y)}}),o("")}async function h(){var w;const p=Pw(s);if(!p){o("Select module, service, and permission.");return}l(!0);try{const x=((w=s.description)==null?void 0:w.trim())||"";if(s.mode==="add")await tg(p,x),e(p,x);else if(p!==s.original)await tg(p,x),await Ak(s.original),e(s.original,""),e(p,x);else if(x!==s.originalDescription)await tg(p,x),e(p,x);else{r({...kh});return}n.invalidateQueries({queryKey:["admin","permissions"]}),r({...kh})}catch{}finally{l(!1)}}async function f(p){const w=p||s.original||s.value;if(w){l(!0);try{await Ak(w),e(w,""),n.invalidateQueries({queryKey:["admin","permissions"]}),r({...kh})}catch{}finally{l(!1)}}}return{permissionModal:s,setPermissionModal:r,permissionModalError:i,savingPermission:a,openPermissionModal:u,updatePermissionModalField:d,savePermissionModal:h,deletePermissionFromModal:f,setPermissionModalError:o}}function pH({open:t,onClose:e,permissionModal:n,permissionModuleOptions:s,permissionServiceOptions:r,permissionActionOptions:i,updatePermissionModalField:o,permissionModalError:a,savePermissionModal:l,savingPermission:u}){return c.jsx(ws,{open:t,onClose:e,title:n.mode==="edit"?"Edit permission":"Add permission",maxWidth:"520px",children:c.jsxs("div",{className:"space-y-3",children:[c.jsx(_e,{label:"Permission",children:c.jsxs("div",{className:"grid grid-cols-[1fr_auto_1fr_auto_1fr] items-center gap-2",children:[c.jsxs("div",{children:[c.jsx("input",{list:"permission-module-options",className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:n.module,onChange:d=>o("module",d.target.value),placeholder:"module"}),c.jsx("datalist",{id:"permission-module-options",children:s.map((d,h)=>c.jsx("option",{value:d},`${d}-${h}`))})]}),c.jsx("span",{className:"text-sm text-black/40 dark:text-white/40",children:":"}),c.jsxs("div",{children:[c.jsx("input",{list:"permission-service-options",className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:n.service,onChange:d=>o("service",d.target.value),placeholder:"service"}),c.jsx("datalist",{id:"permission-service-options",children:r.map((d,h)=>c.jsx("option",{value:d},`${d}-${h}`))})]}),c.jsx("span",{className:"text-sm text-black/40 dark:text-white/40",children:":"}),c.jsxs("div",{children:[c.jsx("input",{list:"permission-action-options",className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:n.action,onChange:d=>o("action",d.target.value),placeholder:"permission"}),c.jsx("datalist",{id:"permission-action-options",children:i.map((d,h)=>c.jsx("option",{value:d},`${d}-${h}`))})]})]})}),c.jsx(_e,{label:"Description",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:n.description,onChange:d=>o("description",d.target.value),placeholder:"Short description"})}),a?c.jsx("div",{className:"text-xs text-red-600 dark:text-red-300",children:a}):null,c.jsx("div",{className:"flex justify-end",children:c.jsx(te,{className:"rounded-2xl",onClick:l,disabled:u,children:u?c.jsx(Ye,{text:"Saving"}):n.mode==="edit"?"Update Permission":"Add Permission"})})]})})}const hg=20;function mH(){const{user:t}=ii(),[e,n]=b.useState("users"),[s,r]=b.useState(""),[i,o]=b.useState(0),[a,l]=b.useState(""),[u,d]=b.useState(""),[h,f]=b.useState(""),[p,w]=b.useState(""),[x,y]=b.useState(""),[g,m]=b.useState(""),[v,k]=b.useState(""),[S,C]=b.useState(""),[_,j]=b.useState("");if(!md(t))return c.jsxs(vt,{children:[c.jsx(Bt,{children:c.jsx(Yt,{children:"Restricted"})}),c.jsx(Ut,{className:"text-sm text-black/60 dark:text-white/65",children:"You don't have access to the admin panel."})]});const N=en({queryKey:["admin","users",i],queryFn:()=>hB({limit:hg,offset:i*hg})}),P=en({queryKey:["admin","profiles"],queryFn:vB}),D=en({queryKey:["admin","permissions"],queryFn:_B}),M=en({queryKey:["admin","companies"],queryFn:SB}),I=en({queryKey:["admin","permission-sets"],queryFn:EB}),L=b.useMemo(()=>{var ae;const K=((ae=N.data)==null?void 0:ae.users)||N.data||[],G=s.trim().toLowerCase();return K.filter(Y=>{var je,Le,be,ie,Ne;const F=Array.isArray(Y.profiles)?Y.profiles.map(et=>(et==null?void 0:et.display_name)||(et==null?void 0:et.name)||et).filter(Boolean).join(" "):((je=Y.profiles)==null?void 0:je.display_name)||((Le=Y.profiles)==null?void 0:Le.name)||Y.profile||Y.profile_name||"",xe=`${Y.email||""} ${Y.name||""} ${F}`.toLowerCase();if(G&&!xe.includes(G))return!1;const Se=((be=Y.company)==null?void 0:be.code)||Y.company_code||Y.company_id||"";return!(x&&Se!==x||g&&!(Array.isArray(Y.profiles)?Y.profiles.map(ht=>(ht==null?void 0:ht.name)||(ht==null?void 0:ht.display_name)||ht).filter(Boolean):[((ie=Y.profiles)==null?void 0:ie.name)||((Ne=Y.profiles)==null?void 0:Ne.display_name)||Y.profile||Y.profile_name].filter(Boolean)).includes(g))})},[N.data,s,x,g]);b.useMemo(()=>{var G;return(((G=N.data)==null?void 0:G.users)||N.data||[]).length===hg},[N.data]),b.useEffect(()=>{C(""),j("")},[v]),b.useEffect(()=>{j("")},[S]);const R=b.useMemo(()=>{var G;const K=((G=P.data)==null?void 0:G.profiles)??P.data;return Array.isArray(K)?K:[]},[P.data]),$=b.useMemo(()=>{var ie;const K=((ie=D.data)==null?void 0:ie.permissions)??D.data,G=new Map,ae={},Y=(Ne,et,ht)=>{if(!Ne||!et||!ht)return;G.has(Ne)||G.set(Ne,new Map);const Lt=G.get(Ne);Lt.has(et)||Lt.set(et,new Set),Lt.get(et).add(ht)};Array.isArray(K)?K.forEach(Ne=>{const et=typeof Ne=="string"?Ne:Ne==null?void 0:Ne.name,ht=typeof Ne=="string"?"":(Ne==null?void 0:Ne.description)||"";if(et&&ht&&(ae[et]=ht),!et)return;const Lt=et.split(":");Lt.length>=3&&Y(Lt[0],Lt[1],Lt[2])}):K&&typeof K=="object"&&Object.entries(K).forEach(([Ne,et])=>{!et||typeof et!="object"||Object.entries(et).forEach(([ht,Lt])=>{Array.isArray(Lt)&&Lt.forEach(cr=>Y(Ne,ht,cr))})});const F=Array.from(G.keys()).sort(),xe={},Se={},je=[],Le=new Set,be=new Set;return F.forEach(Ne=>{const et=Array.from(G.get(Ne).keys()).sort();xe[Ne]=et,et.forEach(ht=>{Le.add(ht);const Lt=Array.from(G.get(Ne).get(ht)).sort();Se[`${Ne}:${ht}`]=Lt,Lt.forEach(cr=>{be.add(cr),je.push(`${Ne}:${ht}:${cr}`)})})}),{modules:F,servicesByModule:xe,actionsByService:Se,flat:je,allServices:Array.from(Le).sort(),allActions:Array.from(be).sort(),descriptions:ae}},[D.data]),U=b.useMemo(()=>$.flat,[$]),E=$.descriptions||{},[T,z]=b.useState({}),q=b.useMemo(()=>({...E||{},...T}),[E,T]),W=b.useCallback((K,G)=>{if(!K)return;const ae=(G==null?void 0:G.trim())||"";z(Y=>{const F={...Y};return ae?F[K]=ae:delete F[K],F})},[]),he=$.modules,ee=v?$.servicesByModule[v]||[]:$.allServices,B=v&&S?$.actionsByService[`${v}:${S}`]||[]:$.allActions,Q=b.useMemo(()=>{var G;const K=((G=M.data)==null?void 0:G.companies)??M.data;return Array.isArray(K)?K:[]},[M.data]),de=b.useMemo(()=>{var G,ae;const K=((G=I.data)==null?void 0:G.permission_sets)??((ae=I.data)==null?void 0:ae.permissionSets)??I.data;return Array.isArray(K)?K.map(Y=>typeof Y=="string"?{name:Y}:Y):[]},[I.data]),J=b.useMemo(()=>{const K=u.trim().toLowerCase();return K?Q.filter(G=>`${G.name||""} ${G.code||""} ${G.country||""} ${G.currency||""} ${G.timezone||""}`.toLowerCase().includes(K)):Q},[Q,u]),ve=b.useMemo(()=>{const K=a.trim().toLowerCase();return K?R.filter(G=>`${G.display_name||""} ${G.name||""} ${G.description||""}`.toLowerCase().includes(K)):R},[R,a]),Ae=b.useMemo(()=>{const K=h.trim().toLowerCase();return K?de.filter(G=>`${G.display_name||""} ${G.name||""} ${G.description||""}`.toLowerCase().includes(K)):de},[de,h]),me=b.useMemo(()=>{const K=p.trim().toLowerCase();let G=U;return(v||S||_)&&(G=G.filter(ae=>{const Y=Ux(ae);return!(v&&Y.module!==v||S&&Y.service!==S||_&&Y.action!==_)})),K?G.filter(ae=>{const Y=q[ae]||"";return`${ae} ${Y}`.toLowerCase().includes(K)}):G},[U,p,q,v,S,_]),fe=b.useMemo(()=>Q.map(K=>({value:K.code||K.id||"",label:K.name||K.code||K.id||""})).filter(K=>K.value),[Q]),Ie=b.useMemo(()=>R.map(K=>({value:K.name||K.display_name||"",label:K.display_name||K.name||""})).filter(K=>K.value),[R]),X=b.useMemo(()=>de.map(K=>K.name||K.id).filter(Boolean),[de]),pe=b.useMemo(()=>R.map(K=>K.name||K.id).filter(Boolean),[R]),re=b.useMemo(()=>{const K=new Map;return Q.forEach(G=>{const ae=G.code||G.id;ae&&K.set(ae,G.name||G.code||ae)}),K},[Q]);return c.jsxs("div",{className:"flex h-full min-h-0 flex-col gap-4",children:[c.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto",children:[c.jsx(te,{variant:e==="users"?"default":"ghost",onClick:()=>n("users"),className:"rounded-2xl shrink-0",children:"Users"}),c.jsx(te,{variant:e==="companies"?"default":"ghost",onClick:()=>n("companies"),className:"rounded-2xl shrink-0",children:"Companies"}),c.jsx(te,{variant:e==="profiles"?"default":"ghost",onClick:()=>n("profiles"),className:"rounded-2xl shrink-0",children:"Profiles"}),c.jsx(te,{variant:e==="permission-sets"?"default":"ghost",onClick:()=>n("permission-sets"),className:"rounded-2xl shrink-0",children:"Permission Sets"}),c.jsx(te,{variant:e==="permissions"?"default":"ghost",onClick:()=>n("permissions"),className:"rounded-2xl shrink-0",children:"Permissions"})]}),c.jsxs("div",{className:"flex-1 min-h-0",children:[c.jsx("div",{className:e==="users"?"h-full":"hidden","aria-hidden":e!=="users",children:c.jsx(QU,{q:s,setQ:r,usersQuery:N,users:L,user:t,companyLookup:re,userCompanyFilter:x,setUserCompanyFilter:y,userProfileFilter:g,setUserProfileFilter:m,companyFilterOptions:fe,profileFilterOptions:Ie,companyList:Q,profileOptions:R,profileValues:pe,permissionSetList:de,permissionSetValues:X,permissionList:U,permissionsQuery:D,page:i})}),c.jsx("div",{className:e==="companies"?"h-full":"hidden","aria-hidden":e!=="companies",children:c.jsx(eH,{companySearch:u,setCompanySearch:d,companiesQuery:M,filteredCompanyList:J,companyLookup:re,companyList:Q})}),c.jsx("div",{className:e==="profiles"?"h-full":"hidden","aria-hidden":e!=="profiles",children:c.jsx(rH,{profileSearch:a,setProfileSearch:l,filteredProfileOptions:ve,permissionList:U,permissionSetValues:X,permissionSetList:de,permissionSetsQuery:I,permissionsQuery:D})}),c.jsx("div",{className:e==="permission-sets"?"h-full":"hidden","aria-hidden":e!=="permission-sets",children:c.jsx(lH,{permissionSetSearch:h,setPermissionSetSearch:f,permissionSetsQuery:I,filteredPermissionSetList:Ae,permissionList:U,permissionsQuery:D})}),c.jsx("div",{className:e==="permissions"?"h-full":"hidden","aria-hidden":e!=="permissions",children:c.jsx(hH,{permissionSearch:p,setPermissionSearch:w,permissionModuleFilter:v,setPermissionModuleFilter:k,permissionServiceFilter:S,setPermissionServiceFilter:C,permissionActionFilter:_,setPermissionActionFilter:j,permissionModuleOptions:he,permissionFilterServiceOptions:ee,permissionFilterActionOptions:B,permissionsQuery:D,filteredPermissionList:me,parsePermissionParts:Ux,mergedPermissionDescriptions:q,permissionTree:$,updateLocalPermissionDescription:W})})]})]})}function gH({notification:t}){var e;return t?c.jsxs("div",{className:"space-y-3 text-sm text-black/70 dark:text-white/70",children:[t.message?c.jsx("div",{children:t.message}):c.jsx("div",{children:"No additional details."}),(e=t.meta)!=null&&e.details?c.jsx("div",{className:"rounded-xl bg-black/5 dark:bg-white/10 p-3 text-xs whitespace-pre-wrap",children:t.meta.details}):null]}):null}function xH(){const{notifications:t,loading:e,clearAll:n,dismissNotification:s,markRead:r,formatTime:i}=n0(),[o,a]=b.useState(null),l=b.useMemo(()=>t,[t]);return c.jsxs("div",{className:"h-full min-h-0",children:[c.jsxs(vt,{className:"h-full flex flex-col",children:[c.jsxs(Bt,{className:"flex flex-wrap items-center justify-between gap-2",children:[c.jsxs("div",{children:[c.jsx(Yt,{children:"Notifications"}),c.jsx("div",{className:"text-xs text-black/50 dark:text-white/55",children:l.length?`${l.length} total`:"No alerts yet"})]}),c.jsx(te,{variant:"secondary",className:"rounded-2xl",onClick:n,disabled:!l.length,children:"Clear all"})]}),c.jsx(Ut,{className:"flex-1 min-h-0 overflow-y-auto pt-2",children:e?c.jsx(Ye,{text:"Loading",className:"text-sm text-black/60 dark:text-white/65"}):l.length?c.jsx("div",{className:"space-y-2",children:l.map(u=>c.jsx(Dt,{className:"p-3",children:c.jsxs("div",{className:"flex items-start justify-between gap-2",children:[c.jsxs("div",{className:"min-w-0",children:[c.jsx("div",{className:"text-base font-semibold text-black/85 dark:text-white/85 truncate",children:u.title||"Notification"}),u.message?c.jsx("div",{className:"mt-1 text-sm text-black/60 dark:text-white/65 leading-5 mmg-line-clamp-2",children:u.message}):null,u.created_at?c.jsx("div",{className:"mt-1 text-xs text-black/45 dark:text-white/45",children:i(u.created_at)}):null]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Tn,{variant:"ghost",className:"h-8 w-8",onClick:()=>{r(u.id),a(u)},"aria-label":"View notification",children:c.jsx(OC,{size:14})}),c.jsx(Tn,{variant:"ghost",className:"h-8 w-8",onClick:()=>s(u.id),"aria-label":"Close notification",children:c.jsx(Ov,{size:14})})]})]})},u.id))}):c.jsx(Dt,{className:"p-6 text-center text-sm text-black/60 dark:text-white/65",children:"You're all caught up."})})]}),c.jsx(ws,{open:!!o,onClose:()=>a(null),title:(o==null?void 0:o.title)||"Notification",maxWidth:"520px",children:c.jsx(gH,{notification:o})})]})}function yH(){const[t,e]=b.useState(null),[n,s]=b.useState([]),[r,i]=b.useState(""),[o,a]=b.useState(null),[l,u]=b.useState(null),[d,h]=b.useState(!1),[f,p]=b.useState(!1),[w,x]=b.useState(!1),[y,g]=b.useState(null),[m,v]=b.useState({}),[k,S]=b.useState(null),[C,_]=b.useState(!1),[j,N]=b.useState(!1),P=b.useRef(null),D=b.useRef(null),M=b.useRef(null),I=b.useRef(null),L=b.useRef(!0),R=en({queryKey:["video-critique","history"],queryFn:o4,enabled:!0}),$=b.useMemo(()=>(r.trim().length>0||!!o)&&!d,[r,o,d]);b.useEffect(()=>{var Q;if(f||R.isLoading)return;const B=R.data;if(B&&((Q=B.messages)!=null&&Q.length||B.session_id||B.conversation_id)){e(B.session_id||B.conversation_id||null);const de=(B.messages||[]).map(SH);s(de.length?de:[p_()])}else s([p_()]);p(!0)},[R.data,R.isLoading,f]),b.useEffect(()=>{const B=D.current;if(!B)return;const Q=()=>{const J=B.scrollHeight-B.scrollTop-B.clientHeight<=120;L.current=J};return Q(),B.addEventListener("scroll",Q,{passive:!0}),()=>B.removeEventListener("scroll",Q)},[]);const U=ge.useCallback((B="smooth",Q=!1)=>{var de;!Q&&!L.current||(de=M.current)==null||de.scrollIntoView({behavior:B,block:"end"})},[]);b.useEffect(()=>{const B=d?"auto":"smooth";requestAnimationFrame(()=>U(B))},[n,d,U]),b.useEffect(()=>{f&&requestAnimationFrame(()=>U("auto",!0))},[f,U]),b.useEffect(()=>()=>{var B,Q;return(Q=(B=I.current)==null?void 0:B.abort)==null?void 0:Q.call(B)},[]);const E=b.useMemo(()=>{var B;return(B=y==null?void 0:y.fields)!=null&&B.length?y.fields.every(Q=>{if(!Q.required)return!0;const de=m==null?void 0:m[Q.id];return de!=null&&String(de).trim()!==""}):!1},[y,m]);function T(){x(!1),g(null),v({}),S(null),_(!1),N(!1)}async function z({formType:B,workflowId:Q}){x(!0),_(!0),S({formType:B,workflowId:Q}),g(null),v({});try{const de=await h4(B);g(de);const J={};((de==null?void 0:de.fields)||[]).forEach(ve=>{J[ve.id]=ve.default_value||""}),v(J)}catch(de){g({title:"Action",submit_text:"Submit",fields:[],error:(de==null?void 0:de.message)||"Failed to load form."})}finally{_(!1)}}function q(B,Q={}){s(de=>[...de,{id:crypto.randomUUID(),role:"assistant",content:B,files:[],status:null,...Q}])}async function W(B){if(!B||B.url)return;const Q=B.action_id||B.id,de=B.workflow_id||B.workflowId;if(!Q||!de){q("Missing action details. Please try again.");return}try{N(!0);const J=await u4({actionId:Q,workflowId:de});if(J!=null&&J.requires_form){N(!1),await z({formType:J.form_type||B.form_type,workflowId:J.workflow_id||de});return}q((J==null?void 0:J.message)||"Action completed.")}catch(J){q((J==null?void 0:J.message)||"Unable to complete that action.")}finally{N(!1)}}async function he(){if(!(!(k!=null&&k.formType)||!(k!=null&&k.workflowId))&&E){N(!0);try{const B=await d4({formType:k.formType,workflowId:k.workflowId,category:m.category,reason:m.reason});T(),q((B==null?void 0:B.message)||"Form submitted.")}catch(B){q((B==null?void 0:B.message)||"Unable to submit the form."),N(!1)}}}async function ee(){var X,pe;if(!$)return;const B=r.trim(),Q=o,de=!!l&&!Q,J=B||(Q?`Please review this file: ${Q.name}`:"");Q&&l&&u(null);const ve=crypto.randomUUID(),Ae=Q?[{file_id:`local-${Date.now()}`,filename:Q.name,preview_url:URL.createObjectURL(Q)}]:[],me={id:ve,role:"user",content:B,files:Ae,status:null},fe=crypto.randomUUID(),Ie={id:fe,role:"assistant",content:"",files:[],status:de?null:"Reviewing..."};s(re=>[...re,me,Ie]),i(""),a(null),L.current=!0,requestAnimationFrame(()=>U("auto",!0));try{let re=[];if(de){const F=f_(B);if(!F){s(Se=>Se.map(je=>je.id===fe?{...je,status:null,content:"Please provide a task number to upload this video."}:je));return}h(!0);const xe=await Mk({file:l,taskNumber:F});s(Se=>Se.map(je=>je.id===fe?{...je,status:null,content:(xe==null?void 0:xe.message)||"Video uploaded."}:je)),u(null);return}if(Q&&kH(Q)){const F=f_(B);if(F){h(!0);const xe=await Mk({file:Q,taskNumber:F});s(Se=>Se.map(je=>je.id===fe?{...je,status:null,content:(xe==null?void 0:xe.message)||"Video uploaded."}:je));return}u(Q),s(xe=>xe.map(Se=>Se.id===fe?{...Se,status:null,content:"Video received. Which task number is this for?"}:Se));return}if(Q&&_H(Q)){h(!0);const F=await a4({file:Q,message:B||void 0,sessionId:t});if(F!=null&&F.session_id&&e(xe=>xe||F.session_id),F!=null&&F.file_id){const xe={file_id:F.file_id,filename:Q.name,file_url:F.file_url||F.url||""};s(Se=>Se.map(je=>{var Le,be,ie,Ne;return je.id===ve?{...je,files:[{...xe,preview_url:((be=(Le=je.files)==null?void 0:Le[0])==null?void 0:be.preview_url)||((Ne=(ie=je.files)==null?void 0:ie[0])==null?void 0:Ne.url)||""}]}:je}))}s(xe=>xe.map(Se=>Se.id===fe?{...Se,status:null,content:(F==null?void 0:F.response)||(F==null?void 0:F.message)||"File received."}:Se));return}if(Q){h(!0);const F=await l4({file:Q});if(!(F!=null&&F.file_id))throw new Error("Upload failed");re=[F.file_id];const xe={file_id:F.file_id,filename:Q.name,file_url:F.file_url||F.url||""};s(Se=>Se.map(je=>{var Le,be,ie,Ne;return je.id===ve?{...je,files:[{...xe,preview_url:((be=(Le=je.files)==null?void 0:Le[0])==null?void 0:be.preview_url)||((Ne=(ie=je.files)==null?void 0:ie[0])==null?void 0:Ne.url)||""}]}:je}))}if(!Q&&B.startsWith("/")){h(!0);const xe=B.replace(/^\/+/,"").split(/\\s+/),Se=xe.shift()||"",je=xe.join(" "),Le=await c4({command:Se,args:je,sessionId:t});Le!=null&&Le.session_id&&e(be=>be||Le.session_id),s(be=>be.map(ie=>ie.id===fe?{...ie,status:null,content:(Le==null?void 0:Le.response)||(Le==null?void 0:Le.error)||"Command failed."}:ie));return}h(!0),(pe=(X=I.current)==null?void 0:X.abort)==null||pe.call(X);const K=new AbortController;I.current=K;let G="",ae=null,Y=!1;await p4({sessionId:t,message:J,fileIds:re,signal:K.signal,onEvent:F=>{var je,Le;if((F!=null&&F.session_id||F!=null&&F.conversation_id)&&e(be=>be||F.session_id||F.conversation_id),(F==null?void 0:F.type)==="error"||F!=null&&F.error){const be=(F==null?void 0:F.message)||(F==null?void 0:F.error)||"Stream error";s(ie=>ie.map(Ne=>Ne.id===fe?{...Ne,status:null,content:`Error: ${be}`}:Ne));return}if((F==null?void 0:F.type)==="status"){s(be=>be.map(ie=>ie.id===fe?{...ie,status:F.content||"Processing..."}:ie)),F.message_id&&(ae=F.message_id);return}if((F==null?void 0:F.type)==="delete"){F.message_id&&F.message_id===ae&&(G="",ae=null,s(be=>be.map(ie=>ie.id===fe?{...ie,status:"Reviewing...",content:""}:ie)));return}if((F==null?void 0:F.type)==="tool_call"){const be=F.name||((je=F.tool)==null?void 0:je.name)||"processing";s(ie=>ie.map(Ne=>Ne.id===fe?{...Ne,status:`Processing ${be}...`}:Ne));return}const xe=((Le=F==null?void 0:F.result)==null?void 0:Le.pdf_filename)||(F==null?void 0:F.pdf_filename),Se=be=>!be||!xe||be.pdf_filename?be:{...be,pdf_filename:xe};if(xe&&s(be=>be.map(ie=>ie.id===fe&&!ie.pdf_filename?{...ie,pdf_filename:xe}:ie)),(F==null?void 0:F.type)==="delta"&&F.content){G+=F.content,s(be=>be.map(ie=>ie.id===fe?{...ie,status:null,content:G}:ie));return}if((F==null?void 0:F.type)==="text_done"){G=F.content||G,s(be=>be.map(ie=>ie.id===fe?{...ie,status:null,content:G}:ie));return}if(((F==null?void 0:F.type)==="chunk"||(F==null?void 0:F.type)==="content")&&F.content){F.message_id&&F.message_id!==ae&&(ae=F.message_id),G=F.type==="content"?F.content:G+F.content,s(be=>be.map(ie=>ie.id===fe?{...ie,status:null,content:G}:ie));return}if(F!=null&&F.content&&!F.type){G+=F.content,s(be=>be.map(ie=>ie.id===fe?{...ie,status:null,content:G}:ie));return}if((F==null?void 0:F.type)==="actions"&&F.actions){s(be=>be.map(ie=>ie.id===fe?{...ie,actions:F.actions}:ie));return}if(F!=null&&F.actions){s(be=>be.map(ie=>ie.id===fe?{...ie,actions:F.actions}:ie));return}if((F==null?void 0:F.type)==="files"&&F.files){if(Y=!0,s(be=>be.map(ie=>ie.id===fe?{...ie,files:[...ie.files||[],...F.files.map(Se)]}:ie)),!G){const be=F.files.find(ie=>ie.comment);be!=null&&be.comment&&(G=be.comment,s(ie=>ie.map(Ne=>Ne.id===fe?{...Ne,status:null,content:G}:Ne)))}return}if((F==null?void 0:F.type)==="file"&&(F.file||F.url)){const be=Se(F.file||F);Y=!0,s(ie=>ie.map(Ne=>Ne.id===fe?{...Ne,files:[...Ne.files||[],be]}:Ne)),!G&&be.comment&&(G=be.comment,s(ie=>ie.map(Ne=>Ne.id===fe?{...Ne,status:null,content:G}:Ne)));return}if(F!=null&&F.files){Y=!0,s(be=>be.map(ie=>ie.id===fe?{...ie,files:[...ie.files||[],...F.files.map(Se)]}:ie));return}typeof F=="string"&&F.trim()&&(G+=F,s(be=>be.map(ie=>ie.id===fe?{...ie,status:null,content:G}:ie)))},onDone:()=>{!G&&!Y&&s(F=>F.map(xe=>xe.id===fe?{...xe,status:null,content:"Ready for the next request when you are."}:xe))}})}catch(re){s(K=>K.map(G=>G.id===fe?{...G,status:null,content:(re==null?void 0:re.message)||"Failed to get response"}:G))}finally{h(!1)}}return c.jsxs("div",{className:"h-full flex flex-col gap-4 min-h-0",children:[c.jsx(vt,{className:"p-4 overflow-hidden flex-1 min-h-0",children:c.jsx("div",{ref:D,className:"h-full overflow-y-auto px-2",children:c.jsxs("div",{className:"space-y-3",children:[!f&&R.isLoading?c.jsx(Ye,{text:"Loading conversation",className:"text-sm text-black/60 dark:text-white/65"}):null,n.map(B=>c.jsx(vH,{msg:B,onMediaLoad:()=>U("auto"),onAction:W,actionsDisabled:j},B.id)),c.jsx("div",{ref:M})]})})}),c.jsxs(vt,{className:"p-3",children:[l&&!o?c.jsxs("div",{className:"mb-2 flex items-center justify-between rounded-2xl bg-black/5 dark:bg-white/10 px-3 py-2 text-sm",children:[c.jsxs("div",{className:"truncate",children:["Awaiting task number for ",l.name]}),c.jsx("button",{className:"opacity-70 hover:opacity-100",onClick:()=>u(null),children:"x"})]}):null,o?c.jsxs("div",{className:"mb-2 flex items-center justify-between rounded-2xl bg-black/5 dark:bg-white/10 px-3 py-2 text-sm",children:[c.jsx("div",{className:"truncate",children:o.name}),c.jsx("button",{className:"opacity-70 hover:opacity-100",onClick:()=>a(null),children:"x"})]}):null,c.jsxs("div",{className:"flex items-end gap-2",children:[c.jsx("input",{ref:P,type:"file",className:"hidden",onChange:B=>{var Q;return a(((Q=B.target.files)==null?void 0:Q[0])||null)},accept:"video/*,image/*,.pdf,.xlsx,.xls,.csv,.docx,.doc"}),c.jsx(te,{variant:"ghost",size:"icon",className:"rounded-2xl",title:"Attach file",onClick:()=>{var B;return(B=P.current)==null?void 0:B.click()},children:c.jsx(MC,{size:18})}),c.jsx(bH,{value:r,onChange:i,placeholder:"Describe the video request...",onEnter:ee}),c.jsx(te,{size:"icon",className:"w-12 rounded-2xl",title:"Send",disabled:!$,onClick:ee,children:c.jsx(IC,{size:18})})]}),c.jsx("div",{className:"mt-2 text-xs text-black/45 dark:text-white/55",children:"Share a brief, a link, or upload a cut for review."})]}),c.jsx(ws,{open:w,onClose:T,title:(y==null?void 0:y.title)||"Action",maxWidth:"520px",children:C?c.jsx(Ye,{text:"Loading form",className:"text-sm text-black/60 dark:text-white/65"}):y!=null&&y.error?c.jsx("div",{className:"text-sm text-red-600 dark:text-red-300",children:y.error}):c.jsxs("div",{className:"space-y-3",children:[((y==null?void 0:y.fields)||[]).map(B=>{if(B.type==="select"){const Q=[{value:"",label:B.placeholder||"Select..."},...B.options||[]];return c.jsx(_e,{label:B.label,children:c.jsx(ot,{value:m[B.id]||"",options:Q,onChange:de=>v(J=>({...J,[B.id]:de}))})},B.id)}return B.type==="textarea"?c.jsx(_e,{label:B.label,children:c.jsx("textarea",{rows:3,placeholder:B.placeholder||"",className:"w-full resize-none rounded-2xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:m[B.id]||"",onChange:Q=>v(de=>({...de,[B.id]:Q.target.value}))})},B.id):c.jsx(_e,{label:B.label,children:c.jsx("input",{type:"text",placeholder:B.placeholder||"",className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:m[B.id]||"",onChange:Q=>v(de=>({...de,[B.id]:Q.target.value}))})},B.id)}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx(te,{variant:"ghost",className:"rounded-2xl",onClick:T,children:"Cancel"}),c.jsx(te,{className:"rounded-2xl",onClick:he,disabled:!E||j||C,children:(y==null?void 0:y.submit_text)||"Submit"})]})]})})]})}function vH({msg:t,onMediaLoad:e,onAction:n,actionsDisabled:s}){var h;const r=t.role==="user",i=b.useMemo(()=>PH(t.content||""),[t.content]),o=b.useMemo(()=>gy(t.status||""),[t.status]),a=b.useMemo(()=>!t.status&&jH(t.content||""),[t.status,t.content]),l=b.useMemo(()=>gy(t.content||""),[t.content]),u=b.useRef(new Map),d=t.actions||t.buttons||[];return c.jsx("div",{className:r?"flex justify-end":"flex justify-start",children:c.jsxs("div",{className:["max-w-[85%] rounded-2xl px-3 py-2 text-sm shadow-soft break-words","ring-1 ring-black/5 dark:ring-white/10 backdrop-blur-xs",r?"bg-black text-white dark:bg-white dark:text-black":"bg-white/70 dark:bg-white/10"].join(" "),children:[t.status||a?c.jsx(wH,{text:o||l}):c.jsx("div",{dangerouslySetInnerHTML:{__html:i}}),(h=t.files)!=null&&h.length?c.jsx("div",{className:"mt-2 space-y-1",children:t.files.map((f,p)=>{const w=f4(f);if(!w)return null;const x=f.pdf_filename||t.pdf_filename,y=EH(x?{...f,pdf_filename:x}:f,w,u.current),g=Fc(y),m=["jpg","jpeg","png","gif","webp","bmp"].includes(g),v=!r,k=g==="pdf";return m?c.jsx("div",{className:"rounded-xl border border-black/5 dark:border-white/10 bg-white/70 dark:bg-white/5 p-2",children:v?c.jsxs(c.Fragment,{children:[c.jsx("a",{href:w,target:"_blank",rel:"noopener noreferrer",className:"block overflow-hidden rounded-lg",children:c.jsx("img",{src:w,alt:y,className:"max-h-64 w-full object-cover",loading:"lazy",onLoad:e})}),c.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[c.jsx(te,{asChild:!0,size:"sm",variant:"ghost",className:"rounded-xl",children:c.jsxs("a",{href:w,target:"_blank",rel:"noopener noreferrer",children:[c.jsx(no,{size:14,className:"mr-1"}),"Open"]})}),c.jsx(te,{size:"sm",variant:"secondary",className:"rounded-xl",children:c.jsxs("span",{role:"link",tabIndex:0,onClick:S=>{S.preventDefault(),_h(w,y)},onKeyDown:S=>{(S.key==="Enter"||S.key===" ")&&(S.preventDefault(),_h(w,y))},className:"inline-flex items-center",children:[c.jsx(ca,{size:14,className:"mr-1"}),"Download"]})})]})]}):c.jsx("div",{className:"overflow-hidden rounded-lg",children:c.jsx("img",{src:w,alt:y,className:"max-h-64 w-full object-cover",loading:"lazy",onLoad:e})})},f.file_id||w||p):c.jsx("div",{className:"rounded-xl border border-black/5 dark:border-white/10 bg-white/70 dark:bg-white/5 p-3",children:c.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[c.jsxs("div",{className:"min-w-0",children:[c.jsx("div",{className:"flex items-center gap-2 text-xs uppercase tracking-wide text-black/50 dark:text-white/60",children:k?c.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-red-500/10 text-red-700 dark:text-red-300 px-2 py-0.5",children:[c.jsx(Av,{size:12}),"PDF"]}):c.jsx("span",{className:"inline-flex items-center gap-1 rounded-full bg-black/5 dark:bg-white/10 px-2 py-0.5",children:g?g.toUpperCase():"FILE"})}),v?c.jsx("div",{className:"mt-1 text-xs font-semibold text-black/80 dark:text-white/85 truncate",children:y}):null]}),v?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(te,{asChild:!0,size:"sm",variant:"ghost",className:"rounded-xl",children:c.jsxs("a",{href:w,target:"_blank",rel:"noopener noreferrer",children:[c.jsx(no,{size:14,className:"mr-1"}),"Open"]})}),c.jsx(te,{size:"sm",variant:"secondary",className:"rounded-xl",children:c.jsxs("span",{role:"link",tabIndex:0,onClick:S=>{S.preventDefault(),_h(w,y)},onKeyDown:S=>{(S.key==="Enter"||S.key===" ")&&(S.preventDefault(),_h(w,y))},className:"inline-flex items-center",children:[c.jsx(ca,{size:14,className:"mr-1"}),"Download"]})})]}):null]})},f.file_id||w||p)})}):null,d.length?c.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:d.map((f,p)=>{const w=f.action_id||f.id||`${f.label}-${p}`,x=f.variant||"secondary";return f.url?c.jsx(te,{asChild:!0,size:"sm",variant:x,className:"rounded-xl",disabled:s,children:c.jsx("a",{href:f.url,target:"_blank",rel:"noopener noreferrer",children:f.label||"Open"})},w):c.jsx(te,{size:"sm",variant:x,className:"rounded-xl",onClick:()=>n==null?void 0:n(f),disabled:s,children:f.label||"Action"},w)})}):null]})})}function bH({value:t,onChange:e,placeholder:n,onEnter:s,disabled:r}){const i=b.useRef(null);b.useEffect(()=>{const a=i.current;if(!a)return;a.style.height="0px";const u=22*5+16;a.style.height=Math.min(a.scrollHeight,u)+"px"},[t]);function o(a){a.key==="Enter"&&!a.shiftKey&&(a.preventDefault(),s==null||s())}return c.jsx("textarea",{ref:i,rows:1,value:t,disabled:r,onChange:a=>e(a.target.value),onKeyDown:o,placeholder:n,className:"w-full resize-none rounded-2xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-4 py-2 text-sm outline-none focus:ring-2 focus:ring-black/10 dark:focus:ring-white/15 overflow-auto",style:{maxHeight:"132px"}})}function wH({text:t}){return c.jsxs("span",{className:"inline-flex items-center gap-2 opacity-80",children:[c.jsx("span",{children:t||"Reviewing"}),c.jsxs("span",{className:"mmg-ellipsis","aria-hidden":"true",children:[c.jsx("span",{className:"mmg-ellipsis-dot",style:{animationDelay:"0ms"}}),c.jsx("span",{className:"mmg-ellipsis-dot",style:{animationDelay:"120ms"}}),c.jsx("span",{className:"mmg-ellipsis-dot",style:{animationDelay:"240ms"}})]})]})}function f_(t){if(!t)return null;const e=String(t).match(/\b(\d{1,6})\b/);return e?Number(e[1]):null}function kH(t){if(!t)return!1;if(t.type&&t.type.startsWith("video/"))return!0;const e=t.name||"";return/\.(mp4|mov|avi|mkv|webm)$/i.test(e)}function _H(t){if(!t)return!1;if(t.type&&t.type.startsWith("image/"))return!0;const e=t.name||"";return/\.(png|jpe?g|gif|webp|bmp)$/i.test(e)}function SH(t){return{id:t.id||t.message_id||crypto.randomUUID(),role:t.role||t.sender||"assistant",content:t.content||t.message||"",files:t.files||t.attachments||[],actions:t.actions||t.buttons||[],pdf_filename:t.pdf_filename||t.pdfFilename,status:null}}function gy(t){return t?String(t).replace(/[_*`]/g,"").replace(/\.+$/,"").replace(/\s+/g," ").trim():""}function jH(t){const e=gy(t);return e?!!(e==="Reviewing"||e.startsWith("Processing")||e.startsWith("Analyzing")):!1}function Fc(t){if(!t)return"";const n=String(t).split("?")[0].split("#")[0].split(".");return n.length<=1?"":n.pop().toLowerCase()}function CH(t){if(!t)return"";try{const n=new URL(t,window.location.href).pathname.split("/").filter(Boolean);return n.length?decodeURIComponent(n[n.length-1]):""}catch{const n=t.split("?")[0].split("#")[0].split("/").filter(Boolean);return n.length?decodeURIComponent(n[n.length-1]):""}}function NH(t){if(!t)return!0;const e=t.trim().toLowerCase();if(!e||e==="file"||e==="download")return!0;const n=e.replace(/\.[^.]+$/,"");return!!(n==="tmp"||n==="temp"||/^[a-f0-9-]{16,}$/.test(n)||/^file[-_]?\d+$/.test(n)||/^(tmp|temp)/.test(n)||/^upload[-_]?.+$/.test(n))}function EH(t,e,n){const s=(t==null?void 0:t.pdf_filename)||"",r=s||(t==null?void 0:t.filename)||(t==null?void 0:t.title)||"",i=CH(e),o=(t==null?void 0:t.file_id)||(t==null?void 0:t.id)||e||r;let a=r||i||"";const l=Fc(a)||Fc(i)||Fc(e);if(s){const u=Fc(a)||"pdf";return a.toLowerCase().endsWith(`.${u}`)||(a=`${a}.${u}`),o&&n&&n.set(o,a),a}return NH(a)?l==="pdf"?a="Review.pdf":l?a=`Attachment.${l}`:a="Attachment":l&&!a.toLowerCase().endsWith(`.${l}`)&&(a=`${a}.${l}`),o&&n&&n.set(o,a),a||(l?`Attachment.${l}`:"Attachment")}async function _h(t,e){try{const n=Pp(),s=await fetch(t,{headers:n?{Authorization:`Bearer ${n}`}:void 0});if(!s.ok)throw new Error("Download failed");const r=await s.blob(),i=URL.createObjectURL(r),o=document.createElement("a");o.href=i,o.download=e,document.body.appendChild(o),o.click(),o.remove(),setTimeout(()=>URL.revokeObjectURL(i),1e3)}catch{const n=document.createElement("a");n.href=t,n.download=e,n.target="_blank",n.rel="noopener noreferrer",document.body.appendChild(n),n.click(),n.remove()}}function p_(){return{id:crypto.randomUUID(),role:"assistant",content:`Good ${TH()}, ready for a video critique?`,files:[],status:null}}function TH(){const t=new Date().getHours();return t>=5&&t<12?"morning":t>=12&&t<17?"afternoon":t>=17&&t<21?"evening":"night"}function xy(t){return String(t||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function _c(t){return t?xy(t).replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer" class="chat-link">$1</a>').replace(/!\[([^\]]*)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer" class="chat-link">[Image: $1]</a>').replace(/\*\*\*(.+?)\*\*\*/g,"<strong><em>$1</em></strong>").replace(/___(.+?)___/g,"<strong><em>$1</em></strong>").replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/__(?!INLINE_CODE_|CODE_BLOCK_)(.+?)__/g,"<strong>$1</strong>").replace(new RegExp("(?<!\\*)\\*(?!\\*)(.+?)(?<!\\*)\\*(?!\\*)","g"),"<em>$1</em>").replace(new RegExp("(?<!\\w)_(?!_)(.+?)(?<!_)_(?!\\w)","g"),"<em>$1</em>").replace(/~~(.+?)~~/g,"<del>$1</del>").replace(/==(.+?)==/g,'<mark class="chat-highlight">$1</mark>'):""}function PH(t){if(!t)return"";const e=[];let n=t.replace(/```(\w*)\n?([\s\S]*?)```/g,(d,h,f)=>{const p=e.length;return e.push({lang:h||"",code:f.trim()}),`__CODE_BLOCK_${p}__`});const s=[];n=n.replace(/`([^`]+)`/g,(d,h)=>{const f=s.length;return s.push(h),`__INLINE_CODE_${f}__`});const r=n.split(`
`);let i=[],o=!1,a=!1,l=!1;for(let d=0;d<r.length;d++){let h=r[d];const f=h.match(/^__CODE_BLOCK_(\d+)__$/);if(f){o&&(i.push("</ul>"),o=!1),a&&(i.push("</ol>"),a=!1),l&&(i.push("</blockquote>"),l=!1);const g=e[parseInt(f[1],10)],m=g.lang?` class="language-${g.lang}"`:"";i.push(`<pre class="chat-code-block"><code${m}>${xy(g.code)}</code></pre>`);continue}const p=h.match(/^(#{1,6})\s+(.*)$/);if(p){o&&(i.push("</ul>"),o=!1),a&&(i.push("</ol>"),a=!1),l&&(i.push("</blockquote>"),l=!1);const g=p[1].length,m=_c(p[2]);i.push(`<h${g} class="chat-header chat-h${g}">${m}</h${g}>`);continue}if(/^[-*_]{3,}\s*$/.test(h)){o&&(i.push("</ul>"),o=!1),a&&(i.push("</ol>"),a=!1),l&&(i.push("</blockquote>"),l=!1),i.push('<hr class="chat-hr">');continue}const w=h.match(/^>\s*(.*)$/);if(w){o&&(i.push("</ul>"),o=!1),a&&(i.push("</ol>"),a=!1),l||(i.push('<blockquote class="chat-blockquote">'),l=!0),i.push(_c(w[1])+"<br>");continue}else l&&(i.push("</blockquote>"),l=!1);const x=h.match(/^(\s*)([-*])\s+(.*)$/);if(x){a&&(i.push("</ol>"),a=!1),o||(i.push('<ul class="chat-list">'),o=!0);const g=_c(x[3]);i.push(`<li>${g}</li>`);continue}else o&&(i.push("</ul>"),o=!1);const y=h.match(/^(\s*)(\d+)\.\s+(.*)$/);if(y){o&&(i.push("</ul>"),o=!1),a||(i.push('<ol class="chat-numbered-list">'),a=!0);const g=_c(y[3]);i.push(`<li>${g}</li>`);continue}else a&&(i.push("</ol>"),a=!1);if(h.trim()===""){i.push("<br>");continue}i.push(_c(h)),d<r.length-1&&i.push("<br>")}o&&i.push("</ul>"),a&&i.push("</ol>"),l&&i.push("</blockquote>");let u=i.join("");return s.forEach((d,h)=>{u=u.replace(`__INLINE_CODE_${h}__`,`<code class="chat-inline-code">${xy(d)}</code>`)}),u}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Td(t){return t+.5|0}const $i=(t,e,n)=>Math.max(Math.min(t,n),e);function zc(t){return $i(Td(t*2.55),0,255)}function Ji(t){return $i(Td(t*255),0,255)}function Wr(t){return $i(Td(t/2.55)/100,0,1)}function m_(t){return $i(Td(t*100),0,100)}const Ns={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},yy=[..."0123456789ABCDEF"],RH=t=>yy[t&15],AH=t=>yy[(t&240)>>4]+yy[t&15],Sh=t=>(t&240)>>4===(t&15),OH=t=>Sh(t.r)&&Sh(t.g)&&Sh(t.b)&&Sh(t.a);function MH(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Ns[t[1]]*17,g:255&Ns[t[2]]*17,b:255&Ns[t[3]]*17,a:e===5?Ns[t[4]]*17:255}:(e===7||e===9)&&(n={r:Ns[t[1]]<<4|Ns[t[2]],g:Ns[t[3]]<<4|Ns[t[4]],b:Ns[t[5]]<<4|Ns[t[6]],a:e===9?Ns[t[7]]<<4|Ns[t[8]]:255})),n}const IH=(t,e)=>t<255?e(t):"";function DH(t){var e=OH(t)?RH:AH;return t?"#"+e(t.r)+e(t.g)+e(t.b)+IH(t.a,e):void 0}const LH=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function DT(t,e,n){const s=e*Math.min(n,1-n),r=(i,o=(i+t/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function $H(t,e,n){const s=(r,i=(r+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function FH(t,e,n){const s=DT(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)s[r]*=1-e-n,s[r]+=e;return s}function zH(t,e,n,s,r){return t===r?(e-n)/s+(e<n?6:0):e===r?(n-t)/s+2:(t-e)/s+4}function x0(t){const n=t.r/255,s=t.g/255,r=t.b/255,i=Math.max(n,s,r),o=Math.min(n,s,r),a=(i+o)/2;let l,u,d;return i!==o&&(d=i-o,u=a>.5?d/(2-i-o):d/(i+o),l=zH(n,s,r,d,i),l=l*60+.5),[l|0,u||0,a]}function y0(t,e,n,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,s)).map(Ji)}function v0(t,e,n){return y0(DT,t,e,n)}function BH(t,e,n){return y0(FH,t,e,n)}function UH(t,e,n){return y0($H,t,e,n)}function LT(t){return(t%360+360)%360}function HH(t){const e=LH.exec(t);let n=255,s;if(!e)return;e[5]!==s&&(n=e[6]?zc(+e[5]):Ji(+e[5]));const r=LT(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?s=BH(r,i,o):e[1]==="hsv"?s=UH(r,i,o):s=v0(r,i,o),{r:s[0],g:s[1],b:s[2],a:n}}function WH(t,e){var n=x0(t);n[0]=LT(n[0]+e),n=v0(n),t.r=n[0],t.g=n[1],t.b=n[2]}function VH(t){if(!t)return;const e=x0(t),n=e[0],s=m_(e[1]),r=m_(e[2]);return t.a<255?`hsla(${n}, ${s}%, ${r}%, ${Wr(t.a)})`:`hsl(${n}, ${s}%, ${r}%)`}const g_={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},x_={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function qH(){const t={},e=Object.keys(x_),n=Object.keys(g_);let s,r,i,o,a;for(s=0;s<e.length;s++){for(o=a=e[s],r=0;r<n.length;r++)i=n[r],a=a.replace(i,g_[i]);i=parseInt(x_[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let jh;function KH(t){jh||(jh=qH(),jh.transparent=[0,0,0,0]);const e=jh[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const GH=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function YH(t){const e=GH.exec(t);let n=255,s,r,i;if(e){if(e[7]!==s){const o=+e[7];n=e[8]?zc(o):$i(o*255,0,255)}return s=+e[1],r=+e[3],i=+e[5],s=255&(e[2]?zc(s):$i(s,0,255)),r=255&(e[4]?zc(r):$i(r,0,255)),i=255&(e[6]?zc(i):$i(i,0,255)),{r:s,g:r,b:i,a:n}}}function QH(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Wr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const fg=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,za=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function XH(t,e,n){const s=za(Wr(t.r)),r=za(Wr(t.g)),i=za(Wr(t.b));return{r:Ji(fg(s+n*(za(Wr(e.r))-s))),g:Ji(fg(r+n*(za(Wr(e.g))-r))),b:Ji(fg(i+n*(za(Wr(e.b))-i))),a:t.a+n*(e.a-t.a)}}function Ch(t,e,n){if(t){let s=x0(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*n,e===0?360:1)),s=v0(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function $T(t,e){return t&&Object.assign(e||{},t)}function y_(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Ji(t[3]))):(e=$T(t,{r:0,g:0,b:0,a:1}),e.a=Ji(e.a)),e}function JH(t){return t.charAt(0)==="r"?YH(t):HH(t)}class qu{constructor(e){if(e instanceof qu)return e;const n=typeof e;let s;n==="object"?s=y_(e):n==="string"&&(s=MH(e)||KH(e)||JH(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=$T(this._rgb);return e&&(e.a=Wr(e.a)),e}set rgb(e){this._rgb=y_(e)}rgbString(){return this._valid?QH(this._rgb):void 0}hexString(){return this._valid?DH(this._rgb):void 0}hslString(){return this._valid?VH(this._rgb):void 0}mix(e,n){if(e){const s=this.rgb,r=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=s.a-r.a,u=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-u,s.r=255&u*s.r+i*r.r+.5,s.g=255&u*s.g+i*r.g+.5,s.b=255&u*s.b+i*r.b+.5,s.a=o*s.a+(1-o)*r.a,this.rgb=s}return this}interpolate(e,n){return e&&(this._rgb=XH(this._rgb,e._rgb,n)),this}clone(){return new qu(this.rgb)}alpha(e){return this._rgb.a=Ji(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Td(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Ch(this._rgb,2,e),this}darken(e){return Ch(this._rgb,2,-e),this}saturate(e){return Ch(this._rgb,1,e),this}desaturate(e){return Ch(this._rgb,1,-e),this}rotate(e){return WH(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Lr(){}const ZH=(()=>{let t=0;return()=>t++})();function bt(t){return t==null}function hn(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function rt(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Bs(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function fr(t,e){return Bs(t)?t:e}function nt(t,e){return typeof t>"u"?e:t}const e8=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,FT=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Nt(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function pt(t,e,n,s){let r,i,o;if(hn(t))for(i=t.length,r=0;r<i;r++)e.call(n,t[r],r);else if(rt(t))for(o=Object.keys(t),i=o.length,r=0;r<i;r++)e.call(n,t[o[r]],o[r])}function Zf(t,e){let n,s,r,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,s=t.length;n<s;++n)if(r=t[n],i=e[n],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function ep(t){if(hn(t))return t.map(ep);if(rt(t)){const e=Object.create(null),n=Object.keys(t),s=n.length;let r=0;for(;r<s;++r)e[n[r]]=ep(t[n[r]]);return e}return t}function zT(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function t8(t,e,n,s){if(!zT(t))return;const r=e[t],i=n[t];rt(r)&&rt(i)?Ku(r,i,s):e[t]=ep(i)}function Ku(t,e,n){const s=hn(e)?e:[e],r=s.length;if(!rt(t))return t;n=n||{};const i=n.merger||t8;let o;for(let a=0;a<r;++a){if(o=s[a],!rt(o))continue;const l=Object.keys(o);for(let u=0,d=l.length;u<d;++u)i(l[u],t,o,n)}return t}function su(t,e){return Ku(t,e,{merger:n8})}function n8(t,e,n){if(!zT(t))return;const s=e[t],r=n[t];rt(s)&&rt(r)?su(s,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=ep(r))}const v_={"":t=>t,x:t=>t.x,y:t=>t.y};function s8(t){const e=t.split("."),n=[];let s="";for(const r of e)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function r8(t){const e=s8(t);return n=>{for(const s of e){if(s==="")break;n=n&&n[s]}return n}}function ha(t,e){return(v_[e]||(v_[e]=r8(e)))(t)}function b0(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Gu=t=>typeof t<"u",ao=t=>typeof t=="function",b_=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function i8(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Et=Math.PI,nn=2*Et,tp=Number.POSITIVE_INFINITY,o8=Et/180,cn=Et/2,So=Et/4,w_=Et*2/3,BT=Math.log10,Zi=Math.sign;function lf(t,e,n){return Math.abs(t-e)<n}function k_(t){const e=Math.round(t);t=lf(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(BT(t))),s=t/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function a8(t){const e=[],n=Math.sqrt(t);let s;for(s=1;s<n;s++)t%s===0&&(e.push(s),e.push(t/s));return n===(n|0)&&e.push(n),e.sort((r,i)=>r-i).pop(),e}function l8(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function np(t){return!l8(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function c8(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function u8(t,e,n){let s,r,i;for(s=0,r=t.length;s<r;s++)i=t[s][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Jr(t){return t*(Et/180)}function d8(t){return t*(180/Et)}function __(t){if(!Bs(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function UT(t,e){const n=e.x-t.x,s=e.y-t.y,r=Math.sqrt(n*n+s*s);let i=Math.atan2(s,n);return i<-.5*Et&&(i+=nn),{angle:i,distance:r}}function h8(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function xr(t){return(t%nn+nn)%nn}function sp(t,e,n,s){const r=xr(t),i=xr(e),o=xr(n),a=xr(i-r),l=xr(o-r),u=xr(r-i),d=xr(r-o);return r===i||r===o||s&&i===o||a>l&&u<d}function es(t,e,n){return Math.max(e,Math.min(n,t))}function f8(t){return es(t,-32768,32767)}function zo(t,e,n,s=1e-6){return t>=Math.min(e,n)-s&&t<=Math.max(e,n)+s}function w0(t,e,n){n=n||(o=>t[o]<e);let s=t.length-1,r=0,i;for(;s-r>1;)i=r+s>>1,n(i)?r=i:s=i;return{lo:r,hi:s}}const vy=(t,e,n,s)=>w0(t,n,s?r=>{const i=t[r][e];return i<n||i===n&&t[r+1][e]===n}:r=>t[r][e]<n),p8=(t,e,n)=>w0(t,n,s=>t[s][e]>=n);function m8(t,e,n){let s=0,r=t.length;for(;s<r&&t[s]<e;)s++;for(;r>s&&t[r-1]>n;)r--;return s>0||r<t.length?t.slice(s,r):t}const HT=["push","pop","shift","splice","unshift"];function g8(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),HT.forEach(n=>{const s="_onData"+b0(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=r.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...i)}),o}})})}function S_(t,e){const n=t._chartjs;if(!n)return;const s=n.listeners,r=s.indexOf(e);r!==-1&&s.splice(r,1),!(s.length>0)&&(HT.forEach(i=>{delete t[i]}),delete t._chartjs)}function WT(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const VT=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function qT(t,e){let n=[],s=!1;return function(...r){n=r,s||(s=!0,VT.call(window,()=>{s=!1,t.apply(e,n)}))}}function x8(t,e){let n;return function(...s){return e?(clearTimeout(n),n=setTimeout(t,e,s)):t.apply(this,s),e}}const KT=t=>t==="start"?"left":t==="end"?"right":"center",ds=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,y8=(t,e,n,s)=>t===(s?"left":"right")?n:t==="center"?(e+n)/2:e,Nh=t=>t===0||t===1,j_=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*nn/n)),C_=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*nn/n)+1,ru={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*cn)+1,easeOutSine:t=>Math.sin(t*cn),easeInOutSine:t=>-.5*(Math.cos(Et*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Nh(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Nh(t)?t:j_(t,.075,.3),easeOutElastic:t=>Nh(t)?t:C_(t,.075,.3),easeInOutElastic(t){return Nh(t)?t:t<.5?.5*j_(t*2,.1125,.45):.5+.5*C_(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-ru.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?ru.easeInBounce(t*2)*.5:ru.easeOutBounce(t*2-1)*.5+.5};function GT(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function N_(t){return GT(t)?t:new qu(t)}function pg(t){return GT(t)?t:new qu(t).saturate(.5).darken(.1).hexString()}const v8=["x","y","borderWidth","radius","tension"],b8=["color","borderColor","backgroundColor"];function w8(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:b8},numbers:{type:"number",properties:v8}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function k8(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const E_=new Map;function _8(t,e){e=e||{};const n=t+JSON.stringify(e);let s=E_.get(n);return s||(s=new Intl.NumberFormat(t,e),E_.set(n,s)),s}function k0(t,e,n){return _8(e,n).format(t)}const S8={values(t){return hn(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const s=this.chart.options.locale;let r,i=t;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(r="scientific"),i=j8(t,n)}const o=BT(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),k0(t,s,l)}};function j8(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var YT={formatters:S8};function C8(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:YT.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const fa=Object.create(null),by=Object.create(null);function iu(t,e){if(!e)return t;const n=e.split(".");for(let s=0,r=n.length;s<r;++s){const i=n[s];t=t[i]||(t[i]=Object.create(null))}return t}function mg(t,e,n){return typeof e=="string"?Ku(iu(t,e),n):Ku(iu(t,""),e)}class N8{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,r)=>pg(r.backgroundColor),this.hoverBorderColor=(s,r)=>pg(r.borderColor),this.hoverColor=(s,r)=>pg(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return mg(this,e,n)}get(e){return iu(this,e)}describe(e,n){return mg(by,e,n)}override(e,n){return mg(fa,e,n)}route(e,n,s,r){const i=iu(this,e),o=iu(this,s),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],u=o[r];return rt(l)?Object.assign({},u,l):nt(l,u)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Xt=new N8({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[w8,k8,C8]);function E8(t){return!t||bt(t.size)||bt(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function T_(t,e,n,s,r){let i=e[r];return i||(i=e[r]=t.measureText(r).width,n.push(r)),i>s&&(s=i),s}function jo(t,e,n){const s=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*s)/s+r}function P_(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function R_(t,e,n,s){QT(t,e,n,s,null)}function QT(t,e,n,s,r){let i,o,a,l,u,d,h,f;const p=e.pointStyle,w=e.rotation,x=e.radius;let y=(w||0)*o8;if(p&&typeof p=="object"&&(i=p.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,s),t.rotate(y),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(x)||x<=0)){switch(t.beginPath(),p){default:r?t.ellipse(n,s,r/2,x,0,0,nn):t.arc(n,s,x,0,nn),t.closePath();break;case"triangle":d=r?r/2:x,t.moveTo(n+Math.sin(y)*d,s-Math.cos(y)*x),y+=w_,t.lineTo(n+Math.sin(y)*d,s-Math.cos(y)*x),y+=w_,t.lineTo(n+Math.sin(y)*d,s-Math.cos(y)*x),t.closePath();break;case"rectRounded":u=x*.516,l=x-u,o=Math.cos(y+So)*l,h=Math.cos(y+So)*(r?r/2-u:l),a=Math.sin(y+So)*l,f=Math.sin(y+So)*(r?r/2-u:l),t.arc(n-h,s-a,u,y-Et,y-cn),t.arc(n+f,s-o,u,y-cn,y),t.arc(n+h,s+a,u,y,y+cn),t.arc(n-f,s+o,u,y+cn,y+Et),t.closePath();break;case"rect":if(!w){l=Math.SQRT1_2*x,d=r?r/2:l,t.rect(n-d,s-l,2*d,2*l);break}y+=So;case"rectRot":h=Math.cos(y)*(r?r/2:x),o=Math.cos(y)*x,a=Math.sin(y)*x,f=Math.sin(y)*(r?r/2:x),t.moveTo(n-h,s-a),t.lineTo(n+f,s-o),t.lineTo(n+h,s+a),t.lineTo(n-f,s+o),t.closePath();break;case"crossRot":y+=So;case"cross":h=Math.cos(y)*(r?r/2:x),o=Math.cos(y)*x,a=Math.sin(y)*x,f=Math.sin(y)*(r?r/2:x),t.moveTo(n-h,s-a),t.lineTo(n+h,s+a),t.moveTo(n+f,s-o),t.lineTo(n-f,s+o);break;case"star":h=Math.cos(y)*(r?r/2:x),o=Math.cos(y)*x,a=Math.sin(y)*x,f=Math.sin(y)*(r?r/2:x),t.moveTo(n-h,s-a),t.lineTo(n+h,s+a),t.moveTo(n+f,s-o),t.lineTo(n-f,s+o),y+=So,h=Math.cos(y)*(r?r/2:x),o=Math.cos(y)*x,a=Math.sin(y)*x,f=Math.sin(y)*(r?r/2:x),t.moveTo(n-h,s-a),t.lineTo(n+h,s+a),t.moveTo(n+f,s-o),t.lineTo(n-f,s+o);break;case"line":o=r?r/2:Math.cos(y)*x,a=Math.sin(y)*x,t.moveTo(n-o,s-a),t.lineTo(n+o,s+a);break;case"dash":t.moveTo(n,s),t.lineTo(n+Math.cos(y)*(r?r/2:x),s+Math.sin(y)*x);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function XT(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function _0(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function S0(t){t.restore()}function T8(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),bt(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function P8(t,e,n,s,r){if(r.strikethrough||r.underline){const i=t.measureText(s),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,u=n+i.actualBoundingBoxDescent,d=r.strikethrough?(l+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,d),t.lineTo(a,d),t.stroke()}}function R8(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function rp(t,e,n,s,r,i={}){const o=hn(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,u;for(t.save(),t.font=r.string,T8(t,i),l=0;l<o.length;++l)u=o[l],i.backdrop&&R8(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),bt(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(u,n,s,i.maxWidth)),t.fillText(u,n,s,i.maxWidth),P8(t,n,s,u,i),s+=Number(r.lineHeight);t.restore()}function ip(t,e){const{x:n,y:s,w:r,h:i,radius:o}=e;t.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*Et,Et,!0),t.lineTo(n,s+i-o.bottomLeft),t.arc(n+o.bottomLeft,s+i-o.bottomLeft,o.bottomLeft,Et,cn,!0),t.lineTo(n+r-o.bottomRight,s+i),t.arc(n+r-o.bottomRight,s+i-o.bottomRight,o.bottomRight,cn,0,!0),t.lineTo(n+r,s+o.topRight),t.arc(n+r-o.topRight,s+o.topRight,o.topRight,0,-cn,!0),t.lineTo(n+o.topLeft,s)}const A8=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,O8=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function M8(t,e){const n=(""+t).match(A8);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const I8=t=>+t||0;function j0(t,e){const n={},s=rt(e),r=s?Object.keys(e):e,i=rt(t)?s?o=>nt(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=I8(i(o));return n}function JT(t){return j0(t,{top:"y",right:"x",bottom:"y",left:"x"})}function wl(t){return j0(t,["topLeft","topRight","bottomLeft","bottomRight"])}function lr(t){const e=JT(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function ts(t,e){t=t||{},e=e||Xt.font;let n=nt(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let s=nt(t.style,e.style);s&&!(""+s).match(O8)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:nt(t.family,e.family),lineHeight:M8(nt(t.lineHeight,e.lineHeight),n),size:n,style:s,weight:nt(t.weight,e.weight),string:""};return r.string=E8(r),r}function Eh(t,e,n,s){let r,i,o;for(r=0,i=t.length;r<i;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function D8(t,e,n){const{min:s,max:r}=t,i=FT(e,(r-s)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(s,-Math.abs(i)),max:o(r,i)}}function oc(t,e){return Object.assign(Object.create(t),e)}function C0(t,e=[""],n,s,r=()=>t[0]){const i=n||t;typeof s>"u"&&(s=n2("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:s,_getTarget:r,override:a=>C0([a,...t],e,i,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return e2(a,l,()=>W8(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return O_(a).includes(l)},ownKeys(a){return O_(a)},set(a,l,u){const d=a._storage||(a._storage=r());return a[l]=d[l]=u,delete a._keys,!0}})}function Kl(t,e,n,s){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:ZT(t,s),setContext:i=>Kl(t,i,n,s),override:i=>Kl(t.override(i),e,n,s)};return new Proxy(r,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return e2(i,o,()=>$8(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function ZT(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:s=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:s,isScriptable:ao(n)?n:()=>n,isIndexable:ao(s)?s:()=>s}}const L8=(t,e)=>t?t+b0(e):e,N0=(t,e)=>rt(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function e2(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const s=n();return t[e]=s,s}function $8(t,e,n){const{_proxy:s,_context:r,_subProxy:i,_descriptors:o}=t;let a=s[e];return ao(a)&&o.isScriptable(e)&&(a=F8(e,a,t,n)),hn(a)&&a.length&&(a=z8(e,a,t,o.isIndexable)),N0(e,a)&&(a=Kl(a,r,i&&i[e],o)),a}function F8(t,e,n,s){const{_proxy:r,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||s);return a.delete(t),N0(t,l)&&(l=E0(r._scopes,r,t,l)),l}function z8(t,e,n,s){const{_proxy:r,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&s(t))return e[i.index%e.length];if(rt(e[0])){const l=e,u=r._scopes.filter(d=>d!==l);e=[];for(const d of l){const h=E0(u,r,t,d);e.push(Kl(h,i,o&&o[t],a))}}return e}function t2(t,e,n){return ao(t)?t(e,n):t}const B8=(t,e)=>t===!0?e:typeof t=="string"?ha(e,t):void 0;function U8(t,e,n,s,r){for(const i of e){const o=B8(n,i);if(o){t.add(o);const a=t2(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==s)return a}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function E0(t,e,n,s){const r=e._rootScopes,i=t2(e._fallback,n,s),o=[...t,...r],a=new Set;a.add(s);let l=A_(a,o,n,i||n,s);return l===null||typeof i<"u"&&i!==n&&(l=A_(a,o,i,l,s),l===null)?!1:C0(Array.from(a),[""],r,i,()=>H8(e,n,s))}function A_(t,e,n,s,r){for(;n;)n=U8(t,e,n,s,r);return n}function H8(t,e,n){const s=t._getTarget();e in s||(s[e]={});const r=s[e];return hn(r)&&rt(n)?n:r||{}}function W8(t,e,n,s){let r;for(const i of e)if(r=n2(L8(i,t),n),typeof r<"u")return N0(t,r)?E0(n,s,t,r):r}function n2(t,e){for(const n of e){if(!n)continue;const s=n[t];if(typeof s<"u")return s}}function O_(t){let e=t._keys;return e||(e=t._keys=V8(t._scopes)),e}function V8(t){const e=new Set;for(const n of t)for(const s of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(s);return Array.from(e)}function T0(){return typeof window<"u"&&typeof document<"u"}function P0(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function op(t,e,n){let s;return typeof t=="string"?(s=parseInt(t,10),t.indexOf("%")!==-1&&(s=s/100*e.parentNode[n])):s=t,s}const qp=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function q8(t,e){return qp(t).getPropertyValue(e)}const K8=["top","right","bottom","left"];function ta(t,e,n){const s={};n=n?"-"+n:"";for(let r=0;r<4;r++){const i=K8[r];s[i]=parseFloat(t[e+"-"+i+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const G8=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function Y8(t,e){const n=t.touches,s=n&&n.length?n[0]:t,{offsetX:r,offsetY:i}=s;let o=!1,a,l;if(G8(r,i,t.target))a=r,l=i;else{const u=e.getBoundingClientRect();a=s.clientX-u.left,l=s.clientY-u.top,o=!0}return{x:a,y:l,box:o}}function Ro(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:s}=e,r=qp(n),i=r.boxSizing==="border-box",o=ta(r,"padding"),a=ta(r,"border","width"),{x:l,y:u,box:d}=Y8(t,n),h=o.left+(d&&a.left),f=o.top+(d&&a.top);let{width:p,height:w}=e;return i&&(p-=o.width+a.width,w-=o.height+a.height),{x:Math.round((l-h)/p*n.width/s),y:Math.round((u-f)/w*n.height/s)}}function Q8(t,e,n){let s,r;if(e===void 0||n===void 0){const i=t&&P0(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=qp(i),l=ta(a,"border","width"),u=ta(a,"padding");e=o.width-u.width-l.width,n=o.height-u.height-l.height,s=op(a.maxWidth,i,"clientWidth"),r=op(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:s||tp,maxHeight:r||tp}}const Fi=t=>Math.round(t*10)/10;function X8(t,e,n,s){const r=qp(t),i=ta(r,"margin"),o=op(r.maxWidth,t,"clientWidth")||tp,a=op(r.maxHeight,t,"clientHeight")||tp,l=Q8(t,e,n);let{width:u,height:d}=l;if(r.boxSizing==="content-box"){const f=ta(r,"border","width"),p=ta(r,"padding");u-=p.width+f.width,d-=p.height+f.height}return u=Math.max(0,u-i.width),d=Math.max(0,s?u/s:d-i.height),u=Fi(Math.min(u,o,l.maxWidth)),d=Fi(Math.min(d,a,l.maxHeight)),u&&!d&&(d=Fi(u/2)),(e!==void 0||n!==void 0)&&s&&l.height&&d>l.height&&(d=l.height,u=Fi(Math.floor(d*s))),{width:u,height:d}}function M_(t,e,n){const s=e||1,r=Fi(t.height*s),i=Fi(t.width*s);t.height=Fi(t.height),t.width=Fi(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==s||o.height!==r||o.width!==i?(t.currentDevicePixelRatio=s,o.height=r,o.width=i,t.ctx.setTransform(s,0,0,s,0,0),!0):!1}const J8=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};T0()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function I_(t,e){const n=q8(t,e),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}const Z8=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},eW=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function kl(t,e,n){return t?Z8(e,n):eW()}function s2(t,e){let n,s;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=s)}function r2(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Th(t,e,n){return t.options.clip?t[n]:e[n]}function tW(t,e){const{xScale:n,yScale:s}=t;return n&&s?{left:Th(n,e,"left"),right:Th(n,e,"right"),top:Th(s,e,"top"),bottom:Th(s,e,"bottom")}:e}function nW(t,e){const n=e._clip;if(n.disabled)return!1;const s=tW(e,t.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class sW{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,s,r){const i=n.listeners[r],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=VT.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const i=s.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(r.draw(),this._notify(r,s,e,"progress")),i.length||(s.running=!1,this._notify(r,s,e,"complete"),s.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let s=n.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,s)),s}listen(e,n,s){this._getAnims(e).listeners[n].push(s)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const s=n.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Fr=new sW;const D_="transparent",rW={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const s=N_(t||D_),r=s.valid&&N_(e||D_);return r&&r.valid?r.mix(s,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class iW{constructor(e,n,s,r){const i=n[s];r=Eh([e.to,r,i,e.from]);const o=Eh([e.from,i,r]);this._active=!0,this._fn=e.fn||rW[e.type||typeof o],this._easing=ru[e.easing]||ru.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=s,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,s){if(this._active){this._notify(!1);const r=this._target[this._prop],i=s-this._start,o=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Eh([e.to,n,r,e.from]),this._from=Eh([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,s=this._duration,r=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<s),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=i;return}l=n/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,s)=>{e.push({res:n,rej:s})})}_notify(e){const n=e?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][n]()}}class i2{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!rt(e))return;const n=Object.keys(Xt.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const i=e[r];if(!rt(i))return;const o={};for(const a of n)o[a]=i[a];(hn(i.properties)&&i.properties||[r]).forEach(a=>{(a===r||!s.has(a))&&s.set(a,o)})})}_animateOptions(e,n){const s=n.options,r=aW(e,s);if(!r)return[];const i=this._createAnimations(r,s);return s.$shared&&oW(e.options.$animations,s).then(()=>{e.options=s},()=>{}),i}_createAnimations(e,n){const s=this._properties,r=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const u=o[l];if(u.charAt(0)==="$")continue;if(u==="options"){r.push(...this._animateOptions(e,n));continue}const d=n[u];let h=i[u];const f=s.get(u);if(h)if(f&&h.active()){h.update(f,d,a);continue}else h.cancel();if(!f||!f.duration){e[u]=d;continue}i[u]=h=new iW(f,e,u,d),r.push(h)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const s=this._createAnimations(e,n);if(s.length)return Fr.add(this._chart,s),!0}}function oW(t,e){const n=[],s=Object.keys(e);for(let r=0;r<s.length;r++){const i=t[s[r]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function aW(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function L_(t,e){const n=t&&t.options||{},s=n.reverse,r=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:s?i:r,end:s?r:i}}function lW(t,e,n){if(n===!1)return!1;const s=L_(t,n),r=L_(e,n);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}function cW(t){let e,n,s,r;return rt(t)?(e=t.top,n=t.right,s=t.bottom,r=t.left):e=n=s=r=t,{top:e,right:n,bottom:s,left:r,disabled:t===!1}}function o2(t,e){const n=[],s=t._getSortedDatasetMetas(e);let r,i;for(r=0,i=s.length;r<i;++r)n.push(s[r].index);return n}function $_(t,e,n,s={}){const r=t.keys,i=s.mode==="single";let o,a,l,u;if(e===null)return;let d=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(d=!0,s.all)continue;break}u=t.values[l],Bs(u)&&(i||e===0||Zi(e)===Zi(u))&&(e+=u)}return!d&&!s.all?0:e}function uW(t,e){const{iScale:n,vScale:s}=e,r=n.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,u,d;for(l=0,u=o.length;l<u;++l)d=o[l],a[l]={[r]:d,[i]:t[d]};return a}function gg(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function dW(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function hW(t){const{min:e,max:n,minDefined:s,maxDefined:r}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function fW(t,e,n){const s=t[e]||(t[e]={});return s[n]||(s[n]={})}function F_(t,e,n,s){for(const r of e.getMatchingVisibleMetas(s).reverse()){const i=t[r.index];if(n&&i>0||!n&&i<0)return r.index}return null}function z_(t,e){const{chart:n,_cachedMeta:s}=t,r=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=s,l=i.axis,u=o.axis,d=dW(i,o,s),h=e.length;let f;for(let p=0;p<h;++p){const w=e[p],{[l]:x,[u]:y}=w,g=w._stacks||(w._stacks={});f=g[u]=fW(r,d,x),f[a]=y,f._top=F_(f,o,!0,s.type),f._bottom=F_(f,o,!1,s.type);const m=f._visualValues||(f._visualValues={});m[a]=y}}function xg(t,e){const n=t.scales;return Object.keys(n).filter(s=>n[s].axis===e).shift()}function pW(t,e){return oc(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function mW(t,e,n){return oc(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Sc(t,e){const n=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const r of e){const i=r._stacks;if(!i||i[s]===void 0||i[s][n]===void 0)return;delete i[s][n],i[s]._visualValues!==void 0&&i[s]._visualValues[n]!==void 0&&delete i[s]._visualValues[n]}}}const yg=t=>t==="reset"||t==="none",B_=(t,e)=>e?t:Object.assign({},t),gW=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:o2(n,!0),values:null};class _l{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=gg(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Sc(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,s=this.getDataset(),r=(h,f,p,w)=>h==="x"?f:h==="r"?w:p,i=n.xAxisID=nt(s.xAxisID,xg(e,"x")),o=n.yAxisID=nt(s.yAxisID,xg(e,"y")),a=n.rAxisID=nt(s.rAxisID,xg(e,"r")),l=n.indexAxis,u=n.iAxisID=r(l,i,o,a),d=n.vAxisID=r(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&S_(this._data,this),e._stacked&&Sc(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),s=this._data;if(rt(n)){const r=this._cachedMeta;this._data=uW(n,r)}else if(s!==n){if(s){S_(s,this);const r=this._cachedMeta;Sc(r),r._parsed=[]}n&&Object.isExtensible(n)&&g8(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const i=n._stacked;n._stacked=gg(n.vScale,n),n.stack!==s.stack&&(r=!0,Sc(n),n.stack=s.stack),this._resyncElements(e),(r||i!==n._stacked)&&(z_(this,n._parsed),n._stacked=gg(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:s,_data:r}=this,{iScale:i,_stacked:o}=s,a=i.axis;let l=e===0&&n===r.length?!0:s._sorted,u=e>0&&s._parsed[e-1],d,h,f;if(this._parsing===!1)s._parsed=r,s._sorted=!0,f=r;else{hn(r[e])?f=this.parseArrayData(s,r,e,n):rt(r[e])?f=this.parseObjectData(s,r,e,n):f=this.parsePrimitiveData(s,r,e,n);const p=()=>h[a]===null||u&&h[a]<u[a];for(d=0;d<n;++d)s._parsed[d+e]=h=f[d],l&&(p()&&(l=!1),u=h);s._sorted=l}o&&z_(this,f)}parsePrimitiveData(e,n,s,r){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,u=i.getLabels(),d=i===o,h=new Array(r);let f,p,w;for(f=0,p=r;f<p;++f)w=f+s,h[f]={[a]:d||i.parse(u[w],w),[l]:o.parse(n[w],w)};return h}parseArrayData(e,n,s,r){const{xScale:i,yScale:o}=e,a=new Array(r);let l,u,d,h;for(l=0,u=r;l<u;++l)d=l+s,h=n[d],a[l]={x:i.parse(h[0],d),y:o.parse(h[1],d)};return a}parseObjectData(e,n,s,r){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=new Array(r);let d,h,f,p;for(d=0,h=r;d<h;++d)f=d+s,p=n[f],u[d]={x:i.parse(ha(p,a),f),y:o.parse(ha(p,l),f)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,s){const r=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:o2(r,!0),values:n._stacks[e.axis]._visualValues};return $_(a,o,i.index,{mode:s})}updateRangeFromParsed(e,n,s,r){const i=s[n.axis];let o=i===null?NaN:i;const a=r&&s._stacks[n.axis];r&&a&&(r.values=a,o=$_(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const s=this._cachedMeta,r=s._parsed,i=s._sorted&&e===s.iScale,o=r.length,a=this._getOtherScale(e),l=gW(n,s,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=hW(a);let f,p;function w(){p=r[f];const x=p[a.axis];return!Bs(p[e.axis])||d>x||h<x}for(f=0;f<o&&!(!w()&&(this.updateRangeFromParsed(u,e,p,l),i));++f);if(i){for(f=o-1;f>=0;--f)if(!w()){this.updateRangeFromParsed(u,e,p,l);break}}return u}getAllParsedValues(e){const n=this._cachedMeta._parsed,s=[];let r,i,o;for(r=0,i=n.length;r<i;++r)o=n[r][e.axis],Bs(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,s=n.iScale,r=n.vScale,i=this.getParsed(e);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=cW(nt(this.options.clip,lW(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,s=this._cachedMeta,r=s.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,u=this.options.drawActiveElementsOnTop;let d;for(s.dataset&&s.dataset.draw(e,i,a,l),d=a;d<a+l;++d){const h=r[d];h.hidden||(h.active&&u?o.push(h):h.draw(e,i))}for(d=0;d<o.length;++d)o[d].draw(e,i)}getStyle(e,n){const s=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,n,s){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=mW(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=pW(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=s,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",s){const r=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&Gu(s);if(a)return B_(a,l);const u=this.chart.config,d=u.datasetElementScopeKeys(this._type,e),h=r?[`${e}Hover`,"hover",e,""]:[e,""],f=u.getOptionScopes(this.getDataset(),d),p=Object.keys(Xt.elements[e]),w=()=>this.getContext(s,r,n),x=u.resolveNamedOptions(f,p,w,h);return x.$shared&&(x.$shared=l,i[o]=Object.freeze(B_(x,l))),x}_resolveAnimations(e,n,s){const r=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(r.options.animation!==!1){const d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,n),f=d.getOptionScopes(this.getDataset(),h);l=d.createResolver(f,this.getContext(e,s,n))}const u=new i2(r,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||yg(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const s=this.resolveDataElementOptions(e,n),r=this._sharedOptions,i=this.getSharedOptions(s),o=this.includeOptions(n,i)||i!==r;return this.updateSharedOptions(i,n,s),{sharedOptions:i,includeOptions:o}}updateElement(e,n,s,r){yg(r)?Object.assign(e,s):this._resolveAnimations(n,r).update(e,s)}updateSharedOptions(e,n,s){e&&!yg(n)&&this._resolveAnimations(void 0,n).update(e,s)}_setStyle(e,n,s,r){e.active=r;const i=this.getStyle(n,r);this._resolveAnimations(n,s,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,n,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,s=this._cachedMeta.data;for(const[a,l,u]of this._syncList)this[a](l,u);this._syncList=[];const r=s.length,i=n.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,n,s=!0){const r=this._cachedMeta,i=r.data,o=e+n;let a;const l=u=>{for(u.length+=n,a=u.length-1;a>=o;a--)u[a]=u[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),s&&this.updateElements(i,e,n,"reset")}updateElements(e,n,s,r){}_removeElements(e,n){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(e,n);s._stacked&&Sc(s,r)}s.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,s,r]=e;this[n](s,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}$e(_l,"defaults",{}),$e(_l,"datasetElementType",null),$e(_l,"dataElementType",null);function xW(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let s=[];for(let r=0,i=n.length;r<i;r++)s=s.concat(n[r].controller.getAllParsedValues(t));t._cache.$bar=WT(s.sort((r,i)=>r-i))}return t._cache.$bar}function yW(t){const e=t.iScale,n=xW(e,t.type);let s=e._length,r,i,o,a;const l=()=>{o===32767||o===-32768||(Gu(a)&&(s=Math.min(s,Math.abs(o-a)||s)),a=o)};for(r=0,i=n.length;r<i;++r)o=e.getPixelForValue(n[r]),l();for(a=void 0,r=0,i=e.ticks.length;r<i;++r)o=e.getPixelForTick(r),l();return s}function vW(t,e,n,s){const r=n.barThickness;let i,o;return bt(r)?(i=e.min*n.categoryPercentage,o=n.barPercentage):(i=r*s,o=1),{chunk:i/s,ratio:o,start:e.pixels[t]-i/2}}function bW(t,e,n,s){const r=e.pixels,i=r[t];let o=t>0?r[t-1]:null,a=t<r.length-1?r[t+1]:null;const l=n.categoryPercentage;o===null&&(o=i-(a===null?e.end-e.start:a-i)),a===null&&(a=i+i-o);const u=i-(i-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/s,ratio:n.barPercentage,start:u}}function wW(t,e,n,s){const r=n.parse(t[0],s),i=n.parse(t[1],s),o=Math.min(r,i),a=Math.max(r,i);let l=o,u=a;Math.abs(o)>Math.abs(a)&&(l=a,u=o),e[n.axis]=u,e._custom={barStart:l,barEnd:u,start:r,end:i,min:o,max:a}}function a2(t,e,n,s){return hn(t)?wW(t,e,n,s):e[n.axis]=n.parse(t,s),e}function U_(t,e,n,s){const r=t.iScale,i=t.vScale,o=r.getLabels(),a=r===i,l=[];let u,d,h,f;for(u=n,d=n+s;u<d;++u)f=e[u],h={},h[r.axis]=a||r.parse(o[u],u),l.push(a2(f,h,i,u));return l}function vg(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function kW(t,e,n){return t!==0?Zi(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function _W(t){let e,n,s,r,i;return t.horizontal?(e=t.base>t.x,n="left",s="right"):(e=t.base<t.y,n="bottom",s="top"),e?(r="end",i="start"):(r="start",i="end"),{start:n,end:s,reverse:e,top:r,bottom:i}}function SW(t,e,n,s){let r=e.borderSkipped;const i={};if(!r){t.borderSkipped=i;return}if(r===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:u,bottom:d}=_W(t);r==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===s?r=u:(n._bottom||0)===s?r=d:(i[H_(d,o,a,l)]=!0,r=u)),i[H_(r,o,a,l)]=!0,t.borderSkipped=i}function H_(t,e,n,s){return s?(t=jW(t,e,n),t=W_(t,n,e)):t=W_(t,e,n),t}function jW(t,e,n){return t===e?n:t===n?e:t}function W_(t,e,n){return t==="start"?e:t==="end"?n:t}function CW(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class cf extends _l{parsePrimitiveData(e,n,s,r){return U_(e,n,s,r)}parseArrayData(e,n,s,r){return U_(e,n,s,r)}parseObjectData(e,n,s,r){const{iScale:i,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=i.axis==="x"?a:l,d=o.axis==="x"?a:l,h=[];let f,p,w,x;for(f=s,p=s+r;f<p;++f)x=n[f],w={},w[i.axis]=i.parse(ha(x,u),f),h.push(a2(ha(x,d),w,o,f));return h}updateRangeFromParsed(e,n,s,r){super.updateRangeFromParsed(e,n,s,r);const i=s._custom;i&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:s,vScale:r}=n,i=this.getParsed(e),o=i._custom,a=vg(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+s.getLabelForValue(i[s.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,s,r){const i=r==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),u=a.isHorizontal(),d=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(n,r);for(let p=n;p<n+s;p++){const w=this.getParsed(p),x=i||bt(w[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),y=this._calculateBarIndexPixels(p,d),g=(w._stacks||{})[a.axis],m={horizontal:u,base:x.base,enableBorderRadius:!g||vg(w._custom)||o===g._top||o===g._bottom,x:u?x.head:y.center,y:u?y.center:x.head,height:u?y.size:Math.abs(x.size),width:u?Math.abs(x.size):y.size};f&&(m.options=h||this.resolveDataElementOptions(p,e[p].active?"active":r));const v=m.options||e[p].options;SW(m,v,g,o),CW(m,v,d.ratio),this.updateElement(e[p],p,m,r)}}_getStacks(e,n){const{iScale:s}=this._cachedMeta,r=s.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),i=s.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[s.axis],u=d=>{const h=d._parsed.find(p=>p[s.axis]===l),f=h&&h[d.vScale.axis];if(bt(f)||isNaN(f))return!0};for(const d of r)if(!(n!==void 0&&u(d))&&((i===!1||o.indexOf(d.stack)===-1||i===void 0&&d.stack===void 0)&&o.push(d.stack),d.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(s=>e[s].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)e[nt(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,s){const r=this._getStacks(e,s),i=n!==void 0?r.indexOf(n):-1;return i===-1?r.length-1:i}_getRuler(){const e=this.options,n=this._cachedMeta,s=n.iScale,r=[];let i,o;for(i=0,o=n.data.length;i<o;++i)r.push(s.getPixelForValue(this.getParsed(i)[s.axis],i));const a=e.barThickness;return{min:a||yW(n),pixels:r,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:s,index:r},options:{base:i,minBarLength:o}}=this,a=i||0,l=this.getParsed(e),u=l._custom,d=vg(u);let h=l[n.axis],f=0,p=s?this.applyStack(n,l,s):h,w,x;p!==h&&(f=p-h,p=h),d&&(h=u.barStart,p=u.barEnd-u.barStart,h!==0&&Zi(h)!==Zi(u.barEnd)&&(f=0),f+=h);const y=!bt(i)&&!d?i:f;let g=n.getPixelForValue(y);if(this.chart.getDataVisibility(e)?w=n.getPixelForValue(f+p):w=g,x=w-g,Math.abs(x)<o){x=kW(x,n,a)*o,h===a&&(g-=x/2);const m=n.getPixelForDecimal(0),v=n.getPixelForDecimal(1),k=Math.min(m,v),S=Math.max(m,v);g=Math.max(Math.min(g,S),k),w=g+x,s&&!d&&(l._stacks[n.axis]._visualValues[r]=n.getValueForPixel(w)-n.getValueForPixel(g))}if(g===n.getPixelForValue(a)){const m=Zi(x)*n.getLineWidthForValue(a)/2;g+=m,x-=m}return{size:x,base:g,head:w,center:w+x/2}}_calculateBarIndexPixels(e,n){const s=n.scale,r=this.options,i=r.skipNull,o=nt(r.maxBarThickness,1/0);let a,l;const u=this._getAxisCount();if(n.grouped){const d=i?this._getStackCount(e):n.stackCount,h=r.barThickness==="flex"?bW(e,n,r,d*u):vW(e,n,r,d*u),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,p=this._getAxis().indexOf(nt(f,this.getFirstScaleIdForIndexAxis())),w=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+p;a=h.start+h.chunk*w+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=s.getPixelForValue(this.getParsed(e)[s.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,s=e.data,r=s.length;let i=0;for(;i<r;++i)this.getParsed(i)[n.axis]!==null&&!s[i].hidden&&s[i].draw(this._ctx)}}$e(cf,"id","bar"),$e(cf,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),$e(cf,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function NW(t,e,n){let s=1,r=1,i=0,o=0;if(e<nn){const a=t,l=a+e,u=Math.cos(a),d=Math.sin(a),h=Math.cos(l),f=Math.sin(l),p=(v,k,S)=>sp(v,a,l,!0)?1:Math.max(k,k*n,S,S*n),w=(v,k,S)=>sp(v,a,l,!0)?-1:Math.min(k,k*n,S,S*n),x=p(0,u,h),y=p(cn,d,f),g=w(Et,u,h),m=w(Et+cn,d,f);s=(x-g)/2,r=(y-m)/2,i=-(x+g)/2,o=-(y+m)/2}return{ratioX:s,ratioY:r,offsetX:i,offsetY:o}}class ol extends _l{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let i=l=>+s[l];if(rt(s[e])){const{key:l="value"}=this._parsing;i=u=>+ha(s[u],l)}let o,a;for(o=e,a=e+n;o<a;++o)r._parsed[o]=i(o)}}_getRotation(){return Jr(this.options.rotation-90)}_getCircumference(){return Jr(this.options.circumference)}_getRotationExtents(){let e=nn,n=-nn;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const r=this.chart.getDatasetMeta(s).controller,i=r._getRotation(),o=r._getCircumference();e=Math.min(e,i),n=Math.max(n,i+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:s}=n,r=this._cachedMeta,i=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),l=Math.min(e8(this.options.cutout,a),1),u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:w,offsetY:x}=NW(h,d,l),y=(s.width-o)/f,g=(s.height-o)/p,m=Math.max(Math.min(y,g)/2,0),v=FT(this.options.radius,m),k=Math.max(v*l,0),S=(v-k)/this._getVisibleDatasetWeightTotal();this.offsetX=w*v,this.offsetY=x*v,r.total=this.calculateTotal(),this.outerRadius=v-S*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-S*u,0),this.updateElements(i,0,i.length,e)}_circumference(e,n){const s=this.options,r=this._cachedMeta,i=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/nn)}updateElements(e,n,s,r){const i=r==="reset",o=this.chart,a=o.chartArea,u=o.options.animation,d=(a.left+a.right)/2,h=(a.top+a.bottom)/2,f=i&&u.animateScale,p=f?0:this.innerRadius,w=f?0:this.outerRadius,{sharedOptions:x,includeOptions:y}=this._getSharedOptions(n,r);let g=this._getRotation(),m;for(m=0;m<n;++m)g+=this._circumference(m,i);for(m=n;m<n+s;++m){const v=this._circumference(m,i),k=e[m],S={x:d+this.offsetX,y:h+this.offsetY,startAngle:g,endAngle:g+v,circumference:v,outerRadius:w,innerRadius:p};y&&(S.options=x||this.resolveDataElementOptions(m,k.active?"active":r)),g+=v,this.updateElement(k,m,S,r)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let s=0,r;for(r=0;r<n.length;r++){const i=e._parsed[r];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(s+=Math.abs(i))}return s}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?nn*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart,r=s.data.labels||[],i=k0(n._parsed[e],s.options.locale);return{label:r[e]||"",value:i}}getMaxBorderWidth(e){let n=0;const s=this.chart;let r,i,o,a,l;if(!e){for(r=0,i=s.data.datasets.length;r<i;++r)if(s.isDatasetVisible(r)){o=s.getDatasetMeta(r),e=o.data,a=o.controller;break}}if(!e)return 0;for(r=0,i=e.length;r<i;++r)l=a.resolveDataElementOptions(r),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let s=0,r=e.length;s<r;++s){const i=this.resolveDataElementOptions(s);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(e){return Math.max(nt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}$e(ol,"id","doughnut"),$e(ol,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),$e(ol,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),$e(ol,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:a}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((l,u)=>{const h=e.getDatasetMeta(0).controller.getStyle(u);return{text:l,fillStyle:h.backgroundColor,fontColor:i,hidden:!e.getDataVisibility(u),lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:h.borderWidth,strokeStyle:h.borderColor,textAlign:r,pointStyle:s,borderRadius:o&&(a||h.borderRadius),index:u}}):[]}},onClick(e,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}});class wy extends ol{}$e(wy,"id","pie"),$e(wy,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});function Co(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class R0{constructor(e){$e(this,"options");this.options=e||{}}static override(e){Object.assign(R0.prototype,e)}init(){}formats(){return Co()}parse(){return Co()}format(){return Co()}add(){return Co()}diff(){return Co()}startOf(){return Co()}endOf(){return Co()}}var EW={_date:R0};function TW(t,e,n,s){const{controller:r,data:i,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const u=a._reversePixels?p8:vy;if(s){if(r._sharedOptions){const d=i[0],h=typeof d.getRange=="function"&&d.getRange(e);if(h){const f=u(i,e,n-h),p=u(i,e,n+h);return{lo:f.lo,hi:p.hi}}}}else{const d=u(i,e,n);if(l){const{vScale:h}=r._cachedMeta,{_parsed:f}=t,p=f.slice(0,d.lo+1).reverse().findIndex(x=>!bt(x[h.axis]));d.lo-=Math.max(0,p);const w=f.slice(d.hi).findIndex(x=>!bt(x[h.axis]));d.hi+=Math.max(0,w)}return d}}return{lo:0,hi:i.length-1}}function Kp(t,e,n,s,r){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:u,data:d}=i[a],{lo:h,hi:f}=TW(i[a],e,o,r);for(let p=h;p<=f;++p){const w=d[p];w.skip||s(w,u,p)}}}function PW(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(s,r){const i=e?Math.abs(s.x-r.x):0,o=n?Math.abs(s.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function bg(t,e,n,s,r){const i=[];return!r&&!t.isPointInArea(e)||Kp(t,n,e,function(a,l,u){!r&&!XT(a,t.chartArea,0)||a.inRange(e.x,e.y,s)&&i.push({element:a,datasetIndex:l,index:u})},!0),i}function RW(t,e,n,s){let r=[];function i(o,a,l){const{startAngle:u,endAngle:d}=o.getProps(["startAngle","endAngle"],s),{angle:h}=UT(o,{x:e.x,y:e.y});sp(h,u,d)&&r.push({element:o,datasetIndex:a,index:l})}return Kp(t,n,e,i),r}function AW(t,e,n,s,r,i){let o=[];const a=PW(n);let l=Number.POSITIVE_INFINITY;function u(d,h,f){const p=d.inRange(e.x,e.y,r);if(s&&!p)return;const w=d.getCenterPoint(r);if(!(!!i||t.isPointInArea(w))&&!p)return;const y=a(e,w);y<l?(o=[{element:d,datasetIndex:h,index:f}],l=y):y===l&&o.push({element:d,datasetIndex:h,index:f})}return Kp(t,n,e,u),o}function wg(t,e,n,s,r,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!s?RW(t,e,n,r):AW(t,e,n,s,r,i)}function V_(t,e,n,s,r){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Kp(t,n,e,(l,u,d)=>{l[o]&&l[o](e[n],r)&&(i.push({element:l,datasetIndex:u,index:d}),a=a||l.inRange(e.x,e.y,r))}),s&&!a?[]:i}var OW={modes:{index(t,e,n,s){const r=Ro(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?bg(t,r,i,s,o):wg(t,r,i,!1,s,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(u=>{const d=a[0].index,h=u.data[d];h&&!h.skip&&l.push({element:h,datasetIndex:u.index,index:d})}),l):[]},dataset(t,e,n,s){const r=Ro(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?bg(t,r,i,s,o):wg(t,r,i,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,u=t.getDatasetMeta(l).data;a=[];for(let d=0;d<u.length;++d)a.push({element:u[d],datasetIndex:l,index:d})}return a},point(t,e,n,s){const r=Ro(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return bg(t,r,i,s,o)},nearest(t,e,n,s){const r=Ro(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return wg(t,r,i,n.intersect,s,o)},x(t,e,n,s){const r=Ro(e,t);return V_(t,r,"x",n.intersect,s)},y(t,e,n,s){const r=Ro(e,t);return V_(t,r,"y",n.intersect,s)}}};const l2=["left","top","right","bottom"];function jc(t,e){return t.filter(n=>n.pos===e)}function q_(t,e){return t.filter(n=>l2.indexOf(n.pos)===-1&&n.box.axis===e)}function Cc(t,e){return t.sort((n,s)=>{const r=e?s:n,i=e?n:s;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function MW(t){const e=[];let n,s,r,i,o,a;for(n=0,s=(t||[]).length;n<s;++n)r=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&i+o,stackWeight:a});return e}function IW(t){const e={};for(const n of t){const{stack:s,pos:r,stackWeight:i}=n;if(!s||!l2.includes(r))continue;const o=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function DW(t,e){const n=IW(t),{vBoxMaxWidth:s,hBoxMaxHeight:r}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,u=n[a.stack],d=u&&a.stackWeight/u.weight;a.horizontal?(a.width=d?d*s:l&&e.availableWidth,a.height=r):(a.width=s,a.height=d?d*r:l&&e.availableHeight)}return n}function LW(t){const e=MW(t),n=Cc(e.filter(u=>u.box.fullSize),!0),s=Cc(jc(e,"left"),!0),r=Cc(jc(e,"right")),i=Cc(jc(e,"top"),!0),o=Cc(jc(e,"bottom")),a=q_(e,"x"),l=q_(e,"y");return{fullSize:n,leftAndTop:s.concat(i),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:jc(e,"chartArea"),vertical:s.concat(r).concat(l),horizontal:i.concat(o).concat(a)}}function K_(t,e,n,s){return Math.max(t[n],e[n])+Math.max(t[s],e[s])}function c2(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function $W(t,e,n,s){const{pos:r,box:i}=n,o=t.maxPadding;if(!rt(r)){n.size&&(t[r]-=n.size);const h=s[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?i.height:i.width),n.size=h.size/h.count,t[r]+=n.size}i.getPadding&&c2(o,i.getPadding());const a=Math.max(0,e.outerWidth-K_(o,t,"left","right")),l=Math.max(0,e.outerHeight-K_(o,t,"top","bottom")),u=a!==t.w,d=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:u,other:d}:{same:d,other:u}}function FW(t){const e=t.maxPadding;function n(s){const r=Math.max(e[s]-t[s],0);return t[s]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function zW(t,e){const n=e.maxPadding;function s(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return s(t?["left","right"]:["top","bottom"])}function Bc(t,e,n,s){const r=[];let i,o,a,l,u,d;for(i=0,o=t.length,u=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,zW(a.horizontal,e));const{same:h,other:f}=$W(e,n,a,s);u|=h&&r.length,d=d||f,l.fullSize||r.push(a)}return u&&Bc(r,e,n,s)||d}function Ph(t,e,n,s,r){t.top=n,t.left=e,t.right=e+s,t.bottom=n+r,t.width=s,t.height=r}function G_(t,e,n,s){const r=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,u=s[a.stack]||{placed:0,weight:1},d=a.stackWeight/u.weight||1;if(a.horizontal){const h=e.w*d,f=u.size||l.height;Gu(u.start)&&(o=u.start),l.fullSize?Ph(l,r.left,o,n.outerWidth-r.right-r.left,f):Ph(l,e.left+u.placed,o,h,f),u.start=o,u.placed+=h,o=l.bottom}else{const h=e.h*d,f=u.size||l.width;Gu(u.start)&&(i=u.start),l.fullSize?Ph(l,i,r.top,f,n.outerHeight-r.bottom-r.top):Ph(l,i,e.top+u.placed,f,h),u.start=i,u.placed+=h,i=l.right}}e.x=i,e.y=o}var zi={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,s){if(!t)return;const r=lr(t.options.layout.padding),i=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=LW(t.boxes),l=a.vertical,u=a.horizontal;pt(t.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const d=l.reduce((x,y)=>y.box.options&&y.box.options.display===!1?x:x+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/d,hBoxMaxHeight:o/2}),f=Object.assign({},r);c2(f,lr(s));const p=Object.assign({maxPadding:f,w:i,h:o,x:r.left,y:r.top},r),w=DW(l.concat(u),h);Bc(a.fullSize,p,h,w),Bc(l,p,h,w),Bc(u,p,h,w)&&Bc(l,p,h,w),FW(p),G_(a.leftAndTop,p,h,w),p.x+=p.w,p.y+=p.h,G_(a.rightAndBottom,p,h,w),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},pt(a.chartArea,x=>{const y=x.box;Object.assign(y,t.chartArea),y.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class u2{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,s){}removeEventListener(e,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,s,r){return n=Math.max(0,n||e.width),s=s||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):s)}}isAttached(e){return!0}updateConfig(e){}}class BW extends u2{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const uf="$chartjs",UW={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Y_=t=>t===null||t==="";function HW(t,e){const n=t.style,s=t.getAttribute("height"),r=t.getAttribute("width");if(t[uf]={initial:{height:s,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Y_(r)){const i=I_(t,"width");i!==void 0&&(t.width=i)}if(Y_(s))if(t.style.height==="")t.height=t.width/(e||2);else{const i=I_(t,"height");i!==void 0&&(t.height=i)}return t}const d2=J8?{passive:!0}:!1;function WW(t,e,n){t&&t.addEventListener(e,n,d2)}function VW(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,d2)}function qW(t,e){const n=UW[t.type]||t.type,{x:s,y:r}=Ro(t,e);return{type:n,chart:e,native:t,x:s!==void 0?s:null,y:r!==void 0?r:null}}function ap(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function KW(t,e,n){const s=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||ap(a.addedNodes,s),o=o&&!ap(a.removedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function GW(t,e,n){const s=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||ap(a.removedNodes,s),o=o&&!ap(a.addedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const Yu=new Map;let Q_=0;function h2(){const t=window.devicePixelRatio;t!==Q_&&(Q_=t,Yu.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function YW(t,e){Yu.size||window.addEventListener("resize",h2),Yu.set(t,e)}function QW(t){Yu.delete(t),Yu.size||window.removeEventListener("resize",h2)}function XW(t,e,n){const s=t.canvas,r=s&&P0(s);if(!r)return;const i=qT((a,l)=>{const u=r.clientWidth;n(a,l),u<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,d=l.contentRect.height;u===0&&d===0||i(u,d)});return o.observe(r),YW(t,i),o}function kg(t,e,n){n&&n.disconnect(),e==="resize"&&QW(t)}function JW(t,e,n){const s=t.canvas,r=qT(i=>{t.ctx!==null&&n(qW(i,t))},t);return WW(s,e,r),r}class ZW extends u2{acquireContext(e,n){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(HW(e,n),s):null}releaseContext(e){const n=e.canvas;if(!n[uf])return!1;const s=n[uf].initial;["height","width"].forEach(i=>{const o=s[i];bt(o)?n.removeAttribute(i):n.setAttribute(i,o)});const r=s.style||{};return Object.keys(r).forEach(i=>{n.style[i]=r[i]}),n.width=n.width,delete n[uf],!0}addEventListener(e,n,s){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:KW,detach:GW,resize:XW}[n]||JW;r[n]=o(e,n,s)}removeEventListener(e,n){const s=e.$proxies||(e.$proxies={}),r=s[n];if(!r)return;({attach:kg,detach:kg,resize:kg}[n]||VW)(e,n,r),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,s,r){return X8(e,n,s,r)}isAttached(e){const n=e&&P0(e);return!!(n&&n.isConnected)}}function eV(t){return!T0()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?BW:ZW}var $h;let ac=($h=class{constructor(){$e(this,"x");$e(this,"y");$e(this,"active",!1);$e(this,"options");$e(this,"$animations")}tooltipPosition(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}hasValue(){return np(this.x)&&np(this.y)}getProps(e,n){const s=this.$animations;if(!n||!s)return this;const r={};return e.forEach(i=>{r[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),r}},$e($h,"defaults",{}),$e($h,"defaultRoutes"),$h);function tV(t,e){const n=t.options.ticks,s=nV(t),r=Math.min(n.maxTicksLimit||s,s),i=n.major.enabled?rV(e):[],o=i.length,a=i[0],l=i[o-1],u=[];if(o>r)return iV(e,u,i,o/r),u;const d=sV(i,e,r);if(o>0){let h,f;const p=o>1?Math.round((l-a)/(o-1)):null;for(Rh(e,u,d,bt(p)?0:a-p,a),h=0,f=o-1;h<f;h++)Rh(e,u,d,i[h],i[h+1]);return Rh(e,u,d,l,bt(p)?e.length:l+p),u}return Rh(e,u,d),u}function nV(t){const e=t.options.offset,n=t._tickSize(),s=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(s,r))}function sV(t,e,n){const s=oV(t),r=e.length/n;if(!s)return Math.max(r,1);const i=a8(s);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>r)return l}return Math.max(r,1)}function rV(t){const e=[];let n,s;for(n=0,s=t.length;n<s;n++)t[n].major&&e.push(n);return e}function iV(t,e,n,s){let r=0,i=n[0],o;for(s=Math.ceil(s),o=0;o<t.length;o++)o===i&&(e.push(t[o]),r++,i=n[r*s])}function Rh(t,e,n,s,r){const i=nt(s,0),o=Math.min(nt(r,t.length),t.length);let a=0,l,u,d;for(n=Math.ceil(n),r&&(l=r-s,n=l/Math.floor(l/n)),d=i;d<0;)a++,d=Math.round(i+a*n);for(u=Math.max(i,0);u<o;u++)u===d&&(e.push(t[u]),a++,d=Math.round(i+a*n))}function oV(t){const e=t.length;let n,s;if(e<2)return!1;for(s=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==s)return!1;return s}const aV=t=>t==="left"?"right":t==="right"?"left":t,X_=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,J_=(t,e)=>Math.min(e||t,t);function Z_(t,e){const n=[],s=t.length/e,r=t.length;let i=0;for(;i<r;i+=s)n.push(t[Math.floor(i)]);return n}function lV(t,e,n){const s=t.ticks.length,r=Math.min(e,s-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),u;if(!(n&&(s===1?u=Math.max(l-i,o-l):e===0?u=(t.getPixelForTick(1)-l)/2:u=(l-t.getPixelForTick(r-1))/2,l+=r<e?u:-u,l<i-a||l>o+a)))return l}function cV(t,e){pt(t,n=>{const s=n.gc,r=s.length/2;let i;if(r>e){for(i=0;i<r;++i)delete n.data[s[i]];s.splice(0,r)}})}function Nc(t){return t.drawTicks?t.tickLength:0}function eS(t,e){if(!t.display)return 0;const n=ts(t.font,e),s=lr(t.padding);return(hn(t.text)?t.text.length:1)*n.lineHeight+s.height}function uV(t,e){return oc(t,{scale:e,type:"scale"})}function dV(t,e,n){return oc(t,{tick:n,index:e,type:"tick"})}function hV(t,e,n){let s=KT(t);return(n&&e!=="right"||!n&&e==="right")&&(s=aV(s)),s}function fV(t,e,n,s){const{top:r,left:i,bottom:o,right:a,chart:l}=t,{chartArea:u,scales:d}=l;let h=0,f,p,w;const x=o-r,y=a-i;if(t.isHorizontal()){if(p=ds(s,i,a),rt(n)){const g=Object.keys(n)[0],m=n[g];w=d[g].getPixelForValue(m)+x-e}else n==="center"?w=(u.bottom+u.top)/2+x-e:w=X_(t,n,e);f=a-i}else{if(rt(n)){const g=Object.keys(n)[0],m=n[g];p=d[g].getPixelForValue(m)-y+e}else n==="center"?p=(u.left+u.right)/2-y+e:p=X_(t,n,e);w=ds(s,o,r),h=n==="left"?-cn:cn}return{titleX:p,titleY:w,maxWidth:f,rotation:h}}class lc extends ac{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:s,_suggestedMax:r}=this;return e=fr(e,Number.POSITIVE_INFINITY),n=fr(n,Number.NEGATIVE_INFINITY),s=fr(s,Number.POSITIVE_INFINITY),r=fr(r,Number.NEGATIVE_INFINITY),{min:fr(e,s),max:fr(n,r),minDefined:Bs(e),maxDefined:Bs(n)}}getMinMax(e){let{min:n,max:s,minDefined:r,maxDefined:i}=this.getUserBounds(),o;if(r&&i)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),i||(s=Math.max(s,o.max));return n=i&&n>s?s:n,s=r&&n>s?n:s,{min:fr(n,fr(s,n)),max:fr(s,fr(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Nt(this.options.beforeUpdate,[this])}update(e,n,s){const{beginAtZero:r,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=D8(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Z_(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=tV(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,e=!e),this._startPixel=n,this._endPixel=s,this._reversePixels=e,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Nt(this.options.afterUpdate,[this])}beforeSetDimensions(){Nt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Nt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Nt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Nt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let s,r,i;for(s=0,r=e.length;s<r;s++)i=e[s],i.label=Nt(n.callback,[i.value,s,e],this)}afterTickToLabelConversion(){Nt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Nt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,s=J_(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,i=n.maxRotation;let o=r,a,l,u;if(!this._isVisible()||!n.display||r>=i||s<=1||!this.isHorizontal()){this.labelRotation=r;return}const d=this._getLabelSizes(),h=d.widest.width,f=d.highest.height,p=es(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/s:p/(s-1),h+6>a&&(a=p/(s-(e.offset?.5:1)),l=this.maxHeight-Nc(e.grid)-n.padding-eS(e.title,this.chart.options.font),u=Math.sqrt(h*h+f*f),o=d8(Math.min(Math.asin(es((d.highest.height+6)/a,-1,1)),Math.asin(es(l/u,-1,1))-Math.asin(es(f/u,-1,1)))),o=Math.max(r,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){Nt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Nt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:s,title:r,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=eS(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=Nc(i)+l):(e.height=this.maxHeight,e.width=Nc(i)+l),s.display&&this.ticks.length){const{first:u,last:d,widest:h,highest:f}=this._getLabelSizes(),p=s.padding*2,w=Jr(this.labelRotation),x=Math.cos(w),y=Math.sin(w);if(a){const g=s.mirror?0:y*h.width+x*f.height;e.height=Math.min(this.maxHeight,e.height+g+p)}else{const g=s.mirror?0:x*h.width+y*f.height;e.width=Math.min(this.maxWidth,e.width+g+p)}this._calculatePadding(u,d,y,x)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,s,r){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;l?u?(f=r*e.width,p=s*n.height):(f=s*e.height,p=r*n.width):i==="start"?p=n.width:i==="end"?f=e.width:i!=="inner"&&(f=e.width/2,p=n.width/2),this.paddingLeft=Math.max((f-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((p-h+o)*this.width/(this.width-h),0)}else{let d=n.height/2,h=e.height/2;i==="start"?(d=0,h=e.height):i==="end"&&(d=n.height,h=0),this.paddingTop=d+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Nt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,s;for(n=0,s=e.length;n<s;n++)bt(e[n].label)&&(e.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=Z_(s,n)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,s){const{ctx:r,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/J_(n,s));let u=0,d=0,h,f,p,w,x,y,g,m,v,k,S;for(h=0;h<n;h+=l){if(w=e[h].label,x=this._resolveTickFontOptions(h),r.font=y=x.string,g=i[y]=i[y]||{data:{},gc:[]},m=x.lineHeight,v=k=0,!bt(w)&&!hn(w))v=T_(r,g.data,g.gc,v,w),k=m;else if(hn(w))for(f=0,p=w.length;f<p;++f)S=w[f],!bt(S)&&!hn(S)&&(v=T_(r,g.data,g.gc,v,S),k+=m);o.push(v),a.push(k),u=Math.max(v,u),d=Math.max(k,d)}cV(i,n);const C=o.indexOf(u),_=a.indexOf(d),j=N=>({width:o[N]||0,height:a[N]||0});return{first:j(0),last:j(n-1),widest:j(C),highest:j(_),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return f8(this._alignToPixels?jo(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const s=n[e];return s.$context||(s.$context=dV(this.getContext(),e,s))}return this.$context||(this.$context=uV(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Jr(this.labelRotation),s=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*s>a*r?a/s:l/r:l*r<a*s?l/s:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,s=this.chart,r=this.options,{grid:i,position:o,border:a}=r,l=i.offset,u=this.isHorizontal(),h=this.ticks.length+(l?1:0),f=Nc(i),p=[],w=a.setContext(this.getContext()),x=w.display?w.width:0,y=x/2,g=function($){return jo(s,$,x)};let m,v,k,S,C,_,j,N,P,D,M,I;if(o==="top")m=g(this.bottom),_=this.bottom-f,N=m-y,D=g(e.top)+y,I=e.bottom;else if(o==="bottom")m=g(this.top),D=e.top,I=g(e.bottom)-y,_=m+y,N=this.top+f;else if(o==="left")m=g(this.right),C=this.right-f,j=m-y,P=g(e.left)+y,M=e.right;else if(o==="right")m=g(this.left),P=e.left,M=g(e.right)-y,C=m+y,j=this.left+f;else if(n==="x"){if(o==="center")m=g((e.top+e.bottom)/2+.5);else if(rt(o)){const $=Object.keys(o)[0],U=o[$];m=g(this.chart.scales[$].getPixelForValue(U))}D=e.top,I=e.bottom,_=m+y,N=_+f}else if(n==="y"){if(o==="center")m=g((e.left+e.right)/2);else if(rt(o)){const $=Object.keys(o)[0],U=o[$];m=g(this.chart.scales[$].getPixelForValue(U))}C=m-y,j=C-f,P=e.left,M=e.right}const L=nt(r.ticks.maxTicksLimit,h),R=Math.max(1,Math.ceil(h/L));for(v=0;v<h;v+=R){const $=this.getContext(v),U=i.setContext($),E=a.setContext($),T=U.lineWidth,z=U.color,q=E.dash||[],W=E.dashOffset,he=U.tickWidth,ee=U.tickColor,B=U.tickBorderDash||[],Q=U.tickBorderDashOffset;k=lV(this,v,l),k!==void 0&&(S=jo(s,k,T),u?C=j=P=M=S:_=N=D=I=S,p.push({tx1:C,ty1:_,tx2:j,ty2:N,x1:P,y1:D,x2:M,y2:I,width:T,color:z,borderDash:q,borderDashOffset:W,tickWidth:he,tickColor:ee,tickBorderDash:B,tickBorderDashOffset:Q}))}return this._ticksLength=h,this._borderValue=m,p}_computeLabelItems(e){const n=this.axis,s=this.options,{position:r,ticks:i}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:d,mirror:h}=i,f=Nc(s.grid),p=f+d,w=h?-d:p,x=-Jr(this.labelRotation),y=[];let g,m,v,k,S,C,_,j,N,P,D,M,I="middle";if(r==="top")C=this.bottom-w,_=this._getXAxisLabelAlignment();else if(r==="bottom")C=this.top+w,_=this._getXAxisLabelAlignment();else if(r==="left"){const R=this._getYAxisLabelAlignment(f);_=R.textAlign,S=R.x}else if(r==="right"){const R=this._getYAxisLabelAlignment(f);_=R.textAlign,S=R.x}else if(n==="x"){if(r==="center")C=(e.top+e.bottom)/2+p;else if(rt(r)){const R=Object.keys(r)[0],$=r[R];C=this.chart.scales[R].getPixelForValue($)+p}_=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")S=(e.left+e.right)/2-p;else if(rt(r)){const R=Object.keys(r)[0],$=r[R];S=this.chart.scales[R].getPixelForValue($)}_=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?I="top":l==="end"&&(I="bottom"));const L=this._getLabelSizes();for(g=0,m=a.length;g<m;++g){v=a[g],k=v.label;const R=i.setContext(this.getContext(g));j=this.getPixelForTick(g)+i.labelOffset,N=this._resolveTickFontOptions(g),P=N.lineHeight,D=hn(k)?k.length:1;const $=D/2,U=R.color,E=R.textStrokeColor,T=R.textStrokeWidth;let z=_;o?(S=j,_==="inner"&&(g===m-1?z=this.options.reverse?"left":"right":g===0?z=this.options.reverse?"right":"left":z="center"),r==="top"?u==="near"||x!==0?M=-D*P+P/2:u==="center"?M=-L.highest.height/2-$*P+P:M=-L.highest.height+P/2:u==="near"||x!==0?M=P/2:u==="center"?M=L.highest.height/2-$*P:M=L.highest.height-D*P,h&&(M*=-1),x!==0&&!R.showLabelBackdrop&&(S+=P/2*Math.sin(x))):(C=j,M=(1-D)*P/2);let q;if(R.showLabelBackdrop){const W=lr(R.backdropPadding),he=L.heights[g],ee=L.widths[g];let B=M-W.top,Q=0-W.left;switch(I){case"middle":B-=he/2;break;case"bottom":B-=he;break}switch(_){case"center":Q-=ee/2;break;case"right":Q-=ee;break;case"inner":g===m-1?Q-=ee:g>0&&(Q-=ee/2);break}q={left:Q,top:B,width:ee+W.width,height:he+W.height,color:R.backdropColor}}y.push({label:k,font:N,textOffset:M,options:{rotation:x,color:U,strokeColor:E,strokeWidth:T,textAlign:z,textBaseline:I,translation:[S,C],backdrop:q}})}return y}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Jr(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:s,mirror:r,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let u,d;return n==="left"?r?(d=this.right+i,s==="near"?u="left":s==="center"?(u="center",d+=l/2):(u="right",d+=l)):(d=this.right-a,s==="near"?u="right":s==="center"?(u="center",d-=l/2):(u="left",d=this.left)):n==="right"?r?(d=this.left+i,s==="near"?u="right":s==="center"?(u="center",d-=l/2):(u="left",d-=l)):(d=this.left+a,s==="near"?u="left":s==="center"?(u="center",d+=l/2):(u="right",d=this.right)):u="right",{textAlign:u,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:s,top:r,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(s,r,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(i=>i.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,u,d)=>{!d.width||!d.color||(s.save(),s.lineWidth=d.width,s.strokeStyle=d.color,s.setLineDash(d.borderDash||[]),s.lineDashOffset=d.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(u.x,u.y),s.stroke(),s.restore())};if(n.display)for(i=0,o=r.length;i<o;++i){const l=r[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:s,grid:r}}=this,i=s.setContext(this.getContext()),o=s.display?i.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,d,h,f;this.isHorizontal()?(u=jo(e,this.left,o)-o/2,d=jo(e,this.right,a)+a/2,h=f=l):(h=jo(e,this.top,o)-o/2,f=jo(e,this.bottom,a)+a/2,u=d=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(u,h),n.lineTo(d,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,r=this._computeLabelArea();r&&_0(s,r);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,u=o.label,d=o.textOffset;rp(s,u,0,d,l,a)}r&&S0(s)}drawTitle(){const{ctx:e,options:{position:n,title:s,reverse:r}}=this;if(!s.display)return;const i=ts(s.font),o=lr(s.padding),a=s.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||rt(n)?(l+=o.bottom,hn(s.text)&&(l+=i.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:u,titleY:d,maxWidth:h,rotation:f}=fV(this,l,n,a);rp(e,s.text,0,0,i,{color:s.color,maxWidth:h,rotation:f,textAlign:hV(a,n,r),textBaseline:"middle",translation:[u,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,s=nt(e.grid&&e.grid.z,-1),r=nt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==lc.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[s]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return ts(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Ah{constructor(e,n,s){this.type=e,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let s;gV(n)&&(s=this.register(n));const r=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,pV(e,o,s),this.override&&Xt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,s=e.id,r=this.scope;s in n&&delete n[s],r&&s in Xt[r]&&(delete Xt[r][s],this.override&&delete fa[s])}}function pV(t,e,n){const s=Ku(Object.create(null),[n?Xt.get(n):{},Xt.get(e),t.defaults]);Xt.set(e,s),t.defaultRoutes&&mV(e,t.defaultRoutes),t.descriptors&&Xt.describe(e,t.descriptors)}function mV(t,e){Object.keys(e).forEach(n=>{const s=n.split("."),r=s.pop(),i=[t].concat(s).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Xt.route(i,r,l,a)})}function gV(t){return"id"in t&&"defaults"in t}class xV{constructor(){this.controllers=new Ah(_l,"datasets",!0),this.elements=new Ah(ac,"elements"),this.plugins=new Ah(Object,"plugins"),this.scales=new Ah(lc,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,s){[...n].forEach(r=>{const i=s||this._getRegistryForType(r);s||i.isForType(r)||i===this.plugins&&r.id?this._exec(e,i,r):pt(r,o=>{const a=s||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,s){const r=b0(e);Nt(s["before"+r],[],s),n[e](s),Nt(s["after"+r],[],s)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(e))return s}return this.plugins}_get(e,n,s){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return r}}var gr=new xV;class yV{constructor(){this._init=void 0}notify(e,n,s,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const i=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(i,e,n,s);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,s,r){r=r||{};for(const i of e){const o=i.plugin,a=o[s],l=[n,r,i.options];if(Nt(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){bt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const s=e&&e.config,r=nt(s.options&&s.options.plugins,{}),i=vV(s);return r===!1&&!n?[]:wV(e,i,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],s=this._cache,r=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,s),e,"stop"),this._notify(r(s,n),e,"start")}}function vV(t){const e={},n=[],s=Object.keys(gr.plugins.items);for(let i=0;i<s.length;i++)n.push(gr.getPlugin(s[i]));const r=t.plugins||[];for(let i=0;i<r.length;i++){const o=r[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function bV(t,e){return!e&&t===!1?null:t===!0?{}:t}function wV(t,{plugins:e,localIds:n},s,r){const i=[],o=t.getContext();for(const a of e){const l=a.id,u=bV(s[l],r);u!==null&&i.push({plugin:a,options:kV(t.config,{plugin:a,local:n[l]},u,o)})}return i}function kV(t,{plugin:e,local:n},s,r){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(s,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ky(t,e){const n=Xt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function _V(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function SV(t,e){return t===e?"_index_":"_value_"}function tS(t){if(t==="x"||t==="y"||t==="r")return t}function jV(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function _y(t,...e){if(tS(t))return t;for(const n of e){const s=n.axis||jV(n.position)||t.length>1&&tS(t[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function nS(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function CV(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(s=>s.xAxisID===t||s.yAxisID===t);if(n.length)return nS(t,"x",n[0])||nS(t,"y",n[0])}return{}}function NV(t,e){const n=fa[t.type]||{scales:{}},s=e.scales||{},r=ky(t.type,e),i=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!rt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=_y(o,a,CV(o,t),Xt.scales[a.type]),u=SV(l,r),d=n.scales||{};i[o]=su(Object.create(null),[{axis:l},a,d[l],d[u]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||ky(a,e),d=(fa[a]||{}).scales||{};Object.keys(d).forEach(h=>{const f=_V(h,l),p=o[f+"AxisID"]||f;i[p]=i[p]||Object.create(null),su(i[p],[{axis:f},s[p],d[h]])})}),Object.keys(i).forEach(o=>{const a=i[o];su(a,[Xt.scales[a.type],Xt.scale])}),i}function f2(t){const e=t.options||(t.options={});e.plugins=nt(e.plugins,{}),e.scales=NV(t,e)}function p2(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function EV(t){return t=t||{},t.data=p2(t.data),f2(t),t}const sS=new Map,m2=new Set;function Oh(t,e){let n=sS.get(t);return n||(n=e(),sS.set(t,n),m2.add(n)),n}const Ec=(t,e,n)=>{const s=ha(e,n);s!==void 0&&t.add(s)};class TV{constructor(e){this._config=EV(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=p2(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),f2(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Oh(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Oh(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Oh(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,s=this.type;return Oh(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const s=this._scopeCache;let r=s.get(e);return(!r||n)&&(r=new Map,s.set(e,r)),r}getOptionScopes(e,n,s){const{options:r,type:i}=this,o=this._cachedScopes(e,s),a=o.get(n);if(a)return a;const l=new Set;n.forEach(d=>{e&&(l.add(e),d.forEach(h=>Ec(l,e,h))),d.forEach(h=>Ec(l,r,h)),d.forEach(h=>Ec(l,fa[i]||{},h)),d.forEach(h=>Ec(l,Xt,h)),d.forEach(h=>Ec(l,by,h))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),m2.has(n)&&o.set(n,u),u}chartOptionScopes(){const{options:e,type:n}=this;return[e,fa[n]||{},Xt.datasets[n]||{},{type:n},Xt,by]}resolveNamedOptions(e,n,s,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=rS(this._resolverCache,e,r);let l=o;if(RV(o,n)){i.$shared=!1,s=ao(s)?s():s;const u=this.createResolver(e,s,a);l=Kl(o,s,u)}for(const u of n)i[u]=l[u];return i}createResolver(e,n,s=[""],r){const{resolver:i}=rS(this._resolverCache,e,s);return rt(n)?Kl(i,n,void 0,r):i}}function rS(t,e,n){let s=t.get(e);s||(s=new Map,t.set(e,s));const r=n.join();let i=s.get(r);return i||(i={resolver:C0(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(r,i)),i}const PV=t=>rt(t)&&Object.getOwnPropertyNames(t).some(e=>ao(t[e]));function RV(t,e){const{isScriptable:n,isIndexable:s}=ZT(t);for(const r of e){const i=n(r),o=s(r),a=(o||i)&&t[r];if(i&&(ao(a)||PV(a))||o&&hn(a))return!0}return!1}var AV="4.5.1";const OV=["top","bottom","left","right","chartArea"];function iS(t,e){return t==="top"||t==="bottom"||OV.indexOf(t)===-1&&e==="x"}function oS(t,e){return function(n,s){return n[t]===s[t]?n[e]-s[e]:n[t]-s[t]}}function aS(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Nt(n&&n.onComplete,[t],e)}function MV(t){const e=t.chart,n=e.options.animation;Nt(n&&n.onProgress,[t],e)}function g2(t){return T0()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const df={},lS=t=>{const e=g2(t);return Object.values(df).filter(n=>n.canvas===e).pop()};function IV(t,e,n){const s=Object.keys(t);for(const r of s){const i=+r;if(i>=e){const o=t[r];delete t[r],(n>0||i>e)&&(t[i+n]=o)}}}function DV(t,e,n,s){return!n||t.type==="mouseout"?null:s?e:t}class kr{static register(...e){gr.add(...e),cS()}static unregister(...e){gr.remove(...e),cS()}constructor(e,n){const s=this.config=new TV(n),r=g2(e),i=lS(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||eV(r)),this.platform.updateConfig(s);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,u=l&&l.height,d=l&&l.width;if(this.id=ZH(),this.ctx=a,this.canvas=l,this.width=d,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new yV,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=x8(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],df[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Fr.listen(this,"complete",aS),Fr.listen(this,"progress",MV),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:s,height:r,_aspectRatio:i}=this;return bt(e)?n&&i?i:r?s/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return gr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():M_(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return P_(this.canvas,this.ctx),this}stop(){return Fr.stop(this),this}resize(e,n){Fr.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const s=this.options,r=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,i),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,M_(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Nt(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};pt(n,(s,r)=>{s.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,s=this.scales,r=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=_y(o,a),u=l==="r",d=l==="x";return{options:a,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),pt(i,o=>{const a=o.options,l=a.id,u=_y(l,a),d=nt(a.type,o.dtype);(a.position===void 0||iS(a.position,u)!==iS(o.dposition))&&(a.position=o.dposition),r[l]=!0;let h=null;if(l in s&&s[l].type===d)h=s[l];else{const f=gr.getScale(d);h=new f({id:l,type:d,ctx:this.ctx,chart:this}),s[h.id]=h}h.init(a,e)}),pt(r,(o,a)=>{o||delete s[a]}),pt(s,o=>{zi.configure(this,o,o.options),zi.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,s=e.length;if(e.sort((r,i)=>r.index-i.index),s>n){for(let r=n;r<s;++r)this._destroyDatasetMeta(r);e.splice(n,s-n)}this._sortedMetasets=e.slice(0).sort(oS("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((s,r)=>{n.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=n.length;s<r;s++){const i=n[s];let o=this.getDatasetMeta(s);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=i.indexAxis||ky(a,this.options),o.order=i.order||0,o.index=s,o.label=""+i.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=gr.getController(a),{datasetElementType:u,dataElementType:d}=Xt.datasets[a];Object.assign(l,{dataElementType:gr.getElement(d),datasetElementType:u&&gr.getElement(u)}),o.controller=new l(this,s),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){pt(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,d=this.data.datasets.length;u<d;u++){const{controller:h}=this.getDatasetMeta(u),f=!r&&i.indexOf(h)===-1;h.buildOrUpdateElements(f),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),r||pt(i,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(oS("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){pt(this.scales,e=>{zi.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!b_(n,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:i}of n){const o=s==="_removeElements"?-i:i;IV(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),r=s(0);for(let i=1;i<n;i++)if(!b_(r,s(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;zi.update(this,this.width,this.height,e);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],pt(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,ao(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const s=this.getDatasetMeta(e),r={meta:s,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Fr.has(this)?this.attached&&!Fr.running(this)&&Fr.start(this):(this.draw(),aS({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,s=[];let r,i;for(r=0,i=n.length;r<i;++r){const o=n[r];(!e||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,s={meta:e,index:e.index,cancelable:!0},r=nW(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&_0(n,r),e.controller.draw(),r&&S0(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return XT(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,s,r){const i=OW.modes[n];return typeof i=="function"?i(this,e,s,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],s=this._metasets;let r=s.filter(i=>i&&i._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=oc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(e,n){const s=this.getDatasetMeta(e);s.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,s){const r=s?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,r);Gu(n)?(i.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),o.update(i,{visible:s}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Fr.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),P_(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete df[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,s=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},r=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};pt(this.options.events,i=>s(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,s=(l,u)=>{n.addEventListener(this,l,u),e[l]=u},r=(l,u)=>{e[l]&&(n.removeEventListener(this,l,u),delete e[l])},i=(l,u)=>{this.canvas&&this.resize(l,u)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),s("resize",i),s("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){pt(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},pt(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,s){const r=s?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],s=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!Zf(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(e,n,s){return this._plugins.notify(this,e,n,s)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,s){const r=this.options.hover,i=(l,u)=>l.filter(d=>!u.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),o=i(n,e),a=s?e:i(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const s={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const i=this._handleEvent(e,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(i||s.changed)&&this.render(),this}_handleEvent(e,n,s){const{_active:r=[],options:i}=this,o=n,a=this._getActiveElements(e,r,s,o),l=i8(e),u=DV(e,this._lastEvent,s,l);s&&(this._lastEvent=null,Nt(i.onHover,[e,a,this],this),l&&Nt(i.onClick,[e,a,this],this));const d=!Zf(a,r);return(d||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=u,d}_getActiveElements(e,n,s,r){if(e.type==="mouseout")return[];if(!s)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}}$e(kr,"defaults",Xt),$e(kr,"instances",df),$e(kr,"overrides",fa),$e(kr,"registry",gr),$e(kr,"version",AV),$e(kr,"getChart",lS);function cS(){return pt(kr.instances,t=>t._plugins.invalidate())}function LV(t,e,n){const{startAngle:s,x:r,y:i,outerRadius:o,innerRadius:a,options:l}=e,{borderWidth:u,borderJoinStyle:d}=l,h=Math.min(u/o,xr(s-n));if(t.beginPath(),t.arc(r,i,o-u/2,s+h/2,n-h/2),a>0){const f=Math.min(u/a,xr(s-n));t.arc(r,i,a+u/2,n-f/2,s+f/2,!0)}else{const f=Math.min(u/2,o*xr(s-n));if(d==="round")t.arc(r,i,f,n-Et/2,s+Et/2,!0);else if(d==="bevel"){const p=2*f*f,w=-p*Math.cos(n+Et/2)+r,x=-p*Math.sin(n+Et/2)+i,y=p*Math.cos(s+Et/2)+r,g=p*Math.sin(s+Et/2)+i;t.lineTo(w,x),t.lineTo(y,g)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function $V(t,e,n){const{startAngle:s,pixelMargin:r,x:i,y:o,outerRadius:a,innerRadius:l}=e;let u=r/a;t.beginPath(),t.arc(i,o,a,s-u,n+u),l>r?(u=r/l,t.arc(i,o,l,n+u,s-u,!0)):t.arc(i,o,r,n+cn,s-cn),t.closePath(),t.clip()}function FV(t){return j0(t,["outerStart","outerEnd","innerStart","innerEnd"])}function zV(t,e,n,s){const r=FV(t.options.borderRadius),i=(n-e)/2,o=Math.min(i,s*e/2),a=l=>{const u=(n-Math.min(i,l))*s/2;return es(l,0,Math.min(i,u))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:es(r.innerStart,0,o),innerEnd:es(r.innerEnd,0,o)}}function Ba(t,e,n,s){return{x:n+t*Math.cos(e),y:s+t*Math.sin(e)}}function lp(t,e,n,s,r,i){const{x:o,y:a,startAngle:l,pixelMargin:u,innerRadius:d}=e,h=Math.max(e.outerRadius+s+n-u,0),f=d>0?d+s+n+u:0;let p=0;const w=r-l;if(s){const R=d>0?d-s:0,$=h>0?h-s:0,U=(R+$)/2,E=U!==0?w*U/(U+s):w;p=(w-E)/2}const x=Math.max(.001,w*h-n/Et)/h,y=(w-x)/2,g=l+y+p,m=r-y-p,{outerStart:v,outerEnd:k,innerStart:S,innerEnd:C}=zV(e,f,h,m-g),_=h-v,j=h-k,N=g+v/_,P=m-k/j,D=f+S,M=f+C,I=g+S/D,L=m-C/M;if(t.beginPath(),i){const R=(N+P)/2;if(t.arc(o,a,h,N,R),t.arc(o,a,h,R,P),k>0){const T=Ba(j,P,o,a);t.arc(T.x,T.y,k,P,m+cn)}const $=Ba(M,m,o,a);if(t.lineTo($.x,$.y),C>0){const T=Ba(M,L,o,a);t.arc(T.x,T.y,C,m+cn,L+Math.PI)}const U=(m-C/f+(g+S/f))/2;if(t.arc(o,a,f,m-C/f,U,!0),t.arc(o,a,f,U,g+S/f,!0),S>0){const T=Ba(D,I,o,a);t.arc(T.x,T.y,S,I+Math.PI,g-cn)}const E=Ba(_,g,o,a);if(t.lineTo(E.x,E.y),v>0){const T=Ba(_,N,o,a);t.arc(T.x,T.y,v,g-cn,N)}}else{t.moveTo(o,a);const R=Math.cos(N)*h+o,$=Math.sin(N)*h+a;t.lineTo(R,$);const U=Math.cos(P)*h+o,E=Math.sin(P)*h+a;t.lineTo(U,E)}t.closePath()}function BV(t,e,n,s,r){const{fullCircles:i,startAngle:o,circumference:a}=e;let l=e.endAngle;if(i){lp(t,e,n,s,l,r);for(let u=0;u<i;++u)t.fill();isNaN(a)||(l=o+(a%nn||nn))}return lp(t,e,n,s,l,r),t.fill(),l}function UV(t,e,n,s,r){const{fullCircles:i,startAngle:o,circumference:a,options:l}=e,{borderWidth:u,borderJoinStyle:d,borderDash:h,borderDashOffset:f,borderRadius:p}=l,w=l.borderAlign==="inner";if(!u)return;t.setLineDash(h||[]),t.lineDashOffset=f,w?(t.lineWidth=u*2,t.lineJoin=d||"round"):(t.lineWidth=u,t.lineJoin=d||"bevel");let x=e.endAngle;if(i){lp(t,e,n,s,x,r);for(let y=0;y<i;++y)t.stroke();isNaN(a)||(x=o+(a%nn||nn))}w&&$V(t,e,x),l.selfJoin&&x-o>=Et&&p===0&&d!=="miter"&&LV(t,e,x),i||(lp(t,e,n,s,x,r),t.stroke())}class Uc extends ac{constructor(n){super();$e(this,"circumference");$e(this,"endAngle");$e(this,"fullCircles");$e(this,"innerRadius");$e(this,"outerRadius");$e(this,"pixelMargin");$e(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,s,r){const i=this.getProps(["x","y"],r),{angle:o,distance:a}=UT(i,{x:n,y:s}),{startAngle:l,endAngle:u,innerRadius:d,outerRadius:h,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),p=(this.options.spacing+this.options.borderWidth)/2,w=nt(f,u-l),x=sp(o,l,u)&&l!==u,y=w>=nn||x,g=zo(a,d+p,h+p);return y&&g}getCenterPoint(n){const{x:s,y:r,startAngle:i,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:u,spacing:d}=this.options,h=(i+o)/2,f=(a+l+d+u)/2;return{x:s+Math.cos(h)*f,y:r+Math.sin(h)*f}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:s,circumference:r}=this,i=(s.offset||0)/4,o=(s.spacing||0)/2,a=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=r>nn?Math.floor(r/nn):0,r===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*i,Math.sin(l)*i);const u=1-Math.sin(Math.min(Et,r||0)),d=i*u;n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,BV(n,this,d,o,a),UV(n,this,d,o,a),n.restore()}}$e(Uc,"id","arc"),$e(Uc,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),$e(Uc,"defaultRoutes",{backgroundColor:"backgroundColor"}),$e(Uc,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function x2(t,e){const{x:n,y:s,base:r,width:i,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,u,d,h;return t.horizontal?(h=o/2,a=Math.min(n,r),l=Math.max(n,r),u=s-h,d=s+h):(h=i/2,a=n-h,l=n+h,u=Math.min(s,r),d=Math.max(s,r)),{left:a,top:u,right:l,bottom:d}}function Bi(t,e,n,s){return t?0:es(e,n,s)}function HV(t,e,n){const s=t.options.borderWidth,r=t.borderSkipped,i=JT(s);return{t:Bi(r.top,i.top,0,n),r:Bi(r.right,i.right,0,e),b:Bi(r.bottom,i.bottom,0,n),l:Bi(r.left,i.left,0,e)}}function WV(t,e,n){const{enableBorderRadius:s}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,i=wl(r),o=Math.min(e,n),a=t.borderSkipped,l=s||rt(r);return{topLeft:Bi(!l||a.top||a.left,i.topLeft,0,o),topRight:Bi(!l||a.top||a.right,i.topRight,0,o),bottomLeft:Bi(!l||a.bottom||a.left,i.bottomLeft,0,o),bottomRight:Bi(!l||a.bottom||a.right,i.bottomRight,0,o)}}function VV(t){const e=x2(t),n=e.right-e.left,s=e.bottom-e.top,r=HV(t,n/2,s/2),i=WV(t,n/2,s/2);return{outer:{x:e.left,y:e.top,w:n,h:s,radius:i},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:s-r.t-r.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,i.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(r.b,r.r))}}}}function _g(t,e,n,s){const r=e===null,i=n===null,a=t&&!(r&&i)&&x2(t,s);return a&&(r||zo(e,a.left,a.right))&&(i||zo(n,a.top,a.bottom))}function qV(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function KV(t,e){t.rect(e.x,e.y,e.w,e.h)}function Sg(t,e,n={}){const s=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,i=(t.x+t.w!==n.x+n.w?e:0)-s,o=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+s,y:t.y+r,w:t.w+i,h:t.h+o,radius:t.radius}}class hf extends ac{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:s,backgroundColor:r}}=this,{inner:i,outer:o}=VV(this),a=qV(o.radius)?ip:KV;e.save(),(o.w!==i.w||o.h!==i.h)&&(e.beginPath(),a(e,Sg(o,n,i)),e.clip(),a(e,Sg(i,-n,o)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),a(e,Sg(i,n)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,n,s){return _g(this,e,n,s)}inXRange(e,n){return _g(this,e,null,n)}inYRange(e,n){return _g(this,null,e,n)}getCenterPoint(e){const{x:n,y:s,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(n+r)/2:n,y:i?s:(s+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}$e(hf,"id","bar"),$e(hf,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),$e(hf,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const uS=(t,e)=>{let{boxHeight:n=e,boxWidth:s=e}=t;return t.usePointStyle&&(n=Math.min(n,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(e,n)}},GV=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class dS extends ac{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,s){this.maxWidth=e,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Nt(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(s=>e.filter(s,this.chart.data))),e.sort&&(n=n.sort((s,r)=>e.sort(s,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,r=ts(s.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=uS(s,i);let u,d;n.font=r.string,this.isHorizontal()?(u=this.maxWidth,d=this._fitRows(o,i,a,l)+10):(d=this.maxHeight,u=this._fitCols(o,r,a,l)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,n,s,r){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],d=r+a;let h=e;i.textAlign="left",i.textBaseline="middle";let f=-1,p=-d;return this.legendItems.forEach((w,x)=>{const y=s+n/2+i.measureText(w.text).width;(x===0||u[u.length-1]+y+2*a>o)&&(h+=d,u[u.length-(x>0?0:1)]=0,p+=d,f++),l[x]={left:0,top:p,row:f,width:y,height:r},u[u.length-1]+=y+a}),h}_fitCols(e,n,s,r){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],d=o-e;let h=a,f=0,p=0,w=0,x=0;return this.legendItems.forEach((y,g)=>{const{itemWidth:m,itemHeight:v}=YV(s,n,i,y,r);g>0&&p+v+2*a>d&&(h+=f+a,u.push({width:f,height:p}),w+=f+a,x++,f=p=0),l[g]={left:w,top:p,col:x,width:m,height:v},f=Math.max(f,m),p+=v+a}),h+=f,u.push({width:f,height:p}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:r},rtl:i}}=this,o=kl(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=ds(s,this.left+r,this.right-this.lineWidths[a]);for(const u of n)a!==u.row&&(a=u.row,l=ds(s,this.left+r,this.right-this.lineWidths[a])),u.top+=this.top+e+r,u.left=o.leftForLtr(o.x(l),u.width),l+=u.width+r}else{let a=0,l=ds(s,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const u of n)u.col!==a&&(a=u.col,l=ds(s,this.top+e+r,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+r,u.left=o.leftForLtr(o.x(u.left),u.width),l+=u.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;_0(e,this),this._draw(),S0(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:s,ctx:r}=this,{align:i,labels:o}=e,a=Xt.color,l=kl(e.rtl,this.left,this.width),u=ts(o.font),{padding:d}=o,h=u.size,f=h/2;let p;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=u.string;const{boxWidth:w,boxHeight:x,itemHeight:y}=uS(o,h),g=function(C,_,j){if(isNaN(w)||w<=0||isNaN(x)||x<0)return;r.save();const N=nt(j.lineWidth,1);if(r.fillStyle=nt(j.fillStyle,a),r.lineCap=nt(j.lineCap,"butt"),r.lineDashOffset=nt(j.lineDashOffset,0),r.lineJoin=nt(j.lineJoin,"miter"),r.lineWidth=N,r.strokeStyle=nt(j.strokeStyle,a),r.setLineDash(nt(j.lineDash,[])),o.usePointStyle){const P={radius:x*Math.SQRT2/2,pointStyle:j.pointStyle,rotation:j.rotation,borderWidth:N},D=l.xPlus(C,w/2),M=_+f;QT(r,P,D,M,o.pointStyleWidth&&w)}else{const P=_+Math.max((h-x)/2,0),D=l.leftForLtr(C,w),M=wl(j.borderRadius);r.beginPath(),Object.values(M).some(I=>I!==0)?ip(r,{x:D,y:P,w,h:x,radius:M}):r.rect(D,P,w,x),r.fill(),N!==0&&r.stroke()}r.restore()},m=function(C,_,j){rp(r,j.text,C,_+y/2,u,{strikethrough:j.hidden,textAlign:l.textAlign(j.textAlign)})},v=this.isHorizontal(),k=this._computeTitleHeight();v?p={x:ds(i,this.left+d,this.right-s[0]),y:this.top+d+k,line:0}:p={x:this.left+d,y:ds(i,this.top+k+d,this.bottom-n[0].height),line:0},s2(this.ctx,e.textDirection);const S=y+d;this.legendItems.forEach((C,_)=>{r.strokeStyle=C.fontColor,r.fillStyle=C.fontColor;const j=r.measureText(C.text).width,N=l.textAlign(C.textAlign||(C.textAlign=o.textAlign)),P=w+f+j;let D=p.x,M=p.y;l.setWidth(this.width),v?_>0&&D+P+d>this.right&&(M=p.y+=S,p.line++,D=p.x=ds(i,this.left+d,this.right-s[p.line])):_>0&&M+S>this.bottom&&(D=p.x=D+n[p.line].width+d,p.line++,M=p.y=ds(i,this.top+k+d,this.bottom-n[p.line].height));const I=l.x(D);if(g(I,M,C),D=y8(N,D+w+f,v?D+P:this.right,e.rtl),m(l.x(D),M,C),v)p.x+=P+d;else if(typeof C.text!="string"){const L=u.lineHeight;p.y+=y2(C,L)+d}else p.y+=S}),r2(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,s=ts(n.font),r=lr(n.padding);if(!n.display)return;const i=kl(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=s.size/2,u=r.top+l;let d,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),d=this.top+u,h=ds(e.align,h,this.right-f);else{const w=this.columnSizes.reduce((x,y)=>Math.max(x,y.height),0);d=u+ds(e.align,this.top,this.bottom-w-e.labels.padding-this._computeTitleHeight())}const p=ds(a,h,h+f);o.textAlign=i.textAlign(KT(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,rp(o,n.text,p,d,s)}_computeTitleHeight(){const e=this.options.title,n=ts(e.font),s=lr(e.padding);return e.display?n.lineHeight+s.height:0}_getLegendItemAt(e,n){let s,r,i;if(zo(e,this.left,this.right)&&zo(n,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(r=i[s],zo(e,r.left,r.left+r.width)&&zo(n,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(e){const n=this.options;if(!JV(e.type,n))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,i=GV(r,s);r&&!i&&Nt(n.onLeave,[e,r,this],this),this._hoveredItem=s,s&&!i&&Nt(n.onHover,[e,s,this],this)}else s&&Nt(n.onClick,[e,s,this],this)}}function YV(t,e,n,s,r){const i=QV(s,t,e,n),o=XV(r,s,e.lineHeight);return{itemWidth:i,itemHeight:o}}function QV(t,e,n,s){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+s.measureText(r).width}function XV(t,e,n){let s=t;return typeof e.text!="string"&&(s=y2(e,n)),s}function y2(t,e){const n=t.text?t.text.length:0;return e*n}function JV(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var ZV={id:"legend",_element:dS,start(t,e,n){const s=t.legend=new dS({ctx:t.ctx,options:n,chart:t});zi.configure(t,s,n),zi.addBox(t,s)},stop(t){zi.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const s=t.legend;zi.configure(t,s,n),s.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const s=e.datasetIndex,r=n.chart;r.isDatasetVisible(s)?(r.hide(s),e.hidden=!0):(r.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(n?0:void 0),d=lr(u.borderWidth);return{text:e[l.index].label,fillStyle:u.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:u.borderColor,pointStyle:s||u.pointStyle,rotation:u.rotation,textAlign:r||u.textAlign,borderRadius:o&&(a||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const Hc={average(t){if(!t.length)return!1;let e,n,s=new Set,r=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),r+=l.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:r/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,s=e.y,r=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),d=h8(e,u);d<r&&(r=d,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,s=l.y}return{x:n,y:s}}};function pr(t,e){return e&&(hn(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function zr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function e7(t,e){const{element:n,datasetIndex:s,index:r}=e,i=t.getDatasetMeta(s).controller,{label:o,value:a}=i.getLabelAndValue(r);return{chart:t,label:o,parsed:i.getParsed(r),raw:t.data.datasets[s].data[r],formattedValue:a,dataset:i.getDataset(),dataIndex:r,datasetIndex:s,element:n}}function hS(t,e){const n=t.chart.ctx,{body:s,footer:r,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=ts(e.bodyFont),u=ts(e.titleFont),d=ts(e.footerFont),h=i.length,f=r.length,p=s.length,w=lr(e.padding);let x=w.height,y=0,g=s.reduce((k,S)=>k+S.before.length+S.lines.length+S.after.length,0);if(g+=t.beforeBody.length+t.afterBody.length,h&&(x+=h*u.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),g){const k=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;x+=p*k+(g-p)*l.lineHeight+(g-1)*e.bodySpacing}f&&(x+=e.footerMarginTop+f*d.lineHeight+(f-1)*e.footerSpacing);let m=0;const v=function(k){y=Math.max(y,n.measureText(k).width+m)};return n.save(),n.font=u.string,pt(t.title,v),n.font=l.string,pt(t.beforeBody.concat(t.afterBody),v),m=e.displayColors?o+2+e.boxPadding:0,pt(s,k=>{pt(k.before,v),pt(k.lines,v),pt(k.after,v)}),m=0,n.font=d.string,pt(t.footer,v),n.restore(),y+=w.width,{width:y,height:x}}function t7(t,e){const{y:n,height:s}=e;return n<s/2?"top":n>t.height-s/2?"bottom":"center"}function n7(t,e,n,s){const{x:r,width:i}=s,o=n.caretSize+n.caretPadding;if(t==="left"&&r+i+o>e.width||t==="right"&&r-i-o<0)return!0}function s7(t,e,n,s){const{x:r,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let u="center";return s==="center"?u=r<=(a+l)/2?"left":"right":r<=i/2?u="left":r>=o-i/2&&(u="right"),n7(u,t,e,n)&&(u="center"),u}function fS(t,e,n){const s=n.yAlign||e.yAlign||t7(t,n);return{xAlign:n.xAlign||e.xAlign||s7(t,e,n,s),yAlign:s}}function r7(t,e){let{x:n,width:s}=t;return e==="right"?n-=s:e==="center"&&(n-=s/2),n}function i7(t,e,n){let{y:s,height:r}=t;return e==="top"?s+=n:e==="bottom"?s-=r+n:s-=r/2,s}function pS(t,e,n,s){const{caretSize:r,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,u=r+i,{topLeft:d,topRight:h,bottomLeft:f,bottomRight:p}=wl(o);let w=r7(e,a);const x=i7(e,l,u);return l==="center"?a==="left"?w+=u:a==="right"&&(w-=u):a==="left"?w-=Math.max(d,f)+r:a==="right"&&(w+=Math.max(h,p)+r),{x:es(w,0,s.width-e.width),y:es(x,0,s.height-e.height)}}function Mh(t,e,n){const s=lr(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-s.right:t.x+s.left}function mS(t){return pr([],zr(t))}function o7(t,e,n){return oc(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function gS(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const v2={beforeTitle:Lr,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return n[e.dataIndex]}return""},afterTitle:Lr,beforeBody:Lr,beforeLabel:Lr,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return bt(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Lr,afterBody:Lr,beforeFooter:Lr,footer:Lr,afterFooter:Lr};function qn(t,e,n,s){const r=t[e].call(n,s);return typeof r>"u"?v2[e].call(n,s):r}class Sy extends ac{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&n.options.animation&&s.animations,i=new i2(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=o7(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:s}=n,r=qn(s,"beforeTitle",this,e),i=qn(s,"title",this,e),o=qn(s,"afterTitle",this,e);let a=[];return a=pr(a,zr(r)),a=pr(a,zr(i)),a=pr(a,zr(o)),a}getBeforeBody(e,n){return mS(qn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:s}=n,r=[];return pt(e,i=>{const o={before:[],lines:[],after:[]},a=gS(s,i);pr(o.before,zr(qn(a,"beforeLabel",this,i))),pr(o.lines,qn(a,"label",this,i)),pr(o.after,zr(qn(a,"afterLabel",this,i))),r.push(o)}),r}getAfterBody(e,n){return mS(qn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:s}=n,r=qn(s,"beforeFooter",this,e),i=qn(s,"footer",this,e),o=qn(s,"afterFooter",this,e);let a=[];return a=pr(a,zr(r)),a=pr(a,zr(i)),a=pr(a,zr(o)),a}_createItems(e){const n=this._active,s=this.chart.data,r=[],i=[],o=[];let a=[],l,u;for(l=0,u=n.length;l<u;++l)a.push(e7(this.chart,n[l]));return e.filter&&(a=a.filter((d,h,f)=>e.filter(d,h,f,s))),e.itemSort&&(a=a.sort((d,h)=>e.itemSort(d,h,s))),pt(a,d=>{const h=gS(e.callbacks,d);r.push(qn(h,"labelColor",this,d)),i.push(qn(h,"labelPointStyle",this,d)),o.push(qn(h,"labelTextColor",this,d))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const s=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const a=Hc[s.position].call(this,r,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=hS(this,s),u=Object.assign({},a,l),d=fS(this.chart,s,u),h=pS(s,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,i={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,s,r){const i=this.getCaretPosition(e,s,r);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,s){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:u,bottomLeft:d,bottomRight:h}=wl(a),{x:f,y:p}=e,{width:w,height:x}=n;let y,g,m,v,k,S;return i==="center"?(k=p+x/2,r==="left"?(y=f,g=y-o,v=k+o,S=k-o):(y=f+w,g=y+o,v=k-o,S=k+o),m=y):(r==="left"?g=f+Math.max(l,d)+o:r==="right"?g=f+w-Math.max(u,h)-o:g=this.caretX,i==="top"?(v=p,k=v-o,y=g-o,m=g+o):(v=p+x,k=v+o,y=g+o,m=g-o),S=v),{x1:y,x2:g,x3:m,y1:v,y2:k,y3:S}}drawTitle(e,n,s){const r=this.title,i=r.length;let o,a,l;if(i){const u=kl(s.rtl,this.x,this.width);for(e.x=Mh(this,s.titleAlign,s),n.textAlign=u.textAlign(s.titleAlign),n.textBaseline="middle",o=ts(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(r[l],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=s.titleMarginBottom-a)}}_drawColorBox(e,n,s,r,i){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:u}=i,d=ts(i.bodyFont),h=Mh(this,"left",i),f=r.x(h),p=l<d.lineHeight?(d.lineHeight-l)/2:0,w=n.y+p;if(i.usePointStyle){const x={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},y=r.leftForLtr(f,u)+u/2,g=w+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,R_(e,x,y,g),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,R_(e,x,y,g)}else{e.lineWidth=rt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const x=r.leftForLtr(f,u),y=r.leftForLtr(r.xPlus(f,1),u-2),g=wl(o.borderRadius);Object.values(g).some(m=>m!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,ip(e,{x,y:w,w:u,h:l,radius:g}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),ip(e,{x:y,y:w+1,w:u-2,h:l-2,radius:g}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(x,w,u,l),e.strokeRect(x,w,u,l),e.fillStyle=o.backgroundColor,e.fillRect(y,w+1,u-2,l-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,n,s){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:u,boxPadding:d}=s,h=ts(s.bodyFont);let f=h.lineHeight,p=0;const w=kl(s.rtl,this.x,this.width),x=function(j){n.fillText(j,w.x(e.x+p),e.y+f/2),e.y+=f+i},y=w.textAlign(o);let g,m,v,k,S,C,_;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=Mh(this,y,s),n.fillStyle=s.bodyColor,pt(this.beforeBody,x),p=a&&y!=="right"?o==="center"?u/2+d:u+2+d:0,k=0,C=r.length;k<C;++k){for(g=r[k],m=this.labelTextColors[k],n.fillStyle=m,pt(g.before,x),v=g.lines,a&&v.length&&(this._drawColorBox(n,e,k,w,s),f=Math.max(h.lineHeight,l)),S=0,_=v.length;S<_;++S)x(v[S]),f=h.lineHeight;pt(g.after,x)}p=0,f=h.lineHeight,pt(this.afterBody,x),e.y-=i}drawFooter(e,n,s){const r=this.footer,i=r.length;let o,a;if(i){const l=kl(s.rtl,this.x,this.width);for(e.x=Mh(this,s.footerAlign,s),e.y+=s.footerMarginTop,n.textAlign=l.textAlign(s.footerAlign),n.textBaseline="middle",o=ts(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s.footerSpacing}}drawBackground(e,n,s,r){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:u,height:d}=s,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:w}=wl(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+h,l),o==="top"&&this.drawCaret(e,n,s,r),n.lineTo(a+u-f,l),n.quadraticCurveTo(a+u,l,a+u,l+f),o==="center"&&i==="right"&&this.drawCaret(e,n,s,r),n.lineTo(a+u,l+d-w),n.quadraticCurveTo(a+u,l+d,a+u-w,l+d),o==="bottom"&&this.drawCaret(e,n,s,r),n.lineTo(a+p,l+d),n.quadraticCurveTo(a,l+d,a,l+d-p),o==="center"&&i==="left"&&this.drawCaret(e,n,s,r),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,s=this.$animations,r=s&&s.x,i=s&&s.y;if(r||i){const o=Hc[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=hS(this,e),l=Object.assign({},o,this._size),u=fS(n,e,l),d=pS(e,l,u,n);(r._to!==d.x||i._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=lr(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=s,this.drawBackground(i,e,r,n),s2(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),r2(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const s=this._active,r=e.map(({datasetIndex:a,index:l})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[l],index:l}}),i=!Zf(s,r),o=this._positionChanged(r,n);(i||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,s),a=this._positionChanged(o,e),l=n||!Zf(o,i)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,s,r){const i=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,s);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:s,caretY:r,options:i}=this,o=Hc[i.position].call(this,e,n);return o!==!1&&(s!==o.x||r!==o.y)}}$e(Sy,"positioners",Hc);var a7={id:"tooltip",_element:Sy,positioners:Hc,afterInit(t,e,n){n&&(t.tooltip=new Sy({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:v2},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const l7=(t,e,n,s)=>(typeof e=="string"?(n=t.push(e)-1,s.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function c7(t,e,n,s){const r=t.indexOf(e);if(r===-1)return l7(t,e,n,s);const i=t.lastIndexOf(e);return r!==i?n:r}const u7=(t,e)=>t===null?null:es(Math.round(t),0,e);function xS(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class jy extends lc{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:r,label:i}of n)s[r]===i&&s.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(bt(e))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===e?n:c7(s,e,nt(n,e),this._addedLabels),u7(n,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),n||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const e=this.min,n=this.max,s=this.options.offset,r=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return xS.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}$e(jy,"id","category"),$e(jy,"defaults",{ticks:{callback:xS}});function d7(t,e){const n=[],{bounds:r,step:i,min:o,max:a,precision:l,count:u,maxTicks:d,maxDigits:h,includeBounds:f}=t,p=i||1,w=d-1,{min:x,max:y}=e,g=!bt(o),m=!bt(a),v=!bt(u),k=(y-x)/(h+1);let S=k_((y-x)/w/p)*p,C,_,j,N;if(S<1e-14&&!g&&!m)return[{value:x},{value:y}];N=Math.ceil(y/S)-Math.floor(x/S),N>w&&(S=k_(N*S/w/p)*p),bt(l)||(C=Math.pow(10,l),S=Math.ceil(S*C)/C),r==="ticks"?(_=Math.floor(x/S)*S,j=Math.ceil(y/S)*S):(_=x,j=y),g&&m&&i&&c8((a-o)/i,S/1e3)?(N=Math.round(Math.min((a-o)/S,d)),S=(a-o)/N,_=o,j=a):v?(_=g?o:_,j=m?a:j,N=u-1,S=(j-_)/N):(N=(j-_)/S,lf(N,Math.round(N),S/1e3)?N=Math.round(N):N=Math.ceil(N));const P=Math.max(__(S),__(_));C=Math.pow(10,bt(l)?P:l),_=Math.round(_*C)/C,j=Math.round(j*C)/C;let D=0;for(g&&(f&&_!==o?(n.push({value:o}),_<o&&D++,lf(Math.round((_+D*S)*C)/C,o,yS(o,k,t))&&D++):_<o&&D++);D<N;++D){const M=Math.round((_+D*S)*C)/C;if(m&&M>a)break;n.push({value:M})}return m&&f&&j!==a?n.length&&lf(n[n.length-1].value,a,yS(a,k,t))?n[n.length-1].value=a:n.push({value:a}):(!m||j===a)&&n.push({value:j}),n}function yS(t,e,{horizontal:n,minRotation:s}){const r=Jr(s),i=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class h7 extends lc{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return bt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:r,max:i}=this;const o=l=>r=n?r:l,a=l=>i=s?i:l;if(e){const l=Zi(r),u=Zi(i);l<0&&u<0?a(0):l>0&&u>0&&o(0)}if(r===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(r-l)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=e,r;return s?(r=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=d7(r,i);return e.bounds==="ticks"&&u8(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const r=(s-n)/Math.max(e.length-1,1)/2;n-=r,s+=r}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(e){return k0(e,this.chart.options.locale,this.options.ticks.format)}}class Cy extends h7{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Bs(e)?e:0,this.max=Bs(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,s=Jr(this.options.ticks.minRotation),r=(e?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}$e(Cy,"id","linear"),$e(Cy,"defaults",{ticks:{callback:YT.formatters.numeric}});const Gp={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Xn=Object.keys(Gp);function vS(t,e){return t-e}function bS(t,e){if(bt(e))return null;const n=t._adapter,{parser:s,round:r,isoWeekday:i}=t._parseOpts;let o=e;return typeof s=="function"&&(o=s(o)),Bs(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(np(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,r)),+o)}function wS(t,e,n,s){const r=Xn.length;for(let i=Xn.indexOf(t);i<r-1;++i){const o=Gp[Xn[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=s)return Xn[i]}return Xn[r-1]}function f7(t,e,n,s,r){for(let i=Xn.length-1;i>=Xn.indexOf(n);i--){const o=Xn[i];if(Gp[o].common&&t._adapter.diff(r,s,o)>=e-1)return o}return Xn[n?Xn.indexOf(n):0]}function p7(t){for(let e=Xn.indexOf(t)+1,n=Xn.length;e<n;++e)if(Gp[Xn[e]].common)return Xn[e]}function kS(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:s,hi:r}=w0(n,e),i=n[s]>=e?n[s]:n[r];t[i]=!0}}function m7(t,e,n,s){const r=t._adapter,i=+r.startOf(e[0].value,s),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+r.add(a,1,s))l=n[a],l>=0&&(e[l].major=!0);return e}function _S(t,e,n){const s=[],r={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],r[a]=o,s.push({value:a,major:!1});return i===0||!n?s:m7(t,s,r,n)}class cp extends lc{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const s=e.time||(e.time={}),r=this._adapter=new EW._date(e.adapters.date);r.init(n),su(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:bS(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,s=e.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(u){!o&&!isNaN(u.min)&&(r=Math.min(r,u.min)),!a&&!isNaN(u.max)&&(i=Math.max(i,u.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=Bs(r)&&!isNaN(r)?r:+n.startOf(Date.now(),s),i=Bs(i)&&!isNaN(i)?i:+n.endOf(Date.now(),s)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],s=e[e.length-1]),{min:n,max:s}}buildTicks(){const e=this.options,n=e.time,s=e.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=this.max,a=m8(r,i,o);return this._unit=n.unit||(s.autoSkip?wS(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):f7(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:p7(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),_S(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,s=0,r,i;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?s=i:s=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=es(n,0,o),s=es(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const e=this._adapter,n=this.min,s=this.max,r=this.options,i=r.time,o=i.unit||wS(i.minUnit,n,s,this._getLabelCapacity(n)),a=nt(r.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,u=np(l)||l===!0,d={};let h=n,f,p;if(u&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,u?"day":o),e.diff(s,n,o)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+o);const w=r.ticks.source==="data"&&this.getDataTimestamps();for(f=h,p=0;f<s;f=+e.add(f,a,o),p++)kS(d,f,w);return(f===s||r.bounds==="ticks"||p===1)&&kS(d,f,w),Object.keys(d).sort(vS).map(x=>+x)}getLabelForValue(e){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(e,s.tooltipFormat):n.format(e,s.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,i=this._unit,o=n||r[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,s,r){const i=this.options,o=i.ticks.callback;if(o)return Nt(o,[e,n,s],this);const a=i.time.displayFormats,l=this._unit,u=this._majorUnit,d=l&&a[l],h=u&&a[u],f=s[n],p=u&&h&&f&&f.major;return this._adapter.format(e,r||(p?h:d))}generateTickLabels(e){let n,s,r;for(n=0,s=e.length;n<s;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,s=this.ctx.measureText(e).width,r=Jr(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:s*i+a*o,h:s*o+a*i}}_getLabelCapacity(e){const n=this.options.time,s=n.displayFormats,r=s[n.unit]||s.millisecond,i=this._tickFormatFunction(e,0,_S(this,[e],this._majorUnit),r),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,s;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,s=r.length;n<s;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,s;if(e.length)return e;const r=this.getLabels();for(n=0,s=r.length;n<s;++n)e.push(bS(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return WT(e.sort(vS))}}$e(cp,"id","time"),$e(cp,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Ih(t,e,n){let s=0,r=t.length-1,i,o,a,l;n?(e>=t[s].pos&&e<=t[r].pos&&({lo:s,hi:r}=vy(t,"pos",e)),{pos:i,time:a}=t[s],{pos:o,time:l}=t[r]):(e>=t[s].time&&e<=t[r].time&&({lo:s,hi:r}=vy(t,"time",e)),{time:i,pos:a}=t[s],{time:o,pos:l}=t[r]);const u=o-i;return u?a+(l-a)*(e-i)/u:a}class SS extends cp{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Ih(n,this.min),this._tableRange=Ih(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:s}=this,r=[],i=[];let o,a,l,u,d;for(o=0,a=e.length;o<a;++o)u=e[o],u>=n&&u<=s&&r.push(u);if(r.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,a=r.length;o<a;++o)d=r[o+1],l=r[o-1],u=r[o],Math.round((d+l)/2)!==u&&i.push({time:u,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((r,i)=>r-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?e=this.normalize(n.concat(s)):e=n.length?n:s,e=this._cache.all=e,e}getDecimalForValue(e){return(Ih(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return Ih(this._table,s*this._tableRange+this._minPos,!0)}}$e(SS,"id","timeseries"),$e(SS,"defaults",cp.defaults);kr.register(Uc,hf,jy,ol,wy,cf,ZV,Cy,a7);const Dn={pending:"rgba(234, 179, 8, 0.7)",rejected:"rgba(239, 68, 68, 0.7)",returned:"rgba(249, 115, 22, 0.7)",submitted:"rgba(59, 130, 246, 0.7)",accepted:"rgba(34, 197, 94, 0.7)"},g7=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}];function x7(t){const e=t-4,n=t+1,s=[];for(let r=e;r<=n;r+=1)s.push(r);return s}function An({icon:t,label:e,value:n,helper:s,accentClass:r,onClick:i}){const o=!!i;return c.jsxs(Dt,{className:`p-4 ${o?"cursor-pointer hover:shadow-md transition-shadow":""}`,onClick:i,role:o?"button":void 0,tabIndex:o?0:void 0,onKeyDown:o?a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),i==null||i())}:void 0,children:[c.jsxs("div",{className:"flex items-center justify-between gap-3",children:[c.jsx("div",{className:`h-10 w-10 rounded-xl flex items-center justify-center ${r}`,children:c.jsx(t,{size:18})}),c.jsx("div",{className:"text-2xl font-semibold",children:n})]}),c.jsx("div",{className:"mt-2 text-xs text-black/55 dark:text-white/60",children:e}),s?c.jsx("div",{className:"text-xs text-black/45 dark:text-white/55",children:s}):null]})}function Ua({title:t,children:e}){return c.jsxs(vt,{className:"h-full",children:[c.jsx(Bt,{children:c.jsx(Yt,{children:t})}),c.jsx(Ut,{children:c.jsx("div",{className:"h-[260px]",children:e})})]})}function b2({title:t,subtitle:e,children:n,defaultOpen:s=!1}){const[r,i]=b.useState(s);return c.jsxs(Dt,{className:"p-3",children:[c.jsxs("button",{type:"button",className:"flex w-full items-center justify-between gap-3 text-left",onClick:()=>i(o=>!o),"aria-expanded":r,children:[c.jsxs("div",{className:"min-w-0",children:[c.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85 truncate",children:t}),e?c.jsx("div",{className:"text-xs text-black/50 dark:text-white/60",children:e}):null]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-black/50 dark:text-white/55",children:[c.jsx("span",{children:r?"Hide":"View"}),c.jsx(Zn,{size:16,className:`transition-transform ${r?"rotate-180":""}`})]})]}),r?c.jsx("div",{className:"mt-3 space-y-2 text-xs text-black/60 dark:text-white/65",children:n}):null]})}function Ha({type:t,data:e,options:n}){const s=ge.useRef(null);return ge.useEffect(()=>{if(!s.current)return;const r=kr.getChart(s.current);r&&r.destroy();const i=new kr(s.current,{type:t,data:e,options:n});return()=>i.destroy()},[e,n,t]),c.jsx("canvas",{ref:s})}function y7(t){const e=Number(t)||0;return e>=80?"bg-emerald-500/80":e>=60?"bg-amber-500/80":"bg-rose-500/80"}function jS(t){if(!t)return"--";const e=zs(t);return e?e.toLocaleDateString():t}function v7({mode:t,period:e}){if(!e)return"Current period";if(t==="month"){const[n,s]=e.split("-");return new Date(Number(n),Number(s)-1,1).toLocaleString(void 0,{month:"long",year:"numeric"})}if(t==="year")return e;if(t==="range"){const[n,s]=e.split(",");return`${n} to ${s}`}return e}function CS(t){return{labels:["Pending","Rejected","Returned","Submitted","Accepted"],datasets:[{data:[t.pending,t.rejected,t.returned,t.submitted,t.accepted],backgroundColor:[Dn.pending,Dn.rejected,Dn.returned,Dn.submitted,Dn.accepted],borderWidth:0}]}}function Dh(t){const e={Pending:0,Rejected:0,Returned:0,"Submitted to Sales":0,Accepted:0};return t.forEach(n=>{const s=n.status||"";s.includes("Pending")||s==="Critique"||s==="Raw"?e.Pending+=1:s==="Rejected"||s==="Editing"?e.Rejected+=1:s==="Returned"?e.Returned+=1:s==="Submitted to Sales"?e["Submitted to Sales"]+=1:(s==="Accepted"||s==="Done")&&(e.Accepted+=1)}),e}function Tc(t){return t.length?c.jsx("div",{className:"space-y-3",children:t.map(e=>c.jsx("div",{className:"rounded-xl border border-black/5 dark:border-white/10 bg-white/60 dark:bg-white/5 p-3",children:c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsxs("div",{className:"min-w-0",children:[c.jsxs("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85 truncate",children:["#",e.task_number," - ",e.brand]}),c.jsxs("div",{className:"text-xs text-black/50 dark:text-white/60",children:[e.status," - ",e.videographer||"Unassigned"]})]}),c.jsxs("div",{className:"text-right text-xs text-black/50 dark:text-white/60",children:[c.jsxs("div",{children:["Film: ",jS(e.filming_deadline)]}),c.jsxs("div",{children:["Due: ",jS(e.submission_date)]})]})]})},e.task_number))}):c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No tasks found."})}function Lh(t){return t.length?c.jsx("div",{className:"space-y-4",children:t.map(e=>c.jsxs("div",{className:"rounded-xl border border-black/5 dark:border-white/10 p-3",children:[c.jsxs("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:["#",e.task_number," - ",e.brand]}),c.jsx("div",{className:"mt-2 space-y-2",children:(e.versions||[]).map(n=>c.jsxs("div",{className:"rounded-lg bg-black/5 dark:bg-white/5 p-2 text-xs",children:[c.jsxs("div",{className:"font-semibold",children:["Version ",n.version]}),c.jsx("div",{className:"mt-1 text-black/50 dark:text-white/60",children:(n.lifecycle||[]).map(s=>`${s.stage} (${s.at||""})`).join(" -> ")})]},n.version))})]},e.task_number))}):c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No versions found."})}function jg(t){return t.length?c.jsx("div",{className:"space-y-4",children:t.map(e=>c.jsxs("div",{className:"rounded-xl border border-black/5 dark:border-white/10 p-3",children:[c.jsxs("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:["#",e.task_number," - ",e.brand]}),c.jsx("div",{className:"mt-2 space-y-2",children:e.rejectionEvents.map((n,s)=>c.jsxs("div",{className:"rounded-lg bg-black/5 dark:bg-white/5 p-2 text-xs",children:[c.jsxs("div",{className:"font-semibold",children:["Version ",n.version]}),c.jsxs("div",{className:"text-black/50 dark:text-white/60",children:[n.event.rejection_class||"Unclassified"," - ",n.event.rejection_comments||"No notes"]})]},`${e.task_number}-${s}`))})]},e.task_number))}):c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No rejection events."})}function b7(t){if(!t.length)return c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No pending reviews."});const e=t.reduce((n,s)=>{const r=s.task.task_number;return n[r]||(n[r]={task:s.task,versions:[]}),n[r].versions.push(s),n},{});return c.jsx("div",{className:"space-y-3",children:Object.values(e).map(n=>c.jsx(b2,{title:`#${n.task.task_number} - ${n.task.brand}`,subtitle:n.task.videographer?`Videographer: ${n.task.videographer}`:"Videographer: --",children:n.versions.map(s=>c.jsxs("div",{className:"rounded-lg bg-black/5 dark:bg-white/5 p-2",children:[c.jsxs("div",{className:"font-semibold",children:["Version ",s.version.version]}),c.jsxs("div",{children:["Waiting: ",s.waitingHours??"--"," hrs"]}),c.jsxs("div",{children:["Uploaded: ",s.uploadTime?s.uploadTime.toLocaleString():"--"]})]},`${n.task.task_number}-${s.version.version}`))},n.task.task_number))})}function w7(t){if(!t.length)return c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No response data."});const e=t.reduce((n,s)=>{const r=s.task.task_number;return n[r]||(n[r]={task:s.task,responses:[]}),n[r].responses.push(s),n},{});return c.jsx("div",{className:"space-y-3",children:Object.values(e).map(n=>c.jsx(b2,{title:`#${n.task.task_number} - ${n.task.brand}`,subtitle:n.task.videographer?`Videographer: ${n.task.videographer}`:"Videographer: --",children:n.responses.map((s,r)=>c.jsxs("div",{className:"rounded-lg bg-black/5 dark:bg-white/5 p-2",children:[c.jsxs("div",{className:"font-semibold",children:["Version ",s.version.version]}),c.jsxs("div",{children:["Decision: ",s.decision]}),c.jsxs("div",{children:["Response: ",s.responseHours," hrs"]}),c.jsxs("div",{children:["Uploaded: ",s.uploadTime?s.uploadTime.toLocaleString():"--"]}),c.jsxs("div",{children:["Reviewed: ",s.reviewTime?s.reviewTime.toLocaleString():"--"]}),s.rejectionClass?c.jsxs("div",{children:["Class: ",s.rejectionClass]}):null,s.comments?c.jsxs("div",{children:["Notes: ",s.comments]}):null]},`${n.task.task_number}-${r}`))},n.task.task_number))})}function k7(){const t=new Date,e=t.getFullYear(),[n,s]=b.useState("month"),[r,i]=b.useState(e),[o,a]=b.useState(t.getMonth()+1),[l,u]=b.useState(""),[d,h]=b.useState(""),[f,p]=b.useState(!1),[w,x]=b.useState(null),[y,g]=b.useState(null),m=x7(e),v=b.useMemo(()=>m.map(me=>({value:me,label:String(me)})),[m]),k=b.useMemo(()=>[{value:"month",label:"Month"},{value:"year",label:"Year"},{value:"range",label:"Range"}],[]),S=b.useMemo(()=>n==="month"?`${r}-${String(o).padStart(2,"0")}`:n==="year"?`${r}`:n==="range"&&l&&d?`${l},${d}`:"",[n,l,d,o,r]),C=en({queryKey:["video-critique","dashboard",n,S],queryFn:()=>i4({mode:n,period:S})}),_=C.data||{},j=_.tasks||[],N=_.summary||{},P=_.pie||{},D=_.reviewer||{},M=_.summary_videographers&&Object.keys(_.summary_videographers).length?_.summary_videographers:KE(j),I=_.videographers||{},L=b.useMemo(()=>QE(j),[j]),R=b.useMemo(()=>Si(j),[j]),$=b.useMemo(()=>GE(j),[j]),U=b.useMemo(()=>YE(j),[j]),E=b.useMemo(()=>({labels:["Completed","Not Completed"],datasets:[{data:[P.completed||0,P.not_completed||0],backgroundColor:["rgba(34, 197, 94, 0.7)","rgba(239, 68, 68, 0.7)"],borderWidth:0}]}),[P.completed,P.not_completed]),T=b.useMemo(()=>{const me=L.tasksStarted||0,fe=P.completed||0,Ie=Math.max(me-fe,0);return{labels:["Completed","Not Completed"],datasets:[{data:[fe,Ie],backgroundColor:["rgba(34, 197, 94, 0.7)","rgba(239, 68, 68, 0.7)"],borderWidth:0}]}},[L.tasksStarted,P.completed]),z=b.useMemo(()=>CS(R),[R]),q=b.useMemo(()=>Object.entries(M).sort((me,fe)=>fe[1].total-me[1].total),[M]),W=!!w,he=!!y,ee=y?M[y]:null,B=y?I[y]||[]:[],Q=b.useMemo(()=>$u(j,"pending"),[j]),de=b.useMemo(()=>$u(j,"submitted"),[j]),J=b.useMemo(()=>ng(j,"hod"),[j]),ve=b.useMemo(()=>ng(j,"hos"),[j]),Ae=b.useMemo(()=>{const me={};let fe=0,Ie=0;j.forEach(G=>{(G.versions||[]).forEach(ae=>{const Y=ae.lifecycle||[];if(!Y.length)return;const F=Y[Y.length-1],xe=((F==null?void 0:F.stage)||"").toLowerCase();(xe==="accepted"||xe==="done")&&(fe+=1),(xe==="rejected"||xe==="editing"||xe==="returned")&&(Ie+=1),Y.forEach(Se=>{const je=(Se.stage||"").toLowerCase();if(je==="rejected"||je==="editing"||je==="returned"){const Le=Se.rejection_class||"Unclassified";me[Le]=(me[Le]||0)+1}})})});const X=fe+Ie,pe=X?(fe/X*100).toFixed(1):"0",re=X?(Ie/X*100).toFixed(1):"0",K=Object.entries(me).sort((G,ae)=>ae[1]-G[1]);return{acceptedPct:pe,rejectedPct:re,classes:K,totalRejections:Ie}},[j]);return C.isLoading?c.jsxs(vt,{children:[c.jsx(Bt,{children:c.jsx(Yt,{children:"Video Critique Dashboard"})}),c.jsx(Ut,{children:c.jsx(Ye,{text:"Loading dashboard",className:"text-sm text-black/60 dark:text-white/65"})})]}):c.jsxs("div",{className:"flex flex-col gap-4 min-h-0 pb-4",children:[c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 px-1",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:"Video Critique Dashboard"}),c.jsx("div",{className:"text-xs text-black/50 dark:text-white/60",children:v7({mode:n,period:S})})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsx(ot,{value:n,options:k,onChange:s,className:"sm:w-[200px]"}),n==="month"?c.jsxs(c.Fragment,{children:[c.jsx(ot,{value:o,options:g7,onChange:a,className:"sm:w-[200px]"}),c.jsx(ot,{value:r,options:v,onChange:i,className:"sm:w-[200px]"})]}):null,n==="year"?c.jsx(ot,{value:r,options:v,onChange:i,className:"sm:w-[200px]"}):null,n==="range"?c.jsxs(te,{variant:"ghost",className:"rounded-2xl",onClick:()=>p(!0),children:[c.jsx(EM,{size:16,className:"mr-2"}),"Pick Range"]}):null,c.jsxs(te,{variant:"ghost",className:"rounded-2xl",onClick:()=>C.refetch(),children:[c.jsx(DM,{size:16,className:"mr-2"}),"Refresh"]})]})]}),c.jsxs("div",{className:"grid gap-3 md:grid-cols-2 xl:grid-cols-6",children:[c.jsx(An,{icon:Zh,label:"Total Tasks",value:N.total||0,helper:"Tasks created",accentClass:"bg-black/5 dark:bg-white/10 text-black/70 dark:text-white/80",onClick:()=>x("total_created")}),c.jsx(An,{icon:nh,label:"Assigned",value:N.assigned||0,helper:"Assigned to videographers",accentClass:"bg-blue-500/10 text-blue-700 dark:text-blue-200",onClick:()=>x("total_assigned")}),c.jsx(An,{icon:sh,label:"Tasks Started",value:L.tasksStarted||0,helper:"Filming date passed",accentClass:"bg-yellow-500/10 text-yellow-700 dark:text-yellow-200",onClick:()=>x("total_started")}),c.jsx(An,{icon:rh,label:"Late Tasks",value:L.lateTasks||0,helper:"Submission overdue",accentClass:"bg-red-500/10 text-red-700 dark:text-red-200",onClick:()=>x("total_late")}),c.jsx(An,{icon:Zh,label:"Uploads",value:N.uploads||0,helper:"Total versions",accentClass:"bg-purple-500/10 text-purple-700 dark:text-purple-200",onClick:()=>x("upload_ratio")}),c.jsx(An,{icon:nh,label:"Completed",value:P.completed||0,helper:"Accepted or done",accentClass:"bg-emerald-500/10 text-emerald-700 dark:text-emerald-200",onClick:()=>x("completed")})]}),c.jsxs("div",{className:"grid gap-3 md:grid-cols-2 xl:grid-cols-6",children:[c.jsx(An,{icon:sh,label:"Pending HOD",value:L.pendingHOD||0,helper:"Versions in critique",accentClass:"bg-yellow-500/10 text-yellow-700 dark:text-yellow-200",onClick:()=>x("pending_hod")}),c.jsx(An,{icon:sh,label:"Pending HOS",value:L.pendingHOS||0,helper:"Submitted to sales",accentClass:"bg-blue-500/10 text-blue-700 dark:text-blue-200",onClick:()=>x("pending_hos")}),c.jsx(An,{icon:rh,label:"Rejected by HOD",value:L.rejectionsByHOD||0,helper:"Editing / rejected",accentClass:"bg-red-500/10 text-red-700 dark:text-red-200",onClick:()=>x("rejected_hod")}),c.jsx(An,{icon:rh,label:"Rejected by HOS",value:L.rejectionsByHOS||0,helper:"Returned",accentClass:"bg-orange-500/10 text-orange-700 dark:text-orange-200",onClick:()=>x("rejected_hos")}),c.jsx(An,{icon:Zh,label:"Upload Ratio",value:L.uploadRatio||"0",helper:"Avg versions/task",accentClass:"bg-black/5 dark:bg-white/10 text-black/70 dark:text-white/80",onClick:()=>x("upload_ratio")}),c.jsx(An,{icon:nh,label:"Acceptance Rate",value:`${N.accepted_pct||0}%`,helper:"Accepted vs reviewed",accentClass:"bg-emerald-500/10 text-emerald-700 dark:text-emerald-200",onClick:()=>x("acceptance_rate")})]}),c.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[c.jsx(Ua,{title:"Completion Overview",children:c.jsx(Ha,{type:"doughnut",data:E,options:{maintainAspectRatio:!1}})}),c.jsx(Ua,{title:"Started vs Completed",children:c.jsx(Ha,{type:"doughnut",data:T,options:{maintainAspectRatio:!1}})}),c.jsx(Ua,{title:"Status Distribution",children:c.jsx(Ha,{type:"bar",data:z,options:{maintainAspectRatio:!1,indexAxis:"y",scales:{x:{ticks:{color:"#94a3b8"},grid:{color:"rgba(148,163,184,0.2)"}},y:{ticks:{color:"#94a3b8"},grid:{color:"rgba(148,163,184,0.2)"}}}}})})]}),c.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[c.jsxs(vt,{children:[c.jsx(Bt,{children:c.jsx(Yt,{children:"Reviewer Performance"})}),c.jsx(Ut,{children:c.jsxs("div",{className:"space-y-3 text-sm",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-black/60 dark:text-white/60",children:"Avg response time"}),c.jsx("span",{className:"font-semibold",children:D.avg_response_display||"0 hrs"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-black/60 dark:text-white/60",children:"Handled"}),c.jsx("span",{className:"font-semibold",children:D.handled||0})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-black/60 dark:text-white/60",children:"Accepted by HOS"}),c.jsx("span",{className:"font-semibold",children:D.accepted||0})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-black/60 dark:text-white/60",children:"Success rate"}),c.jsxs("span",{className:"font-semibold",children:[D.handled_percent||0,"%"]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-black/60 dark:text-white/60",children:"Pending reviews"}),c.jsx("span",{className:"font-semibold",children:$.count||0})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[c.jsx(te,{variant:"secondary",className:"rounded-2xl w-full justify-center h-auto py-2 whitespace-normal text-center leading-snug",onClick:()=>x("response_time"),children:"View response times"}),c.jsx(te,{variant:"secondary",className:"rounded-2xl w-full justify-center h-auto py-2 whitespace-normal text-center leading-snug",onClick:()=>x("pending_reviews"),children:"View pending reviews"})]})]})})]}),c.jsxs(vt,{className:"lg:col-span-2",children:[c.jsx(Bt,{children:c.jsx(Yt,{children:"Videographers"})}),c.jsx(Ut,{children:q.length?c.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:q.map(([me,fe])=>c.jsxs("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white/60 dark:bg-white/5 p-4 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>g(me),children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-black/80 dark:text-white/85",children:me}),c.jsxs("div",{className:"text-xs text-black/50 dark:text-white/60",children:[fe.total," tasks"]})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("div",{className:"text-lg font-semibold",children:[fe.accepted_pct,"%"]}),c.jsx("div",{className:"text-xs text-black/50 dark:text-white/60",children:"Acceptance"})]})]}),c.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-xs text-black/60 dark:text-white/60",children:[c.jsxs("div",{children:["Started: ",fe.started]}),c.jsxs("div",{children:["Late: ",fe.late]}),c.jsxs("div",{children:["Completed: ",fe.completed]}),c.jsxs("div",{children:["Uploads: ",fe.uploads]})]}),c.jsx("div",{className:"mt-3 h-2 rounded-full bg-black/10 dark:bg-white/10 overflow-hidden",children:c.jsx("div",{className:`h-full ${y7(fe.accepted_pct)}`,style:{width:`${fe.accepted_pct}%`}})})]},me))}):c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No videographer data."})})]})]}),c.jsxs(ws,{open:W,onClose:()=>x(null),title:"Details",maxWidth:"820px",children:[w==="total_created"?Tc(j):null,w==="total_assigned"?Tc(j.filter(me=>me.status!=="Not assigned yet")):null,w==="total_started"?Tc(j.filter(me=>{const fe=zs(me.filming_deadline||"");if(!fe)return!1;const Ie=new Date;return Ie.setHours(0,0,0,0),fe<=Ie})):null,w==="total_late"?Tc(j.filter(sg)):null,w==="completed"?Tc(j.filter(me=>me.status==="Accepted"||me.status==="Done")):null,w==="pending_hod"?Lh(Q.map(me=>({...me.task,versions:[me.version]}))):null,w==="pending_hos"?Lh(de.map(me=>({...me.task,versions:[me.version]}))):null,w==="rejected_hod"?jg(J):null,w==="rejected_hos"?jg(ve):null,w==="upload_ratio"?Lh(j.filter(me=>{var fe;return(fe=me.versions)==null?void 0:fe.length})):null,w==="acceptance_rate"?c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs(Dt,{className:"p-4 text-center",children:[c.jsxs("div",{className:"text-2xl font-semibold text-emerald-600",children:[Ae.acceptedPct,"%"]}),c.jsx("div",{className:"text-xs text-black/50 dark:text-white/60",children:"Acceptance"})]}),c.jsxs(Dt,{className:"p-4 text-center",children:[c.jsxs("div",{className:"text-2xl font-semibold text-red-600",children:[Ae.rejectedPct,"%"]}),c.jsx("div",{className:"text-xs text-black/50 dark:text-white/60",children:"Rejection"})]})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-black/70 dark:text-white/70 mb-2",children:"Rejection classes"}),Ae.classes.length?c.jsx("div",{className:"space-y-2",children:Ae.classes.map(([me,fe])=>c.jsx("div",{className:"rounded-lg bg-black/5 dark:bg-white/5 p-2 text-xs",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{children:me}),c.jsx("span",{children:fe})]})},me))}):c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No rejection data."})]})]}):null,w==="response_time"?w7(U):null,w==="pending_reviews"?b7($.reviews||[]):null]}),c.jsx(ws,{open:he,onClose:()=>g(null),title:y?`${y} Details`:"Videographer",maxWidth:"980px",children:y&&ee?c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs(Dt,{className:"p-4 text-center",children:[c.jsxs("div",{className:"text-2xl font-semibold",children:[ee.accepted_pct,"%"]}),c.jsx("div",{className:"text-xs text-black/50 dark:text-white/60",children:"Acceptance rate"})]}),c.jsxs(Dt,{className:"p-4 text-center",children:[c.jsx("div",{className:"text-2xl font-semibold",children:ee.late}),c.jsx("div",{className:"text-xs text-black/50 dark:text-white/60",children:"Late tasks"})]})]}),c.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[c.jsx(An,{icon:sh,label:"Pending",value:Si(B).pending,accentClass:"bg-yellow-500/10 text-yellow-700 dark:text-yellow-200"}),c.jsx(An,{icon:rh,label:"Rejected",value:Si(B).rejected,accentClass:"bg-red-500/10 text-red-700 dark:text-red-200"}),c.jsx(An,{icon:nh,label:"Accepted",value:Si(B).accepted,accentClass:"bg-emerald-500/10 text-emerald-700 dark:text-emerald-200"})]}),c.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[c.jsx(Ua,{title:"Version Distribution",children:c.jsx(Ha,{type:"bar",data:CS(Si(B)),options:{maintainAspectRatio:!1,indexAxis:"y"}})}),c.jsx(Ua,{title:"All Tasks Status",children:c.jsx(Ha,{type:"pie",data:{labels:Object.keys(Dh(B)),datasets:[{data:Object.values(Dh(B)),backgroundColor:[Dn.pending,Dn.rejected,Dn.returned,Dn.submitted,Dn.accepted],borderWidth:0}]},options:{maintainAspectRatio:!1}})})]}),c.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[c.jsx(Ua,{title:"Overdue Tasks",children:c.jsx(Ha,{type:"pie",data:{labels:Object.keys(Dh(B.filter(sg))),datasets:[{data:Object.values(Dh(B.filter(sg))),backgroundColor:[Dn.pending,Dn.rejected,Dn.returned,Dn.submitted,Dn.accepted],borderWidth:0}]},options:{maintainAspectRatio:!1}})}),c.jsxs(vt,{children:[c.jsx(Bt,{children:c.jsx(Yt,{children:"Failure Analysis"})}),c.jsx(Ut,{children:jg(ng(B,"hod"))})]})]}),c.jsxs(vt,{children:[c.jsx(Bt,{children:c.jsx(Yt,{children:"Version History"})}),c.jsx(Ut,{children:Lh(B)})]})]}):null}),c.jsx(ws,{open:f,onClose:()=>p(!1),title:"Select date range",maxWidth:"520px",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid gap-3",children:[c.jsx("label",{className:"text-xs text-black/60 dark:text-white/60",children:"Start date"}),c.jsx("input",{type:"date",value:l,onChange:me=>u(me.target.value),className:"rounded-2xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-xs"})]}),c.jsxs("div",{className:"grid gap-3",children:[c.jsx("label",{className:"text-xs text-black/60 dark:text-white/60",children:"End date"}),c.jsx("input",{type:"date",value:d,onChange:me=>h(me.target.value),className:"rounded-2xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-xs"})]}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx(te,{variant:"ghost",className:"rounded-2xl",onClick:()=>p(!1),children:"Cancel"}),c.jsx(te,{className:"rounded-2xl",onClick:()=>p(!1),children:"Apply"})]})]})})]})}function _7(){const[t,e]=b.useState("chat");return c.jsxs("div",{className:"h-full min-h-0 flex flex-col gap-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(te,{variant:t==="chat"?"default":"ghost",className:"rounded-2xl",onClick:()=>e("chat"),children:"Chat"}),c.jsx(te,{variant:t==="dashboard"?"default":"ghost",className:"rounded-2xl",onClick:()=>e("dashboard"),children:"Dashboard"})]}),c.jsxs("div",{className:"flex-1 min-h-0",children:[c.jsx("div",{className:t==="chat"?"h-full":"hidden","aria-hidden":t!=="chat",children:c.jsx(yH,{})}),c.jsx("div",{className:t==="dashboard"?"h-full overflow-y-auto px-2 py-1":"hidden","aria-hidden":t!=="dashboard",children:c.jsx(k7,{})})]})]})}function S7(t){return t?Object.values(t).map(e=>e==null?"":typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"?String(e):"").join(" ").toLowerCase():""}function NS(t){return t?t==="display_name"?"NAME":String(t).replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()):""}function ES(t){if(t==null||t==="")return"";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="number")return Number.isFinite(t)?String(t):"";if(Array.isArray(t))return t.length?JSON.stringify(t):"";if(typeof t=="object")try{return JSON.stringify(t)}catch{return""}return String(t)}function j7({locations:t,locationsQuery:e}){var v;const[n,s]=b.useState(null),[r,i]=b.useState(""),[o,a]=b.useState(""),[l,u]=b.useState(""),[d,h]=b.useState(""),f=b.useMemo(()=>{const k=Array.isArray(t)?t:[],S=new Set;return k.forEach(C=>{const _=(C==null?void 0:C.display_type)||"";_&&S.add(_)}),[{value:"",label:"All display types"},...Array.from(S).sort().map(C=>({value:C,label:C}))]},[t]),p=b.useMemo(()=>{const k=Array.isArray(t)?t:[],S=new Set;return k.forEach(C=>{const _=(C==null?void 0:C.company_schema)||"";_&&S.add(_)}),[{value:"",label:"All companies"},...Array.from(S).sort().map(C=>({value:C,label:C}))]},[t]),w=b.useMemo(()=>{const k=Array.isArray(t)?t:[],S=new Set;return k.forEach(C=>{const _=(C==null?void 0:C.series)||"";_&&S.add(_)}),[{value:"",label:"All series"},...Array.from(S).sort().map(C=>({value:C,label:C}))]},[t]),x=b.useMemo(()=>{const k=Array.isArray(t)?t:[],S=r.trim().toLowerCase();return k.filter(_=>!(o&&((_==null?void 0:_.display_type)||"")!==o||l&&((_==null?void 0:_.company_schema)||"")!==l||d&&((_==null?void 0:_.series)||"")!==d||S&&!S7(_).includes(S))).map((_,j)=>({id:(_==null?void 0:_.location_key)||`location-${j}`,raw:_}))},[t,o,l,d,r]),y=b.useMemo(()=>{const k=Array.isArray(t)?t:[],S=new Set;k.forEach(j=>{Object.keys(j||{}).forEach(N=>S.add(N))});const C=["display_name","location_key","display_type","company_schema","series","city","area","upload_fee","height","width","number_of_faces","spot_duration","loop_duration","sov_percent","eligible_for_proposals","eligible_for_mockups"],_=Array.from(S).filter(j=>!C.includes(j)).sort();return[...C.filter(j=>S.has(j)),..._]},[t]),g=b.useMemo(()=>n?Object.entries(n):[],[n]),m=n||null;return c.jsxs(c.Fragment,{children:[c.jsxs(vt,{className:"h-full min-h-0 flex flex-col",children:[c.jsxs(Bt,{className:"space-y-1",children:[c.jsx(Yt,{children:"Locations"}),c.jsxs("div",{className:"text-xs text-black/55 dark:text-white/60",children:[x.length," location",x.length===1?"":"s"]})]}),c.jsxs(Ut,{className:"flex-1 min-h-0 overflow-y-auto space-y-3 pt-1 md:flex md:flex-col md:overflow-hidden",children:[c.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-4 md:shrink-0",children:[c.jsx(go,{value:r,onChange:k=>i(k.target.value),className:"w-full",placeholder:"Search locations..."}),c.jsx(ot,{value:o,options:f,onChange:a,className:"w-full"}),c.jsx(ot,{value:l,options:p,onChange:u,className:"w-full"}),c.jsx(ot,{value:d,options:w,onChange:h,className:"w-full"})]}),e.isLoading?c.jsx(Ye,{text:"Loading locations",className:"text-sm text-black/60 dark:text-white/65"}):e.isError?c.jsx("div",{className:"text-sm text-red-700 dark:text-red-300",children:((v=e.error)==null?void 0:v.message)||"Failed to load locations."}):x.length?c.jsx("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white/40 dark:bg-white/5 w-full max-w-full overflow-hidden md:flex-1 md:min-h-0",children:c.jsx("div",{className:"w-full max-w-full min-w-0 overflow-x-auto md:h-full md:overflow-auto",children:c.jsx("div",{className:"min-w-max",children:c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-white dark:bg-neutral-900 text-xs uppercase tracking-wide text-black/45 dark:text-white/50",children:c.jsxs("tr",{children:[y.map(k=>c.jsx("th",{className:"sticky top-0 z-10 px-4 py-3 text-left font-semibold whitespace-nowrap bg-white dark:bg-neutral-900",children:NS(k)},k)),c.jsx("th",{className:"sticky top-0 right-0 z-20 px-4 py-3 text-left font-semibold bg-white dark:bg-neutral-900",children:"Actions"})]})}),c.jsx("tbody",{className:"divide-y divide-black/5 dark:divide-white/10",children:x.map(k=>c.jsxs("tr",{className:"text-black/80 dark:text-white/85",children:[y.map(S=>{var _;const C=ES((_=k.raw)==null?void 0:_[S]);return c.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:C},`${k.id}-${S}`)}),c.jsx("td",{className:"sticky right-0 z-10 px-4 py-3 bg-white/90 dark:bg-neutral-900/95",children:c.jsx(te,{variant:"ghost",size:"sm",className:"rounded-xl",onClick:()=>s(k.raw),children:"Edit"})})]},k.id))})]})})})}):c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"No locations found."})]})]}),c.jsx(ws,{open:!!n,onClose:()=>s(null),title:"Edit location",maxWidth:"560px",children:m?c.jsxs("div",{className:"space-y-3",children:[c.jsx(_e,{label:"Location Key",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:m.location_key||"",disabled:!0,readOnly:!0})}),c.jsx(_e,{label:"Display Name",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:m.display_name||"",disabled:!0,readOnly:!0})}),c.jsx(_e,{label:"Display Type",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:m.display_type||"",disabled:!0,readOnly:!0})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsx(_e,{label:"Company",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:m.company_schema||"",disabled:!0,readOnly:!0})}),c.jsx(_e,{label:"Series",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:m.series||"",disabled:!0,readOnly:!0})}),c.jsx(_e,{label:"City",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:m.city||"",disabled:!0,readOnly:!0})}),c.jsx(_e,{label:"Area",children:c.jsx("input",{className:"w-full rounded-xl bg-white/60 dark:bg-white/5 ring-1 ring-black/5 dark:ring-white/10 px-3 py-2 text-sm outline-none",value:m.area||"",disabled:!0,readOnly:!0})})]}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx(te,{variant:"ghost",className:"rounded-2xl",onClick:()=>s(null),children:"Close"}),c.jsx(te,{className:"rounded-2xl",disabled:!0,children:"Save"})]}),c.jsxs("div",{className:"pt-2",children:[c.jsx("div",{className:"text-xs uppercase tracking-wide text-black/50 dark:text-white/60 mb-2",children:"All fields"}),c.jsx("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white/40 dark:bg-white/5 divide-y divide-black/5 dark:divide-white/10",children:g.map(([k,S])=>c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-2 px-3 py-2 text-sm",children:[c.jsx("div",{className:"text-xs uppercase tracking-wide text-black/45 dark:text-white/55 md:w-56",children:NS(k)}),c.jsx("div",{className:"text-black/80 dark:text-white/85 break-all",children:ES(S)})]},k))})]})]}):null})]})}function C7(t){return t?Object.values(t).map(e=>e==null?"":typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"?String(e):"").join(" ").toLowerCase():""}function N7(t){return t?t==="display_name"?"NAME":String(t).replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()):""}function E7(t){if(t==null||t==="")return"";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="number")return Number.isFinite(t)?String(t):"";if(Array.isArray(t))return t.length?JSON.stringify(t):"";if(typeof t=="object")try{return JSON.stringify(t)}catch{return""}return String(t)}function Yp({title:t,items:e,itemsQuery:n,itemLabel:s="item",searchPlaceholder:r="Search...",emptyMessage:i="No items found.",preferredColumns:o=[],stringKey:a="value"}){var y;const[l,u]=b.useState(""),d=b.useMemo(()=>(Array.isArray(e)?e:[]).map(m=>m==null?{[a]:""}:typeof m=="string"||typeof m=="number"||typeof m=="boolean"?{[a]:m}:m),[e,a]),h=b.useMemo(()=>{const g=new Set;d.forEach(v=>{Object.keys(v||{}).forEach(k=>g.add(k))});const m=Array.from(g).filter(v=>!o.includes(v)).sort();return[...o.filter(v=>g.has(v)),...m]},[d,o]),f=b.useMemo(()=>{const g=l.trim().toLowerCase();return d.filter(v=>g?C7(v).includes(g):!0).map((v,k)=>({id:(v==null?void 0:v.id)??(v==null?void 0:v[a])??`row-${k}`,raw:v}))},[d,l,a]),p=n==null?void 0:n.isLoading,w=n==null?void 0:n.isError,x=((y=n==null?void 0:n.error)==null?void 0:y.message)||"Failed to load data.";return c.jsxs(vt,{className:"h-full min-h-0 flex flex-col",children:[c.jsxs(Bt,{className:"space-y-1",children:[c.jsx(Yt,{children:t}),c.jsxs("div",{className:"text-xs text-black/55 dark:text-white/60",children:[f.length," ",s,f.length===1?"":"s"]})]}),c.jsxs(Ut,{className:"flex-1 min-h-0 overflow-y-auto space-y-3 pt-1 md:flex md:flex-col md:overflow-hidden",children:[c.jsx(go,{value:l,onChange:g=>u(g.target.value),className:"w-full md:shrink-0",placeholder:r}),p?c.jsx(Ye,{text:"Loading",className:"text-sm text-black/60 dark:text-white/65"}):w?c.jsx("div",{className:"text-sm text-red-700 dark:text-red-300",children:x}):f.length?c.jsx("div",{className:"rounded-2xl border border-black/5 dark:border-white/10 bg-white/40 dark:bg-white/5 w-full max-w-full overflow-hidden md:flex-1 md:min-h-0",children:c.jsx("div",{className:"w-full max-w-full min-w-0 overflow-x-auto md:h-full md:overflow-auto",children:c.jsx("div",{className:"min-w-max",children:c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-white dark:bg-neutral-900 text-xs uppercase tracking-wide text-black/45 dark:text-white/50",children:c.jsx("tr",{children:h.map(g=>c.jsx("th",{className:"sticky top-0 z-10 px-4 py-3 text-left font-semibold whitespace-nowrap bg-white dark:bg-neutral-900",children:N7(g)},g))})}),c.jsx("tbody",{className:"divide-y divide-black/5 dark:divide-white/10",children:f.map(g=>c.jsx("tr",{className:"text-black/80 dark:text-white/85",children:h.map(m=>{var v;return c.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:E7((v=g.raw)==null?void 0:v[m])},`${g.id}-${m}`)})},g.id))})]})})})}):c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:i})]})]})}function T7({networks:t,networksQuery:e}){return c.jsx(Yp,{title:"Networks",items:t,itemsQuery:e,itemLabel:"network",searchPlaceholder:"Search networks...",emptyMessage:"No networks found.",preferredColumns:["network_name","name","company","company_schema","is_active","location_count"]})}function P7({assetTypes:t,assetTypesQuery:e}){return c.jsx(Yp,{title:"Asset Types",items:t,itemsQuery:e,itemLabel:"type",searchPlaceholder:"Search asset types...",emptyMessage:"No asset types found.",preferredColumns:["name","type_key","company","network_id","is_active","location_count"]})}function R7({networkAssets:t,networkAssetsQuery:e}){return c.jsx(Yp,{title:"Network Assets",items:t,itemsQuery:e,itemLabel:"asset",searchPlaceholder:"Search assets...",emptyMessage:"No network assets found.",preferredColumns:["display_name","asset_key","location_key","network_id","type_id","company","is_active"]})}function A7({packages:t,packagesQuery:e}){return c.jsx(Yp,{title:"Packages",items:t,itemsQuery:e,itemLabel:"package",searchPlaceholder:"Search packages...",emptyMessage:"No packages found.",preferredColumns:["name","company","is_active"]})}const O7=[{key:"networks",label:"Networks",disabled:!1},{key:"asset-types",label:"Asset Types",disabled:!1},{key:"network-assets",label:"Network Assets",disabled:!1},{key:"packages",label:"Packages",disabled:!1},{key:"locations",label:"Locations",disabled:!1}];function Pc(t,e=[]){if(Array.isArray(t))return t;for(const n of e)if(Array.isArray(t==null?void 0:t[n]))return t[n];return Array.isArray(t==null?void 0:t.data)?t.data:[]}function M7(){const{user:t}=ii(),[e,n]=b.useState("networks");if(!md(t))return c.jsxs(vt,{children:[c.jsx(Bt,{children:c.jsx(Yt,{children:"Restricted"})}),c.jsx(Ut,{className:"text-sm text-black/60 dark:text-white/65",children:"You don't have access to asset management."})]});const s=en({queryKey:["asset-management","networks"],queryFn:()=>m4(),enabled:e==="networks"}),r=en({queryKey:["asset-management","asset-types"],queryFn:()=>g4(),enabled:e==="asset-types"}),i=en({queryKey:["asset-management","network-assets"],queryFn:()=>x4(),enabled:e==="network-assets"}),o=en({queryKey:["asset-management","packages"],queryFn:()=>v4(),enabled:e==="packages"}),a=en({queryKey:["asset-management","locations"],queryFn:()=>y4(),enabled:e==="locations"}),l=b.useMemo(()=>Pc(s.data,["networks"]),[s.data]),u=b.useMemo(()=>Pc(r.data,["asset_types","types"]),[r.data]),d=b.useMemo(()=>Pc(i.data,["network_assets","assets"]),[i.data]),h=b.useMemo(()=>Pc(o.data,["packages"]),[o.data]),f=b.useMemo(()=>Pc(a.data,["locations"]),[a.data]);return c.jsxs("div",{className:"flex h-full min-h-0 min-w-0 flex-col gap-4",children:[c.jsx("div",{className:"flex items-center gap-2 overflow-x-auto",children:O7.map(p=>c.jsx(te,{variant:e===p.key?"default":"ghost",onClick:()=>n(p.key),className:"rounded-2xl shrink-0",disabled:p.disabled,title:p.disabled?"Coming soon":void 0,children:p.label},p.key))}),c.jsxs("div",{className:"flex-1 min-h-0 min-w-0",children:[e==="networks"?c.jsx("div",{className:"h-full",children:c.jsx(T7,{networks:l,networksQuery:s})}):null,e==="asset-types"?c.jsx("div",{className:"h-full",children:c.jsx(P7,{assetTypes:u,assetTypesQuery:r})}):null,e==="network-assets"?c.jsx("div",{className:"h-full",children:c.jsx(R7,{networkAssets:d,networkAssetsQuery:i})}):null,e==="packages"?c.jsx("div",{className:"h-full",children:c.jsx(A7,{packages:h,packagesQuery:o})}):null,e==="locations"?c.jsx("div",{className:"h-full",children:c.jsx(j7,{locations:f,locationsQuery:a})}):null]})]})}function I7({children:t}){const{user:e,authReady:n,session:s,pendingAccess:r,logout:i}=ii(),o=Jl();return!n||s&&!e?(console.log("[ProtectedRoute] Waiting for auth",{authReady:n,hasSession:!!s,hasUser:!!e}),null):(console.log("[ProtectedRoute] Auth ready, rendering children",{user:e==null?void 0:e.email}),r?c.jsx(fN,{email:r.email,message:r.message,onSignOut:i}):e?t:c.jsx(Xh,{to:"/login",replace:!0,state:{from:o.pathname}}))}function D7(){const t="mmg-brand-theme",[e,n]=b.useState("none");b.useEffect(()=>{if(typeof window>"u")return;const i=window.localStorage.getItem(t)||"none";n(i),i==="none"?document.body.removeAttribute("data-brand-theme"):document.body.setAttribute("data-brand-theme",i)},[]);const s=r=>{n(r),typeof window<"u"&&window.localStorage.setItem(t,r),r==="none"?document.body.removeAttribute("data-brand-theme"):document.body.setAttribute("data-brand-theme",r)};return c.jsx("div",{className:"h-full min-h-0",children:c.jsxs(vt,{className:"h-full",children:[c.jsx(Bt,{children:c.jsx(Yt,{children:"Settings"})}),c.jsxs(Ut,{className:"text-sm text-black/60 dark:text-white/65 space-y-4",children:[c.jsxs(Dt,{className:"flex items-center justify-between p-4",children:[c.jsxs("div",{children:[c.jsx("div",{className:"font-semibold text-black/80 dark:text-white/85",children:"Theme"}),c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"Toggle dark / light mode"})]}),c.jsx(pN,{})]}),c.jsxs(Dt,{className:"space-y-3 p-4",children:[c.jsx("div",{className:"flex items-center justify-between gap-4",children:c.jsxs("div",{children:[c.jsx("div",{className:"font-semibold text-black/80 dark:text-white/85",children:"Color theme"}),c.jsx("div",{className:"text-sm text-black/60 dark:text-white/65",children:"Choose a color palette that layers on top of light / dark mode."})]})}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 mt-2",children:[c.jsx("button",{type:"button",onClick:()=>s("none"),className:`flex items-center justify-between rounded-2xl border px-3 py-2 text-left text-sm transition-colors ${e==="none"?"border-black/60 dark:border-white/80 bg-black/5 dark:bg-white/10":"border-black/10 dark:border-white/15 hover:bg-black/3 dark:hover:bg-white/5"}`,children:c.jsx("span",{className:"font-medium",children:"System default"})}),c.jsxs("button",{type:"button",onClick:()=>s("blue"),className:`flex items-center justify-between rounded-2xl border px-3 py-2 text-left text-sm transition-colors ${e==="blue"?"border-blue-500/80 bg-blue-500/5":"border-black/10 dark:border-white/15 hover:bg-black/3 dark:hover:bg-white/5"}`,children:[c.jsx("span",{className:"font-medium",children:"Blue"}),c.jsx("span",{className:"flex h-5 w-5 rounded-full bg-[#007AFF]"})]}),c.jsxs("button",{type:"button",onClick:()=>s("green"),className:`flex items-center justify-between rounded-2xl border px-3 py-2 text-left text-sm transition-colors ${e==="green"?"border-emerald-500/80 bg-emerald-500/5":"border-black/10 dark:border-white/15 hover:bg-black/3 dark:hover:bg-white/5"}`,children:[c.jsx("span",{className:"font-medium",children:"Green"}),c.jsx("span",{className:"flex h-5 w-5 rounded-full bg-[#0F806B]"})]}),c.jsxs("button",{type:"button",onClick:()=>s("orange"),className:`flex items-center justify-between rounded-2xl border px-3 py-2 text-left text-sm transition-colors ${e==="orange"?"border-orange-500/80 bg-orange-500/5":"border-black/10 dark:border-white/15 hover:bg-black/3 dark:hover:bg-white/5"}`,children:[c.jsx("span",{className:"font-medium",children:"Orange"}),c.jsx("span",{className:"flex h-5 w-5 rounded-full bg-[#FF7900]"})]}),c.jsxs("button",{type:"button",onClick:()=>s("gold"),className:`flex items-center justify-between rounded-2xl border px-3 py-2 text-left text-sm transition-colors ${e==="gold"?"border-amber-500/80 bg-amber-500/5":"border-black/10 dark:border-white/15 hover:bg-black/3 dark:hover:bg-white/5"}`,children:[c.jsx("span",{className:"font-medium",children:"Gold"}),c.jsx("span",{className:"flex h-5 w-5 rounded-full bg-[#CA9E2C]"})]}),c.jsxs("button",{type:"button",onClick:()=>s("brand"),className:`flex items-center justify-between rounded-2xl border px-3 py-2 text-left text-sm transition-colors ${e==="brand"?"border-black/70 dark:border-white/80 bg-black/5 dark:bg-white/10":"border-black/10 dark:border-white/15 hover:bg-black/3 dark:hover:bg-white/5"}`,children:[c.jsx("span",{className:"font-medium",children:"Brand Theme"}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"h-4 w-4 rounded-full bg-[#000000]"}),c.jsx("span",{className:"h-4 w-4 rounded-full bg-[#007AFF]"}),c.jsx("span",{className:"h-4 w-4 rounded-full bg-[#CA9E2C]"})]})]})]})]})]})]})})}function L7(){return c.jsxs(OO,{children:[c.jsx(On,{path:"/",element:c.jsx(Xh,{to:"/login",replace:!0})}),c.jsx(On,{path:"/login",element:c.jsx(f5,{})}),c.jsx(On,{path:"/auth/callback",element:c.jsx(p5,{})}),c.jsxs(On,{path:"/app",element:c.jsx(I7,{children:c.jsx(j4,{})}),children:[c.jsx(On,{index:!0,element:c.jsx(Xh,{to:"chat",replace:!0})}),c.jsx(On,{path:"chat",element:c.jsx(X6,{})}),c.jsx(On,{path:"video-critique",element:c.jsx(_7,{})}),c.jsx(On,{path:"mockup",element:c.jsx(TU,{})}),c.jsx(On,{path:"proposals",element:c.jsx(VU,{})}),c.jsx(On,{path:"notifications",element:c.jsx(xH,{})}),c.jsx(On,{path:"admin",element:c.jsx(mH,{})}),c.jsx(On,{path:"asset-management",element:c.jsx(M7,{})}),c.jsx(On,{path:"settings",element:c.jsx(D7,{})})]}),c.jsx(On,{path:"*",element:c.jsx(Xh,{to:"/login",replace:!0})})]})}function $7(){if(!(typeof window>"u"))try{const t=window.AudioContext||window.webkitAudioContext;if(!t)return;const e=new t,n=e.createOscillator(),s=e.createGain();n.type="sine",n.frequency.value=740,s.gain.value=.15,n.connect(s),s.connect(e.destination),n.start(),s.gain.exponentialRampToValueAtTime(.001,e.currentTime+.25),n.stop(e.currentTime+.3),n.onended=()=>{e.close()}}catch{}}function F7(t){if(!t)return"";const e=new Date(t);return Number.isNaN(e.getTime())?"":e.toLocaleString()}function z7({children:t}){const[e,n]=b.useState([]),[s,r]=b.useState(!0),[i,o]=b.useState([]),a=b.useRef(new Set),l=b.useRef(!1),u=b.useRef(new Map),d=b.useCallback(async()=>{r(!0);const v=await MB();n(Array.isArray(v)?v:[]),r(!1)},[]),h=b.useCallback(async()=>{await DB(),n([])},[]),f=b.useCallback(async v=>{v&&(await LB(v),n(k=>k.filter(S=>S.id!==v)))},[]),p=b.useCallback(async v=>{v&&(await $B(v),n(k=>k.map(S=>S.id===v?{...S,read:!0}:S)))},[]),w=b.useCallback(async v=>{const k=await IB(v);return n(S=>[k,...S]),k},[]),x=b.useCallback(v=>{o(S=>S.filter(C=>C.id!==v));const k=u.current.get(v);k&&(clearTimeout(k),u.current.delete(v))},[]),y=b.useCallback(v=>{if(!(v!=null&&v.id))return;o(S=>[...S,{id:v.id,notification:v}]);const k=setTimeout(()=>x(v.id),4200);u.current.set(v.id,k)},[x]);b.useEffect(()=>{d()},[d]),b.useEffect(()=>{if(!l.current){e.forEach(k=>a.current.add(k.id)),l.current=!0;return}const v=e.filter(k=>k.id&&!a.current.has(k.id));v.length&&($7(),v.forEach(k=>{a.current.add(k.id),y(k)}))},[e,y]),b.useEffect(()=>{if(typeof window>"u")return;const v=k=>{k.key===FB&&d()};return window.addEventListener("storage",v),()=>window.removeEventListener("storage",v)},[d]),b.useEffect(()=>{if(!(typeof window>"u"))return window.mmgNotify=v=>w(v),window.mmgNotifications={add:v=>w(v),clear:h,dismiss:f,markRead:p},()=>{delete window.mmgNotify,delete window.mmgNotifications}},[w,h,f,p]);const g=b.useMemo(()=>e.filter(v=>!v.read).length,[e]),m=b.useMemo(()=>({notifications:e,loading:s,unreadCount:g,toasts:i,addNotification:w,clearAll:h,dismissNotification:f,markRead:p,dismissToast:x,formatTime:F7}),[e,s,g,i,w,h,f,p,x]);return c.jsx(BE.Provider,{value:m,children:t})}function B7(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:s,onRegistered:r,onRegisteredSW:i,onRegisterError:o}=t;let a,l;const u=async(h=!0)=>{await l};async function d(){if("serviceWorker"in navigator){if(a=await _M(async()=>{const{Workbox:h}=await import("./workbox-window.prod.es5-vqzQaGvo.js");return{Workbox:h}},[]).then(({Workbox:h})=>new h("/sw.js",{scope:"/",type:"classic"})).catch(h=>{o==null||o(h)}),!a)return;a.addEventListener("activated",h=>{(h.isUpdate||h.isExternal)&&window.location.reload()}),a.addEventListener("installed",h=>{h.isUpdate||s==null||s()}),a.register({immediate:e}).then(h=>{i?i("/sw.js",h):r==null||r(h)}).catch(h=>{o==null||o(h)})}}return l=d(),u}B7({immediate:!0});const U7="mmg-brand-theme";if(typeof window<"u"){const t=window.localStorage.getItem(U7);t&&t!=="none"?document.body.setAttribute("data-brand-theme",t):document.body.removeAttribute("data-brand-theme"),window.addEventListener("wheel",e=>{const n=e.target;n instanceof HTMLInputElement&&n.type==="number"&&n===document.activeElement&&e.preventDefault()},{passive:!1})}const H7=new pM({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1}}});Cg.createRoot(document.getElementById("root")).render(c.jsx(ge.StrictMode,{children:c.jsx(zO,{attribute:"class",defaultTheme:"light",enableSystem:!1,children:c.jsx(mM,{client:H7,children:c.jsx(d5,{children:c.jsx(z7,{children:c.jsx(DO,{children:c.jsx(L7,{})})})})})})}));
