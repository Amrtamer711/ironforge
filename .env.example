# =============================================================================
# Sales Proposals Bot - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values.
# All settings have sensible defaults unless marked as REQUIRED.
# =============================================================================

# -----------------------------------------------------------------------------
# ENVIRONMENT
# -----------------------------------------------------------------------------
# Application environment: development, staging, production
ENVIRONMENT=development

# Enable debug mode (more verbose logging)
DEBUG=false

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# -----------------------------------------------------------------------------
# PATHS (Optional - auto-detected if not set)
# -----------------------------------------------------------------------------
# Base directory for persistent data (default: ./data or /data in production)
# DATA_DIR=/path/to/data

# Directory containing location templates
# TEMPLATES_DIR=/path/to/templates

# -----------------------------------------------------------------------------
# DATABASE
# -----------------------------------------------------------------------------
# Database backend: sqlite, supabase
DB_BACKEND=sqlite

# =============================================================================
# SUPABASE CONFIGURATION (4 separate projects for full decoupling)
# =============================================================================
# Architecture:
#   - Sales Bot: Stores proposals, mockups, AI costs, booking orders, etc.
#   - UI: Handles authentication only (users log in via UI's Supabase Auth)
#   - Each has dev and prod environments
#
# The system automatically selects dev/prod based on ENVIRONMENT setting.
# =============================================================================

# -----------------------------------------------------------------------------
# SALES BOT SUPABASE (Data storage)
# -----------------------------------------------------------------------------
# Development
# SALESBOT_DEV_SUPABASE_URL=https://your-salesbot-dev.supabase.co
# SALESBOT_DEV_SUPABASE_ANON_KEY=eyJ...
# SALESBOT_DEV_SUPABASE_SERVICE_ROLE_KEY=eyJ...

# Production
# SALESBOT_PROD_SUPABASE_URL=https://your-salesbot-prod.supabase.co
# SALESBOT_PROD_SUPABASE_ANON_KEY=eyJ...
# SALESBOT_PROD_SUPABASE_SERVICE_ROLE_KEY=eyJ...

# -----------------------------------------------------------------------------
# CROSS-SERVICE AUTH (REQUIRED for Sales Bot to validate UI tokens)
# -----------------------------------------------------------------------------
# Copy the JWT secret from UI's Supabase project (Project Settings → API → JWT Secret)
# This allows Sales Bot to validate tokens issued by UI's Supabase Auth
# NOTE: UI Supabase URL/keys are managed by unified-ui (Node.js service), not here.
# UI_JWT_SECRET=your-ui-supabase-jwt-secret

# -----------------------------------------------------------------------------
# LEGACY SUPABASE (backwards compatibility - use the above instead)
# -----------------------------------------------------------------------------
# SUPABASE_URL=https://your-project.supabase.co
# SUPABASE_SERVICE_KEY=your-service-key
# SUPABASE_JWT_SECRET=your-jwt-secret

# -----------------------------------------------------------------------------
# AUTHENTICATION
# -----------------------------------------------------------------------------
# Authentication provider: local, supabase
AUTH_PROVIDER=local

# JWT secret for token signing (uses SUPABASE_JWT_SECRET if not set)
# JWT_SECRET=your-jwt-secret

# -----------------------------------------------------------------------------
# LLM PROVIDERS (REQUIRED for AI features)
# -----------------------------------------------------------------------------
# LLM provider for text completions: openai, google
LLM_PROVIDER=openai

# Image generation provider: openai, google
IMAGE_PROVIDER=google

# OpenAI API key (REQUIRED if using openai provider)
# OPENAI_API_KEY=sk-...

# Google AI API key (REQUIRED if using google provider)
# GOOGLE_API_KEY=...

# -----------------------------------------------------------------------------
# SLACK INTEGRATION (REQUIRED for Slack bot)
# -----------------------------------------------------------------------------
# SLACK_BOT_TOKEN=xoxb-...
# SLACK_SIGNING_SECRET=...

# -----------------------------------------------------------------------------
# FILE STORAGE
# -----------------------------------------------------------------------------
# Storage provider: local, supabase, s3
STORAGE_PROVIDER=local

# AWS S3 settings (REQUIRED if STORAGE_PROVIDER=s3)
# AWS_ACCESS_KEY_ID=...
# AWS_SECRET_ACCESS_KEY=...
# AWS_S3_BUCKET=your-bucket
# AWS_REGION=me-south-1

# -----------------------------------------------------------------------------
# CACHING
# -----------------------------------------------------------------------------
# Cache backend: memory, redis
CACHE_BACKEND=memory

# Default cache TTL in seconds (empty or "none" for no expiry)
CACHE_DEFAULT_TTL=300

# Maximum entries for memory cache
CACHE_MAX_SIZE=1000

# -----------------------------------------------------------------------------
# REDIS (Required for distributed caching/rate limiting)
# -----------------------------------------------------------------------------
# Redis connection URL
# REDIS_URL=redis://localhost:6379

# -----------------------------------------------------------------------------
# RATE LIMITING
# -----------------------------------------------------------------------------
# Enable rate limiting on API endpoints
RATE_LIMIT_ENABLED=false

# Rate limit storage backend: memory, redis
RATE_LIMIT_BACKEND=memory

# Default requests per minute per client
RATE_LIMIT_DEFAULT=100

# -----------------------------------------------------------------------------
# BACKGROUND JOB QUEUE
# -----------------------------------------------------------------------------
# Maximum concurrent background jobs
JOB_QUEUE_MAX_CONCURRENT=5

# Default job timeout in seconds
JOB_QUEUE_DEFAULT_TIMEOUT=600

# -----------------------------------------------------------------------------
# API KEYS
# -----------------------------------------------------------------------------
# API key storage: env, database, combined
API_KEY_STORE=combined

# Enable API key authentication
API_KEYS_ENABLED=true

# Environment-based API keys (format: API_KEY_<NAME>=key:scope1,scope2)
# API_KEY_CLIENT1=your-api-key:read,write
# API_KEY_CLIENT2=another-key:read

# -----------------------------------------------------------------------------
# RBAC
# -----------------------------------------------------------------------------
# RBAC provider: local, database
RBAC_PROVIDER=local

# -----------------------------------------------------------------------------
# API SERVER
# -----------------------------------------------------------------------------
# API server host
API_HOST=0.0.0.0

# API server port
API_PORT=8000

# Allowed CORS origins (comma-separated)
CORS_ORIGINS=http://localhost:3005,http://localhost:3000

# -----------------------------------------------------------------------------
# BUSINESS SETTINGS
# -----------------------------------------------------------------------------
# Default currency for proposals
DEFAULT_CURRENCY=AED

# -----------------------------------------------------------------------------
# EXTERNAL SERVICES
# -----------------------------------------------------------------------------
# External URL for render/mockup service
# RENDER_EXTERNAL_URL=https://your-render-service.com

# -----------------------------------------------------------------------------
# PDF GENERATION
# -----------------------------------------------------------------------------
# Maximum concurrent PDF conversion workers
PDF_CONVERT_CONCURRENCY=3

# -----------------------------------------------------------------------------
# ADMIN / COSTS
# -----------------------------------------------------------------------------
# Authorization code for clearing AI costs data
# COSTS_CLEAR_AUTH_CODE=your-secret-code
